import{s as Ge,a as La,u as $a,g as Ua,b as Ba,x as Bu,y as Zo,z as y_,A as uh,e as ja,c as Ze,o as za,n as v_}from"../chunks/scheduler.C82xti6L.js";import{S as ln,i as un,e as z,c as q,a as Q,d as F,l as H,g as G,m as X,n as et,o as xn,z as ju,A as qa,v as vt,w as Tt,x as Et,y as wt,s as J,t as rt,B as Nn,f as Z,b as it,h as $,j as zt,C as Ga,r as Si,p as Ci,D as ys}from"../chunks/index.BC9dFp--.js";import{w as Kr}from"../chunks/index.LvUj3rKe.js";function Vr(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function T_(i,t){const e={},n={},r={$$scope:1};let s=i.length;for(;s--;){const o=i[s],l=t[s];if(l){for(const u in o)u in l||(n[u]=1);for(const u in l)r[u]||(e[u]=l[u],r[u]=1);i[s]=l}else for(const u in o)r[u]=1}for(const o in n)o in e||(e[o]=void 0);return e}const kr=Kr([]),Ka=Kr(null),ze=Kr(0);function Di(i,t){return i*t.minimaal*t.effectPerWeek*t.rondesPerJaar}function ks(i,t){return Di(i,t)*t.kostenPerPersoonPerDrieMaanden}function xs(i,t){if(i===0)return 0;{const e=Number(t.minimaal)+(i-1)*(Number(t.maximaal)-Number(t.minimaal))/9;return Math.round(e)}}const ta=Kr([]);function E_(i){let t,e;const n=i[1].default,r=La(n,i,i[0],null);return{c(){t=z("div"),r&&r.c(),this.h()},l(s){t=q(s,"DIV",{class:!0});var o=Q(t);r&&r.l(o),o.forEach(F),this.h()},h(){H(t,"class","p-14 bg-white shadow-lg flex flex-col")},m(s,o){G(s,t,o),r&&r.m(t,null),e=!0},p(s,[o]){r&&r.p&&(!e||o&1)&&$a(r,n,s,s[0],e?Ba(n,s[0],o,null):Ua(s[0]),null)},i(s){e||(X(r,s),e=!0)},o(s){et(r,s),e=!1},d(s){s&&F(t),r&&r.d(s)}}}function w_(i,t,e){let{$$slots:n={},$$scope:r}=t;return i.$$set=s=>{"$$scope"in s&&e(0,r=s.$$scope)},[r,n]}class Ki extends ln{constructor(t){super(),un(this,t,w_,E_,Ge,{})}}function I_(i){return i.filter(Boolean).join(" ")}function No(i){let t,e,n,r,s;const o=i[6].default,l=La(o,i,i[5],null);let u=[{class:e="button-base "+i[3]},{href:i[1]},{target:i[2]},{role:"button"},{tabindex:"0"},i[4]],c={};for(let f=0;f<u.length;f+=1)c=Zo(c,u[f]);return{c(){t=z(i[1]?"a":"button"),l&&l.c(),this.h()},l(f){t=q(f,((i[1]?"a":"button")||"null").toUpperCase(),{class:!0,href:!0,target:!0,role:!0,tabindex:!0});var _=Q(t);l&&l.l(_),_.forEach(F),this.h()},h(){ju(i[1]?"a":"button")(t,c)},m(f,_){G(f,t,_),l&&l.m(t,null),i[8](t),n=!0,r||(s=qa(t,"click",i[7]),r=!0)},p(f,_){l&&l.p&&(!n||_&32)&&$a(l,o,f,f[5],n?Ba(o,f[5],_,null):Ua(f[5]),null),ju(f[1]?"a":"button")(t,c=T_(u,[(!n||_&8&&e!==(e="button-base "+f[3]))&&{class:e},(!n||_&2)&&{href:f[1]},(!n||_&4)&&{target:f[2]},{role:"button"},{tabindex:"0"},_&16&&f[4]]))},i(f){n||(X(l,f),n=!0)},o(f){et(l,f),n=!1},d(f){f&&F(t),l&&l.d(f),i[8](null),r=!1,s()}}}function A_(i){let t=i[1]?"a":"button",e,n,r=(i[1]?"a":"button")&&No(i);return{c(){r&&r.c(),e=xn()},l(s){r&&r.l(s),e=xn()},m(s,o){r&&r.m(s,o),G(s,e,o),n=!0},p(s,[o]){s[1],t?Ge(t,s[1]?"a":"button")?(r.d(1),r=No(s),t=s[1]?"a":"button",r.c(),r.m(e.parentNode,e)):r.p(s,o):(r=No(s),t=s[1]?"a":"button",r.c(),r.m(e.parentNode,e))},i(s){n||(X(r,s),n=!0)},o(s){et(r,s),n=!1},d(s){s&&F(e),r&&r.d(s)}}}function b_(i,t,e){const n=["el","href","target","class"];let r=Bu(t,n),{$$slots:s={},$$scope:o}=t,{el:l=void 0}=t,{href:u=void 0}=t,{target:c=void 0}=t,{class:f=""}=t;function _(y){uh.call(this,i,y)}function p(y){ja[y?"unshift":"push"](()=>{l=y,e(0,l)})}return i.$$set=y=>{t=Zo(Zo({},t),y_(y)),e(4,r=Bu(t,n)),"el"in y&&e(0,l=y.el),"href"in y&&e(1,u=y.href),"target"in y&&e(2,c=y.target),"class"in y&&e(3,f=y.class),"$$scope"in y&&e(5,o=y.$$scope)},[l,u,c,f,r,o,s,_,p]}class R_ extends ln{constructor(t){super(),un(this,t,b_,A_,Ge,{el:0,href:1,target:2,class:3})}}function P_(i){let t;const e=i[5].default,n=La(e,i,i[7],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),t=!0},p(r,s){n&&n.p&&(!t||s&128)&&$a(n,e,r,r[7],t?Ba(e,r[7],s,null):Ua(r[7]),null)},i(r){t||(X(n,r),t=!0)},o(r){et(n,r),t=!1},d(r){n&&n.d(r)}}}function S_(i){let t,e;return t=new R_({props:{class:"button-main px-5 rounded-md py-3 "+i[2],href:i[0],target:i[1],$$slots:{default:[P_]},$$scope:{ctx:i}}}),t.$on("click",i[6]),{c(){vt(t.$$.fragment)},l(n){Tt(t.$$.fragment,n)},m(n,r){Et(t,n,r),e=!0},p(n,[r]){const s={};r&4&&(s.class="button-main px-5 rounded-md py-3 "+n[2]),r&1&&(s.href=n[0]),r&2&&(s.target=n[1]),r&128&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(X(t.$$.fragment,n),e=!0)},o(n){et(t.$$.fragment,n),e=!1},d(n){wt(t,n)}}}function C_(i,t,e){let n,{$$slots:r={},$$scope:s}=t,{theme:o="blue"}=t,{href:l=void 0}=t,{target:u=void 0}=t,{class:c=""}=t;function f(_){uh.call(this,i,_)}return i.$$set=_=>{"theme"in _&&e(3,o=_.theme),"href"in _&&e(0,l=_.href),"target"in _&&e(1,u=_.target),"class"in _&&e(4,c=_.class),"$$scope"in _&&e(7,s=_.$$scope)},i.$$.update=()=>{i.$$.dirty&24&&e(2,n=I_([o==="blue"&&"bg-blue-500 text-white",o==="red"&&"bg-red-500 text-white",c]))},[l,u,n,o,c,r,f,s]}class ge extends ln{constructor(t){super(),un(this,t,C_,S_,Ge,{theme:3,href:0,target:1,class:4})}}function zu(i,t,e){const n=i.slice();return n[9]=t[e],n[11]=e,n}function qu(i){let t,e,n=i[0][i[11]].naam.charAt(0).toUpperCase()+i[0][i[11]].naam.slice(1)+"",r,s,o=i[9].toFixed(2)+"",l;return{c(){t=z("div"),e=z("span"),r=rt(n),s=rt(" heeft een gemiddelde schaal van "),l=rt(o)},l(u){t=q(u,"DIV",{});var c=Q(t);e=q(c,"SPAN",{});var f=Q(e);r=it(f,n),s=it(f," heeft een gemiddelde schaal van "),l=it(f,o),f.forEach(F),c.forEach(F)},m(u,c){G(u,t,c),$(t,e),$(e,r),$(e,s),$(e,l)},p(u,c){c&1&&n!==(n=u[0][u[11]].naam.charAt(0).toUpperCase()+u[0][u[11]].naam.slice(1)+"")&&zt(r,n),c&2&&o!==(o=u[9].toFixed(2)+"")&&zt(l,o)},d(u){u&&F(t)}}}function D_(i){let t;return{c(){t=rt("Terug")},l(e){t=it(e,"Terug")},m(e,n){G(e,t,n)},d(e){e&&F(t)}}}function V_(i){let t,e="Resultaat",n,r,s,o,l,u,c,f,_,p=i[3].toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"",y,E,m,I,C,S,k,D,x,O=Vr(i[1]),w=[];for(let g=0;g<O.length;g+=1)w[g]=qu(zu(i,O,g));return D=new ge({props:{theme:"red",$$slots:{default:[D_]},$$scope:{ctx:i}}}),D.$on("click",i[6]),{c(){t=z("div"),t.textContent=e,n=J();for(let g=0;g<w.length;g+=1)w[g].c();r=J(),s=z("div"),o=z("p"),l=rt("Geholpen mensen per jaar: "),u=rt(i[2]),c=J(),f=z("p"),_=rt("Kosten per jaar: "),y=rt(p),E=J(),m=z("p"),I=rt("Aantal vrijwilligers per jaar: "),C=rt(i[4]),S=J(),k=z("div"),vt(D.$$.fragment),this.h()},l(g){t=q(g,"DIV",{class:!0,"data-svelte-h":!0}),Nn(t)!=="svelte-17bvcbp"&&(t.textContent=e),n=Z(g);for(let nt=0;nt<w.length;nt+=1)w[nt].l(g);r=Z(g),s=q(g,"DIV",{class:!0});var v=Q(s);o=q(v,"P",{});var b=Q(o);l=it(b,"Geholpen mensen per jaar: "),u=it(b,i[2]),b.forEach(F),c=Z(v),f=q(v,"P",{});var R=Q(f);_=it(R,"Kosten per jaar: "),y=it(R,p),R.forEach(F),E=Z(v),m=q(v,"P",{});var P=Q(m);I=it(P,"Aantal vrijwilligers per jaar: "),C=it(P,i[4]),P.forEach(F),v.forEach(F),S=Z(g),k=q(g,"DIV",{});var A=Q(k);Tt(D.$$.fragment,A),A.forEach(F),this.h()},h(){H(t,"class","font-bold text-2xl mb-4"),H(s,"class","py-2")},m(g,v){G(g,t,v),G(g,n,v);for(let b=0;b<w.length;b+=1)w[b]&&w[b].m(g,v);G(g,r,v),G(g,s,v),$(s,o),$(o,l),$(o,u),$(s,c),$(s,f),$(f,_),$(f,y),$(s,E),$(s,m),$(m,I),$(m,C),G(g,S,v),G(g,k,v),Et(D,k,null),x=!0},p(g,v){if(v&3){O=Vr(g[1]);let R;for(R=0;R<O.length;R+=1){const P=zu(g,O,R);w[R]?w[R].p(P,v):(w[R]=qu(P),w[R].c(),w[R].m(r.parentNode,r))}for(;R<w.length;R+=1)w[R].d(1);w.length=O.length}(!x||v&4)&&zt(u,g[2]),(!x||v&8)&&p!==(p=g[3].toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"")&&zt(y,p),(!x||v&16)&&zt(C,g[4]);const b={};v&4096&&(b.$$scope={dirty:v,ctx:g}),D.$set(b)},i(g){x||(X(D.$$.fragment,g),x=!0)},o(g){et(D.$$.fragment,g),x=!1},d(g){g&&(F(t),F(n),F(r),F(s),F(S),F(k)),Ga(w,g),wt(D)}}}function k_(i){let t,e;return t=new Ki({props:{$$slots:{default:[V_]},$$scope:{ctx:i}}}),{c(){vt(t.$$.fragment)},l(n){Tt(t.$$.fragment,n)},m(n,r){Et(t,n,r),e=!0},p(n,[r]){const s={};r&4127&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(X(t.$$.fragment,n),e=!0)},o(n){et(t.$$.fragment,n),e=!1},d(n){wt(t,n)}}}function x_(i,t,e){let n,r;Ze(i,kr,p=>e(5,n=p)),Ze(i,ta,p=>e(0,r=p));let s=[],o=0,l=0,u=0;const c=()=>{let p=[],y=n.length;n.forEach(E=>{E.values.forEach((m,I)=>{p[I]||(p[I]=0),p[I]+=m})}),e(1,s=p.map(E=>E/y))},f=()=>{e(2,o=r.reduce((p,y,E)=>p+Di(s[E]??0,y),0)),e(3,l=r.reduce((p,y,E)=>p+ks(s[E]??0,y),0)),e(4,u=r.reduce((p,y,E)=>p+xs(s[E]??0,y),0))},_=()=>{ze.set(0)};return i.$$.update=()=>{i.$$.dirty&33&&r.length&&n.length&&(c(),f())},[r,s,o,l,u,n,_]}class N_ extends ln{constructor(t){super(),un(this,t,x_,k_,Ge,{})}}var Gu={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch=function(i){const t=[];let e=0;for(let n=0;n<i.length;n++){let r=i.charCodeAt(n);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(i.charCodeAt(++n)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},O_=function(i){const t=[];let e=0,n=0;for(;e<i.length;){const r=i[e++];if(r<128)t[n++]=String.fromCharCode(r);else if(r>191&&r<224){const s=i[e++];t[n++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=i[e++],o=i[e++],l=i[e++],u=((r&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;t[n++]=String.fromCharCode(55296+(u>>10)),t[n++]=String.fromCharCode(56320+(u&1023))}else{const s=i[e++],o=i[e++];t[n++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},hh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<i.length;r+=3){const s=i[r],o=r+1<i.length,l=o?i[r+1]:0,u=r+2<i.length,c=u?i[r+2]:0,f=s>>2,_=(s&3)<<4|l>>4;let p=(l&15)<<2|c>>6,y=c&63;u||(y=64,o||(p=64)),n.push(e[f],e[_],e[p],e[y])}return n.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(ch(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):O_(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<i.length;){const s=e[i.charAt(r++)],l=r<i.length?e[i.charAt(r)]:0;++r;const c=r<i.length?e[i.charAt(r)]:64;++r;const _=r<i.length?e[i.charAt(r)]:64;if(++r,s==null||l==null||c==null||_==null)throw new M_;const p=s<<2|l>>4;if(n.push(p),c!==64){const y=l<<4&240|c>>2;if(n.push(y),_!==64){const E=c<<6&192|_;n.push(E)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class M_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const F_=function(i){const t=ch(i);return hh.encodeByteArray(t,!0)},Ns=function(i){return F_(i).replace(/\./g,"")},L_=function(i){try{return hh.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=()=>$_().__FIREBASE_DEFAULTS__,B_=()=>{if(typeof process>"u"||typeof Gu>"u")return;const i=Gu.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},j_=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&L_(i[1]);return t&&JSON.parse(t)},Ha=()=>{try{return U_()||B_()||j_()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},z_=i=>{var t,e;return(e=(t=Ha())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[i]},q_=i=>{const t=z_(i);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),n]:[t.substring(0,e),n]},fh=()=>{var i;return(i=Ha())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},n=t||"demo-project",r=i.iat||0,s=i.sub||i.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Ns(JSON.stringify(e)),Ns(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function W_(){var i;const t=(i=Ha())===null||i===void 0?void 0:i.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Q_(){return!W_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function X_(){try{return typeof indexedDB=="object"}catch{return!1}}function Y_(){return new Promise((i,t)=>{try{let e=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(n),i(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="FirebaseError";class Hr extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name=J_,Object.setPrototypeOf(this,Hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dh.prototype.create)}}class dh{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?Z_(s,n):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new Hr(r,l,n)}}function Z_(i,t){return i.replace(tp,(e,n)=>{const r=t[n];return r!=null?String(r):`<${n}?>`})}const tp=/\{\$([^}]+)}/g;function ea(i,t){if(i===t)return!0;const e=Object.keys(i),n=Object.keys(t);for(const r of e){if(!n.includes(r))return!1;const s=i[r],o=t[r];if(Ku(s)&&Ku(o)){if(!ea(s,o))return!1}else if(s!==o)return!1}for(const r of n)if(!e.includes(r))return!1;return!0}function Ku(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(i){return i&&i._delegate?i._delegate:i}class Vi{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const n=new G_;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(rp(t))try{this.getOrInitializeService({instanceIdentifier:Qn})}catch{}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const s=this.getOrInitializeService({instanceIdentifier:r});n.resolve(s)}catch{}}}}clearInstance(t=Qn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Qn){return this.instances.has(t)}getOptions(t=Qn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&o.resolve(r)}return r}onInit(t,e){var n;const r=this.normalizeInstanceIdentifier(e),s=(n=this.onInitCallbacks.get(r))!==null&&n!==void 0?n:new Set;s.add(t),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:np(t),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Qn){return this.component?this.component.multipleInstances?t:Qn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function np(i){return i===Qn?void 0:i}function rp(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new ep(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(ct||(ct={}));const sp={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},op=ct.INFO,ap={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},lp=(i,t,...e)=>{if(t<i.logLevel)return;const n=new Date().toISOString(),r=ap[t];if(r)console[r](`[${n}]  ${i.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class _h{constructor(t){this.name=t,this._logLevel=op,this._logHandler=lp,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ct))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?sp[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...t),this._logHandler(this,ct.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...t),this._logHandler(this,ct.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ct.INFO,...t),this._logHandler(this,ct.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ct.WARN,...t),this._logHandler(this,ct.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...t),this._logHandler(this,ct.ERROR,...t)}}const up=(i,t)=>t.some(e=>i instanceof e);let Hu,Wu;function cp(){return Hu||(Hu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hp(){return Wu||(Wu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ph=new WeakMap,na=new WeakMap,mh=new WeakMap,Oo=new WeakMap,Wa=new WeakMap;function fp(i){const t=new Promise((e,n)=>{const r=()=>{i.removeEventListener("success",s),i.removeEventListener("error",o)},s=()=>{e(Sn(i.result)),r()},o=()=>{n(i.error),r()};i.addEventListener("success",s),i.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&ph.set(e,i)}).catch(()=>{}),Wa.set(t,i),t}function dp(i){if(na.has(i))return;const t=new Promise((e,n)=>{const r=()=>{i.removeEventListener("complete",s),i.removeEventListener("error",o),i.removeEventListener("abort",o)},s=()=>{e(),r()},o=()=>{n(i.error||new DOMException("AbortError","AbortError")),r()};i.addEventListener("complete",s),i.addEventListener("error",o),i.addEventListener("abort",o)});na.set(i,t)}let ra={get(i,t,e){if(i instanceof IDBTransaction){if(t==="done")return na.get(i);if(t==="objectStoreNames")return i.objectStoreNames||mh.get(i);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Sn(i[t])},set(i,t,e){return i[t]=e,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function _p(i){ra=i(ra)}function pp(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const n=i.call(Mo(this),t,...e);return mh.set(n,t.sort?t.sort():[t]),Sn(n)}:hp().includes(i)?function(...t){return i.apply(Mo(this),t),Sn(ph.get(this))}:function(...t){return Sn(i.apply(Mo(this),t))}}function mp(i){return typeof i=="function"?pp(i):(i instanceof IDBTransaction&&dp(i),up(i,cp())?new Proxy(i,ra):i)}function Sn(i){if(i instanceof IDBRequest)return fp(i);if(Oo.has(i))return Oo.get(i);const t=mp(i);return t!==i&&(Oo.set(i,t),Wa.set(t,i)),t}const Mo=i=>Wa.get(i);function gp(i,t,{blocked:e,upgrade:n,blocking:r,terminated:s}={}){const o=indexedDB.open(i,t),l=Sn(o);return n&&o.addEventListener("upgradeneeded",u=>{n(Sn(o.result),u.oldVersion,u.newVersion,Sn(o.transaction),u)}),e&&o.addEventListener("blocked",u=>e(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const yp=["get","getKey","getAll","getAllKeys","count"],vp=["put","add","delete","clear"],Fo=new Map;function Qu(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(Fo.get(t))return Fo.get(t);const e=t.replace(/FromIndex$/,""),n=t!==e,r=vp.includes(e);if(!(e in(n?IDBIndex:IDBObjectStore).prototype)||!(r||yp.includes(e)))return;const s=async function(o,...l){const u=this.transaction(o,r?"readwrite":"readonly");let c=u.store;return n&&(c=c.index(l.shift())),(await Promise.all([c[e](...l),r&&u.done]))[0]};return Fo.set(t,s),s}_p(i=>({...i,get:(t,e,n)=>Qu(t,e)||i.get(t,e,n),has:(t,e)=>!!Qu(t,e)||i.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(Ep(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function Ep(i){const t=i.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ia="@firebase/app",Xu="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir=new _h("@firebase/app"),wp="@firebase/app-compat",Ip="@firebase/analytics-compat",Ap="@firebase/analytics",bp="@firebase/app-check-compat",Rp="@firebase/app-check",Pp="@firebase/auth",Sp="@firebase/auth-compat",Cp="@firebase/database",Dp="@firebase/database-compat",Vp="@firebase/functions",kp="@firebase/functions-compat",xp="@firebase/installations",Np="@firebase/installations-compat",Op="@firebase/messaging",Mp="@firebase/messaging-compat",Fp="@firebase/performance",Lp="@firebase/performance-compat",$p="@firebase/remote-config",Up="@firebase/remote-config-compat",Bp="@firebase/storage",jp="@firebase/storage-compat",zp="@firebase/firestore",qp="@firebase/vertexai-preview",Gp="@firebase/firestore-compat",Kp="firebase",Hp="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="[DEFAULT]",Wp={[ia]:"fire-core",[wp]:"fire-core-compat",[Ap]:"fire-analytics",[Ip]:"fire-analytics-compat",[Rp]:"fire-app-check",[bp]:"fire-app-check-compat",[Pp]:"fire-auth",[Sp]:"fire-auth-compat",[Cp]:"fire-rtdb",[Dp]:"fire-rtdb-compat",[Vp]:"fire-fn",[kp]:"fire-fn-compat",[xp]:"fire-iid",[Np]:"fire-iid-compat",[Op]:"fire-fcm",[Mp]:"fire-fcm-compat",[Fp]:"fire-perf",[Lp]:"fire-perf-compat",[$p]:"fire-rc",[Up]:"fire-rc-compat",[Bp]:"fire-gcs",[jp]:"fire-gcs-compat",[zp]:"fire-fst",[Gp]:"fire-fst-compat",[qp]:"fire-vertex","fire-js":"fire-js",[Kp]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os=new Map,Qp=new Map,oa=new Map;function Yu(i,t){try{i.container.addComponent(t)}catch(e){ir.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,e)}}function Ms(i){const t=i.name;if(oa.has(t))return ir.debug(`There were multiple attempts to register component ${t}.`),!1;oa.set(t,i);for(const e of Os.values())Yu(e,i);for(const e of Qp.values())Yu(e,i);return!0}function Xp(i,t){const e=i.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),i.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yp={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cn=new dh("app","Firebase",Yp);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Vi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Cn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp=Hp;function gh(i,t={}){let e=i;typeof t!="object"&&(t={name:t});const n=Object.assign({name:sa,automaticDataCollectionEnabled:!1},t),r=n.name;if(typeof r!="string"||!r)throw Cn.create("bad-app-name",{appName:String(r)});if(e||(e=fh()),!e)throw Cn.create("no-options");const s=Os.get(r);if(s){if(ea(e,s.options)&&ea(n,s.config))return s;throw Cn.create("duplicate-app",{appName:r})}const o=new ip(r);for(const u of oa.values())o.addComponent(u);const l=new Jp(e,n,o);return Os.set(r,l),l}function tm(i=sa){const t=Os.get(i);if(!t&&i===sa&&fh())return gh();if(!t)throw Cn.create("no-app",{appName:i});return t}function Rr(i,t,e){var n;let r=(n=Wp[i])!==null&&n!==void 0?n:i;e&&(r+=`-${e}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const l=[`Unable to register library "${r}" with version "${t}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ir.warn(l.join(" "));return}Ms(new Vi(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="firebase-heartbeat-database",nm=1,ki="firebase-heartbeat-store";let Lo=null;function yh(){return Lo||(Lo=gp(em,nm,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(ki)}catch(e){console.warn(e)}}}}).catch(i=>{throw Cn.create("idb-open",{originalErrorMessage:i.message})})),Lo}async function rm(i){try{const e=(await yh()).transaction(ki),n=await e.objectStore(ki).get(vh(i));return await e.done,n}catch(t){if(t instanceof Hr)ir.warn(t.message);else{const e=Cn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ir.warn(e.message)}}}async function Ju(i,t){try{const n=(await yh()).transaction(ki,"readwrite");await n.objectStore(ki).put(t,vh(i)),await n.done}catch(e){if(e instanceof Hr)ir.warn(e.message);else{const n=Cn.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});ir.warn(n.message)}}}function vh(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im=1024,sm=30*24*60*60*1e3;class om{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new lm(e),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,e;const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Zu();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=sm}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Zu(),{heartbeatsToSend:n,unsentEntries:r}=am(this._heartbeatsCache.heartbeats),s=Ns(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Zu(){return new Date().toISOString().substring(0,10)}function am(i,t=im){const e=[];let n=i.slice();for(const r of i){const s=e.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),tc(e)>t){s.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),tc(e)>t){e.pop();break}n=n.slice(1)}return{heartbeatsToSend:e,unsentEntries:n}}class lm{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return X_()?Y_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await rm(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return Ju(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return Ju(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function tc(i){return Ns(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(i){Ms(new Vi("platform-logger",t=>new Tp(t),"PRIVATE")),Ms(new Vi("heartbeat",t=>new om(t),"PRIVATE")),Rr(ia,Xu,i),Rr(ia,Xu,"esm2017"),Rr("fire-js","")}um("");var ec=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zn,Th;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(w,g){function v(){}v.prototype=g.prototype,w.D=g.prototype,w.prototype=new v,w.prototype.constructor=w,w.C=function(b,R,P){for(var A=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)A[nt-2]=arguments[nt];return g.prototype[R].apply(b,A)}}function e(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,e),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(w,g,v){v||(v=0);var b=Array(16);if(typeof g=="string")for(var R=0;16>R;++R)b[R]=g.charCodeAt(v++)|g.charCodeAt(v++)<<8|g.charCodeAt(v++)<<16|g.charCodeAt(v++)<<24;else for(R=0;16>R;++R)b[R]=g[v++]|g[v++]<<8|g[v++]<<16|g[v++]<<24;g=w.g[0],v=w.g[1],R=w.g[2];var P=w.g[3],A=g+(P^v&(R^P))+b[0]+3614090360&4294967295;g=v+(A<<7&4294967295|A>>>25),A=P+(R^g&(v^R))+b[1]+3905402710&4294967295,P=g+(A<<12&4294967295|A>>>20),A=R+(v^P&(g^v))+b[2]+606105819&4294967295,R=P+(A<<17&4294967295|A>>>15),A=v+(g^R&(P^g))+b[3]+3250441966&4294967295,v=R+(A<<22&4294967295|A>>>10),A=g+(P^v&(R^P))+b[4]+4118548399&4294967295,g=v+(A<<7&4294967295|A>>>25),A=P+(R^g&(v^R))+b[5]+1200080426&4294967295,P=g+(A<<12&4294967295|A>>>20),A=R+(v^P&(g^v))+b[6]+2821735955&4294967295,R=P+(A<<17&4294967295|A>>>15),A=v+(g^R&(P^g))+b[7]+4249261313&4294967295,v=R+(A<<22&4294967295|A>>>10),A=g+(P^v&(R^P))+b[8]+1770035416&4294967295,g=v+(A<<7&4294967295|A>>>25),A=P+(R^g&(v^R))+b[9]+2336552879&4294967295,P=g+(A<<12&4294967295|A>>>20),A=R+(v^P&(g^v))+b[10]+4294925233&4294967295,R=P+(A<<17&4294967295|A>>>15),A=v+(g^R&(P^g))+b[11]+2304563134&4294967295,v=R+(A<<22&4294967295|A>>>10),A=g+(P^v&(R^P))+b[12]+1804603682&4294967295,g=v+(A<<7&4294967295|A>>>25),A=P+(R^g&(v^R))+b[13]+4254626195&4294967295,P=g+(A<<12&4294967295|A>>>20),A=R+(v^P&(g^v))+b[14]+2792965006&4294967295,R=P+(A<<17&4294967295|A>>>15),A=v+(g^R&(P^g))+b[15]+1236535329&4294967295,v=R+(A<<22&4294967295|A>>>10),A=g+(R^P&(v^R))+b[1]+4129170786&4294967295,g=v+(A<<5&4294967295|A>>>27),A=P+(v^R&(g^v))+b[6]+3225465664&4294967295,P=g+(A<<9&4294967295|A>>>23),A=R+(g^v&(P^g))+b[11]+643717713&4294967295,R=P+(A<<14&4294967295|A>>>18),A=v+(P^g&(R^P))+b[0]+3921069994&4294967295,v=R+(A<<20&4294967295|A>>>12),A=g+(R^P&(v^R))+b[5]+3593408605&4294967295,g=v+(A<<5&4294967295|A>>>27),A=P+(v^R&(g^v))+b[10]+38016083&4294967295,P=g+(A<<9&4294967295|A>>>23),A=R+(g^v&(P^g))+b[15]+3634488961&4294967295,R=P+(A<<14&4294967295|A>>>18),A=v+(P^g&(R^P))+b[4]+3889429448&4294967295,v=R+(A<<20&4294967295|A>>>12),A=g+(R^P&(v^R))+b[9]+568446438&4294967295,g=v+(A<<5&4294967295|A>>>27),A=P+(v^R&(g^v))+b[14]+3275163606&4294967295,P=g+(A<<9&4294967295|A>>>23),A=R+(g^v&(P^g))+b[3]+4107603335&4294967295,R=P+(A<<14&4294967295|A>>>18),A=v+(P^g&(R^P))+b[8]+1163531501&4294967295,v=R+(A<<20&4294967295|A>>>12),A=g+(R^P&(v^R))+b[13]+2850285829&4294967295,g=v+(A<<5&4294967295|A>>>27),A=P+(v^R&(g^v))+b[2]+4243563512&4294967295,P=g+(A<<9&4294967295|A>>>23),A=R+(g^v&(P^g))+b[7]+1735328473&4294967295,R=P+(A<<14&4294967295|A>>>18),A=v+(P^g&(R^P))+b[12]+2368359562&4294967295,v=R+(A<<20&4294967295|A>>>12),A=g+(v^R^P)+b[5]+4294588738&4294967295,g=v+(A<<4&4294967295|A>>>28),A=P+(g^v^R)+b[8]+2272392833&4294967295,P=g+(A<<11&4294967295|A>>>21),A=R+(P^g^v)+b[11]+1839030562&4294967295,R=P+(A<<16&4294967295|A>>>16),A=v+(R^P^g)+b[14]+4259657740&4294967295,v=R+(A<<23&4294967295|A>>>9),A=g+(v^R^P)+b[1]+2763975236&4294967295,g=v+(A<<4&4294967295|A>>>28),A=P+(g^v^R)+b[4]+1272893353&4294967295,P=g+(A<<11&4294967295|A>>>21),A=R+(P^g^v)+b[7]+4139469664&4294967295,R=P+(A<<16&4294967295|A>>>16),A=v+(R^P^g)+b[10]+3200236656&4294967295,v=R+(A<<23&4294967295|A>>>9),A=g+(v^R^P)+b[13]+681279174&4294967295,g=v+(A<<4&4294967295|A>>>28),A=P+(g^v^R)+b[0]+3936430074&4294967295,P=g+(A<<11&4294967295|A>>>21),A=R+(P^g^v)+b[3]+3572445317&4294967295,R=P+(A<<16&4294967295|A>>>16),A=v+(R^P^g)+b[6]+76029189&4294967295,v=R+(A<<23&4294967295|A>>>9),A=g+(v^R^P)+b[9]+3654602809&4294967295,g=v+(A<<4&4294967295|A>>>28),A=P+(g^v^R)+b[12]+3873151461&4294967295,P=g+(A<<11&4294967295|A>>>21),A=R+(P^g^v)+b[15]+530742520&4294967295,R=P+(A<<16&4294967295|A>>>16),A=v+(R^P^g)+b[2]+3299628645&4294967295,v=R+(A<<23&4294967295|A>>>9),A=g+(R^(v|~P))+b[0]+4096336452&4294967295,g=v+(A<<6&4294967295|A>>>26),A=P+(v^(g|~R))+b[7]+1126891415&4294967295,P=g+(A<<10&4294967295|A>>>22),A=R+(g^(P|~v))+b[14]+2878612391&4294967295,R=P+(A<<15&4294967295|A>>>17),A=v+(P^(R|~g))+b[5]+4237533241&4294967295,v=R+(A<<21&4294967295|A>>>11),A=g+(R^(v|~P))+b[12]+1700485571&4294967295,g=v+(A<<6&4294967295|A>>>26),A=P+(v^(g|~R))+b[3]+2399980690&4294967295,P=g+(A<<10&4294967295|A>>>22),A=R+(g^(P|~v))+b[10]+4293915773&4294967295,R=P+(A<<15&4294967295|A>>>17),A=v+(P^(R|~g))+b[1]+2240044497&4294967295,v=R+(A<<21&4294967295|A>>>11),A=g+(R^(v|~P))+b[8]+1873313359&4294967295,g=v+(A<<6&4294967295|A>>>26),A=P+(v^(g|~R))+b[15]+4264355552&4294967295,P=g+(A<<10&4294967295|A>>>22),A=R+(g^(P|~v))+b[6]+2734768916&4294967295,R=P+(A<<15&4294967295|A>>>17),A=v+(P^(R|~g))+b[13]+1309151649&4294967295,v=R+(A<<21&4294967295|A>>>11),A=g+(R^(v|~P))+b[4]+4149444226&4294967295,g=v+(A<<6&4294967295|A>>>26),A=P+(v^(g|~R))+b[11]+3174756917&4294967295,P=g+(A<<10&4294967295|A>>>22),A=R+(g^(P|~v))+b[2]+718787259&4294967295,R=P+(A<<15&4294967295|A>>>17),A=v+(P^(R|~g))+b[9]+3951481745&4294967295,w.g[0]=w.g[0]+g&4294967295,w.g[1]=w.g[1]+(R+(A<<21&4294967295|A>>>11))&4294967295,w.g[2]=w.g[2]+R&4294967295,w.g[3]=w.g[3]+P&4294967295}n.prototype.u=function(w,g){g===void 0&&(g=w.length);for(var v=g-this.blockSize,b=this.B,R=this.h,P=0;P<g;){if(R==0)for(;P<=v;)r(this,w,P),P+=this.blockSize;if(typeof w=="string"){for(;P<g;)if(b[R++]=w.charCodeAt(P++),R==this.blockSize){r(this,b),R=0;break}}else for(;P<g;)if(b[R++]=w[P++],R==this.blockSize){r(this,b),R=0;break}}this.h=R,this.o+=g},n.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var g=1;g<w.length-8;++g)w[g]=0;var v=8*this.o;for(g=w.length-8;g<w.length;++g)w[g]=v&255,v/=256;for(this.u(w),w=Array(16),g=v=0;4>g;++g)for(var b=0;32>b;b+=8)w[v++]=this.g[g]>>>b&255;return w};function s(w,g){var v=l;return Object.prototype.hasOwnProperty.call(v,w)?v[w]:v[w]=g(w)}function o(w,g){this.h=g;for(var v=[],b=!0,R=w.length-1;0<=R;R--){var P=w[R]|0;b&&P==g||(v[R]=P,b=!1)}this.g=v}var l={};function u(w){return-128<=w&&128>w?s(w,function(g){return new o([g|0],0>g?-1:0)}):new o([w|0],0>w?-1:0)}function c(w){if(isNaN(w)||!isFinite(w))return _;if(0>w)return I(c(-w));for(var g=[],v=1,b=0;w>=v;b++)g[b]=w/v|0,v*=4294967296;return new o(g,0)}function f(w,g){if(w.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(w.charAt(0)=="-")return I(f(w.substring(1),g));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=c(Math.pow(g,8)),b=_,R=0;R<w.length;R+=8){var P=Math.min(8,w.length-R),A=parseInt(w.substring(R,R+P),g);8>P?(P=c(Math.pow(g,P)),b=b.j(P).add(c(A))):(b=b.j(v),b=b.add(c(A)))}return b}var _=u(0),p=u(1),y=u(16777216);i=o.prototype,i.m=function(){if(m(this))return-I(this).m();for(var w=0,g=1,v=0;v<this.g.length;v++){var b=this.i(v);w+=(0<=b?b:4294967296+b)*g,g*=4294967296}return w},i.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(E(this))return"0";if(m(this))return"-"+I(this).toString(w);for(var g=c(Math.pow(w,6)),v=this,b="";;){var R=D(v,g).g;v=C(v,R.j(g));var P=((0<v.g.length?v.g[0]:v.h)>>>0).toString(w);if(v=R,E(v))return P+b;for(;6>P.length;)P="0"+P;b=P+b}},i.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function E(w){if(w.h!=0)return!1;for(var g=0;g<w.g.length;g++)if(w.g[g]!=0)return!1;return!0}function m(w){return w.h==-1}i.l=function(w){return w=C(this,w),m(w)?-1:E(w)?0:1};function I(w){for(var g=w.g.length,v=[],b=0;b<g;b++)v[b]=~w.g[b];return new o(v,~w.h).add(p)}i.abs=function(){return m(this)?I(this):this},i.add=function(w){for(var g=Math.max(this.g.length,w.g.length),v=[],b=0,R=0;R<=g;R++){var P=b+(this.i(R)&65535)+(w.i(R)&65535),A=(P>>>16)+(this.i(R)>>>16)+(w.i(R)>>>16);b=A>>>16,P&=65535,A&=65535,v[R]=A<<16|P}return new o(v,v[v.length-1]&-2147483648?-1:0)};function C(w,g){return w.add(I(g))}i.j=function(w){if(E(this)||E(w))return _;if(m(this))return m(w)?I(this).j(I(w)):I(I(this).j(w));if(m(w))return I(this.j(I(w)));if(0>this.l(y)&&0>w.l(y))return c(this.m()*w.m());for(var g=this.g.length+w.g.length,v=[],b=0;b<2*g;b++)v[b]=0;for(b=0;b<this.g.length;b++)for(var R=0;R<w.g.length;R++){var P=this.i(b)>>>16,A=this.i(b)&65535,nt=w.i(R)>>>16,dt=w.i(R)&65535;v[2*b+2*R]+=A*dt,S(v,2*b+2*R),v[2*b+2*R+1]+=P*dt,S(v,2*b+2*R+1),v[2*b+2*R+1]+=A*nt,S(v,2*b+2*R+1),v[2*b+2*R+2]+=P*nt,S(v,2*b+2*R+2)}for(b=0;b<g;b++)v[b]=v[2*b+1]<<16|v[2*b];for(b=g;b<2*g;b++)v[b]=0;return new o(v,0)};function S(w,g){for(;(w[g]&65535)!=w[g];)w[g+1]+=w[g]>>>16,w[g]&=65535,g++}function k(w,g){this.g=w,this.h=g}function D(w,g){if(E(g))throw Error("division by zero");if(E(w))return new k(_,_);if(m(w))return g=D(I(w),g),new k(I(g.g),I(g.h));if(m(g))return g=D(w,I(g)),new k(I(g.g),g.h);if(30<w.g.length){if(m(w)||m(g))throw Error("slowDivide_ only works with positive integers.");for(var v=p,b=g;0>=b.l(w);)v=x(v),b=x(b);var R=O(v,1),P=O(b,1);for(b=O(b,2),v=O(v,2);!E(b);){var A=P.add(b);0>=A.l(w)&&(R=R.add(v),P=A),b=O(b,1),v=O(v,1)}return g=C(w,R.j(g)),new k(R,g)}for(R=_;0<=w.l(g);){for(v=Math.max(1,Math.floor(w.m()/g.m())),b=Math.ceil(Math.log(v)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),P=c(v),A=P.j(g);m(A)||0<A.l(w);)v-=b,P=c(v),A=P.j(g);E(P)&&(P=p),R=R.add(P),w=C(w,A)}return new k(R,w)}i.A=function(w){return D(this,w).h},i.and=function(w){for(var g=Math.max(this.g.length,w.g.length),v=[],b=0;b<g;b++)v[b]=this.i(b)&w.i(b);return new o(v,this.h&w.h)},i.or=function(w){for(var g=Math.max(this.g.length,w.g.length),v=[],b=0;b<g;b++)v[b]=this.i(b)|w.i(b);return new o(v,this.h|w.h)},i.xor=function(w){for(var g=Math.max(this.g.length,w.g.length),v=[],b=0;b<g;b++)v[b]=this.i(b)^w.i(b);return new o(v,this.h^w.h)};function x(w){for(var g=w.g.length+1,v=[],b=0;b<g;b++)v[b]=w.i(b)<<1|w.i(b-1)>>>31;return new o(v,w.h)}function O(w,g){var v=g>>5;g%=32;for(var b=w.g.length-v,R=[],P=0;P<b;P++)R[P]=0<g?w.i(P+v)>>>g|w.i(P+v+1)<<32-g:w.i(P+v);return new o(R,w.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,Th=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=f,Zn=o}).apply(typeof ec<"u"?ec:typeof self<"u"?self:typeof window<"u"?window:{});var vs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Eh,wh,pi,Ih,As,aa,Ah,bh,Rh;(function(){var i,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,d){return a==Array.prototype||a==Object.prototype||(a[h]=d.value),a};function e(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof vs=="object"&&vs];for(var h=0;h<a.length;++h){var d=a[h];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var n=e(this);function r(a,h){if(h)t:{var d=n;a=a.split(".");for(var T=0;T<a.length-1;T++){var V=a[T];if(!(V in d))break t;d=d[V]}a=a[a.length-1],T=d[a],h=h(T),h!=T&&h!=null&&t(d,a,{configurable:!0,writable:!0,value:h})}}function s(a,h){a instanceof String&&(a+="");var d=0,T=!1,V={next:function(){if(!T&&d<a.length){var N=d++;return{value:h(N,a[N]),done:!1}}return T=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}r("Array.prototype.values",function(a){return a||function(){return s(this,function(h,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function c(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,d){return a.call.apply(a.bind,arguments)}function _(a,h,d){if(!a)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,T),a.apply(h,V)}}return function(){return a.apply(h,arguments)}}function p(a,h,d){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:_,p.apply(null,arguments)}function y(a,h){var d=Array.prototype.slice.call(arguments,1);return function(){var T=d.slice();return T.push.apply(T,arguments),a.apply(this,T)}}function E(a,h){function d(){}d.prototype=h.prototype,a.aa=h.prototype,a.prototype=new d,a.prototype.constructor=a,a.Qb=function(T,V,N){for(var U=Array(arguments.length-2),_t=2;_t<arguments.length;_t++)U[_t-2]=arguments[_t];return h.prototype[V].apply(T,U)}}function m(a){const h=a.length;if(0<h){const d=Array(h);for(let T=0;T<h;T++)d[T]=a[T];return d}return[]}function I(a,h){for(let d=1;d<arguments.length;d++){const T=arguments[d];if(u(T)){const V=a.length||0,N=T.length||0;a.length=V+N;for(let U=0;U<N;U++)a[V+U]=T[U]}else a.push(T)}}class C{constructor(h,d){this.i=h,this.j=d,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function S(a){return/^[\s\xa0]*$/.test(a)}function k(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var x=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function O(a,h,d){for(const T in a)h.call(d,a[T],T,a)}function w(a,h){for(const d in a)h.call(void 0,a[d],d,a)}function g(a){const h={};for(const d in a)h[d]=a[d];return h}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(a,h){let d,T;for(let V=1;V<arguments.length;V++){T=arguments[V];for(d in T)a[d]=T[d];for(let N=0;N<v.length;N++)d=v[N],Object.prototype.hasOwnProperty.call(T,d)&&(a[d]=T[d])}}function R(a){var h=1;a=a.split(":");const d=[];for(;0<h&&a.length;)d.push(a.shift()),h--;return a.length&&d.push(a.join(":")),d}function P(a){l.setTimeout(()=>{throw a},0)}function A(){var a=Ie;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class nt{constructor(){this.h=this.g=null}add(h,d){const T=dt.get();T.set(h,d),this.h?this.h.next=T:this.g=T,this.h=T}}var dt=new C(()=>new mt,a=>a.reset());class mt{constructor(){this.next=this.g=this.h=null}set(h,d){this.h=h,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let lt,Ct=!1,Ie=new nt,Oe=()=>{const a=l.Promise.resolve(void 0);lt=()=>{a.then(Be)}};var Be=()=>{for(var a;a=A();){try{a.h.call(a.g)}catch(d){P(d)}var h=dt;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}Ct=!1};function gt(){this.s=this.s,this.C=this.C}gt.prototype.s=!1,gt.prototype.ma=function(){this.s||(this.s=!0,this.N())},gt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function At(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}At.prototype.h=function(){this.defaultPrevented=!0};var te=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};l.addEventListener("test",d,h),l.removeEventListener("test",d,h)}catch{}return a}();function Qt(a,h){if(At.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var d=this.type=a.type,T=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(x){t:{try{D(h.nodeName);var V=!0;break t}catch{}V=!1}V||(h=null)}}else d=="mouseover"?h=a.fromElement:d=="mouseout"&&(h=a.toElement);this.relatedTarget=h,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Yr[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Qt.aa.h.call(this)}}E(Qt,At);var Yr={2:"touch",3:"pen",4:"mouse"};Qt.prototype.h=function(){Qt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ke="closure_listenable_"+(1e6*Math.random()|0),Jr=0;function He(a,h,d,T,V){this.listener=a,this.proxy=null,this.src=h,this.type=d,this.capture=!!T,this.ha=V,this.key=++Jr,this.da=this.fa=!1}function pe(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Tn(a){this.src=a,this.g={},this.h=0}Tn.prototype.add=function(a,h,d,T,V){var N=a.toString();a=this.g[N],a||(a=this.g[N]=[],this.h++);var U=ee(a,h,T,V);return-1<U?(h=a[U],d||(h.fa=!1)):(h=new He(h,this.src,N,!!T,V),h.fa=d,a.push(h)),h};function Ae(a,h){var d=h.type;if(d in a.g){var T=a.g[d],V=Array.prototype.indexOf.call(T,h,void 0),N;(N=0<=V)&&Array.prototype.splice.call(T,V,1),N&&(pe(h),a.g[d].length==0&&(delete a.g[d],a.h--))}}function ee(a,h,d,T){for(var V=0;V<a.length;++V){var N=a[V];if(!N.da&&N.listener==h&&N.capture==!!d&&N.ha==T)return V}return-1}var We="closure_lm_"+(1e6*Math.random()|0),Mt={};function st(a,h,d,T,V){if(Array.isArray(h)){for(var N=0;N<h.length;N++)st(a,h[N],d,T,V);return null}return d=be(d),a&&a[Ke]?a.K(h,d,c(T)?!!T.capture:!!T,V):bt(a,h,d,!1,T,V)}function bt(a,h,d,T,V,N){if(!h)throw Error("Invalid event type");var U=c(V)?!!V.capture:!!V,_t=dr(a);if(_t||(a[We]=_t=new Tn(a)),d=_t.add(h,d,T,U,N),d.proxy)return d;if(T=Me(),d.proxy=T,T.src=a,T.listener=d,a.addEventListener)te||(V=U),V===void 0&&(V=!1),a.addEventListener(h.toString(),T,V);else if(a.attachEvent)a.attachEvent(ne(h.toString()),T);else if(a.addListener&&a.removeListener)a.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Me(){function a(d){return h.call(a.src,a.listener,d)}const h=rs;return a}function Qe(a,h,d,T,V){if(Array.isArray(h))for(var N=0;N<h.length;N++)Qe(a,h[N],d,T,V);else T=c(T)?!!T.capture:!!T,d=be(d),a&&a[Ke]?(a=a.i,h=String(h).toString(),h in a.g&&(N=a.g[h],d=ee(N,d,T,V),-1<d&&(pe(N[d]),Array.prototype.splice.call(N,d,1),N.length==0&&(delete a.g[h],a.h--)))):a&&(a=dr(a))&&(h=a.g[h.toString()],a=-1,h&&(a=ee(h,d,T,V)),(d=-1<a?h[a]:null)&&Dt(d))}function Dt(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Ke])Ae(h.i,a);else{var d=a.type,T=a.proxy;h.removeEventListener?h.removeEventListener(d,T,a.capture):h.detachEvent?h.detachEvent(ne(d),T):h.addListener&&h.removeListener&&h.removeListener(T),(d=dr(h))?(Ae(d,a),d.h==0&&(d.src=null,h[We]=null)):pe(a)}}}function ne(a){return a in Mt?Mt[a]:Mt[a]="on"+a}function rs(a,h){if(a.da)a=!0;else{h=new Qt(h,this);var d=a.listener,T=a.ha||a.src;a.fa&&Dt(a),a=d.call(T,h)}return a}function dr(a){return a=a[We],a instanceof Tn?a:null}var _r="__closure_events_fn_"+(1e9*Math.random()>>>0);function be(a){return typeof a=="function"?a:(a[_r]||(a[_r]=function(h){return a.handleEvent(h)}),a[_r])}function Lt(){gt.call(this),this.i=new Tn(this),this.M=this,this.F=null}E(Lt,gt),Lt.prototype[Ke]=!0,Lt.prototype.removeEventListener=function(a,h,d,T){Qe(this,a,h,d,T)};function jt(a,h){var d,T=a.F;if(T)for(d=[];T;T=T.F)d.push(T);if(a=a.M,T=h.type||h,typeof h=="string")h=new At(h,a);else if(h instanceof At)h.target=h.target||a;else{var V=h;h=new At(T,a),b(h,V)}if(V=!0,d)for(var N=d.length-1;0<=N;N--){var U=h.g=d[N];V=cn(U,T,!0,h)&&V}if(U=h.g=a,V=cn(U,T,!0,h)&&V,V=cn(U,T,!1,h)&&V,d)for(N=0;N<d.length;N++)U=h.g=d[N],V=cn(U,T,!1,h)&&V}Lt.prototype.N=function(){if(Lt.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var d=a.g[h],T=0;T<d.length;T++)pe(d[T]);delete a.g[h],a.h--}}this.F=null},Lt.prototype.K=function(a,h,d,T){return this.i.add(String(a),h,!1,d,T)},Lt.prototype.L=function(a,h,d,T){return this.i.add(String(a),h,!0,d,T)};function cn(a,h,d,T){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var V=!0,N=0;N<h.length;++N){var U=h[N];if(U&&!U.da&&U.capture==d){var _t=U.listener,Xt=U.ha||U.src;U.fa&&Ae(a.i,U),V=_t.call(Xt,T)!==!1&&V}}return V&&!T.defaultPrevented}function pr(a,h,d){if(typeof a=="function")d&&(a=p(a,d));else if(a&&typeof a.handleEvent=="function")a=p(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function Hl(a){a.g=pr(()=>{a.g=null,a.i&&(a.i=!1,Hl(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class Kd extends gt{constructor(h,d){super(),this.m=h,this.l=d,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Hl(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zr(a){gt.call(this),this.h=a,this.g={}}E(Zr,gt);var Wl=[];function Ql(a){O(a.g,function(h,d){this.g.hasOwnProperty(d)&&Dt(h)},a),a.g={}}Zr.prototype.N=function(){Zr.aa.N.call(this),Ql(this)},Zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yo=l.JSON.stringify,Hd=l.JSON.parse,Wd=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function vo(){}vo.prototype.h=null;function Xl(a){return a.h||(a.h=a.i())}function Yl(){}var ti={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function To(){At.call(this,"d")}E(To,At);function Eo(){At.call(this,"c")}E(Eo,At);var zn={},Jl=null;function is(){return Jl=Jl||new Lt}zn.La="serverreachability";function Zl(a){At.call(this,zn.La,a)}E(Zl,At);function ei(a){const h=is();jt(h,new Zl(h))}zn.STAT_EVENT="statevent";function tu(a,h){At.call(this,zn.STAT_EVENT,a),this.stat=h}E(tu,At);function fe(a){const h=is();jt(h,new tu(h,a))}zn.Ma="timingevent";function eu(a,h){At.call(this,zn.Ma,a),this.size=h}E(eu,At);function ni(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function ri(){this.g=!0}ri.prototype.xa=function(){this.g=!1};function Qd(a,h,d,T,V,N){a.info(function(){if(a.g)if(N)for(var U="",_t=N.split("&"),Xt=0;Xt<_t.length;Xt++){var ht=_t[Xt].split("=");if(1<ht.length){var re=ht[0];ht=ht[1];var ie=re.split("_");U=2<=ie.length&&ie[1]=="type"?U+(re+"="+ht+"&"):U+(re+"=redacted&")}}else U=null;else U=N;return"XMLHTTP REQ ("+T+") [attempt "+V+"]: "+h+`
`+d+`
`+U})}function Xd(a,h,d,T,V,N,U){a.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+V+"]: "+h+`
`+d+`
`+N+" "+U})}function mr(a,h,d,T){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+Jd(a,d)+(T?" "+T:"")})}function Yd(a,h){a.info(function(){return"TIMEOUT: "+h})}ri.prototype.info=function(){};function Jd(a,h){if(!a.g)return h;if(!h)return null;try{var d=JSON.parse(h);if(d){for(a=0;a<d.length;a++)if(Array.isArray(d[a])){var T=d[a];if(!(2>T.length)){var V=T[1];if(Array.isArray(V)&&!(1>V.length)){var N=V[0];if(N!="noop"&&N!="stop"&&N!="close")for(var U=1;U<V.length;U++)V[U]=""}}}}return yo(d)}catch{return h}}var ss={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},nu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wo;function os(){}E(os,vo),os.prototype.g=function(){return new XMLHttpRequest},os.prototype.i=function(){return{}},wo=new os;function En(a,h,d,T){this.j=a,this.i=h,this.l=d,this.R=T||1,this.U=new Zr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ru}function ru(){this.i=null,this.g="",this.h=!1}var iu={},Io={};function Ao(a,h,d){a.L=1,a.v=cs(hn(h)),a.m=d,a.P=!0,su(a,null)}function su(a,h){a.F=Date.now(),as(a),a.A=hn(a.v);var d=a.A,T=a.R;Array.isArray(T)||(T=[String(T)]),vu(d.i,"t",T),a.C=0,d=a.j.J,a.h=new ru,a.g=Fu(a.j,d?h:null,!a.m),0<a.O&&(a.M=new Kd(p(a.Y,a,a.g),a.O)),h=a.U,d=a.g,T=a.ca;var V="readystatechange";Array.isArray(V)||(V&&(Wl[0]=V.toString()),V=Wl);for(var N=0;N<V.length;N++){var U=st(d,V[N],T||h.handleEvent,!1,h.h||h);if(!U)break;h.g[U.key]=U}h=a.H?g(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),ei(),Qd(a.i,a.u,a.A,a.l,a.R,a.m)}En.prototype.ca=function(a){a=a.target;const h=this.M;h&&fn(a)==3?h.j():this.Y(a)},En.prototype.Y=function(a){try{if(a==this.g)t:{const ie=fn(this.g);var h=this.g.Ba();const vr=this.g.Z();if(!(3>ie)&&(ie!=3||this.g&&(this.h.h||this.g.oa()||Ru(this.g)))){this.J||ie!=4||h==7||(h==8||0>=vr?ei(3):ei(2)),bo(this);var d=this.g.Z();this.X=d;e:if(ou(this)){var T=Ru(this.g);a="";var V=T.length,N=fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qn(this),ii(this);var U="";break e}this.h.i=new l.TextDecoder}for(h=0;h<V;h++)this.h.h=!0,a+=this.h.i.decode(T[h],{stream:!(N&&h==V-1)});T.length=0,this.h.g+=a,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=d==200,Xd(this.i,this.u,this.A,this.l,this.R,ie,d),this.o){if(this.T&&!this.K){e:{if(this.g){var _t,Xt=this.g;if((_t=Xt.g?Xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(_t)){var ht=_t;break e}}ht=null}if(d=ht)mr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ro(this,d);else{this.o=!1,this.s=3,fe(12),qn(this),ii(this);break t}}if(this.P){d=!0;let je;for(;!this.J&&this.C<U.length;)if(je=Zd(this,U),je==Io){ie==4&&(this.s=4,fe(14),d=!1),mr(this.i,this.l,null,"[Incomplete Response]");break}else if(je==iu){this.s=4,fe(15),mr(this.i,this.l,U,"[Invalid Chunk]"),d=!1;break}else mr(this.i,this.l,je,null),Ro(this,je);if(ou(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ie!=4||U.length!=0||this.h.h||(this.s=1,fe(16),d=!1),this.o=this.o&&d,!d)mr(this.i,this.l,U,"[Invalid Chunked Response]"),qn(this),ii(this);else if(0<U.length&&!this.W){this.W=!0;var re=this.j;re.g==this&&re.ba&&!re.M&&(re.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),ko(re),re.M=!0,fe(11))}}else mr(this.i,this.l,U,null),Ro(this,U);ie==4&&qn(this),this.o&&!this.J&&(ie==4?xu(this.j,this):(this.o=!1,as(this)))}else m_(this.g),d==400&&0<U.indexOf("Unknown SID")?(this.s=3,fe(12)):(this.s=0,fe(13)),qn(this),ii(this)}}}catch{}finally{}};function ou(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Zd(a,h){var d=a.C,T=h.indexOf(`
`,d);return T==-1?Io:(d=Number(h.substring(d,T)),isNaN(d)?iu:(T+=1,T+d>h.length?Io:(h=h.slice(T,T+d),a.C=T+d,h)))}En.prototype.cancel=function(){this.J=!0,qn(this)};function as(a){a.S=Date.now()+a.I,au(a,a.I)}function au(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=ni(p(a.ba,a),h)}function bo(a){a.B&&(l.clearTimeout(a.B),a.B=null)}En.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Yd(this.i,this.A),this.L!=2&&(ei(),fe(17)),qn(this),this.s=2,ii(this)):au(this,this.S-a)};function ii(a){a.j.G==0||a.J||xu(a.j,a)}function qn(a){bo(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,Ql(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Ro(a,h){try{var d=a.j;if(d.G!=0&&(d.g==a||Po(d.h,a))){if(!a.K&&Po(d.h,a)&&d.G==3){try{var T=d.Da.g.parse(h)}catch{T=null}if(Array.isArray(T)&&T.length==3){var V=T;if(V[0]==0){t:if(!d.u){if(d.g)if(d.g.F+3e3<a.F)ps(d),ds(d);else break t;Vo(d),fe(18)}}else d.za=V[1],0<d.za-d.T&&37500>V[2]&&d.F&&d.v==0&&!d.C&&(d.C=ni(p(d.Za,d),6e3));if(1>=cu(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else Kn(d,11)}else if((a.K||d.g==a)&&ps(d),!S(h))for(V=d.Da.g.parse(h),h=0;h<V.length;h++){let ht=V[h];if(d.T=ht[0],ht=ht[1],d.G==2)if(ht[0]=="c"){d.K=ht[1],d.ia=ht[2];const re=ht[3];re!=null&&(d.la=re,d.j.info("VER="+d.la));const ie=ht[4];ie!=null&&(d.Aa=ie,d.j.info("SVER="+d.Aa));const vr=ht[5];vr!=null&&typeof vr=="number"&&0<vr&&(T=1.5*vr,d.L=T,d.j.info("backChannelRequestTimeoutMs_="+T)),T=d;const je=a.g;if(je){const gs=je.g?je.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gs){var N=T.h;N.g||gs.indexOf("spdy")==-1&&gs.indexOf("quic")==-1&&gs.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(So(N,N.h),N.h=null))}if(T.D){const xo=je.g?je.g.getResponseHeader("X-HTTP-Session-Id"):null;xo&&(T.ya=xo,Rt(T.I,T.D,xo))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-a.F,d.j.info("Handshake RTT: "+d.R+"ms")),T=d;var U=a;if(T.qa=Mu(T,T.J?T.ia:null,T.W),U.K){hu(T.h,U);var _t=U,Xt=T.L;Xt&&(_t.I=Xt),_t.B&&(bo(_t),as(_t)),T.g=U}else Vu(T);0<d.i.length&&_s(d)}else ht[0]!="stop"&&ht[0]!="close"||Kn(d,7);else d.G==3&&(ht[0]=="stop"||ht[0]=="close"?ht[0]=="stop"?Kn(d,7):Do(d):ht[0]!="noop"&&d.l&&d.l.ta(ht),d.v=0)}}ei(4)}catch{}}var t_=class{constructor(a,h){this.g=a,this.map=h}};function lu(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function uu(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function cu(a){return a.h?1:a.g?a.g.size:0}function Po(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function So(a,h){a.g?a.g.add(h):a.h=h}function hu(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}lu.prototype.cancel=function(){if(this.i=fu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function fu(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const d of a.g.values())h=h.concat(d.D);return h}return m(a.i)}function e_(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],d=a.length,T=0;T<d;T++)h.push(a[T]);return h}h=[],d=0;for(T in a)h[d++]=a[T];return h}function n_(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var d=0;d<a;d++)h.push(d);return h}h=[],d=0;for(const T in a)h[d++]=T;return h}}}function du(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var d=n_(a),T=e_(a),V=T.length,N=0;N<V;N++)h.call(void 0,T[N],d&&d[N],a)}var _u=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function r_(a,h){if(a){a=a.split("&");for(var d=0;d<a.length;d++){var T=a[d].indexOf("="),V=null;if(0<=T){var N=a[d].substring(0,T);V=a[d].substring(T+1)}else N=a[d];h(N,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Gn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Gn){this.h=a.h,ls(this,a.j),this.o=a.o,this.g=a.g,us(this,a.s),this.l=a.l;var h=a.i,d=new ai;d.i=h.i,h.g&&(d.g=new Map(h.g),d.h=h.h),pu(this,d),this.m=a.m}else a&&(h=String(a).match(_u))?(this.h=!1,ls(this,h[1]||"",!0),this.o=si(h[2]||""),this.g=si(h[3]||"",!0),us(this,h[4]),this.l=si(h[5]||"",!0),pu(this,h[6]||"",!0),this.m=si(h[7]||"")):(this.h=!1,this.i=new ai(null,this.h))}Gn.prototype.toString=function(){var a=[],h=this.j;h&&a.push(oi(h,mu,!0),":");var d=this.g;return(d||h=="file")&&(a.push("//"),(h=this.o)&&a.push(oi(h,mu,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&a.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(oi(d,d.charAt(0)=="/"?o_:s_,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",oi(d,l_)),a.join("")};function hn(a){return new Gn(a)}function ls(a,h,d){a.j=d?si(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function us(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function pu(a,h,d){h instanceof ai?(a.i=h,u_(a.i,a.h)):(d||(h=oi(h,a_)),a.i=new ai(h,a.h))}function Rt(a,h,d){a.i.set(h,d)}function cs(a){return Rt(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function si(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function oi(a,h,d){return typeof a=="string"?(a=encodeURI(a).replace(h,i_),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function i_(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var mu=/[#\/\?@]/g,s_=/[#\?:]/g,o_=/[#\?]/g,a_=/[#\?@]/g,l_=/#/g;function ai(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function wn(a){a.g||(a.g=new Map,a.h=0,a.i&&r_(a.i,function(h,d){a.add(decodeURIComponent(h.replace(/\+/g," ")),d)}))}i=ai.prototype,i.add=function(a,h){wn(this),this.i=null,a=gr(this,a);var d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(h),this.h+=1,this};function gu(a,h){wn(a),h=gr(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function yu(a,h){return wn(a),h=gr(a,h),a.g.has(h)}i.forEach=function(a,h){wn(this),this.g.forEach(function(d,T){d.forEach(function(V){a.call(h,V,T,this)},this)},this)},i.na=function(){wn(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),d=[];for(let T=0;T<h.length;T++){const V=a[T];for(let N=0;N<V.length;N++)d.push(h[T])}return d},i.V=function(a){wn(this);let h=[];if(typeof a=="string")yu(this,a)&&(h=h.concat(this.g.get(gr(this,a))));else{a=Array.from(this.g.values());for(let d=0;d<a.length;d++)h=h.concat(a[d])}return h},i.set=function(a,h){return wn(this),this.i=null,a=gr(this,a),yu(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},i.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function vu(a,h,d){gu(a,h),0<d.length&&(a.i=null,a.g.set(gr(a,h),m(d)),a.h+=d.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var d=0;d<h.length;d++){var T=h[d];const N=encodeURIComponent(String(T)),U=this.V(T);for(T=0;T<U.length;T++){var V=N;U[T]!==""&&(V+="="+encodeURIComponent(String(U[T]))),a.push(V)}}return this.i=a.join("&")};function gr(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function u_(a,h){h&&!a.j&&(wn(a),a.i=null,a.g.forEach(function(d,T){var V=T.toLowerCase();T!=V&&(gu(this,T),vu(this,V,d))},a)),a.j=h}function c_(a,h){const d=new ri;if(l.Image){const T=new Image;T.onload=y(In,d,"TestLoadImage: loaded",!0,h,T),T.onerror=y(In,d,"TestLoadImage: error",!1,h,T),T.onabort=y(In,d,"TestLoadImage: abort",!1,h,T),T.ontimeout=y(In,d,"TestLoadImage: timeout",!1,h,T),l.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=a}else h(!1)}function h_(a,h){const d=new ri,T=new AbortController,V=setTimeout(()=>{T.abort(),In(d,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:T.signal}).then(N=>{clearTimeout(V),N.ok?In(d,"TestPingServer: ok",!0,h):In(d,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(V),In(d,"TestPingServer: error",!1,h)})}function In(a,h,d,T,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),T(d)}catch{}}function f_(){this.g=new Wd}function d_(a,h,d){const T=d||"";try{du(a,function(V,N){let U=V;c(V)&&(U=yo(V)),h.push(T+N+"="+encodeURIComponent(U))})}catch(V){throw h.push(T+"type="+encodeURIComponent("_badmap")),V}}function li(a){this.l=a.Ub||null,this.j=a.eb||!1}E(li,vo),li.prototype.g=function(){return new hs(this.l,this.j)},li.prototype.i=function(a){return function(){return a}}({});function hs(a,h){Lt.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(hs,Lt),i=hs.prototype,i.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,ci(this)},i.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ui(this)),this.readyState=0},i.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ci(this)),this.g&&(this.readyState=3,ci(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tu(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tu(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}i.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?ui(this):ci(this),this.readyState==3&&Tu(this)}},i.Ra=function(a){this.g&&(this.response=this.responseText=a,ui(this))},i.Qa=function(a){this.g&&(this.response=a,ui(this))},i.ga=function(){this.g&&ui(this)};function ui(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ci(a)}i.setRequestHeader=function(a,h){this.u.append(a,h)},i.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var d=h.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=h.next();return a.join(`\r
`)};function ci(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(hs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Eu(a){let h="";return O(a,function(d,T){h+=T,h+=":",h+=d,h+=`\r
`}),h}function Co(a,h,d){t:{for(T in d){var T=!1;break t}T=!0}T||(d=Eu(d),typeof a=="string"?d!=null&&encodeURIComponent(String(d)):Rt(a,h,d))}function Nt(a){Lt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Nt,Lt);var __=/^https?$/i,p_=["POST","PUT"];i=Nt.prototype,i.Ha=function(a){this.J=a},i.ea=function(a,h,d,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wo.g(),this.v=this.o?Xl(this.o):Xl(wo),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(N){wu(this,N);return}if(a=d||"",d=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var V in T)d.set(V,T[V]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const N of T.keys())d.set(N,T.get(N));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(d.keys()).find(N=>N.toLowerCase()=="content-type"),V=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(p_,h,void 0))||T||V||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,U]of d)this.g.setRequestHeader(N,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bu(this),this.u=!0,this.g.send(a),this.u=!1}catch(N){wu(this,N)}};function wu(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,Iu(a),fs(a)}function Iu(a){a.A||(a.A=!0,jt(a,"complete"),jt(a,"error"))}i.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,jt(this,"complete"),jt(this,"abort"),fs(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fs(this,!0)),Nt.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Au(this):this.bb())},i.bb=function(){Au(this)};function Au(a){if(a.h&&typeof o<"u"&&(!a.v[1]||fn(a)!=4||a.Z()!=2)){if(a.u&&fn(a)==4)pr(a.Ea,0,a);else if(jt(a,"readystatechange"),fn(a)==4){a.h=!1;try{const U=a.Z();t:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break t;default:h=!1}var d;if(!(d=h)){var T;if(T=U===0){var V=String(a.D).match(_u)[1]||null;!V&&l.self&&l.self.location&&(V=l.self.location.protocol.slice(0,-1)),T=!__.test(V?V.toLowerCase():"")}d=T}if(d)jt(a,"complete"),jt(a,"success");else{a.m=6;try{var N=2<fn(a)?a.g.statusText:""}catch{N=""}a.l=N+" ["+a.Z()+"]",Iu(a)}}finally{fs(a)}}}}function fs(a,h){if(a.g){bu(a);const d=a.g,T=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||jt(a,"ready");try{d.onreadystatechange=T}catch{}}}function bu(a){a.I&&(l.clearTimeout(a.I),a.I=null)}i.isActive=function(){return!!this.g};function fn(a){return a.g?a.g.readyState:0}i.Z=function(){try{return 2<fn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),Hd(h)}};function Ru(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function m_(a){const h={};a=(a.g&&2<=fn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<a.length;T++){if(S(a[T]))continue;var d=R(a[T]);const V=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const N=h[V]||[];h[V]=N,N.push(d)}w(h,function(T){return T.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function hi(a,h,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||h}function Pu(a){this.Aa=0,this.i=[],this.j=new ri,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hi("baseRetryDelayMs",5e3,a),this.cb=hi("retryDelaySeedMs",1e4,a),this.Wa=hi("forwardChannelMaxRetries",2,a),this.wa=hi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new lu(a&&a.concurrentRequestLimit),this.Da=new f_,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Pu.prototype,i.la=8,i.G=1,i.connect=function(a,h,d,T){fe(0),this.W=a,this.H=h||{},d&&T!==void 0&&(this.H.OSID=d,this.H.OAID=T),this.F=this.X,this.I=Mu(this,null,this.W),_s(this)};function Do(a){if(Su(a),a.G==3){var h=a.U++,d=hn(a.I);if(Rt(d,"SID",a.K),Rt(d,"RID",h),Rt(d,"TYPE","terminate"),fi(a,d),h=new En(a,a.j,h),h.L=2,h.v=cs(hn(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=h.v,d=!0),d||(h.g=Fu(h.j,null),h.g.ea(h.v)),h.F=Date.now(),as(h)}Ou(a)}function ds(a){a.g&&(ko(a),a.g.cancel(),a.g=null)}function Su(a){ds(a),a.u&&(l.clearTimeout(a.u),a.u=null),ps(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function _s(a){if(!uu(a.h)&&!a.s){a.s=!0;var h=a.Ga;lt||Oe(),Ct||(lt(),Ct=!0),Ie.add(h,a),a.B=0}}function g_(a,h){return cu(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=ni(p(a.Ga,a,h),Nu(a,a.B)),a.B++,!0)}i.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const V=new En(this,this.j,a);let N=this.o;if(this.S&&(N?(N=g(N),b(N,this.S)):N=this.S),this.m!==null||this.O||(V.H=N,N=null),this.P)t:{for(var h=0,d=0;d<this.i.length;d++){e:{var T=this.i[d];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break e}T=void 0}if(T===void 0)break;if(h+=T,4096<h){h=d;break t}if(h===4096||d===this.i.length-1){h=d+1;break t}}h=1e3}else h=1e3;h=Du(this,V,h),d=hn(this.I),Rt(d,"RID",a),Rt(d,"CVER",22),this.D&&Rt(d,"X-HTTP-Session-Id",this.D),fi(this,d),N&&(this.O?h="headers="+encodeURIComponent(String(Eu(N)))+"&"+h:this.m&&Co(d,this.m,N)),So(this.h,V),this.Ua&&Rt(d,"TYPE","init"),this.P?(Rt(d,"$req",h),Rt(d,"SID","null"),V.T=!0,Ao(V,d,null)):Ao(V,d,h),this.G=2}}else this.G==3&&(a?Cu(this,a):this.i.length==0||uu(this.h)||Cu(this))};function Cu(a,h){var d;h?d=h.l:d=a.U++;const T=hn(a.I);Rt(T,"SID",a.K),Rt(T,"RID",d),Rt(T,"AID",a.T),fi(a,T),a.m&&a.o&&Co(T,a.m,a.o),d=new En(a,a.j,d,a.B+1),a.m===null&&(d.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Du(a,d,1e3),d.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),So(a.h,d),Ao(d,T,h)}function fi(a,h){a.H&&O(a.H,function(d,T){Rt(h,T,d)}),a.l&&du({},function(d,T){Rt(h,T,d)})}function Du(a,h,d){d=Math.min(a.i.length,d);var T=a.l?p(a.l.Na,a.l,a):null;t:{var V=a.i;let N=-1;for(;;){const U=["count="+d];N==-1?0<d?(N=V[0].g,U.push("ofs="+N)):N=0:U.push("ofs="+N);let _t=!0;for(let Xt=0;Xt<d;Xt++){let ht=V[Xt].g;const re=V[Xt].map;if(ht-=N,0>ht)N=Math.max(0,V[Xt].g-100),_t=!1;else try{d_(re,U,"req"+ht+"_")}catch{T&&T(re)}}if(_t){T=U.join("&");break t}}}return a=a.i.splice(0,d),h.D=a,T}function Vu(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;lt||Oe(),Ct||(lt(),Ct=!0),Ie.add(h,a),a.v=0}}function Vo(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=ni(p(a.Fa,a),Nu(a,a.v)),a.v++,!0)}i.Fa=function(){if(this.u=null,ku(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=ni(p(this.ab,this),a)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,fe(10),ds(this),ku(this))};function ko(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function ku(a){a.g=new En(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=hn(a.qa);Rt(h,"RID","rpc"),Rt(h,"SID",a.K),Rt(h,"AID",a.T),Rt(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&Rt(h,"TO",a.ja),Rt(h,"TYPE","xmlhttp"),fi(a,h),a.m&&a.o&&Co(h,a.m,a.o),a.L&&(a.g.I=a.L);var d=a.g;a=a.ia,d.L=1,d.v=cs(hn(h)),d.m=null,d.P=!0,su(d,a)}i.Za=function(){this.C!=null&&(this.C=null,ds(this),Vo(this),fe(19))};function ps(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function xu(a,h){var d=null;if(a.g==h){ps(a),ko(a),a.g=null;var T=2}else if(Po(a.h,h))d=h.D,hu(a.h,h),T=1;else return;if(a.G!=0){if(h.o)if(T==1){d=h.m?h.m.length:0,h=Date.now()-h.F;var V=a.B;T=is(),jt(T,new eu(T,d)),_s(a)}else Vu(a);else if(V=h.s,V==3||V==0&&0<h.X||!(T==1&&g_(a,h)||T==2&&Vo(a)))switch(d&&0<d.length&&(h=a.h,h.i=h.i.concat(d)),V){case 1:Kn(a,5);break;case 4:Kn(a,10);break;case 3:Kn(a,6);break;default:Kn(a,2)}}}function Nu(a,h){let d=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(d*=2),d*h}function Kn(a,h){if(a.j.info("Error code "+h),h==2){var d=p(a.fb,a),T=a.Xa;const V=!T;T=new Gn(T||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ls(T,"https"),cs(T),V?c_(T.toString(),d):h_(T.toString(),d)}else fe(2);a.G=0,a.l&&a.l.sa(h),Ou(a),Su(a)}i.fb=function(a){a?(this.j.info("Successfully pinged google.com"),fe(2)):(this.j.info("Failed to ping google.com"),fe(1))};function Ou(a){if(a.G=0,a.ka=[],a.l){const h=fu(a.h);(h.length!=0||a.i.length!=0)&&(I(a.ka,h),I(a.ka,a.i),a.h.i.length=0,m(a.i),a.i.length=0),a.l.ra()}}function Mu(a,h,d){var T=d instanceof Gn?hn(d):new Gn(d);if(T.g!="")h&&(T.g=h+"."+T.g),us(T,T.s);else{var V=l.location;T=V.protocol,h=h?h+"."+V.hostname:V.hostname,V=+V.port;var N=new Gn(null);T&&ls(N,T),h&&(N.g=h),V&&us(N,V),d&&(N.l=d),T=N}return d=a.D,h=a.ya,d&&h&&Rt(T,d,h),Rt(T,"VER",a.la),fi(a,T),T}function Fu(a,h,d){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Nt(new li({eb:d})):new Nt(a.pa),h.Ha(a.J),h}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lu(){}i=Lu.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function ms(){}ms.prototype.g=function(a,h){return new Re(a,h)};function Re(a,h){Lt.call(this),this.g=new Pu(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!S(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!S(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new yr(this)}E(Re,Lt),Re.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Re.prototype.close=function(){Do(this.g)},Re.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.u&&(d={},d.__data__=yo(a),a=d);h.i.push(new t_(h.Ya++,a)),h.G==3&&_s(h)},Re.prototype.N=function(){this.g.l=null,delete this.j,Do(this.g),delete this.g,Re.aa.N.call(this)};function $u(a){To.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){t:{for(const d in h){a=d;break t}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}E($u,To);function Uu(){Eo.call(this),this.status=1}E(Uu,Eo);function yr(a){this.g=a}E(yr,Lu),yr.prototype.ua=function(){jt(this.g,"a")},yr.prototype.ta=function(a){jt(this.g,new $u(a))},yr.prototype.sa=function(a){jt(this.g,new Uu)},yr.prototype.ra=function(){jt(this.g,"b")},ms.prototype.createWebChannel=ms.prototype.g,Re.prototype.send=Re.prototype.o,Re.prototype.open=Re.prototype.m,Re.prototype.close=Re.prototype.close,Rh=function(){return new ms},bh=function(){return is()},Ah=zn,aa={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ss.NO_ERROR=0,ss.TIMEOUT=8,ss.HTTP_ERROR=6,As=ss,nu.COMPLETE="complete",Ih=nu,Yl.EventType=ti,ti.OPEN="a",ti.CLOSE="b",ti.ERROR="c",ti.MESSAGE="d",Lt.prototype.listen=Lt.prototype.K,pi=Yl,wh=li,Nt.prototype.listenOnce=Nt.prototype.L,Nt.prototype.getLastError=Nt.prototype.Ka,Nt.prototype.getLastErrorCode=Nt.prototype.Ba,Nt.prototype.getStatus=Nt.prototype.Z,Nt.prototype.getResponseJson=Nt.prototype.Oa,Nt.prototype.getResponseText=Nt.prototype.oa,Nt.prototype.send=Nt.prototype.ea,Nt.prototype.setWithCredentials=Nt.prototype.Ha,Eh=Nt}).apply(typeof vs<"u"?vs:typeof self<"u"?self:typeof window<"u"?window:{});const nc="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}oe.UNAUTHENTICATED=new oe(null),oe.GOOGLE_CREDENTIALS=new oe("google-credentials-uid"),oe.FIRST_PARTY=new oe("first-party-uid"),oe.MOCK_USER=new oe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wr="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr=new _h("@firebase/firestore");function di(){return sr.logLevel}function B(i,...t){if(sr.logLevel<=ct.DEBUG){const e=t.map(Qa);sr.debug(`Firestore (${Wr}): ${i}`,...e)}}function mn(i,...t){if(sr.logLevel<=ct.ERROR){const e=t.map(Qa);sr.error(`Firestore (${Wr}): ${i}`,...e)}}function xr(i,...t){if(sr.logLevel<=ct.WARN){const e=t.map(Qa);sr.warn(`Firestore (${Wr}): ${i}`,...e)}}function Qa(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W(i="Unexpected state"){const t=`FIRESTORE (${Wr}) INTERNAL ASSERTION FAILED: `+i;throw mn(t),new Error(t)}function It(i,t){i||W()}function tt(i,t){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class j extends Hr{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class cm{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(oe.UNAUTHENTICATED))}shutdown(){}}class hm{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class fm{constructor(t){this.t=t,this.currentUser=oe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const r=u=>this.i!==n?(n=this.i,e(u)):Promise.resolve();let s=new pn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new pn,t.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new pn)}},0),o()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(n=>this.i!==t?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(It(typeof n.accessToken=="string"),new Ph(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return It(t===null||typeof t=="string"),new oe(t)}}class dm{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=oe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class _m{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new dm(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(oe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pm{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mm{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=s=>{s.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,B("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};const r=s=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(It(typeof e.token=="string"),this.R=e.token,new pm(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(i){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(i);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let n=0;n<i;n++)e[n]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const r=gm(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<e&&(n+=t.charAt(r[s]%t.length))}return n}}function ft(i,t){return i<t?-1:i>t?1:0}function Nr(i,t,e){return i.length===t.length&&i.every((n,r)=>e(n,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new j(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new j(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new j(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new j(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Gt.fromMillis(Date.now())}static fromDate(t){return Gt.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Gt(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?ft(this.nanoseconds,t.nanoseconds):ft(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Y(t)}static min(){return new Y(new Gt(0,0))}static max(){return new Y(new Gt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(t,e,n){e===void 0?e=0:e>t.length&&W(),n===void 0?n=t.length-e:n>t.length-e&&W(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return xi.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof xi?t.forEach(n=>{e.push(n)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.get(r),o=e.get(r);if(s<o)return-1;if(s>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Pt extends xi{construct(t,e,n){return new Pt(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new j(M.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter(r=>r.length>0))}return new Pt(e)}static emptyPath(){return new Pt([])}}const ym=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jt extends xi{construct(t,e,n){return new Jt(t,e,n)}static isValidIdentifier(t){return ym.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Jt(["__name__"])}static fromServerFormat(t){const e=[];let n="",r=0;const s=()=>{if(n.length===0)throw new j(M.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let o=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new j(M.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new j(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=u,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(n+=l,r++):(s(),r++)}if(s(),o)throw new j(M.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Jt(e)}static emptyPath(){return new Jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(t){this.path=t}static fromPath(t){return new K(Pt.fromString(t))}static fromName(t){return new K(Pt.fromString(t).popFirst(5))}static empty(){return new K(Pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Pt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Pt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new K(new Pt(t.slice()))}}function vm(i,t){const e=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,r=Y.fromTimestamp(n===1e9?new Gt(e+1,0):new Gt(e,n));return new On(r,K.empty(),t)}function Tm(i){return new On(i.readTime,i.key,-1)}class On{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new On(Y.min(),K.empty(),-1)}static max(){return new On(Y.max(),K.empty(),-1)}}function Em(i,t){let e=i.readTime.compareTo(t.readTime);return e!==0?e:(e=K.comparator(i.documentKey,t.documentKey),e!==0?e:ft(i.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Im{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hi(i){if(i.code!==M.FAILED_PRECONDITION||i.message!==wm)throw i;B("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&W(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new L((n,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(n,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof L?e:L.resolve(e)}catch(e){return L.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):L.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):L.reject(e)}static resolve(t){return new L((e,n)=>{e(t)})}static reject(t){return new L((e,n)=>{n(t)})}static waitFor(t){return new L((e,n)=>{let r=0,s=0,o=!1;t.forEach(l=>{++r,l.next(()=>{++s,o&&s===r&&e()},u=>n(u))}),o=!0,s===r&&e()})}static or(t){let e=L.resolve(!1);for(const n of t)e=e.next(r=>r?L.resolve(r):n());return e}static forEach(t,e){const n=[];return t.forEach((r,s)=>{n.push(e.call(this,r,s))}),this.waitFor(n)}static mapArray(t,e){return new L((n,r)=>{const s=t.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const c=u;e(t[c]).next(f=>{o[c]=f,++l,l===s&&n(o)},f=>r(f))}})}static doWhile(t,e){return new L((n,r)=>{const s=()=>{t()===!0?e().next(()=>{s()},r):n()};s()})}}function Am(i){const t=i.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Wi(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=n=>this.ie(n),this.se=n=>e.writeSequenceNumber(n))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}Xa.oe=-1;function to(i){return i==null}function Fs(i){return i===0&&1/i==-1/0}function bm(i){return typeof i=="number"&&Number.isInteger(i)&&!Fs(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(i){let t=0;for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t++;return t}function cr(i,t){for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t(e,i[e])}function Ch(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(t,e){this.comparator=t,this.root=e||Yt.EMPTY}insert(t,e){return new xt(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Yt.BLACK,null,null))}remove(t){return new xt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Yt.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(n===0)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,n)=>(t(e,n),!1))}toString(){const t=[];return this.inorderTraversal((e,n)=>(t.push(`${e}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ts(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ts(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ts(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ts(this.root,t,this.comparator,!0)}}class Ts{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?n(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Yt{constructor(t,e,n,r,s){this.key=t,this.value=e,this.color=n??Yt.RED,this.left=r??Yt.EMPTY,this.right=s??Yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,s){return new Yt(t??this.key,e??this.value,n??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const s=n(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,n),null):s===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Yt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return Yt.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw W();const t=this.left.check();if(t!==this.right.check())throw W();return t+(this.isRed()?0:1)}}Yt.EMPTY=null,Yt.RED=!0,Yt.BLACK=!1;Yt.EMPTY=new class{constructor(){this.size=0}get key(){throw W()}get value(){throw W()}get color(){throw W()}get left(){throw W()}get right(){throw W()}copy(t,e,n,r,s){return this}insert(t,e,n){return new Yt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(t){this.comparator=t,this.data=new xt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,n)=>(t(e),!1))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new ic(this.data.getIterator())}getIteratorFrom(t){return new ic(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(n=>{e=e.add(n)}),e}isEqual(t){if(!(t instanceof Zt)||this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=n.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Zt(this.comparator);return e.data=t,e}}class ic{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(t){this.fields=t,t.sort(Jt.comparator)}static empty(){return new Ce([])}unionWith(t){let e=new Zt(Jt.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new Ce(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Nr(this.fields,t.fields,(e,n)=>e.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Dh("Invalid base64 string: "+s):s}}(t);return new he(e)}static fromUint8Array(t){const e=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new he(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ft(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}he.EMPTY_BYTE_STRING=new he("");const Rm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mn(i){if(It(!!i),typeof i=="string"){let t=0;const e=Rm.exec(i);if(It(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Ut(i.seconds),nanos:Ut(i.nanos)}}function Ut(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function or(i){return typeof i=="string"?he.fromBase64String(i):he.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(i){var t,e;return((e=(((t=i==null?void 0:i.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function Ja(i){const t=i.mapValue.fields.__previous_value__;return Ya(t)?Ja(t):t}function Ni(i){const t=Mn(i.mapValue.fields.__local_write_time__.timestampValue);return new Gt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(t,e,n,r,s,o,l,u,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}class Oi{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Oi("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Oi&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ar(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Ya(i)?4:Sm(i)?9007199254740991:10:W()}function sn(i,t){if(i===t)return!0;const e=ar(i);if(e!==ar(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return Ni(i).isEqual(Ni(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Mn(r.timestampValue),l=Mn(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(i,t);case 5:return i.stringValue===t.stringValue;case 6:return function(r,s){return or(r.bytesValue).isEqual(or(s.bytesValue))}(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return function(r,s){return Ut(r.geoPointValue.latitude)===Ut(s.geoPointValue.latitude)&&Ut(r.geoPointValue.longitude)===Ut(s.geoPointValue.longitude)}(i,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ut(r.integerValue)===Ut(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Ut(r.doubleValue),l=Ut(s.doubleValue);return o===l?Fs(o)===Fs(l):isNaN(o)&&isNaN(l)}return!1}(i,t);case 9:return Nr(i.arrayValue.values||[],t.arrayValue.values||[],sn);case 10:return function(r,s){const o=r.mapValue.fields||{},l=s.mapValue.fields||{};if(rc(o)!==rc(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!sn(o[u],l[u])))return!1;return!0}(i,t);default:return W()}}function Mi(i,t){return(i.values||[]).find(e=>sn(e,t))!==void 0}function Or(i,t){if(i===t)return 0;const e=ar(i),n=ar(t);if(e!==n)return ft(e,n);switch(e){case 0:case 9007199254740991:return 0;case 1:return ft(i.booleanValue,t.booleanValue);case 2:return function(s,o){const l=Ut(s.integerValue||s.doubleValue),u=Ut(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(i,t);case 3:return sc(i.timestampValue,t.timestampValue);case 4:return sc(Ni(i),Ni(t));case 5:return ft(i.stringValue,t.stringValue);case 6:return function(s,o){const l=or(s),u=or(o);return l.compareTo(u)}(i.bytesValue,t.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const f=ft(l[c],u[c]);if(f!==0)return f}return ft(l.length,u.length)}(i.referenceValue,t.referenceValue);case 8:return function(s,o){const l=ft(Ut(s.latitude),Ut(o.latitude));return l!==0?l:ft(Ut(s.longitude),Ut(o.longitude))}(i.geoPointValue,t.geoPointValue);case 9:return function(s,o){const l=s.values||[],u=o.values||[];for(let c=0;c<l.length&&c<u.length;++c){const f=Or(l[c],u[c]);if(f)return f}return ft(l.length,u.length)}(i.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===Es.mapValue&&o===Es.mapValue)return 0;if(s===Es.mapValue)return 1;if(o===Es.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),c=o.fields||{},f=Object.keys(c);u.sort(),f.sort();for(let _=0;_<u.length&&_<f.length;++_){const p=ft(u[_],f[_]);if(p!==0)return p;const y=Or(l[u[_]],c[f[_]]);if(y!==0)return y}return ft(u.length,f.length)}(i.mapValue,t.mapValue);default:throw W()}}function sc(i,t){if(typeof i=="string"&&typeof t=="string"&&i.length===t.length)return ft(i,t);const e=Mn(i),n=Mn(t),r=ft(e.seconds,n.seconds);return r!==0?r:ft(e.nanos,n.nanos)}function Mr(i){return la(i)}function la(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(e){const n=Mn(e);return`time(${n.seconds},${n.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(e){return or(e).toBase64()}(i.bytesValue):"referenceValue"in i?function(e){return K.fromName(e).toString()}(i.referenceValue):"geoPointValue"in i?function(e){return`geo(${e.latitude},${e.longitude})`}(i.geoPointValue):"arrayValue"in i?function(e){let n="[",r=!0;for(const s of e.values||[])r?r=!1:n+=",",n+=la(s);return n+"]"}(i.arrayValue):"mapValue"in i?function(e){const n=Object.keys(e.fields||{}).sort();let r="{",s=!0;for(const o of n)s?s=!1:r+=",",r+=`${o}:${la(e.fields[o])}`;return r+"}"}(i.mapValue):W()}function ua(i){return!!i&&"integerValue"in i}function Za(i){return!!i&&"arrayValue"in i}function oc(i){return!!i&&"nullValue"in i}function ac(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function bs(i){return!!i&&"mapValue"in i}function Ei(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const t={mapValue:{fields:{}}};return cr(i.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Ei(n)),t}if(i.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(i.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Ei(i.arrayValue.values[e]);return t}return Object.assign({},i)}function Sm(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(t){this.value=t}static empty(){return new me({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!bs(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ei(e)}setAll(t){let e=Jt.emptyPath(),n={},r=[];t.forEach((o,l)=>{if(!e.isImmediateParentOf(l)){const u=this.getFieldsMap(e);this.applyChanges(u,n,r),n={},r=[],e=l.popLast()}o?n[l.lastSegment()]=Ei(o):r.push(l.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,n,r)}delete(t){const e=this.field(t.popLast());bs(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return sn(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];bs(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){cr(e,(r,s)=>t[r]=s);for(const r of n)delete t[r]}clone(){return new me(Ei(this.value))}}function Vh(i){const t=[];return cr(i.fields,(e,n)=>{const r=new Jt([e]);if(bs(n)){const s=Vh(n.mapValue).fields;if(s.length===0)t.push(r);else for(const o of s)t.push(r.child(o))}else t.push(r)}),new Ce(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t,e,n,r,s,o,l){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(t){return new ae(t,0,Y.min(),Y.min(),Y.min(),me.empty(),0)}static newFoundDocument(t,e,n,r){return new ae(t,1,e,Y.min(),n,r,0)}static newNoDocument(t,e){return new ae(t,2,e,Y.min(),Y.min(),me.empty(),0)}static newUnknownDocument(t,e){return new ae(t,3,e,Y.min(),Y.min(),me.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=me.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=me.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ae&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ae(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(t,e){this.position=t,this.inclusive=e}}function lc(i,t,e){let n=0;for(let r=0;r<i.position.length;r++){const s=t[r],o=i.position[r];if(s.field.isKeyField()?n=K.comparator(K.fromName(o.referenceValue),e.key):n=Or(o,e.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function uc(i,t){if(i===null)return t===null;if(t===null||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let e=0;e<i.position.length;e++)if(!sn(i.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(t,e="asc"){this.field=t,this.dir=e}}function Cm(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{}class qt extends kh{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,n):new Vm(t,e,n):e==="array-contains"?new Nm(t,n):e==="in"?new Om(t,n):e==="not-in"?new Mm(t,n):e==="array-contains-any"?new Fm(t,n):new qt(t,e,n)}static createKeyFieldInFilter(t,e,n){return e==="in"?new km(t,n):new xm(t,n)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(Or(e,this.value)):e!==null&&ar(this.value)===ar(e)&&this.matchesComparison(Or(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return W()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class on extends kh{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new on(t,e)}matches(t){return xh(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function xh(i){return i.op==="and"}function Nh(i){return Dm(i)&&xh(i)}function Dm(i){for(const t of i.filters)if(t instanceof on)return!1;return!0}function ca(i){if(i instanceof qt)return i.field.canonicalString()+i.op.toString()+Mr(i.value);if(Nh(i))return i.filters.map(t=>ca(t)).join(",");{const t=i.filters.map(e=>ca(e)).join(",");return`${i.op}(${t})`}}function Oh(i,t){return i instanceof qt?function(n,r){return r instanceof qt&&n.op===r.op&&n.field.isEqual(r.field)&&sn(n.value,r.value)}(i,t):i instanceof on?function(n,r){return r instanceof on&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((s,o,l)=>s&&Oh(o,r.filters[l]),!0):!1}(i,t):void W()}function Mh(i){return i instanceof qt?function(e){return`${e.field.canonicalString()} ${e.op} ${Mr(e.value)}`}(i):i instanceof on?function(e){return e.op.toString()+" {"+e.getFilters().map(Mh).join(" ,")+"}"}(i):"Filter"}class Vm extends qt{constructor(t,e,n){super(t,e,n),this.key=K.fromName(n.referenceValue)}matches(t){const e=K.comparator(t.key,this.key);return this.matchesComparison(e)}}class km extends qt{constructor(t,e){super(t,"in",e),this.keys=Fh("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class xm extends qt{constructor(t,e){super(t,"not-in",e),this.keys=Fh("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Fh(i,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(n=>K.fromName(n.referenceValue))}class Nm extends qt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Za(e)&&Mi(e.arrayValue,this.value)}}class Om extends qt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Mi(this.value.arrayValue,e)}}class Mm extends qt{constructor(t,e){super(t,"not-in",e)}matches(t){if(Mi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!Mi(this.value.arrayValue,e)}}class Fm extends qt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Za(e)||!e.arrayValue.values)&&e.arrayValue.values.some(n=>Mi(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(t,e=null,n=[],r=[],s=null,o=null,l=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function cc(i,t=null,e=[],n=[],r=null,s=null,o=null){return new Lm(i,t,e,n,r,s,o)}function tl(i){const t=tt(i);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(n=>ca(n)).join(","),e+="|ob:",e+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),to(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>Mr(n)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>Mr(n)).join(",")),t.ue=e}return t.ue}function el(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<i.orderBy.length;e++)if(!Cm(i.orderBy[e],t.orderBy[e]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let e=0;e<i.filters.length;e++)if(!Oh(i.filters[e],t.filters[e]))return!1;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!uc(i.startAt,t.startAt)&&uc(i.endAt,t.endAt)}function ha(i){return K.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(t,e=null,n=[],r=[],s=null,o="F",l=null,u=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function $m(i,t,e,n,r,s,o,l){return new eo(i,t,e,n,r,s,o,l)}function no(i){return new eo(i)}function hc(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Um(i){return i.collectionGroup!==null}function wi(i){const t=tt(i);if(t.ce===null){t.ce=[];const e=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Zt(Jt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.ce.push(new $s(s,n))}),e.has(Jt.keyField().canonicalString())||t.ce.push(new $s(Jt.keyField(),n))}return t.ce}function en(i){const t=tt(i);return t.le||(t.le=Bm(t,wi(i))),t.le}function Bm(i,t){if(i.limitType==="F")return cc(i.path,i.collectionGroup,t,i.filters,i.limit,i.startAt,i.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new $s(r.field,s)});const e=i.endAt?new Ls(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new Ls(i.startAt.position,i.startAt.inclusive):null;return cc(i.path,i.collectionGroup,t,i.filters,i.limit,e,n)}}function fa(i,t,e){return new eo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,e,i.startAt,i.endAt)}function ro(i,t){return el(en(i),en(t))&&i.limitType===t.limitType}function Lh(i){return`${tl(en(i))}|lt:${i.limitType}`}function Er(i){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>Mh(r)).join(", ")}]`),to(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Mr(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Mr(r)).join(",")),`Target(${n})`}(en(i))}; limitType=${i.limitType})`}function io(i,t){return t.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):K.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(i,t)&&function(n,r){for(const s of wi(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(i,t)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(i,t)&&function(n,r){return!(n.startAt&&!function(o,l,u){const c=lc(o,l,u);return o.inclusive?c<=0:c<0}(n.startAt,wi(n),r)||n.endAt&&!function(o,l,u){const c=lc(o,l,u);return o.inclusive?c>=0:c>0}(n.endAt,wi(n),r))}(i,t)}function jm(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function $h(i){return(t,e)=>{let n=!1;for(const r of wi(i)){const s=zm(r,t,e);if(s!==0)return s;n=n||r.field.isKeyField()}return 0}}function zm(i,t,e){const n=i.field.isKeyField()?K.comparator(t.key,e.key):function(s,o,l){const u=o.data.field(s),c=l.data.field(s);return u!==null&&c!==null?Or(u,c):W()}(i.field,t,e);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return W()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(n!==void 0){for(const[r,s]of n)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return this.inner[n]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return n.length===1?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){cr(this.inner,(e,n)=>{for(const[r,s]of n)t(r,s)})}isEmpty(){return Ch(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm=new xt(K.comparator);function gn(){return qm}const Uh=new xt(K.comparator);function mi(...i){let t=Uh;for(const e of i)t=t.insert(e.key,e);return t}function Bh(i){let t=Uh;return i.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Yn(){return Ii()}function jh(){return Ii()}function Ii(){return new Qr(i=>i.toString(),(i,t)=>i.isEqual(t))}const Gm=new xt(K.comparator),Km=new Zt(K.comparator);function ot(...i){let t=Km;for(const e of i)t=t.add(e);return t}const Hm=new Zt(ft);function Wm(){return Hm}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(i,t){if(i.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fs(t)?"-0":t}}function qh(i){return{integerValue:""+i}}function Qm(i,t){return bm(t)?qh(t):zh(i,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(){this._=void 0}}function Xm(i,t,e){return i instanceof Us?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Ya(s)&&(s=Ja(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(e,t):i instanceof Fi?Kh(i,t):i instanceof Li?Hh(i,t):function(r,s){const o=Gh(r,s),l=fc(o)+fc(r.Pe);return ua(o)&&ua(r.Pe)?qh(l):zh(r.serializer,l)}(i,t)}function Ym(i,t,e){return i instanceof Fi?Kh(i,t):i instanceof Li?Hh(i,t):e}function Gh(i,t){return i instanceof Bs?function(n){return ua(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}class Us extends so{}class Fi extends so{constructor(t){super(),this.elements=t}}function Kh(i,t){const e=Wh(t);for(const n of i.elements)e.some(r=>sn(r,n))||e.push(n);return{arrayValue:{values:e}}}class Li extends so{constructor(t){super(),this.elements=t}}function Hh(i,t){let e=Wh(t);for(const n of i.elements)e=e.filter(r=>!sn(r,n));return{arrayValue:{values:e}}}class Bs extends so{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function fc(i){return Ut(i.integerValue||i.doubleValue)}function Wh(i){return Za(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function Jm(i,t){return i.field.isEqual(t.field)&&function(n,r){return n instanceof Fi&&r instanceof Fi||n instanceof Li&&r instanceof Li?Nr(n.elements,r.elements,sn):n instanceof Bs&&r instanceof Bs?sn(n.Pe,r.Pe):n instanceof Us&&r instanceof Us}(i.transform,t.transform)}class Zm{constructor(t,e){this.version=t,this.transformResults=e}}class Ve{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ve}static exists(t){return new Ve(void 0,t)}static updateTime(t){return new Ve(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Rs(i,t){return i.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(i.updateTime):i.exists===void 0||i.exists===t.isFoundDocument()}class oo{}function Qh(i,t){if(!i.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return i.isNoDocument()?new nl(i.key,Ve.none()):new Qi(i.key,i.data,Ve.none());{const e=i.data,n=me.empty();let r=new Zt(Jt.comparator);for(let s of t.fields)if(!r.has(s)){let o=e.field(s);o===null&&s.length>1&&(s=s.popLast(),o=e.field(s)),o===null?n.delete(s):n.set(s,o),r=r.add(s)}return new Bn(i.key,n,new Ce(r.toArray()),Ve.none())}}function tg(i,t,e){i instanceof Qi?function(r,s,o){const l=r.value.clone(),u=_c(r.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(i,t,e):i instanceof Bn?function(r,s,o){if(!Rs(r.precondition,s))return void s.convertToUnknownDocument(o.version);const l=_c(r.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(Xh(r)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(i,t,e):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,e)}function Ai(i,t,e,n){return i instanceof Qi?function(s,o,l,u){if(!Rs(s.precondition,o))return l;const c=s.value.clone(),f=pc(s.fieldTransforms,u,o);return c.setAll(f),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(i,t,e,n):i instanceof Bn?function(s,o,l,u){if(!Rs(s.precondition,o))return l;const c=pc(s.fieldTransforms,u,o),f=o.data;return f.setAll(Xh(s)),f.setAll(c),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(_=>_.field))}(i,t,e,n):function(s,o,l){return Rs(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(i,t,e)}function eg(i,t){let e=null;for(const n of i.fieldTransforms){const r=t.data.field(n.field),s=Gh(n.transform,r||null);s!=null&&(e===null&&(e=me.empty()),e.set(n.field,s))}return e||null}function dc(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Nr(n,r,(s,o)=>Jm(s,o))}(i.fieldTransforms,t.fieldTransforms)&&(i.type===0?i.value.isEqual(t.value):i.type!==1||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask))}class Qi extends oo{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Bn extends oo{constructor(t,e,n,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Xh(i){const t=new Map;return i.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const n=i.data.field(e);t.set(e,n)}}),t}function _c(i,t,e){const n=new Map;It(i.length===e.length);for(let r=0;r<e.length;r++){const s=i[r],o=s.transform,l=t.data.field(s.field);n.set(s.field,Ym(o,l,e[r]))}return n}function pc(i,t,e){const n=new Map;for(const r of i){const s=r.transform,o=e.data.field(r.field);n.set(r.field,Xm(s,o,t))}return n}class nl extends oo{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ng extends oo{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&tg(s,t,n[r])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Ai(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Ai(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=jh();return this.mutations.forEach(r=>{const s=t.get(r.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=e.has(r.key)?null:l;const u=Qh(o,l);u!==null&&n.set(r.key,u),o.isValidDocument()||o.convertToNoDocument(Y.min())}),n}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),ot())}isEqual(t){return this.batchId===t.batchId&&Nr(this.mutations,t.mutations,(e,n)=>dc(e,n))&&Nr(this.baseMutations,t.baseMutations,(e,n)=>dc(e,n))}}class rl{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){It(t.mutations.length===n.length);let r=function(){return Gm}();const s=t.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,n[o].version);return new rl(t,e,n,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t,ut;function og(i){switch(i){default:return W();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function Yh(i){if(i===void 0)return mn("GRPC error has no .code"),M.UNKNOWN;switch(i){case $t.OK:return M.OK;case $t.CANCELLED:return M.CANCELLED;case $t.UNKNOWN:return M.UNKNOWN;case $t.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case $t.INTERNAL:return M.INTERNAL;case $t.UNAVAILABLE:return M.UNAVAILABLE;case $t.UNAUTHENTICATED:return M.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case $t.NOT_FOUND:return M.NOT_FOUND;case $t.ALREADY_EXISTS:return M.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return M.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case $t.ABORTED:return M.ABORTED;case $t.OUT_OF_RANGE:return M.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return M.UNIMPLEMENTED;case $t.DATA_LOSS:return M.DATA_LOSS;default:return W()}}(ut=$t||($t={}))[ut.OK=0]="OK",ut[ut.CANCELLED=1]="CANCELLED",ut[ut.UNKNOWN=2]="UNKNOWN",ut[ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ut[ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ut[ut.NOT_FOUND=5]="NOT_FOUND",ut[ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",ut[ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",ut[ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",ut[ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ut[ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ut[ut.ABORTED=10]="ABORTED",ut[ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",ut[ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",ut[ut.INTERNAL=13]="INTERNAL",ut[ut.UNAVAILABLE=14]="UNAVAILABLE",ut[ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg=new Zn([4294967295,4294967295],0);function mc(i){const t=ag().encode(i),e=new Th;return e.update(t),new Uint8Array(e.digest())}function gc(i){const t=new DataView(i.buffer),e=t.getUint32(0,!0),n=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Zn([e,n],0),new Zn([r,s],0)]}class il{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new gi(`Invalid padding: ${e}`);if(n<0)throw new gi(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new gi(`Invalid hash count: ${n}`);if(t.length===0&&e!==0)throw new gi(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=Zn.fromNumber(this.Ie)}Ee(t,e,n){let r=t.add(e.multiply(Zn.fromNumber(n)));return r.compare(lg)===1&&(r=new Zn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const e=mc(t),[n,r]=gc(e);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,r,s);if(!this.de(o))return!1}return!0}static create(t,e,n){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new il(s,r,e);return n.forEach(l=>o.insert(l)),o}insert(t){if(this.Ie===0)return;const e=mc(t),[n,r]=gc(e);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,r,s);this.Ae(o)}}Ae(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class gi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(t,e,n,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const r=new Map;return r.set(t,Xi.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new ao(Y.min(),r,new xt(ft),gn(),ot())}}class Xi{constructor(t,e,n,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new Xi(n,e,ot(),ot(),ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(t,e,n,r){this.Re=t,this.removedTargetIds=e,this.key=n,this.Ve=r}}class Jh{constructor(t,e){this.targetId=t,this.me=e}}class Zh{constructor(t,e,n=he.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class yc{constructor(){this.fe=0,this.ge=Tc(),this.pe=he.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=ot(),e=ot(),n=ot();return this.ge.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:W()}}),new Xi(this.pe,this.ye,t,e,n)}ve(){this.we=!1,this.ge=Tc()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,It(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ug{constructor(t){this.Le=t,this.Be=new Map,this.ke=gn(),this.qe=vc(),this.Qe=new xt(ft)}Ke(t){for(const e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(const e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{const n=this.Ge(e);switch(t.state){case 0:this.ze(e)&&n.De(t.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(t.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(n.Ne(),n.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),n.De(t.resumeToken));break;default:W()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((n,r)=>{this.ze(r)&&e(r)})}He(t){const e=t.targetId,n=t.me.count,r=this.Je(e);if(r){const s=r.target;if(ha(s))if(n===0){const o=new K(s.path);this.Ue(e,o,ae.newNoDocument(o,Y.min()))}else It(n===1);else{const o=this.Ye(e);if(o!==n){const l=this.Ze(t),u=l?this.Xe(l,t,o):1;if(u!==0){this.je(e);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,c)}}}}}Ze(t){const e=t.me.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=e;let o,l;try{o=or(n).toUint8Array()}catch(u){if(u instanceof Dh)return xr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new il(o,r,s)}catch(u){return xr(u instanceof gi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(t,e,n){return e.me.count===n-this.nt(t,e.targetId)?0:2}nt(t,e){const n=this.Le.getRemoteKeysForTarget(e);let r=0;return n.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.Ue(e,s,null),r++)}),r}rt(t){const e=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&ha(l.target)){const u=new K(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,ae.newNoDocument(u,t))}s.be&&(e.set(o,s.Ce()),s.ve())}});let n=ot();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const r=new ao(t,e,this.Qe,this.ke,n);return this.ke=gn(),this.qe=vc(),this.Qe=new xt(ft),r}$e(t,e){if(!this.ze(t))return;const n=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,n),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,n){if(!this.ze(t))return;const r=this.Ge(t);this.it(t,e)?r.Fe(e,1):r.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),n&&(this.ke=this.ke.insert(e,n))}removeTarget(t){this.Be.delete(t)}Ye(t){const e=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new yc,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new Zt(ft),this.qe=this.qe.insert(t,e)),e}ze(t){const e=this.Je(t)!==null;return e||B("WatchChangeAggregator","Detected inactive target",t),e}Je(t){const e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new yc),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function vc(){return new xt(K.comparator)}function Tc(){return new xt(K.comparator)}const cg={asc:"ASCENDING",desc:"DESCENDING"},hg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fg={and:"AND",or:"OR"};class dg{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function da(i,t){return i.useProto3Json||to(t)?t:{value:t}}function js(i,t){return i.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function tf(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function _g(i,t){return js(i,t.toTimestamp())}function nn(i){return It(!!i),Y.fromTimestamp(function(e){const n=Mn(e);return new Gt(n.seconds,n.nanos)}(i))}function sl(i,t){return _a(i,t).canonicalString()}function _a(i,t){const e=function(r){return new Pt(["projects",r.projectId,"databases",r.database])}(i).child("documents");return t===void 0?e:e.child(t)}function ef(i){const t=Pt.fromString(i);return It(af(t)),t}function pa(i,t){return sl(i.databaseId,t.path)}function $o(i,t){const e=ef(t);if(e.get(1)!==i.databaseId.projectId)throw new j(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+i.databaseId.projectId);if(e.get(3)!==i.databaseId.database)throw new j(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+i.databaseId.database);return new K(rf(e))}function nf(i,t){return sl(i.databaseId,t)}function pg(i){const t=ef(i);return t.length===4?Pt.emptyPath():rf(t)}function ma(i){return new Pt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function rf(i){return It(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function Ec(i,t,e){return{name:pa(i,t),fields:e.value.mapValue.fields}}function mg(i,t){let e;if("targetChange"in t){t.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:W()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(c,f){return c.useProto3Json?(It(f===void 0||typeof f=="string"),he.fromBase64String(f||"")):(It(f===void 0||f instanceof Buffer||f instanceof Uint8Array),he.fromUint8Array(f||new Uint8Array))}(i,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(c){const f=c.code===void 0?M.UNKNOWN:Yh(c.code);return new j(f,c.message||"")}(o);e=new Zh(n,r,s,l||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const r=$o(i,n.document.name),s=nn(n.document.updateTime),o=n.document.createTime?nn(n.document.createTime):Y.min(),l=new me({mapValue:{fields:n.document.fields}}),u=ae.newFoundDocument(r,s,o,l),c=n.targetIds||[],f=n.removedTargetIds||[];e=new Ps(c,f,u.key,u)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const r=$o(i,n.document),s=n.readTime?nn(n.readTime):Y.min(),o=ae.newNoDocument(r,s),l=n.removedTargetIds||[];e=new Ps([],l,o.key,o)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const r=$o(i,n.document),s=n.removedTargetIds||[];e=new Ps([],s,r,null)}else{if(!("filter"in t))return W();{t.filter;const n=t.filter;n.targetId;const{count:r=0,unchangedNames:s}=n,o=new sg(r,s),l=n.targetId;e=new Jh(l,o)}}return e}function gg(i,t){let e;if(t instanceof Qi)e={update:Ec(i,t.key,t.value)};else if(t instanceof nl)e={delete:pa(i,t.key)};else if(t instanceof Bn)e={update:Ec(i,t.key,t.data),updateMask:Rg(t.fieldMask)};else{if(!(t instanceof ng))return W();e={verify:pa(i,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(n=>function(s,o){const l=o.transform;if(l instanceof Us)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Fi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Li)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Bs)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw W()}(0,n))),t.precondition.isNone||(e.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:_g(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:W()}(i,t.precondition)),e}function yg(i,t){return i&&i.length>0?(It(t!==void 0),i.map(e=>function(r,s){let o=r.updateTime?nn(r.updateTime):nn(s);return o.isEqual(Y.min())&&(o=nn(s)),new Zm(o,r.transformResults||[])}(e,t))):[]}function vg(i,t){return{documents:[nf(i,t.path)]}}function Tg(i,t){const e={structuredQuery:{}},n=t.path;let r;t.collectionGroup!==null?(r=n,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=n.popLast(),e.structuredQuery.from=[{collectionId:n.lastSegment()}]),e.parent=nf(i,r);const s=function(c){if(c.length!==0)return of(on.create(c,"and"))}(t.filters);s&&(e.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(f=>function(p){return{field:wr(p.field),direction:Ig(p.dir)}}(f))}(t.orderBy);o&&(e.structuredQuery.orderBy=o);const l=da(i,t.limit);return l!==null&&(e.structuredQuery.limit=l),t.startAt&&(e.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{_t:e,parent:r}}function Eg(i){let t=pg(i.parent);const e=i.structuredQuery,n=e.from?e.from.length:0;let r=null;if(n>0){It(n===1);const f=e.from[0];f.allDescendants?r=f.collectionId:t=t.child(f.collectionId)}let s=[];e.where&&(s=function(_){const p=sf(_);return p instanceof on&&Nh(p)?p.getFilters():[p]}(e.where));let o=[];e.orderBy&&(o=function(_){return _.map(p=>function(E){return new $s(Ir(E.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(p))}(e.orderBy));let l=null;e.limit&&(l=function(_){let p;return p=typeof _=="object"?_.value:_,to(p)?null:p}(e.limit));let u=null;e.startAt&&(u=function(_){const p=!!_.before,y=_.values||[];return new Ls(y,p)}(e.startAt));let c=null;return e.endAt&&(c=function(_){const p=!_.before,y=_.values||[];return new Ls(y,p)}(e.endAt)),$m(t,r,o,s,l,"F",u,c)}function wg(i,t){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function sf(i){return i.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Ir(e.unaryFilter.field);return qt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Ir(e.unaryFilter.field);return qt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ir(e.unaryFilter.field);return qt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ir(e.unaryFilter.field);return qt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return W()}}(i):i.fieldFilter!==void 0?function(e){return qt.create(Ir(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return W()}}(e.fieldFilter.op),e.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(e){return on.create(e.compositeFilter.filters.map(n=>sf(n)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return W()}}(e.compositeFilter.op))}(i):W()}function Ig(i){return cg[i]}function Ag(i){return hg[i]}function bg(i){return fg[i]}function wr(i){return{fieldPath:i.canonicalString()}}function Ir(i){return Jt.fromServerFormat(i.fieldPath)}function of(i){return i instanceof qt?function(e){if(e.op==="=="){if(ac(e.value))return{unaryFilter:{field:wr(e.field),op:"IS_NAN"}};if(oc(e.value))return{unaryFilter:{field:wr(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(ac(e.value))return{unaryFilter:{field:wr(e.field),op:"IS_NOT_NAN"}};if(oc(e.value))return{unaryFilter:{field:wr(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wr(e.field),op:Ag(e.op),value:e.value}}}(i):i instanceof on?function(e){const n=e.getFilters().map(r=>of(r));return n.length===1?n[0]:{compositeFilter:{op:bg(e.op),filters:n}}}(i):W()}function Rg(i){const t=[];return i.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function af(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(t,e,n,r,s=Y.min(),o=Y.min(),l=he.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new An(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new An(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new An(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new An(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(t){this.ct=t}}function Sg(i){const t=Eg({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?fa(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(){this._n=new Dg}addToCollectionParentIndex(t,e){return this._n.add(e),L.resolve()}getCollectionParents(t,e){return L.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return L.resolve()}deleteFieldIndex(t,e){return L.resolve()}deleteAllFieldIndexes(t){return L.resolve()}createTargetIndexes(t,e){return L.resolve()}getDocumentsMatchingTarget(t,e){return L.resolve(null)}getIndexType(t,e){return L.resolve(0)}getFieldIndexes(t,e){return L.resolve([])}getNextCollectionGroupToUpdate(t){return L.resolve(null)}getMinOffset(t,e){return L.resolve(On.min())}getMinOffsetFromCollectionGroup(t,e){return L.resolve(On.min())}updateCollectionGroup(t,e,n){return L.resolve()}updateIndexEntries(t,e){return L.resolve()}}class Dg{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Zt(Pt.comparator),s=!r.has(n);return this.index[e]=r.add(n),s}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new Zt(Pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new Fr(0)}static Ln(){return new Fr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(){this.changes=new Qr(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ae.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return n!==void 0?L.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(t,e,n,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(n=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(n!==null&&Ai(n.mutation,r,Ce.empty(),Gt.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(n=>this.getLocalViewOfDocuments(t,n,ot()).next(()=>n))}getLocalViewOfDocuments(t,e,n=ot()){const r=Yn();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,n).next(s=>{let o=mi();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){const n=Yn();return this.populateOverlays(t,n,e).next(()=>this.computeViews(t,e,n,ot()))}populateOverlays(t,e,n){const r=[];return n.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,l)=>{e.set(o,l)})})}computeViews(t,e,n,r){let s=gn();const o=Ii(),l=function(){return Ii()}();return e.forEach((u,c)=>{const f=n.get(c.key);r.has(c.key)&&(f===void 0||f.mutation instanceof Bn)?s=s.insert(c.key,c):f!==void 0?(o.set(c.key,f.mutation.getFieldMask()),Ai(f.mutation,c,f.mutation.getFieldMask(),Gt.now())):o.set(c.key,Ce.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((c,f)=>o.set(c,f)),e.forEach((c,f)=>{var _;return l.set(c,new kg(f,(_=o.get(c))!==null&&_!==void 0?_:null))}),l))}recalculateAndSaveOverlays(t,e){const n=Ii();let r=new xt((o,l)=>o-l),s=ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=e.get(u);if(c===null)return;let f=n.get(u)||Ce.empty();f=l.applyToLocalView(c,f),n.set(u,f);const _=(r.get(l.batchId)||ot()).add(u);r=r.insert(l.batchId,_)})}).next(()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,f=u.value,_=jh();f.forEach(p=>{if(!s.has(p)){const y=Qh(e.get(p),n.get(p));y!==null&&_.set(p,y),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,_))}return L.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,e,n,r){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Um(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,r):this.getDocumentsMatchingCollectionQuery(t,e,n,r)}getNextDocuments(t,e,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-s.size):L.resolve(Yn());let l=-1,u=s;return o.next(c=>L.forEach(c,(f,_)=>(l<_.largestBatchId&&(l=_.largestBatchId),s.get(f)?L.resolve():this.remoteDocumentCache.getEntry(t,f).next(p=>{u=u.insert(f,p)}))).next(()=>this.populateOverlays(t,c,s)).next(()=>this.computeViews(t,u,c,ot())).next(f=>({batchId:l,changes:Bh(f)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new K(e)).next(n=>{let r=mi();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,n,r){const s=e.collectionGroup;let o=mi();return this.indexManager.getCollectionParents(t,s).next(l=>L.forEach(l,u=>{const c=function(_,p){return new eo(p,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(e,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,c,n,r).next(f=>{f.forEach((_,p)=>{o=o.insert(_,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,s,r))).next(o=>{s.forEach((u,c)=>{const f=c.getKey();o.get(f)===null&&(o=o.insert(f,ae.newInvalidDocument(f)))});let l=mi();return o.forEach((u,c)=>{const f=s.get(u);f!==void 0&&Ai(f.mutation,c,Ce.empty(),Gt.now()),io(e,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return L.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:nn(r.createTime)}}(e)),L.resolve()}getNamedQuery(t,e){return L.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,function(r){return{name:r.name,query:Sg(r.bundledQuery),readTime:nn(r.readTime)}}(e)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(){this.overlays=new xt(K.comparator),this.hr=new Map}getOverlay(t,e){return L.resolve(this.overlays.get(e))}getOverlays(t,e){const n=Yn();return L.forEach(e,r=>this.getOverlay(t,r).next(s=>{s!==null&&n.set(r,s)})).next(()=>n)}saveOverlays(t,e,n){return n.forEach((r,s)=>{this.ht(t,e,s)}),L.resolve()}removeOverlaysForBatchId(t,e,n){const r=this.hr.get(n);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(n)),L.resolve()}getOverlaysForCollection(t,e,n){const r=Yn(),s=e.length+1,o=new K(e.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!e.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>n&&r.set(u.getKey(),u)}return L.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let s=new xt((c,f)=>c-f);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===e&&c.largestBatchId>n){let f=s.get(c.largestBatchId);f===null&&(f=Yn(),s=s.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const l=Yn(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,f)=>l.set(c,f)),!(l.size()>=r)););return L.resolve(l)}ht(t,e,n){const r=this.overlays.get(n.key);if(r!==null){const o=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new ig(e,n));let s=this.hr.get(e);s===void 0&&(s=ot(),this.hr.set(e,s)),this.hr.set(e,s.add(n.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(){this.Pr=new Zt(Kt.Ir),this.Tr=new Zt(Kt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){const n=new Kt(t,e);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(t,e){t.forEach(n=>this.addReference(n,e))}removeReference(t,e){this.Ar(new Kt(t,e))}Rr(t,e){t.forEach(n=>this.removeReference(n,e))}Vr(t){const e=new K(new Pt([])),n=new Kt(e,t),r=new Kt(e,t+1),s=[];return this.Tr.forEachInRange([n,r],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const e=new K(new Pt([])),n=new Kt(e,t),r=new Kt(e,t+1);let s=ot();return this.Tr.forEachInRange([n,r],o=>{s=s.add(o.key)}),s}containsKey(t){const e=new Kt(t,0),n=this.Pr.firstAfterOrEqual(e);return n!==null&&t.isEqual(n.key)}}class Kt{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return K.comparator(t.key,e.key)||ft(t.pr,e.pr)}static Er(t,e){return ft(t.pr,e.pr)||K.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new Zt(Kt.Ir)}checkEmpty(t){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,n,r){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new rg(s,e,n,r);this.mutationQueue.push(o);for(const l of r)this.wr=this.wr.add(new Kt(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return L.resolve(o)}lookupMutationBatch(t,e){return L.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=this.br(n),s=r<0?0:r;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Kt(e,0),r=new Kt(e,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([n,r],o=>{const l=this.Sr(o.pr);s.push(l)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Zt(ft);return e.forEach(r=>{const s=new Kt(r,0),o=new Kt(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],l=>{n=n.add(l.pr)})}),L.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let s=n;K.isDocumentKey(s)||(s=s.child(""));const o=new Kt(new K(s),0);let l=new Zt(ft);return this.wr.forEachWhile(u=>{const c=u.key.path;return!!n.isPrefixOf(c)&&(c.length===r&&(l=l.add(u.pr)),!0)},o),L.resolve(this.Dr(l))}Dr(t){const e=[];return t.forEach(n=>{const r=this.Sr(n);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){It(this.Cr(e.batchId,"removed")===0),this.mutationQueue.shift();let n=this.wr;return L.forEach(e.mutations,r=>{const s=new Kt(r.key,e.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.wr=n})}Mn(t){}containsKey(t,e){const n=new Kt(e,0),r=this.wr.firstAfterOrEqual(n);return L.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,L.resolve()}Cr(t,e){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(t){this.vr=t,this.docs=function(){return new xt(K.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,r=this.docs.get(n),s=r?r.size:0,o=this.vr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return L.resolve(n?n.document.mutableCopy():ae.newInvalidDocument(e))}getEntries(t,e){let n=gn();return e.forEach(r=>{const s=this.docs.get(r);n=n.insert(r,s?s.document.mutableCopy():ae.newInvalidDocument(r))}),L.resolve(n)}getDocumentsMatchingQuery(t,e,n,r){let s=gn();const o=e.path,l=new K(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:f}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Em(Tm(f),n)<=0||(r.has(f.key)||io(e,f))&&(s=s.insert(f.key,f.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(t,e,n,r){W()}Fr(t,e){return L.forEach(this.docs,n=>e(n))}newChangeBuffer(t){return new Lg(this)}getSize(t){return L.resolve(this.size)}}class Lg extends Vg{constructor(t){super(),this.ar=t}applyChanges(t){const e=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?e.push(this.ar.addEntry(t,r)):this.ar.removeEntry(n)}),L.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(t){this.persistence=t,this.Mr=new Qr(e=>tl(e),el),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ol,this.targetCount=0,this.Lr=Fr.Nn()}forEachTarget(t,e){return this.Mr.forEach((n,r)=>e(r)),L.resolve()}getLastRemoteSnapshotVersion(t){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return L.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Or&&(this.Or=e),L.resolve()}qn(t){this.Mr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Lr=new Fr(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,L.resolve()}updateTargetData(t,e){return this.qn(e),L.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,L.resolve()}removeTargets(t,e,n){let r=0;const s=[];return this.Mr.forEach((o,l)=>{l.sequenceNumber<=e&&n.get(l.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),L.waitFor(s).next(()=>r)}getTargetCount(t){return L.resolve(this.targetCount)}getTargetData(t,e){const n=this.Mr.get(e)||null;return L.resolve(n)}addMatchingKeys(t,e,n){return this.Nr.dr(e,n),L.resolve()}removeMatchingKeys(t,e,n){this.Nr.Rr(e,n);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),L.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Nr.gr(e);return L.resolve(n)}containsKey(t,e){return L.resolve(this.Nr.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(t,e){this.Br={},this.overlays={},this.kr=new Xa(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new $g(this),this.indexManager=new Cg,this.remoteDocumentCache=function(r){return new Fg(r)}(n=>this.referenceDelegate.Kr(n)),this.serializer=new Pg(e),this.$r=new Ng(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new Og,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Br[t.toKey()];return n||(n=new Mg(e,this.referenceDelegate),this.Br[t.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,n){B("MemoryPersistence","Starting transaction:",t);const r=new Bg(this.kr.next());return this.referenceDelegate.Ur(),n(r).next(s=>this.referenceDelegate.Wr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gr(t,e){return L.or(Object.values(this.Br).map(n=>()=>n.containsKey(t,e)))}}class Bg extends Im{constructor(t){super(),this.currentSequenceNumber=t}}class al{constructor(t){this.persistence=t,this.zr=new ol,this.jr=null}static Hr(t){return new al(t)}get Jr(){if(this.jr)return this.jr;throw W()}addReference(t,e,n){return this.zr.addReference(n,e),this.Jr.delete(n.toString()),L.resolve()}removeReference(t,e,n){return this.zr.removeReference(n,e),this.Jr.add(n.toString()),L.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),L.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach(r=>this.Jr.add(r.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Jr.add(s.toString()))}).next(()=>n.removeTargetData(t,e))}Ur(){this.jr=new Set}Wr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Jr,n=>{const r=K.fromPath(n);return this.Yr(t,r).next(s=>{s||e.removeEntry(r,Y.min())})}).next(()=>(this.jr=null,e.apply(t)))}updateLimboDocument(t,e){return this.Yr(t,e).next(n=>{n?this.Jr.delete(e.toString()):this.Jr.add(e.toString())})}Kr(t){return 0}Yr(t,e){return L.or([()=>L.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.qi=n,this.Qi=r}static Ki(t,e){let n=ot(),r=ot();for(const s of e.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new ll(t,e.fromCache,n,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Q_()?8:Am(H_())>0?6:4}()}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,n,r){const s={result:null};return this.ji(t,e).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,e,r,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new jg;return this.Ji(t,e,o).next(l=>{if(s.result=l,this.Ui)return this.Yi(t,e,o,l.size)})}).next(()=>s.result)}Yi(t,e,n,r){return n.documentReadCount<this.Wi?(di()<=ct.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",Er(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),L.resolve()):(di()<=ct.DEBUG&&B("QueryEngine","Query:",Er(e),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(di()<=ct.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",Er(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,en(e))):L.resolve())}ji(t,e){if(hc(e))return L.resolve(null);let n=en(e);return this.indexManager.getIndexType(t,n).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=fa(e,null,"F"),n=en(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{const o=ot(...s);return this.zi.getDocuments(t,o).next(l=>this.indexManager.getMinOffset(t,n).next(u=>{const c=this.Zi(e,l);return this.Xi(e,c,o,u.readTime)?this.ji(t,fa(e,null,"F")):this.es(t,c,e,u)}))})))}Hi(t,e,n,r){return hc(e)||r.isEqual(Y.min())?L.resolve(null):this.zi.getDocuments(t,n).next(s=>{const o=this.Zi(e,s);return this.Xi(e,o,n,r)?L.resolve(null):(di()<=ct.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Er(e)),this.es(t,o,e,vm(r,-1)).next(l=>l))})}Zi(t,e){let n=new Zt($h(t));return e.forEach((r,s)=>{io(t,s)&&(n=n.add(s))}),n}Xi(t,e,n,r){if(t.limit===null)return!1;if(n.size!==e.size)return!0;const s=t.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ji(t,e,n){return di()<=ct.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",Er(e)),this.zi.getDocumentsMatchingQuery(t,e,On.min(),n)}es(t,e,n,r){return this.zi.getDocumentsMatchingQuery(t,n,r).next(s=>(e.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(t,e,n,r){this.persistence=t,this.ts=e,this.serializer=r,this.ns=new xt(ft),this.rs=new Qr(s=>tl(s),el),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(n)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new xg(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ns))}}function Gg(i,t,e,n){return new qg(i,t,e,n)}async function lf(i,t){const e=tt(i);return await e.persistence.runTransaction("Handle user change","readonly",n=>{let r;return e.mutationQueue.getAllMutationBatches(n).next(s=>(r=s,e._s(t),e.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],l=[];let u=ot();for(const c of r){o.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}for(const c of s){l.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}return e.localDocuments.getDocuments(n,u).next(c=>({us:c,removedBatchIds:o,addedBatchIds:l}))})})}function Kg(i,t){const e=tt(i);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const r=t.batch.keys(),s=e.os.newChangeBuffer({trackRemovals:!0});return function(l,u,c,f){const _=c.batch,p=_.keys();let y=L.resolve();return p.forEach(E=>{y=y.next(()=>f.getEntry(u,E)).next(m=>{const I=c.docVersions.get(E);It(I!==null),m.version.compareTo(I)<0&&(_.applyToRemoteDocument(m,c),m.isValidDocument()&&(m.setReadTime(c.commitVersion),f.addEntry(m)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(u,_))}(e,n,t,s).next(()=>s.apply(n)).next(()=>e.mutationQueue.performConsistencyCheck(n)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(n,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let u=ot();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(t))).next(()=>e.localDocuments.getDocuments(n,r))})}function uf(i){const t=tt(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Qr.getLastRemoteSnapshotVersion(e))}function Hg(i,t){const e=tt(i),n=t.snapshotVersion;let r=e.ns;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=e.os.newChangeBuffer({trackRemovals:!0});r=e.ns;const l=[];t.targetChanges.forEach((f,_)=>{const p=r.get(_);if(!p)return;l.push(e.Qr.removeMatchingKeys(s,f.removedDocuments,_).next(()=>e.Qr.addMatchingKeys(s,f.addedDocuments,_)));let y=p.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(_)!==null?y=y.withResumeToken(he.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,n)),r=r.insert(_,y),function(m,I,C){return m.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(p,y,f)&&l.push(e.Qr.updateTargetData(s,y))});let u=gn(),c=ot();if(t.documentUpdates.forEach(f=>{t.resolvedLimboDocuments.has(f)&&l.push(e.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(Wg(s,o,t.documentUpdates).next(f=>{u=f.cs,c=f.ls})),!n.isEqual(Y.min())){const f=e.Qr.getLastRemoteSnapshotVersion(s).next(_=>e.Qr.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(f)}return L.waitFor(l).next(()=>o.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(e.ns=r,s))}function Wg(i,t,e){let n=ot(),r=ot();return e.forEach(s=>n=n.add(s)),t.getEntries(i,n).next(s=>{let o=gn();return e.forEach((l,u)=>{const c=s.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(Y.min())?(t.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(u),o=o.insert(l,u)):B("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{cs:o,ls:r}})}function Qg(i,t){const e=tt(i);return e.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function Xg(i,t){const e=tt(i);return e.persistence.runTransaction("Allocate target","readwrite",n=>{let r;return e.Qr.getTargetData(n,t).next(s=>s?(r=s,L.resolve(r)):e.Qr.allocateTargetId(n).next(o=>(r=new An(t,o,"TargetPurposeListen",n.currentSequenceNumber),e.Qr.addTargetData(n,r).next(()=>r))))}).then(n=>{const r=e.ns.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.ns=e.ns.insert(n.targetId,n),e.rs.set(t,n.targetId)),n})}async function ga(i,t,e){const n=tt(i),r=n.ns.get(t),s=e?"readwrite":"readwrite-primary";try{e||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Wi(o))throw o;B("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}n.ns=n.ns.remove(t),n.rs.delete(r.target)}function wc(i,t,e){const n=tt(i);let r=Y.min(),s=ot();return n.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,f){const _=tt(u),p=_.rs.get(f);return p!==void 0?L.resolve(_.ns.get(p)):_.Qr.getTargetData(c,f)}(n,o,en(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,n.Qr.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>n.ts.getDocumentsMatchingQuery(o,t,e?r:Y.min(),e?s:ot())).next(l=>(Yg(n,jm(t),l),{documents:l,hs:s})))}function Yg(i,t,e){let n=i.ss.get(t)||Y.min();e.forEach((r,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),i.ss.set(t,n)}class Ic{constructor(){this.activeTargetIds=Wm()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Jg{constructor(){this.no=new Ic,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,n){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Ic,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){B("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){B("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ws=null;function Uo(){return ws===null?ws=function(){return 268435456+Math.round(2147483648*Math.random())}():ws++,"0x"+ws.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se="WebChannelConnection";class ny extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=n+"://"+e.host,this.So=`projects/${r}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Do(){return!1}Co(e,n,r,s,o){const l=Uo(),u=this.vo(e,n.toUriEncodedString());B("RestConnection",`Sending RPC '${e}' ${l}:`,u,r);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(e,u,c,r).then(f=>(B("RestConnection",`Received RPC '${e}' ${l}: `,f),f),f=>{throw xr("RestConnection",`RPC '${e}' ${l} failed with error: `,f,"url: ",u,"request:",r),f})}xo(e,n,r,s,o,l){return this.Co(e,n,r,s,o)}Fo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Wr}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}vo(e,n){const r=ty[e];return`${this.wo}/v1/${n}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,e,n,r){const s=Uo();return new Promise((o,l)=>{const u=new Eh;u.setWithCredentials(!0),u.listenOnce(Ih.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case As.NO_ERROR:const f=u.getResponseJson();B(se,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(f)),o(f);break;case As.TIMEOUT:B(se,`RPC '${t}' ${s} timed out`),l(new j(M.DEADLINE_EXCEEDED,"Request time out"));break;case As.HTTP_ERROR:const _=u.getStatus();if(B(se,`RPC '${t}' ${s} failed with status:`,_,"response text:",u.getResponseText()),_>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const y=p==null?void 0:p.error;if(y&&y.status&&y.message){const E=function(I){const C=I.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(C)>=0?C:M.UNKNOWN}(y.status);l(new j(E,y.message))}else l(new j(M.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new j(M.UNAVAILABLE,"Connection failed."));break;default:W()}}finally{B(se,`RPC '${t}' ${s} completed.`)}});const c=JSON.stringify(r);B(se,`RPC '${t}' ${s} sending request:`,r),u.send(e,"POST",c,n,15)})}Oo(t,e,n){const r=Uo(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Rh(),l=bh(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new wh({})),this.Fo(u.initMessageHeaders,e,n),u.encodeInitMessageHeaders=!0;const f=s.join("");B(se,`Creating RPC '${t}' stream ${r}: ${f}`,u);const _=o.createWebChannel(f,u);let p=!1,y=!1;const E=new ey({lo:I=>{y?B(se,`Not sending because RPC '${t}' stream ${r} is closed:`,I):(p||(B(se,`Opening RPC '${t}' stream ${r} transport.`),_.open(),p=!0),B(se,`RPC '${t}' stream ${r} sending:`,I),_.send(I))},ho:()=>_.close()}),m=(I,C,S)=>{I.listen(C,k=>{try{S(k)}catch(D){setTimeout(()=>{throw D},0)}})};return m(_,pi.EventType.OPEN,()=>{y||(B(se,`RPC '${t}' stream ${r} transport opened.`),E.mo())}),m(_,pi.EventType.CLOSE,()=>{y||(y=!0,B(se,`RPC '${t}' stream ${r} transport closed`),E.po())}),m(_,pi.EventType.ERROR,I=>{y||(y=!0,xr(se,`RPC '${t}' stream ${r} transport errored:`,I),E.po(new j(M.UNAVAILABLE,"The operation could not be completed")))}),m(_,pi.EventType.MESSAGE,I=>{var C;if(!y){const S=I.data[0];It(!!S);const k=S,D=k.error||((C=k[0])===null||C===void 0?void 0:C.error);if(D){B(se,`RPC '${t}' stream ${r} received error:`,D);const x=D.status;let O=function(v){const b=$t[v];if(b!==void 0)return Yh(b)}(x),w=D.message;O===void 0&&(O=M.INTERNAL,w="Unknown error status: "+x+" with message "+D.message),y=!0,E.po(new j(O,w)),_.close()}else B(se,`RPC '${t}' stream ${r} received:`,S),E.yo(S)}}),m(l,Ah.STAT_EVENT,I=>{I.stat===aa.PROXY?B(se,`RPC '${t}' stream ${r} detected buffering proxy`):I.stat===aa.NOPROXY&&B(se,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{E.fo()},0),E}}function Bo(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(i){return new dg(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(t,e,n=1e3,r=1.5,s=6e4){this.oi=t,this.timerId=e,this.No=n,this.Lo=r,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const e=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),r=Math.max(0,e-n);r>0&&B("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(t,e,n,r,s,o,l,u){this.oi=t,this.Go=n,this.zo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new cf(t,e)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,e){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():e&&e.code===M.RESOURCE_EXHAUSTED?(mn(e.toString()),mn("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):e&&e.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(e)}__(){}auth(){this.state=1;const t=this.a_(this.jo),e=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,r])=>{this.jo===e&&this.u_(n,r)},n=>{t(()=>{const r=new j(M.UNKNOWN,"Fetching auth token failed: "+n.message);return this.c_(r)})})}u_(t,e){const n=this.a_(this.jo);this.stream=this.l_(t,e),this.stream.Po(()=>{n(()=>this.listener.Po())}),this.stream.To(()=>{n(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{n(()=>this.c_(r))}),this.stream.onMessage(r=>{n(()=>this.onMessage(r))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return B("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return e=>{this.oi.enqueueAndForget(()=>this.jo===t?e():(B("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ry extends hf{constructor(t,e,n,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,o),this.serializer=s}l_(t,e){return this.connection.Oo("Listen",t,e)}onMessage(t){this.Yo.reset();const e=mg(this.serializer,t),n=function(s){if(!("targetChange"in s))return Y.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?nn(o.readTime):Y.min()}(t);return this.listener.h_(e,n)}P_(t){const e={};e.database=ma(this.serializer),e.addTarget=function(s,o){let l;const u=o.target;if(l=ha(u)?{documents:vg(s,u)}:{query:Tg(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=tf(s,o.resumeToken);const c=da(s,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(Y.min())>0){l.readTime=js(s,o.snapshotVersion.toTimestamp());const c=da(s,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,t);const n=wg(this.serializer,t);n&&(e.labels=n),this.i_(e)}I_(t){const e={};e.database=ma(this.serializer),e.removeTarget=t,this.i_(e)}}class iy extends hf{constructor(t,e,n,r,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,e){return this.connection.Oo("Write",t,e)}onMessage(t){if(It(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const e=yg(t.writeResults,t.commitTime),n=nn(t.commitTime);return this.listener.A_(n,e)}return It(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=ma(this.serializer),this.i_(t)}d_(t){const e={streamToken:this.lastStreamToken,writes:t.map(n=>gg(this.serializer,n))};this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy extends class{}{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new j(M.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,e,n,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,_a(e,n),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(M.UNKNOWN,s.toString())})}xo(t,e,n,r,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.xo(t,_a(e,n),r,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(M.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class oy{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(mn(e),this.y_=!1):B("OnlineStateTracker",e)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(t,e,n,r,s){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{n.enqueueAndForget(async()=>{hr(this)&&(B("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=tt(u);c.M_.add(4),await Yi(c),c.N_.set("Unknown"),c.M_.delete(4),await uo(c)}(this))})}),this.N_=new oy(n,r)}}async function uo(i){if(hr(i))for(const t of i.x_)await t(!0)}async function Yi(i){for(const t of i.x_)await t(!1)}function ff(i,t){const e=tt(i);e.F_.has(t.targetId)||(e.F_.set(t.targetId,t),fl(e)?hl(e):Xr(e).Xo()&&cl(e,t))}function ul(i,t){const e=tt(i),n=Xr(e);e.F_.delete(t),n.Xo()&&df(e,t),e.F_.size===0&&(n.Xo()?n.n_():hr(e)&&e.N_.set("Unknown"))}function cl(i,t){if(i.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Y.min())>0){const e=i.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Xr(i).P_(t)}function df(i,t){i.L_.xe(t),Xr(i).I_(t)}function hl(i){i.L_=new ug({getRemoteKeysForTarget:t=>i.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>i.F_.get(t)||null,tt:()=>i.datastore.serializer.databaseId}),Xr(i).start(),i.N_.w_()}function fl(i){return hr(i)&&!Xr(i).Zo()&&i.F_.size>0}function hr(i){return tt(i).M_.size===0}function _f(i){i.L_=void 0}async function ly(i){i.N_.set("Online")}async function uy(i){i.F_.forEach((t,e)=>{cl(i,t)})}async function cy(i,t){_f(i),fl(i)?(i.N_.D_(t),hl(i)):i.N_.set("Unknown")}async function hy(i,t,e){if(i.N_.set("Online"),t instanceof Zh&&t.state===2&&t.cause)try{await async function(r,s){const o=s.cause;for(const l of s.targetIds)r.F_.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.F_.delete(l),r.L_.removeTarget(l))}(i,t)}catch(n){B("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await zs(i,n)}else if(t instanceof Ps?i.L_.Ke(t):t instanceof Jh?i.L_.He(t):i.L_.We(t),!e.isEqual(Y.min()))try{const n=await uf(i.localStore);e.compareTo(n)>=0&&await function(s,o){const l=s.L_.rt(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const f=s.F_.get(c);f&&s.F_.set(c,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const f=s.F_.get(u);if(!f)return;s.F_.set(u,f.withResumeToken(he.EMPTY_BYTE_STRING,f.snapshotVersion)),df(s,u);const _=new An(f.target,u,c,f.sequenceNumber);cl(s,_)}),s.remoteSyncer.applyRemoteEvent(l)}(i,e)}catch(n){B("RemoteStore","Failed to raise snapshot:",n),await zs(i,n)}}async function zs(i,t,e){if(!Wi(t))throw t;i.M_.add(1),await Yi(i),i.N_.set("Offline"),e||(e=()=>uf(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{B("RemoteStore","Retrying IndexedDB access"),await e(),i.M_.delete(1),await uo(i)})}function pf(i,t){return t().catch(e=>zs(i,e,t))}async function co(i){const t=tt(i),e=Fn(t);let n=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;fy(t);)try{const r=await Qg(t.localStore,n);if(r===null){t.v_.length===0&&e.n_();break}n=r.batchId,dy(t,r)}catch(r){await zs(t,r)}mf(t)&&gf(t)}function fy(i){return hr(i)&&i.v_.length<10}function dy(i,t){i.v_.push(t);const e=Fn(i);e.Xo()&&e.E_&&e.d_(t.mutations)}function mf(i){return hr(i)&&!Fn(i).Zo()&&i.v_.length>0}function gf(i){Fn(i).start()}async function _y(i){Fn(i).V_()}async function py(i){const t=Fn(i);for(const e of i.v_)t.d_(e.mutations)}async function my(i,t,e){const n=i.v_.shift(),r=rl.from(n,t,e);await pf(i,()=>i.remoteSyncer.applySuccessfulWrite(r)),await co(i)}async function gy(i,t){t&&Fn(i).E_&&await async function(n,r){if(function(o){return og(o)&&o!==M.ABORTED}(r.code)){const s=n.v_.shift();Fn(n).t_(),await pf(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await co(n)}}(i,t),mf(i)&&gf(i)}async function bc(i,t){const e=tt(i);e.asyncQueue.verifyOperationInProgress(),B("RemoteStore","RemoteStore received new credentials");const n=hr(e);e.M_.add(3),await Yi(e),n&&e.N_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.M_.delete(3),await uo(e)}async function yy(i,t){const e=tt(i);t?(e.M_.delete(2),await uo(e)):t||(e.M_.add(2),await Yi(e),e.N_.set("Unknown"))}function Xr(i){return i.B_||(i.B_=function(e,n,r){const s=tt(e);return s.f_(),new ry(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{Po:ly.bind(null,i),To:uy.bind(null,i),Ao:cy.bind(null,i),h_:hy.bind(null,i)}),i.x_.push(async t=>{t?(i.B_.t_(),fl(i)?hl(i):i.N_.set("Unknown")):(await i.B_.stop(),_f(i))})),i.B_}function Fn(i){return i.k_||(i.k_=function(e,n,r){const s=tt(e);return s.f_(),new iy(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{Po:()=>Promise.resolve(),To:_y.bind(null,i),Ao:gy.bind(null,i),R_:py.bind(null,i),A_:my.bind(null,i)}),i.x_.push(async t=>{t?(i.k_.t_(),await co(i)):(await i.k_.stop(),i.v_.length>0&&(B("RemoteStore",`Stopping write stream with ${i.v_.length} pending writes`),i.v_=[]))})),i.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(t,e,n,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new pn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,r,s){const o=Date.now()+n,l=new dl(t,e,o,r,s);return l.start(n),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(M.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _l(i,t){if(mn("AsyncQueue",`${t}: ${i}`),Wi(i))return new j(M.UNAVAILABLE,`${t}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(t){this.comparator=t?(e,n)=>t(e,n)||K.comparator(e.key,n.key):(e,n)=>K.comparator(e.key,n.key),this.keyedMap=mi(),this.sortedSet=new xt(this.comparator)}static emptySet(t){return new Pr(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,n)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Pr)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=n.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const n=new Pr;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(){this.q_=new xt(K.comparator)}track(t){const e=t.doc.key,n=this.q_.get(e);n?t.type!==0&&n.type===3?this.q_=this.q_.insert(e,t):t.type===3&&n.type!==1?this.q_=this.q_.insert(e,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.q_=this.q_.insert(e,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.q_=this.q_.remove(e):t.type===1&&n.type===2?this.q_=this.q_.insert(e,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):W():this.q_=this.q_.insert(e,t)}Q_(){const t=[];return this.q_.inorderTraversal((e,n)=>{t.push(n)}),t}}class Lr{constructor(t,e,n,r,s,o,l,u,c){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(t,e,n,r,s){const o=[];return e.forEach(l=>{o.push({type:0,doc:l})}),new Lr(t,e,Pr.emptySet(e),o,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ro(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class Ty{constructor(){this.queries=new Qr(t=>Lh(t),ro),this.onlineState="Unknown",this.z_=new Set}}async function pl(i,t){const e=tt(i);let n=3;const r=t.query;let s=e.queries.get(r);s?!s.W_()&&t.G_()&&(n=2):(s=new vy,n=t.G_()?0:1);try{switch(n){case 0:s.K_=await e.onListen(r,!0);break;case 1:s.K_=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(o){const l=_l(o,`Initialization of query '${Er(t.query)}' failed`);return void t.onError(l)}e.queries.set(r,s),s.U_.push(t),t.j_(e.onlineState),s.K_&&t.H_(s.K_)&&gl(e)}async function ml(i,t){const e=tt(i),n=t.query;let r=3;const s=e.queries.get(n);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?r=t.G_()?0:1:!s.W_()&&t.G_()&&(r=2))}switch(r){case 0:return e.queries.delete(n),e.onUnlisten(n,!0);case 1:return e.queries.delete(n),e.onUnlisten(n,!1);case 2:return e.onLastRemoteStoreUnlisten(n);default:return}}function Ey(i,t){const e=tt(i);let n=!1;for(const r of t){const s=r.query,o=e.queries.get(s);if(o){for(const l of o.U_)l.H_(r)&&(n=!0);o.K_=r}}n&&gl(e)}function wy(i,t,e){const n=tt(i),r=n.queries.get(t);if(r)for(const s of r.U_)s.onError(e);n.queries.delete(t)}function gl(i){i.z_.forEach(t=>{t.next()})}var ya,Pc;(Pc=ya||(ya={})).J_="default",Pc.Cache="cache";class yl{constructor(t,e,n){this.query=t,this.Y_=e,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(t){if(!this.options.includeMetadataChanges){const n=[];for(const r of t.docChanges)r.type!==3&&n.push(r);t=new Lr(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),e=!0):this.ta(t,this.onlineState)&&(this.na(t),e=!0),this.X_=t,e}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let e=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),e=!0),e}ta(t,e){if(!t.fromCache||!this.G_())return!0;const n=e!=="Offline";return(!this.options.ra||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const e=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}na(t){t=Lr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==ya.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(t){this.key=t}}class vf{constructor(t){this.key=t}}class Iy{constructor(t,e){this.query=t,this.la=e,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=ot(),this.mutatedKeys=ot(),this.Ia=$h(t),this.Ta=new Pr(this.Ia)}get Ea(){return this.la}da(t,e){const n=e?e.Aa:new Rc,r=e?e.Ta:this.Ta;let s=e?e.mutatedKeys:this.mutatedKeys,o=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((f,_)=>{const p=r.get(f),y=io(this.query,_)?_:null,E=!!p&&this.mutatedKeys.has(p.key),m=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let I=!1;p&&y?p.data.isEqual(y.data)?E!==m&&(n.track({type:3,doc:y}),I=!0):this.Ra(p,y)||(n.track({type:2,doc:y}),I=!0,(u&&this.Ia(y,u)>0||c&&this.Ia(y,c)<0)&&(l=!0)):!p&&y?(n.track({type:0,doc:y}),I=!0):p&&!y&&(n.track({type:1,doc:p}),I=!0,(u||c)&&(l=!0)),I&&(y?(o=o.add(y),s=m?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),n.track({type:1,doc:f})}return{Ta:o,Aa:n,Xi:l,mutatedKeys:s}}Ra(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,r){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((f,_)=>function(y,E){const m=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W()}};return m(y)-m(E)}(f.type,_.type)||this.Ia(f.doc,_.doc)),this.Va(n),r=r!=null&&r;const l=e&&!r?this.ma():[],u=this.Pa.size===0&&this.current&&!r?1:0,c=u!==this.ha;return this.ha=u,o.length!==0||c?{snapshot:new Lr(this.query,t.Ta,s,o,t.mutatedKeys,u===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:l}:{fa:l}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Rc,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(e=>this.la=this.la.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.la=this.la.delete(e)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=ot(),this.Ta.forEach(n=>{this.ga(n.key)&&(this.Pa=this.Pa.add(n.key))});const e=[];return t.forEach(n=>{this.Pa.has(n)||e.push(new vf(n))}),this.Pa.forEach(n=>{t.has(n)||e.push(new yf(n))}),e}pa(t){this.la=t.hs,this.Pa=ot();const e=this.da(t.documents);return this.applyChanges(e,!0)}ya(){return Lr.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class Ay{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class by{constructor(t){this.key=t,this.wa=!1}}class Ry{constructor(t,e,n,r,s,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Qr(l=>Lh(l),ro),this.Da=new Map,this.Ca=new Set,this.va=new xt(K.comparator),this.Fa=new Map,this.Ma=new ol,this.xa={},this.Oa=new Map,this.Na=Fr.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function Py(i,t,e=!0){const n=bf(i);let r;const s=n.ba.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ya()):r=await Tf(n,t,e,!0),r}async function Sy(i,t){const e=bf(i);await Tf(e,t,!0,!1)}async function Tf(i,t,e,n){const r=await Xg(i.localStore,en(t)),s=r.targetId,o=e?i.sharedClientState.addLocalQueryTarget(s):"not-current";let l;return n&&(l=await Cy(i,t,s,o==="current",r.resumeToken)),i.isPrimaryClient&&e&&ff(i.remoteStore,r),l}async function Cy(i,t,e,n,r){i.Ba=(_,p,y)=>async function(m,I,C,S){let k=I.view.da(C);k.Xi&&(k=await wc(m.localStore,I.query,!1).then(({documents:w})=>I.view.da(w,k)));const D=S&&S.targetChanges.get(I.targetId),x=S&&S.targetMismatches.get(I.targetId)!=null,O=I.view.applyChanges(k,m.isPrimaryClient,D,x);return Cc(m,I.targetId,O.fa),O.snapshot}(i,_,p,y);const s=await wc(i.localStore,t,!0),o=new Iy(t,s.hs),l=o.da(s.documents),u=Xi.createSynthesizedTargetChangeForCurrentChange(e,n&&i.onlineState!=="Offline",r),c=o.applyChanges(l,i.isPrimaryClient,u);Cc(i,e,c.fa);const f=new Ay(t,e,o);return i.ba.set(t,f),i.Da.has(e)?i.Da.get(e).push(t):i.Da.set(e,[t]),c.snapshot}async function Dy(i,t,e){const n=tt(i),r=n.ba.get(t),s=n.Da.get(r.targetId);if(s.length>1)return n.Da.set(r.targetId,s.filter(o=>!ro(o,t))),void n.ba.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await ga(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),e&&ul(n.remoteStore,r.targetId),va(n,r.targetId)}).catch(Hi)):(va(n,r.targetId),await ga(n.localStore,r.targetId,!0))}async function Vy(i,t){const e=tt(i),n=e.ba.get(t),r=e.Da.get(n.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(n.targetId),ul(e.remoteStore,n.targetId))}async function ky(i,t,e){const n=$y(i);try{const r=await function(o,l){const u=tt(o),c=Gt.now(),f=l.reduce((y,E)=>y.add(E.key),ot());let _,p;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=gn(),m=ot();return u.os.getEntries(y,f).next(I=>{E=I,E.forEach((C,S)=>{S.isValidDocument()||(m=m.add(C))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,E)).next(I=>{_=I;const C=[];for(const S of l){const k=eg(S,_.get(S.key).overlayedDocument);k!=null&&C.push(new Bn(S.key,k,Vh(k.value.mapValue),Ve.exists(!0)))}return u.mutationQueue.addMutationBatch(y,c,C,l)}).next(I=>{p=I;const C=I.applyToLocalDocumentSet(_,m);return u.documentOverlayCache.saveOverlays(y,I.batchId,C)})}).then(()=>({batchId:p.batchId,changes:Bh(_)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(r.batchId),function(o,l,u){let c=o.xa[o.currentUser.toKey()];c||(c=new xt(ft)),c=c.insert(l,u),o.xa[o.currentUser.toKey()]=c}(n,r.batchId,e),await Ji(n,r.changes),await co(n.remoteStore)}catch(r){const s=_l(r,"Failed to persist write");e.reject(s)}}async function Ef(i,t){const e=tt(i);try{const n=await Hg(e.localStore,t);t.targetChanges.forEach((r,s)=>{const o=e.Fa.get(s);o&&(It(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.wa=!0:r.modifiedDocuments.size>0?It(o.wa):r.removedDocuments.size>0&&(It(o.wa),o.wa=!1))}),await Ji(e,n,t)}catch(n){await Hi(n)}}function Sc(i,t,e){const n=tt(i);if(n.isPrimaryClient&&e===0||!n.isPrimaryClient&&e===1){const r=[];n.ba.forEach((s,o)=>{const l=o.view.j_(t);l.snapshot&&r.push(l.snapshot)}),function(o,l){const u=tt(o);u.onlineState=l;let c=!1;u.queries.forEach((f,_)=>{for(const p of _.U_)p.j_(l)&&(c=!0)}),c&&gl(u)}(n.eventManager,t),r.length&&n.Sa.h_(r),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function xy(i,t,e){const n=tt(i);n.sharedClientState.updateQueryState(t,"rejected",e);const r=n.Fa.get(t),s=r&&r.key;if(s){let o=new xt(K.comparator);o=o.insert(s,ae.newNoDocument(s,Y.min()));const l=ot().add(s),u=new ao(Y.min(),new Map,new xt(ft),o,l);await Ef(n,u),n.va=n.va.remove(s),n.Fa.delete(t),vl(n)}else await ga(n.localStore,t,!1).then(()=>va(n,t,e)).catch(Hi)}async function Ny(i,t){const e=tt(i),n=t.batch.batchId;try{const r=await Kg(e.localStore,t);If(e,n,null),wf(e,n),e.sharedClientState.updateMutationState(n,"acknowledged"),await Ji(e,r)}catch(r){await Hi(r)}}async function Oy(i,t,e){const n=tt(i);try{const r=await function(o,l){const u=tt(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let f;return u.mutationQueue.lookupMutationBatch(c,l).next(_=>(It(_!==null),f=_.keys(),u.mutationQueue.removeMutationBatch(c,_))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f)).next(()=>u.localDocuments.getDocuments(c,f))})}(n.localStore,t);If(n,t,e),wf(n,t),n.sharedClientState.updateMutationState(t,"rejected",e),await Ji(n,r)}catch(r){await Hi(r)}}function wf(i,t){(i.Oa.get(t)||[]).forEach(e=>{e.resolve()}),i.Oa.delete(t)}function If(i,t,e){const n=tt(i);let r=n.xa[n.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),n.xa[n.currentUser.toKey()]=r}}function va(i,t,e=null){i.sharedClientState.removeLocalQueryTarget(t);for(const n of i.Da.get(t))i.ba.delete(n),e&&i.Sa.ka(n,e);i.Da.delete(t),i.isPrimaryClient&&i.Ma.Vr(t).forEach(n=>{i.Ma.containsKey(n)||Af(i,n)})}function Af(i,t){i.Ca.delete(t.path.canonicalString());const e=i.va.get(t);e!==null&&(ul(i.remoteStore,e),i.va=i.va.remove(t),i.Fa.delete(e),vl(i))}function Cc(i,t,e){for(const n of e)n instanceof yf?(i.Ma.addReference(n.key,t),My(i,n)):n instanceof vf?(B("SyncEngine","Document no longer in limbo: "+n.key),i.Ma.removeReference(n.key,t),i.Ma.containsKey(n.key)||Af(i,n.key)):W()}function My(i,t){const e=t.key,n=e.path.canonicalString();i.va.get(e)||i.Ca.has(n)||(B("SyncEngine","New document in limbo: "+e),i.Ca.add(n),vl(i))}function vl(i){for(;i.Ca.size>0&&i.va.size<i.maxConcurrentLimboResolutions;){const t=i.Ca.values().next().value;i.Ca.delete(t);const e=new K(Pt.fromString(t)),n=i.Na.next();i.Fa.set(n,new by(e)),i.va=i.va.insert(e,n),ff(i.remoteStore,new An(en(no(e.path)),n,"TargetPurposeLimboResolution",Xa.oe))}}async function Ji(i,t,e){const n=tt(i),r=[],s=[],o=[];n.ba.isEmpty()||(n.ba.forEach((l,u)=>{o.push(n.Ba(u,t,e).then(c=>{if((c||e)&&n.isPrimaryClient){const f=c&&!c.fromCache;n.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(c){r.push(c);const f=ll.Ki(u.targetId,c);s.push(f)}}))}),await Promise.all(o),n.Sa.h_(r),await async function(u,c){const f=tt(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>L.forEach(c,p=>L.forEach(p.qi,y=>f.persistence.referenceDelegate.addReference(_,p.targetId,y)).next(()=>L.forEach(p.Qi,y=>f.persistence.referenceDelegate.removeReference(_,p.targetId,y)))))}catch(_){if(!Wi(_))throw _;B("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of c){const p=_.targetId;if(!_.fromCache){const y=f.ns.get(p),E=y.snapshotVersion,m=y.withLastLimboFreeSnapshotVersion(E);f.ns=f.ns.insert(p,m)}}}(n.localStore,s))}async function Fy(i,t){const e=tt(i);if(!e.currentUser.isEqual(t)){B("SyncEngine","User change. New user:",t.toKey());const n=await lf(e.localStore,t);e.currentUser=t,function(s,o){s.Oa.forEach(l=>{l.forEach(u=>{u.reject(new j(M.CANCELLED,o))})}),s.Oa.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await Ji(e,n.us)}}function Ly(i,t){const e=tt(i),n=e.Fa.get(t);if(n&&n.wa)return ot().add(n.key);{let r=ot();const s=e.Da.get(t);if(!s)return r;for(const o of s){const l=e.ba.get(o);r=r.unionWith(l.view.Ea)}return r}}function bf(i){const t=tt(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ef.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ly.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=xy.bind(null,t),t.Sa.h_=Ey.bind(null,t.eventManager),t.Sa.ka=wy.bind(null,t.eventManager),t}function $y(i){const t=tt(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ny.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Oy.bind(null,t),t}class Dc{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=lo(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return Gg(this.persistence,new zg,t.initialUser,this.serializer)}createPersistence(t){return new Ug(al.Hr,this.serializer)}createSharedClientState(t){return new Jg}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Uy{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Sc(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Fy.bind(null,this.syncEngine),await yy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Ty}()}createDatastore(t){const e=lo(t.databaseInfo.databaseId),n=function(s){return new ny(s)}(t.databaseInfo);return function(s,o,l,u){return new sy(s,o,l,u)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(n,r,s,o,l){return new ay(n,r,s,o,l)}(this.localStore,this.datastore,t.asyncQueue,e=>Sc(this.syncEngine,e,0),function(){return Ac.D()?new Ac:new Zg}())}createSyncEngine(t,e){return function(r,s,o,l,u,c,f){const _=new Ry(r,s,o,l,u,c);return f&&(_.La=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t;await async function(n){const r=tt(n);B("RemoteStore","RemoteStore shutting down."),r.M_.add(5),await Yi(r),r.O_.shutdown(),r.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):mn("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{constructor(t,e,n,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=oe.UNAUTHENTICATED,this.clientId=Sh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async s=>{B("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(n,s=>(B("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new j(M.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new pn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=_l(e,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function jo(i,t){i.asyncQueue.verifyOperationInProgress(),B("FirestoreClient","Initializing OfflineComponentProvider");const e=i.configuration;await t.initialize(e);let n=e.initialUser;i.setCredentialChangeListener(async r=>{n.isEqual(r)||(await lf(t.localStore,r),n=r)}),t.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=t}async function Vc(i,t){i.asyncQueue.verifyOperationInProgress();const e=await zy(i);B("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(e,i.configuration),i.setCredentialChangeListener(n=>bc(t.remoteStore,n)),i.setAppCheckTokenChangeListener((n,r)=>bc(t.remoteStore,r)),i._onlineComponents=t}function jy(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}async function zy(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){B("FirestoreClient","Using user provided OfflineComponentProvider");try{await jo(i,i._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!jy(e))throw e;xr("Error using user provided cache. Falling back to memory cache: "+e),await jo(i,new Dc)}}else B("FirestoreClient","Using default OfflineComponentProvider"),await jo(i,new Dc);return i._offlineComponents}async function Rf(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(B("FirestoreClient","Using user provided OnlineComponentProvider"),await Vc(i,i._uninitializedComponentsProvider._online)):(B("FirestoreClient","Using default OnlineComponentProvider"),await Vc(i,new Uy))),i._onlineComponents}function qy(i){return Rf(i).then(t=>t.syncEngine)}async function qs(i){const t=await Rf(i),e=t.eventManager;return e.onListen=Py.bind(null,t.syncEngine),e.onUnlisten=Dy.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=Sy.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=Vy.bind(null,t.syncEngine),e}function Gy(i,t,e={}){const n=new pn;return i.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const f=new Tl({next:p=>{o.enqueueAndForget(()=>ml(s,_));const y=p.docs.has(l);!y&&p.fromCache?c.reject(new j(M.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&p.fromCache&&u&&u.source==="server"?c.reject(new j(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),_=new yl(no(l.path),f,{includeMetadataChanges:!0,ra:!0});return pl(s,_)}(await qs(i),i.asyncQueue,t,e,n)),n.promise}function Ky(i,t,e={}){const n=new pn;return i.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const f=new Tl({next:p=>{o.enqueueAndForget(()=>ml(s,_)),p.fromCache&&u.source==="server"?c.reject(new j(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),_=new yl(l,f,{includeMetadataChanges:!0,ra:!0});return pl(s,_)}(await qs(i),i.asyncQueue,t,e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(i){const t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(i,t,e){if(!e)throw new j(M.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function Hy(i,t,e,n){if(t===!0&&n===!0)throw new j(M.INVALID_ARGUMENT,`${i} and ${e} cannot be used together.`)}function xc(i){if(!K.isDocumentKey(i))throw new j(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Nc(i){if(K.isDocumentKey(i))throw new j(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function El(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":W()}function ke(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new j(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=El(i);throw new j(M.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(t){var e,n;if(t.host===void 0){if(t.ssl!==void 0)throw new j(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new j(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Hy("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Pf((n=t.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new j(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new j(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new j(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,r){return n.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ho{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Oc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new j(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new j(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Oc(t),t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new cm;switch(n.type){case"firstParty":return new _m(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new j(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=kc.get(e);n&&(B("ComponentProvider","Removing Datastore"),kc.delete(e),n.terminate())}(this),Promise.resolve()}}function Wy(i,t,e,n={}){var r;const s=(i=ke(i,ho))._getSettings(),o=`${t}:${e}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&xr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),n.mockUserToken){let l,u;if(typeof n.mockUserToken=="string")l=n.mockUserToken,u=oe.MOCK_USER;else{l=K_(n.mockUserToken,(r=i._app)===null||r===void 0?void 0:r.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new j(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new oe(c)}i._authCredentials=new hm(new Ph(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Zi(this.firestore,t,this._query)}}class _e{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Dn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new _e(this.firestore,t,this._key)}}class Dn extends Zi{constructor(t,e,n){super(t,e,no(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new _e(this.firestore,null,new K(t))}withConverter(t){return new Dn(this.firestore,t,this._path)}}function $r(i,t,...e){if(i=qe(i),Sf("collection","path",t),i instanceof ho){const n=Pt.fromString(t,...e);return Nc(n),new Dn(i,null,n)}{if(!(i instanceof _e||i instanceof Dn))throw new j(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Pt.fromString(t,...e));return Nc(n),new Dn(i.firestore,null,n)}}function Ta(i,t,...e){if(i=qe(i),arguments.length===1&&(t=Sh.newId()),Sf("doc","path",t),i instanceof ho){const n=Pt.fromString(t,...e);return xc(n),new _e(i,null,new K(n))}{if(!(i instanceof _e||i instanceof Dn))throw new j(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Pt.fromString(t,...e));return xc(n),new _e(i.firestore,i instanceof Dn?i.converter:null,new K(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new cf(this,"async_queue_retry"),this.hu=()=>{const e=Bo();e&&B("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};const t=Bo();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const e=Bo();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const e=new pn;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!Wi(t))throw t;B("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const e=this.iu.then(()=>(this.uu=!0,t().catch(n=>{this.au=n,this.uu=!1;const r=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(n);throw mn("INTERNAL UNHANDLED ERROR: ",r),n}).then(n=>(this.uu=!1,n))));return this.iu=e,e}enqueueAfterDelay(t,e,n){this.Pu(),this.lu.indexOf(t)>-1&&(e=0);const r=dl.createAndSchedule(this,t,e,n,s=>this.Eu(s));return this._u.push(r),r}Pu(){this.au&&W()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const e of this._u)if(e.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((e,n)=>e.targetTimeMs-n.targetTimeMs);for(const e of this._u)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const e=this._u.indexOf(t);this._u.splice(e,1)}}function Mc(i){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const s of n)if(s in r&&typeof r[s]=="function")return!0;return!1}(i,["next","error","complete"])}class Ln extends ho{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=function(){return new Qy}(),this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Cf(this),this._firestoreClient.terminate()}}function Xy(i,t){const e=typeof i=="object"?i:tm(),n=typeof i=="string"?i:"(default)",r=Xp(e,"firestore").getImmediate({identifier:n});if(!r._initialized){const s=q_("firestore");s&&Wy(r,...s)}return r}function ts(i){return i._firestoreClient||Cf(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Cf(i){var t,e,n;const r=i._freezeSettings(),s=function(l,u,c,f){return new Pm(l,u,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Pf(f.experimentalLongPollingOptions),f.useFetchStreams)}(i._databaseId,((t=i._app)===null||t===void 0?void 0:t.options.appId)||"",i._persistenceKey,r);i._firestoreClient=new By(i._authCredentials,i._appCheckCredentials,i._queue,s),!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((n=r.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ur(he.fromBase64String(t))}catch(e){throw new j(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Ur(he.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new j(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new j(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new j(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ft(this._lat,t._lat)||ft(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy=/^__.*__$/;class Jy{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return this.fieldMask!==null?new Bn(t,this.data,this.fieldMask,e,this.fieldTransforms):new Qi(t,this.data,e,this.fieldTransforms)}}class Df{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new Bn(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Vf(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W()}}class Al{constructor(t,e,n,r,s,o){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=r,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new Al(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var e;const n=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.gu({path:n,yu:!1});return r.wu(t),r}Su(t){var e;const n=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return Gs(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(Vf(this.fu)&&Yy.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class Zy{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||lo(t)}Fu(t,e,n,r=!1){return new Al({fu:t,methodName:e,vu:n,path:Jt.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bl(i){const t=i._freezeSettings(),e=lo(i._databaseId);return new Zy(i._databaseId,!!t.ignoreUndefinedProperties,e)}function kf(i,t,e,n,r,s={}){const o=i.Fu(s.merge||s.mergeFields?2:0,t,e,r);Rl("Data must be an object, but it was:",o,n);const l=Of(n,o);let u,c;if(s.merge)u=new Ce(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const _ of s.mergeFields){const p=Ea(t,_,e);if(!o.contains(p))throw new j(M.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Ff(f,p)||f.push(p)}u=new Ce(f),c=o.fieldTransforms.filter(_=>u.covers(_.field))}else u=null,c=o.fieldTransforms;return new Jy(new me(l),u,c)}class fo extends wl{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof fo}}function xf(i,t,e,n){const r=i.Fu(1,t,e);Rl("Data must be an object, but it was:",r,n);const s=[],o=me.empty();cr(n,(u,c)=>{const f=Pl(t,u,e);c=qe(c);const _=r.Su(f);if(c instanceof fo)s.push(f);else{const p=_o(c,_);p!=null&&(s.push(f),o.set(f,p))}});const l=new Ce(s);return new Df(o,l,r.fieldTransforms)}function Nf(i,t,e,n,r,s){const o=i.Fu(1,t,e),l=[Ea(t,n,e)],u=[r];if(s.length%2!=0)throw new j(M.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)l.push(Ea(t,s[p])),u.push(s[p+1]);const c=[],f=me.empty();for(let p=l.length-1;p>=0;--p)if(!Ff(c,l[p])){const y=l[p];let E=u[p];E=qe(E);const m=o.Su(y);if(E instanceof fo)c.push(y);else{const I=_o(E,m);I!=null&&(c.push(y),f.set(y,I))}}const _=new Ce(c);return new Df(f,_,o.fieldTransforms)}function _o(i,t){if(Mf(i=qe(i)))return Rl("Unsupported field value:",t,i),Of(i,t);if(i instanceof wl)return function(n,r){if(!Vf(r.fu))throw r.Du(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(n,r){const s=[];let o=0;for(const l of n){let u=_o(l,r.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(i,t)}return function(n,r){if((n=qe(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Qm(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Gt.fromDate(n);return{timestampValue:js(r.serializer,s)}}if(n instanceof Gt){const s=new Gt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:js(r.serializer,s)}}if(n instanceof Il)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ur)return{bytesValue:tf(r.serializer,n._byteString)};if(n instanceof _e){const s=r.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw r.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:sl(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Du(`Unsupported field value: ${El(n)}`)}(i,t)}function Of(i,t){const e={};return Ch(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):cr(i,(n,r)=>{const s=_o(r,t.pu(n));s!=null&&(e[n]=s)}),{mapValue:{fields:e}}}function Mf(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Gt||i instanceof Il||i instanceof Ur||i instanceof _e||i instanceof wl)}function Rl(i,t,e){if(!Mf(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){const n=El(e);throw n==="an object"?t.Du(i+" a custom object"):t.Du(i+" "+n)}}function Ea(i,t,e){if((t=qe(t))instanceof es)return t._internalPath;if(typeof t=="string")return Pl(i,t);throw Gs("Field path arguments must be of type string or ",i,!1,void 0,e)}const t0=new RegExp("[~\\*/\\[\\]]");function Pl(i,t,e){if(t.search(t0)>=0)throw Gs(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,e);try{return new es(...t.split("."))._internalPath}catch{throw Gs(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,e)}}function Gs(i,t,e,n,r){const s=n&&!n.isEmpty(),o=r!==void 0;let l=`Function ${t}() called with invalid data`;e&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${n}`),o&&(u+=` in document ${r}`),u+=")"),new j(M.INVALID_ARGUMENT,l+i+u)}function Ff(i,t){return i.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(t,e,n,r,s){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new _e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new e0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field($f("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class e0 extends Lf{data(){return super.data()}}function $f(i,t){return typeof t=="string"?Pl(i,t):t instanceof es?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new j(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class n0{convertValue(t,e="none"){switch(ar(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ut(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(or(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw W()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return cr(t,(r,s)=>{n[r]=this.convertValue(s,e)}),n}convertGeoPoint(t){return new Il(Ut(t.latitude),Ut(t.longitude))}convertArray(t,e){return(t.values||[]).map(n=>this.convertValue(n,e))}convertServerTimestamp(t,e){switch(e){case"previous":const n=Ja(t);return n==null?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Ni(t));default:return null}}convertTimestamp(t){const e=Mn(t);return new Gt(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=Pt.fromString(t);It(af(n));const r=new Oi(n.get(1),n.get(3)),s=new K(n.popFirst(5));return r.isEqual(e)||mn(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bf(i,t,e){let n;return n=i?e&&(e.merge||e.mergeFields)?i.toFirestore(t,e):i.toFirestore(t):t,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class jf extends Lf{constructor(t,e,n,r,s,o){super(t,e,n,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Ss(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field($f("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class Ss extends jf{data(t={}){return super.data(t)}}class zf{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new yi(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(n=>{t.call(e,new Ss(this._firestore,this._userDataWriter,n.key,n,new yi(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new j(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>{const u=new Ss(r._firestore,r._userDataWriter,l.doc.key,l.doc,new yi(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Ss(r._firestore,r._userDataWriter,l.doc.key,l.doc,new yi(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,f=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:r0(l.type),doc:u,oldIndex:c,newIndex:f}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function r0(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(i){i=ke(i,_e);const t=ke(i.firestore,Ln);return Gy(ts(t),i._key).then(e=>Gf(t,i,e))}class Sl extends n0{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ur(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new _e(this.firestore,null,e)}}function Ks(i){i=ke(i,Zi);const t=ke(i.firestore,Ln),e=ts(t),n=new Sl(t);return Uf(i._query),Ky(e,i._query).then(r=>new zf(t,n,i,r))}function s0(i,t,e){i=ke(i,_e);const n=ke(i.firestore,Ln),r=Bf(i.converter,t,e);return Cl(n,[kf(bl(n),"setDoc",i._key,r,i.converter!==null,e).toMutation(i._key,Ve.none())])}function qf(i,t,e,...n){i=ke(i,_e);const r=ke(i.firestore,Ln),s=bl(r);let o;return o=typeof(t=qe(t))=="string"||t instanceof es?Nf(s,"updateDoc",i._key,t,e,n):xf(s,"updateDoc",i._key,t),Cl(r,[o.toMutation(i._key,Ve.exists(!0))])}function wa(i,...t){var e,n,r;i=qe(i);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||Mc(t[o])||(s=t[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Mc(t[o])){const _=t[o];t[o]=(e=_.next)===null||e===void 0?void 0:e.bind(_),t[o+1]=(n=_.error)===null||n===void 0?void 0:n.bind(_),t[o+2]=(r=_.complete)===null||r===void 0?void 0:r.bind(_)}let u,c,f;if(i instanceof _e)c=ke(i.firestore,Ln),f=no(i._key.path),u={next:_=>{t[o]&&t[o](Gf(c,i,_))},error:t[o+1],complete:t[o+2]};else{const _=ke(i,Zi);c=ke(_.firestore,Ln),f=_._query;const p=new Sl(c);u={next:y=>{t[o]&&t[o](new zf(c,p,_,y))},error:t[o+1],complete:t[o+2]},Uf(i._query)}return function(p,y,E,m){const I=new Tl(m),C=new yl(y,I,E);return p.asyncQueue.enqueueAndForget(async()=>pl(await qs(p),C)),()=>{I.$a(),p.asyncQueue.enqueueAndForget(async()=>ml(await qs(p),C))}}(ts(c),f,l,u)}function Cl(i,t){return function(n,r){const s=new pn;return n.asyncQueue.enqueueAndForget(async()=>ky(await qy(n),r,s)),s.promise}(ts(i),t)}function Gf(i,t,e){const n=e.docs.get(t._key),r=new Sl(i);return new jf(i,r,t._key,n,new yi(e.hasPendingWrites,e.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=bl(t)}set(t,e,n){this._verifyNotCommitted();const r=zo(t,this._firestore),s=Bf(r.converter,e,n),o=kf(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,n);return this._mutations.push(o.toMutation(r._key,Ve.none())),this}update(t,e,n,...r){this._verifyNotCommitted();const s=zo(t,this._firestore);let o;return o=typeof(e=qe(e))=="string"||e instanceof es?Nf(this._dataReader,"WriteBatch.update",s._key,e,n,r):xf(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Ve.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=zo(t,this._firestore);return this._mutations=this._mutations.concat(new nl(e._key,Ve.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new j(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zo(i,t){if((i=qe(i)).firestore!==t)throw new j(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(i){return ts(i=ke(i,Ln)),new o0(i,t=>Cl(i,t))}(function(t,e=!0){(function(r){Wr=r})(Zp),Ms(new Vi("firestore",(n,{instanceIdentifier:r,options:s})=>{const o=n.getProvider("app").getImmediate(),l=new Ln(new fm(n.getProvider("auth-internal")),new mm(n.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new j(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oi(c.options.projectId,f)}(o,r),o);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Rr(nc,"4.6.3",t),Rr(nc,"4.6.3","esm2017")})();var l0="firebase",u0="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rr(l0,u0,"app");const c0={apiKey:"AIzaSyDrTR0lVaKeBrqIlhJiwst2-KsEwBtE538",authDomain:"bob-game-90e47.firebaseapp.com",projectId:"bob-game-90e47",storageBucket:"bob-game-90e47.appspot.com",messagingSenderId:"880391810715",appId:"1:880391810715:web:f537e6f4c16b7412e7a03e",measurementId:"G-FL5LYSNQ76"},h0=gh(c0),Ye=Xy(h0);function Fc(i){let t,e,n,r,s;return e=new ge({props:{$$slots:{default:[f0]},$$scope:{ctx:i}}}),e.$on("click",i[2]),r=new ge({props:{$$slots:{default:[d0]},$$scope:{ctx:i}}}),r.$on("click",i[3]),{c(){t=z("div"),vt(e.$$.fragment),n=J(),vt(r.$$.fragment)},l(o){t=q(o,"DIV",{});var l=Q(t);Tt(e.$$.fragment,l),n=Z(l),Tt(r.$$.fragment,l),l.forEach(F)},m(o,l){G(o,t,l),Et(e,t,null),$(t,n),Et(r,t,null),s=!0},p(o,l){const u={};l&64&&(u.$$scope={dirty:l,ctx:o}),e.$set(u);const c={};l&64&&(c.$$scope={dirty:l,ctx:o}),r.$set(c)},i(o){s||(X(e.$$.fragment,o),X(r.$$.fragment,o),s=!0)},o(o){et(e.$$.fragment,o),et(r.$$.fragment,o),s=!1},d(o){o&&F(t),wt(e),wt(r)}}}function f0(i){let t;return{c(){t=rt("Start")},l(e){t=it(e,"Start")},m(e,n){G(e,t,n)},d(e){e&&F(t)}}}function d0(i){let t;return{c(){t=rt("Instellingen")},l(e){t=it(e,"Instellingen")},m(e,n){G(e,t,n)},d(e){e&&F(t)}}}function Lc(i){let t,e,n,r,s,o,l;return e=new ge({props:{$$slots:{default:[_0]},$$scope:{ctx:i}}}),e.$on("click",i[1]),r=new ge({props:{$$slots:{default:[p0]},$$scope:{ctx:i}}}),r.$on("click",i[4]),o=new ge({props:{theme:"red",$$slots:{default:[m0]},$$scope:{ctx:i}}}),o.$on("click",i[5]),{c(){t=z("div"),vt(e.$$.fragment),n=J(),vt(r.$$.fragment),s=J(),vt(o.$$.fragment)},l(u){t=q(u,"DIV",{});var c=Q(t);Tt(e.$$.fragment,c),n=Z(c),Tt(r.$$.fragment,c),s=Z(c),Tt(o.$$.fragment,c),c.forEach(F)},m(u,c){G(u,t,c),Et(e,t,null),$(t,n),Et(r,t,null),$(t,s),Et(o,t,null),l=!0},p(u,c){const f={};c&64&&(f.$$scope={dirty:c,ctx:u}),e.$set(f);const _={};c&64&&(_.$$scope={dirty:c,ctx:u}),r.$set(_);const p={};c&64&&(p.$$scope={dirty:c,ctx:u}),o.$set(p)},i(u){l||(X(e.$$.fragment,u),X(r.$$.fragment,u),X(o.$$.fragment,u),l=!0)},o(u){et(e.$$.fragment,u),et(r.$$.fragment,u),et(o.$$.fragment,u),l=!1},d(u){u&&F(t),wt(e),wt(r),wt(o)}}}function _0(i){let t;return{c(){t=rt("Reset Schalen")},l(e){t=it(e,"Reset Schalen")},m(e,n){G(e,t,n)},d(e){e&&F(t)}}}function p0(i){let t;return{c(){t=rt("Upload CSV")},l(e){t=it(e,"Upload CSV")},m(e,n){G(e,t,n)},d(e){e&&F(t)}}}function m0(i){let t;return{c(){t=rt("Terug")},l(e){t=it(e,"Terug")},m(e,n){G(e,t,n)},d(e){e&&F(t)}}}function g0(i){let t,e,n,r=!i[0]&&Fc(i),s=i[0]&&Lc(i);return{c(){r&&r.c(),t=J(),s&&s.c(),e=xn()},l(o){r&&r.l(o),t=Z(o),s&&s.l(o),e=xn()},m(o,l){r&&r.m(o,l),G(o,t,l),s&&s.m(o,l),G(o,e,l),n=!0},p(o,l){o[0]?r&&(Si(),et(r,1,1,()=>{r=null}),Ci()):r?(r.p(o,l),l&1&&X(r,1)):(r=Fc(o),r.c(),X(r,1),r.m(t.parentNode,t)),o[0]?s?(s.p(o,l),l&1&&X(s,1)):(s=Lc(o),s.c(),X(s,1),s.m(e.parentNode,e)):s&&(Si(),et(s,1,1,()=>{s=null}),Ci())},i(o){n||(X(r),X(s),n=!0)},o(o){et(r),et(s),n=!1},d(o){o&&(F(t),F(e)),r&&r.d(o),s&&s.d(o)}}}function y0(i){let t,e;return t=new Ki({props:{$$slots:{default:[g0]},$$scope:{ctx:i}}}),{c(){vt(t.$$.fragment)},l(n){Tt(t.$$.fragment,n)},m(n,r){Et(t,n,r),e=!0},p(n,[r]){const s={};r&65&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(X(t.$$.fragment,n),e=!0)},o(n){et(t.$$.fragment,n),e=!1},d(n){wt(t,n)}}}function v0(i,t,e){let n=!1;return[n,async()=>{const c=$r(Ye,"stakeholders"),f=await Ks(c);let _=[];const p=f.docs[0].data().values.length;for(let y=0;y<p;y++)_.push(0);console.log();for(const y of f.docs)await qf(y.ref,{values:_});alert("Alle schalen staan weer op 0!")},()=>ze.set(1),()=>e(0,n=!n),()=>ze.set(5),()=>e(0,n=!n)]}class T0 extends ln{constructor(t){super(),un(this,t,v0,y0,Ge,{})}}const $c=Kr([]);function Uc(i,t,e){const n=i.slice();return n[15]=t[e],n[17]=e,n}function Bc(i){let t,e,n=i[2].id+"",r,s,o,l,u='<tr><th class="px-2">Naam</th> <th class="px-2">Schaal</th> <th class="px-2">Geholpen mensen</th> <th class="px-2">Kosten</th> <th class="px-2">Vrijwilligers</th></tr>',c,f,_,p,y,E="Totaal",m,I,C,S,k,D,x,O=i[0].toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"",w,g,v,b,R,P,A,nt,dt,mt,lt,Ct=i[5].toFixed(0)+"",Ie,Oe,Be,gt,At=i[4].toFixed(0)+"",te,Qt,Yr,Ke,Jr,He,pe,Tn,Ae,ee,We=Vr(i[3]),Mt=[];for(let st=0;st<We.length;st+=1)Mt[st]=jc(Uc(i,We,st));return pe=new ge({props:{theme:"red",$$slots:{default:[E0]},$$scope:{ctx:i}}}),pe.$on("click",i[12]),Ae=new ge({props:{$$slots:{default:[w0]},$$scope:{ctx:i}}}),Ae.$on("click",i[13]),{c(){t=z("div"),e=z("div"),r=rt(n),s=J(),o=z("table"),l=z("thead"),l.innerHTML=u,c=J(),f=z("tbody");for(let st=0;st<Mt.length;st+=1)Mt[st].c();_=J(),p=z("tr"),y=z("td"),y.textContent=E,m=J(),I=z("td"),C=J(),S=z("td"),k=rt(i[1]),D=J(),x=z("td"),w=rt(O),g=J(),v=z("td"),b=rt(i[6]),R=J(),P=z("tr"),A=z("td"),nt=J(),dt=z("td"),mt=J(),lt=z("td"),Ie=rt(Ct),Oe=rt("% van het doel"),Be=J(),gt=z("td"),te=rt(At),Qt=rt("% van het budget"),Yr=J(),Ke=z("td"),Jr=J(),He=z("div"),vt(pe.$$.fragment),Tn=J(),vt(Ae.$$.fragment),this.h()},l(st){t=q(st,"DIV",{class:!0});var bt=Q(t);e=q(bt,"DIV",{class:!0});var Me=Q(e);r=it(Me,n),Me.forEach(F),s=Z(bt),o=q(bt,"TABLE",{class:!0});var Qe=Q(o);l=q(Qe,"THEAD",{"data-svelte-h":!0}),Nn(l)!=="svelte-1wftw8g"&&(l.innerHTML=u),c=Z(Qe),f=q(Qe,"TBODY",{});var Dt=Q(f);for(let pr=0;pr<Mt.length;pr+=1)Mt[pr].l(Dt);_=Z(Dt),p=q(Dt,"TR",{class:!0});var ne=Q(p);y=q(ne,"TD",{class:!0,"data-svelte-h":!0}),Nn(y)!=="svelte-iomj7a"&&(y.textContent=E),m=Z(ne),I=q(ne,"TD",{class:!0}),Q(I).forEach(F),C=Z(ne),S=q(ne,"TD",{class:!0});var rs=Q(S);k=it(rs,i[1]),rs.forEach(F),D=Z(ne),x=q(ne,"TD",{class:!0});var dr=Q(x);w=it(dr,O),dr.forEach(F),g=Z(ne),v=q(ne,"TD",{class:!0});var _r=Q(v);b=it(_r,i[6]),_r.forEach(F),ne.forEach(F),R=Z(Dt),P=q(Dt,"TR",{});var be=Q(P);A=q(be,"TD",{class:!0}),Q(A).forEach(F),nt=Z(be),dt=q(be,"TD",{class:!0}),Q(dt).forEach(F),mt=Z(be),lt=q(be,"TD",{class:!0});var Lt=Q(lt);Ie=it(Lt,Ct),Oe=it(Lt,"% van het doel"),Lt.forEach(F),Be=Z(be),gt=q(be,"TD",{class:!0});var jt=Q(gt);te=it(jt,At),Qt=it(jt,"% van het budget"),jt.forEach(F),Yr=Z(be),Ke=q(be,"TD",{class:!0}),Q(Ke).forEach(F),be.forEach(F),Dt.forEach(F),Qe.forEach(F),Jr=Z(bt),He=q(bt,"DIV",{class:!0});var cn=Q(He);Tt(pe.$$.fragment,cn),Tn=Z(cn),Tt(Ae.$$.fragment,cn),cn.forEach(F),bt.forEach(F),this.h()},h(){H(e,"class","font-bold text-2xl mb-4"),H(y,"class","px-2 py-1"),H(I,"class","px-2 py-1"),H(S,"class","px-2 py-1"),H(x,"class","px-2 py-1"),H(v,"class","px-2 py-1"),H(p,"class","font-bold border-t-2 border-black"),H(A,"class","px-2 py-1"),H(dt,"class","px-2 py-1"),H(lt,"class","px-2 py-1"),ys(lt,"bg-green-300",i[5]>=100),H(gt,"class","px-2 py-1"),ys(gt,"bg-red-300",i[4]>100),H(Ke,"class","px-2 py-1"),H(o,"class","text-left"),H(He,"class","flex gap-x-2"),H(t,"class","p-10 bg-yellow-100 shadow-lg flex flex-col")},m(st,bt){G(st,t,bt),$(t,e),$(e,r),$(t,s),$(t,o),$(o,l),$(o,c),$(o,f);for(let Me=0;Me<Mt.length;Me+=1)Mt[Me]&&Mt[Me].m(f,null);$(f,_),$(f,p),$(p,y),$(p,m),$(p,I),$(p,C),$(p,S),$(S,k),$(p,D),$(p,x),$(x,w),$(p,g),$(p,v),$(v,b),$(f,R),$(f,P),$(P,A),$(P,nt),$(P,dt),$(P,mt),$(P,lt),$(lt,Ie),$(lt,Oe),$(P,Be),$(P,gt),$(gt,te),$(gt,Qt),$(P,Yr),$(P,Ke),$(t,Jr),$(t,He),Et(pe,He,null),$(He,Tn),Et(Ae,He,null),ee=!0},p(st,bt){if((!ee||bt&4)&&n!==(n=st[2].id+"")&&zt(r,n),bt&140){We=Vr(st[3]);let Dt;for(Dt=0;Dt<We.length;Dt+=1){const ne=Uc(st,We,Dt);Mt[Dt]?Mt[Dt].p(ne,bt):(Mt[Dt]=jc(ne),Mt[Dt].c(),Mt[Dt].m(f,_))}for(;Dt<Mt.length;Dt+=1)Mt[Dt].d(1);Mt.length=We.length}(!ee||bt&2)&&zt(k,st[1]),(!ee||bt&1)&&O!==(O=st[0].toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"")&&zt(w,O),(!ee||bt&64)&&zt(b,st[6]),(!ee||bt&32)&&Ct!==(Ct=st[5].toFixed(0)+"")&&zt(Ie,Ct),(!ee||bt&32)&&ys(lt,"bg-green-300",st[5]>=100),(!ee||bt&16)&&At!==(At=st[4].toFixed(0)+"")&&zt(te,At),(!ee||bt&16)&&ys(gt,"bg-red-300",st[4]>100);const Me={};bt&262144&&(Me.$$scope={dirty:bt,ctx:st}),pe.$set(Me);const Qe={};bt&262144&&(Qe.$$scope={dirty:bt,ctx:st}),Ae.$set(Qe)},i(st){ee||(X(pe.$$.fragment,st),X(Ae.$$.fragment,st),ee=!0)},o(st){et(pe.$$.fragment,st),et(Ae.$$.fragment,st),ee=!1},d(st){st&&F(t),Ga(Mt,st),wt(pe),wt(Ae)}}}function jc(i){let t,e,n=i[15].naam.charAt(0).toUpperCase()+i[15].naam.slice(1)+"",r,s,o,l,u,c,f,_=Di(i[2].values[i[17]],i[15])+"",p,y,E,m=ks(i[2].values[i[17]],i[15]).toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"",I,C,S,k=xs(i[2].values[i[17]],i[15])+"",D,x,O;function w(...g){return i[11](i[17],...g)}return{c(){t=z("tr"),e=z("td"),r=rt(n),s=J(),o=z("td"),l=z("input"),c=J(),f=z("td"),p=rt(_),y=J(),E=z("td"),I=rt(m),C=J(),S=z("td"),D=rt(k),this.h()},l(g){t=q(g,"TR",{});var v=Q(t);e=q(v,"TD",{class:!0});var b=Q(e);r=it(b,n),b.forEach(F),s=Z(v),o=q(v,"TD",{class:!0});var R=Q(o);l=q(R,"INPUT",{type:!0,min:!0,max:!0,class:!0}),R.forEach(F),c=Z(v),f=q(v,"TD",{class:!0});var P=Q(f);p=it(P,_),P.forEach(F),y=Z(v),E=q(v,"TD",{class:!0});var A=Q(E);I=it(A,m),A.forEach(F),C=Z(v),S=q(v,"TD",{class:!0});var nt=Q(S);D=it(nt,k),nt.forEach(F),v.forEach(F),this.h()},h(){H(e,"class","px-2"),H(l,"type","range"),l.value=u=i[2].values[i[17]],H(l,"min","0"),H(l,"max","10"),H(l,"class","slider accent-blue-500 align-middle appearance-none w-full cursor-pointer h-1 bg-red-500"),H(o,"class","px-2"),H(f,"class","px-2"),H(E,"class","px-2"),H(S,"class","px-2")},m(g,v){G(g,t,v),$(t,e),$(e,r),$(t,s),$(t,o),$(o,l),$(t,c),$(t,f),$(f,p),$(t,y),$(t,E),$(E,I),$(t,C),$(t,S),$(S,D),x||(O=qa(l,"input",w),x=!0)},p(g,v){i=g,v&8&&n!==(n=i[15].naam.charAt(0).toUpperCase()+i[15].naam.slice(1)+"")&&zt(r,n),v&4&&u!==(u=i[2].values[i[17]])&&(l.value=u),v&12&&_!==(_=Di(i[2].values[i[17]],i[15])+"")&&zt(p,_),v&12&&m!==(m=ks(i[2].values[i[17]],i[15]).toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"")&&zt(I,m),v&12&&k!==(k=xs(i[2].values[i[17]],i[15])+"")&&zt(D,k)},d(g){g&&F(t),x=!1,O()}}}function E0(i){let t;return{c(){t=rt("Terug")},l(e){t=it(e,"Terug")},m(e,n){G(e,t,n)},d(e){e&&F(t)}}}function w0(i){let t;return{c(){t=rt("Klaar")},l(e){t=it(e,"Klaar")},m(e,n){G(e,t,n)},d(e){e&&F(t)}}}function I0(i){let t,e,n=i[2]&&Bc(i);return{c(){n&&n.c(),t=xn()},l(r){n&&n.l(r),t=xn()},m(r,s){n&&n.m(r,s),G(r,t,s),e=!0},p(r,[s]){r[2]?n?(n.p(r,s),s&4&&X(n,1)):(n=Bc(r),n.c(),X(n,1),n.m(t.parentNode,t)):n&&(Si(),et(n,1,1,()=>{n=null}),Ci())},i(r){e||(X(n),e=!0)},o(r){et(n),e=!1},d(r){r&&F(t),n&&n.d(r)}}}function A0(i,t,e){let n,r,s,o,l,u,c,f,_,p;Ze(i,$c,S=>e(8,c=S)),Ze(i,ta,S=>e(3,f=S)),Ze(i,Ka,S=>e(9,_=S)),Ze(i,kr,S=>e(10,p=S)),za(()=>{const S=$r(Ye,"maatregelen"),k=$r(Ye,"doelen");wa(S,D=>{ta.set(D.docs.map(x=>({id:x.id,...x.data()})))}),wa(k,D=>{$c.set(D.docs.map(x=>({doel:Number(x.data().doel),budget:Number(x.data().budget),...x.data()})))})});const y=(S,k)=>{const D=S.target;e(2,n.values[k]=D.valueAsNumber,n),E()},E=async()=>{try{const S=n.id,k=Ta(Ye,"stakeholders",S);(await i0(k)).exists()?await qf(k,{values:n.values}):await s0(k,{values:n.values}),console.log("Document successfully updated!")}catch(S){console.error("Error updating document: ",S)}},m=(S,k)=>y(k,S),I=()=>{ze.set(2)},C=()=>{ze.set(4)};return i.$$.update=()=>{var S,k;i.$$.dirty&1536&&e(2,n=p.find(D=>D.id===(_==null?void 0:_.id))),i.$$.dirty&12&&e(1,r=f.reduce((D,x,O)=>{var w;return D+Di(((w=n==null?void 0:n.values)==null?void 0:w[O])??0,x)},0)),i.$$.dirty&12&&e(0,s=f.reduce((D,x,O)=>{var w;return D+ks(((w=n==null?void 0:n.values)==null?void 0:w[O])??0,x)},0)),i.$$.dirty&12&&e(6,o=f.reduce((D,x,O)=>{var w;return D+xs(((w=n==null?void 0:n.values)==null?void 0:w[O])??0,x)},0)),i.$$.dirty&258&&e(5,l=r/((S=c[0])==null?void 0:S.doel)*100),i.$$.dirty&257&&e(4,u=s/((k=c[0])==null?void 0:k.budget)*100)},[s,r,n,f,u,l,o,y,c,_,p,m,I,C]}class b0 extends ln{constructor(t){super(),un(this,t,A0,I0,Ge,{})}}function zc(i){let t,e;return t=new Ki({props:{$$slots:{default:[S0]},$$scope:{ctx:i}}}),{c(){vt(t.$$.fragment)},l(n){Tt(t.$$.fragment,n)},m(n,r){Et(t,n,r),e=!0},p(n,r){const s={};r&9&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(X(t.$$.fragment,n),e=!0)},o(n){et(t.$$.fragment,n),e=!1},d(n){wt(t,n)}}}function R0(i){let t;return{c(){t=rt("Terug")},l(e){t=it(e,"Terug")},m(e,n){G(e,t,n)},d(e){e&&F(t)}}}function P0(i){let t;return{c(){t=rt("Klaar")},l(e){t=it(e,"Klaar")},m(e,n){G(e,t,n)},d(e){e&&F(t)}}}function S0(i){let t,e=i[0].id+"",n,r,s,o=i[0].description+"",l,u,c,f,_,p,y;return f=new ge({props:{theme:"red",$$slots:{default:[R0]},$$scope:{ctx:i}}}),f.$on("click",i[1]),p=new ge({props:{$$slots:{default:[P0]},$$scope:{ctx:i}}}),p.$on("click",i[2]),{c(){t=z("h2"),n=rt(e),r=J(),s=z("p"),l=rt(o),u=J(),c=z("div"),vt(f.$$.fragment),_=J(),vt(p.$$.fragment),this.h()},l(E){t=q(E,"H2",{class:!0});var m=Q(t);n=it(m,e),m.forEach(F),r=Z(E),s=q(E,"P",{class:!0});var I=Q(s);l=it(I,o),I.forEach(F),u=Z(E),c=q(E,"DIV",{class:!0});var C=Q(c);Tt(f.$$.fragment,C),_=Z(C),Tt(p.$$.fragment,C),C.forEach(F),this.h()},h(){H(t,"class","font-bold text-2xl"),H(s,"class","lg:max-w-[400px]"),H(c,"class","flex gap-x-2")},m(E,m){G(E,t,m),$(t,n),G(E,r,m),G(E,s,m),$(s,l),G(E,u,m),G(E,c,m),Et(f,c,null),$(c,_),Et(p,c,null),y=!0},p(E,m){(!y||m&1)&&e!==(e=E[0].id+"")&&zt(n,e),(!y||m&1)&&o!==(o=E[0].description+"")&&zt(l,o);const I={};m&8&&(I.$$scope={dirty:m,ctx:E}),f.$set(I);const C={};m&8&&(C.$$scope={dirty:m,ctx:E}),p.$set(C)},i(E){y||(X(f.$$.fragment,E),X(p.$$.fragment,E),y=!0)},o(E){et(f.$$.fragment,E),et(p.$$.fragment,E),y=!1},d(E){E&&(F(t),F(r),F(s),F(u),F(c)),wt(f),wt(p)}}}function C0(i){let t,e,n=i[0]&&zc(i);return{c(){n&&n.c(),t=xn()},l(r){n&&n.l(r),t=xn()},m(r,s){n&&n.m(r,s),G(r,t,s),e=!0},p(r,[s]){r[0]?n?(n.p(r,s),s&1&&X(n,1)):(n=zc(r),n.c(),X(n,1),n.m(t.parentNode,t)):n&&(Si(),et(n,1,1,()=>{n=null}),Ci())},i(r){e||(X(n),e=!0)},o(r){et(n),e=!1},d(r){r&&F(t),n&&n.d(r)}}}function D0(i,t,e){let n;return Ze(i,Ka,o=>e(0,n=o)),[n,()=>{ze.set(1)},()=>{ze.set(3)}]}class V0 extends ln{constructor(t){super(),un(this,t,D0,C0,Ge,{})}}function qc(i,t,e){const n=i.slice();return n[5]=t[e],n}function k0(i){let t,e='<svg aria-hidden="true" class="w-8 h-8 text-blue-500 animate-spin fill-white" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z" fill="currentColor"></path><path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z" fill="currentFill"></path></svg> <span class="sr-only">Loading...</span>';return{c(){t=z("div"),t.innerHTML=e,this.h()},l(n){t=q(n,"DIV",{role:!0,"data-svelte-h":!0}),Nn(t)!=="svelte-1enh005"&&(t.innerHTML=e),this.h()},h(){H(t,"role","status")},m(n,r){G(n,t,r)},d(n){n&&F(t)}}}function x0(i){let t,e='Er is iets misgegaan bij het ophalen van de data. <a class="text-blue-500 underline" href="/upload">upload een excel bestand</a> en probeer het opnieuw.';return{c(){t=z("div"),t.innerHTML=e,this.h()},l(n){t=q(n,"DIV",{class:!0,"data-svelte-h":!0}),Nn(t)!=="svelte-1s9ns9h"&&(t.innerHTML=e),this.h()},h(){H(t,"class","text-red-500")},m(n,r){G(n,t,r)},d(n){n&&F(t)}}}function N0(i){let t=i[5].id+"",e;return{c(){e=rt(t)},l(n){e=it(n,t)},m(n,r){G(n,e,r)},p(n,r){r&2&&t!==(t=n[5].id+"")&&zt(e,t)},d(n){n&&F(e)}}}function Gc(i){let t,e;function n(){return i[3](i[5])}return t=new ge({props:{$$slots:{default:[N0]},$$scope:{ctx:i}}}),t.$on("click",n),{c(){vt(t.$$.fragment)},l(r){Tt(t.$$.fragment,r)},m(r,s){Et(t,r,s),e=!0},p(r,s){i=r;const o={};s&258&&(o.$$scope={dirty:s,ctx:i}),t.$set(o)},i(r){e||(X(t.$$.fragment,r),e=!0)},o(r){et(t.$$.fragment,r),e=!1},d(r){wt(t,r)}}}function O0(i){let t;return{c(){t=rt("Terug")},l(e){t=it(e,"Terug")},m(e,n){G(e,t,n)},d(e){e&&F(t)}}}function M0(i){let t,e="Kies je stakeholder",n,r,s,o,l,u;function c(m,I){if(m[0])return x0;if(m[1].length===0)return k0}let f=c(i),_=f&&f(i),p=Vr(i[1]),y=[];for(let m=0;m<p.length;m+=1)y[m]=Gc(qc(i,p,m));const E=m=>et(y[m],1,1,()=>{y[m]=null});return l=new ge({props:{theme:"red",$$slots:{default:[O0]},$$scope:{ctx:i}}}),l.$on("click",i[4]),{c(){t=z("div"),t.textContent=e,n=J(),r=z("div"),_&&_.c(),s=J();for(let m=0;m<y.length;m+=1)y[m].c();o=J(),vt(l.$$.fragment),this.h()},l(m){t=q(m,"DIV",{class:!0,"data-svelte-h":!0}),Nn(t)!=="svelte-1uqwzll"&&(t.textContent=e),n=Z(m),r=q(m,"DIV",{class:!0});var I=Q(r);_&&_.l(I),s=Z(I);for(let C=0;C<y.length;C+=1)y[C].l(I);o=Z(I),Tt(l.$$.fragment,I),I.forEach(F),this.h()},h(){H(t,"class","font-bold text-2xl mb-4"),H(r,"class","flex gap-x-2")},m(m,I){G(m,t,I),G(m,n,I),G(m,r,I),_&&_.m(r,null),$(r,s);for(let C=0;C<y.length;C+=1)y[C]&&y[C].m(r,null);$(r,o),Et(l,r,null),u=!0},p(m,I){if(f!==(f=c(m))&&(_&&_.d(1),_=f&&f(m),_&&(_.c(),_.m(r,s))),I&2){p=Vr(m[1]);let S;for(S=0;S<p.length;S+=1){const k=qc(m,p,S);y[S]?(y[S].p(k,I),X(y[S],1)):(y[S]=Gc(k),y[S].c(),X(y[S],1),y[S].m(r,o))}for(Si(),S=p.length;S<y.length;S+=1)E(S);Ci()}const C={};I&256&&(C.$$scope={dirty:I,ctx:m}),l.$set(C)},i(m){if(!u){for(let I=0;I<p.length;I+=1)X(y[I]);X(l.$$.fragment,m),u=!0}},o(m){y=y.filter(Boolean);for(let I=0;I<y.length;I+=1)et(y[I]);et(l.$$.fragment,m),u=!1},d(m){m&&(F(t),F(n),F(r)),_&&_.d(),Ga(y,m),wt(l)}}}function F0(i){let t,e;return t=new Ki({props:{$$slots:{default:[M0]},$$scope:{ctx:i}}}),{c(){vt(t.$$.fragment)},l(n){Tt(t.$$.fragment,n)},m(n,r){Et(t,n,r),e=!0},p(n,[r]){const s={};r&259&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(X(t.$$.fragment,n),e=!0)},o(n){et(t.$$.fragment,n),e=!1},d(n){wt(t,n)}}}const L0=5e3;function $0(i,t,e){let n,r;Ze(i,kr,u=>e(1,r=u));const s=Kr(!1);return Ze(i,s,u=>e(0,n=u)),za(()=>{const u=setTimeout(()=>{s.set(!0)},L0),c=kr.subscribe(f=>{f.length>0&&clearTimeout(u)});return()=>{clearTimeout(u),c()}}),[n,r,s,u=>{Ka.set(u),ze.set(2)},()=>{ze.set(0)}]}class U0 extends ln{constructor(t){super(),un(this,t,$0,F0,Ge,{})}}function dn(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Kf(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.__proto__=t}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var xe={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Br={duration:.5,overwrite:!1,delay:0},Dl,ue,St,Le=1e8,yt=1/Le,Ia=Math.PI*2,B0=Ia/4,j0=0,Hf=Math.sqrt,z0=Math.cos,q0=Math.sin,Wt=function(t){return typeof t=="string"},Ot=function(t){return typeof t=="function"},yn=function(t){return typeof t=="number"},Vl=function(t){return typeof t>"u"},an=function(t){return typeof t=="object"},ye=function(t){return t!==!1},kl=function(){return typeof window<"u"},Is=function(t){return Ot(t)||Wt(t)},Wf=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},ce=Array.isArray,Aa=/(?:-?\.?\d|\.)+/gi,Qf=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Ar=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,qo=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Xf=/[+-]=-?[.\d]+/,Yf=/[^,'"\[\]\s]+/gi,G0=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Vt,Xe,ba,xl,Ne={},Hs={},Jf,Zf=function(t){return(Hs=lr(t,Ne))&&we},Nl=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},$i=function(t,e){return!e&&console.warn(t)},td=function(t,e){return t&&(Ne[t]=e)&&Hs&&(Hs[t]=e)||Ne},Ui=function(){return 0},K0={suppressEvents:!0,isStart:!0,kill:!1},Cs={suppressEvents:!0,kill:!1},H0={suppressEvents:!0},Ol={},Vn=[],Ra={},ed,Pe={},Go={},Kc=30,Ds=[],Ml="",Fl=function(t){var e=t[0],n,r;if(an(e)||Ot(e)||(t=[t]),!(n=(e._gsap||{}).harness)){for(r=Ds.length;r--&&!Ds[r].targetTest(e););n=Ds[r]}for(r=t.length;r--;)t[r]&&(t[r]._gsap||(t[r]._gsap=new bd(t[r],n)))||t.splice(r,1);return t},tr=function(t){return t._gsap||Fl($e(t))[0]._gsap},nd=function(t,e,n){return(n=t[e])&&Ot(n)?t[e]():Vl(n)&&t.getAttribute&&t.getAttribute(e)||n},ve=function(t,e){return(t=t.split(",")).forEach(e)||t},Ft=function(t){return Math.round(t*1e5)/1e5||0},Ht=function(t){return Math.round(t*1e7)/1e7||0},Sr=function(t,e){var n=e.charAt(0),r=parseFloat(e.substr(2));return t=parseFloat(t),n==="+"?t+r:n==="-"?t-r:n==="*"?t*r:t/r},W0=function(t,e){for(var n=e.length,r=0;t.indexOf(e[r])<0&&++r<n;);return r<n},Ws=function(){var t=Vn.length,e=Vn.slice(0),n,r;for(Ra={},Vn.length=0,n=0;n<t;n++)r=e[n],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},rd=function(t,e,n,r){Vn.length&&!ue&&Ws(),t.render(e,n,ue&&e<0&&(t._initted||t._startAt)),Vn.length&&!ue&&Ws()},id=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(Yf).length<2?e:Wt(t)?t.trim():t},sd=function(t){return t},Ue=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},Q0=function(t){return function(e,n){for(var r in n)r in e||r==="duration"&&t||r==="ease"||(e[r]=n[r])}},lr=function(t,e){for(var n in e)t[n]=e[n];return t},Hc=function i(t,e){for(var n in e)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(t[n]=an(e[n])?i(t[n]||(t[n]={}),e[n]):e[n]);return t},Qs=function(t,e){var n={},r;for(r in t)r in e||(n[r]=t[r]);return n},bi=function(t){var e=t.parent||Vt,n=t.keyframes?Q0(ce(t.keyframes)):Ue;if(ye(t.inherit))for(;e;)n(t,e.vars.defaults),e=e.parent||e._dp;return t},X0=function(t,e){for(var n=t.length,r=n===e.length;r&&n--&&t[n]===e[n];);return n<0},od=function(t,e,n,r,s){var o=t[r],l;if(s)for(l=e[s];o&&o[s]>l;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[r]=e,e._prev=o,e.parent=e._dp=t,e},po=function(t,e,n,r){n===void 0&&(n="_first"),r===void 0&&(r="_last");var s=e._prev,o=e._next;s?s._next=o:t[n]===e&&(t[n]=o),o?o._prev=s:t[r]===e&&(t[r]=s),e._next=e._prev=e.parent=null},$n=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},er=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},Y0=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},Pa=function(t,e,n,r){return t._startAt&&(ue?t._startAt.revert(Cs):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,r))},J0=function i(t){return!t||t._ts&&i(t.parent)},Wc=function(t){return t._repeat?jr(t._tTime,t=t.duration()+t._rDelay)*t:0},jr=function(t,e){var n=Math.floor(t/=e);return t&&n===t?n-1:n},Xs=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},mo=function(t){return t._end=Ht(t._start+(t._tDur/Math.abs(t._ts||t._rts||yt)||0))},go=function(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=Ht(n._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),mo(t),n._dirty||er(n,t)),t},ad=function(t,e){var n;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(n=Xs(t.rawTime(),e),(!e._dur||ns(0,e.totalDuration(),n)-e._tTime>yt)&&e.render(n,!0)),er(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-yt}},Je=function(t,e,n,r){return e.parent&&$n(e),e._start=Ht((yn(n)?n:n||t!==Vt?Fe(t,n,e):t._time)+e._delay),e._end=Ht(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),od(t,e,"_first","_last",t._sort?"_start":0),Sa(e)||(t._recent=e),r||ad(t,e),t._ts<0&&go(t,t._tTime),t},ld=function(t,e){return(Ne.ScrollTrigger||Nl("scrollTrigger",e))&&Ne.ScrollTrigger.create(e,t)},ud=function(t,e,n,r,s){if($l(t,e,s),!t._initted)return 1;if(!n&&t._pt&&!ue&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&ed!==Se.frame)return Vn.push(t),t._lazy=[s,r],1},Z0=function i(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||i(e))},Sa=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},tv=function(t,e,n,r){var s=t.ratio,o=e<0||!e&&(!t._start&&Z0(t)&&!(!t._initted&&Sa(t))||(t._ts<0||t._dp._ts<0)&&!Sa(t))?0:1,l=t._rDelay,u=0,c,f,_;if(l&&t._repeat&&(u=ns(0,t._tDur,e),f=jr(u,l),t._yoyo&&f&1&&(o=1-o),f!==jr(t._tTime,l)&&(s=1-o,t.vars.repeatRefresh&&t._initted&&t.invalidate())),o!==s||ue||r||t._zTime===yt||!e&&t._zTime){if(!t._initted&&ud(t,e,r,n,u))return;for(_=t._zTime,t._zTime=e||(n?yt:0),n||(n=e&&!_),t.ratio=o,t._from&&(o=1-o),t._time=0,t._tTime=u,c=t._pt;c;)c.r(o,c.d),c=c._next;e<0&&Pa(t,e,n,!0),t._onUpdate&&!n&&De(t,"onUpdate"),u&&t._repeat&&!n&&t.parent&&De(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===o&&(o&&$n(t,1),!n&&!ue&&(De(t,o?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},ev=function(t,e,n){var r;if(n>e)for(r=t._first;r&&r._start<=n;){if(r.data==="isPause"&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=n;){if(r.data==="isPause"&&r._start<e)return r;r=r._prev}},zr=function(t,e,n,r){var s=t._repeat,o=Ht(e)||0,l=t._tTime/t._tDur;return l&&!r&&(t._time*=o/t._dur),t._dur=o,t._tDur=s?s<0?1e10:Ht(o*(s+1)+t._rDelay*s):o,l>0&&!r&&go(t,t._tTime=t._tDur*l),t.parent&&mo(t),n||er(t.parent,t),t},Qc=function(t){return t instanceof de?er(t):zr(t,t._dur)},nv={_start:0,endTime:Ui,totalDuration:Ui},Fe=function i(t,e,n){var r=t.labels,s=t._recent||nv,o=t.duration()>=Le?s.endTime(!1):t._dur,l,u,c;return Wt(e)&&(isNaN(e)||e in r)?(u=e.charAt(0),c=e.substr(-1)==="%",l=e.indexOf("="),u==="<"||u===">"?(l>=0&&(e=e.replace(/=/,"")),(u==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(e.substr(1))||0)*(c?(l<0?s:n).totalDuration()/100:1)):l<0?(e in r||(r[e]=o),r[e]):(u=parseFloat(e.charAt(l-1)+e.substr(l+1)),c&&n&&(u=u/100*(ce(n)?n[0]:n).totalDuration()),l>1?i(t,e.substr(0,l-1),n)+u:o+u)):e==null?o:+e},Ri=function(t,e,n){var r=yn(e[1]),s=(r?2:1)+(t<2?0:1),o=e[s],l,u;if(r&&(o.duration=e[1]),o.parent=n,t){for(l=o,u=n;u&&!("immediateRender"in l);)l=u.vars.defaults||{},u=ye(u.vars.inherit)&&u.parent;o.immediateRender=ye(l.immediateRender),t<2?o.runBackwards=1:o.startAt=e[s-1]}return new Bt(e[0],o,e[s+1])},jn=function(t,e){return t||t===0?e(t):e},ns=function(t,e,n){return n<t?t:n>e?e:n},le=function(t,e){return!Wt(t)||!(e=G0.exec(t))?"":e[1]},rv=function(t,e,n){return jn(n,function(r){return ns(t,e,r)})},Ca=[].slice,cd=function(t,e){return t&&an(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&an(t[0]))&&!t.nodeType&&t!==Xe},iv=function(t,e,n){return n===void 0&&(n=[]),t.forEach(function(r){var s;return Wt(r)&&!e||cd(r,1)?(s=n).push.apply(s,$e(r)):n.push(r)})||n},$e=function(t,e,n){return St&&!e&&St.selector?St.selector(t):Wt(t)&&!n&&(ba||!qr())?Ca.call((e||xl).querySelectorAll(t),0):ce(t)?iv(t,n):cd(t)?Ca.call(t,0):t?[t]:[]},Da=function(t){return t=$e(t)[0]||$i("Invalid scope")||{},function(e){var n=t.current||t.nativeElement||t;return $e(e,n.querySelectorAll?n:n===t?$i("Invalid scope")||xl.createElement("div"):t)}},hd=function(t){return t.sort(function(){return .5-Math.random()})},fd=function(t){if(Ot(t))return t;var e=an(t)?t:{each:t},n=nr(e.ease),r=e.from||0,s=parseFloat(e.base)||0,o={},l=r>0&&r<1,u=isNaN(r)||l,c=e.axis,f=r,_=r;return Wt(r)?f=_={center:.5,edges:.5,end:1}[r]||0:!l&&u&&(f=r[0],_=r[1]),function(p,y,E){var m=(E||e).length,I=o[m],C,S,k,D,x,O,w,g,v;if(!I){if(v=e.grid==="auto"?0:(e.grid||[1,Le])[1],!v){for(w=-Le;w<(w=E[v++].getBoundingClientRect().left)&&v<m;);v<m&&v--}for(I=o[m]=[],C=u?Math.min(v,m)*f-.5:r%v,S=v===Le?0:u?m*_/v-.5:r/v|0,w=0,g=Le,O=0;O<m;O++)k=O%v-C,D=S-(O/v|0),I[O]=x=c?Math.abs(c==="y"?D:k):Hf(k*k+D*D),x>w&&(w=x),x<g&&(g=x);r==="random"&&hd(I),I.max=w-g,I.min=g,I.v=m=(parseFloat(e.amount)||parseFloat(e.each)*(v>m?m-1:c?c==="y"?m/v:v:Math.max(v,m/v))||0)*(r==="edges"?-1:1),I.b=m<0?s-m:s,I.u=le(e.amount||e.each)||0,n=n&&m<0?wd(n):n}return m=(I[p]-I.min)/I.max||0,Ht(I.b+(n?n(m):m)*I.v)+I.u}},Va=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(n){var r=Ht(Math.round(parseFloat(n)/t)*t*e);return(r-r%1)/e+(yn(n)?0:le(n))}},dd=function(t,e){var n=ce(t),r,s;return!n&&an(t)&&(r=n=t.radius||Le,t.values?(t=$e(t.values),(s=!yn(t[0]))&&(r*=r)):t=Va(t.increment)),jn(e,n?Ot(t)?function(o){return s=t(o),Math.abs(s-o)<=r?s:o}:function(o){for(var l=parseFloat(s?o.x:o),u=parseFloat(s?o.y:0),c=Le,f=0,_=t.length,p,y;_--;)s?(p=t[_].x-l,y=t[_].y-u,p=p*p+y*y):p=Math.abs(t[_]-l),p<c&&(c=p,f=_);return f=!r||c<=r?t[f]:o,s||f===o||yn(o)?f:f+le(o)}:Va(t))},_d=function(t,e,n,r){return jn(ce(t)?!e:n===!0?!!(n=0):!r,function(){return ce(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+n*.99))/n)*n*r)/r})},sv=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return e.reduce(function(s,o){return o(s)},r)}},ov=function(t,e){return function(n){return t(parseFloat(n))+(e||le(n))}},av=function(t,e,n){return md(t,e,0,1,n)},pd=function(t,e,n){return jn(n,function(r){return t[~~e(r)]})},lv=function i(t,e,n){var r=e-t;return ce(t)?pd(t,i(0,t.length),e):jn(n,function(s){return(r+(s-t)%r)%r+t})},uv=function i(t,e,n){var r=e-t,s=r*2;return ce(t)?pd(t,i(0,t.length-1),e):jn(n,function(o){return o=(s+(o-t)%s)%s||0,t+(o>r?s-o:o)})},Bi=function(t){for(var e=0,n="",r,s,o,l;~(r=t.indexOf("random(",e));)o=t.indexOf(")",r),l=t.charAt(r+7)==="[",s=t.substr(r+7,o-r-7).match(l?Yf:Aa),n+=t.substr(e,r-e)+_d(l?s:+s[0],l?0:+s[1],+s[2]||1e-5),e=o+1;return n+t.substr(e,t.length-e)},md=function(t,e,n,r,s){var o=e-t,l=r-n;return jn(s,function(u){return n+((u-t)/o*l||0)})},cv=function i(t,e,n,r){var s=isNaN(t+e)?0:function(y){return(1-y)*t+y*e};if(!s){var o=Wt(t),l={},u,c,f,_,p;if(n===!0&&(r=1)&&(n=null),o)t={p:t},e={p:e};else if(ce(t)&&!ce(e)){for(f=[],_=t.length,p=_-2,c=1;c<_;c++)f.push(i(t[c-1],t[c]));_--,s=function(E){E*=_;var m=Math.min(p,~~E);return f[m](E-m)},n=e}else r||(t=lr(ce(t)?[]:{},t));if(!f){for(u in e)Ll.call(l,t,u,"get",e[u]);s=function(E){return jl(E,l)||(o?t.p:t)}}}return jn(n,s)},Xc=function(t,e,n){var r=t.labels,s=Le,o,l,u;for(o in r)l=r[o]-e,l<0==!!n&&l&&s>(l=Math.abs(l))&&(u=o,s=l);return u},De=function(t,e,n){var r=t.vars,s=r[e],o=St,l=t._ctx,u,c,f;if(s)return u=r[e+"Params"],c=r.callbackScope||t,n&&Vn.length&&Ws(),l&&(St=l),f=u?s.apply(c,u):s.call(c),St=o,f},vi=function(t){return $n(t),t.scrollTrigger&&t.scrollTrigger.kill(!!ue),t.progress()<1&&De(t,"onInterrupt"),t},br,gd=[],yd=function(t){if(t)if(t=!t.name&&t.default||t,kl()||t.headless){var e=t.name,n=Ot(t),r=e&&!n&&t.init?function(){this._props=[]}:t,s={init:Ui,render:jl,add:Ll,kill:Rv,modifier:bv,rawVars:0},o={targetTest:0,get:0,getSetter:Bl,aliases:{},register:0};if(qr(),t!==r){if(Pe[e])return;Ue(r,Ue(Qs(t,s),o)),lr(r.prototype,lr(s,Qs(t,o))),Pe[r.prop=e]=r,t.targetTest&&(Ds.push(r),Ol[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}td(e,r),t.register&&t.register(we,r,Te)}else gd.push(t)},pt=255,Ti={aqua:[0,pt,pt],lime:[0,pt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,pt],navy:[0,0,128],white:[pt,pt,pt],olive:[128,128,0],yellow:[pt,pt,0],orange:[pt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[pt,0,0],pink:[pt,192,203],cyan:[0,pt,pt],transparent:[pt,pt,pt,0]},Ko=function(t,e,n){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(n-e)*t*6:t<.5?n:t*3<2?e+(n-e)*(2/3-t)*6:e)*pt+.5|0},vd=function(t,e,n){var r=t?yn(t)?[t>>16,t>>8&pt,t&pt]:0:Ti.black,s,o,l,u,c,f,_,p,y,E;if(!r){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Ti[t])r=Ti[t];else if(t.charAt(0)==="#"){if(t.length<6&&(s=t.charAt(1),o=t.charAt(2),l=t.charAt(3),t="#"+s+s+o+o+l+l+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return r=parseInt(t.substr(1,6),16),[r>>16,r>>8&pt,r&pt,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),r=[t>>16,t>>8&pt,t&pt]}else if(t.substr(0,3)==="hsl"){if(r=E=t.match(Aa),!e)u=+r[0]%360/360,c=+r[1]/100,f=+r[2]/100,o=f<=.5?f*(c+1):f+c-f*c,s=f*2-o,r.length>3&&(r[3]*=1),r[0]=Ko(u+1/3,s,o),r[1]=Ko(u,s,o),r[2]=Ko(u-1/3,s,o);else if(~t.indexOf("="))return r=t.match(Qf),n&&r.length<4&&(r[3]=1),r}else r=t.match(Aa)||Ti.transparent;r=r.map(Number)}return e&&!E&&(s=r[0]/pt,o=r[1]/pt,l=r[2]/pt,_=Math.max(s,o,l),p=Math.min(s,o,l),f=(_+p)/2,_===p?u=c=0:(y=_-p,c=f>.5?y/(2-_-p):y/(_+p),u=_===s?(o-l)/y+(o<l?6:0):_===o?(l-s)/y+2:(s-o)/y+4,u*=60),r[0]=~~(u+.5),r[1]=~~(c*100+.5),r[2]=~~(f*100+.5)),n&&r.length<4&&(r[3]=1),r},Td=function(t){var e=[],n=[],r=-1;return t.split(kn).forEach(function(s){var o=s.match(Ar)||[];e.push.apply(e,o),n.push(r+=o.length+1)}),e.c=n,e},Yc=function(t,e,n){var r="",s=(t+r).match(kn),o=e?"hsla(":"rgba(",l=0,u,c,f,_;if(!s)return t;if(s=s.map(function(p){return(p=vd(p,e,1))&&o+(e?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),n&&(f=Td(t),u=n.c,u.join(r)!==f.c.join(r)))for(c=t.replace(kn,"1").split(Ar),_=c.length-1;l<_;l++)r+=c[l]+(~u.indexOf(l)?s.shift()||o+"0,0,0,0)":(f.length?f:s.length?s:n).shift());if(!c)for(c=t.split(kn),_=c.length-1;l<_;l++)r+=c[l]+s[l];return r+c[_]},kn=function(){var i="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Ti)i+="|"+t+"\\b";return new RegExp(i+")","gi")}(),hv=/hsl[a]?\(/,Ed=function(t){var e=t.join(" "),n;if(kn.lastIndex=0,kn.test(e))return n=hv.test(e),t[1]=Yc(t[1],n),t[0]=Yc(t[0],n,Td(t[1])),!0},ji,Se=function(){var i=Date.now,t=500,e=33,n=i(),r=n,s=1e3/240,o=s,l=[],u,c,f,_,p,y,E=function m(I){var C=i()-r,S=I===!0,k,D,x,O;if((C>t||C<0)&&(n+=C-e),r+=C,x=r-n,k=x-o,(k>0||S)&&(O=++_.frame,p=x-_.time*1e3,_.time=x=x/1e3,o+=k+(k>=s?4:s-k),D=1),S||(u=c(m)),D)for(y=0;y<l.length;y++)l[y](x,p,O,I)};return _={time:0,frame:0,tick:function(){E(!0)},deltaRatio:function(I){return p/(1e3/(I||60))},wake:function(){Jf&&(!ba&&kl()&&(Xe=ba=window,xl=Xe.document||{},Ne.gsap=we,(Xe.gsapVersions||(Xe.gsapVersions=[])).push(we.version),Zf(Hs||Xe.GreenSockGlobals||!Xe.gsap&&Xe||{}),gd.forEach(yd)),f=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&_.sleep(),c=f||function(I){return setTimeout(I,o-_.time*1e3+1|0)},ji=1,E(2))},sleep:function(){(f?cancelAnimationFrame:clearTimeout)(u),ji=0,c=Ui},lagSmoothing:function(I,C){t=I||1/0,e=Math.min(C||33,t)},fps:function(I){s=1e3/(I||240),o=_.time*1e3+s},add:function(I,C,S){var k=C?function(D,x,O,w){I(D,x,O,w),_.remove(k)}:I;return _.remove(I),l[S?"unshift":"push"](k),qr(),k},remove:function(I,C){~(C=l.indexOf(I))&&l.splice(C,1)&&y>=C&&y--},_listeners:l},_}(),qr=function(){return!ji&&Se.wake()},at={},fv=/^[\d.\-M][\d.\-,\s]/,dv=/["']/g,_v=function(t){for(var e={},n=t.substr(1,t.length-3).split(":"),r=n[0],s=1,o=n.length,l,u,c;s<o;s++)u=n[s],l=s!==o-1?u.lastIndexOf(","):u.length,c=u.substr(0,l),e[r]=isNaN(c)?c.replace(dv,"").trim():+c,r=u.substr(l+1).trim();return e},pv=function(t){var e=t.indexOf("(")+1,n=t.indexOf(")"),r=t.indexOf("(",e);return t.substring(e,~r&&r<n?t.indexOf(")",n+1):n)},mv=function(t){var e=(t+"").split("("),n=at[e[0]];return n&&e.length>1&&n.config?n.config.apply(null,~t.indexOf("{")?[_v(e[1])]:pv(t).split(",").map(id)):at._CE&&fv.test(t)?at._CE("",t):n},wd=function(t){return function(e){return 1-t(1-e)}},Id=function i(t,e){for(var n=t._first,r;n;)n instanceof de?i(n,e):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==e&&(n.timeline?i(n.timeline,e):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=e)),n=n._next},nr=function(t,e){return t&&(Ot(t)?t:at[t]||mv(t))||e},fr=function(t,e,n,r){n===void 0&&(n=function(u){return 1-e(1-u)}),r===void 0&&(r=function(u){return u<.5?e(u*2)/2:1-e((1-u)*2)/2});var s={easeIn:e,easeOut:n,easeInOut:r},o;return ve(t,function(l){at[l]=Ne[l]=s,at[o=l.toLowerCase()]=n;for(var u in s)at[o+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=at[l+"."+u]=s[u]}),s},Ad=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},Ho=function i(t,e,n){var r=e>=1?e:1,s=(n||(t?.3:.45))/(e<1?e:1),o=s/Ia*(Math.asin(1/r)||0),l=function(f){return f===1?1:r*Math.pow(2,-10*f)*q0((f-o)*s)+1},u=t==="out"?l:t==="in"?function(c){return 1-l(1-c)}:Ad(l);return s=Ia/s,u.config=function(c,f){return i(t,c,f)},u},Wo=function i(t,e){e===void 0&&(e=1.70158);var n=function(o){return o?--o*o*((e+1)*o+e)+1:0},r=t==="out"?n:t==="in"?function(s){return 1-n(1-s)}:Ad(n);return r.config=function(s){return i(t,s)},r};ve("Linear,Quad,Cubic,Quart,Quint,Strong",function(i,t){var e=t<5?t+1:t;fr(i+",Power"+(e-1),t?function(n){return Math.pow(n,e)}:function(n){return n},function(n){return 1-Math.pow(1-n,e)},function(n){return n<.5?Math.pow(n*2,e)/2:1-Math.pow((1-n)*2,e)/2})});at.Linear.easeNone=at.none=at.Linear.easeIn;fr("Elastic",Ho("in"),Ho("out"),Ho());(function(i,t){var e=1/t,n=2*e,r=2.5*e,s=function(l){return l<e?i*l*l:l<n?i*Math.pow(l-1.5/t,2)+.75:l<r?i*(l-=2.25/t)*l+.9375:i*Math.pow(l-2.625/t,2)+.984375};fr("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);fr("Expo",function(i){return i?Math.pow(2,10*(i-1)):0});fr("Circ",function(i){return-(Hf(1-i*i)-1)});fr("Sine",function(i){return i===1?1:-z0(i*B0)+1});fr("Back",Wo("in"),Wo("out"),Wo());at.SteppedEase=at.steps=Ne.SteppedEase={config:function(t,e){t===void 0&&(t=1);var n=1/t,r=t+(e?0:1),s=e?1:0,o=1-yt;return function(l){return((r*ns(0,o,l)|0)+s)*n}}};Br.ease=at["quad.out"];ve("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(i){return Ml+=i+","+i+"Params,"});var bd=function(t,e){this.id=j0++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:nd,this.set=e?e.getSetter:Bl},zi=function(){function i(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,zr(this,+e.duration,1,1),this.data=e.data,St&&(this._ctx=St,St.data.push(this)),ji||Se.wake()}var t=i.prototype;return t.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},t.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},t.totalDuration=function(n){return arguments.length?(this._dirty=0,zr(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(n,r){if(qr(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(go(this,n),!s._dp||s.parent||ad(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&Je(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===yt||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),rd(this,n,r)),this},t.time=function(n,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+Wc(this))%(this._dur+this._rDelay)||(n?this._dur:0),r):this._time},t.totalProgress=function(n,r){return arguments.length?this.totalTime(this.totalDuration()*n,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},t.progress=function(n,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+Wc(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(n,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,r):this._repeat?jr(this._tTime,s)+1:1},t.timeScale=function(n,r){if(!arguments.length)return this._rts===-yt?0:this._rts;if(this._rts===n)return this;var s=this.parent&&this._ts?Xs(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-yt?0:this._rts,this.totalTime(ns(-Math.abs(this._delay),this._tDur,s),r!==!1),mo(this),Y0(this)},t.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(qr(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==yt&&(this._tTime-=yt)))),this):this._ps},t.startTime=function(n){if(arguments.length){this._start=n;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Je(r,this,n-this._delay),this}return this._start},t.endTime=function(n){return this._start+(ye(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(n){var r=this.parent||this._dp;return r?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Xs(r.rawTime(n),this):this._tTime:this._tTime},t.revert=function(n){n===void 0&&(n=H0);var r=ue;return ue=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),ue=r,this},t.globalTime=function(n){for(var r=this,s=arguments.length?n:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(n):s},t.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,Qc(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(n){if(arguments.length){var r=this._time;return this._rDelay=n,Qc(this),r?this.time(r):this}return this._rDelay},t.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},t.seek=function(n,r){return this.totalTime(Fe(this,n),ye(r))},t.restart=function(n,r){return this.play().totalTime(n?-this._delay:0,ye(r))},t.play=function(n,r){return n!=null&&this.seek(n,r),this.reversed(!1).paused(!1)},t.reverse=function(n,r){return n!=null&&this.seek(n||this.totalDuration(),r),this.reversed(!0).paused(!1)},t.pause=function(n,r){return n!=null&&this.seek(n,r),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-yt:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-yt,this},t.isActive=function(){var n=this.parent||this._dp,r=this._start,s;return!!(!n||this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=r&&s<this.endTime(!0)-yt)},t.eventCallback=function(n,r,s){var o=this.vars;return arguments.length>1?(r?(o[n]=r,s&&(o[n+"Params"]=s),n==="onUpdate"&&(this._onUpdate=r)):delete o[n],this):o[n]},t.then=function(n){var r=this;return new Promise(function(s){var o=Ot(n)?n:sd,l=function(){var c=r.then;r.then=null,Ot(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=c),s(o),r.then=c};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?l():r._prom=l})},t.kill=function(){vi(this)},i}();Ue(zi.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-yt,_prom:0,_ps:!1,_rts:1});var de=function(i){Kf(t,i);function t(n,r){var s;return n===void 0&&(n={}),s=i.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=ye(n.sortChildren),Vt&&Je(n.parent||Vt,dn(s),r),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&ld(dn(s),n.scrollTrigger),s}var e=t.prototype;return e.to=function(r,s,o){return Ri(0,arguments,this),this},e.from=function(r,s,o){return Ri(1,arguments,this),this},e.fromTo=function(r,s,o,l){return Ri(2,arguments,this),this},e.set=function(r,s,o){return s.duration=0,s.parent=this,bi(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Bt(r,s,Fe(this,o),1),this},e.call=function(r,s,o){return Je(this,Bt.delayedCall(0,r,s),o)},e.staggerTo=function(r,s,o,l,u,c,f){return o.duration=s,o.stagger=o.stagger||l,o.onComplete=c,o.onCompleteParams=f,o.parent=this,new Bt(r,o,Fe(this,u)),this},e.staggerFrom=function(r,s,o,l,u,c,f){return o.runBackwards=1,bi(o).immediateRender=ye(o.immediateRender),this.staggerTo(r,s,o,l,u,c,f)},e.staggerFromTo=function(r,s,o,l,u,c,f,_){return l.startAt=o,bi(l).immediateRender=ye(l.immediateRender),this.staggerTo(r,s,l,u,c,f,_)},e.render=function(r,s,o){var l=this._time,u=this._dirty?this.totalDuration():this._tDur,c=this._dur,f=r<=0?0:Ht(r),_=this._zTime<0!=r<0&&(this._initted||!c),p,y,E,m,I,C,S,k,D,x,O,w;if(this!==Vt&&f>u&&r>=0&&(f=u),f!==this._tTime||o||_){if(l!==this._time&&c&&(f+=this._time-l,r+=this._time-l),p=f,D=this._start,k=this._ts,C=!k,_&&(c||(l=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(O=this._yoyo,I=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(I*100+r,s,o);if(p=Ht(f%I),f===u?(m=this._repeat,p=c):(m=~~(f/I),m&&m===f/I&&(p=c,m--),p>c&&(p=c)),x=jr(this._tTime,I),!l&&this._tTime&&x!==m&&this._tTime-x*I-this._dur<=0&&(x=m),O&&m&1&&(p=c-p,w=1),m!==x&&!this._lock){var g=O&&x&1,v=g===(O&&m&1);if(m<x&&(g=!g),l=g?0:f%c?c:f,this._lock=1,this.render(l||(w?0:Ht(m*I)),s,!c)._lock=0,this._tTime=f,!s&&this.parent&&De(this,"onRepeat"),this.vars.repeatRefresh&&!w&&(this.invalidate()._lock=1),l&&l!==this._time||C!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,u=this._tDur,v&&(this._lock=2,l=g?c:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!w&&this.invalidate()),this._lock=0,!this._ts&&!C)return this;Id(this,w)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(S=ev(this,Ht(l),Ht(p)),S&&(f-=p-(p=S._start))),this._tTime=f,this._time=p,this._act=!k,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,l=0),!l&&p&&!s&&!m&&(De(this,"onStart"),this._tTime!==f))return this;if(p>=l&&r>=0)for(y=this._first;y;){if(E=y._next,(y._act||p>=y._start)&&y._ts&&S!==y){if(y.parent!==this)return this.render(r,s,o);if(y.render(y._ts>0?(p-y._start)*y._ts:(y._dirty?y.totalDuration():y._tDur)+(p-y._start)*y._ts,s,o),p!==this._time||!this._ts&&!C){S=0,E&&(f+=this._zTime=-yt);break}}y=E}else{y=this._last;for(var b=r<0?r:p;y;){if(E=y._prev,(y._act||b<=y._end)&&y._ts&&S!==y){if(y.parent!==this)return this.render(r,s,o);if(y.render(y._ts>0?(b-y._start)*y._ts:(y._dirty?y.totalDuration():y._tDur)+(b-y._start)*y._ts,s,o||ue&&(y._initted||y._startAt)),p!==this._time||!this._ts&&!C){S=0,E&&(f+=this._zTime=b?-yt:yt);break}}y=E}}if(S&&!s&&(this.pause(),S.render(p>=l?0:-yt)._zTime=p>=l?1:-1,this._ts))return this._start=D,mo(this),this.render(r,s,o);this._onUpdate&&!s&&De(this,"onUpdate",!0),(f===u&&this._tTime>=this.totalDuration()||!f&&l)&&(D===this._start||Math.abs(k)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(f===u&&this._ts>0||!f&&this._ts<0)&&$n(this,1),!s&&!(r<0&&!l)&&(f||l||!u)&&(De(this,f===u&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(f<u&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(r,s){var o=this;if(yn(s)||(s=Fe(this,s,r)),!(r instanceof zi)){if(ce(r))return r.forEach(function(l){return o.add(l,s)}),this;if(Wt(r))return this.addLabel(r,s);if(Ot(r))r=Bt.delayedCall(0,r);else return this}return this!==r?Je(this,r,s):this},e.getChildren=function(r,s,o,l){r===void 0&&(r=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),l===void 0&&(l=-Le);for(var u=[],c=this._first;c;)c._start>=l&&(c instanceof Bt?s&&u.push(c):(o&&u.push(c),r&&u.push.apply(u,c.getChildren(!0,s,o)))),c=c._next;return u},e.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},e.remove=function(r){return Wt(r)?this.removeLabel(r):Ot(r)?this.killTweensOf(r):(po(this,r),r===this._recent&&(this._recent=this._last),er(this))},e.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ht(Se.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),i.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},e.addLabel=function(r,s){return this.labels[r]=Fe(this,s),this},e.removeLabel=function(r){return delete this.labels[r],this},e.addPause=function(r,s,o){var l=Bt.delayedCall(0,s||Ui,o);return l.data="isPause",this._hasPause=1,Je(this,l,Fe(this,r))},e.removePause=function(r){var s=this._first;for(r=Fe(this,r);s;)s._start===r&&s.data==="isPause"&&$n(s),s=s._next},e.killTweensOf=function(r,s,o){for(var l=this.getTweensOf(r,o),u=l.length;u--;)bn!==l[u]&&l[u].kill(r,s);return this},e.getTweensOf=function(r,s){for(var o=[],l=$e(r),u=this._first,c=yn(s),f;u;)u instanceof Bt?W0(u._targets,l)&&(c?(!bn||u._initted&&u._ts)&&u.globalTime(0)<=s&&u.globalTime(u.totalDuration())>s:!s||u.isActive())&&o.push(u):(f=u.getTweensOf(l,s)).length&&o.push.apply(o,f),u=u._next;return o},e.tweenTo=function(r,s){s=s||{};var o=this,l=Fe(o,r),u=s,c=u.startAt,f=u.onStart,_=u.onStartParams,p=u.immediateRender,y,E=Bt.to(o,Ue({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:s.duration||Math.abs((l-(c&&"time"in c?c.time:o._time))/o.timeScale())||yt,onStart:function(){if(o.pause(),!y){var I=s.duration||Math.abs((l-(c&&"time"in c?c.time:o._time))/o.timeScale());E._dur!==I&&zr(E,I,0,1).render(E._time,!0,!0),y=1}f&&f.apply(E,_||[])}},s));return p?E.render(0):E},e.tweenFromTo=function(r,s,o){return this.tweenTo(s,Ue({startAt:{time:Fe(this,r)}},o))},e.recent=function(){return this._recent},e.nextLabel=function(r){return r===void 0&&(r=this._time),Xc(this,Fe(this,r))},e.previousLabel=function(r){return r===void 0&&(r=this._time),Xc(this,Fe(this,r),1)},e.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+yt)},e.shiftChildren=function(r,s,o){o===void 0&&(o=0);for(var l=this._first,u=this.labels,c;l;)l._start>=o&&(l._start+=r,l._end+=r),l=l._next;if(s)for(c in u)u[c]>=o&&(u[c]+=r);return er(this)},e.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return i.prototype.invalidate.call(this,r)},e.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),er(this)},e.totalDuration=function(r){var s=0,o=this,l=o._last,u=Le,c,f,_;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(_=o.parent;l;)c=l._prev,l._dirty&&l.totalDuration(),f=l._start,f>u&&o._sort&&l._ts&&!o._lock?(o._lock=1,Je(o,l,f-l._delay,1)._lock=0):u=f,f<0&&l._ts&&(s-=f,(!_&&!o._dp||_&&_.smoothChildTiming)&&(o._start+=f/o._ts,o._time-=f,o._tTime-=f),o.shiftChildren(-f,!1,-1/0),u=0),l._end>s&&l._ts&&(s=l._end),l=c;zr(o,o===Vt&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(r){if(Vt._ts&&(rd(Vt,Xs(r,Vt)),ed=Se.frame),Se.frame>=Kc){Kc+=xe.autoSleep||120;var s=Vt._first;if((!s||!s._ts)&&xe.autoSleep&&Se._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Se.sleep()}}},t}(zi);Ue(de.prototype,{_lock:0,_hasPause:0,_forcing:0});var gv=function(t,e,n,r,s,o,l){var u=new Te(this._pt,t,e,0,1,Vd,null,s),c=0,f=0,_,p,y,E,m,I,C,S;for(u.b=n,u.e=r,n+="",r+="",(C=~r.indexOf("random("))&&(r=Bi(r)),o&&(S=[n,r],o(S,t,e),n=S[0],r=S[1]),p=n.match(qo)||[];_=qo.exec(r);)E=_[0],m=r.substring(c,_.index),y?y=(y+1)%5:m.substr(-5)==="rgba("&&(y=1),E!==p[f++]&&(I=parseFloat(p[f-1])||0,u._pt={_next:u._pt,p:m||f===1?m:",",s:I,c:E.charAt(1)==="="?Sr(I,E)-I:parseFloat(E)-I,m:y&&y<4?Math.round:0},c=qo.lastIndex);return u.c=c<r.length?r.substring(c,r.length):"",u.fp=l,(Xf.test(r)||C)&&(u.e=0),this._pt=u,u},Ll=function(t,e,n,r,s,o,l,u,c,f){Ot(r)&&(r=r(s||0,t,o));var _=t[e],p=n!=="get"?n:Ot(_)?c?t[e.indexOf("set")||!Ot(t["get"+e.substr(3)])?e:"get"+e.substr(3)](c):t[e]():_,y=Ot(_)?c?wv:Cd:Ul,E;if(Wt(r)&&(~r.indexOf("random(")&&(r=Bi(r)),r.charAt(1)==="="&&(E=Sr(p,r)+(le(p)||0),(E||E===0)&&(r=E))),!f||p!==r||ka)return!isNaN(p*r)&&r!==""?(E=new Te(this._pt,t,e,+p||0,r-(p||0),typeof _=="boolean"?Av:Dd,0,y),c&&(E.fp=c),l&&E.modifier(l,this,t),this._pt=E):(!_&&!(e in t)&&Nl(e,r),gv.call(this,t,e,p,r,y,u||xe.stringFilter,c))},yv=function(t,e,n,r,s){if(Ot(t)&&(t=Pi(t,s,e,n,r)),!an(t)||t.style&&t.nodeType||ce(t)||Wf(t))return Wt(t)?Pi(t,s,e,n,r):t;var o={},l;for(l in t)o[l]=Pi(t[l],s,e,n,r);return o},Rd=function(t,e,n,r,s,o){var l,u,c,f;if(Pe[t]&&(l=new Pe[t]).init(s,l.rawVars?e[t]:yv(e[t],r,s,o,n),n,r,o)!==!1&&(n._pt=u=new Te(n._pt,s,t,0,1,l.render,l,0,l.priority),n!==br))for(c=n._ptLookup[n._targets.indexOf(s)],f=l._props.length;f--;)c[l._props[f]]=u;return l},bn,ka,$l=function i(t,e,n){var r=t.vars,s=r.ease,o=r.startAt,l=r.immediateRender,u=r.lazy,c=r.onUpdate,f=r.runBackwards,_=r.yoyoEase,p=r.keyframes,y=r.autoRevert,E=t._dur,m=t._startAt,I=t._targets,C=t.parent,S=C&&C.data==="nested"?C.vars.targets:I,k=t._overwrite==="auto"&&!Dl,D=t.timeline,x,O,w,g,v,b,R,P,A,nt,dt,mt,lt;if(D&&(!p||!s)&&(s="none"),t._ease=nr(s,Br.ease),t._yEase=_?wd(nr(_===!0?s:_,Br.ease)):0,_&&t._yoyo&&!t._repeat&&(_=t._yEase,t._yEase=t._ease,t._ease=_),t._from=!D&&!!r.runBackwards,!D||p&&!r.stagger){if(P=I[0]?tr(I[0]).harness:0,mt=P&&r[P.prop],x=Qs(r,Ol),m&&(m._zTime<0&&m.progress(1),e<0&&f&&l&&!y?m.render(-1,!0):m.revert(f&&E?Cs:K0),m._lazy=0),o){if($n(t._startAt=Bt.set(I,Ue({data:"isStart",overwrite:!1,parent:C,immediateRender:!0,lazy:!m&&ye(u),startAt:null,delay:0,onUpdate:c&&function(){return De(t,"onUpdate")},stagger:0},o))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(ue||!l&&!y)&&t._startAt.revert(Cs),l&&E&&e<=0&&n<=0){e&&(t._zTime=e);return}}else if(f&&E&&!m){if(e&&(l=!1),w=Ue({overwrite:!1,data:"isFromStart",lazy:l&&!m&&ye(u),immediateRender:l,stagger:0,parent:C},x),mt&&(w[P.prop]=mt),$n(t._startAt=Bt.set(I,w)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(ue?t._startAt.revert(Cs):t._startAt.render(-1,!0)),t._zTime=e,!l)i(t._startAt,yt,yt);else if(!e)return}for(t._pt=t._ptCache=0,u=E&&ye(u)||u&&!E,O=0;O<I.length;O++){if(v=I[O],R=v._gsap||Fl(I)[O]._gsap,t._ptLookup[O]=nt={},Ra[R.id]&&Vn.length&&Ws(),dt=S===I?O:S.indexOf(v),P&&(A=new P).init(v,mt||x,t,dt,S)!==!1&&(t._pt=g=new Te(t._pt,v,A.name,0,1,A.render,A,0,A.priority),A._props.forEach(function(Ct){nt[Ct]=g}),A.priority&&(b=1)),!P||mt)for(w in x)Pe[w]&&(A=Rd(w,x,t,dt,v,S))?A.priority&&(b=1):nt[w]=g=Ll.call(t,v,w,"get",x[w],dt,S,0,r.stringFilter);t._op&&t._op[O]&&t.kill(v,t._op[O]),k&&t._pt&&(bn=t,Vt.killTweensOf(v,nt,t.globalTime(e)),lt=!t.parent,bn=0),t._pt&&u&&(Ra[R.id]=1)}b&&kd(t),t._onInit&&t._onInit(t)}t._onUpdate=c,t._initted=(!t._op||t._pt)&&!lt,p&&e<=0&&D.render(Le,!0,!0)},vv=function(t,e,n,r,s,o,l,u){var c=(t._pt&&t._ptCache||(t._ptCache={}))[e],f,_,p,y;if(!c)for(c=t._ptCache[e]=[],p=t._ptLookup,y=t._targets.length;y--;){if(f=p[y][e],f&&f.d&&f.d._pt)for(f=f.d._pt;f&&f.p!==e&&f.fp!==e;)f=f._next;if(!f)return ka=1,t.vars[e]="+=0",$l(t,l),ka=0,u?$i(e+" not eligible for reset"):1;c.push(f)}for(y=c.length;y--;)_=c[y],f=_._pt||_,f.s=(r||r===0)&&!s?r:f.s+(r||0)+o*f.c,f.c=n-f.s,_.e&&(_.e=Ft(n)+le(_.e)),_.b&&(_.b=f.s+le(_.b))},Tv=function(t,e){var n=t[0]?tr(t[0]).harness:0,r=n&&n.aliases,s,o,l,u;if(!r)return e;s=lr({},e);for(o in r)if(o in s)for(u=r[o].split(","),l=u.length;l--;)s[u[l]]=s[o];return s},Ev=function(t,e,n,r){var s=e.ease||r||"power1.inOut",o,l;if(ce(e))l=n[t]||(n[t]=[]),e.forEach(function(u,c){return l.push({t:c/(e.length-1)*100,v:u,e:s})});else for(o in e)l=n[o]||(n[o]=[]),o==="ease"||l.push({t:parseFloat(t),v:e[o],e:s})},Pi=function(t,e,n,r,s){return Ot(t)?t.call(e,n,r,s):Wt(t)&&~t.indexOf("random(")?Bi(t):t},Pd=Ml+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Sd={};ve(Pd+",id,stagger,delay,duration,paused,scrollTrigger",function(i){return Sd[i]=1});var Bt=function(i){Kf(t,i);function t(n,r,s,o){var l;typeof r=="number"&&(s.duration=r,r=s,s=null),l=i.call(this,o?r:bi(r))||this;var u=l.vars,c=u.duration,f=u.delay,_=u.immediateRender,p=u.stagger,y=u.overwrite,E=u.keyframes,m=u.defaults,I=u.scrollTrigger,C=u.yoyoEase,S=r.parent||Vt,k=(ce(n)||Wf(n)?yn(n[0]):"length"in r)?[n]:$e(n),D,x,O,w,g,v,b,R;if(l._targets=k.length?Fl(k):$i("GSAP target "+n+" not found. https://gsap.com",!xe.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=y,E||p||Is(c)||Is(f)){if(r=l.vars,D=l.timeline=new de({data:"nested",defaults:m||{},targets:S&&S.data==="nested"?S.vars.targets:k}),D.kill(),D.parent=D._dp=dn(l),D._start=0,p||Is(c)||Is(f)){if(w=k.length,b=p&&fd(p),an(p))for(g in p)~Pd.indexOf(g)&&(R||(R={}),R[g]=p[g]);for(x=0;x<w;x++)O=Qs(r,Sd),O.stagger=0,C&&(O.yoyoEase=C),R&&lr(O,R),v=k[x],O.duration=+Pi(c,dn(l),x,v,k),O.delay=(+Pi(f,dn(l),x,v,k)||0)-l._delay,!p&&w===1&&O.delay&&(l._delay=f=O.delay,l._start+=f,O.delay=0),D.to(v,O,b?b(x,v,k):0),D._ease=at.none;D.duration()?c=f=0:l.timeline=0}else if(E){bi(Ue(D.vars.defaults,{ease:"none"})),D._ease=nr(E.ease||r.ease||"none");var P=0,A,nt,dt;if(ce(E))E.forEach(function(mt){return D.to(k,mt,">")}),D.duration();else{O={};for(g in E)g==="ease"||g==="easeEach"||Ev(g,E[g],O,E.easeEach);for(g in O)for(A=O[g].sort(function(mt,lt){return mt.t-lt.t}),P=0,x=0;x<A.length;x++)nt=A[x],dt={ease:nt.e,duration:(nt.t-(x?A[x-1].t:0))/100*c},dt[g]=nt.v,D.to(k,dt,P),P+=dt.duration;D.duration()<c&&D.to({},{duration:c-D.duration()})}}c||l.duration(c=D.duration())}else l.timeline=0;return y===!0&&!Dl&&(bn=dn(l),Vt.killTweensOf(k),bn=0),Je(S,dn(l),s),r.reversed&&l.reverse(),r.paused&&l.paused(!0),(_||!c&&!E&&l._start===Ht(S._time)&&ye(_)&&J0(dn(l))&&S.data!=="nested")&&(l._tTime=-yt,l.render(Math.max(0,-f)||0)),I&&ld(dn(l),I),l}var e=t.prototype;return e.render=function(r,s,o){var l=this._time,u=this._tDur,c=this._dur,f=r<0,_=r>u-yt&&!f?u:r<yt?0:r,p,y,E,m,I,C,S,k,D;if(!c)tv(this,r,s,o);else if(_!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==f){if(p=_,k=this.timeline,this._repeat){if(m=c+this._rDelay,this._repeat<-1&&f)return this.totalTime(m*100+r,s,o);if(p=Ht(_%m),_===u?(E=this._repeat,p=c):(E=~~(_/m),E&&E===Ht(_/m)&&(p=c,E--),p>c&&(p=c)),C=this._yoyo&&E&1,C&&(D=this._yEase,p=c-p),I=jr(this._tTime,m),p===l&&!o&&this._initted&&E===I)return this._tTime=_,this;E!==I&&(k&&this._yEase&&Id(k,C),this.vars.repeatRefresh&&!C&&!this._lock&&this._time!==m&&this._initted&&(this._lock=o=1,this.render(Ht(m*E),!0).invalidate()._lock=0))}if(!this._initted){if(ud(this,f?r:p,o,s,_))return this._tTime=0,this;if(l!==this._time&&!(o&&this.vars.repeatRefresh&&E!==I))return this;if(c!==this._dur)return this.render(r,s,o)}if(this._tTime=_,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=S=(D||this._ease)(p/c),this._from&&(this.ratio=S=1-S),p&&!l&&!s&&!E&&(De(this,"onStart"),this._tTime!==_))return this;for(y=this._pt;y;)y.r(S,y.d),y=y._next;k&&k.render(r<0?r:k._dur*k._ease(p/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(f&&Pa(this,r,s,o),De(this,"onUpdate")),this._repeat&&E!==I&&this.vars.onRepeat&&!s&&this.parent&&De(this,"onRepeat"),(_===this._tDur||!_)&&this._tTime===_&&(f&&!this._onUpdate&&Pa(this,r,!0,!0),(r||!c)&&(_===this._tDur&&this._ts>0||!_&&this._ts<0)&&$n(this,1),!s&&!(f&&!l)&&(_||l||C)&&(De(this,_===u?"onComplete":"onReverseComplete",!0),this._prom&&!(_<u&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),i.prototype.invalidate.call(this,r)},e.resetTo=function(r,s,o,l,u){ji||Se.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),f;return this._initted||$l(this,c),f=this._ease(c/this._dur),vv(this,r,s,o,l,f,c,u)?this.resetTo(r,s,o,l,1):(go(this,0),this.parent||od(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?vi(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,bn&&bn.vars.overwrite!==!0)._first||vi(this),this.parent&&o!==this.timeline.totalDuration()&&zr(this,this._dur*this.timeline._tDur/o,0,1),this}var l=this._targets,u=r?$e(r):l,c=this._ptLookup,f=this._pt,_,p,y,E,m,I,C;if((!s||s==="all")&&X0(l,u))return s==="all"&&(this._pt=0),vi(this);for(_=this._op=this._op||[],s!=="all"&&(Wt(s)&&(m={},ve(s,function(S){return m[S]=1}),s=m),s=Tv(l,s)),C=l.length;C--;)if(~u.indexOf(l[C])){p=c[C],s==="all"?(_[C]=s,E=p,y={}):(y=_[C]=_[C]||{},E=s);for(m in E)I=p&&p[m],I&&((!("kill"in I.d)||I.d.kill(m)===!0)&&po(this,I,"_pt"),delete p[m]),y!=="all"&&(y[m]=1)}return this._initted&&!this._pt&&f&&vi(this),this},t.to=function(r,s){return new t(r,s,arguments[2])},t.from=function(r,s){return Ri(1,arguments)},t.delayedCall=function(r,s,o,l){return new t(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:l})},t.fromTo=function(r,s,o){return Ri(2,arguments)},t.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new t(r,s)},t.killTweensOf=function(r,s,o){return Vt.killTweensOf(r,s,o)},t}(zi);Ue(Bt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});ve("staggerTo,staggerFrom,staggerFromTo",function(i){Bt[i]=function(){var t=new de,e=Ca.call(arguments,0);return e.splice(i==="staggerFromTo"?5:4,0,0),t[i].apply(t,e)}});var Ul=function(t,e,n){return t[e]=n},Cd=function(t,e,n){return t[e](n)},wv=function(t,e,n,r){return t[e](r.fp,n)},Iv=function(t,e,n){return t.setAttribute(e,n)},Bl=function(t,e){return Ot(t[e])?Cd:Vl(t[e])&&t.setAttribute?Iv:Ul},Dd=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},Av=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},Vd=function(t,e){var n=e._pt,r="";if(!t&&e.b)r=e.b;else if(t===1&&e.e)r=e.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*t):Math.round((n.s+n.c*t)*1e4)/1e4)+r,n=n._next;r+=e.c}e.set(e.t,e.p,r,e)},jl=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},bv=function(t,e,n,r){for(var s=this._pt,o;s;)o=s._next,s.p===r&&s.modifier(t,e,n),s=o},Rv=function(t){for(var e=this._pt,n,r;e;)r=e._next,e.p===t&&!e.op||e.op===t?po(this,e,"_pt"):e.dep||(n=1),e=r;return!n},Pv=function(t,e,n,r){r.mSet(t,e,r.m.call(r.tween,n,r.mt),r)},kd=function(t){for(var e=t._pt,n,r,s,o;e;){for(n=e._next,r=s;r&&r.pr>e.pr;)r=r._next;(e._prev=r?r._prev:o)?e._prev._next=e:s=e,(e._next=r)?r._prev=e:o=e,e=n}t._pt=s},Te=function(){function i(e,n,r,s,o,l,u,c,f){this.t=n,this.s=s,this.c=o,this.p=r,this.r=l||Dd,this.d=u||this,this.set=c||Ul,this.pr=f||0,this._next=e,e&&(e._prev=this)}var t=i.prototype;return t.modifier=function(n,r,s){this.mSet=this.mSet||this.set,this.set=Pv,this.m=n,this.mt=s,this.tween=r},i}();ve(Ml+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(i){return Ol[i]=1});Ne.TweenMax=Ne.TweenLite=Bt;Ne.TimelineLite=Ne.TimelineMax=de;Vt=new de({sortChildren:!1,defaults:Br,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});xe.stringFilter=Ed;var rr=[],Vs={},Sv=[],Jc=0,Cv=0,Qo=function(t){return(Vs[t]||Sv).map(function(e){return e()})},xa=function(){var t=Date.now(),e=[];t-Jc>2&&(Qo("matchMediaInit"),rr.forEach(function(n){var r=n.queries,s=n.conditions,o,l,u,c;for(l in r)o=Xe.matchMedia(r[l]).matches,o&&(u=1),o!==s[l]&&(s[l]=o,c=1);c&&(n.revert(),u&&e.push(n))}),Qo("matchMediaRevert"),e.forEach(function(n){return n.onMatch(n,function(r){return n.add(null,r)})}),Jc=t,Qo("matchMedia"))},xd=function(){function i(e,n){this.selector=n&&Da(n),this.data=[],this._r=[],this.isReverted=!1,this.id=Cv++,e&&this.add(e)}var t=i.prototype;return t.add=function(n,r,s){Ot(n)&&(s=r,r=n,n=Ot);var o=this,l=function(){var c=St,f=o.selector,_;return c&&c!==o&&c.data.push(o),s&&(o.selector=Da(s)),St=o,_=r.apply(o,arguments),Ot(_)&&o._r.push(_),St=c,o.selector=f,o.isReverted=!1,_};return o.last=l,n===Ot?l(o,function(u){return o.add(null,u)}):n?o[n]=l:l},t.ignore=function(n){var r=St;St=null,n(this),St=r},t.getTweens=function(){var n=[];return this.data.forEach(function(r){return r instanceof i?n.push.apply(n,r.getTweens()):r instanceof Bt&&!(r.parent&&r.parent.data==="nested")&&n.push(r)}),n},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(n,r){var s=this;if(n?function(){for(var l=s.getTweens(),u=s.data.length,c;u--;)c=s.data[u],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(f){return l.splice(l.indexOf(f),1)}));for(l.map(function(f){return{g:f._dur||f._delay||f._sat&&!f._sat.vars.immediateRender?f.globalTime(0):-1/0,t:f}}).sort(function(f,_){return _.g-f.g||-1/0}).forEach(function(f){return f.t.revert(n)}),u=s.data.length;u--;)c=s.data[u],c instanceof de?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Bt)&&c.revert&&c.revert(n);s._r.forEach(function(f){return f(n,s)}),s.isReverted=!0}():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),r)for(var o=rr.length;o--;)rr[o].id===this.id&&rr.splice(o,1)},t.revert=function(n){this.kill(n||{})},i}(),Dv=function(){function i(e){this.contexts=[],this.scope=e,St&&St.data.push(this)}var t=i.prototype;return t.add=function(n,r,s){an(n)||(n={matches:n});var o=new xd(0,s||this.scope),l=o.conditions={},u,c,f;St&&!o.selector&&(o.selector=St.selector),this.contexts.push(o),r=o.add("onMatch",r),o.queries=n;for(c in n)c==="all"?f=1:(u=Xe.matchMedia(n[c]),u&&(rr.indexOf(o)<0&&rr.push(o),(l[c]=u.matches)&&(f=1),u.addListener?u.addListener(xa):u.addEventListener("change",xa)));return f&&r(o,function(_){return o.add(null,_)}),this},t.revert=function(n){this.kill(n||{})},t.kill=function(n){this.contexts.forEach(function(r){return r.kill(n,!0)})},i}(),Ys={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(function(r){return yd(r)})},timeline:function(t){return new de(t)},getTweensOf:function(t,e){return Vt.getTweensOf(t,e)},getProperty:function(t,e,n,r){Wt(t)&&(t=$e(t)[0]);var s=tr(t||{}).get,o=n?sd:id;return n==="native"&&(n=""),t&&(e?o((Pe[e]&&Pe[e].get||s)(t,e,n,r)):function(l,u,c){return o((Pe[l]&&Pe[l].get||s)(t,l,u,c))})},quickSetter:function(t,e,n){if(t=$e(t),t.length>1){var r=t.map(function(f){return we.quickSetter(f,e,n)}),s=r.length;return function(f){for(var _=s;_--;)r[_](f)}}t=t[0]||{};var o=Pe[e],l=tr(t),u=l.harness&&(l.harness.aliases||{})[e]||e,c=o?function(f){var _=new o;br._pt=0,_.init(t,n?f+n:f,br,0,[t]),_.render(1,_),br._pt&&jl(1,br)}:l.set(t,u);return o?c:function(f){return c(t,u,n?f+n:f,l,1)}},quickTo:function(t,e,n){var r,s=we.to(t,lr((r={},r[e]="+=0.1",r.paused=!0,r),n||{})),o=function(u,c,f){return s.resetTo(e,u,c,f)};return o.tween=s,o},isTweening:function(t){return Vt.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=nr(t.ease,Br.ease)),Hc(Br,t||{})},config:function(t){return Hc(xe,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,r=t.plugins,s=t.defaults,o=t.extendTimeline;(r||"").split(",").forEach(function(l){return l&&!Pe[l]&&!Ne[l]&&$i(e+" effect requires "+l+" plugin.")}),Go[e]=function(l,u,c){return n($e(l),Ue(u||{},s),c)},o&&(de.prototype[e]=function(l,u,c){return this.add(Go[e](l,an(u)?u:(c=u)&&{},this),c)})},registerEase:function(t,e){at[t]=nr(e)},parseEase:function(t,e){return arguments.length?nr(t,e):at},getById:function(t){return Vt.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var n=new de(t),r,s;for(n.smoothChildTiming=ye(t.smoothChildTiming),Vt.remove(n),n._dp=0,n._time=n._tTime=Vt._time,r=Vt._first;r;)s=r._next,(e||!(!r._dur&&r instanceof Bt&&r.vars.onComplete===r._targets[0]))&&Je(n,r,r._start-r._delay),r=s;return Je(Vt,n,0),n},context:function(t,e){return t?new xd(t,e):St},matchMedia:function(t){return new Dv(t)},matchMediaRefresh:function(){return rr.forEach(function(t){var e=t.conditions,n,r;for(r in e)e[r]&&(e[r]=!1,n=1);n&&t.revert()})||xa()},addEventListener:function(t,e){var n=Vs[t]||(Vs[t]=[]);~n.indexOf(e)||n.push(e)},removeEventListener:function(t,e){var n=Vs[t],r=n&&n.indexOf(e);r>=0&&n.splice(r,1)},utils:{wrap:lv,wrapYoyo:uv,distribute:fd,random:_d,snap:dd,normalize:av,getUnit:le,clamp:rv,splitColor:vd,toArray:$e,selector:Da,mapRange:md,pipe:sv,unitize:ov,interpolate:cv,shuffle:hd},install:Zf,effects:Go,ticker:Se,updateRoot:de.updateRoot,plugins:Pe,globalTimeline:Vt,core:{PropTween:Te,globals:td,Tween:Bt,Timeline:de,Animation:zi,getCache:tr,_removeLinkedListItem:po,reverting:function(){return ue},context:function(t){return t&&St&&(St.data.push(t),t._ctx=St),St},suppressOverwrites:function(t){return Dl=t}}};ve("to,from,fromTo,delayedCall,set,killTweensOf",function(i){return Ys[i]=Bt[i]});Se.add(de.updateRoot);br=Ys.to({},{duration:0});var Vv=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},kv=function(t,e){var n=t._targets,r,s,o;for(r in e)for(s=n.length;s--;)o=t._ptLookup[s][r],o&&(o=o.d)&&(o._pt&&(o=Vv(o,r)),o&&o.modifier&&o.modifier(e[r],t,n[s],r))},Xo=function(t,e){return{name:t,rawVars:1,init:function(r,s,o){o._onInit=function(l){var u,c;if(Wt(s)&&(u={},ve(s,function(f){return u[f]=1}),s=u),e){u={};for(c in s)u[c]=e(s[c]);s=u}kv(l,s)}}}},we=Ys.registerPlugin({name:"attr",init:function(t,e,n,r,s){var o,l,u;this.tween=n;for(o in e)u=t.getAttribute(o)||"",l=this.add(t,"setAttribute",(u||0)+"",e[o],r,s,0,0,o),l.op=o,l.b=u,this._props.push(o)},render:function(t,e){for(var n=e._pt;n;)ue?n.set(n.t,n.p,n.b,n):n.r(t,n.d),n=n._next}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n],0,0,0,0,0,1)}},Xo("roundProps",Va),Xo("modifiers"),Xo("snap",dd))||Ys;Bt.version=de.version=we.version="3.12.5";Jf=1;kl()&&qr();at.Power0;at.Power1;at.Power2;at.Power3;at.Power4;at.Linear;at.Quad;at.Cubic;at.Quart;at.Quint;at.Strong;at.Elastic;at.Back;at.SteppedEase;at.Bounce;at.Sine;at.Expo;at.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Zc,Rn,Cr,zl,Jn,th,ql,xv=function(){return typeof window<"u"},vn={},Xn=180/Math.PI,Dr=Math.PI/180,Tr=Math.atan2,eh=1e8,Gl=/([A-Z])/g,Nv=/(left|right|width|margin|padding|x)/i,Ov=/[\s,\(]\S/,tn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Na=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},Mv=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},Fv=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},Lv=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},Nd=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},Od=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},$v=function(t,e,n){return t.style[e]=n},Uv=function(t,e,n){return t.style.setProperty(e,n)},Bv=function(t,e,n){return t._gsap[e]=n},jv=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},zv=function(t,e,n,r,s){var o=t._gsap;o.scaleX=o.scaleY=n,o.renderTransform(s,o)},qv=function(t,e,n,r,s){var o=t._gsap;o[e]=n,o.renderTransform(s,o)},kt="transform",Ee=kt+"Origin",Gv=function i(t,e){var n=this,r=this.target,s=r.style,o=r._gsap;if(t in vn&&s){if(this.tfm=this.tfm||{},t!=="transform")t=tn[t]||t,~t.indexOf(",")?t.split(",").forEach(function(l){return n.tfm[l]=_n(r,l)}):this.tfm[t]=o.x?o[t]:_n(r,t),t===Ee&&(this.tfm.zOrigin=o.zOrigin);else return tn.transform.split(",").forEach(function(l){return i.call(n,l,e)});if(this.props.indexOf(kt)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Ee,e,"")),t=kt}(s||e)&&this.props.push(t,e,s[t])},Md=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},Kv=function(){var t=this.props,e=this.target,n=e.style,r=e._gsap,s,o;for(s=0;s<t.length;s+=3)t[s+1]?e[t[s]]=t[s+2]:t[s+2]?n[t[s]]=t[s+2]:n.removeProperty(t[s].substr(0,2)==="--"?t[s]:t[s].replace(Gl,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),s=ql(),(!s||!s.isStart)&&!n[kt]&&(Md(n),r.zOrigin&&n[Ee]&&(n[Ee]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},Fd=function(t,e){var n={target:t,props:[],revert:Kv,save:Gv};return t._gsap||we.core.getCache(t),e&&e.split(",").forEach(function(r){return n.save(r)}),n},Ld,Oa=function(t,e){var n=Rn.createElementNS?Rn.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Rn.createElement(t);return n&&n.style?n:Rn.createElement(t)},rn=function i(t,e,n){var r=getComputedStyle(t);return r[e]||r.getPropertyValue(e.replace(Gl,"-$1").toLowerCase())||r.getPropertyValue(e)||!n&&i(t,Gr(e)||e,1)||""},nh="O,Moz,ms,Ms,Webkit".split(","),Gr=function(t,e,n){var r=e||Jn,s=r.style,o=5;if(t in s&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);o--&&!(nh[o]+t in s););return o<0?null:(o===3?"ms":o>=0?nh[o]:"")+t},Ma=function(){xv()&&window.document&&(Zc=window,Rn=Zc.document,Cr=Rn.documentElement,Jn=Oa("div")||{style:{}},Oa("div"),kt=Gr(kt),Ee=kt+"Origin",Jn.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Ld=!!Gr("perspective"),ql=we.core.reverting,zl=1)},Yo=function i(t){var e=Oa("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,s=this.style.cssText,o;if(Cr.appendChild(e),e.appendChild(this),this.style.display="block",t)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=i}catch{}else this._gsapBBox&&(o=this._gsapBBox());return n&&(r?n.insertBefore(this,r):n.appendChild(this)),Cr.removeChild(e),this.style.cssText=s,o},rh=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},$d=function(t){var e;try{e=t.getBBox()}catch{e=Yo.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===Yo||(e=Yo.call(t,!0)),e&&!e.width&&!e.x&&!e.y?{x:+rh(t,["x","cx","x1"])||0,y:+rh(t,["y","cy","y1"])||0,width:0,height:0}:e},Ud=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&$d(t))},ur=function(t,e){if(e){var n=t.style,r;e in vn&&e!==Ee&&(e=kt),n.removeProperty?(r=e.substr(0,2),(r==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),n.removeProperty(r==="--"?e:e.replace(Gl,"-$1").toLowerCase())):n.removeAttribute(e)}},Pn=function(t,e,n,r,s,o){var l=new Te(t._pt,e,n,0,1,o?Od:Nd);return t._pt=l,l.b=r,l.e=s,t._props.push(n),l},ih={deg:1,rad:1,turn:1},Hv={grid:1,flex:1},Un=function i(t,e,n,r){var s=parseFloat(n)||0,o=(n+"").trim().substr((s+"").length)||"px",l=Jn.style,u=Nv.test(e),c=t.tagName.toLowerCase()==="svg",f=(c?"client":"offset")+(u?"Width":"Height"),_=100,p=r==="px",y=r==="%",E,m,I,C;if(r===o||!s||ih[r]||ih[o])return s;if(o!=="px"&&!p&&(s=i(t,e,n,"px")),C=t.getCTM&&Ud(t),(y||o==="%")&&(vn[e]||~e.indexOf("adius")))return E=C?t.getBBox()[u?"width":"height"]:t[f],Ft(y?s/E*_:s/100*E);if(l[u?"width":"height"]=_+(p?o:r),m=~e.indexOf("adius")||r==="em"&&t.appendChild&&!c?t:t.parentNode,C&&(m=(t.ownerSVGElement||{}).parentNode),(!m||m===Rn||!m.appendChild)&&(m=Rn.body),I=m._gsap,I&&y&&I.width&&u&&I.time===Se.time&&!I.uncache)return Ft(s/I.width*_);if(y&&(e==="height"||e==="width")){var S=t.style[e];t.style[e]=_+r,E=t[f],S?t.style[e]=S:ur(t,e)}else(y||o==="%")&&!Hv[rn(m,"display")]&&(l.position=rn(t,"position")),m===t&&(l.position="static"),m.appendChild(Jn),E=Jn[f],m.removeChild(Jn),l.position="absolute";return u&&y&&(I=tr(m),I.time=Se.time,I.width=m[f]),Ft(p?E*s/_:E&&s?_/E*s:0)},_n=function(t,e,n,r){var s;return zl||Ma(),e in tn&&e!=="transform"&&(e=tn[e],~e.indexOf(",")&&(e=e.split(",")[0])),vn[e]&&e!=="transform"?(s=Gi(t,r),s=e!=="transformOrigin"?s[e]:s.svg?s.origin:Zs(rn(t,Ee))+" "+s.zOrigin+"px"):(s=t.style[e],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=Js[e]&&Js[e](t,e,n)||rn(t,e)||nd(t,e)||(e==="opacity"?1:0))),n&&!~(s+"").trim().indexOf(" ")?Un(t,e,s,n)+n:s},Wv=function(t,e,n,r){if(!n||n==="none"){var s=Gr(e,t,1),o=s&&rn(t,s,1);o&&o!==n?(e=s,n=o):e==="borderColor"&&(n=rn(t,"borderTopColor"))}var l=new Te(this._pt,t.style,e,0,1,Vd),u=0,c=0,f,_,p,y,E,m,I,C,S,k,D,x;if(l.b=n,l.e=r,n+="",r+="",r==="auto"&&(m=t.style[e],t.style[e]=r,r=rn(t,e)||r,m?t.style[e]=m:ur(t,e)),f=[n,r],Ed(f),n=f[0],r=f[1],p=n.match(Ar)||[],x=r.match(Ar)||[],x.length){for(;_=Ar.exec(r);)I=_[0],S=r.substring(u,_.index),E?E=(E+1)%5:(S.substr(-5)==="rgba("||S.substr(-5)==="hsla(")&&(E=1),I!==(m=p[c++]||"")&&(y=parseFloat(m)||0,D=m.substr((y+"").length),I.charAt(1)==="="&&(I=Sr(y,I)+D),C=parseFloat(I),k=I.substr((C+"").length),u=Ar.lastIndex-k.length,k||(k=k||xe.units[e]||D,u===r.length&&(r+=k,l.e+=k)),D!==k&&(y=Un(t,e,m,k)||0),l._pt={_next:l._pt,p:S||c===1?S:",",s:y,c:C-y,m:E&&E<4||e==="zIndex"?Math.round:0});l.c=u<r.length?r.substring(u,r.length):""}else l.r=e==="display"&&r==="none"?Od:Nd;return Xf.test(r)&&(l.e=0),this._pt=l,l},sh={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Qv=function(t){var e=t.split(" "),n=e[0],r=e[1]||"50%";return(n==="top"||n==="bottom"||r==="left"||r==="right")&&(t=n,n=r,r=t),e[0]=sh[n]||n,e[1]=sh[r]||r,e.join(" ")},Xv=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n=e.t,r=n.style,s=e.u,o=n._gsap,l,u,c;if(s==="all"||s===!0)r.cssText="",u=1;else for(s=s.split(","),c=s.length;--c>-1;)l=s[c],vn[l]&&(u=1,l=l==="transformOrigin"?Ee:kt),ur(n,l);u&&(ur(n,kt),o&&(o.svg&&n.removeAttribute("transform"),Gi(n,1),o.uncache=1,Md(r)))}},Js={clearProps:function(t,e,n,r,s){if(s.data!=="isFromStart"){var o=t._pt=new Te(t._pt,e,n,0,0,Xv);return o.u=r,o.pr=-10,o.tween=s,t._props.push(n),1}}},qi=[1,0,0,1,0,0],Bd={},jd=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},oh=function(t){var e=rn(t,kt);return jd(e)?qi:e.substr(7).match(Qf).map(Ft)},Kl=function(t,e){var n=t._gsap||tr(t),r=t.style,s=oh(t),o,l,u,c;return n.svg&&t.getAttribute("transform")?(u=t.transform.baseVal.consolidate().matrix,s=[u.a,u.b,u.c,u.d,u.e,u.f],s.join(",")==="1,0,0,1,0,0"?qi:s):(s===qi&&!t.offsetParent&&t!==Cr&&!n.svg&&(u=r.display,r.display="block",o=t.parentNode,(!o||!t.offsetParent)&&(c=1,l=t.nextElementSibling,Cr.appendChild(t)),s=oh(t),u?r.display=u:ur(t,"display"),c&&(l?o.insertBefore(t,l):o?o.appendChild(t):Cr.removeChild(t))),e&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},Fa=function(t,e,n,r,s,o){var l=t._gsap,u=s||Kl(t,!0),c=l.xOrigin||0,f=l.yOrigin||0,_=l.xOffset||0,p=l.yOffset||0,y=u[0],E=u[1],m=u[2],I=u[3],C=u[4],S=u[5],k=e.split(" "),D=parseFloat(k[0])||0,x=parseFloat(k[1])||0,O,w,g,v;n?u!==qi&&(w=y*I-E*m)&&(g=D*(I/w)+x*(-m/w)+(m*S-I*C)/w,v=D*(-E/w)+x*(y/w)-(y*S-E*C)/w,D=g,x=v):(O=$d(t),D=O.x+(~k[0].indexOf("%")?D/100*O.width:D),x=O.y+(~(k[1]||k[0]).indexOf("%")?x/100*O.height:x)),r||r!==!1&&l.smooth?(C=D-c,S=x-f,l.xOffset=_+(C*y+S*m)-C,l.yOffset=p+(C*E+S*I)-S):l.xOffset=l.yOffset=0,l.xOrigin=D,l.yOrigin=x,l.smooth=!!r,l.origin=e,l.originIsAbsolute=!!n,t.style[Ee]="0px 0px",o&&(Pn(o,l,"xOrigin",c,D),Pn(o,l,"yOrigin",f,x),Pn(o,l,"xOffset",_,l.xOffset),Pn(o,l,"yOffset",p,l.yOffset)),t.setAttribute("data-svg-origin",D+" "+x)},Gi=function(t,e){var n=t._gsap||new bd(t);if("x"in n&&!e&&!n.uncache)return n;var r=t.style,s=n.scaleX<0,o="px",l="deg",u=getComputedStyle(t),c=rn(t,Ee)||"0",f,_,p,y,E,m,I,C,S,k,D,x,O,w,g,v,b,R,P,A,nt,dt,mt,lt,Ct,Ie,Oe,Be,gt,At,te,Qt;return f=_=p=m=I=C=S=k=D=0,y=E=1,n.svg=!!(t.getCTM&&Ud(t)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(r[kt]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[kt]!=="none"?u[kt]:"")),r.scale=r.rotate=r.translate="none"),w=Kl(t,n.svg),n.svg&&(n.uncache?(Ct=t.getBBox(),c=n.xOrigin-Ct.x+"px "+(n.yOrigin-Ct.y)+"px",lt=""):lt=!e&&t.getAttribute("data-svg-origin"),Fa(t,lt||c,!!lt||n.originIsAbsolute,n.smooth!==!1,w)),x=n.xOrigin||0,O=n.yOrigin||0,w!==qi&&(R=w[0],P=w[1],A=w[2],nt=w[3],f=dt=w[4],_=mt=w[5],w.length===6?(y=Math.sqrt(R*R+P*P),E=Math.sqrt(nt*nt+A*A),m=R||P?Tr(P,R)*Xn:0,S=A||nt?Tr(A,nt)*Xn+m:0,S&&(E*=Math.abs(Math.cos(S*Dr))),n.svg&&(f-=x-(x*R+O*A),_-=O-(x*P+O*nt))):(Qt=w[6],At=w[7],Oe=w[8],Be=w[9],gt=w[10],te=w[11],f=w[12],_=w[13],p=w[14],g=Tr(Qt,gt),I=g*Xn,g&&(v=Math.cos(-g),b=Math.sin(-g),lt=dt*v+Oe*b,Ct=mt*v+Be*b,Ie=Qt*v+gt*b,Oe=dt*-b+Oe*v,Be=mt*-b+Be*v,gt=Qt*-b+gt*v,te=At*-b+te*v,dt=lt,mt=Ct,Qt=Ie),g=Tr(-A,gt),C=g*Xn,g&&(v=Math.cos(-g),b=Math.sin(-g),lt=R*v-Oe*b,Ct=P*v-Be*b,Ie=A*v-gt*b,te=nt*b+te*v,R=lt,P=Ct,A=Ie),g=Tr(P,R),m=g*Xn,g&&(v=Math.cos(g),b=Math.sin(g),lt=R*v+P*b,Ct=dt*v+mt*b,P=P*v-R*b,mt=mt*v-dt*b,R=lt,dt=Ct),I&&Math.abs(I)+Math.abs(m)>359.9&&(I=m=0,C=180-C),y=Ft(Math.sqrt(R*R+P*P+A*A)),E=Ft(Math.sqrt(mt*mt+Qt*Qt)),g=Tr(dt,mt),S=Math.abs(g)>2e-4?g*Xn:0,D=te?1/(te<0?-te:te):0),n.svg&&(lt=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!jd(rn(t,kt)),lt&&t.setAttribute("transform",lt))),Math.abs(S)>90&&Math.abs(S)<270&&(s?(y*=-1,S+=m<=0?180:-180,m+=m<=0?180:-180):(E*=-1,S+=S<=0?180:-180)),e=e||n.uncache,n.x=f-((n.xPercent=f&&(!e&&n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-f)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+o,n.y=_-((n.yPercent=_&&(!e&&n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-_)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+o,n.z=p+o,n.scaleX=Ft(y),n.scaleY=Ft(E),n.rotation=Ft(m)+l,n.rotationX=Ft(I)+l,n.rotationY=Ft(C)+l,n.skewX=S+l,n.skewY=k+l,n.transformPerspective=D+o,(n.zOrigin=parseFloat(c.split(" ")[2])||!e&&n.zOrigin||0)&&(r[Ee]=Zs(c)),n.xOffset=n.yOffset=0,n.force3D=xe.force3D,n.renderTransform=n.svg?Jv:Ld?zd:Yv,n.uncache=0,n},Zs=function(t){return(t=t.split(" "))[0]+" "+t[1]},Jo=function(t,e,n){var r=le(e);return Ft(parseFloat(e)+parseFloat(Un(t,"x",n+"px",r)))+r},Yv=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,zd(t,e)},Hn="0deg",_i="0px",Wn=") ",zd=function(t,e){var n=e||this,r=n.xPercent,s=n.yPercent,o=n.x,l=n.y,u=n.z,c=n.rotation,f=n.rotationY,_=n.rotationX,p=n.skewX,y=n.skewY,E=n.scaleX,m=n.scaleY,I=n.transformPerspective,C=n.force3D,S=n.target,k=n.zOrigin,D="",x=C==="auto"&&t&&t!==1||C===!0;if(k&&(_!==Hn||f!==Hn)){var O=parseFloat(f)*Dr,w=Math.sin(O),g=Math.cos(O),v;O=parseFloat(_)*Dr,v=Math.cos(O),o=Jo(S,o,w*v*-k),l=Jo(S,l,-Math.sin(O)*-k),u=Jo(S,u,g*v*-k+k)}I!==_i&&(D+="perspective("+I+Wn),(r||s)&&(D+="translate("+r+"%, "+s+"%) "),(x||o!==_i||l!==_i||u!==_i)&&(D+=u!==_i||x?"translate3d("+o+", "+l+", "+u+") ":"translate("+o+", "+l+Wn),c!==Hn&&(D+="rotate("+c+Wn),f!==Hn&&(D+="rotateY("+f+Wn),_!==Hn&&(D+="rotateX("+_+Wn),(p!==Hn||y!==Hn)&&(D+="skew("+p+", "+y+Wn),(E!==1||m!==1)&&(D+="scale("+E+", "+m+Wn),S.style[kt]=D||"translate(0, 0)"},Jv=function(t,e){var n=e||this,r=n.xPercent,s=n.yPercent,o=n.x,l=n.y,u=n.rotation,c=n.skewX,f=n.skewY,_=n.scaleX,p=n.scaleY,y=n.target,E=n.xOrigin,m=n.yOrigin,I=n.xOffset,C=n.yOffset,S=n.forceCSS,k=parseFloat(o),D=parseFloat(l),x,O,w,g,v;u=parseFloat(u),c=parseFloat(c),f=parseFloat(f),f&&(f=parseFloat(f),c+=f,u+=f),u||c?(u*=Dr,c*=Dr,x=Math.cos(u)*_,O=Math.sin(u)*_,w=Math.sin(u-c)*-p,g=Math.cos(u-c)*p,c&&(f*=Dr,v=Math.tan(c-f),v=Math.sqrt(1+v*v),w*=v,g*=v,f&&(v=Math.tan(f),v=Math.sqrt(1+v*v),x*=v,O*=v)),x=Ft(x),O=Ft(O),w=Ft(w),g=Ft(g)):(x=_,g=p,O=w=0),(k&&!~(o+"").indexOf("px")||D&&!~(l+"").indexOf("px"))&&(k=Un(y,"x",o,"px"),D=Un(y,"y",l,"px")),(E||m||I||C)&&(k=Ft(k+E-(E*x+m*w)+I),D=Ft(D+m-(E*O+m*g)+C)),(r||s)&&(v=y.getBBox(),k=Ft(k+r/100*v.width),D=Ft(D+s/100*v.height)),v="matrix("+x+","+O+","+w+","+g+","+k+","+D+")",y.setAttribute("transform",v),S&&(y.style[kt]=v)},Zv=function(t,e,n,r,s){var o=360,l=Wt(s),u=parseFloat(s)*(l&&~s.indexOf("rad")?Xn:1),c=u-r,f=r+c+"deg",_,p;return l&&(_=s.split("_")[1],_==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),_==="cw"&&c<0?c=(c+o*eh)%o-~~(c/o)*o:_==="ccw"&&c>0&&(c=(c-o*eh)%o-~~(c/o)*o)),t._pt=p=new Te(t._pt,e,n,r,c,Mv),p.e=f,p.u="deg",t._props.push(n),p},ah=function(t,e){for(var n in e)t[n]=e[n];return t},tT=function(t,e,n){var r=ah({},n._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=n.style,l,u,c,f,_,p,y,E;r.svg?(c=n.getAttribute("transform"),n.setAttribute("transform",""),o[kt]=e,l=Gi(n,1),ur(n,kt),n.setAttribute("transform",c)):(c=getComputedStyle(n)[kt],o[kt]=e,l=Gi(n,1),o[kt]=c);for(u in vn)c=r[u],f=l[u],c!==f&&s.indexOf(u)<0&&(y=le(c),E=le(f),_=y!==E?Un(n,u,c,E):parseFloat(c),p=parseFloat(f),t._pt=new Te(t._pt,l,u,_,p-_,Na),t._pt.u=E||0,t._props.push(u));ah(l,r)};ve("padding,margin,Width,Radius",function(i,t){var e="Top",n="Right",r="Bottom",s="Left",o=(t<3?[e,n,r,s]:[e+s,e+n,r+n,r+s]).map(function(l){return t<2?i+l:"border"+l+i});Js[t>1?"border"+i:i]=function(l,u,c,f,_){var p,y;if(arguments.length<4)return p=o.map(function(E){return _n(l,E,c)}),y=p.join(" "),y.split(p[0]).length===5?p[0]:y;p=(f+"").split(" "),y={},o.forEach(function(E,m){return y[E]=p[m]=p[m]||p[(m-1)/2|0]}),l.init(u,y,_)}});var qd={name:"css",register:Ma,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,r,s){var o=this._props,l=t.style,u=n.vars.startAt,c,f,_,p,y,E,m,I,C,S,k,D,x,O,w,g;zl||Ma(),this.styles=this.styles||Fd(t),g=this.styles.props,this.tween=n;for(m in e)if(m!=="autoRound"&&(f=e[m],!(Pe[m]&&Rd(m,e,n,r,t,s)))){if(y=typeof f,E=Js[m],y==="function"&&(f=f.call(n,r,t,s),y=typeof f),y==="string"&&~f.indexOf("random(")&&(f=Bi(f)),E)E(this,t,m,f,n)&&(w=1);else if(m.substr(0,2)==="--")c=(getComputedStyle(t).getPropertyValue(m)+"").trim(),f+="",kn.lastIndex=0,kn.test(c)||(I=le(c),C=le(f)),C?I!==C&&(c=Un(t,m,c,C)+C):I&&(f+=I),this.add(l,"setProperty",c,f,r,s,0,0,m),o.push(m),g.push(m,0,l[m]);else if(y!=="undefined"){if(u&&m in u?(c=typeof u[m]=="function"?u[m].call(n,r,t,s):u[m],Wt(c)&&~c.indexOf("random(")&&(c=Bi(c)),le(c+"")||c==="auto"||(c+=xe.units[m]||le(_n(t,m))||""),(c+"").charAt(1)==="="&&(c=_n(t,m))):c=_n(t,m),p=parseFloat(c),S=y==="string"&&f.charAt(1)==="="&&f.substr(0,2),S&&(f=f.substr(2)),_=parseFloat(f),m in tn&&(m==="autoAlpha"&&(p===1&&_n(t,"visibility")==="hidden"&&_&&(p=0),g.push("visibility",0,l.visibility),Pn(this,l,"visibility",p?"inherit":"hidden",_?"inherit":"hidden",!_)),m!=="scale"&&m!=="transform"&&(m=tn[m],~m.indexOf(",")&&(m=m.split(",")[0]))),k=m in vn,k){if(this.styles.save(m),D||(x=t._gsap,x.renderTransform&&!e.parseTransform||Gi(t,e.parseTransform),O=e.smoothOrigin!==!1&&x.smooth,D=this._pt=new Te(this._pt,l,kt,0,1,x.renderTransform,x,0,-1),D.dep=1),m==="scale")this._pt=new Te(this._pt,x,"scaleY",x.scaleY,(S?Sr(x.scaleY,S+_):_)-x.scaleY||0,Na),this._pt.u=0,o.push("scaleY",m),m+="X";else if(m==="transformOrigin"){g.push(Ee,0,l[Ee]),f=Qv(f),x.svg?Fa(t,f,0,O,0,this):(C=parseFloat(f.split(" ")[2])||0,C!==x.zOrigin&&Pn(this,x,"zOrigin",x.zOrigin,C),Pn(this,l,m,Zs(c),Zs(f)));continue}else if(m==="svgOrigin"){Fa(t,f,1,O,0,this);continue}else if(m in Bd){Zv(this,x,m,p,S?Sr(p,S+f):f);continue}else if(m==="smoothOrigin"){Pn(this,x,"smooth",x.smooth,f);continue}else if(m==="force3D"){x[m]=f;continue}else if(m==="transform"){tT(this,f,t);continue}}else m in l||(m=Gr(m)||m);if(k||(_||_===0)&&(p||p===0)&&!Ov.test(f)&&m in l)I=(c+"").substr((p+"").length),_||(_=0),C=le(f)||(m in xe.units?xe.units[m]:I),I!==C&&(p=Un(t,m,c,C)),this._pt=new Te(this._pt,k?x:l,m,p,(S?Sr(p,S+_):_)-p,!k&&(C==="px"||m==="zIndex")&&e.autoRound!==!1?Lv:Na),this._pt.u=C||0,I!==C&&C!=="%"&&(this._pt.b=c,this._pt.r=Fv);else if(m in l)Wv.call(this,t,m,c,S?S+f:f);else if(m in t)this.add(t,m,c||t[m],S?S+f:f,r,s);else if(m!=="parseTransform"){Nl(m,f);continue}k||(m in l?g.push(m,0,l[m]):g.push(m,1,c||t[m])),o.push(m)}}w&&kd(this)},render:function(t,e){if(e.tween._time||!ql())for(var n=e._pt;n;)n.r(t,n.d),n=n._next;else e.styles.revert()},get:_n,aliases:tn,getSetter:function(t,e,n){var r=tn[e];return r&&r.indexOf(",")<0&&(e=r),e in vn&&e!==Ee&&(t._gsap.x||_n(t,"x"))?n&&th===n?e==="scale"?jv:Bv:(th=n||{})&&(e==="scale"?zv:qv):t.style&&!Vl(t.style[e])?$v:~e.indexOf("-")?Uv:Bl(t,e)},core:{_removeProperty:ur,_getMatrix:Kl}};we.utils.checkPrefix=Gr;we.core.getStyleSaver=Fd;(function(i,t,e,n){var r=ve(i+","+t+","+e,function(s){vn[s]=1});ve(t,function(s){xe.units[s]="deg",Bd[s]=1}),tn[r[13]]=i+","+t,ve(n,function(s){var o=s.split(":");tn[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");ve("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(i){xe.units[i]="px"});we.registerPlugin(qd);var Gd=we.registerPlugin(qd)||we;Gd.core.Tween;function lh(i){let t,e="Geselecteerd Bestand:",n,r,s=i[0].name+"",o;return{c(){t=z("p"),t.textContent=e,n=J(),r=z("pre"),o=rt(s),this.h()},l(l){t=q(l,"P",{class:!0,"data-svelte-h":!0}),Nn(t)!=="svelte-zs65m6"&&(t.textContent=e),n=Z(l),r=q(l,"PRE",{class:!0});var u=Q(r);o=it(u,s),u.forEach(F),this.h()},h(){H(t,"class","font-bold text-center"),H(r,"class","text-center")},m(l,u){G(l,t,u),G(l,n,u),G(l,r,u),$(r,o)},p(l,u){u&1&&s!==(s=l[0].name+"")&&zt(o,s)},d(l){l&&(F(t),F(n),F(r))}}}function eT(i){let t;return{c(){t=rt("Upload")},l(e){t=it(e,"Upload")},m(e,n){G(e,t,n)},d(e){e&&F(t)}}}function nT(i){let t;return{c(){t=rt("Terug")},l(e){t=it(e,"Terug")},m(e,n){G(e,t,n)},d(e){e&&F(t)}}}function rT(i){let t,e,n,r="Selecteer een bestand",s,o,l,u,c,f,_,p,y=i[0]&&lh(i);return l=new ge({props:{class:"my-2",$$slots:{default:[eT]},$$scope:{ctx:i}}}),l.$on("click",i[3]),c=new ge({props:{theme:"red",class:"my-2",$$slots:{default:[nT]},$$scope:{ctx:i}}}),c.$on("click",i[5]),{c(){t=z("input"),e=J(),n=z("label"),n.textContent=r,s=J(),y&&y.c(),o=J(),vt(l.$$.fragment),u=J(),vt(c.$$.fragment),this.h()},l(E){t=q(E,"INPUT",{id:!0,class:!0,type:!0,accept:!0}),e=Z(E),n=q(E,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Nn(n)!=="svelte-1fxuazo"&&(n.textContent=r),s=Z(E),y&&y.l(E),o=Z(E),Tt(l.$$.fragment,E),u=Z(E),Tt(c.$$.fragment,E),this.h()},h(){H(t,"id","file-upload"),H(t,"class","hidden"),H(t,"type","file"),H(t,"accept","text/csv"),H(n,"for","file-upload"),H(n,"class","my-2 bg-blue-500 text-white px-5 rounded-md py-3 cursor-pointer")},m(E,m){G(E,t,m),i[4](t),G(E,e,m),G(E,n,m),G(E,s,m),y&&y.m(E,m),G(E,o,m),Et(l,E,m),G(E,u,m),Et(c,E,m),f=!0,_||(p=qa(t,"change",i[2]),_=!0)},p(E,m){E[0]?y?y.p(E,m):(y=lh(E),y.c(),y.m(o.parentNode,o)):y&&(y.d(1),y=null);const I={};m&2048&&(I.$$scope={dirty:m,ctx:E}),l.$set(I);const C={};m&2048&&(C.$$scope={dirty:m,ctx:E}),c.$set(C)},i(E){f||(X(l.$$.fragment,E),X(c.$$.fragment,E),f=!0)},o(E){et(l.$$.fragment,E),et(c.$$.fragment,E),f=!1},d(E){E&&(F(t),F(e),F(n),F(s),F(o),F(u)),i[4](null),y&&y.d(E),wt(l,E),wt(c,E),_=!1,p()}}}function iT(i){let t,e;return t=new Ki({props:{$$slots:{default:[rT]},$$scope:{ctx:i}}}),{c(){vt(t.$$.fragment)},l(n){Tt(t.$$.fragment,n)},m(n,r){Et(t,n,r),e=!0},p(n,[r]){const s={};r&2051&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(X(t.$$.fragment,n),e=!0)},o(n){et(t.$$.fragment,n),e=!1},d(n){wt(t,n)}}}function sT(i,t,e){let n=null,r,s=[],o=null,l=null;function u(E){var D,x;const m=E.target,I=(D=m.files)==null?void 0:D[0];if(!I)return;const C=(x=I.name.split(".").pop())==null?void 0:x.toLowerCase(),S=I.type;if(!["text/csv","application/vnd.ms-excel"].includes(S)||C!=="csv"){alert("Ongeldig of niet-ondersteund bestandstype. Upload een CSV-bestand."),m.value="";return}e(0,n=I)}function c(){if(!n){alert("Selecteer een bestand.");return}f(),alert("Upload successvol."),e(1,r.value="",r),e(0,n=null)}function f(){const E=new FileReader;E.onload=function(m){var I;try{const S=((I=m.target)==null?void 0:I.result).split("\r").filter(O=>O.trim()!=="");if(S.length<2){alert("CSV bevat geen data.");return}const k=S[0].split(";"),D=k.indexOf("naam"),x=k.indexOf("maximaal");if(D===-1||x===-1){alert("CSV-bestand bevat niet de vereiste headers.");return}s=[],o=null,l=null;for(let O=1;O<S.length;O++){const w=S[O].split(";").map(g=>g.trim().replace("/r",""));if(w[D])if(w[D].includes("budget"))o={maximaal:w[x]};else if(w[D].includes("doel"))l={maximaal:w[x]};else{const g={};for(let v=0;v<k.length;v++)g[k[v]]=w[v];s.push(g)}}}catch(C){alert("Er is een fout opgetreden tijdens het verwerken van het bestand."),console.error(C)}},E.onerror=function(){alert("Er is een fout opgetreden tijdens het lezen van het bestand.")},E.onloadend=function(){_()},n&&E.readAsText(n)}const _=async()=>{try{const E=s.map(k=>k.id),m=await Ks($r(Ye,"maatregelen")),I=await Ks($r(Ye,"doelen")),C=a0(Ye);m.docs.forEach(k=>{E.includes(k.id)||C.delete(k.ref)}),s.forEach(k=>{const D=Ta(Ye,"maatregelen",k.id);C.set(D,k,{merge:!0})});const S=Ta(Ye,"doelen","taalgroeiers");o&&C.set(S,{budget:o.maximaal},{merge:!0}),l&&C.set(S,{doel:l.maximaal},{merge:!0}),await C.commit(),console.log("Firestore updated successfully.")}catch(E){alert("Er is een fout opgetreden bij het opslaan van het bestand in Firestore."),console.error(E)}};function p(E){ja[E?"unshift":"push"](()=>{r=E,e(1,r)})}return[n,r,u,c,p,()=>ze.set(0)]}class oT extends ln{constructor(t){super(),un(this,t,sT,iT,Ge,{})}}function aT(i){let t,e,n,r,s,o,l,u,c,f,_,p,y,E,m,I,C,S,k;return n=new T0({}),o=new U0({}),c=new V0({}),p=new b0({}),m=new N_({}),S=new oT({}),{c(){t=z("div"),e=z("div"),vt(n.$$.fragment),r=J(),s=z("div"),vt(o.$$.fragment),l=J(),u=z("div"),vt(c.$$.fragment),f=J(),_=z("div"),vt(p.$$.fragment),y=J(),E=z("div"),vt(m.$$.fragment),I=J(),C=z("div"),vt(S.$$.fragment),this.h()},l(D){t=q(D,"DIV",{class:!0});var x=Q(t);e=q(x,"DIV",{class:!0});var O=Q(e);Tt(n.$$.fragment,O),O.forEach(F),r=Z(x),s=q(x,"DIV",{class:!0});var w=Q(s);Tt(o.$$.fragment,w),w.forEach(F),l=Z(x),u=q(x,"DIV",{class:!0});var g=Q(u);Tt(c.$$.fragment,g),g.forEach(F),f=Z(x),_=q(x,"DIV",{class:!0});var v=Q(_);Tt(p.$$.fragment,v),v.forEach(F),y=Z(x),E=q(x,"DIV",{class:!0});var b=Q(E);Tt(m.$$.fragment,b),b.forEach(F),I=Z(x),C=q(x,"DIV",{class:!0});var R=Q(C);Tt(S.$$.fragment,R),R.forEach(F),x.forEach(F),this.h()},h(){H(e,"class","h-screen flex justify-center items-center w-screen"),H(s,"class","h-screen flex justify-center items-center w-screen"),H(u,"class","h-screen flex justify-center items-center w-screen"),H(_,"class","h-screen flex justify-center items-center w-screen"),H(E,"class","h-screen flex justify-center items-center w-screen"),H(C,"class","h-screen flex justify-center items-center w-screen"),H(t,"class","module-page flex svelte-atttuc")},m(D,x){G(D,t,x),$(t,e),Et(n,e,null),$(t,r),$(t,s),Et(o,s,null),$(t,l),$(t,u),Et(c,u,null),$(t,f),$(t,_),Et(p,_,null),$(t,y),$(t,E),Et(m,E,null),$(t,I),$(t,C),Et(S,C,null),i[2](t),k=!0},p:v_,i(D){k||(X(n.$$.fragment,D),X(o.$$.fragment,D),X(c.$$.fragment,D),X(p.$$.fragment,D),X(m.$$.fragment,D),X(S.$$.fragment,D),k=!0)},o(D){et(n.$$.fragment,D),et(o.$$.fragment,D),et(c.$$.fragment,D),et(p.$$.fragment,D),et(m.$$.fragment,D),et(S.$$.fragment,D),k=!1},d(D){D&&F(t),wt(n),wt(o),wt(c),wt(p),wt(m),wt(S),i[2](null)}}}function lT(i,t,e){let n;Ze(i,ze,f=>e(1,n=f));const r=$r(Ye,"stakeholders");let s;const o=f=>{const _=-100/s.children.length*f;Gd.to(s,{xPercent:_,duration:1,ease:"power2.inOut"})},l=async()=>{try{const _=(await Ks(r)).docs.map(p=>({id:p.id,values:p.data().values,description:p.data().description}));kr.set(_)}catch(f){console.error("Error fetching document: ",f)}},u=()=>wa(r,f=>{const _=f.docs.map(p=>({id:p.id,values:p.data().values,description:p.data().description}));kr.set(_)},f=>{console.log(`Encountered error: ${f}`)});za(()=>{l(),u()});function c(f){ja[f?"unshift":"push"](()=>{s=f,e(0,s)})}return i.$$.update=()=>{i.$$.dirty&3&&s&&o(n)},[s,n,c]}class pT extends ln{constructor(t){super(),un(this,t,lT,aT,Ge,{})}}export{pT as component};
