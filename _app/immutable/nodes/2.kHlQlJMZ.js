import{s as Ne,a as Pa,u as Sa,g as Ca,b as Da,x as Ol,y as qo,z as p_,A as nh,e as Va,c as Ye,o as ka,n as m_}from"../chunks/scheduler.C82xti6L.js";import{S as Ge,i as Ke,e as G,c as K,a as Z,d as L,l as W,g as q,m as X,n as tt,o as mn,z as Ml,A as xa,v as At,w as bt,x as Rt,y as Pt,s as rt,t as ht,B as gn,f as it,b as ft,h as U,j as Qt,C as Na,r as ui,p as li}from"../chunks/index.DlGYwhUu.js";import{w as Ri}from"../chunks/index.LvUj3rKe.js";function _r(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function g_(i,t){const e={},n={},r={$$scope:1};let s=i.length;for(;s--;){const o=i[s],u=t[s];if(u){for(const l in o)l in u||(n[l]=1);for(const l in u)r[l]||(e[l]=u[l],r[l]=1);i[s]=u}else for(const l in o)r[l]=1}for(const o in n)o in e||(e[o]=void 0);return e}const pr=Ri([]),Oa=Ri(null),Be=Ri(0);function ci(i,t){return i*t.minimaal*t.effectPerWeek*t.rondesPerJaar}function ps(i,t){return ci(i,t)*t.kostenPerPersoonPerDrieMaanden}function ms(i,t){if(i===0)return 0;{const e=Number(t.minimaal)+(i-1)*(Number(t.maximaal)-Number(t.minimaal))/9;return Math.round(e)}}const Go=Ri([]);function y_(i){let t,e;const n=i[1].default,r=Pa(n,i,i[0],null);return{c(){t=G("div"),r&&r.c(),this.h()},l(s){t=K(s,"DIV",{class:!0});var o=Z(t);r&&r.l(o),o.forEach(L),this.h()},h(){W(t,"class","p-14 bg-white shadow-lg flex flex-col")},m(s,o){q(s,t,o),r&&r.m(t,null),e=!0},p(s,[o]){r&&r.p&&(!e||o&1)&&Sa(r,n,s,s[0],e?Da(n,s[0],o,null):Ca(s[0]),null)},i(s){e||(X(r,s),e=!0)},o(s){tt(r,s),e=!1},d(s){s&&L(t),r&&r.d(s)}}}function v_(i,t,e){let{$$slots:n={},$$scope:r}=t;return i.$$set=s=>{"$$scope"in s&&e(0,r=s.$$scope)},[r,n]}class Pi extends Ge{constructor(t){super(),Ke(this,t,v_,y_,Ne,{})}}function T_(i){return i.filter(Boolean).join(" ")}function bo(i){let t,e,n,r,s;const o=i[6].default,u=Pa(o,i,i[5],null);let l=[{class:e="button-base "+i[3]},{href:i[1]},{target:i[2]},{role:"button"},{tabindex:"0"},i[4]],c={};for(let f=0;f<l.length;f+=1)c=qo(c,l[f]);return{c(){t=G(i[1]?"a":"button"),u&&u.c(),this.h()},l(f){t=K(f,((i[1]?"a":"button")||"null").toUpperCase(),{class:!0,href:!0,target:!0,role:!0,tabindex:!0});var _=Z(t);u&&u.l(_),_.forEach(L),this.h()},h(){Ml(i[1]?"a":"button")(t,c)},m(f,_){q(f,t,_),u&&u.m(t,null),i[8](t),n=!0,r||(s=xa(t,"click",i[7]),r=!0)},p(f,_){u&&u.p&&(!n||_&32)&&Sa(u,o,f,f[5],n?Da(o,f[5],_,null):Ca(f[5]),null),Ml(f[1]?"a":"button")(t,c=g_(l,[(!n||_&8&&e!==(e="button-base "+f[3]))&&{class:e},(!n||_&2)&&{href:f[1]},(!n||_&4)&&{target:f[2]},{role:"button"},{tabindex:"0"},_&16&&f[4]]))},i(f){n||(X(u,f),n=!0)},o(f){tt(u,f),n=!1},d(f){f&&L(t),u&&u.d(f),i[8](null),r=!1,s()}}}function E_(i){let t=i[1]?"a":"button",e,n,r=(i[1]?"a":"button")&&bo(i);return{c(){r&&r.c(),e=mn()},l(s){r&&r.l(s),e=mn()},m(s,o){r&&r.m(s,o),q(s,e,o),n=!0},p(s,[o]){s[1],t?Ne(t,s[1]?"a":"button")?(r.d(1),r=bo(s),t=s[1]?"a":"button",r.c(),r.m(e.parentNode,e)):r.p(s,o):(r=bo(s),t=s[1]?"a":"button",r.c(),r.m(e.parentNode,e))},i(s){n||(X(r,s),n=!0)},o(s){tt(r,s),n=!1},d(s){s&&L(e),r&&r.d(s)}}}function w_(i,t,e){const n=["el","href","target","class"];let r=Ol(t,n),{$$slots:s={},$$scope:o}=t,{el:u=void 0}=t,{href:l=void 0}=t,{target:c=void 0}=t,{class:f=""}=t;function _(g){nh.call(this,i,g)}function m(g){Va[g?"unshift":"push"](()=>{u=g,e(0,u)})}return i.$$set=g=>{t=qo(qo({},t),p_(g)),e(4,r=Ol(t,n)),"el"in g&&e(0,u=g.el),"href"in g&&e(1,l=g.href),"target"in g&&e(2,c=g.target),"class"in g&&e(3,f=g.class),"$$scope"in g&&e(5,o=g.$$scope)},[u,l,c,f,r,o,s,_,m]}class I_ extends Ge{constructor(t){super(),Ke(this,t,w_,E_,Ne,{el:0,href:1,target:2,class:3})}}function A_(i){let t;const e=i[5].default,n=Pa(e,i,i[7],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),t=!0},p(r,s){n&&n.p&&(!t||s&128)&&Sa(n,e,r,r[7],t?Da(e,r[7],s,null):Ca(r[7]),null)},i(r){t||(X(n,r),t=!0)},o(r){tt(n,r),t=!1},d(r){n&&n.d(r)}}}function b_(i){let t,e;return t=new I_({props:{class:"button-main px-5 rounded-md py-3 "+i[2],href:i[0],target:i[1],$$slots:{default:[A_]},$$scope:{ctx:i}}}),t.$on("click",i[6]),{c(){At(t.$$.fragment)},l(n){bt(t.$$.fragment,n)},m(n,r){Rt(t,n,r),e=!0},p(n,[r]){const s={};r&4&&(s.class="button-main px-5 rounded-md py-3 "+n[2]),r&1&&(s.href=n[0]),r&2&&(s.target=n[1]),r&128&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(X(t.$$.fragment,n),e=!0)},o(n){tt(t.$$.fragment,n),e=!1},d(n){Pt(t,n)}}}function R_(i,t,e){let n,{$$slots:r={},$$scope:s}=t,{theme:o="blue"}=t,{href:u=void 0}=t,{target:l=void 0}=t,{class:c=""}=t;function f(_){nh.call(this,i,_)}return i.$$set=_=>{"theme"in _&&e(3,o=_.theme),"href"in _&&e(0,u=_.href),"target"in _&&e(1,l=_.target),"class"in _&&e(4,c=_.class),"$$scope"in _&&e(7,s=_.$$scope)},i.$$.update=()=>{i.$$.dirty&24&&e(2,n=T_([o==="blue"&&"bg-blue-500 text-white",o==="red"&&"bg-red-500 text-white",c]))},[u,l,n,o,c,r,f,s]}class Re extends Ge{constructor(t){super(),Ke(this,t,R_,b_,Ne,{theme:3,href:0,target:1,class:4})}}function Fl(i,t,e){const n=i.slice();return n[9]=t[e],n[11]=e,n}function Ll(i){let t,e,n=i[0][i[11]].naam.charAt(0).toUpperCase()+i[0][i[11]].naam.slice(1)+"",r,s,o=i[9].toFixed(2)+"",u;return{c(){t=G("div"),e=G("span"),r=ht(n),s=ht(" heeft een gemiddelde schaal van "),u=ht(o)},l(l){t=K(l,"DIV",{});var c=Z(t);e=K(c,"SPAN",{});var f=Z(e);r=ft(f,n),s=ft(f," heeft een gemiddelde schaal van "),u=ft(f,o),f.forEach(L),c.forEach(L)},m(l,c){q(l,t,c),U(t,e),U(e,r),U(e,s),U(e,u)},p(l,c){c&1&&n!==(n=l[0][l[11]].naam.charAt(0).toUpperCase()+l[0][l[11]].naam.slice(1)+"")&&Qt(r,n),c&2&&o!==(o=l[9].toFixed(2)+"")&&Qt(u,o)},d(l){l&&L(t)}}}function P_(i){let t;return{c(){t=ht("Terug")},l(e){t=ft(e,"Terug")},m(e,n){q(e,t,n)},d(e){e&&L(t)}}}function S_(i){let t,e="Resultaat",n,r,s,o,u,l,c,f,_,m=i[3].toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"",g,E,p,w,S,C,x,V,k,O=_r(i[1]),I=[];for(let y=0;y<O.length;y+=1)I[y]=Ll(Fl(i,O,y));return V=new Re({props:{theme:"red",$$slots:{default:[P_]},$$scope:{ctx:i}}}),V.$on("click",i[6]),{c(){t=G("div"),t.textContent=e,n=rt();for(let y=0;y<I.length;y+=1)I[y].c();r=rt(),s=G("div"),o=G("p"),u=ht("Geholpen mensen per jaar: "),l=ht(i[2]),c=rt(),f=G("p"),_=ht("Kosten per jaar: "),g=ht(m),E=rt(),p=G("p"),w=ht("Aantal vrijwilligers per jaar: "),S=ht(i[4]),C=rt(),x=G("div"),At(V.$$.fragment),this.h()},l(y){t=K(y,"DIV",{class:!0,"data-svelte-h":!0}),gn(t)!=="svelte-17bvcbp"&&(t.textContent=e),n=it(y);for(let et=0;et<I.length;et+=1)I[et].l(y);r=it(y),s=K(y,"DIV",{class:!0});var v=Z(s);o=K(v,"P",{});var b=Z(o);u=ft(b,"Geholpen mensen per jaar: "),l=ft(b,i[2]),b.forEach(L),c=it(v),f=K(v,"P",{});var R=Z(f);_=ft(R,"Kosten per jaar: "),g=ft(R,m),R.forEach(L),E=it(v),p=K(v,"P",{});var P=Z(p);w=ft(P,"Aantal vrijwilligers per jaar: "),S=ft(P,i[4]),P.forEach(L),v.forEach(L),C=it(y),x=K(y,"DIV",{});var A=Z(x);bt(V.$$.fragment,A),A.forEach(L),this.h()},h(){W(t,"class","font-bold text-2xl mb-4"),W(s,"class","py-2")},m(y,v){q(y,t,v),q(y,n,v);for(let b=0;b<I.length;b+=1)I[b]&&I[b].m(y,v);q(y,r,v),q(y,s,v),U(s,o),U(o,u),U(o,l),U(s,c),U(s,f),U(f,_),U(f,g),U(s,E),U(s,p),U(p,w),U(p,S),q(y,C,v),q(y,x,v),Rt(V,x,null),k=!0},p(y,v){if(v&3){O=_r(y[1]);let R;for(R=0;R<O.length;R+=1){const P=Fl(y,O,R);I[R]?I[R].p(P,v):(I[R]=Ll(P),I[R].c(),I[R].m(r.parentNode,r))}for(;R<I.length;R+=1)I[R].d(1);I.length=O.length}(!k||v&4)&&Qt(l,y[2]),(!k||v&8)&&m!==(m=y[3].toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"")&&Qt(g,m),(!k||v&16)&&Qt(S,y[4]);const b={};v&4096&&(b.$$scope={dirty:v,ctx:y}),V.$set(b)},i(y){k||(X(V.$$.fragment,y),k=!0)},o(y){tt(V.$$.fragment,y),k=!1},d(y){y&&(L(t),L(n),L(r),L(s),L(C),L(x)),Na(I,y),Pt(V)}}}function C_(i){let t,e;return t=new Pi({props:{$$slots:{default:[S_]},$$scope:{ctx:i}}}),{c(){At(t.$$.fragment)},l(n){bt(t.$$.fragment,n)},m(n,r){Rt(t,n,r),e=!0},p(n,[r]){const s={};r&4127&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(X(t.$$.fragment,n),e=!0)},o(n){tt(t.$$.fragment,n),e=!1},d(n){Pt(t,n)}}}function D_(i,t,e){let n,r;Ye(i,pr,m=>e(5,n=m)),Ye(i,Go,m=>e(0,r=m));let s=[],o=0,u=0,l=0;const c=()=>{let m=[],g=n.length;n.forEach(E=>{E.values.forEach((p,w)=>{m[w]||(m[w]=0),m[w]+=p})}),e(1,s=m.map(E=>E/g))},f=()=>{e(2,o=r.reduce((m,g,E)=>m+ci(s[E]??0,g),0)),e(3,u=r.reduce((m,g,E)=>m+ps(s[E]??0,g),0)),e(4,l=r.reduce((m,g,E)=>m+ms(s[E]??0,g),0))},_=()=>{Be.set(0)};return i.$$.update=()=>{i.$$.dirty&33&&r.length&&n.length&&(c(),f())},[r,s,o,u,l,n,_]}class V_ extends Ge{constructor(t){super(),Ke(this,t,D_,C_,Ne,{})}}var $l={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh=function(i){const t=[];let e=0;for(let n=0;n<i.length;n++){let r=i.charCodeAt(n);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(i.charCodeAt(++n)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},k_=function(i){const t=[];let e=0,n=0;for(;e<i.length;){const r=i[e++];if(r<128)t[n++]=String.fromCharCode(r);else if(r>191&&r<224){const s=i[e++];t[n++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=i[e++],o=i[e++],u=i[e++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|u&63)-65536;t[n++]=String.fromCharCode(55296+(l>>10)),t[n++]=String.fromCharCode(56320+(l&1023))}else{const s=i[e++],o=i[e++];t[n++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},ih={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<i.length;r+=3){const s=i[r],o=r+1<i.length,u=o?i[r+1]:0,l=r+2<i.length,c=l?i[r+2]:0,f=s>>2,_=(s&3)<<4|u>>4;let m=(u&15)<<2|c>>6,g=c&63;l||(g=64,o||(m=64)),n.push(e[f],e[_],e[m],e[g])}return n.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(rh(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):k_(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<i.length;){const s=e[i.charAt(r++)],u=r<i.length?e[i.charAt(r)]:0;++r;const c=r<i.length?e[i.charAt(r)]:64;++r;const _=r<i.length?e[i.charAt(r)]:64;if(++r,s==null||u==null||c==null||_==null)throw new x_;const m=s<<2|u>>4;if(n.push(m),c!==64){const g=u<<4&240|c>>2;if(n.push(g),_!==64){const E=c<<6&192|_;n.push(E)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class x_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const N_=function(i){const t=rh(i);return ih.encodeByteArray(t,!0)},gs=function(i){return N_(i).replace(/\./g,"")},O_=function(i){try{return ih.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F_=()=>M_().__FIREBASE_DEFAULTS__,L_=()=>{if(typeof process>"u"||typeof $l>"u")return;const i=$l.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},$_=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&O_(i[1]);return t&&JSON.parse(t)},Ma=()=>{try{return F_()||L_()||$_()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},U_=i=>{var t,e;return(e=(t=Ma())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[i]},B_=i=>{const t=U_(i);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),n]:[t.substring(0,e),n]},sh=()=>{var i;return(i=Ma())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},n=t||"demo-project",r=i.iat||0,s=i.sub||i.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},i);return[gs(JSON.stringify(e)),gs(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function G_(){var i;const t=(i=Ma())===null||i===void 0?void 0:i.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function K_(){return!G_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function H_(){try{return typeof indexedDB=="object"}catch{return!1}}function W_(){return new Promise((i,t)=>{try{let e=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(n),i(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="FirebaseError";class Sr extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name=Q_,Object.setPrototypeOf(this,Sr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oh.prototype.create)}}class oh{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?X_(s,n):"Error",u=`${this.serviceName}: ${o} (${r}).`;return new Sr(r,u,n)}}function X_(i,t){return i.replace(Y_,(e,n)=>{const r=t[n];return r!=null?String(r):`<${n}?>`})}const Y_=/\{\$([^}]+)}/g;function Ko(i,t){if(i===t)return!0;const e=Object.keys(i),n=Object.keys(t);for(const r of e){if(!n.includes(r))return!1;const s=i[r],o=t[r];if(Ul(s)&&Ul(o)){if(!Ko(s,o))return!1}else if(s!==o)return!1}for(const r of n)if(!e.includes(r))return!1;return!0}function Ul(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(i){return i&&i._delegate?i._delegate:i}class hi{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const n=new j_;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(tp(t))try{this.getOrInitializeService({instanceIdentifier:xn})}catch{}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const s=this.getOrInitializeService({instanceIdentifier:r});n.resolve(s)}catch{}}}}clearInstance(t=xn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=xn){return this.instances.has(t)}getOptions(t=xn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[s,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(s);n===u&&o.resolve(r)}return r}onInit(t,e){var n;const r=this.normalizeInstanceIdentifier(e),s=(n=this.onInitCallbacks.get(r))!==null&&n!==void 0?n:new Set;s.add(t),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Z_(t),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=xn){return this.component?this.component.multipleInstances?t:xn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Z_(i){return i===xn?void 0:i}function tp(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new J_(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(ct||(ct={}));const np={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},rp=ct.INFO,ip={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},sp=(i,t,...e)=>{if(t<i.logLevel)return;const n=new Date().toISOString(),r=ip[t];if(r)console[r](`[${n}]  ${i.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class ah{constructor(t){this.name=t,this._logLevel=rp,this._logHandler=sp,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ct))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?np[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...t),this._logHandler(this,ct.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...t),this._logHandler(this,ct.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ct.INFO,...t),this._logHandler(this,ct.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ct.WARN,...t),this._logHandler(this,ct.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...t),this._logHandler(this,ct.ERROR,...t)}}const op=(i,t)=>t.some(e=>i instanceof e);let Bl,jl;function ap(){return Bl||(Bl=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function up(){return jl||(jl=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uh=new WeakMap,Ho=new WeakMap,lh=new WeakMap,Ro=new WeakMap,Fa=new WeakMap;function lp(i){const t=new Promise((e,n)=>{const r=()=>{i.removeEventListener("success",s),i.removeEventListener("error",o)},s=()=>{e(hn(i.result)),r()},o=()=>{n(i.error),r()};i.addEventListener("success",s),i.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&uh.set(e,i)}).catch(()=>{}),Fa.set(t,i),t}function cp(i){if(Ho.has(i))return;const t=new Promise((e,n)=>{const r=()=>{i.removeEventListener("complete",s),i.removeEventListener("error",o),i.removeEventListener("abort",o)},s=()=>{e(),r()},o=()=>{n(i.error||new DOMException("AbortError","AbortError")),r()};i.addEventListener("complete",s),i.addEventListener("error",o),i.addEventListener("abort",o)});Ho.set(i,t)}let Wo={get(i,t,e){if(i instanceof IDBTransaction){if(t==="done")return Ho.get(i);if(t==="objectStoreNames")return i.objectStoreNames||lh.get(i);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return hn(i[t])},set(i,t,e){return i[t]=e,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function hp(i){Wo=i(Wo)}function fp(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const n=i.call(Po(this),t,...e);return lh.set(n,t.sort?t.sort():[t]),hn(n)}:up().includes(i)?function(...t){return i.apply(Po(this),t),hn(uh.get(this))}:function(...t){return hn(i.apply(Po(this),t))}}function dp(i){return typeof i=="function"?fp(i):(i instanceof IDBTransaction&&cp(i),op(i,ap())?new Proxy(i,Wo):i)}function hn(i){if(i instanceof IDBRequest)return lp(i);if(Ro.has(i))return Ro.get(i);const t=dp(i);return t!==i&&(Ro.set(i,t),Fa.set(t,i)),t}const Po=i=>Fa.get(i);function _p(i,t,{blocked:e,upgrade:n,blocking:r,terminated:s}={}){const o=indexedDB.open(i,t),u=hn(o);return n&&o.addEventListener("upgradeneeded",l=>{n(hn(o.result),l.oldVersion,l.newVersion,hn(o.transaction),l)}),e&&o.addEventListener("blocked",l=>e(l.oldVersion,l.newVersion,l)),u.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),u}const pp=["get","getKey","getAll","getAllKeys","count"],mp=["put","add","delete","clear"],So=new Map;function zl(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(So.get(t))return So.get(t);const e=t.replace(/FromIndex$/,""),n=t!==e,r=mp.includes(e);if(!(e in(n?IDBIndex:IDBObjectStore).prototype)||!(r||pp.includes(e)))return;const s=async function(o,...u){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return n&&(c=c.index(u.shift())),(await Promise.all([c[e](...u),r&&l.done]))[0]};return So.set(t,s),s}hp(i=>({...i,get:(t,e,n)=>zl(t,e)||i.get(t,e,n),has:(t,e)=>!!zl(t,e)||i.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(yp(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function yp(i){const t=i.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Qo="@firebase/app",ql="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn=new ah("@firebase/app"),vp="@firebase/app-compat",Tp="@firebase/analytics-compat",Ep="@firebase/analytics",wp="@firebase/app-check-compat",Ip="@firebase/app-check",Ap="@firebase/auth",bp="@firebase/auth-compat",Rp="@firebase/database",Pp="@firebase/database-compat",Sp="@firebase/functions",Cp="@firebase/functions-compat",Dp="@firebase/installations",Vp="@firebase/installations-compat",kp="@firebase/messaging",xp="@firebase/messaging-compat",Np="@firebase/performance",Op="@firebase/performance-compat",Mp="@firebase/remote-config",Fp="@firebase/remote-config-compat",Lp="@firebase/storage",$p="@firebase/storage-compat",Up="@firebase/firestore",Bp="@firebase/vertexai-preview",jp="@firebase/firestore-compat",zp="firebase",qp="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo="[DEFAULT]",Gp={[Qo]:"fire-core",[vp]:"fire-core-compat",[Ep]:"fire-analytics",[Tp]:"fire-analytics-compat",[Ip]:"fire-app-check",[wp]:"fire-app-check-compat",[Ap]:"fire-auth",[bp]:"fire-auth-compat",[Rp]:"fire-rtdb",[Pp]:"fire-rtdb-compat",[Sp]:"fire-fn",[Cp]:"fire-fn-compat",[Dp]:"fire-iid",[Vp]:"fire-iid-compat",[kp]:"fire-fcm",[xp]:"fire-fcm-compat",[Np]:"fire-perf",[Op]:"fire-perf-compat",[Mp]:"fire-rc",[Fp]:"fire-rc-compat",[Lp]:"fire-gcs",[$p]:"fire-gcs-compat",[Up]:"fire-fst",[jp]:"fire-fst-compat",[Bp]:"fire-vertex","fire-js":"fire-js",[zp]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new Map,Kp=new Map,Yo=new Map;function Gl(i,t){try{i.container.addComponent(t)}catch(e){zn.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,e)}}function vs(i){const t=i.name;if(Yo.has(t))return zn.debug(`There were multiple attempts to register component ${t}.`),!1;Yo.set(t,i);for(const e of ys.values())Gl(e,i);for(const e of Kp.values())Gl(e,i);return!0}function Hp(i,t){const e=i.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),i.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fn=new oh("app","Firebase",Wp);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new hi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw fn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp=qp;function ch(i,t={}){let e=i;typeof t!="object"&&(t={name:t});const n=Object.assign({name:Xo,automaticDataCollectionEnabled:!1},t),r=n.name;if(typeof r!="string"||!r)throw fn.create("bad-app-name",{appName:String(r)});if(e||(e=sh()),!e)throw fn.create("no-options");const s=ys.get(r);if(s){if(Ko(e,s.options)&&Ko(n,s.config))return s;throw fn.create("duplicate-app",{appName:r})}const o=new ep(r);for(const l of Yo.values())o.addComponent(l);const u=new Qp(e,n,o);return ys.set(r,u),u}function Yp(i=Xo){const t=ys.get(i);if(!t&&i===Xo&&sh())return ch();if(!t)throw fn.create("no-app",{appName:i});return t}function lr(i,t,e){var n;let r=(n=Gp[i])!==null&&n!==void 0?n:i;e&&(r+=`-${e}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const u=[`Unable to register library "${r}" with version "${t}":`];s&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&u.push("and"),o&&u.push(`version name "${t}" contains illegal characters (whitespace or "/")`),zn.warn(u.join(" "));return}vs(new hi(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp="firebase-heartbeat-database",Zp=1,fi="firebase-heartbeat-store";let Co=null;function hh(){return Co||(Co=_p(Jp,Zp,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(fi)}catch(e){console.warn(e)}}}}).catch(i=>{throw fn.create("idb-open",{originalErrorMessage:i.message})})),Co}async function tm(i){try{const e=(await hh()).transaction(fi),n=await e.objectStore(fi).get(fh(i));return await e.done,n}catch(t){if(t instanceof Sr)zn.warn(t.message);else{const e=fn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});zn.warn(e.message)}}}async function Kl(i,t){try{const n=(await hh()).transaction(fi,"readwrite");await n.objectStore(fi).put(t,fh(i)),await n.done}catch(e){if(e instanceof Sr)zn.warn(e.message);else{const n=fn.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});zn.warn(n.message)}}}function fh(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em=1024,nm=30*24*60*60*1e3;class rm{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new sm(e),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,e;const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Hl();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const u=new Date(o.date).valueOf();return Date.now()-u<=nm}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Hl(),{heartbeatsToSend:n,unsentEntries:r}=im(this._heartbeatsCache.heartbeats),s=gs(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Hl(){return new Date().toISOString().substring(0,10)}function im(i,t=em){const e=[];let n=i.slice();for(const r of i){const s=e.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Wl(e)>t){s.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),Wl(e)>t){e.pop();break}n=n.slice(1)}return{heartbeatsToSend:e,unsentEntries:n}}class sm{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return H_()?W_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await tm(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return Kl(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return Kl(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function Wl(i){return gs(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(i){vs(new hi("platform-logger",t=>new gp(t),"PRIVATE")),vs(new hi("heartbeat",t=>new rm(t),"PRIVATE")),lr(Qo,ql,i),lr(Qo,ql,"esm2017"),lr("fire-js","")}om("");var Ql=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fn,dh;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,y){function v(){}v.prototype=y.prototype,I.D=y.prototype,I.prototype=new v,I.prototype.constructor=I,I.C=function(b,R,P){for(var A=Array(arguments.length-2),et=2;et<arguments.length;et++)A[et-2]=arguments[et];return y.prototype[R].apply(b,A)}}function e(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,e),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,y,v){v||(v=0);var b=Array(16);if(typeof y=="string")for(var R=0;16>R;++R)b[R]=y.charCodeAt(v++)|y.charCodeAt(v++)<<8|y.charCodeAt(v++)<<16|y.charCodeAt(v++)<<24;else for(R=0;16>R;++R)b[R]=y[v++]|y[v++]<<8|y[v++]<<16|y[v++]<<24;y=I.g[0],v=I.g[1],R=I.g[2];var P=I.g[3],A=y+(P^v&(R^P))+b[0]+3614090360&4294967295;y=v+(A<<7&4294967295|A>>>25),A=P+(R^y&(v^R))+b[1]+3905402710&4294967295,P=y+(A<<12&4294967295|A>>>20),A=R+(v^P&(y^v))+b[2]+606105819&4294967295,R=P+(A<<17&4294967295|A>>>15),A=v+(y^R&(P^y))+b[3]+3250441966&4294967295,v=R+(A<<22&4294967295|A>>>10),A=y+(P^v&(R^P))+b[4]+4118548399&4294967295,y=v+(A<<7&4294967295|A>>>25),A=P+(R^y&(v^R))+b[5]+1200080426&4294967295,P=y+(A<<12&4294967295|A>>>20),A=R+(v^P&(y^v))+b[6]+2821735955&4294967295,R=P+(A<<17&4294967295|A>>>15),A=v+(y^R&(P^y))+b[7]+4249261313&4294967295,v=R+(A<<22&4294967295|A>>>10),A=y+(P^v&(R^P))+b[8]+1770035416&4294967295,y=v+(A<<7&4294967295|A>>>25),A=P+(R^y&(v^R))+b[9]+2336552879&4294967295,P=y+(A<<12&4294967295|A>>>20),A=R+(v^P&(y^v))+b[10]+4294925233&4294967295,R=P+(A<<17&4294967295|A>>>15),A=v+(y^R&(P^y))+b[11]+2304563134&4294967295,v=R+(A<<22&4294967295|A>>>10),A=y+(P^v&(R^P))+b[12]+1804603682&4294967295,y=v+(A<<7&4294967295|A>>>25),A=P+(R^y&(v^R))+b[13]+4254626195&4294967295,P=y+(A<<12&4294967295|A>>>20),A=R+(v^P&(y^v))+b[14]+2792965006&4294967295,R=P+(A<<17&4294967295|A>>>15),A=v+(y^R&(P^y))+b[15]+1236535329&4294967295,v=R+(A<<22&4294967295|A>>>10),A=y+(R^P&(v^R))+b[1]+4129170786&4294967295,y=v+(A<<5&4294967295|A>>>27),A=P+(v^R&(y^v))+b[6]+3225465664&4294967295,P=y+(A<<9&4294967295|A>>>23),A=R+(y^v&(P^y))+b[11]+643717713&4294967295,R=P+(A<<14&4294967295|A>>>18),A=v+(P^y&(R^P))+b[0]+3921069994&4294967295,v=R+(A<<20&4294967295|A>>>12),A=y+(R^P&(v^R))+b[5]+3593408605&4294967295,y=v+(A<<5&4294967295|A>>>27),A=P+(v^R&(y^v))+b[10]+38016083&4294967295,P=y+(A<<9&4294967295|A>>>23),A=R+(y^v&(P^y))+b[15]+3634488961&4294967295,R=P+(A<<14&4294967295|A>>>18),A=v+(P^y&(R^P))+b[4]+3889429448&4294967295,v=R+(A<<20&4294967295|A>>>12),A=y+(R^P&(v^R))+b[9]+568446438&4294967295,y=v+(A<<5&4294967295|A>>>27),A=P+(v^R&(y^v))+b[14]+3275163606&4294967295,P=y+(A<<9&4294967295|A>>>23),A=R+(y^v&(P^y))+b[3]+4107603335&4294967295,R=P+(A<<14&4294967295|A>>>18),A=v+(P^y&(R^P))+b[8]+1163531501&4294967295,v=R+(A<<20&4294967295|A>>>12),A=y+(R^P&(v^R))+b[13]+2850285829&4294967295,y=v+(A<<5&4294967295|A>>>27),A=P+(v^R&(y^v))+b[2]+4243563512&4294967295,P=y+(A<<9&4294967295|A>>>23),A=R+(y^v&(P^y))+b[7]+1735328473&4294967295,R=P+(A<<14&4294967295|A>>>18),A=v+(P^y&(R^P))+b[12]+2368359562&4294967295,v=R+(A<<20&4294967295|A>>>12),A=y+(v^R^P)+b[5]+4294588738&4294967295,y=v+(A<<4&4294967295|A>>>28),A=P+(y^v^R)+b[8]+2272392833&4294967295,P=y+(A<<11&4294967295|A>>>21),A=R+(P^y^v)+b[11]+1839030562&4294967295,R=P+(A<<16&4294967295|A>>>16),A=v+(R^P^y)+b[14]+4259657740&4294967295,v=R+(A<<23&4294967295|A>>>9),A=y+(v^R^P)+b[1]+2763975236&4294967295,y=v+(A<<4&4294967295|A>>>28),A=P+(y^v^R)+b[4]+1272893353&4294967295,P=y+(A<<11&4294967295|A>>>21),A=R+(P^y^v)+b[7]+4139469664&4294967295,R=P+(A<<16&4294967295|A>>>16),A=v+(R^P^y)+b[10]+3200236656&4294967295,v=R+(A<<23&4294967295|A>>>9),A=y+(v^R^P)+b[13]+681279174&4294967295,y=v+(A<<4&4294967295|A>>>28),A=P+(y^v^R)+b[0]+3936430074&4294967295,P=y+(A<<11&4294967295|A>>>21),A=R+(P^y^v)+b[3]+3572445317&4294967295,R=P+(A<<16&4294967295|A>>>16),A=v+(R^P^y)+b[6]+76029189&4294967295,v=R+(A<<23&4294967295|A>>>9),A=y+(v^R^P)+b[9]+3654602809&4294967295,y=v+(A<<4&4294967295|A>>>28),A=P+(y^v^R)+b[12]+3873151461&4294967295,P=y+(A<<11&4294967295|A>>>21),A=R+(P^y^v)+b[15]+530742520&4294967295,R=P+(A<<16&4294967295|A>>>16),A=v+(R^P^y)+b[2]+3299628645&4294967295,v=R+(A<<23&4294967295|A>>>9),A=y+(R^(v|~P))+b[0]+4096336452&4294967295,y=v+(A<<6&4294967295|A>>>26),A=P+(v^(y|~R))+b[7]+1126891415&4294967295,P=y+(A<<10&4294967295|A>>>22),A=R+(y^(P|~v))+b[14]+2878612391&4294967295,R=P+(A<<15&4294967295|A>>>17),A=v+(P^(R|~y))+b[5]+4237533241&4294967295,v=R+(A<<21&4294967295|A>>>11),A=y+(R^(v|~P))+b[12]+1700485571&4294967295,y=v+(A<<6&4294967295|A>>>26),A=P+(v^(y|~R))+b[3]+2399980690&4294967295,P=y+(A<<10&4294967295|A>>>22),A=R+(y^(P|~v))+b[10]+4293915773&4294967295,R=P+(A<<15&4294967295|A>>>17),A=v+(P^(R|~y))+b[1]+2240044497&4294967295,v=R+(A<<21&4294967295|A>>>11),A=y+(R^(v|~P))+b[8]+1873313359&4294967295,y=v+(A<<6&4294967295|A>>>26),A=P+(v^(y|~R))+b[15]+4264355552&4294967295,P=y+(A<<10&4294967295|A>>>22),A=R+(y^(P|~v))+b[6]+2734768916&4294967295,R=P+(A<<15&4294967295|A>>>17),A=v+(P^(R|~y))+b[13]+1309151649&4294967295,v=R+(A<<21&4294967295|A>>>11),A=y+(R^(v|~P))+b[4]+4149444226&4294967295,y=v+(A<<6&4294967295|A>>>26),A=P+(v^(y|~R))+b[11]+3174756917&4294967295,P=y+(A<<10&4294967295|A>>>22),A=R+(y^(P|~v))+b[2]+718787259&4294967295,R=P+(A<<15&4294967295|A>>>17),A=v+(P^(R|~y))+b[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(R+(A<<21&4294967295|A>>>11))&4294967295,I.g[2]=I.g[2]+R&4294967295,I.g[3]=I.g[3]+P&4294967295}n.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var v=y-this.blockSize,b=this.B,R=this.h,P=0;P<y;){if(R==0)for(;P<=v;)r(this,I,P),P+=this.blockSize;if(typeof I=="string"){for(;P<y;)if(b[R++]=I.charCodeAt(P++),R==this.blockSize){r(this,b),R=0;break}}else for(;P<y;)if(b[R++]=I[P++],R==this.blockSize){r(this,b),R=0;break}}this.h=R,this.o+=y},n.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var v=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=v&255,v/=256;for(this.u(I),I=Array(16),y=v=0;4>y;++y)for(var b=0;32>b;b+=8)I[v++]=this.g[y]>>>b&255;return I};function s(I,y){var v=u;return Object.prototype.hasOwnProperty.call(v,I)?v[I]:v[I]=y(I)}function o(I,y){this.h=y;for(var v=[],b=!0,R=I.length-1;0<=R;R--){var P=I[R]|0;b&&P==y||(v[R]=P,b=!1)}this.g=v}var u={};function l(I){return-128<=I&&128>I?s(I,function(y){return new o([y|0],0>y?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return _;if(0>I)return w(c(-I));for(var y=[],v=1,b=0;I>=v;b++)y[b]=I/v|0,v*=4294967296;return new o(y,0)}function f(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return w(f(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=c(Math.pow(y,8)),b=_,R=0;R<I.length;R+=8){var P=Math.min(8,I.length-R),A=parseInt(I.substring(R,R+P),y);8>P?(P=c(Math.pow(y,P)),b=b.j(P).add(c(A))):(b=b.j(v),b=b.add(c(A)))}return b}var _=l(0),m=l(1),g=l(16777216);i=o.prototype,i.m=function(){if(p(this))return-w(this).m();for(var I=0,y=1,v=0;v<this.g.length;v++){var b=this.i(v);I+=(0<=b?b:4294967296+b)*y,y*=4294967296}return I},i.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(E(this))return"0";if(p(this))return"-"+w(this).toString(I);for(var y=c(Math.pow(I,6)),v=this,b="";;){var R=V(v,y).g;v=S(v,R.j(y));var P=((0<v.g.length?v.g[0]:v.h)>>>0).toString(I);if(v=R,E(v))return P+b;for(;6>P.length;)P="0"+P;b=P+b}},i.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function E(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function p(I){return I.h==-1}i.l=function(I){return I=S(this,I),p(I)?-1:E(I)?0:1};function w(I){for(var y=I.g.length,v=[],b=0;b<y;b++)v[b]=~I.g[b];return new o(v,~I.h).add(m)}i.abs=function(){return p(this)?w(this):this},i.add=function(I){for(var y=Math.max(this.g.length,I.g.length),v=[],b=0,R=0;R<=y;R++){var P=b+(this.i(R)&65535)+(I.i(R)&65535),A=(P>>>16)+(this.i(R)>>>16)+(I.i(R)>>>16);b=A>>>16,P&=65535,A&=65535,v[R]=A<<16|P}return new o(v,v[v.length-1]&-2147483648?-1:0)};function S(I,y){return I.add(w(y))}i.j=function(I){if(E(this)||E(I))return _;if(p(this))return p(I)?w(this).j(w(I)):w(w(this).j(I));if(p(I))return w(this.j(w(I)));if(0>this.l(g)&&0>I.l(g))return c(this.m()*I.m());for(var y=this.g.length+I.g.length,v=[],b=0;b<2*y;b++)v[b]=0;for(b=0;b<this.g.length;b++)for(var R=0;R<I.g.length;R++){var P=this.i(b)>>>16,A=this.i(b)&65535,et=I.i(R)>>>16,ut=I.i(R)&65535;v[2*b+2*R]+=A*ut,C(v,2*b+2*R),v[2*b+2*R+1]+=P*ut,C(v,2*b+2*R+1),v[2*b+2*R+1]+=A*et,C(v,2*b+2*R+1),v[2*b+2*R+2]+=P*et,C(v,2*b+2*R+2)}for(b=0;b<y;b++)v[b]=v[2*b+1]<<16|v[2*b];for(b=y;b<2*y;b++)v[b]=0;return new o(v,0)};function C(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function x(I,y){this.g=I,this.h=y}function V(I,y){if(E(y))throw Error("division by zero");if(E(I))return new x(_,_);if(p(I))return y=V(w(I),y),new x(w(y.g),w(y.h));if(p(y))return y=V(I,w(y)),new x(w(y.g),y.h);if(30<I.g.length){if(p(I)||p(y))throw Error("slowDivide_ only works with positive integers.");for(var v=m,b=y;0>=b.l(I);)v=k(v),b=k(b);var R=O(v,1),P=O(b,1);for(b=O(b,2),v=O(v,2);!E(b);){var A=P.add(b);0>=A.l(I)&&(R=R.add(v),P=A),b=O(b,1),v=O(v,1)}return y=S(I,R.j(y)),new x(R,y)}for(R=_;0<=I.l(y);){for(v=Math.max(1,Math.floor(I.m()/y.m())),b=Math.ceil(Math.log(v)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),P=c(v),A=P.j(y);p(A)||0<A.l(I);)v-=b,P=c(v),A=P.j(y);E(P)&&(P=m),R=R.add(P),I=S(I,A)}return new x(R,I)}i.A=function(I){return V(this,I).h},i.and=function(I){for(var y=Math.max(this.g.length,I.g.length),v=[],b=0;b<y;b++)v[b]=this.i(b)&I.i(b);return new o(v,this.h&I.h)},i.or=function(I){for(var y=Math.max(this.g.length,I.g.length),v=[],b=0;b<y;b++)v[b]=this.i(b)|I.i(b);return new o(v,this.h|I.h)},i.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),v=[],b=0;b<y;b++)v[b]=this.i(b)^I.i(b);return new o(v,this.h^I.h)};function k(I){for(var y=I.g.length+1,v=[],b=0;b<y;b++)v[b]=I.i(b)<<1|I.i(b-1)>>>31;return new o(v,I.h)}function O(I,y){var v=y>>5;y%=32;for(var b=I.g.length-v,R=[],P=0;P<b;P++)R[P]=0<y?I.i(P+v)>>>y|I.i(P+v+1)<<32-y:I.i(P+v);return new o(R,I.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,dh=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=f,Fn=o}).apply(typeof Ql<"u"?Ql:typeof self<"u"?self:typeof window<"u"?window:{});var ns=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _h,ph,Qr,mh,as,Jo,gh,yh,vh;(function(){var i,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,d){return a==Array.prototype||a==Object.prototype||(a[h]=d.value),a};function e(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof ns=="object"&&ns];for(var h=0;h<a.length;++h){var d=a[h];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var n=e(this);function r(a,h){if(h)t:{var d=n;a=a.split(".");for(var T=0;T<a.length-1;T++){var D=a[T];if(!(D in d))break t;d=d[D]}a=a[a.length-1],T=d[a],h=h(T),h!=T&&h!=null&&t(d,a,{configurable:!0,writable:!0,value:h})}}function s(a,h){a instanceof String&&(a+="");var d=0,T=!1,D={next:function(){if(!T&&d<a.length){var N=d++;return{value:h(N,a[N]),done:!1}}return T=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}r("Array.prototype.values",function(a){return a||function(){return s(this,function(h,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function l(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function c(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,d){return a.call.apply(a.bind,arguments)}function _(a,h,d){if(!a)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,T),a.apply(h,D)}}return function(){return a.apply(h,arguments)}}function m(a,h,d){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:_,m.apply(null,arguments)}function g(a,h){var d=Array.prototype.slice.call(arguments,1);return function(){var T=d.slice();return T.push.apply(T,arguments),a.apply(this,T)}}function E(a,h){function d(){}d.prototype=h.prototype,a.aa=h.prototype,a.prototype=new d,a.prototype.constructor=a,a.Qb=function(T,D,N){for(var $=Array(arguments.length-2),yt=2;yt<arguments.length;yt++)$[yt-2]=arguments[yt];return h.prototype[D].apply(T,$)}}function p(a){const h=a.length;if(0<h){const d=Array(h);for(let T=0;T<h;T++)d[T]=a[T];return d}return[]}function w(a,h){for(let d=1;d<arguments.length;d++){const T=arguments[d];if(l(T)){const D=a.length||0,N=T.length||0;a.length=D+N;for(let $=0;$<N;$++)a[D+$]=T[$]}else a.push(T)}}class S{constructor(h,d){this.i=h,this.j=d,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function C(a){return/^[\s\xa0]*$/.test(a)}function x(){var a=u.navigator;return a&&(a=a.userAgent)?a:""}function V(a){return V[" "](a),a}V[" "]=function(){};var k=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function O(a,h,d){for(const T in a)h.call(d,a[T],T,a)}function I(a,h){for(const d in a)h.call(void 0,a[d],d,a)}function y(a){const h={};for(const d in a)h[d]=a[d];return h}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(a,h){let d,T;for(let D=1;D<arguments.length;D++){T=arguments[D];for(d in T)a[d]=T[d];for(let N=0;N<v.length;N++)d=v[N],Object.prototype.hasOwnProperty.call(T,d)&&(a[d]=T[d])}}function R(a){var h=1;a=a.split(":");const d=[];for(;0<h&&a.length;)d.push(a.shift()),h--;return a.length&&d.push(a.join(":")),d}function P(a){u.setTimeout(()=>{throw a},0)}function A(){var a=J;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class et{constructor(){this.h=this.g=null}add(h,d){const T=ut.get();T.set(h,d),this.h?this.h.next=T:this.g=T,this.h=T}}var ut=new S(()=>new _t,a=>a.reset());class _t{constructor(){this.next=this.g=this.h=null}set(h,d){this.h=h,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let pt,ot=!1,J=new et,gt=()=>{const a=u.Promise.resolve(void 0);pt=()=>{a.then(jt)}};var jt=()=>{for(var a;a=A();){try{a.h.call(a.g)}catch(d){P(d)}var h=ut;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}ot=!1};function St(){this.s=this.s,this.C=this.C}St.prototype.s=!1,St.prototype.ma=function(){this.s||(this.s=!0,this.N())},St.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function nt(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}nt.prototype.h=function(){this.defaultPrevented=!0};var wt=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};u.addEventListener("test",d,h),u.removeEventListener("test",d,h)}catch{}return a}();function Yt(a,h){if(nt.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var d=this.type=a.type,T=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(k){t:{try{V(h.nodeName);var D=!0;break t}catch{}D=!1}D||(h=null)}}else d=="mouseover"?h=a.fromElement:d=="mouseout"&&(h=a.toElement);this.relatedTarget=h,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Li[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Yt.aa.h.call(this)}}E(Yt,nt);var Li={2:"touch",3:"pen",4:"mouse"};Yt.prototype.h=function(){Yt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Rn="closure_listenable_"+(1e6*Math.random()|0),Jn=0;function kr(a,h,d,T,D){this.listener=a,this.proxy=null,this.src=h,this.type=d,this.capture=!!T,this.ha=D,this.key=++Jn,this.da=this.fa=!1}function $i(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ui(a){this.src=a,this.g={},this.h=0}Ui.prototype.add=function(a,h,d,T,D){var N=a.toString();a=this.g[N],a||(a=this.g[N]=[],this.h++);var $=no(a,h,T,D);return-1<$?(h=a[$],d||(h.fa=!1)):(h=new kr(h,this.src,N,!!T,D),h.fa=d,a.push(h)),h};function eo(a,h){var d=h.type;if(d in a.g){var T=a.g[d],D=Array.prototype.indexOf.call(T,h,void 0),N;(N=0<=D)&&Array.prototype.splice.call(T,D,1),N&&($i(h),a.g[d].length==0&&(delete a.g[d],a.h--))}}function no(a,h,d,T){for(var D=0;D<a.length;++D){var N=a[D];if(!N.da&&N.listener==h&&N.capture==!!d&&N.ha==T)return D}return-1}var ro="closure_lm_"+(1e6*Math.random()|0),io={};function Mu(a,h,d,T,D){if(Array.isArray(h)){for(var N=0;N<h.length;N++)Mu(a,h[N],d,T,D);return null}return d=$u(d),a&&a[Rn]?a.K(h,d,c(T)?!!T.capture:!!T,D):Ud(a,h,d,!1,T,D)}function Ud(a,h,d,T,D,N){if(!h)throw Error("Invalid event type");var $=c(D)?!!D.capture:!!D,yt=oo(a);if(yt||(a[ro]=yt=new Ui(a)),d=yt.add(h,d,T,$,N),d.proxy)return d;if(T=Bd(),d.proxy=T,T.src=a,T.listener=d,a.addEventListener)wt||(D=$),D===void 0&&(D=!1),a.addEventListener(h.toString(),T,D);else if(a.attachEvent)a.attachEvent(Lu(h.toString()),T);else if(a.addListener&&a.removeListener)a.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Bd(){function a(d){return h.call(a.src,a.listener,d)}const h=jd;return a}function Fu(a,h,d,T,D){if(Array.isArray(h))for(var N=0;N<h.length;N++)Fu(a,h[N],d,T,D);else T=c(T)?!!T.capture:!!T,d=$u(d),a&&a[Rn]?(a=a.i,h=String(h).toString(),h in a.g&&(N=a.g[h],d=no(N,d,T,D),-1<d&&($i(N[d]),Array.prototype.splice.call(N,d,1),N.length==0&&(delete a.g[h],a.h--)))):a&&(a=oo(a))&&(h=a.g[h.toString()],a=-1,h&&(a=no(h,d,T,D)),(d=-1<a?h[a]:null)&&so(d))}function so(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Rn])eo(h.i,a);else{var d=a.type,T=a.proxy;h.removeEventListener?h.removeEventListener(d,T,a.capture):h.detachEvent?h.detachEvent(Lu(d),T):h.addListener&&h.removeListener&&h.removeListener(T),(d=oo(h))?(eo(d,a),d.h==0&&(d.src=null,h[ro]=null)):$i(a)}}}function Lu(a){return a in io?io[a]:io[a]="on"+a}function jd(a,h){if(a.da)a=!0;else{h=new Yt(h,this);var d=a.listener,T=a.ha||a.src;a.fa&&so(a),a=d.call(T,h)}return a}function oo(a){return a=a[ro],a instanceof Ui?a:null}var ao="__closure_events_fn_"+(1e9*Math.random()>>>0);function $u(a){return typeof a=="function"?a:(a[ao]||(a[ao]=function(h){return a.handleEvent(h)}),a[ao])}function Jt(){St.call(this),this.i=new Ui(this),this.M=this,this.F=null}E(Jt,St),Jt.prototype[Rn]=!0,Jt.prototype.removeEventListener=function(a,h,d,T){Fu(this,a,h,d,T)};function ue(a,h){var d,T=a.F;if(T)for(d=[];T;T=T.F)d.push(T);if(a=a.M,T=h.type||h,typeof h=="string")h=new nt(h,a);else if(h instanceof nt)h.target=h.target||a;else{var D=h;h=new nt(T,a),b(h,D)}if(D=!0,d)for(var N=d.length-1;0<=N;N--){var $=h.g=d[N];D=Bi($,T,!0,h)&&D}if($=h.g=a,D=Bi($,T,!0,h)&&D,D=Bi($,T,!1,h)&&D,d)for(N=0;N<d.length;N++)$=h.g=d[N],D=Bi($,T,!1,h)&&D}Jt.prototype.N=function(){if(Jt.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var d=a.g[h],T=0;T<d.length;T++)$i(d[T]);delete a.g[h],a.h--}}this.F=null},Jt.prototype.K=function(a,h,d,T){return this.i.add(String(a),h,!1,d,T)},Jt.prototype.L=function(a,h,d,T){return this.i.add(String(a),h,!0,d,T)};function Bi(a,h,d,T){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,N=0;N<h.length;++N){var $=h[N];if($&&!$.da&&$.capture==d){var yt=$.listener,Kt=$.ha||$.src;$.fa&&eo(a.i,$),D=yt.call(Kt,T)!==!1&&D}}return D&&!T.defaultPrevented}function Uu(a,h,d){if(typeof a=="function")d&&(a=m(a,d));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:u.setTimeout(a,h||0)}function Bu(a){a.g=Uu(()=>{a.g=null,a.i&&(a.i=!1,Bu(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class zd extends St{constructor(h,d){super(),this.m=h,this.l=d,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Bu(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xr(a){St.call(this),this.h=a,this.g={}}E(xr,St);var ju=[];function zu(a){O(a.g,function(h,d){this.g.hasOwnProperty(d)&&so(h)},a),a.g={}}xr.prototype.N=function(){xr.aa.N.call(this),zu(this)},xr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var uo=u.JSON.stringify,qd=u.JSON.parse,Gd=class{stringify(a){return u.JSON.stringify(a,void 0)}parse(a){return u.JSON.parse(a,void 0)}};function lo(){}lo.prototype.h=null;function qu(a){return a.h||(a.h=a.i())}function Gu(){}var Nr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function co(){nt.call(this,"d")}E(co,nt);function ho(){nt.call(this,"c")}E(ho,nt);var Pn={},Ku=null;function ji(){return Ku=Ku||new Jt}Pn.La="serverreachability";function Hu(a){nt.call(this,Pn.La,a)}E(Hu,nt);function Or(a){const h=ji();ue(h,new Hu(h))}Pn.STAT_EVENT="statevent";function Wu(a,h){nt.call(this,Pn.STAT_EVENT,a),this.stat=h}E(Wu,nt);function le(a){const h=ji();ue(h,new Wu(h,a))}Pn.Ma="timingevent";function Qu(a,h){nt.call(this,Pn.Ma,a),this.size=h}E(Qu,nt);function Mr(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){a()},h)}function Fr(){this.g=!0}Fr.prototype.xa=function(){this.g=!1};function Kd(a,h,d,T,D,N){a.info(function(){if(a.g)if(N)for(var $="",yt=N.split("&"),Kt=0;Kt<yt.length;Kt++){var dt=yt[Kt].split("=");if(1<dt.length){var Zt=dt[0];dt=dt[1];var te=Zt.split("_");$=2<=te.length&&te[1]=="type"?$+(Zt+"="+dt+"&"):$+(Zt+"=redacted&")}}else $=null;else $=N;return"XMLHTTP REQ ("+T+") [attempt "+D+"]: "+h+`
`+d+`
`+$})}function Hd(a,h,d,T,D,N,$){a.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+D+"]: "+h+`
`+d+`
`+N+" "+$})}function Zn(a,h,d,T){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+Qd(a,d)+(T?" "+T:"")})}function Wd(a,h){a.info(function(){return"TIMEOUT: "+h})}Fr.prototype.info=function(){};function Qd(a,h){if(!a.g)return h;if(!h)return null;try{var d=JSON.parse(h);if(d){for(a=0;a<d.length;a++)if(Array.isArray(d[a])){var T=d[a];if(!(2>T.length)){var D=T[1];if(Array.isArray(D)&&!(1>D.length)){var N=D[0];if(N!="noop"&&N!="stop"&&N!="close")for(var $=1;$<D.length;$++)D[$]=""}}}}return uo(d)}catch{return h}}var zi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Xu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fo;function qi(){}E(qi,lo),qi.prototype.g=function(){return new XMLHttpRequest},qi.prototype.i=function(){return{}},fo=new qi;function rn(a,h,d,T){this.j=a,this.i=h,this.l=d,this.R=T||1,this.U=new xr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Yu}function Yu(){this.i=null,this.g="",this.h=!1}var Ju={},_o={};function po(a,h,d){a.L=1,a.v=Wi(He(h)),a.m=d,a.P=!0,Zu(a,null)}function Zu(a,h){a.F=Date.now(),Gi(a),a.A=He(a.v);var d=a.A,T=a.R;Array.isArray(T)||(T=[String(T)]),dl(d.i,"t",T),a.C=0,d=a.j.J,a.h=new Yu,a.g=Vl(a.j,d?h:null,!a.m),0<a.O&&(a.M=new zd(m(a.Y,a,a.g),a.O)),h=a.U,d=a.g,T=a.ca;var D="readystatechange";Array.isArray(D)||(D&&(ju[0]=D.toString()),D=ju);for(var N=0;N<D.length;N++){var $=Mu(d,D[N],T||h.handleEvent,!1,h.h||h);if(!$)break;h.g[$.key]=$}h=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),Or(),Kd(a.i,a.u,a.A,a.l,a.R,a.m)}rn.prototype.ca=function(a){a=a.target;const h=this.M;h&&We(a)==3?h.j():this.Y(a)},rn.prototype.Y=function(a){try{if(a==this.g)t:{const te=We(this.g);var h=this.g.Ba();const nr=this.g.Z();if(!(3>te)&&(te!=3||this.g&&(this.h.h||this.g.oa()||Tl(this.g)))){this.J||te!=4||h==7||(h==8||0>=nr?Or(3):Or(2)),mo(this);var d=this.g.Z();this.X=d;e:if(tl(this)){var T=Tl(this.g);a="";var D=T.length,N=We(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Sn(this),Lr(this);var $="";break e}this.h.i=new u.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,a+=this.h.i.decode(T[h],{stream:!(N&&h==D-1)});T.length=0,this.h.g+=a,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=d==200,Hd(this.i,this.u,this.A,this.l,this.R,te,d),this.o){if(this.T&&!this.K){e:{if(this.g){var yt,Kt=this.g;if((yt=Kt.g?Kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(yt)){var dt=yt;break e}}dt=null}if(d=dt)Zn(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,go(this,d);else{this.o=!1,this.s=3,le(12),Sn(this),Lr(this);break t}}if(this.P){d=!0;let ke;for(;!this.J&&this.C<$.length;)if(ke=Xd(this,$),ke==_o){te==4&&(this.s=4,le(14),d=!1),Zn(this.i,this.l,null,"[Incomplete Response]");break}else if(ke==Ju){this.s=4,le(15),Zn(this.i,this.l,$,"[Invalid Chunk]"),d=!1;break}else Zn(this.i,this.l,ke,null),go(this,ke);if(tl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),te!=4||$.length!=0||this.h.h||(this.s=1,le(16),d=!1),this.o=this.o&&d,!d)Zn(this.i,this.l,$,"[Invalid Chunked Response]"),Sn(this),Lr(this);else if(0<$.length&&!this.W){this.W=!0;var Zt=this.j;Zt.g==this&&Zt.ba&&!Zt.M&&(Zt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Io(Zt),Zt.M=!0,le(11))}}else Zn(this.i,this.l,$,null),go(this,$);te==4&&Sn(this),this.o&&!this.J&&(te==4?Pl(this.j,this):(this.o=!1,Gi(this)))}else d_(this.g),d==400&&0<$.indexOf("Unknown SID")?(this.s=3,le(12)):(this.s=0,le(13)),Sn(this),Lr(this)}}}catch{}finally{}};function tl(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Xd(a,h){var d=a.C,T=h.indexOf(`
`,d);return T==-1?_o:(d=Number(h.substring(d,T)),isNaN(d)?Ju:(T+=1,T+d>h.length?_o:(h=h.slice(T,T+d),a.C=T+d,h)))}rn.prototype.cancel=function(){this.J=!0,Sn(this)};function Gi(a){a.S=Date.now()+a.I,el(a,a.I)}function el(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Mr(m(a.ba,a),h)}function mo(a){a.B&&(u.clearTimeout(a.B),a.B=null)}rn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Wd(this.i,this.A),this.L!=2&&(Or(),le(17)),Sn(this),this.s=2,Lr(this)):el(this,this.S-a)};function Lr(a){a.j.G==0||a.J||Pl(a.j,a)}function Sn(a){mo(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,zu(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function go(a,h){try{var d=a.j;if(d.G!=0&&(d.g==a||yo(d.h,a))){if(!a.K&&yo(d.h,a)&&d.G==3){try{var T=d.Da.g.parse(h)}catch{T=null}if(Array.isArray(T)&&T.length==3){var D=T;if(D[0]==0){t:if(!d.u){if(d.g)if(d.g.F+3e3<a.F)Zi(d),Yi(d);else break t;wo(d),le(18)}}else d.za=D[1],0<d.za-d.T&&37500>D[2]&&d.F&&d.v==0&&!d.C&&(d.C=Mr(m(d.Za,d),6e3));if(1>=il(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else Dn(d,11)}else if((a.K||d.g==a)&&Zi(d),!C(h))for(D=d.Da.g.parse(h),h=0;h<D.length;h++){let dt=D[h];if(d.T=dt[0],dt=dt[1],d.G==2)if(dt[0]=="c"){d.K=dt[1],d.ia=dt[2];const Zt=dt[3];Zt!=null&&(d.la=Zt,d.j.info("VER="+d.la));const te=dt[4];te!=null&&(d.Aa=te,d.j.info("SVER="+d.Aa));const nr=dt[5];nr!=null&&typeof nr=="number"&&0<nr&&(T=1.5*nr,d.L=T,d.j.info("backChannelRequestTimeoutMs_="+T)),T=d;const ke=a.g;if(ke){const es=ke.g?ke.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(es){var N=T.h;N.g||es.indexOf("spdy")==-1&&es.indexOf("quic")==-1&&es.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(vo(N,N.h),N.h=null))}if(T.D){const Ao=ke.g?ke.g.getResponseHeader("X-HTTP-Session-Id"):null;Ao&&(T.ya=Ao,It(T.I,T.D,Ao))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-a.F,d.j.info("Handshake RTT: "+d.R+"ms")),T=d;var $=a;if(T.qa=Dl(T,T.J?T.ia:null,T.W),$.K){sl(T.h,$);var yt=$,Kt=T.L;Kt&&(yt.I=Kt),yt.B&&(mo(yt),Gi(yt)),T.g=$}else bl(T);0<d.i.length&&Ji(d)}else dt[0]!="stop"&&dt[0]!="close"||Dn(d,7);else d.G==3&&(dt[0]=="stop"||dt[0]=="close"?dt[0]=="stop"?Dn(d,7):Eo(d):dt[0]!="noop"&&d.l&&d.l.ta(dt),d.v=0)}}Or(4)}catch{}}var Yd=class{constructor(a,h){this.g=a,this.map=h}};function nl(a){this.l=a||10,u.PerformanceNavigationTiming?(a=u.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rl(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function il(a){return a.h?1:a.g?a.g.size:0}function yo(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function vo(a,h){a.g?a.g.add(h):a.h=h}function sl(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}nl.prototype.cancel=function(){if(this.i=ol(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function ol(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const d of a.g.values())h=h.concat(d.D);return h}return p(a.i)}function Jd(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var h=[],d=a.length,T=0;T<d;T++)h.push(a[T]);return h}h=[],d=0;for(T in a)h[d++]=a[T];return h}function Zd(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var h=[];a=a.length;for(var d=0;d<a;d++)h.push(d);return h}h=[],d=0;for(const T in a)h[d++]=T;return h}}}function al(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var d=Zd(a),T=Jd(a),D=T.length,N=0;N<D;N++)h.call(void 0,T[N],d&&d[N],a)}var ul=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function t_(a,h){if(a){a=a.split("&");for(var d=0;d<a.length;d++){var T=a[d].indexOf("="),D=null;if(0<=T){var N=a[d].substring(0,T);D=a[d].substring(T+1)}else N=a[d];h(N,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Cn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Cn){this.h=a.h,Ki(this,a.j),this.o=a.o,this.g=a.g,Hi(this,a.s),this.l=a.l;var h=a.i,d=new Br;d.i=h.i,h.g&&(d.g=new Map(h.g),d.h=h.h),ll(this,d),this.m=a.m}else a&&(h=String(a).match(ul))?(this.h=!1,Ki(this,h[1]||"",!0),this.o=$r(h[2]||""),this.g=$r(h[3]||"",!0),Hi(this,h[4]),this.l=$r(h[5]||"",!0),ll(this,h[6]||"",!0),this.m=$r(h[7]||"")):(this.h=!1,this.i=new Br(null,this.h))}Cn.prototype.toString=function(){var a=[],h=this.j;h&&a.push(Ur(h,cl,!0),":");var d=this.g;return(d||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Ur(h,cl,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&a.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(Ur(d,d.charAt(0)=="/"?r_:n_,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",Ur(d,s_)),a.join("")};function He(a){return new Cn(a)}function Ki(a,h,d){a.j=d?$r(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Hi(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function ll(a,h,d){h instanceof Br?(a.i=h,o_(a.i,a.h)):(d||(h=Ur(h,i_)),a.i=new Br(h,a.h))}function It(a,h,d){a.i.set(h,d)}function Wi(a){return It(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function $r(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ur(a,h,d){return typeof a=="string"?(a=encodeURI(a).replace(h,e_),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function e_(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var cl=/[#\/\?@]/g,n_=/[#\?:]/g,r_=/[#\?]/g,i_=/[#\?@]/g,s_=/#/g;function Br(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function sn(a){a.g||(a.g=new Map,a.h=0,a.i&&t_(a.i,function(h,d){a.add(decodeURIComponent(h.replace(/\+/g," ")),d)}))}i=Br.prototype,i.add=function(a,h){sn(this),this.i=null,a=tr(this,a);var d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(h),this.h+=1,this};function hl(a,h){sn(a),h=tr(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function fl(a,h){return sn(a),h=tr(a,h),a.g.has(h)}i.forEach=function(a,h){sn(this),this.g.forEach(function(d,T){d.forEach(function(D){a.call(h,D,T,this)},this)},this)},i.na=function(){sn(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),d=[];for(let T=0;T<h.length;T++){const D=a[T];for(let N=0;N<D.length;N++)d.push(h[T])}return d},i.V=function(a){sn(this);let h=[];if(typeof a=="string")fl(this,a)&&(h=h.concat(this.g.get(tr(this,a))));else{a=Array.from(this.g.values());for(let d=0;d<a.length;d++)h=h.concat(a[d])}return h},i.set=function(a,h){return sn(this),this.i=null,a=tr(this,a),fl(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},i.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function dl(a,h,d){hl(a,h),0<d.length&&(a.i=null,a.g.set(tr(a,h),p(d)),a.h+=d.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var d=0;d<h.length;d++){var T=h[d];const N=encodeURIComponent(String(T)),$=this.V(T);for(T=0;T<$.length;T++){var D=N;$[T]!==""&&(D+="="+encodeURIComponent(String($[T]))),a.push(D)}}return this.i=a.join("&")};function tr(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function o_(a,h){h&&!a.j&&(sn(a),a.i=null,a.g.forEach(function(d,T){var D=T.toLowerCase();T!=D&&(hl(this,T),dl(this,D,d))},a)),a.j=h}function a_(a,h){const d=new Fr;if(u.Image){const T=new Image;T.onload=g(on,d,"TestLoadImage: loaded",!0,h,T),T.onerror=g(on,d,"TestLoadImage: error",!1,h,T),T.onabort=g(on,d,"TestLoadImage: abort",!1,h,T),T.ontimeout=g(on,d,"TestLoadImage: timeout",!1,h,T),u.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=a}else h(!1)}function u_(a,h){const d=new Fr,T=new AbortController,D=setTimeout(()=>{T.abort(),on(d,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:T.signal}).then(N=>{clearTimeout(D),N.ok?on(d,"TestPingServer: ok",!0,h):on(d,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),on(d,"TestPingServer: error",!1,h)})}function on(a,h,d,T,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),T(d)}catch{}}function l_(){this.g=new Gd}function c_(a,h,d){const T=d||"";try{al(a,function(D,N){let $=D;c(D)&&($=uo(D)),h.push(T+N+"="+encodeURIComponent($))})}catch(D){throw h.push(T+"type="+encodeURIComponent("_badmap")),D}}function jr(a){this.l=a.Ub||null,this.j=a.eb||!1}E(jr,lo),jr.prototype.g=function(){return new Qi(this.l,this.j)},jr.prototype.i=function(a){return function(){return a}}({});function Qi(a,h){Jt.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Qi,Jt),i=Qi.prototype,i.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,qr(this)},i.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||u).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zr(this)),this.readyState=0},i.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,qr(this)),this.g&&(this.readyState=3,qr(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_l(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function _l(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}i.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?zr(this):qr(this),this.readyState==3&&_l(this)}},i.Ra=function(a){this.g&&(this.response=this.responseText=a,zr(this))},i.Qa=function(a){this.g&&(this.response=a,zr(this))},i.ga=function(){this.g&&zr(this)};function zr(a){a.readyState=4,a.l=null,a.j=null,a.v=null,qr(a)}i.setRequestHeader=function(a,h){this.u.append(a,h)},i.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var d=h.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=h.next();return a.join(`\r
`)};function qr(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Qi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function pl(a){let h="";return O(a,function(d,T){h+=T,h+=":",h+=d,h+=`\r
`}),h}function To(a,h,d){t:{for(T in d){var T=!1;break t}T=!0}T||(d=pl(d),typeof a=="string"?d!=null&&encodeURIComponent(String(d)):It(a,h,d))}function Nt(a){Jt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Nt,Jt);var h_=/^https?$/i,f_=["POST","PUT"];i=Nt.prototype,i.Ha=function(a){this.J=a},i.ea=function(a,h,d,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fo.g(),this.v=this.o?qu(this.o):qu(fo),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(N){ml(this,N);return}if(a=d||"",d=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var D in T)d.set(D,T[D]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const N of T.keys())d.set(N,T.get(N));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(d.keys()).find(N=>N.toLowerCase()=="content-type"),D=u.FormData&&a instanceof u.FormData,!(0<=Array.prototype.indexOf.call(f_,h,void 0))||T||D||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,$]of d)this.g.setRequestHeader(N,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{vl(this),this.u=!0,this.g.send(a),this.u=!1}catch(N){ml(this,N)}};function ml(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,gl(a),Xi(a)}function gl(a){a.A||(a.A=!0,ue(a,"complete"),ue(a,"error"))}i.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ue(this,"complete"),ue(this,"abort"),Xi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xi(this,!0)),Nt.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?yl(this):this.bb())},i.bb=function(){yl(this)};function yl(a){if(a.h&&typeof o<"u"&&(!a.v[1]||We(a)!=4||a.Z()!=2)){if(a.u&&We(a)==4)Uu(a.Ea,0,a);else if(ue(a,"readystatechange"),We(a)==4){a.h=!1;try{const $=a.Z();t:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break t;default:h=!1}var d;if(!(d=h)){var T;if(T=$===0){var D=String(a.D).match(ul)[1]||null;!D&&u.self&&u.self.location&&(D=u.self.location.protocol.slice(0,-1)),T=!h_.test(D?D.toLowerCase():"")}d=T}if(d)ue(a,"complete"),ue(a,"success");else{a.m=6;try{var N=2<We(a)?a.g.statusText:""}catch{N=""}a.l=N+" ["+a.Z()+"]",gl(a)}}finally{Xi(a)}}}}function Xi(a,h){if(a.g){vl(a);const d=a.g,T=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||ue(a,"ready");try{d.onreadystatechange=T}catch{}}}function vl(a){a.I&&(u.clearTimeout(a.I),a.I=null)}i.isActive=function(){return!!this.g};function We(a){return a.g?a.g.readyState:0}i.Z=function(){try{return 2<We(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),qd(h)}};function Tl(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function d_(a){const h={};a=(a.g&&2<=We(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<a.length;T++){if(C(a[T]))continue;var d=R(a[T]);const D=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const N=h[D]||[];h[D]=N,N.push(d)}I(h,function(T){return T.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gr(a,h,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||h}function El(a){this.Aa=0,this.i=[],this.j=new Fr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gr("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gr("baseRetryDelayMs",5e3,a),this.cb=Gr("retryDelaySeedMs",1e4,a),this.Wa=Gr("forwardChannelMaxRetries",2,a),this.wa=Gr("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new nl(a&&a.concurrentRequestLimit),this.Da=new l_,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=El.prototype,i.la=8,i.G=1,i.connect=function(a,h,d,T){le(0),this.W=a,this.H=h||{},d&&T!==void 0&&(this.H.OSID=d,this.H.OAID=T),this.F=this.X,this.I=Dl(this,null,this.W),Ji(this)};function Eo(a){if(wl(a),a.G==3){var h=a.U++,d=He(a.I);if(It(d,"SID",a.K),It(d,"RID",h),It(d,"TYPE","terminate"),Kr(a,d),h=new rn(a,a.j,h),h.L=2,h.v=Wi(He(d)),d=!1,u.navigator&&u.navigator.sendBeacon)try{d=u.navigator.sendBeacon(h.v.toString(),"")}catch{}!d&&u.Image&&(new Image().src=h.v,d=!0),d||(h.g=Vl(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Gi(h)}Cl(a)}function Yi(a){a.g&&(Io(a),a.g.cancel(),a.g=null)}function wl(a){Yi(a),a.u&&(u.clearTimeout(a.u),a.u=null),Zi(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&u.clearTimeout(a.s),a.s=null)}function Ji(a){if(!rl(a.h)&&!a.s){a.s=!0;var h=a.Ga;pt||gt(),ot||(pt(),ot=!0),J.add(h,a),a.B=0}}function __(a,h){return il(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Mr(m(a.Ga,a,h),Sl(a,a.B)),a.B++,!0)}i.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const D=new rn(this,this.j,a);let N=this.o;if(this.S&&(N?(N=y(N),b(N,this.S)):N=this.S),this.m!==null||this.O||(D.H=N,N=null),this.P)t:{for(var h=0,d=0;d<this.i.length;d++){e:{var T=this.i[d];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break e}T=void 0}if(T===void 0)break;if(h+=T,4096<h){h=d;break t}if(h===4096||d===this.i.length-1){h=d+1;break t}}h=1e3}else h=1e3;h=Al(this,D,h),d=He(this.I),It(d,"RID",a),It(d,"CVER",22),this.D&&It(d,"X-HTTP-Session-Id",this.D),Kr(this,d),N&&(this.O?h="headers="+encodeURIComponent(String(pl(N)))+"&"+h:this.m&&To(d,this.m,N)),vo(this.h,D),this.Ua&&It(d,"TYPE","init"),this.P?(It(d,"$req",h),It(d,"SID","null"),D.T=!0,po(D,d,null)):po(D,d,h),this.G=2}}else this.G==3&&(a?Il(this,a):this.i.length==0||rl(this.h)||Il(this))};function Il(a,h){var d;h?d=h.l:d=a.U++;const T=He(a.I);It(T,"SID",a.K),It(T,"RID",d),It(T,"AID",a.T),Kr(a,T),a.m&&a.o&&To(T,a.m,a.o),d=new rn(a,a.j,d,a.B+1),a.m===null&&(d.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Al(a,d,1e3),d.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),vo(a.h,d),po(d,T,h)}function Kr(a,h){a.H&&O(a.H,function(d,T){It(h,T,d)}),a.l&&al({},function(d,T){It(h,T,d)})}function Al(a,h,d){d=Math.min(a.i.length,d);var T=a.l?m(a.l.Na,a.l,a):null;t:{var D=a.i;let N=-1;for(;;){const $=["count="+d];N==-1?0<d?(N=D[0].g,$.push("ofs="+N)):N=0:$.push("ofs="+N);let yt=!0;for(let Kt=0;Kt<d;Kt++){let dt=D[Kt].g;const Zt=D[Kt].map;if(dt-=N,0>dt)N=Math.max(0,D[Kt].g-100),yt=!1;else try{c_(Zt,$,"req"+dt+"_")}catch{T&&T(Zt)}}if(yt){T=$.join("&");break t}}}return a=a.i.splice(0,d),h.D=a,T}function bl(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;pt||gt(),ot||(pt(),ot=!0),J.add(h,a),a.v=0}}function wo(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Mr(m(a.Fa,a),Sl(a,a.v)),a.v++,!0)}i.Fa=function(){if(this.u=null,Rl(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Mr(m(this.ab,this),a)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,le(10),Yi(this),Rl(this))};function Io(a){a.A!=null&&(u.clearTimeout(a.A),a.A=null)}function Rl(a){a.g=new rn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=He(a.qa);It(h,"RID","rpc"),It(h,"SID",a.K),It(h,"AID",a.T),It(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&It(h,"TO",a.ja),It(h,"TYPE","xmlhttp"),Kr(a,h),a.m&&a.o&&To(h,a.m,a.o),a.L&&(a.g.I=a.L);var d=a.g;a=a.ia,d.L=1,d.v=Wi(He(h)),d.m=null,d.P=!0,Zu(d,a)}i.Za=function(){this.C!=null&&(this.C=null,Yi(this),wo(this),le(19))};function Zi(a){a.C!=null&&(u.clearTimeout(a.C),a.C=null)}function Pl(a,h){var d=null;if(a.g==h){Zi(a),Io(a),a.g=null;var T=2}else if(yo(a.h,h))d=h.D,sl(a.h,h),T=1;else return;if(a.G!=0){if(h.o)if(T==1){d=h.m?h.m.length:0,h=Date.now()-h.F;var D=a.B;T=ji(),ue(T,new Qu(T,d)),Ji(a)}else bl(a);else if(D=h.s,D==3||D==0&&0<h.X||!(T==1&&__(a,h)||T==2&&wo(a)))switch(d&&0<d.length&&(h=a.h,h.i=h.i.concat(d)),D){case 1:Dn(a,5);break;case 4:Dn(a,10);break;case 3:Dn(a,6);break;default:Dn(a,2)}}}function Sl(a,h){let d=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(d*=2),d*h}function Dn(a,h){if(a.j.info("Error code "+h),h==2){var d=m(a.fb,a),T=a.Xa;const D=!T;T=new Cn(T||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ki(T,"https"),Wi(T),D?a_(T.toString(),d):u_(T.toString(),d)}else le(2);a.G=0,a.l&&a.l.sa(h),Cl(a),wl(a)}i.fb=function(a){a?(this.j.info("Successfully pinged google.com"),le(2)):(this.j.info("Failed to ping google.com"),le(1))};function Cl(a){if(a.G=0,a.ka=[],a.l){const h=ol(a.h);(h.length!=0||a.i.length!=0)&&(w(a.ka,h),w(a.ka,a.i),a.h.i.length=0,p(a.i),a.i.length=0),a.l.ra()}}function Dl(a,h,d){var T=d instanceof Cn?He(d):new Cn(d);if(T.g!="")h&&(T.g=h+"."+T.g),Hi(T,T.s);else{var D=u.location;T=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var N=new Cn(null);T&&Ki(N,T),h&&(N.g=h),D&&Hi(N,D),d&&(N.l=d),T=N}return d=a.D,h=a.ya,d&&h&&It(T,d,h),It(T,"VER",a.la),Kr(a,T),T}function Vl(a,h,d){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Nt(new jr({eb:d})):new Nt(a.pa),h.Ha(a.J),h}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function kl(){}i=kl.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function ts(){}ts.prototype.g=function(a,h){return new ye(a,h)};function ye(a,h){Jt.call(this),this.g=new El(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!C(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!C(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new er(this)}E(ye,Jt),ye.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ye.prototype.close=function(){Eo(this.g)},ye.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.u&&(d={},d.__data__=uo(a),a=d);h.i.push(new Yd(h.Ya++,a)),h.G==3&&Ji(h)},ye.prototype.N=function(){this.g.l=null,delete this.j,Eo(this.g),delete this.g,ye.aa.N.call(this)};function xl(a){co.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){t:{for(const d in h){a=d;break t}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}E(xl,co);function Nl(){ho.call(this),this.status=1}E(Nl,ho);function er(a){this.g=a}E(er,kl),er.prototype.ua=function(){ue(this.g,"a")},er.prototype.ta=function(a){ue(this.g,new xl(a))},er.prototype.sa=function(a){ue(this.g,new Nl)},er.prototype.ra=function(){ue(this.g,"b")},ts.prototype.createWebChannel=ts.prototype.g,ye.prototype.send=ye.prototype.o,ye.prototype.open=ye.prototype.m,ye.prototype.close=ye.prototype.close,vh=function(){return new ts},yh=function(){return ji()},gh=Pn,Jo={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zi.NO_ERROR=0,zi.TIMEOUT=8,zi.HTTP_ERROR=6,as=zi,Xu.COMPLETE="complete",mh=Xu,Gu.EventType=Nr,Nr.OPEN="a",Nr.CLOSE="b",Nr.ERROR="c",Nr.MESSAGE="d",Jt.prototype.listen=Jt.prototype.K,Qr=Gu,ph=jr,Nt.prototype.listenOnce=Nt.prototype.L,Nt.prototype.getLastError=Nt.prototype.Ka,Nt.prototype.getLastErrorCode=Nt.prototype.Ba,Nt.prototype.getStatus=Nt.prototype.Z,Nt.prototype.getResponseJson=Nt.prototype.Oa,Nt.prototype.getResponseText=Nt.prototype.oa,Nt.prototype.send=Nt.prototype.ea,Nt.prototype.setWithCredentials=Nt.prototype.Ha,_h=Nt}).apply(typeof ns<"u"?ns:typeof self<"u"?self:typeof window<"u"?window:{});const Xl="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ne.UNAUTHENTICATED=new ne(null),ne.GOOGLE_CREDENTIALS=new ne("google-credentials-uid"),ne.FIRST_PARTY=new ne("first-party-uid"),ne.MOCK_USER=new ne("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cr="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn=new ah("@firebase/firestore");function Hr(){return qn.logLevel}function B(i,...t){if(qn.logLevel<=ct.DEBUG){const e=t.map(La);qn.debug(`Firestore (${Cr}): ${i}`,...e)}}function Ze(i,...t){if(qn.logLevel<=ct.ERROR){const e=t.map(La);qn.error(`Firestore (${Cr}): ${i}`,...e)}}function mr(i,...t){if(qn.logLevel<=ct.WARN){const e=t.map(La);qn.warn(`Firestore (${Cr}): ${i}`,...e)}}function La(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H(i="Unexpected state"){const t=`FIRESTORE (${Cr}) INTERNAL ASSERTION FAILED: `+i;throw Ze(t),new Error(t)}function Et(i,t){i||H()}function Y(i,t){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class j extends Sr{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class am{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(ne.UNAUTHENTICATED))}shutdown(){}}class um{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class lm{constructor(t){this.t=t,this.currentUser=ne.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const r=l=>this.i!==n?(n=this.i,e(l)):Promise.resolve();let s=new Je;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Je,t.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},u=l=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?u(l):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Je)}},0),o()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(n=>this.i!==t?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Et(typeof n.accessToken=="string"),new Th(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Et(t===null||typeof t=="string"),new ne(t)}}class cm{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=ne.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class hm{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new cm(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(ne.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fm{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dm{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=s=>{s.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,B("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};const r=s=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Et(typeof e.token=="string"),this.R=e.token,new fm(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(i){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(i);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let n=0;n<i;n++)e[n]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const r=_m(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<e&&(n+=t.charAt(r[s]%t.length))}return n}}function mt(i,t){return i<t?-1:i>t?1:0}function gr(i,t,e){return i.length===t.length&&i.every((n,r)=>e(n,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new j(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new j(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new j(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new j(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Bt.fromMillis(Date.now())}static fromDate(t){return Bt.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Bt(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?mt(this.nanoseconds,t.nanoseconds):mt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Q(t)}static min(){return new Q(new Bt(0,0))}static max(){return new Q(new Bt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(t,e,n){e===void 0?e=0:e>t.length&&H(),n===void 0?n=t.length-e:n>t.length-e&&H(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return di.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof di?t.forEach(n=>{e.push(n)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.get(r),o=e.get(r);if(s<o)return-1;if(s>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Ct extends di{construct(t,e,n){return new Ct(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new j(M.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter(r=>r.length>0))}return new Ct(e)}static emptyPath(){return new Ct([])}}const pm=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends di{construct(t,e,n){return new Wt(t,e,n)}static isValidIdentifier(t){return pm.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Wt(["__name__"])}static fromServerFormat(t){const e=[];let n="",r=0;const s=()=>{if(n.length===0)throw new j(M.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let o=!1;for(;r<t.length;){const u=t[r];if(u==="\\"){if(r+1===t.length)throw new j(M.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new j(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=l,r+=2}else u==="`"?(o=!o,r++):u!=="."||o?(n+=u,r++):(s(),r++)}if(s(),o)throw new j(M.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Wt(e)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(t){this.path=t}static fromPath(t){return new z(Ct.fromString(t))}static fromName(t){return new z(Ct.fromString(t).popFirst(5))}static empty(){return new z(Ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ct.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Ct.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new z(new Ct(t.slice()))}}function mm(i,t){const e=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,r=Q.fromTimestamp(n===1e9?new Bt(e+1,0):new Bt(e,n));return new yn(r,z.empty(),t)}function gm(i){return new yn(i.readTime,i.key,-1)}class yn{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new yn(Q.min(),z.empty(),-1)}static max(){return new yn(Q.max(),z.empty(),-1)}}function ym(i,t){let e=i.readTime.compareTo(t.readTime);return e!==0?e:(e=z.comparator(i.documentKey,t.documentKey),e!==0?e:mt(i.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Tm{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Si(i){if(i.code!==M.FAILED_PRECONDITION||i.message!==vm)throw i;B("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new F((n,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(n,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof F?e:F.resolve(e)}catch(e){return F.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):F.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):F.reject(e)}static resolve(t){return new F((e,n)=>{e(t)})}static reject(t){return new F((e,n)=>{n(t)})}static waitFor(t){return new F((e,n)=>{let r=0,s=0,o=!1;t.forEach(u=>{++r,u.next(()=>{++s,o&&s===r&&e()},l=>n(l))}),o=!0,s===r&&e()})}static or(t){let e=F.resolve(!1);for(const n of t)e=e.next(r=>r?F.resolve(r):n());return e}static forEach(t,e){const n=[];return t.forEach((r,s)=>{n.push(e.call(this,r,s))}),this.waitFor(n)}static mapArray(t,e){return new F((n,r)=>{const s=t.length,o=new Array(s);let u=0;for(let l=0;l<s;l++){const c=l;e(t[c]).next(f=>{o[c]=f,++u,u===s&&n(o)},f=>r(f))}})}static doWhile(t,e){return new F((n,r)=>{const s=()=>{t()===!0?e().next(()=>{s()},r):n()};s()})}}function Em(i){const t=i.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Ci(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=n=>this.ie(n),this.se=n=>e.writeSequenceNumber(n))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}$a.oe=-1;function Ms(i){return i==null}function Ts(i){return i===0&&1/i==-1/0}function wm(i){return typeof i=="number"&&Number.isInteger(i)&&!Ts(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(i){let t=0;for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t++;return t}function Qn(i,t){for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t(e,i[e])}function wh(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(t,e){this.comparator=t,this.root=e||Ht.EMPTY}insert(t,e){return new xt(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(t){return new xt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(n===0)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,n)=>(t(e,n),!1))}toString(){const t=[];return this.inorderTraversal((e,n)=>(t.push(`${e}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new rs(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new rs(this.root,t,this.comparator,!1)}getReverseIterator(){return new rs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new rs(this.root,t,this.comparator,!0)}}class rs{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?n(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ht{constructor(t,e,n,r,s){this.key=t,this.value=e,this.color=n??Ht.RED,this.left=r??Ht.EMPTY,this.right=s??Ht.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,s){return new Ht(t??this.key,e??this.value,n??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const s=n(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,n),null):s===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ht.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return Ht.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ht.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ht.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();const t=this.left.check();if(t!==this.right.check())throw H();return t+(this.isRed()?0:1)}}Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(t,e,n,r,s){return this}insert(t,e,n){return new Ht(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(t){this.comparator=t,this.data=new xt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,n)=>(t(e),!1))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Jl(this.data.getIterator())}getIteratorFrom(t){return new Jl(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(n=>{e=e.add(n)}),e}isEqual(t){if(!(t instanceof Xt)||this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=n.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Xt(this.comparator);return e.data=t,e}}class Jl{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(t){this.fields=t,t.sort(Wt.comparator)}static empty(){return new Ee([])}unionWith(t){let e=new Xt(Wt.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new Ee(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return gr(this.fields,t.fields,(e,n)=>e.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ih("Invalid base64 string: "+s):s}}(t);return new ae(e)}static fromUint8Array(t){const e=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new ae(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return mt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ae.EMPTY_BYTE_STRING=new ae("");const Im=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vn(i){if(Et(!!i),typeof i=="string"){let t=0;const e=Im.exec(i);if(Et(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Lt(i.seconds),nanos:Lt(i.nanos)}}function Lt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Gn(i){return typeof i=="string"?ae.fromBase64String(i):ae.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(i){var t,e;return((e=(((t=i==null?void 0:i.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function Ba(i){const t=i.mapValue.fields.__previous_value__;return Ua(t)?Ba(t):t}function _i(i){const t=vn(i.mapValue.fields.__local_write_time__.timestampValue);return new Bt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(t,e,n,r,s,o,u,l,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=l,this.useFetchStreams=c}}class pi{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new pi("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof pi&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Kn(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Ua(i)?4:bm(i)?9007199254740991:10:H()}function je(i,t){if(i===t)return!0;const e=Kn(i);if(e!==Kn(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return _i(i).isEqual(_i(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=vn(r.timestampValue),u=vn(s.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(i,t);case 5:return i.stringValue===t.stringValue;case 6:return function(r,s){return Gn(r.bytesValue).isEqual(Gn(s.bytesValue))}(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return function(r,s){return Lt(r.geoPointValue.latitude)===Lt(s.geoPointValue.latitude)&&Lt(r.geoPointValue.longitude)===Lt(s.geoPointValue.longitude)}(i,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Lt(r.integerValue)===Lt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Lt(r.doubleValue),u=Lt(s.doubleValue);return o===u?Ts(o)===Ts(u):isNaN(o)&&isNaN(u)}return!1}(i,t);case 9:return gr(i.arrayValue.values||[],t.arrayValue.values||[],je);case 10:return function(r,s){const o=r.mapValue.fields||{},u=s.mapValue.fields||{};if(Yl(o)!==Yl(u))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(u[l]===void 0||!je(o[l],u[l])))return!1;return!0}(i,t);default:return H()}}function mi(i,t){return(i.values||[]).find(e=>je(e,t))!==void 0}function yr(i,t){if(i===t)return 0;const e=Kn(i),n=Kn(t);if(e!==n)return mt(e,n);switch(e){case 0:case 9007199254740991:return 0;case 1:return mt(i.booleanValue,t.booleanValue);case 2:return function(s,o){const u=Lt(s.integerValue||s.doubleValue),l=Lt(o.integerValue||o.doubleValue);return u<l?-1:u>l?1:u===l?0:isNaN(u)?isNaN(l)?0:-1:1}(i,t);case 3:return Zl(i.timestampValue,t.timestampValue);case 4:return Zl(_i(i),_i(t));case 5:return mt(i.stringValue,t.stringValue);case 6:return function(s,o){const u=Gn(s),l=Gn(o);return u.compareTo(l)}(i.bytesValue,t.bytesValue);case 7:return function(s,o){const u=s.split("/"),l=o.split("/");for(let c=0;c<u.length&&c<l.length;c++){const f=mt(u[c],l[c]);if(f!==0)return f}return mt(u.length,l.length)}(i.referenceValue,t.referenceValue);case 8:return function(s,o){const u=mt(Lt(s.latitude),Lt(o.latitude));return u!==0?u:mt(Lt(s.longitude),Lt(o.longitude))}(i.geoPointValue,t.geoPointValue);case 9:return function(s,o){const u=s.values||[],l=o.values||[];for(let c=0;c<u.length&&c<l.length;++c){const f=yr(u[c],l[c]);if(f)return f}return mt(u.length,l.length)}(i.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===is.mapValue&&o===is.mapValue)return 0;if(s===is.mapValue)return 1;if(o===is.mapValue)return-1;const u=s.fields||{},l=Object.keys(u),c=o.fields||{},f=Object.keys(c);l.sort(),f.sort();for(let _=0;_<l.length&&_<f.length;++_){const m=mt(l[_],f[_]);if(m!==0)return m;const g=yr(u[l[_]],c[f[_]]);if(g!==0)return g}return mt(l.length,f.length)}(i.mapValue,t.mapValue);default:throw H()}}function Zl(i,t){if(typeof i=="string"&&typeof t=="string"&&i.length===t.length)return mt(i,t);const e=vn(i),n=vn(t),r=mt(e.seconds,n.seconds);return r!==0?r:mt(e.nanos,n.nanos)}function vr(i){return Zo(i)}function Zo(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(e){const n=vn(e);return`time(${n.seconds},${n.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(e){return Gn(e).toBase64()}(i.bytesValue):"referenceValue"in i?function(e){return z.fromName(e).toString()}(i.referenceValue):"geoPointValue"in i?function(e){return`geo(${e.latitude},${e.longitude})`}(i.geoPointValue):"arrayValue"in i?function(e){let n="[",r=!0;for(const s of e.values||[])r?r=!1:n+=",",n+=Zo(s);return n+"]"}(i.arrayValue):"mapValue"in i?function(e){const n=Object.keys(e.fields||{}).sort();let r="{",s=!0;for(const o of n)s?s=!1:r+=",",r+=`${o}:${Zo(e.fields[o])}`;return r+"}"}(i.mapValue):H()}function ta(i){return!!i&&"integerValue"in i}function ja(i){return!!i&&"arrayValue"in i}function tc(i){return!!i&&"nullValue"in i}function ec(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function us(i){return!!i&&"mapValue"in i}function ei(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const t={mapValue:{fields:{}}};return Qn(i.mapValue.fields,(e,n)=>t.mapValue.fields[e]=ei(n)),t}if(i.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(i.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=ei(i.arrayValue.values[e]);return t}return Object.assign({},i)}function bm(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(t){this.value=t}static empty(){return new fe({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!us(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ei(e)}setAll(t){let e=Wt.emptyPath(),n={},r=[];t.forEach((o,u)=>{if(!e.isImmediateParentOf(u)){const l=this.getFieldsMap(e);this.applyChanges(l,n,r),n={},r=[],e=u.popLast()}o?n[u.lastSegment()]=ei(o):r.push(u.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,n,r)}delete(t){const e=this.field(t.popLast());us(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return je(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];us(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){Qn(e,(r,s)=>t[r]=s);for(const r of n)delete t[r]}clone(){return new fe(ei(this.value))}}function Ah(i){const t=[];return Qn(i.fields,(e,n)=>{const r=new Wt([e]);if(us(n)){const s=Ah(n.mapValue).fields;if(s.length===0)t.push(r);else for(const o of s)t.push(r.child(o))}else t.push(r)}),new Ee(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(t,e,n,r,s,o,u){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.createTime=s,this.data=o,this.documentState=u}static newInvalidDocument(t){return new re(t,0,Q.min(),Q.min(),Q.min(),fe.empty(),0)}static newFoundDocument(t,e,n,r){return new re(t,1,e,Q.min(),n,r,0)}static newNoDocument(t,e){return new re(t,2,e,Q.min(),Q.min(),fe.empty(),0)}static newUnknownDocument(t,e){return new re(t,3,e,Q.min(),Q.min(),fe.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Q.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=fe.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=fe.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Q.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof re&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new re(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(t,e){this.position=t,this.inclusive=e}}function nc(i,t,e){let n=0;for(let r=0;r<i.position.length;r++){const s=t[r],o=i.position[r];if(s.field.isKeyField()?n=z.comparator(z.fromName(o.referenceValue),e.key):n=yr(o,e.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function rc(i,t){if(i===null)return t===null;if(t===null||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let e=0;e<i.position.length;e++)if(!je(i.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(t,e="asc"){this.field=t,this.dir=e}}function Rm(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{}class Ut extends bh{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,n):new Sm(t,e,n):e==="array-contains"?new Vm(t,n):e==="in"?new km(t,n):e==="not-in"?new xm(t,n):e==="array-contains-any"?new Nm(t,n):new Ut(t,e,n)}static createKeyFieldInFilter(t,e,n){return e==="in"?new Cm(t,n):new Dm(t,n)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(yr(e,this.value)):e!==null&&Kn(this.value)===Kn(e)&&this.matchesComparison(yr(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return H()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ze extends bh{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new ze(t,e)}matches(t){return Rh(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Rh(i){return i.op==="and"}function Ph(i){return Pm(i)&&Rh(i)}function Pm(i){for(const t of i.filters)if(t instanceof ze)return!1;return!0}function ea(i){if(i instanceof Ut)return i.field.canonicalString()+i.op.toString()+vr(i.value);if(Ph(i))return i.filters.map(t=>ea(t)).join(",");{const t=i.filters.map(e=>ea(e)).join(",");return`${i.op}(${t})`}}function Sh(i,t){return i instanceof Ut?function(n,r){return r instanceof Ut&&n.op===r.op&&n.field.isEqual(r.field)&&je(n.value,r.value)}(i,t):i instanceof ze?function(n,r){return r instanceof ze&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((s,o,u)=>s&&Sh(o,r.filters[u]),!0):!1}(i,t):void H()}function Ch(i){return i instanceof Ut?function(e){return`${e.field.canonicalString()} ${e.op} ${vr(e.value)}`}(i):i instanceof ze?function(e){return e.op.toString()+" {"+e.getFilters().map(Ch).join(" ,")+"}"}(i):"Filter"}class Sm extends Ut{constructor(t,e,n){super(t,e,n),this.key=z.fromName(n.referenceValue)}matches(t){const e=z.comparator(t.key,this.key);return this.matchesComparison(e)}}class Cm extends Ut{constructor(t,e){super(t,"in",e),this.keys=Dh("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class Dm extends Ut{constructor(t,e){super(t,"not-in",e),this.keys=Dh("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Dh(i,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(n=>z.fromName(n.referenceValue))}class Vm extends Ut{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return ja(e)&&mi(e.arrayValue,this.value)}}class km extends Ut{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&mi(this.value.arrayValue,e)}}class xm extends Ut{constructor(t,e){super(t,"not-in",e)}matches(t){if(mi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!mi(this.value.arrayValue,e)}}class Nm extends Ut{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!ja(e)||!e.arrayValue.values)&&e.arrayValue.values.some(n=>mi(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(t,e=null,n=[],r=[],s=null,o=null,u=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=o,this.endAt=u,this.ue=null}}function ic(i,t=null,e=[],n=[],r=null,s=null,o=null){return new Om(i,t,e,n,r,s,o)}function za(i){const t=Y(i);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(n=>ea(n)).join(","),e+="|ob:",e+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),Ms(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>vr(n)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>vr(n)).join(",")),t.ue=e}return t.ue}function qa(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<i.orderBy.length;e++)if(!Rm(i.orderBy[e],t.orderBy[e]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let e=0;e<i.filters.length;e++)if(!Sh(i.filters[e],t.filters[e]))return!1;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!rc(i.startAt,t.startAt)&&rc(i.endAt,t.endAt)}function na(i){return z.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(t,e=null,n=[],r=[],s=null,o="F",u=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=o,this.startAt=u,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Mm(i,t,e,n,r,s,o,u){return new Fs(i,t,e,n,r,s,o,u)}function Ls(i){return new Fs(i)}function sc(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Fm(i){return i.collectionGroup!==null}function ni(i){const t=Y(i);if(t.ce===null){t.ce=[];const e=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new Xt(Wt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(u=u.add(c.field))})}),u})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.ce.push(new ws(s,n))}),e.has(Wt.keyField().canonicalString())||t.ce.push(new ws(Wt.keyField(),n))}return t.ce}function Le(i){const t=Y(i);return t.le||(t.le=Lm(t,ni(i))),t.le}function Lm(i,t){if(i.limitType==="F")return ic(i.path,i.collectionGroup,t,i.filters,i.limit,i.startAt,i.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new ws(r.field,s)});const e=i.endAt?new Es(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new Es(i.startAt.position,i.startAt.inclusive):null;return ic(i.path,i.collectionGroup,t,i.filters,i.limit,e,n)}}function ra(i,t,e){return new Fs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,e,i.startAt,i.endAt)}function $s(i,t){return qa(Le(i),Le(t))&&i.limitType===t.limitType}function Vh(i){return`${za(Le(i))}|lt:${i.limitType}`}function ir(i){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>Ch(r)).join(", ")}]`),Ms(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>vr(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>vr(r)).join(",")),`Target(${n})`}(Le(i))}; limitType=${i.limitType})`}function Us(i,t){return t.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):z.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(i,t)&&function(n,r){for(const s of ni(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(i,t)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(i,t)&&function(n,r){return!(n.startAt&&!function(o,u,l){const c=nc(o,u,l);return o.inclusive?c<=0:c<0}(n.startAt,ni(n),r)||n.endAt&&!function(o,u,l){const c=nc(o,u,l);return o.inclusive?c>=0:c>0}(n.endAt,ni(n),r))}(i,t)}function $m(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function kh(i){return(t,e)=>{let n=!1;for(const r of ni(i)){const s=Um(r,t,e);if(s!==0)return s;n=n||r.field.isKeyField()}return 0}}function Um(i,t,e){const n=i.field.isKeyField()?z.comparator(t.key,e.key):function(s,o,u){const l=o.data.field(s),c=u.data.field(s);return l!==null&&c!==null?yr(l,c):H()}(i.field,t,e);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return H()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(n!==void 0){for(const[r,s]of n)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return this.inner[n]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return n.length===1?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Qn(this.inner,(e,n)=>{for(const[r,s]of n)t(r,s)})}isEmpty(){return wh(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=new xt(z.comparator);function tn(){return Bm}const xh=new xt(z.comparator);function Xr(...i){let t=xh;for(const e of i)t=t.insert(e.key,e);return t}function Nh(i){let t=xh;return i.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function On(){return ri()}function Oh(){return ri()}function ri(){return new Dr(i=>i.toString(),(i,t)=>i.isEqual(t))}const jm=new xt(z.comparator),zm=new Xt(z.comparator);function st(...i){let t=zm;for(const e of i)t=t.add(e);return t}const qm=new Xt(mt);function Gm(){return qm}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(i,t){if(i.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ts(t)?"-0":t}}function Fh(i){return{integerValue:""+i}}function Km(i,t){return wm(t)?Fh(t):Mh(i,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(){this._=void 0}}function Hm(i,t,e){return i instanceof Is?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Ua(s)&&(s=Ba(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(e,t):i instanceof gi?$h(i,t):i instanceof yi?Uh(i,t):function(r,s){const o=Lh(r,s),u=oc(o)+oc(r.Pe);return ta(o)&&ta(r.Pe)?Fh(u):Mh(r.serializer,u)}(i,t)}function Wm(i,t,e){return i instanceof gi?$h(i,t):i instanceof yi?Uh(i,t):e}function Lh(i,t){return i instanceof As?function(n){return ta(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}class Is extends Bs{}class gi extends Bs{constructor(t){super(),this.elements=t}}function $h(i,t){const e=Bh(t);for(const n of i.elements)e.some(r=>je(r,n))||e.push(n);return{arrayValue:{values:e}}}class yi extends Bs{constructor(t){super(),this.elements=t}}function Uh(i,t){let e=Bh(t);for(const n of i.elements)e=e.filter(r=>!je(r,n));return{arrayValue:{values:e}}}class As extends Bs{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function oc(i){return Lt(i.integerValue||i.doubleValue)}function Bh(i){return ja(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function Qm(i,t){return i.field.isEqual(t.field)&&function(n,r){return n instanceof gi&&r instanceof gi||n instanceof yi&&r instanceof yi?gr(n.elements,r.elements,je):n instanceof As&&r instanceof As?je(n.Pe,r.Pe):n instanceof Is&&r instanceof Is}(i.transform,t.transform)}class Xm{constructor(t,e){this.version=t,this.transformResults=e}}class Ie{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ie}static exists(t){return new Ie(void 0,t)}static updateTime(t){return new Ie(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ls(i,t){return i.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(i.updateTime):i.exists===void 0||i.exists===t.isFoundDocument()}class js{}function jh(i,t){if(!i.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return i.isNoDocument()?new Ga(i.key,Ie.none()):new Di(i.key,i.data,Ie.none());{const e=i.data,n=fe.empty();let r=new Xt(Wt.comparator);for(let s of t.fields)if(!r.has(s)){let o=e.field(s);o===null&&s.length>1&&(s=s.popLast(),o=e.field(s)),o===null?n.delete(s):n.set(s,o),r=r.add(s)}return new An(i.key,n,new Ee(r.toArray()),Ie.none())}}function Ym(i,t,e){i instanceof Di?function(r,s,o){const u=r.value.clone(),l=uc(r.fieldTransforms,s,o.transformResults);u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(i,t,e):i instanceof An?function(r,s,o){if(!ls(r.precondition,s))return void s.convertToUnknownDocument(o.version);const u=uc(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(zh(r)),l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(i,t,e):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,e)}function ii(i,t,e,n){return i instanceof Di?function(s,o,u,l){if(!ls(s.precondition,o))return u;const c=s.value.clone(),f=lc(s.fieldTransforms,l,o);return c.setAll(f),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(i,t,e,n):i instanceof An?function(s,o,u,l){if(!ls(s.precondition,o))return u;const c=lc(s.fieldTransforms,l,o),f=o.data;return f.setAll(zh(s)),f.setAll(c),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),u===null?null:u.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(_=>_.field))}(i,t,e,n):function(s,o,u){return ls(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(i,t,e)}function Jm(i,t){let e=null;for(const n of i.fieldTransforms){const r=t.data.field(n.field),s=Lh(n.transform,r||null);s!=null&&(e===null&&(e=fe.empty()),e.set(n.field,s))}return e||null}function ac(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&gr(n,r,(s,o)=>Qm(s,o))}(i.fieldTransforms,t.fieldTransforms)&&(i.type===0?i.value.isEqual(t.value):i.type!==1||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask))}class Di extends js{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class An extends js{constructor(t,e,n,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function zh(i){const t=new Map;return i.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const n=i.data.field(e);t.set(e,n)}}),t}function uc(i,t,e){const n=new Map;Et(i.length===e.length);for(let r=0;r<e.length;r++){const s=i[r],o=s.transform,u=t.data.field(s.field);n.set(s.field,Wm(o,u,e[r]))}return n}function lc(i,t,e){const n=new Map;for(const r of i){const s=r.transform,o=e.data.field(r.field);n.set(r.field,Hm(s,o,t))}return n}class Ga extends js{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Zm extends js{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&Ym(s,t,n[r])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=ii(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=ii(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=Oh();return this.mutations.forEach(r=>{const s=t.get(r.key),o=s.overlayedDocument;let u=this.applyToLocalView(o,s.mutatedFields);u=e.has(r.key)?null:u;const l=jh(o,u);l!==null&&n.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Q.min())}),n}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),st())}isEqual(t){return this.batchId===t.batchId&&gr(this.mutations,t.mutations,(e,n)=>ac(e,n))&&gr(this.baseMutations,t.baseMutations,(e,n)=>ac(e,n))}}class Ka{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){Et(t.mutations.length===n.length);let r=function(){return jm}();const s=t.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,n[o].version);return new Ka(t,e,n,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,lt;function rg(i){switch(i){default:return H();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function qh(i){if(i===void 0)return Ze("GRPC error has no .code"),M.UNKNOWN;switch(i){case Ft.OK:return M.OK;case Ft.CANCELLED:return M.CANCELLED;case Ft.UNKNOWN:return M.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return M.INTERNAL;case Ft.UNAVAILABLE:return M.UNAVAILABLE;case Ft.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Ft.NOT_FOUND:return M.NOT_FOUND;case Ft.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Ft.ABORTED:return M.ABORTED;case Ft.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Ft.DATA_LOSS:return M.DATA_LOSS;default:return H()}}(lt=Ft||(Ft={}))[lt.OK=0]="OK",lt[lt.CANCELLED=1]="CANCELLED",lt[lt.UNKNOWN=2]="UNKNOWN",lt[lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",lt[lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",lt[lt.NOT_FOUND=5]="NOT_FOUND",lt[lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",lt[lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",lt[lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",lt[lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",lt[lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",lt[lt.ABORTED=10]="ABORTED",lt[lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",lt[lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",lt[lt.INTERNAL=13]="INTERNAL",lt[lt.UNAVAILABLE=14]="UNAVAILABLE",lt[lt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg=new Fn([4294967295,4294967295],0);function cc(i){const t=ig().encode(i),e=new dh;return e.update(t),new Uint8Array(e.digest())}function hc(i){const t=new DataView(i.buffer),e=t.getUint32(0,!0),n=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Fn([e,n],0),new Fn([r,s],0)]}class Ha{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new Yr(`Invalid padding: ${e}`);if(n<0)throw new Yr(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new Yr(`Invalid hash count: ${n}`);if(t.length===0&&e!==0)throw new Yr(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=Fn.fromNumber(this.Ie)}Ee(t,e,n){let r=t.add(e.multiply(Fn.fromNumber(n)));return r.compare(sg)===1&&(r=new Fn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const e=cc(t),[n,r]=hc(e);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,r,s);if(!this.de(o))return!1}return!0}static create(t,e,n){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new Ha(s,r,e);return n.forEach(u=>o.insert(u)),o}insert(t){if(this.Ie===0)return;const e=cc(t),[n,r]=hc(e);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,r,s);this.Ae(o)}}Ae(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class Yr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(t,e,n,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const r=new Map;return r.set(t,Vi.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new zs(Q.min(),r,new xt(mt),tn(),st())}}class Vi{constructor(t,e,n,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new Vi(n,e,st(),st(),st())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(t,e,n,r){this.Re=t,this.removedTargetIds=e,this.key=n,this.Ve=r}}class Gh{constructor(t,e){this.targetId=t,this.me=e}}class Kh{constructor(t,e,n=ae.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class fc{constructor(){this.fe=0,this.ge=_c(),this.pe=ae.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=st(),e=st(),n=st();return this.ge.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:H()}}),new Vi(this.pe,this.ye,t,e,n)}ve(){this.we=!1,this.ge=_c()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Et(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class og{constructor(t){this.Le=t,this.Be=new Map,this.ke=tn(),this.qe=dc(),this.Qe=new xt(mt)}Ke(t){for(const e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(const e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{const n=this.Ge(e);switch(t.state){case 0:this.ze(e)&&n.De(t.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(t.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(n.Ne(),n.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),n.De(t.resumeToken));break;default:H()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((n,r)=>{this.ze(r)&&e(r)})}He(t){const e=t.targetId,n=t.me.count,r=this.Je(e);if(r){const s=r.target;if(na(s))if(n===0){const o=new z(s.path);this.Ue(e,o,re.newNoDocument(o,Q.min()))}else Et(n===1);else{const o=this.Ye(e);if(o!==n){const u=this.Ze(t),l=u?this.Xe(u,t,o):1;if(l!==0){this.je(e);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,c)}}}}}Ze(t){const e=t.me.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=e;let o,u;try{o=Gn(n).toUint8Array()}catch(l){if(l instanceof Ih)return mr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{u=new Ha(o,r,s)}catch(l){return mr(l instanceof Yr?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return u.Ie===0?null:u}Xe(t,e,n){return e.me.count===n-this.nt(t,e.targetId)?0:2}nt(t,e){const n=this.Le.getRemoteKeysForTarget(e);let r=0;return n.forEach(s=>{const o=this.Le.tt(),u=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(u)||(this.Ue(e,s,null),r++)}),r}rt(t){const e=new Map;this.Be.forEach((s,o)=>{const u=this.Je(o);if(u){if(s.current&&na(u.target)){const l=new z(u.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,re.newNoDocument(l,t))}s.be&&(e.set(o,s.Ce()),s.ve())}});let n=st();this.qe.forEach((s,o)=>{let u=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(n=n.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const r=new zs(t,e,this.Qe,this.ke,n);return this.ke=tn(),this.qe=dc(),this.Qe=new xt(mt),r}$e(t,e){if(!this.ze(t))return;const n=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,n),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,n){if(!this.ze(t))return;const r=this.Ge(t);this.it(t,e)?r.Fe(e,1):r.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),n&&(this.ke=this.ke.insert(e,n))}removeTarget(t){this.Be.delete(t)}Ye(t){const e=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new fc,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new Xt(mt),this.qe=this.qe.insert(t,e)),e}ze(t){const e=this.Je(t)!==null;return e||B("WatchChangeAggregator","Detected inactive target",t),e}Je(t){const e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new fc),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function dc(){return new xt(z.comparator)}function _c(){return new xt(z.comparator)}const ag={asc:"ASCENDING",desc:"DESCENDING"},ug={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lg={and:"AND",or:"OR"};class cg{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function ia(i,t){return i.useProto3Json||Ms(t)?t:{value:t}}function bs(i,t){return i.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Hh(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function hg(i,t){return bs(i,t.toTimestamp())}function $e(i){return Et(!!i),Q.fromTimestamp(function(e){const n=vn(e);return new Bt(n.seconds,n.nanos)}(i))}function Wa(i,t){return sa(i,t).canonicalString()}function sa(i,t){const e=function(r){return new Ct(["projects",r.projectId,"databases",r.database])}(i).child("documents");return t===void 0?e:e.child(t)}function Wh(i){const t=Ct.fromString(i);return Et(Zh(t)),t}function oa(i,t){return Wa(i.databaseId,t.path)}function Do(i,t){const e=Wh(t);if(e.get(1)!==i.databaseId.projectId)throw new j(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+i.databaseId.projectId);if(e.get(3)!==i.databaseId.database)throw new j(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+i.databaseId.database);return new z(Xh(e))}function Qh(i,t){return Wa(i.databaseId,t)}function fg(i){const t=Wh(i);return t.length===4?Ct.emptyPath():Xh(t)}function aa(i){return new Ct(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Xh(i){return Et(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function pc(i,t,e){return{name:oa(i,t),fields:e.value.mapValue.fields}}function dg(i,t){let e;if("targetChange"in t){t.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:H()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(c,f){return c.useProto3Json?(Et(f===void 0||typeof f=="string"),ae.fromBase64String(f||"")):(Et(f===void 0||f instanceof Buffer||f instanceof Uint8Array),ae.fromUint8Array(f||new Uint8Array))}(i,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(c){const f=c.code===void 0?M.UNKNOWN:qh(c.code);return new j(f,c.message||"")}(o);e=new Kh(n,r,s,u||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const r=Do(i,n.document.name),s=$e(n.document.updateTime),o=n.document.createTime?$e(n.document.createTime):Q.min(),u=new fe({mapValue:{fields:n.document.fields}}),l=re.newFoundDocument(r,s,o,u),c=n.targetIds||[],f=n.removedTargetIds||[];e=new cs(c,f,l.key,l)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const r=Do(i,n.document),s=n.readTime?$e(n.readTime):Q.min(),o=re.newNoDocument(r,s),u=n.removedTargetIds||[];e=new cs([],u,o.key,o)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const r=Do(i,n.document),s=n.removedTargetIds||[];e=new cs([],s,r,null)}else{if(!("filter"in t))return H();{t.filter;const n=t.filter;n.targetId;const{count:r=0,unchangedNames:s}=n,o=new ng(r,s),u=n.targetId;e=new Gh(u,o)}}return e}function _g(i,t){let e;if(t instanceof Di)e={update:pc(i,t.key,t.value)};else if(t instanceof Ga)e={delete:oa(i,t.key)};else if(t instanceof An)e={update:pc(i,t.key,t.data),updateMask:Ig(t.fieldMask)};else{if(!(t instanceof Zm))return H();e={verify:oa(i,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(n=>function(s,o){const u=o.transform;if(u instanceof Is)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof gi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof yi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof As)return{fieldPath:o.field.canonicalString(),increment:u.Pe};throw H()}(0,n))),t.precondition.isNone||(e.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:hg(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:H()}(i,t.precondition)),e}function pg(i,t){return i&&i.length>0?(Et(t!==void 0),i.map(e=>function(r,s){let o=r.updateTime?$e(r.updateTime):$e(s);return o.isEqual(Q.min())&&(o=$e(s)),new Xm(o,r.transformResults||[])}(e,t))):[]}function mg(i,t){return{documents:[Qh(i,t.path)]}}function gg(i,t){const e={structuredQuery:{}},n=t.path;let r;t.collectionGroup!==null?(r=n,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=n.popLast(),e.structuredQuery.from=[{collectionId:n.lastSegment()}]),e.parent=Qh(i,r);const s=function(c){if(c.length!==0)return Jh(ze.create(c,"and"))}(t.filters);s&&(e.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(f=>function(m){return{field:sr(m.field),direction:Tg(m.dir)}}(f))}(t.orderBy);o&&(e.structuredQuery.orderBy=o);const u=ia(i,t.limit);return u!==null&&(e.structuredQuery.limit=u),t.startAt&&(e.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{_t:e,parent:r}}function yg(i){let t=fg(i.parent);const e=i.structuredQuery,n=e.from?e.from.length:0;let r=null;if(n>0){Et(n===1);const f=e.from[0];f.allDescendants?r=f.collectionId:t=t.child(f.collectionId)}let s=[];e.where&&(s=function(_){const m=Yh(_);return m instanceof ze&&Ph(m)?m.getFilters():[m]}(e.where));let o=[];e.orderBy&&(o=function(_){return _.map(m=>function(E){return new ws(or(E.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(m))}(e.orderBy));let u=null;e.limit&&(u=function(_){let m;return m=typeof _=="object"?_.value:_,Ms(m)?null:m}(e.limit));let l=null;e.startAt&&(l=function(_){const m=!!_.before,g=_.values||[];return new Es(g,m)}(e.startAt));let c=null;return e.endAt&&(c=function(_){const m=!_.before,g=_.values||[];return new Es(g,m)}(e.endAt)),Mm(t,r,o,s,u,"F",l,c)}function vg(i,t){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function Yh(i){return i.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=or(e.unaryFilter.field);return Ut.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=or(e.unaryFilter.field);return Ut.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=or(e.unaryFilter.field);return Ut.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=or(e.unaryFilter.field);return Ut.create(o,"!=",{nullValue:"NULL_VALUE"});default:return H()}}(i):i.fieldFilter!==void 0?function(e){return Ut.create(or(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H()}}(e.fieldFilter.op),e.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(e){return ze.create(e.compositeFilter.filters.map(n=>Yh(n)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return H()}}(e.compositeFilter.op))}(i):H()}function Tg(i){return ag[i]}function Eg(i){return ug[i]}function wg(i){return lg[i]}function sr(i){return{fieldPath:i.canonicalString()}}function or(i){return Wt.fromServerFormat(i.fieldPath)}function Jh(i){return i instanceof Ut?function(e){if(e.op==="=="){if(ec(e.value))return{unaryFilter:{field:sr(e.field),op:"IS_NAN"}};if(tc(e.value))return{unaryFilter:{field:sr(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(ec(e.value))return{unaryFilter:{field:sr(e.field),op:"IS_NOT_NAN"}};if(tc(e.value))return{unaryFilter:{field:sr(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sr(e.field),op:Eg(e.op),value:e.value}}}(i):i instanceof ze?function(e){const n=e.getFilters().map(r=>Jh(r));return n.length===1?n[0]:{compositeFilter:{op:wg(e.op),filters:n}}}(i):H()}function Ig(i){const t=[];return i.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Zh(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(t,e,n,r,s=Q.min(),o=Q.min(),u=ae.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=l}withSequenceNumber(t){return new an(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new an(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new an(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new an(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(t){this.ct=t}}function bg(i){const t=yg({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?ra(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(){this._n=new Pg}addToCollectionParentIndex(t,e){return this._n.add(e),F.resolve()}getCollectionParents(t,e){return F.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return F.resolve()}deleteFieldIndex(t,e){return F.resolve()}deleteAllFieldIndexes(t){return F.resolve()}createTargetIndexes(t,e){return F.resolve()}getDocumentsMatchingTarget(t,e){return F.resolve(null)}getIndexType(t,e){return F.resolve(0)}getFieldIndexes(t,e){return F.resolve([])}getNextCollectionGroupToUpdate(t){return F.resolve(null)}getMinOffset(t,e){return F.resolve(yn.min())}getMinOffsetFromCollectionGroup(t,e){return F.resolve(yn.min())}updateCollectionGroup(t,e,n){return F.resolve()}updateIndexEntries(t,e){return F.resolve()}}class Pg{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Xt(Ct.comparator),s=!r.has(n);return this.index[e]=r.add(n),s}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new Xt(Ct.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new Tr(0)}static Ln(){return new Tr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(){this.changes=new Dr(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,re.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return n!==void 0?F.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(t,e,n,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(n=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(n!==null&&ii(n.mutation,r,Ee.empty(),Bt.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(n=>this.getLocalViewOfDocuments(t,n,st()).next(()=>n))}getLocalViewOfDocuments(t,e,n=st()){const r=On();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,n).next(s=>{let o=Xr();return s.forEach((u,l)=>{o=o.insert(u,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){const n=On();return this.populateOverlays(t,n,e).next(()=>this.computeViews(t,e,n,st()))}populateOverlays(t,e,n){const r=[];return n.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,u)=>{e.set(o,u)})})}computeViews(t,e,n,r){let s=tn();const o=ri(),u=function(){return ri()}();return e.forEach((l,c)=>{const f=n.get(c.key);r.has(c.key)&&(f===void 0||f.mutation instanceof An)?s=s.insert(c.key,c):f!==void 0?(o.set(c.key,f.mutation.getFieldMask()),ii(f.mutation,c,f.mutation.getFieldMask(),Bt.now())):o.set(c.key,Ee.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((c,f)=>o.set(c,f)),e.forEach((c,f)=>{var _;return u.set(c,new Cg(f,(_=o.get(c))!==null&&_!==void 0?_:null))}),u))}recalculateAndSaveOverlays(t,e){const n=ri();let r=new xt((o,u)=>o-u),s=st();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(const u of o)u.keys().forEach(l=>{const c=e.get(l);if(c===null)return;let f=n.get(l)||Ee.empty();f=u.applyToLocalView(c,f),n.set(l,f);const _=(r.get(u.batchId)||st()).add(l);r=r.insert(u.batchId,_)})}).next(()=>{const o=[],u=r.getReverseIterator();for(;u.hasNext();){const l=u.getNext(),c=l.key,f=l.value,_=Oh();f.forEach(m=>{if(!s.has(m)){const g=jh(e.get(m),n.get(m));g!==null&&_.set(m,g),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,_))}return F.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,e,n,r){return function(o){return z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Fm(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,r):this.getDocumentsMatchingCollectionQuery(t,e,n,r)}getNextDocuments(t,e,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-s.size):F.resolve(On());let u=-1,l=s;return o.next(c=>F.forEach(c,(f,_)=>(u<_.largestBatchId&&(u=_.largestBatchId),s.get(f)?F.resolve():this.remoteDocumentCache.getEntry(t,f).next(m=>{l=l.insert(f,m)}))).next(()=>this.populateOverlays(t,c,s)).next(()=>this.computeViews(t,l,c,st())).next(f=>({batchId:u,changes:Nh(f)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new z(e)).next(n=>{let r=Xr();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,n,r){const s=e.collectionGroup;let o=Xr();return this.indexManager.getCollectionParents(t,s).next(u=>F.forEach(u,l=>{const c=function(_,m){return new Fs(m,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(e,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,c,n,r).next(f=>{f.forEach((_,m)=>{o=o.insert(_,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,s,r))).next(o=>{s.forEach((l,c)=>{const f=c.getKey();o.get(f)===null&&(o=o.insert(f,re.newInvalidDocument(f)))});let u=Xr();return o.forEach((l,c)=>{const f=s.get(l);f!==void 0&&ii(f.mutation,c,Ee.empty(),Bt.now()),Us(e,c)&&(u=u.insert(l,c))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return F.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:$e(r.createTime)}}(e)),F.resolve()}getNamedQuery(t,e){return F.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,function(r){return{name:r.name,query:bg(r.bundledQuery),readTime:$e(r.readTime)}}(e)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(){this.overlays=new xt(z.comparator),this.hr=new Map}getOverlay(t,e){return F.resolve(this.overlays.get(e))}getOverlays(t,e){const n=On();return F.forEach(e,r=>this.getOverlay(t,r).next(s=>{s!==null&&n.set(r,s)})).next(()=>n)}saveOverlays(t,e,n){return n.forEach((r,s)=>{this.ht(t,e,s)}),F.resolve()}removeOverlaysForBatchId(t,e,n){const r=this.hr.get(n);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(n)),F.resolve()}getOverlaysForCollection(t,e,n){const r=On(),s=e.length+1,o=new z(e.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const l=u.getNext().value,c=l.getKey();if(!e.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>n&&r.set(l.getKey(),l)}return F.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let s=new xt((c,f)=>c-f);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===e&&c.largestBatchId>n){let f=s.get(c.largestBatchId);f===null&&(f=On(),s=s.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const u=On(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,f)=>u.set(c,f)),!(u.size()>=r)););return F.resolve(u)}ht(t,e,n){const r=this.overlays.get(n.key);if(r!==null){const o=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new eg(e,n));let s=this.hr.get(e);s===void 0&&(s=st(),this.hr.set(e,s)),this.hr.set(e,s.add(n.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(){this.Pr=new Xt(zt.Ir),this.Tr=new Xt(zt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){const n=new zt(t,e);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(t,e){t.forEach(n=>this.addReference(n,e))}removeReference(t,e){this.Ar(new zt(t,e))}Rr(t,e){t.forEach(n=>this.removeReference(n,e))}Vr(t){const e=new z(new Ct([])),n=new zt(e,t),r=new zt(e,t+1),s=[];return this.Tr.forEachInRange([n,r],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const e=new z(new Ct([])),n=new zt(e,t),r=new zt(e,t+1);let s=st();return this.Tr.forEachInRange([n,r],o=>{s=s.add(o.key)}),s}containsKey(t){const e=new zt(t,0),n=this.Pr.firstAfterOrEqual(e);return n!==null&&t.isEqual(n.key)}}class zt{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return z.comparator(t.key,e.key)||mt(t.pr,e.pr)}static Er(t,e){return mt(t.pr,e.pr)||z.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new Xt(zt.Ir)}checkEmpty(t){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,n,r){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new tg(s,e,n,r);this.mutationQueue.push(o);for(const u of r)this.wr=this.wr.add(new zt(u.key,s)),this.indexManager.addToCollectionParentIndex(t,u.key.path.popLast());return F.resolve(o)}lookupMutationBatch(t,e){return F.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=this.br(n),s=r<0?0:r;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new zt(e,0),r=new zt(e,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([n,r],o=>{const u=this.Sr(o.pr);s.push(u)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Xt(mt);return e.forEach(r=>{const s=new zt(r,0),o=new zt(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],u=>{n=n.add(u.pr)})}),F.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let s=n;z.isDocumentKey(s)||(s=s.child(""));const o=new zt(new z(s),0);let u=new Xt(mt);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!n.isPrefixOf(c)&&(c.length===r&&(u=u.add(l.pr)),!0)},o),F.resolve(this.Dr(u))}Dr(t){const e=[];return t.forEach(n=>{const r=this.Sr(n);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){Et(this.Cr(e.batchId,"removed")===0),this.mutationQueue.shift();let n=this.wr;return F.forEach(e.mutations,r=>{const s=new zt(r.key,e.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.wr=n})}Mn(t){}containsKey(t,e){const n=new zt(e,0),r=this.wr.firstAfterOrEqual(n);return F.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,F.resolve()}Cr(t,e){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(t){this.vr=t,this.docs=function(){return new xt(z.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,r=this.docs.get(n),s=r?r.size:0,o=this.vr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return F.resolve(n?n.document.mutableCopy():re.newInvalidDocument(e))}getEntries(t,e){let n=tn();return e.forEach(r=>{const s=this.docs.get(r);n=n.insert(r,s?s.document.mutableCopy():re.newInvalidDocument(r))}),F.resolve(n)}getDocumentsMatchingQuery(t,e,n,r){let s=tn();const o=e.path,u=new z(o.child("")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){const{key:c,value:{document:f}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||ym(gm(f),n)<=0||(r.has(f.key)||Us(e,f))&&(s=s.insert(f.key,f.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(t,e,n,r){H()}Fr(t,e){return F.forEach(this.docs,n=>e(n))}newChangeBuffer(t){return new Og(this)}getSize(t){return F.resolve(this.size)}}class Og extends Sg{constructor(t){super(),this.ar=t}applyChanges(t){const e=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?e.push(this.ar.addEntry(t,r)):this.ar.removeEntry(n)}),F.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(t){this.persistence=t,this.Mr=new Dr(e=>za(e),qa),this.lastRemoteSnapshotVersion=Q.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Qa,this.targetCount=0,this.Lr=Tr.Nn()}forEachTarget(t,e){return this.Mr.forEach((n,r)=>e(r)),F.resolve()}getLastRemoteSnapshotVersion(t){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return F.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Or&&(this.Or=e),F.resolve()}qn(t){this.Mr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Lr=new Tr(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,F.resolve()}updateTargetData(t,e){return this.qn(e),F.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,F.resolve()}removeTargets(t,e,n){let r=0;const s=[];return this.Mr.forEach((o,u)=>{u.sequenceNumber<=e&&n.get(u.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,u.targetId)),r++)}),F.waitFor(s).next(()=>r)}getTargetCount(t){return F.resolve(this.targetCount)}getTargetData(t,e){const n=this.Mr.get(e)||null;return F.resolve(n)}addMatchingKeys(t,e,n){return this.Nr.dr(e,n),F.resolve()}removeMatchingKeys(t,e,n){this.Nr.Rr(e,n);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),F.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Nr.gr(e);return F.resolve(n)}containsKey(t,e){return F.resolve(this.Nr.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(t,e){this.Br={},this.overlays={},this.kr=new $a(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new Mg(this),this.indexManager=new Rg,this.remoteDocumentCache=function(r){return new Ng(r)}(n=>this.referenceDelegate.Kr(n)),this.serializer=new Ag(e),this.$r=new Vg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new kg,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Br[t.toKey()];return n||(n=new xg(e,this.referenceDelegate),this.Br[t.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,n){B("MemoryPersistence","Starting transaction:",t);const r=new Lg(this.kr.next());return this.referenceDelegate.Ur(),n(r).next(s=>this.referenceDelegate.Wr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gr(t,e){return F.or(Object.values(this.Br).map(n=>()=>n.containsKey(t,e)))}}class Lg extends Tm{constructor(t){super(),this.currentSequenceNumber=t}}class Xa{constructor(t){this.persistence=t,this.zr=new Qa,this.jr=null}static Hr(t){return new Xa(t)}get Jr(){if(this.jr)return this.jr;throw H()}addReference(t,e,n){return this.zr.addReference(n,e),this.Jr.delete(n.toString()),F.resolve()}removeReference(t,e,n){return this.zr.removeReference(n,e),this.Jr.add(n.toString()),F.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),F.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach(r=>this.Jr.add(r.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Jr.add(s.toString()))}).next(()=>n.removeTargetData(t,e))}Ur(){this.jr=new Set}Wr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Jr,n=>{const r=z.fromPath(n);return this.Yr(t,r).next(s=>{s||e.removeEntry(r,Q.min())})}).next(()=>(this.jr=null,e.apply(t)))}updateLimboDocument(t,e){return this.Yr(t,e).next(n=>{n?this.Jr.delete(e.toString()):this.Jr.add(e.toString())})}Kr(t){return 0}Yr(t,e){return F.or([()=>F.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.qi=n,this.Qi=r}static Ki(t,e){let n=st(),r=st();for(const s of e.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Ya(t,e.fromCache,n,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return K_()?8:Em(q_())>0?6:4}()}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,n,r){const s={result:null};return this.ji(t,e).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,e,r,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new $g;return this.Ji(t,e,o).next(u=>{if(s.result=u,this.Ui)return this.Yi(t,e,o,u.size)})}).next(()=>s.result)}Yi(t,e,n,r){return n.documentReadCount<this.Wi?(Hr()<=ct.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",ir(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),F.resolve()):(Hr()<=ct.DEBUG&&B("QueryEngine","Query:",ir(e),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Hr()<=ct.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",ir(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Le(e))):F.resolve())}ji(t,e){if(sc(e))return F.resolve(null);let n=Le(e);return this.indexManager.getIndexType(t,n).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=ra(e,null,"F"),n=Le(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{const o=st(...s);return this.zi.getDocuments(t,o).next(u=>this.indexManager.getMinOffset(t,n).next(l=>{const c=this.Zi(e,u);return this.Xi(e,c,o,l.readTime)?this.ji(t,ra(e,null,"F")):this.es(t,c,e,l)}))})))}Hi(t,e,n,r){return sc(e)||r.isEqual(Q.min())?F.resolve(null):this.zi.getDocuments(t,n).next(s=>{const o=this.Zi(e,s);return this.Xi(e,o,n,r)?F.resolve(null):(Hr()<=ct.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ir(e)),this.es(t,o,e,mm(r,-1)).next(u=>u))})}Zi(t,e){let n=new Xt(kh(t));return e.forEach((r,s)=>{Us(t,s)&&(n=n.add(s))}),n}Xi(t,e,n,r){if(t.limit===null)return!1;if(n.size!==e.size)return!0;const s=t.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ji(t,e,n){return Hr()<=ct.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",ir(e)),this.zi.getDocumentsMatchingQuery(t,e,yn.min(),n)}es(t,e,n,r){return this.zi.getDocumentsMatchingQuery(t,n,r).next(s=>(e.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(t,e,n,r){this.persistence=t,this.ts=e,this.serializer=r,this.ns=new xt(mt),this.rs=new Dr(s=>za(s),qa),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(n)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Dg(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ns))}}function jg(i,t,e,n){return new Bg(i,t,e,n)}async function tf(i,t){const e=Y(i);return await e.persistence.runTransaction("Handle user change","readonly",n=>{let r;return e.mutationQueue.getAllMutationBatches(n).next(s=>(r=s,e._s(t),e.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],u=[];let l=st();for(const c of r){o.push(c.batchId);for(const f of c.mutations)l=l.add(f.key)}for(const c of s){u.push(c.batchId);for(const f of c.mutations)l=l.add(f.key)}return e.localDocuments.getDocuments(n,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:u}))})})}function zg(i,t){const e=Y(i);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const r=t.batch.keys(),s=e.os.newChangeBuffer({trackRemovals:!0});return function(u,l,c,f){const _=c.batch,m=_.keys();let g=F.resolve();return m.forEach(E=>{g=g.next(()=>f.getEntry(l,E)).next(p=>{const w=c.docVersions.get(E);Et(w!==null),p.version.compareTo(w)<0&&(_.applyToRemoteDocument(p,c),p.isValidDocument()&&(p.setReadTime(c.commitVersion),f.addEntry(p)))})}),g.next(()=>u.mutationQueue.removeMutationBatch(l,_))}(e,n,t,s).next(()=>s.apply(n)).next(()=>e.mutationQueue.performConsistencyCheck(n)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(n,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(u){let l=st();for(let c=0;c<u.mutationResults.length;++c)u.mutationResults[c].transformResults.length>0&&(l=l.add(u.batch.mutations[c].key));return l}(t))).next(()=>e.localDocuments.getDocuments(n,r))})}function ef(i){const t=Y(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Qr.getLastRemoteSnapshotVersion(e))}function qg(i,t){const e=Y(i),n=t.snapshotVersion;let r=e.ns;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=e.os.newChangeBuffer({trackRemovals:!0});r=e.ns;const u=[];t.targetChanges.forEach((f,_)=>{const m=r.get(_);if(!m)return;u.push(e.Qr.removeMatchingKeys(s,f.removedDocuments,_).next(()=>e.Qr.addMatchingKeys(s,f.addedDocuments,_)));let g=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(_)!==null?g=g.withResumeToken(ae.EMPTY_BYTE_STRING,Q.min()).withLastLimboFreeSnapshotVersion(Q.min()):f.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(f.resumeToken,n)),r=r.insert(_,g),function(p,w,S){return p.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(m,g,f)&&u.push(e.Qr.updateTargetData(s,g))});let l=tn(),c=st();if(t.documentUpdates.forEach(f=>{t.resolvedLimboDocuments.has(f)&&u.push(e.persistence.referenceDelegate.updateLimboDocument(s,f))}),u.push(Gg(s,o,t.documentUpdates).next(f=>{l=f.cs,c=f.ls})),!n.isEqual(Q.min())){const f=e.Qr.getLastRemoteSnapshotVersion(s).next(_=>e.Qr.setTargetsMetadata(s,s.currentSequenceNumber,n));u.push(f)}return F.waitFor(u).next(()=>o.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(e.ns=r,s))}function Gg(i,t,e){let n=st(),r=st();return e.forEach(s=>n=n.add(s)),t.getEntries(i,n).next(s=>{let o=tn();return e.forEach((u,l)=>{const c=s.get(u);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(u)),l.isNoDocument()&&l.version.isEqual(Q.min())?(t.removeEntry(u,l.readTime),o=o.insert(u,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(u,l)):B("LocalStore","Ignoring outdated watch update for ",u,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:r}})}function Kg(i,t){const e=Y(i);return e.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function Hg(i,t){const e=Y(i);return e.persistence.runTransaction("Allocate target","readwrite",n=>{let r;return e.Qr.getTargetData(n,t).next(s=>s?(r=s,F.resolve(r)):e.Qr.allocateTargetId(n).next(o=>(r=new an(t,o,"TargetPurposeListen",n.currentSequenceNumber),e.Qr.addTargetData(n,r).next(()=>r))))}).then(n=>{const r=e.ns.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.ns=e.ns.insert(n.targetId,n),e.rs.set(t,n.targetId)),n})}async function ua(i,t,e){const n=Y(i),r=n.ns.get(t),s=e?"readwrite":"readwrite-primary";try{e||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Ci(o))throw o;B("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}n.ns=n.ns.remove(t),n.rs.delete(r.target)}function mc(i,t,e){const n=Y(i);let r=Q.min(),s=st();return n.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,f){const _=Y(l),m=_.rs.get(f);return m!==void 0?F.resolve(_.ns.get(m)):_.Qr.getTargetData(c,f)}(n,o,Le(t)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,n.Qr.getMatchingKeysForTargetId(o,u.targetId).next(l=>{s=l})}).next(()=>n.ts.getDocumentsMatchingQuery(o,t,e?r:Q.min(),e?s:st())).next(u=>(Wg(n,$m(t),u),{documents:u,hs:s})))}function Wg(i,t,e){let n=i.ss.get(t)||Q.min();e.forEach((r,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),i.ss.set(t,n)}class gc{constructor(){this.activeTargetIds=Gm()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Qg{constructor(){this.no=new gc,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,n){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new gc,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){B("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){B("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ss=null;function Vo(){return ss===null?ss=function(){return 268435456+Math.round(2147483648*Math.random())}():ss++,"0x"+ss.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee="WebChannelConnection";class Zg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=n+"://"+e.host,this.So=`projects/${r}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Do(){return!1}Co(e,n,r,s,o){const u=Vo(),l=this.vo(e,n.toUriEncodedString());B("RestConnection",`Sending RPC '${e}' ${u}:`,l,r);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(e,l,c,r).then(f=>(B("RestConnection",`Received RPC '${e}' ${u}: `,f),f),f=>{throw mr("RestConnection",`RPC '${e}' ${u} failed with error: `,f,"url: ",l,"request:",r),f})}xo(e,n,r,s,o,u){return this.Co(e,n,r,s,o)}Fo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Cr}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}vo(e,n){const r=Yg[e];return`${this.wo}/v1/${n}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,e,n,r){const s=Vo();return new Promise((o,u)=>{const l=new _h;l.setWithCredentials(!0),l.listenOnce(mh.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case as.NO_ERROR:const f=l.getResponseJson();B(ee,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(f)),o(f);break;case as.TIMEOUT:B(ee,`RPC '${t}' ${s} timed out`),u(new j(M.DEADLINE_EXCEEDED,"Request time out"));break;case as.HTTP_ERROR:const _=l.getStatus();if(B(ee,`RPC '${t}' ${s} failed with status:`,_,"response text:",l.getResponseText()),_>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const E=function(w){const S=w.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(S)>=0?S:M.UNKNOWN}(g.status);u(new j(E,g.message))}else u(new j(M.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new j(M.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{B(ee,`RPC '${t}' ${s} completed.`)}});const c=JSON.stringify(r);B(ee,`RPC '${t}' ${s} sending request:`,r),l.send(e,"POST",c,n,15)})}Oo(t,e,n){const r=Vo(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=vh(),u=yh(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new ph({})),this.Fo(l.initMessageHeaders,e,n),l.encodeInitMessageHeaders=!0;const f=s.join("");B(ee,`Creating RPC '${t}' stream ${r}: ${f}`,l);const _=o.createWebChannel(f,l);let m=!1,g=!1;const E=new Jg({lo:w=>{g?B(ee,`Not sending because RPC '${t}' stream ${r} is closed:`,w):(m||(B(ee,`Opening RPC '${t}' stream ${r} transport.`),_.open(),m=!0),B(ee,`RPC '${t}' stream ${r} sending:`,w),_.send(w))},ho:()=>_.close()}),p=(w,S,C)=>{w.listen(S,x=>{try{C(x)}catch(V){setTimeout(()=>{throw V},0)}})};return p(_,Qr.EventType.OPEN,()=>{g||(B(ee,`RPC '${t}' stream ${r} transport opened.`),E.mo())}),p(_,Qr.EventType.CLOSE,()=>{g||(g=!0,B(ee,`RPC '${t}' stream ${r} transport closed`),E.po())}),p(_,Qr.EventType.ERROR,w=>{g||(g=!0,mr(ee,`RPC '${t}' stream ${r} transport errored:`,w),E.po(new j(M.UNAVAILABLE,"The operation could not be completed")))}),p(_,Qr.EventType.MESSAGE,w=>{var S;if(!g){const C=w.data[0];Et(!!C);const x=C,V=x.error||((S=x[0])===null||S===void 0?void 0:S.error);if(V){B(ee,`RPC '${t}' stream ${r} received error:`,V);const k=V.status;let O=function(v){const b=Ft[v];if(b!==void 0)return qh(b)}(k),I=V.message;O===void 0&&(O=M.INTERNAL,I="Unknown error status: "+k+" with message "+V.message),g=!0,E.po(new j(O,I)),_.close()}else B(ee,`RPC '${t}' stream ${r} received:`,C),E.yo(C)}}),p(u,gh.STAT_EVENT,w=>{w.stat===Jo.PROXY?B(ee,`RPC '${t}' stream ${r} detected buffering proxy`):w.stat===Jo.NOPROXY&&B(ee,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{E.fo()},0),E}}function ko(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qs(i){return new cg(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(t,e,n=1e3,r=1.5,s=6e4){this.oi=t,this.timerId=e,this.No=n,this.Lo=r,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const e=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),r=Math.max(0,e-n);r>0&&B("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(t,e,n,r,s,o,u,l){this.oi=t,this.Go=n,this.zo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new nf(t,e)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,e){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():e&&e.code===M.RESOURCE_EXHAUSTED?(Ze(e.toString()),Ze("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):e&&e.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(e)}__(){}auth(){this.state=1;const t=this.a_(this.jo),e=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,r])=>{this.jo===e&&this.u_(n,r)},n=>{t(()=>{const r=new j(M.UNKNOWN,"Fetching auth token failed: "+n.message);return this.c_(r)})})}u_(t,e){const n=this.a_(this.jo);this.stream=this.l_(t,e),this.stream.Po(()=>{n(()=>this.listener.Po())}),this.stream.To(()=>{n(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{n(()=>this.c_(r))}),this.stream.onMessage(r=>{n(()=>this.onMessage(r))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return B("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return e=>{this.oi.enqueueAndForget(()=>this.jo===t?e():(B("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ty extends rf{constructor(t,e,n,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,o),this.serializer=s}l_(t,e){return this.connection.Oo("Listen",t,e)}onMessage(t){this.Yo.reset();const e=dg(this.serializer,t),n=function(s){if(!("targetChange"in s))return Q.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Q.min():o.readTime?$e(o.readTime):Q.min()}(t);return this.listener.h_(e,n)}P_(t){const e={};e.database=aa(this.serializer),e.addTarget=function(s,o){let u;const l=o.target;if(u=na(l)?{documents:mg(s,l)}:{query:gg(s,l)._t},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=Hh(s,o.resumeToken);const c=ia(s,o.expectedCount);c!==null&&(u.expectedCount=c)}else if(o.snapshotVersion.compareTo(Q.min())>0){u.readTime=bs(s,o.snapshotVersion.toTimestamp());const c=ia(s,o.expectedCount);c!==null&&(u.expectedCount=c)}return u}(this.serializer,t);const n=vg(this.serializer,t);n&&(e.labels=n),this.i_(e)}I_(t){const e={};e.database=aa(this.serializer),e.removeTarget=t,this.i_(e)}}class ey extends rf{constructor(t,e,n,r,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,e){return this.connection.Oo("Write",t,e)}onMessage(t){if(Et(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const e=pg(t.writeResults,t.commitTime),n=$e(t.commitTime);return this.listener.A_(n,e)}return Et(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=aa(this.serializer),this.i_(t)}d_(t){const e={streamToken:this.lastStreamToken,writes:t.map(n=>_g(this.serializer,n))};this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny extends class{}{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new j(M.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,e,n,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,sa(e,n),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(M.UNKNOWN,s.toString())})}xo(t,e,n,r,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.xo(t,sa(e,n),r,o,u,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(M.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class ry{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Ze(e),this.y_=!1):B("OnlineStateTracker",e)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(t,e,n,r,s){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{n.enqueueAndForget(async()=>{Xn(this)&&(B("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Y(l);c.M_.add(4),await ki(c),c.N_.set("Unknown"),c.M_.delete(4),await Gs(c)}(this))})}),this.N_=new ry(n,r)}}async function Gs(i){if(Xn(i))for(const t of i.x_)await t(!0)}async function ki(i){for(const t of i.x_)await t(!1)}function sf(i,t){const e=Y(i);e.F_.has(t.targetId)||(e.F_.set(t.targetId,t),eu(e)?tu(e):Vr(e).Xo()&&Za(e,t))}function Ja(i,t){const e=Y(i),n=Vr(e);e.F_.delete(t),n.Xo()&&of(e,t),e.F_.size===0&&(n.Xo()?n.n_():Xn(e)&&e.N_.set("Unknown"))}function Za(i,t){if(i.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Q.min())>0){const e=i.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Vr(i).P_(t)}function of(i,t){i.L_.xe(t),Vr(i).I_(t)}function tu(i){i.L_=new og({getRemoteKeysForTarget:t=>i.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>i.F_.get(t)||null,tt:()=>i.datastore.serializer.databaseId}),Vr(i).start(),i.N_.w_()}function eu(i){return Xn(i)&&!Vr(i).Zo()&&i.F_.size>0}function Xn(i){return Y(i).M_.size===0}function af(i){i.L_=void 0}async function sy(i){i.N_.set("Online")}async function oy(i){i.F_.forEach((t,e)=>{Za(i,t)})}async function ay(i,t){af(i),eu(i)?(i.N_.D_(t),tu(i)):i.N_.set("Unknown")}async function uy(i,t,e){if(i.N_.set("Online"),t instanceof Kh&&t.state===2&&t.cause)try{await async function(r,s){const o=s.cause;for(const u of s.targetIds)r.F_.has(u)&&(await r.remoteSyncer.rejectListen(u,o),r.F_.delete(u),r.L_.removeTarget(u))}(i,t)}catch(n){B("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Rs(i,n)}else if(t instanceof cs?i.L_.Ke(t):t instanceof Gh?i.L_.He(t):i.L_.We(t),!e.isEqual(Q.min()))try{const n=await ef(i.localStore);e.compareTo(n)>=0&&await function(s,o){const u=s.L_.rt(o);return u.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const f=s.F_.get(c);f&&s.F_.set(c,f.withResumeToken(l.resumeToken,o))}}),u.targetMismatches.forEach((l,c)=>{const f=s.F_.get(l);if(!f)return;s.F_.set(l,f.withResumeToken(ae.EMPTY_BYTE_STRING,f.snapshotVersion)),of(s,l);const _=new an(f.target,l,c,f.sequenceNumber);Za(s,_)}),s.remoteSyncer.applyRemoteEvent(u)}(i,e)}catch(n){B("RemoteStore","Failed to raise snapshot:",n),await Rs(i,n)}}async function Rs(i,t,e){if(!Ci(t))throw t;i.M_.add(1),await ki(i),i.N_.set("Offline"),e||(e=()=>ef(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{B("RemoteStore","Retrying IndexedDB access"),await e(),i.M_.delete(1),await Gs(i)})}function uf(i,t){return t().catch(e=>Rs(i,e,t))}async function Ks(i){const t=Y(i),e=Tn(t);let n=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;ly(t);)try{const r=await Kg(t.localStore,n);if(r===null){t.v_.length===0&&e.n_();break}n=r.batchId,cy(t,r)}catch(r){await Rs(t,r)}lf(t)&&cf(t)}function ly(i){return Xn(i)&&i.v_.length<10}function cy(i,t){i.v_.push(t);const e=Tn(i);e.Xo()&&e.E_&&e.d_(t.mutations)}function lf(i){return Xn(i)&&!Tn(i).Zo()&&i.v_.length>0}function cf(i){Tn(i).start()}async function hy(i){Tn(i).V_()}async function fy(i){const t=Tn(i);for(const e of i.v_)t.d_(e.mutations)}async function dy(i,t,e){const n=i.v_.shift(),r=Ka.from(n,t,e);await uf(i,()=>i.remoteSyncer.applySuccessfulWrite(r)),await Ks(i)}async function _y(i,t){t&&Tn(i).E_&&await async function(n,r){if(function(o){return rg(o)&&o!==M.ABORTED}(r.code)){const s=n.v_.shift();Tn(n).t_(),await uf(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Ks(n)}}(i,t),lf(i)&&cf(i)}async function vc(i,t){const e=Y(i);e.asyncQueue.verifyOperationInProgress(),B("RemoteStore","RemoteStore received new credentials");const n=Xn(e);e.M_.add(3),await ki(e),n&&e.N_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.M_.delete(3),await Gs(e)}async function py(i,t){const e=Y(i);t?(e.M_.delete(2),await Gs(e)):t||(e.M_.add(2),await ki(e),e.N_.set("Unknown"))}function Vr(i){return i.B_||(i.B_=function(e,n,r){const s=Y(e);return s.f_(),new ty(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{Po:sy.bind(null,i),To:oy.bind(null,i),Ao:ay.bind(null,i),h_:uy.bind(null,i)}),i.x_.push(async t=>{t?(i.B_.t_(),eu(i)?tu(i):i.N_.set("Unknown")):(await i.B_.stop(),af(i))})),i.B_}function Tn(i){return i.k_||(i.k_=function(e,n,r){const s=Y(e);return s.f_(),new ey(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{Po:()=>Promise.resolve(),To:hy.bind(null,i),Ao:_y.bind(null,i),R_:fy.bind(null,i),A_:dy.bind(null,i)}),i.x_.push(async t=>{t?(i.k_.t_(),await Ks(i)):(await i.k_.stop(),i.v_.length>0&&(B("RemoteStore",`Stopping write stream with ${i.v_.length} pending writes`),i.v_=[]))})),i.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(t,e,n,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Je,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,r,s){const o=Date.now()+n,u=new nu(t,e,o,r,s);return u.start(n),u}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(M.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ru(i,t){if(Ze("AsyncQueue",`${t}: ${i}`),Ci(i))return new j(M.UNAVAILABLE,`${t}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(t){this.comparator=t?(e,n)=>t(e,n)||z.comparator(e.key,n.key):(e,n)=>z.comparator(e.key,n.key),this.keyedMap=Xr(),this.sortedSet=new xt(this.comparator)}static emptySet(t){return new cr(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,n)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof cr)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=n.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const n=new cr;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(){this.q_=new xt(z.comparator)}track(t){const e=t.doc.key,n=this.q_.get(e);n?t.type!==0&&n.type===3?this.q_=this.q_.insert(e,t):t.type===3&&n.type!==1?this.q_=this.q_.insert(e,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.q_=this.q_.insert(e,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.q_=this.q_.remove(e):t.type===1&&n.type===2?this.q_=this.q_.insert(e,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):H():this.q_=this.q_.insert(e,t)}Q_(){const t=[];return this.q_.inorderTraversal((e,n)=>{t.push(n)}),t}}class Er{constructor(t,e,n,r,s,o,u,l,c){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,e,n,r,s){const o=[];return e.forEach(u=>{o.push({type:0,doc:u})}),new Er(t,e,cr.emptySet(e),o,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&$s(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class gy{constructor(){this.queries=new Dr(t=>Vh(t),$s),this.onlineState="Unknown",this.z_=new Set}}async function iu(i,t){const e=Y(i);let n=3;const r=t.query;let s=e.queries.get(r);s?!s.W_()&&t.G_()&&(n=2):(s=new my,n=t.G_()?0:1);try{switch(n){case 0:s.K_=await e.onListen(r,!0);break;case 1:s.K_=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(o){const u=ru(o,`Initialization of query '${ir(t.query)}' failed`);return void t.onError(u)}e.queries.set(r,s),s.U_.push(t),t.j_(e.onlineState),s.K_&&t.H_(s.K_)&&ou(e)}async function su(i,t){const e=Y(i),n=t.query;let r=3;const s=e.queries.get(n);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?r=t.G_()?0:1:!s.W_()&&t.G_()&&(r=2))}switch(r){case 0:return e.queries.delete(n),e.onUnlisten(n,!0);case 1:return e.queries.delete(n),e.onUnlisten(n,!1);case 2:return e.onLastRemoteStoreUnlisten(n);default:return}}function yy(i,t){const e=Y(i);let n=!1;for(const r of t){const s=r.query,o=e.queries.get(s);if(o){for(const u of o.U_)u.H_(r)&&(n=!0);o.K_=r}}n&&ou(e)}function vy(i,t,e){const n=Y(i),r=n.queries.get(t);if(r)for(const s of r.U_)s.onError(e);n.queries.delete(t)}function ou(i){i.z_.forEach(t=>{t.next()})}var la,Ec;(Ec=la||(la={})).J_="default",Ec.Cache="cache";class au{constructor(t,e,n){this.query=t,this.Y_=e,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(t){if(!this.options.includeMetadataChanges){const n=[];for(const r of t.docChanges)r.type!==3&&n.push(r);t=new Er(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),e=!0):this.ta(t,this.onlineState)&&(this.na(t),e=!0),this.X_=t,e}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let e=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),e=!0),e}ta(t,e){if(!t.fromCache||!this.G_())return!0;const n=e!=="Offline";return(!this.options.ra||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const e=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}na(t){t=Er.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==la.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(t){this.key=t}}class ff{constructor(t){this.key=t}}class Ty{constructor(t,e){this.query=t,this.la=e,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=st(),this.mutatedKeys=st(),this.Ia=kh(t),this.Ta=new cr(this.Ia)}get Ea(){return this.la}da(t,e){const n=e?e.Aa:new Tc,r=e?e.Ta:this.Ta;let s=e?e.mutatedKeys:this.mutatedKeys,o=r,u=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((f,_)=>{const m=r.get(f),g=Us(this.query,_)?_:null,E=!!m&&this.mutatedKeys.has(m.key),p=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let w=!1;m&&g?m.data.isEqual(g.data)?E!==p&&(n.track({type:3,doc:g}),w=!0):this.Ra(m,g)||(n.track({type:2,doc:g}),w=!0,(l&&this.Ia(g,l)>0||c&&this.Ia(g,c)<0)&&(u=!0)):!m&&g?(n.track({type:0,doc:g}),w=!0):m&&!g&&(n.track({type:1,doc:m}),w=!0,(l||c)&&(u=!0)),w&&(g?(o=o.add(g),s=p?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),n.track({type:1,doc:f})}return{Ta:o,Aa:n,Xi:u,mutatedKeys:s}}Ra(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,r){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((f,_)=>function(g,E){const p=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H()}};return p(g)-p(E)}(f.type,_.type)||this.Ia(f.doc,_.doc)),this.Va(n),r=r!=null&&r;const u=e&&!r?this.ma():[],l=this.Pa.size===0&&this.current&&!r?1:0,c=l!==this.ha;return this.ha=l,o.length!==0||c?{snapshot:new Er(this.query,t.Ta,s,o,t.mutatedKeys,l===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:u}:{fa:u}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Tc,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(e=>this.la=this.la.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.la=this.la.delete(e)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=st(),this.Ta.forEach(n=>{this.ga(n.key)&&(this.Pa=this.Pa.add(n.key))});const e=[];return t.forEach(n=>{this.Pa.has(n)||e.push(new ff(n))}),this.Pa.forEach(n=>{t.has(n)||e.push(new hf(n))}),e}pa(t){this.la=t.hs,this.Pa=st();const e=this.da(t.documents);return this.applyChanges(e,!0)}ya(){return Er.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class Ey{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class wy{constructor(t){this.key=t,this.wa=!1}}class Iy{constructor(t,e,n,r,s,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Dr(u=>Vh(u),$s),this.Da=new Map,this.Ca=new Set,this.va=new xt(z.comparator),this.Fa=new Map,this.Ma=new Qa,this.xa={},this.Oa=new Map,this.Na=Tr.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function Ay(i,t,e=!0){const n=yf(i);let r;const s=n.ba.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ya()):r=await df(n,t,e,!0),r}async function by(i,t){const e=yf(i);await df(e,t,!0,!1)}async function df(i,t,e,n){const r=await Hg(i.localStore,Le(t)),s=r.targetId,o=e?i.sharedClientState.addLocalQueryTarget(s):"not-current";let u;return n&&(u=await Ry(i,t,s,o==="current",r.resumeToken)),i.isPrimaryClient&&e&&sf(i.remoteStore,r),u}async function Ry(i,t,e,n,r){i.Ba=(_,m,g)=>async function(p,w,S,C){let x=w.view.da(S);x.Xi&&(x=await mc(p.localStore,w.query,!1).then(({documents:I})=>w.view.da(I,x)));const V=C&&C.targetChanges.get(w.targetId),k=C&&C.targetMismatches.get(w.targetId)!=null,O=w.view.applyChanges(x,p.isPrimaryClient,V,k);return Ic(p,w.targetId,O.fa),O.snapshot}(i,_,m,g);const s=await mc(i.localStore,t,!0),o=new Ty(t,s.hs),u=o.da(s.documents),l=Vi.createSynthesizedTargetChangeForCurrentChange(e,n&&i.onlineState!=="Offline",r),c=o.applyChanges(u,i.isPrimaryClient,l);Ic(i,e,c.fa);const f=new Ey(t,e,o);return i.ba.set(t,f),i.Da.has(e)?i.Da.get(e).push(t):i.Da.set(e,[t]),c.snapshot}async function Py(i,t,e){const n=Y(i),r=n.ba.get(t),s=n.Da.get(r.targetId);if(s.length>1)return n.Da.set(r.targetId,s.filter(o=>!$s(o,t))),void n.ba.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await ua(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),e&&Ja(n.remoteStore,r.targetId),ca(n,r.targetId)}).catch(Si)):(ca(n,r.targetId),await ua(n.localStore,r.targetId,!0))}async function Sy(i,t){const e=Y(i),n=e.ba.get(t),r=e.Da.get(n.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(n.targetId),Ja(e.remoteStore,n.targetId))}async function Cy(i,t,e){const n=My(i);try{const r=await function(o,u){const l=Y(o),c=Bt.now(),f=u.reduce((g,E)=>g.add(E.key),st());let _,m;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let E=tn(),p=st();return l.os.getEntries(g,f).next(w=>{E=w,E.forEach((S,C)=>{C.isValidDocument()||(p=p.add(S))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,E)).next(w=>{_=w;const S=[];for(const C of u){const x=Jm(C,_.get(C.key).overlayedDocument);x!=null&&S.push(new An(C.key,x,Ah(x.value.mapValue),Ie.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,S,u)}).next(w=>{m=w;const S=w.applyToLocalDocumentSet(_,p);return l.documentOverlayCache.saveOverlays(g,w.batchId,S)})}).then(()=>({batchId:m.batchId,changes:Nh(_)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(r.batchId),function(o,u,l){let c=o.xa[o.currentUser.toKey()];c||(c=new xt(mt)),c=c.insert(u,l),o.xa[o.currentUser.toKey()]=c}(n,r.batchId,e),await xi(n,r.changes),await Ks(n.remoteStore)}catch(r){const s=ru(r,"Failed to persist write");e.reject(s)}}async function _f(i,t){const e=Y(i);try{const n=await qg(e.localStore,t);t.targetChanges.forEach((r,s)=>{const o=e.Fa.get(s);o&&(Et(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.wa=!0:r.modifiedDocuments.size>0?Et(o.wa):r.removedDocuments.size>0&&(Et(o.wa),o.wa=!1))}),await xi(e,n,t)}catch(n){await Si(n)}}function wc(i,t,e){const n=Y(i);if(n.isPrimaryClient&&e===0||!n.isPrimaryClient&&e===1){const r=[];n.ba.forEach((s,o)=>{const u=o.view.j_(t);u.snapshot&&r.push(u.snapshot)}),function(o,u){const l=Y(o);l.onlineState=u;let c=!1;l.queries.forEach((f,_)=>{for(const m of _.U_)m.j_(u)&&(c=!0)}),c&&ou(l)}(n.eventManager,t),r.length&&n.Sa.h_(r),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function Dy(i,t,e){const n=Y(i);n.sharedClientState.updateQueryState(t,"rejected",e);const r=n.Fa.get(t),s=r&&r.key;if(s){let o=new xt(z.comparator);o=o.insert(s,re.newNoDocument(s,Q.min()));const u=st().add(s),l=new zs(Q.min(),new Map,new xt(mt),o,u);await _f(n,l),n.va=n.va.remove(s),n.Fa.delete(t),uu(n)}else await ua(n.localStore,t,!1).then(()=>ca(n,t,e)).catch(Si)}async function Vy(i,t){const e=Y(i),n=t.batch.batchId;try{const r=await zg(e.localStore,t);mf(e,n,null),pf(e,n),e.sharedClientState.updateMutationState(n,"acknowledged"),await xi(e,r)}catch(r){await Si(r)}}async function ky(i,t,e){const n=Y(i);try{const r=await function(o,u){const l=Y(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let f;return l.mutationQueue.lookupMutationBatch(c,u).next(_=>(Et(_!==null),f=_.keys(),l.mutationQueue.removeMutationBatch(c,_))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,f,u)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,f)).next(()=>l.localDocuments.getDocuments(c,f))})}(n.localStore,t);mf(n,t,e),pf(n,t),n.sharedClientState.updateMutationState(t,"rejected",e),await xi(n,r)}catch(r){await Si(r)}}function pf(i,t){(i.Oa.get(t)||[]).forEach(e=>{e.resolve()}),i.Oa.delete(t)}function mf(i,t,e){const n=Y(i);let r=n.xa[n.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),n.xa[n.currentUser.toKey()]=r}}function ca(i,t,e=null){i.sharedClientState.removeLocalQueryTarget(t);for(const n of i.Da.get(t))i.ba.delete(n),e&&i.Sa.ka(n,e);i.Da.delete(t),i.isPrimaryClient&&i.Ma.Vr(t).forEach(n=>{i.Ma.containsKey(n)||gf(i,n)})}function gf(i,t){i.Ca.delete(t.path.canonicalString());const e=i.va.get(t);e!==null&&(Ja(i.remoteStore,e),i.va=i.va.remove(t),i.Fa.delete(e),uu(i))}function Ic(i,t,e){for(const n of e)n instanceof hf?(i.Ma.addReference(n.key,t),xy(i,n)):n instanceof ff?(B("SyncEngine","Document no longer in limbo: "+n.key),i.Ma.removeReference(n.key,t),i.Ma.containsKey(n.key)||gf(i,n.key)):H()}function xy(i,t){const e=t.key,n=e.path.canonicalString();i.va.get(e)||i.Ca.has(n)||(B("SyncEngine","New document in limbo: "+e),i.Ca.add(n),uu(i))}function uu(i){for(;i.Ca.size>0&&i.va.size<i.maxConcurrentLimboResolutions;){const t=i.Ca.values().next().value;i.Ca.delete(t);const e=new z(Ct.fromString(t)),n=i.Na.next();i.Fa.set(n,new wy(e)),i.va=i.va.insert(e,n),sf(i.remoteStore,new an(Le(Ls(e.path)),n,"TargetPurposeLimboResolution",$a.oe))}}async function xi(i,t,e){const n=Y(i),r=[],s=[],o=[];n.ba.isEmpty()||(n.ba.forEach((u,l)=>{o.push(n.Ba(l,t,e).then(c=>{if((c||e)&&n.isPrimaryClient){const f=c&&!c.fromCache;n.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){r.push(c);const f=Ya.Ki(l.targetId,c);s.push(f)}}))}),await Promise.all(o),n.Sa.h_(r),await async function(l,c){const f=Y(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>F.forEach(c,m=>F.forEach(m.qi,g=>f.persistence.referenceDelegate.addReference(_,m.targetId,g)).next(()=>F.forEach(m.Qi,g=>f.persistence.referenceDelegate.removeReference(_,m.targetId,g)))))}catch(_){if(!Ci(_))throw _;B("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of c){const m=_.targetId;if(!_.fromCache){const g=f.ns.get(m),E=g.snapshotVersion,p=g.withLastLimboFreeSnapshotVersion(E);f.ns=f.ns.insert(m,p)}}}(n.localStore,s))}async function Ny(i,t){const e=Y(i);if(!e.currentUser.isEqual(t)){B("SyncEngine","User change. New user:",t.toKey());const n=await tf(e.localStore,t);e.currentUser=t,function(s,o){s.Oa.forEach(u=>{u.forEach(l=>{l.reject(new j(M.CANCELLED,o))})}),s.Oa.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await xi(e,n.us)}}function Oy(i,t){const e=Y(i),n=e.Fa.get(t);if(n&&n.wa)return st().add(n.key);{let r=st();const s=e.Da.get(t);if(!s)return r;for(const o of s){const u=e.ba.get(o);r=r.unionWith(u.view.Ea)}return r}}function yf(i){const t=Y(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=_f.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Oy.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Dy.bind(null,t),t.Sa.h_=yy.bind(null,t.eventManager),t.Sa.ka=vy.bind(null,t.eventManager),t}function My(i){const t=Y(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Vy.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ky.bind(null,t),t}class Ac{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=qs(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return jg(this.persistence,new Ug,t.initialUser,this.serializer)}createPersistence(t){return new Fg(Xa.Hr,this.serializer)}createSharedClientState(t){return new Qg}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Fy{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>wc(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ny.bind(null,this.syncEngine),await py(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new gy}()}createDatastore(t){const e=qs(t.databaseInfo.databaseId),n=function(s){return new Zg(s)}(t.databaseInfo);return function(s,o,u,l){return new ny(s,o,u,l)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(n,r,s,o,u){return new iy(n,r,s,o,u)}(this.localStore,this.datastore,t.asyncQueue,e=>wc(this.syncEngine,e,0),function(){return yc.D()?new yc:new Xg}())}createSyncEngine(t,e){return function(r,s,o,u,l,c,f){const _=new Iy(r,s,o,u,l,c);return f&&(_.La=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t;await async function(n){const r=Y(n);B("RemoteStore","RemoteStore shutting down."),r.M_.add(5),await ki(r),r.O_.shutdown(),r.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Ze("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(t,e,n,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=ne.UNAUTHENTICATED,this.clientId=Eh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async s=>{B("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(n,s=>(B("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new j(M.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Je;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=ru(e,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function xo(i,t){i.asyncQueue.verifyOperationInProgress(),B("FirestoreClient","Initializing OfflineComponentProvider");const e=i.configuration;await t.initialize(e);let n=e.initialUser;i.setCredentialChangeListener(async r=>{n.isEqual(r)||(await tf(t.localStore,r),n=r)}),t.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=t}async function bc(i,t){i.asyncQueue.verifyOperationInProgress();const e=await Uy(i);B("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(e,i.configuration),i.setCredentialChangeListener(n=>vc(t.remoteStore,n)),i.setAppCheckTokenChangeListener((n,r)=>vc(t.remoteStore,r)),i._onlineComponents=t}function $y(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}async function Uy(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){B("FirestoreClient","Using user provided OfflineComponentProvider");try{await xo(i,i._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!$y(e))throw e;mr("Error using user provided cache. Falling back to memory cache: "+e),await xo(i,new Ac)}}else B("FirestoreClient","Using default OfflineComponentProvider"),await xo(i,new Ac);return i._offlineComponents}async function vf(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(B("FirestoreClient","Using user provided OnlineComponentProvider"),await bc(i,i._uninitializedComponentsProvider._online)):(B("FirestoreClient","Using default OnlineComponentProvider"),await bc(i,new Fy))),i._onlineComponents}function By(i){return vf(i).then(t=>t.syncEngine)}async function Ps(i){const t=await vf(i),e=t.eventManager;return e.onListen=Ay.bind(null,t.syncEngine),e.onUnlisten=Py.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=by.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=Sy.bind(null,t.syncEngine),e}function jy(i,t,e={}){const n=new Je;return i.asyncQueue.enqueueAndForget(async()=>function(s,o,u,l,c){const f=new lu({next:m=>{o.enqueueAndForget(()=>su(s,_));const g=m.docs.has(u);!g&&m.fromCache?c.reject(new j(M.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&l&&l.source==="server"?c.reject(new j(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),_=new au(Ls(u.path),f,{includeMetadataChanges:!0,ra:!0});return iu(s,_)}(await Ps(i),i.asyncQueue,t,e,n)),n.promise}function zy(i,t,e={}){const n=new Je;return i.asyncQueue.enqueueAndForget(async()=>function(s,o,u,l,c){const f=new lu({next:m=>{o.enqueueAndForget(()=>su(s,_)),m.fromCache&&l.source==="server"?c.reject(new j(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),_=new au(u,f,{includeMetadataChanges:!0,ra:!0});return iu(s,_)}(await Ps(i),i.asyncQueue,t,e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(i){const t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rc=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(i,t,e){if(!e)throw new j(M.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function qy(i,t,e,n){if(t===!0&&n===!0)throw new j(M.INVALID_ARGUMENT,`${i} and ${e} cannot be used together.`)}function Pc(i){if(!z.isDocumentKey(i))throw new j(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Sc(i){if(z.isDocumentKey(i))throw new j(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function cu(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":H()}function Ae(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new j(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=cu(i);throw new j(M.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(t){var e,n;if(t.host===void 0){if(t.ssl!==void 0)throw new j(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new j(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}qy("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Tf((n=t.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new j(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new j(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new j(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,r){return n.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Hs{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Cc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new j(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new j(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Cc(t),t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new am;switch(n.type){case"firstParty":return new hm(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new j(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Rc.get(e);n&&(B("ComponentProvider","Removing Datastore"),Rc.delete(e),n.terminate())}(this),Promise.resolve()}}function Gy(i,t,e,n={}){var r;const s=(i=Ae(i,Hs))._getSettings(),o=`${t}:${e}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&mr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),n.mockUserToken){let u,l;if(typeof n.mockUserToken=="string")u=n.mockUserToken,l=ne.MOCK_USER;else{u=z_(n.mockUserToken,(r=i._app)===null||r===void 0?void 0:r.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new j(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ne(c)}i._authCredentials=new um(new Th(u,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Ni(this.firestore,t,this._query)}}class he{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new dn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new he(this.firestore,t,this._key)}}class dn extends Ni{constructor(t,e,n){super(t,e,Ls(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new he(this.firestore,null,new z(t))}withConverter(t){return new dn(this.firestore,t,this._path)}}function Ws(i,t,...e){if(i=xe(i),Ef("collection","path",t),i instanceof Hs){const n=Ct.fromString(t,...e);return Sc(n),new dn(i,null,n)}{if(!(i instanceof he||i instanceof dn))throw new j(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Ct.fromString(t,...e));return Sc(n),new dn(i.firestore,null,n)}}function wf(i,t,...e){if(i=xe(i),arguments.length===1&&(t=Eh.newId()),Ef("doc","path",t),i instanceof Hs){const n=Ct.fromString(t,...e);return Pc(n),new he(i,null,new z(n))}{if(!(i instanceof he||i instanceof dn))throw new j(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Ct.fromString(t,...e));return Pc(n),new he(i.firestore,i instanceof dn?i.converter:null,new z(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new nf(this,"async_queue_retry"),this.hu=()=>{const e=ko();e&&B("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};const t=ko();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const e=ko();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const e=new Je;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!Ci(t))throw t;B("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const e=this.iu.then(()=>(this.uu=!0,t().catch(n=>{this.au=n,this.uu=!1;const r=function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),u}(n);throw Ze("INTERNAL UNHANDLED ERROR: ",r),n}).then(n=>(this.uu=!1,n))));return this.iu=e,e}enqueueAfterDelay(t,e,n){this.Pu(),this.lu.indexOf(t)>-1&&(e=0);const r=nu.createAndSchedule(this,t,e,n,s=>this.Eu(s));return this._u.push(r),r}Pu(){this.au&&H()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const e of this._u)if(e.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((e,n)=>e.targetTimeMs-n.targetTimeMs);for(const e of this._u)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const e=this._u.indexOf(t);this._u.splice(e,1)}}function Dc(i){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const s of n)if(s in r&&typeof r[s]=="function")return!0;return!1}(i,["next","error","complete"])}class En extends Hs{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=function(){return new Ky}(),this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||If(this),this._firestoreClient.terminate()}}function Hy(i,t){const e=typeof i=="object"?i:Yp(),n=typeof i=="string"?i:"(default)",r=Hp(e,"firestore").getImmediate({identifier:n});if(!r._initialized){const s=B_("firestore");s&&Gy(r,...s)}return r}function Oi(i){return i._firestoreClient||If(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function If(i){var t,e,n;const r=i._freezeSettings(),s=function(u,l,c,f){return new Am(u,l,c,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,Tf(f.experimentalLongPollingOptions),f.useFetchStreams)}(i._databaseId,((t=i._app)===null||t===void 0?void 0:t.options.appId)||"",i._persistenceKey,r);i._firestoreClient=new Ly(i._authCredentials,i._appCheckCredentials,i._queue,s),!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((n=r.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new wr(ae.fromBase64String(t))}catch(e){throw new j(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new wr(ae.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new j(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new j(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new j(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return mt(this._lat,t._lat)||mt(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy=/^__.*__$/;class Qy{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return this.fieldMask!==null?new An(t,this.data,this.fieldMask,e,this.fieldTransforms):new Di(t,this.data,e,this.fieldTransforms)}}class Af{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new An(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function bf(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H()}}class du{constructor(t,e,n,r,s,o){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=r,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new du(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var e;const n=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.gu({path:n,yu:!1});return r.wu(t),r}Su(t){var e;const n=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return Ss(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(bf(this.fu)&&Wy.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class Xy{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||qs(t)}Fu(t,e,n,r=!1){return new du({fu:t,methodName:e,vu:n,path:Wt.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _u(i){const t=i._freezeSettings(),e=qs(i._databaseId);return new Xy(i._databaseId,!!t.ignoreUndefinedProperties,e)}function Rf(i,t,e,n,r,s={}){const o=i.Fu(s.merge||s.mergeFields?2:0,t,e,r);pu("Data must be an object, but it was:",o,n);const u=Cf(n,o);let l,c;if(s.merge)l=new Ee(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const _ of s.mergeFields){const m=ha(t,_,e);if(!o.contains(m))throw new j(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Vf(f,m)||f.push(m)}l=new Ee(f),c=o.fieldTransforms.filter(_=>l.covers(_.field))}else l=null,c=o.fieldTransforms;return new Qy(new fe(u),l,c)}class Qs extends hu{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Qs}}function Pf(i,t,e,n){const r=i.Fu(1,t,e);pu("Data must be an object, but it was:",r,n);const s=[],o=fe.empty();Qn(n,(l,c)=>{const f=mu(t,l,e);c=xe(c);const _=r.Su(f);if(c instanceof Qs)s.push(f);else{const m=Xs(c,_);m!=null&&(s.push(f),o.set(f,m))}});const u=new Ee(s);return new Af(o,u,r.fieldTransforms)}function Sf(i,t,e,n,r,s){const o=i.Fu(1,t,e),u=[ha(t,n,e)],l=[r];if(s.length%2!=0)throw new j(M.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)u.push(ha(t,s[m])),l.push(s[m+1]);const c=[],f=fe.empty();for(let m=u.length-1;m>=0;--m)if(!Vf(c,u[m])){const g=u[m];let E=l[m];E=xe(E);const p=o.Su(g);if(E instanceof Qs)c.push(g);else{const w=Xs(E,p);w!=null&&(c.push(g),f.set(g,w))}}const _=new Ee(c);return new Af(f,_,o.fieldTransforms)}function Xs(i,t){if(Df(i=xe(i)))return pu("Unsupported field value:",t,i),Cf(i,t);if(i instanceof hu)return function(n,r){if(!bf(r.fu))throw r.Du(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(n,r){const s=[];let o=0;for(const u of n){let l=Xs(u,r.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(i,t)}return function(n,r){if((n=xe(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Km(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Bt.fromDate(n);return{timestampValue:bs(r.serializer,s)}}if(n instanceof Bt){const s=new Bt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:bs(r.serializer,s)}}if(n instanceof fu)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof wr)return{bytesValue:Hh(r.serializer,n._byteString)};if(n instanceof he){const s=r.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw r.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Wa(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Du(`Unsupported field value: ${cu(n)}`)}(i,t)}function Cf(i,t){const e={};return wh(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qn(i,(n,r)=>{const s=Xs(r,t.pu(n));s!=null&&(e[n]=s)}),{mapValue:{fields:e}}}function Df(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Bt||i instanceof fu||i instanceof wr||i instanceof he||i instanceof hu)}function pu(i,t,e){if(!Df(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){const n=cu(e);throw n==="an object"?t.Du(i+" a custom object"):t.Du(i+" "+n)}}function ha(i,t,e){if((t=xe(t))instanceof Mi)return t._internalPath;if(typeof t=="string")return mu(i,t);throw Ss("Field path arguments must be of type string or ",i,!1,void 0,e)}const Yy=new RegExp("[~\\*/\\[\\]]");function mu(i,t,e){if(t.search(Yy)>=0)throw Ss(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,e);try{return new Mi(...t.split("."))._internalPath}catch{throw Ss(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,e)}}function Ss(i,t,e,n,r){const s=n&&!n.isEmpty(),o=r!==void 0;let u=`Function ${t}() called with invalid data`;e&&(u+=" (via `toFirestore()`)"),u+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${n}`),o&&(l+=` in document ${r}`),l+=")"),new j(M.INVALID_ARGUMENT,u+i+l)}function Vf(i,t){return i.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(t,e,n,r,s){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new he(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Jy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(xf("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class Jy extends kf{data(){return super.data()}}function xf(i,t){return typeof t=="string"?mu(i,t):t instanceof Mi?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new j(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zy{convertValue(t,e="none"){switch(Kn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Lt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Gn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw H()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return Qn(t,(r,s)=>{n[r]=this.convertValue(s,e)}),n}convertGeoPoint(t){return new fu(Lt(t.latitude),Lt(t.longitude))}convertArray(t,e){return(t.values||[]).map(n=>this.convertValue(n,e))}convertServerTimestamp(t,e){switch(e){case"previous":const n=Ba(t);return n==null?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(_i(t));default:return null}}convertTimestamp(t){const e=vn(t);return new Bt(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=Ct.fromString(t);Et(Zh(n));const r=new pi(n.get(1),n.get(3)),s=new z(n.popFirst(5));return r.isEqual(e)||Ze(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(i,t,e){let n;return n=i?e&&(e.merge||e.mergeFields)?i.toFirestore(t,e):i.toFirestore(t):t,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Mf extends kf{constructor(t,e,n,r,s,o){super(t,e,n,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new hs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(xf("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class hs extends Mf{data(t={}){return super.data(t)}}class Ff{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Jr(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(n=>{t.call(e,new hs(this._firestore,this._userDataWriter,n.key,n,new Jr(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new j(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(u=>{const l=new hs(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Jr(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>s||u.type!==3).map(u=>{const l=new hs(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Jr(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,f=-1;return u.type!==0&&(c=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),f=o.indexOf(u.doc.key)),{type:t0(u.type),doc:l,oldIndex:c,newIndex:f}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function t0(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(i){i=Ae(i,he);const t=Ae(i.firestore,En);return jy(Oi(t),i._key).then(e=>$f(t,i,e))}class gu extends Zy{constructor(t){super(),this.firestore=t}convertBytes(t){return new wr(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new he(this.firestore,null,e)}}function Ys(i){i=Ae(i,Ni);const t=Ae(i.firestore,En),e=Oi(t),n=new gu(t);return Nf(i._query),zy(e,i._query).then(r=>new Ff(t,n,i,r))}function n0(i,t,e){i=Ae(i,he);const n=Ae(i.firestore,En),r=Of(i.converter,t,e);return yu(n,[Rf(_u(n),"setDoc",i._key,r,i.converter!==null,e).toMutation(i._key,Ie.none())])}function Lf(i,t,e,...n){i=Ae(i,he);const r=Ae(i.firestore,En),s=_u(r);let o;return o=typeof(t=xe(t))=="string"||t instanceof Mi?Sf(s,"updateDoc",i._key,t,e,n):Pf(s,"updateDoc",i._key,t),yu(r,[o.toMutation(i._key,Ie.exists(!0))])}function r0(i,...t){var e,n,r;i=xe(i);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||Dc(t[o])||(s=t[o],o++);const u={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Dc(t[o])){const _=t[o];t[o]=(e=_.next)===null||e===void 0?void 0:e.bind(_),t[o+1]=(n=_.error)===null||n===void 0?void 0:n.bind(_),t[o+2]=(r=_.complete)===null||r===void 0?void 0:r.bind(_)}let l,c,f;if(i instanceof he)c=Ae(i.firestore,En),f=Ls(i._key.path),l={next:_=>{t[o]&&t[o]($f(c,i,_))},error:t[o+1],complete:t[o+2]};else{const _=Ae(i,Ni);c=Ae(_.firestore,En),f=_._query;const m=new gu(c);l={next:g=>{t[o]&&t[o](new Ff(c,m,_,g))},error:t[o+1],complete:t[o+2]},Nf(i._query)}return function(m,g,E,p){const w=new lu(p),S=new au(g,w,E);return m.asyncQueue.enqueueAndForget(async()=>iu(await Ps(m),S)),()=>{w.$a(),m.asyncQueue.enqueueAndForget(async()=>su(await Ps(m),S))}}(Oi(c),f,u,l)}function yu(i,t){return function(n,r){const s=new Je;return n.asyncQueue.enqueueAndForget(async()=>Cy(await By(n),r,s)),s.promise}(Oi(i),t)}function $f(i,t,e){const n=e.docs.get(t._key),r=new gu(i);return new Mf(i,r,t._key,n,new Jr(e.hasPendingWrites,e.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=_u(t)}set(t,e,n){this._verifyNotCommitted();const r=No(t,this._firestore),s=Of(r.converter,e,n),o=Rf(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,n);return this._mutations.push(o.toMutation(r._key,Ie.none())),this}update(t,e,n,...r){this._verifyNotCommitted();const s=No(t,this._firestore);let o;return o=typeof(e=xe(e))=="string"||e instanceof Mi?Sf(this._dataReader,"WriteBatch.update",s._key,e,n,r):Pf(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Ie.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=No(t,this._firestore);return this._mutations=this._mutations.concat(new Ga(e._key,Ie.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new j(M.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function No(i,t){if((i=xe(i)).firestore!==t)throw new j(M.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(i){return Oi(i=Ae(i,En)),new i0(i,t=>yu(i,t))}(function(t,e=!0){(function(r){Cr=r})(Xp),vs(new hi("firestore",(n,{instanceIdentifier:r,options:s})=>{const o=n.getProvider("app").getImmediate(),u=new En(new lm(n.getProvider("auth-internal")),new dm(n.getProvider("app-check-internal")),function(c,f){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new j(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pi(c.options.projectId,f)}(o,r),o);return s=Object.assign({useFetchStreams:e},s),u._setSettings(s),u},"PUBLIC").setMultipleInstances(!0)),lr(Xl,"4.6.3",t),lr(Xl,"4.6.3","esm2017")})();var o0="firebase",a0="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lr(o0,a0,"app");const u0={apiKey:"AIzaSyDrTR0lVaKeBrqIlhJiwst2-KsEwBtE538",authDomain:"bob-game-90e47.firebaseapp.com",projectId:"bob-game-90e47",storageBucket:"bob-game-90e47.appspot.com",messagingSenderId:"880391810715",appId:"1:880391810715:web:f537e6f4c16b7412e7a03e",measurementId:"G-FL5LYSNQ76"},l0=ch(u0),Ln=Hy(l0);function Vc(i){let t,e,n,r,s;return e=new Re({props:{$$slots:{default:[c0]},$$scope:{ctx:i}}}),e.$on("click",i[2]),r=new Re({props:{$$slots:{default:[h0]},$$scope:{ctx:i}}}),r.$on("click",i[3]),{c(){t=G("div"),At(e.$$.fragment),n=rt(),At(r.$$.fragment)},l(o){t=K(o,"DIV",{});var u=Z(t);bt(e.$$.fragment,u),n=it(u),bt(r.$$.fragment,u),u.forEach(L)},m(o,u){q(o,t,u),Rt(e,t,null),U(t,n),Rt(r,t,null),s=!0},p(o,u){const l={};u&32&&(l.$$scope={dirty:u,ctx:o}),e.$set(l);const c={};u&32&&(c.$$scope={dirty:u,ctx:o}),r.$set(c)},i(o){s||(X(e.$$.fragment,o),X(r.$$.fragment,o),s=!0)},o(o){tt(e.$$.fragment,o),tt(r.$$.fragment,o),s=!1},d(o){o&&L(t),Pt(e),Pt(r)}}}function c0(i){let t;return{c(){t=ht("Start")},l(e){t=ft(e,"Start")},m(e,n){q(e,t,n)},d(e){e&&L(t)}}}function h0(i){let t;return{c(){t=ht("Instellingen")},l(e){t=ft(e,"Instellingen")},m(e,n){q(e,t,n)},d(e){e&&L(t)}}}function kc(i){let t,e,n,r,s;return e=new Re({props:{$$slots:{default:[f0]},$$scope:{ctx:i}}}),e.$on("click",i[1]),r=new Re({props:{theme:"red",$$slots:{default:[d0]},$$scope:{ctx:i}}}),r.$on("click",i[4]),{c(){t=G("div"),At(e.$$.fragment),n=rt(),At(r.$$.fragment)},l(o){t=K(o,"DIV",{});var u=Z(t);bt(e.$$.fragment,u),n=it(u),bt(r.$$.fragment,u),u.forEach(L)},m(o,u){q(o,t,u),Rt(e,t,null),U(t,n),Rt(r,t,null),s=!0},p(o,u){const l={};u&32&&(l.$$scope={dirty:u,ctx:o}),e.$set(l);const c={};u&32&&(c.$$scope={dirty:u,ctx:o}),r.$set(c)},i(o){s||(X(e.$$.fragment,o),X(r.$$.fragment,o),s=!0)},o(o){tt(e.$$.fragment,o),tt(r.$$.fragment,o),s=!1},d(o){o&&L(t),Pt(e),Pt(r)}}}function f0(i){let t;return{c(){t=ht("Reset de firestore")},l(e){t=ft(e,"Reset de firestore")},m(e,n){q(e,t,n)},d(e){e&&L(t)}}}function d0(i){let t;return{c(){t=ht("Terug")},l(e){t=ft(e,"Terug")},m(e,n){q(e,t,n)},d(e){e&&L(t)}}}function _0(i){let t,e,n,r=!i[0]&&Vc(i),s=i[0]&&kc(i);return{c(){r&&r.c(),t=rt(),s&&s.c(),e=mn()},l(o){r&&r.l(o),t=it(o),s&&s.l(o),e=mn()},m(o,u){r&&r.m(o,u),q(o,t,u),s&&s.m(o,u),q(o,e,u),n=!0},p(o,u){o[0]?r&&(ui(),tt(r,1,1,()=>{r=null}),li()):r?(r.p(o,u),u&1&&X(r,1)):(r=Vc(o),r.c(),X(r,1),r.m(t.parentNode,t)),o[0]?s?(s.p(o,u),u&1&&X(s,1)):(s=kc(o),s.c(),X(s,1),s.m(e.parentNode,e)):s&&(ui(),tt(s,1,1,()=>{s=null}),li())},i(o){n||(X(r),X(s),n=!0)},o(o){tt(r),tt(s),n=!1},d(o){o&&(L(t),L(e)),r&&r.d(o),s&&s.d(o)}}}function p0(i){let t,e;return t=new Pi({props:{$$slots:{default:[_0]},$$scope:{ctx:i}}}),{c(){At(t.$$.fragment)},l(n){bt(t.$$.fragment,n)},m(n,r){Rt(t,n,r),e=!0},p(n,[r]){const s={};r&33&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(X(t.$$.fragment,n),e=!0)},o(n){tt(t.$$.fragment,n),e=!1},d(n){Pt(t,n)}}}function m0(i,t,e){let n=!1;return[n,async()=>{const l=Ws(Ln,"stakeholders"),c=await Ys(l);let f=[];const _=c.docs[0].data().values.length;for(let m=0;m<_;m++)f.push(0);console.log();for(const m of c.docs)await Lf(m.ref,{values:f});console.log("values emptied!")},()=>Be.set(1),()=>e(0,n=!n),()=>e(0,n=!n)]}class g0 extends Ge{constructor(t){super(),Ke(this,t,m0,p0,Ne,{})}}function xc(i,t,e){const n=i.slice();return n[12]=t[e],n[14]=e,n}function Nc(i){let t,e,n=i[0].id+"",r,s,o,u,l='<tr><th class="px-2">Naam</th> <th class="px-2">Schaal</th> <th class="px-2">Geholpen mensen</th> <th class="px-2">Kosten</th> <th class="px-2">Vrijwilligers</th></tr>',c,f,_,m,g,E="Totaal",p,w,S,C,x,V,k,O=i[3].toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"",I,y,v,b,R,P,A,et,ut,_t,pt=_r(i[1]),ot=[];for(let J=0;J<pt.length;J+=1)ot[J]=Oc(xc(i,pt,J));return A=new Re({props:{theme:"red",$$slots:{default:[y0]},$$scope:{ctx:i}}}),A.$on("click",i[9]),ut=new Re({props:{$$slots:{default:[v0]},$$scope:{ctx:i}}}),ut.$on("click",i[10]),{c(){t=G("div"),e=G("div"),r=ht(n),s=rt(),o=G("table"),u=G("thead"),u.innerHTML=l,c=rt(),f=G("tbody");for(let J=0;J<ot.length;J+=1)ot[J].c();_=rt(),m=G("tr"),g=G("td"),g.textContent=E,p=rt(),w=G("td"),S=rt(),C=G("td"),x=ht(i[4]),V=rt(),k=G("td"),I=ht(O),y=rt(),v=G("td"),b=ht(i[2]),R=rt(),P=G("div"),At(A.$$.fragment),et=rt(),At(ut.$$.fragment),this.h()},l(J){t=K(J,"DIV",{class:!0});var gt=Z(t);e=K(gt,"DIV",{class:!0});var jt=Z(e);r=ft(jt,n),jt.forEach(L),s=it(gt),o=K(gt,"TABLE",{class:!0});var St=Z(o);u=K(St,"THEAD",{"data-svelte-h":!0}),gn(u)!=="svelte-1wftw8g"&&(u.innerHTML=l),c=it(St),f=K(St,"TBODY",{});var nt=Z(f);for(let kr=0;kr<ot.length;kr+=1)ot[kr].l(nt);_=it(nt),m=K(nt,"TR",{class:!0});var wt=Z(m);g=K(wt,"TD",{class:!0,"data-svelte-h":!0}),gn(g)!=="svelte-iomj7a"&&(g.textContent=E),p=it(wt),w=K(wt,"TD",{class:!0}),Z(w).forEach(L),S=it(wt),C=K(wt,"TD",{class:!0});var Yt=Z(C);x=ft(Yt,i[4]),Yt.forEach(L),V=it(wt),k=K(wt,"TD",{class:!0});var Li=Z(k);I=ft(Li,O),Li.forEach(L),y=it(wt),v=K(wt,"TD",{class:!0});var Rn=Z(v);b=ft(Rn,i[2]),Rn.forEach(L),wt.forEach(L),nt.forEach(L),St.forEach(L),R=it(gt),P=K(gt,"DIV",{class:!0});var Jn=Z(P);bt(A.$$.fragment,Jn),et=it(Jn),bt(ut.$$.fragment,Jn),Jn.forEach(L),gt.forEach(L),this.h()},h(){W(e,"class","font-bold text-2xl mb-4"),W(g,"class","px-2 py-1"),W(w,"class","px-2 py-1"),W(C,"class","px-2 py-1"),W(k,"class","px-2 py-1"),W(v,"class","px-2 py-1"),W(m,"class","font-bold border-t-2 border-black"),W(o,"class","text-left"),W(P,"class","flex gap-x-2"),W(t,"class","p-10 bg-yellow-100 shadow-lg flex flex-col")},m(J,gt){q(J,t,gt),U(t,e),U(e,r),U(t,s),U(t,o),U(o,u),U(o,c),U(o,f);for(let jt=0;jt<ot.length;jt+=1)ot[jt]&&ot[jt].m(f,null);U(f,_),U(f,m),U(m,g),U(m,p),U(m,w),U(m,S),U(m,C),U(C,x),U(m,V),U(m,k),U(k,I),U(m,y),U(m,v),U(v,b),U(t,R),U(t,P),Rt(A,P,null),U(P,et),Rt(ut,P,null),_t=!0},p(J,gt){if((!_t||gt&1)&&n!==(n=J[0].id+"")&&Qt(r,n),gt&35){pt=_r(J[1]);let nt;for(nt=0;nt<pt.length;nt+=1){const wt=xc(J,pt,nt);ot[nt]?ot[nt].p(wt,gt):(ot[nt]=Oc(wt),ot[nt].c(),ot[nt].m(f,_))}for(;nt<ot.length;nt+=1)ot[nt].d(1);ot.length=pt.length}(!_t||gt&16)&&Qt(x,J[4]),(!_t||gt&8)&&O!==(O=J[3].toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"")&&Qt(I,O),(!_t||gt&4)&&Qt(b,J[2]);const jt={};gt&32768&&(jt.$$scope={dirty:gt,ctx:J}),A.$set(jt);const St={};gt&32768&&(St.$$scope={dirty:gt,ctx:J}),ut.$set(St)},i(J){_t||(X(A.$$.fragment,J),X(ut.$$.fragment,J),_t=!0)},o(J){tt(A.$$.fragment,J),tt(ut.$$.fragment,J),_t=!1},d(J){J&&L(t),Na(ot,J),Pt(A),Pt(ut)}}}function Oc(i){let t,e,n=i[12].naam.charAt(0).toUpperCase()+i[12].naam.slice(1)+"",r,s,o,u,l,c,f,_=ci(i[0].values[i[14]],i[12])+"",m,g,E,p=ps(i[0].values[i[14]],i[12]).toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"",w,S,C,x=ms(i[0].values[i[14]],i[12])+"",V,k,O;function I(...y){return i[8](i[14],...y)}return{c(){t=G("tr"),e=G("td"),r=ht(n),s=rt(),o=G("td"),u=G("input"),c=rt(),f=G("td"),m=ht(_),g=rt(),E=G("td"),w=ht(p),S=rt(),C=G("td"),V=ht(x),this.h()},l(y){t=K(y,"TR",{});var v=Z(t);e=K(v,"TD",{class:!0});var b=Z(e);r=ft(b,n),b.forEach(L),s=it(v),o=K(v,"TD",{class:!0});var R=Z(o);u=K(R,"INPUT",{type:!0,min:!0,max:!0,class:!0}),R.forEach(L),c=it(v),f=K(v,"TD",{class:!0});var P=Z(f);m=ft(P,_),P.forEach(L),g=it(v),E=K(v,"TD",{class:!0});var A=Z(E);w=ft(A,p),A.forEach(L),S=it(v),C=K(v,"TD",{class:!0});var et=Z(C);V=ft(et,x),et.forEach(L),v.forEach(L),this.h()},h(){W(e,"class","px-2"),W(u,"type","range"),u.value=l=i[0].values[i[14]],W(u,"min","0"),W(u,"max","10"),W(u,"class","slider accent-blue-500 align-middle appearance-none w-full cursor-pointer h-1 bg-red-500"),W(o,"class","px-2"),W(f,"class","px-2"),W(E,"class","px-2"),W(C,"class","px-2")},m(y,v){q(y,t,v),U(t,e),U(e,r),U(t,s),U(t,o),U(o,u),U(t,c),U(t,f),U(f,m),U(t,g),U(t,E),U(E,w),U(t,S),U(t,C),U(C,V),k||(O=xa(u,"input",I),k=!0)},p(y,v){i=y,v&2&&n!==(n=i[12].naam.charAt(0).toUpperCase()+i[12].naam.slice(1)+"")&&Qt(r,n),v&1&&l!==(l=i[0].values[i[14]])&&(u.value=l),v&3&&_!==(_=ci(i[0].values[i[14]],i[12])+"")&&Qt(m,_),v&3&&p!==(p=ps(i[0].values[i[14]],i[12]).toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"")&&Qt(w,p),v&3&&x!==(x=ms(i[0].values[i[14]],i[12])+"")&&Qt(V,x)},d(y){y&&L(t),k=!1,O()}}}function y0(i){let t;return{c(){t=ht("Terug")},l(e){t=ft(e,"Terug")},m(e,n){q(e,t,n)},d(e){e&&L(t)}}}function v0(i){let t;return{c(){t=ht("Klaar")},l(e){t=ft(e,"Klaar")},m(e,n){q(e,t,n)},d(e){e&&L(t)}}}function T0(i){let t,e,n=i[0]&&Nc(i);return{c(){n&&n.c(),t=mn()},l(r){n&&n.l(r),t=mn()},m(r,s){n&&n.m(r,s),q(r,t,s),e=!0},p(r,[s]){r[0]?n?(n.p(r,s),s&1&&X(n,1)):(n=Nc(r),n.c(),X(n,1),n.m(t.parentNode,t)):n&&(ui(),tt(n,1,1,()=>{n=null}),li())},i(r){e||(X(n),e=!0)},o(r){tt(n),e=!1},d(r){r&&L(t),n&&n.d(r)}}}function E0(i,t,e){let n,r,s,o,u,l,c;Ye(i,Go,p=>e(1,u=p)),Ye(i,Oa,p=>e(6,l=p)),Ye(i,pr,p=>e(7,c=p)),ka(async()=>{const p=Ws(Ln,"maatregelen"),w=await Ys(p);Go.set(w.docs.map(S=>({id:S.id,...S.data()})))});const f=(p,w)=>{const S=p.target;e(0,n.values[w]=S.valueAsNumber,n),_()},_=async()=>{try{const p=n.id,w=wf(Ln,"stakeholders",p);(await e0(w)).exists()?await Lf(w,{values:n.values}):await n0(w,{values:n.values}),console.log("Document successfully updated!")}catch(p){console.error("Error updating document: ",p)}},m=(p,w)=>f(w,p),g=()=>{Be.set(2)},E=()=>{Be.set(4)};return i.$$.update=()=>{i.$$.dirty&192&&e(0,n=c.find(p=>p.id===(l==null?void 0:l.id))),i.$$.dirty&3&&e(4,r=u.reduce((p,w,S)=>{var C;return p+ci(((C=n==null?void 0:n.values)==null?void 0:C[S])??0,w)},0)),i.$$.dirty&3&&e(3,s=u.reduce((p,w,S)=>{var C;return p+ps(((C=n==null?void 0:n.values)==null?void 0:C[S])??0,w)},0)),i.$$.dirty&3&&e(2,o=u.reduce((p,w,S)=>{var C;return p+ms(((C=n==null?void 0:n.values)==null?void 0:C[S])??0,w)},0))},[n,u,o,s,r,f,l,c,m,g,E]}class w0 extends Ge{constructor(t){super(),Ke(this,t,E0,T0,Ne,{})}}function Mc(i){let t,e;return t=new Pi({props:{$$slots:{default:[b0]},$$scope:{ctx:i}}}),{c(){At(t.$$.fragment)},l(n){bt(t.$$.fragment,n)},m(n,r){Rt(t,n,r),e=!0},p(n,r){const s={};r&9&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(X(t.$$.fragment,n),e=!0)},o(n){tt(t.$$.fragment,n),e=!1},d(n){Pt(t,n)}}}function I0(i){let t;return{c(){t=ht("Terug")},l(e){t=ft(e,"Terug")},m(e,n){q(e,t,n)},d(e){e&&L(t)}}}function A0(i){let t;return{c(){t=ht("Klaar")},l(e){t=ft(e,"Klaar")},m(e,n){q(e,t,n)},d(e){e&&L(t)}}}function b0(i){let t,e=i[0].id+"",n,r,s,o=i[0].description+"",u,l,c,f,_,m,g;return f=new Re({props:{theme:"red",$$slots:{default:[I0]},$$scope:{ctx:i}}}),f.$on("click",i[1]),m=new Re({props:{$$slots:{default:[A0]},$$scope:{ctx:i}}}),m.$on("click",i[2]),{c(){t=G("h2"),n=ht(e),r=rt(),s=G("p"),u=ht(o),l=rt(),c=G("div"),At(f.$$.fragment),_=rt(),At(m.$$.fragment),this.h()},l(E){t=K(E,"H2",{class:!0});var p=Z(t);n=ft(p,e),p.forEach(L),r=it(E),s=K(E,"P",{class:!0});var w=Z(s);u=ft(w,o),w.forEach(L),l=it(E),c=K(E,"DIV",{class:!0});var S=Z(c);bt(f.$$.fragment,S),_=it(S),bt(m.$$.fragment,S),S.forEach(L),this.h()},h(){W(t,"class","font-bold text-2xl"),W(s,"class","lg:max-w-[400px]"),W(c,"class","flex gap-x-2")},m(E,p){q(E,t,p),U(t,n),q(E,r,p),q(E,s,p),U(s,u),q(E,l,p),q(E,c,p),Rt(f,c,null),U(c,_),Rt(m,c,null),g=!0},p(E,p){(!g||p&1)&&e!==(e=E[0].id+"")&&Qt(n,e),(!g||p&1)&&o!==(o=E[0].description+"")&&Qt(u,o);const w={};p&8&&(w.$$scope={dirty:p,ctx:E}),f.$set(w);const S={};p&8&&(S.$$scope={dirty:p,ctx:E}),m.$set(S)},i(E){g||(X(f.$$.fragment,E),X(m.$$.fragment,E),g=!0)},o(E){tt(f.$$.fragment,E),tt(m.$$.fragment,E),g=!1},d(E){E&&(L(t),L(r),L(s),L(l),L(c)),Pt(f),Pt(m)}}}function R0(i){let t,e,n=i[0]&&Mc(i);return{c(){n&&n.c(),t=mn()},l(r){n&&n.l(r),t=mn()},m(r,s){n&&n.m(r,s),q(r,t,s),e=!0},p(r,[s]){r[0]?n?(n.p(r,s),s&1&&X(n,1)):(n=Mc(r),n.c(),X(n,1),n.m(t.parentNode,t)):n&&(ui(),tt(n,1,1,()=>{n=null}),li())},i(r){e||(X(n),e=!0)},o(r){tt(n),e=!1},d(r){r&&L(t),n&&n.d(r)}}}function P0(i,t,e){let n;return Ye(i,Oa,o=>e(0,n=o)),[n,()=>{Be.set(1)},()=>{Be.set(3)}]}class S0 extends Ge{constructor(t){super(),Ke(this,t,P0,R0,Ne,{})}}function Fc(i,t,e){const n=i.slice();return n[5]=t[e],n}function C0(i){let t,e='<svg aria-hidden="true" class="w-8 h-8 text-blue-500 animate-spin fill-white" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z" fill="currentColor"></path><path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z" fill="currentFill"></path></svg> <span class="sr-only">Loading...</span>';return{c(){t=G("div"),t.innerHTML=e,this.h()},l(n){t=K(n,"DIV",{role:!0,"data-svelte-h":!0}),gn(t)!=="svelte-1enh005"&&(t.innerHTML=e),this.h()},h(){W(t,"role","status")},m(n,r){q(n,t,r)},d(n){n&&L(t)}}}function D0(i){let t,e='Er is iets misgegaan bij het ophalen van de data. <a class="text-blue-500 underline" href="/upload">upload een excel bestand</a> en probeer het opnieuw.';return{c(){t=G("div"),t.innerHTML=e,this.h()},l(n){t=K(n,"DIV",{class:!0,"data-svelte-h":!0}),gn(t)!=="svelte-1s9ns9h"&&(t.innerHTML=e),this.h()},h(){W(t,"class","text-red-500")},m(n,r){q(n,t,r)},d(n){n&&L(t)}}}function V0(i){let t=i[5].id+"",e;return{c(){e=ht(t)},l(n){e=ft(n,t)},m(n,r){q(n,e,r)},p(n,r){r&2&&t!==(t=n[5].id+"")&&Qt(e,t)},d(n){n&&L(e)}}}function Lc(i){let t,e;function n(){return i[3](i[5])}return t=new Re({props:{$$slots:{default:[V0]},$$scope:{ctx:i}}}),t.$on("click",n),{c(){At(t.$$.fragment)},l(r){bt(t.$$.fragment,r)},m(r,s){Rt(t,r,s),e=!0},p(r,s){i=r;const o={};s&258&&(o.$$scope={dirty:s,ctx:i}),t.$set(o)},i(r){e||(X(t.$$.fragment,r),e=!0)},o(r){tt(t.$$.fragment,r),e=!1},d(r){Pt(t,r)}}}function k0(i){let t;return{c(){t=ht("Terug")},l(e){t=ft(e,"Terug")},m(e,n){q(e,t,n)},d(e){e&&L(t)}}}function x0(i){let t,e="Kies je stakeholder",n,r,s,o,u,l;function c(p,w){if(p[0])return D0;if(p[1].length===0)return C0}let f=c(i),_=f&&f(i),m=_r(i[1]),g=[];for(let p=0;p<m.length;p+=1)g[p]=Lc(Fc(i,m,p));const E=p=>tt(g[p],1,1,()=>{g[p]=null});return u=new Re({props:{theme:"red",$$slots:{default:[k0]},$$scope:{ctx:i}}}),u.$on("click",i[4]),{c(){t=G("div"),t.textContent=e,n=rt(),r=G("div"),_&&_.c(),s=rt();for(let p=0;p<g.length;p+=1)g[p].c();o=rt(),At(u.$$.fragment),this.h()},l(p){t=K(p,"DIV",{class:!0,"data-svelte-h":!0}),gn(t)!=="svelte-1uqwzll"&&(t.textContent=e),n=it(p),r=K(p,"DIV",{class:!0});var w=Z(r);_&&_.l(w),s=it(w);for(let S=0;S<g.length;S+=1)g[S].l(w);o=it(w),bt(u.$$.fragment,w),w.forEach(L),this.h()},h(){W(t,"class","font-bold text-2xl mb-4"),W(r,"class","flex gap-x-2")},m(p,w){q(p,t,w),q(p,n,w),q(p,r,w),_&&_.m(r,null),U(r,s);for(let S=0;S<g.length;S+=1)g[S]&&g[S].m(r,null);U(r,o),Rt(u,r,null),l=!0},p(p,w){if(f!==(f=c(p))&&(_&&_.d(1),_=f&&f(p),_&&(_.c(),_.m(r,s))),w&2){m=_r(p[1]);let C;for(C=0;C<m.length;C+=1){const x=Fc(p,m,C);g[C]?(g[C].p(x,w),X(g[C],1)):(g[C]=Lc(x),g[C].c(),X(g[C],1),g[C].m(r,o))}for(ui(),C=m.length;C<g.length;C+=1)E(C);li()}const S={};w&256&&(S.$$scope={dirty:w,ctx:p}),u.$set(S)},i(p){if(!l){for(let w=0;w<m.length;w+=1)X(g[w]);X(u.$$.fragment,p),l=!0}},o(p){g=g.filter(Boolean);for(let w=0;w<g.length;w+=1)tt(g[w]);tt(u.$$.fragment,p),l=!1},d(p){p&&(L(t),L(n),L(r)),_&&_.d(),Na(g,p),Pt(u)}}}function N0(i){let t,e;return t=new Pi({props:{$$slots:{default:[x0]},$$scope:{ctx:i}}}),{c(){At(t.$$.fragment)},l(n){bt(t.$$.fragment,n)},m(n,r){Rt(t,n,r),e=!0},p(n,[r]){const s={};r&259&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(X(t.$$.fragment,n),e=!0)},o(n){tt(t.$$.fragment,n),e=!1},d(n){Pt(t,n)}}}const O0=5e3;function M0(i,t,e){let n,r;Ye(i,pr,l=>e(1,r=l));const s=Ri(!1);return Ye(i,s,l=>e(0,n=l)),ka(()=>{const l=setTimeout(()=>{s.set(!0)},O0),c=pr.subscribe(f=>{f.length>0&&clearTimeout(l)});return()=>{clearTimeout(l),c()}}),[n,r,s,l=>{Oa.set(l),Be.set(2)},()=>{Be.set(0)}]}class F0 extends Ge{constructor(t){super(),Ke(this,t,M0,N0,Ne,{})}}function Qe(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Uf(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.__proto__=t}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var be={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Ir={duration:.5,overwrite:!1,delay:0},vu,se,Dt,Ce=1e8,Tt=1/Ce,fa=Math.PI*2,L0=fa/4,$0=0,Bf=Math.sqrt,U0=Math.cos,B0=Math.sin,Gt=function(t){return typeof t=="string"},Ot=function(t){return typeof t=="function"},en=function(t){return typeof t=="number"},Tu=function(t){return typeof t>"u"},qe=function(t){return typeof t=="object"},de=function(t){return t!==!1},Eu=function(){return typeof window<"u"},os=function(t){return Ot(t)||Gt(t)},jf=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},oe=Array.isArray,da=/(?:-?\.?\d|\.)+/gi,zf=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,ar=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Oo=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,qf=/[+-]=-?[.\d]+/,Gf=/[^,'"\[\]\s]+/gi,j0=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Vt,Oe,_a,wu,Pe={},Cs={},Kf,Hf=function(t){return(Cs=Hn(t,Pe))&&ge},Iu=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},vi=function(t,e){return!e&&console.warn(t)},Wf=function(t,e){return t&&(Pe[t]=e)&&Cs&&(Cs[t]=e)||Pe},Ti=function(){return 0},z0={suppressEvents:!0,isStart:!0,kill:!1},fs={suppressEvents:!0,kill:!1},q0={suppressEvents:!0},Au={},_n=[],pa={},Qf,ve={},Mo={},$c=30,ds=[],bu="",Ru=function(t){var e=t[0],n,r;if(qe(e)||Ot(e)||(t=[t]),!(n=(e._gsap||{}).harness)){for(r=ds.length;r--&&!ds[r].targetTest(e););n=ds[r]}for(r=t.length;r--;)t[r]&&(t[r]._gsap||(t[r]._gsap=new vd(t[r],n)))||t.splice(r,1);return t},$n=function(t){return t._gsap||Ru(De(t))[0]._gsap},Xf=function(t,e,n){return(n=t[e])&&Ot(n)?t[e]():Tu(n)&&t.getAttribute&&t.getAttribute(e)||n},_e=function(t,e){return(t=t.split(",")).forEach(e)||t},Mt=function(t){return Math.round(t*1e5)/1e5||0},qt=function(t){return Math.round(t*1e7)/1e7||0},hr=function(t,e){var n=e.charAt(0),r=parseFloat(e.substr(2));return t=parseFloat(t),n==="+"?t+r:n==="-"?t-r:n==="*"?t*r:t/r},G0=function(t,e){for(var n=e.length,r=0;t.indexOf(e[r])<0&&++r<n;);return r<n},Ds=function(){var t=_n.length,e=_n.slice(0),n,r;for(pa={},_n.length=0,n=0;n<t;n++)r=e[n],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},Yf=function(t,e,n,r){_n.length&&!se&&Ds(),t.render(e,n,se&&e<0&&(t._initted||t._startAt)),_n.length&&!se&&Ds()},Jf=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(Gf).length<2?e:Gt(t)?t.trim():t},Zf=function(t){return t},Ve=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},K0=function(t){return function(e,n){for(var r in n)r in e||r==="duration"&&t||r==="ease"||(e[r]=n[r])}},Hn=function(t,e){for(var n in e)t[n]=e[n];return t},Uc=function i(t,e){for(var n in e)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(t[n]=qe(e[n])?i(t[n]||(t[n]={}),e[n]):e[n]);return t},Vs=function(t,e){var n={},r;for(r in t)r in e||(n[r]=t[r]);return n},si=function(t){var e=t.parent||Vt,n=t.keyframes?K0(oe(t.keyframes)):Ve;if(de(t.inherit))for(;e;)n(t,e.vars.defaults),e=e.parent||e._dp;return t},H0=function(t,e){for(var n=t.length,r=n===e.length;r&&n--&&t[n]===e[n];);return n<0},td=function(t,e,n,r,s){var o=t[r],u;if(s)for(u=e[s];o&&o[s]>u;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[r]=e,e._prev=o,e.parent=e._dp=t,e},Js=function(t,e,n,r){n===void 0&&(n="_first"),r===void 0&&(r="_last");var s=e._prev,o=e._next;s?s._next=o:t[n]===e&&(t[n]=o),o?o._prev=s:t[r]===e&&(t[r]=s),e._next=e._prev=e.parent=null},wn=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},Un=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},W0=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},ma=function(t,e,n,r){return t._startAt&&(se?t._startAt.revert(fs):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,r))},Q0=function i(t){return!t||t._ts&&i(t.parent)},Bc=function(t){return t._repeat?Ar(t._tTime,t=t.duration()+t._rDelay)*t:0},Ar=function(t,e){var n=Math.floor(t/=e);return t&&n===t?n-1:n},ks=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Zs=function(t){return t._end=qt(t._start+(t._tDur/Math.abs(t._ts||t._rts||Tt)||0))},to=function(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=qt(n._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Zs(t),n._dirty||Un(n,t)),t},ed=function(t,e){var n;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(n=ks(t.rawTime(),e),(!e._dur||Fi(0,e.totalDuration(),n)-e._tTime>Tt)&&e.render(n,!0)),Un(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-Tt}},Me=function(t,e,n,r){return e.parent&&wn(e),e._start=qt((en(n)?n:n||t!==Vt?Se(t,n,e):t._time)+e._delay),e._end=qt(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),td(t,e,"_first","_last",t._sort?"_start":0),ga(e)||(t._recent=e),r||ed(t,e),t._ts<0&&to(t,t._tTime),t},nd=function(t,e){return(Pe.ScrollTrigger||Iu("scrollTrigger",e))&&Pe.ScrollTrigger.create(e,t)},rd=function(t,e,n,r,s){if(Su(t,e,s),!t._initted)return 1;if(!n&&t._pt&&!se&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&Qf!==Te.frame)return _n.push(t),t._lazy=[s,r],1},X0=function i(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||i(e))},ga=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},Y0=function(t,e,n,r){var s=t.ratio,o=e<0||!e&&(!t._start&&X0(t)&&!(!t._initted&&ga(t))||(t._ts<0||t._dp._ts<0)&&!ga(t))?0:1,u=t._rDelay,l=0,c,f,_;if(u&&t._repeat&&(l=Fi(0,t._tDur,e),f=Ar(l,u),t._yoyo&&f&1&&(o=1-o),f!==Ar(t._tTime,u)&&(s=1-o,t.vars.repeatRefresh&&t._initted&&t.invalidate())),o!==s||se||r||t._zTime===Tt||!e&&t._zTime){if(!t._initted&&rd(t,e,r,n,l))return;for(_=t._zTime,t._zTime=e||(n?Tt:0),n||(n=e&&!_),t.ratio=o,t._from&&(o=1-o),t._time=0,t._tTime=l,c=t._pt;c;)c.r(o,c.d),c=c._next;e<0&&ma(t,e,n,!0),t._onUpdate&&!n&&we(t,"onUpdate"),l&&t._repeat&&!n&&t.parent&&we(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===o&&(o&&wn(t,1),!n&&!se&&(we(t,o?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},J0=function(t,e,n){var r;if(n>e)for(r=t._first;r&&r._start<=n;){if(r.data==="isPause"&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=n;){if(r.data==="isPause"&&r._start<e)return r;r=r._prev}},br=function(t,e,n,r){var s=t._repeat,o=qt(e)||0,u=t._tTime/t._tDur;return u&&!r&&(t._time*=o/t._dur),t._dur=o,t._tDur=s?s<0?1e10:qt(o*(s+1)+t._rDelay*s):o,u>0&&!r&&to(t,t._tTime=t._tDur*u),t.parent&&Zs(t),n||Un(t.parent,t),t},jc=function(t){return t instanceof ce?Un(t):br(t,t._dur)},Z0={_start:0,endTime:Ti,totalDuration:Ti},Se=function i(t,e,n){var r=t.labels,s=t._recent||Z0,o=t.duration()>=Ce?s.endTime(!1):t._dur,u,l,c;return Gt(e)&&(isNaN(e)||e in r)?(l=e.charAt(0),c=e.substr(-1)==="%",u=e.indexOf("="),l==="<"||l===">"?(u>=0&&(e=e.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(e.substr(1))||0)*(c?(u<0?s:n).totalDuration()/100:1)):u<0?(e in r||(r[e]=o),r[e]):(l=parseFloat(e.charAt(u-1)+e.substr(u+1)),c&&n&&(l=l/100*(oe(n)?n[0]:n).totalDuration()),u>1?i(t,e.substr(0,u-1),n)+l:o+l)):e==null?o:+e},oi=function(t,e,n){var r=en(e[1]),s=(r?2:1)+(t<2?0:1),o=e[s],u,l;if(r&&(o.duration=e[1]),o.parent=n,t){for(u=o,l=n;l&&!("immediateRender"in u);)u=l.vars.defaults||{},l=de(l.vars.inherit)&&l.parent;o.immediateRender=de(u.immediateRender),t<2?o.runBackwards=1:o.startAt=e[s-1]}return new $t(e[0],o,e[s+1])},bn=function(t,e){return t||t===0?e(t):e},Fi=function(t,e,n){return n<t?t:n>e?e:n},ie=function(t,e){return!Gt(t)||!(e=j0.exec(t))?"":e[1]},tv=function(t,e,n){return bn(n,function(r){return Fi(t,e,r)})},ya=[].slice,id=function(t,e){return t&&qe(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&qe(t[0]))&&!t.nodeType&&t!==Oe},ev=function(t,e,n){return n===void 0&&(n=[]),t.forEach(function(r){var s;return Gt(r)&&!e||id(r,1)?(s=n).push.apply(s,De(r)):n.push(r)})||n},De=function(t,e,n){return Dt&&!e&&Dt.selector?Dt.selector(t):Gt(t)&&!n&&(_a||!Rr())?ya.call((e||wu).querySelectorAll(t),0):oe(t)?ev(t,n):id(t)?ya.call(t,0):t?[t]:[]},va=function(t){return t=De(t)[0]||vi("Invalid scope")||{},function(e){var n=t.current||t.nativeElement||t;return De(e,n.querySelectorAll?n:n===t?vi("Invalid scope")||wu.createElement("div"):t)}},sd=function(t){return t.sort(function(){return .5-Math.random()})},od=function(t){if(Ot(t))return t;var e=qe(t)?t:{each:t},n=Bn(e.ease),r=e.from||0,s=parseFloat(e.base)||0,o={},u=r>0&&r<1,l=isNaN(r)||u,c=e.axis,f=r,_=r;return Gt(r)?f=_={center:.5,edges:.5,end:1}[r]||0:!u&&l&&(f=r[0],_=r[1]),function(m,g,E){var p=(E||e).length,w=o[p],S,C,x,V,k,O,I,y,v;if(!w){if(v=e.grid==="auto"?0:(e.grid||[1,Ce])[1],!v){for(I=-Ce;I<(I=E[v++].getBoundingClientRect().left)&&v<p;);v<p&&v--}for(w=o[p]=[],S=l?Math.min(v,p)*f-.5:r%v,C=v===Ce?0:l?p*_/v-.5:r/v|0,I=0,y=Ce,O=0;O<p;O++)x=O%v-S,V=C-(O/v|0),w[O]=k=c?Math.abs(c==="y"?V:x):Bf(x*x+V*V),k>I&&(I=k),k<y&&(y=k);r==="random"&&sd(w),w.max=I-y,w.min=y,w.v=p=(parseFloat(e.amount)||parseFloat(e.each)*(v>p?p-1:c?c==="y"?p/v:v:Math.max(v,p/v))||0)*(r==="edges"?-1:1),w.b=p<0?s-p:s,w.u=ie(e.amount||e.each)||0,n=n&&p<0?md(n):n}return p=(w[m]-w.min)/w.max||0,qt(w.b+(n?n(p):p)*w.v)+w.u}},Ta=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(n){var r=qt(Math.round(parseFloat(n)/t)*t*e);return(r-r%1)/e+(en(n)?0:ie(n))}},ad=function(t,e){var n=oe(t),r,s;return!n&&qe(t)&&(r=n=t.radius||Ce,t.values?(t=De(t.values),(s=!en(t[0]))&&(r*=r)):t=Ta(t.increment)),bn(e,n?Ot(t)?function(o){return s=t(o),Math.abs(s-o)<=r?s:o}:function(o){for(var u=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),c=Ce,f=0,_=t.length,m,g;_--;)s?(m=t[_].x-u,g=t[_].y-l,m=m*m+g*g):m=Math.abs(t[_]-u),m<c&&(c=m,f=_);return f=!r||c<=r?t[f]:o,s||f===o||en(o)?f:f+ie(o)}:Ta(t))},ud=function(t,e,n,r){return bn(oe(t)?!e:n===!0?!!(n=0):!r,function(){return oe(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+n*.99))/n)*n*r)/r})},nv=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return e.reduce(function(s,o){return o(s)},r)}},rv=function(t,e){return function(n){return t(parseFloat(n))+(e||ie(n))}},iv=function(t,e,n){return cd(t,e,0,1,n)},ld=function(t,e,n){return bn(n,function(r){return t[~~e(r)]})},sv=function i(t,e,n){var r=e-t;return oe(t)?ld(t,i(0,t.length),e):bn(n,function(s){return(r+(s-t)%r)%r+t})},ov=function i(t,e,n){var r=e-t,s=r*2;return oe(t)?ld(t,i(0,t.length-1),e):bn(n,function(o){return o=(s+(o-t)%s)%s||0,t+(o>r?s-o:o)})},Ei=function(t){for(var e=0,n="",r,s,o,u;~(r=t.indexOf("random(",e));)o=t.indexOf(")",r),u=t.charAt(r+7)==="[",s=t.substr(r+7,o-r-7).match(u?Gf:da),n+=t.substr(e,r-e)+ud(u?s:+s[0],u?0:+s[1],+s[2]||1e-5),e=o+1;return n+t.substr(e,t.length-e)},cd=function(t,e,n,r,s){var o=e-t,u=r-n;return bn(s,function(l){return n+((l-t)/o*u||0)})},av=function i(t,e,n,r){var s=isNaN(t+e)?0:function(g){return(1-g)*t+g*e};if(!s){var o=Gt(t),u={},l,c,f,_,m;if(n===!0&&(r=1)&&(n=null),o)t={p:t},e={p:e};else if(oe(t)&&!oe(e)){for(f=[],_=t.length,m=_-2,c=1;c<_;c++)f.push(i(t[c-1],t[c]));_--,s=function(E){E*=_;var p=Math.min(m,~~E);return f[p](E-p)},n=e}else r||(t=Hn(oe(t)?[]:{},t));if(!f){for(l in e)Pu.call(u,t,l,"get",e[l]);s=function(E){return Vu(E,u)||(o?t.p:t)}}}return bn(n,s)},zc=function(t,e,n){var r=t.labels,s=Ce,o,u,l;for(o in r)u=r[o]-e,u<0==!!n&&u&&s>(u=Math.abs(u))&&(l=o,s=u);return l},we=function(t,e,n){var r=t.vars,s=r[e],o=Dt,u=t._ctx,l,c,f;if(s)return l=r[e+"Params"],c=r.callbackScope||t,n&&_n.length&&Ds(),u&&(Dt=u),f=l?s.apply(c,l):s.call(c),Dt=o,f},Zr=function(t){return wn(t),t.scrollTrigger&&t.scrollTrigger.kill(!!se),t.progress()<1&&we(t,"onInterrupt"),t},ur,hd=[],fd=function(t){if(t)if(t=!t.name&&t.default||t,Eu()||t.headless){var e=t.name,n=Ot(t),r=e&&!n&&t.init?function(){this._props=[]}:t,s={init:Ti,render:Vu,add:Pu,kill:Iv,modifier:wv,rawVars:0},o={targetTest:0,get:0,getSetter:Du,aliases:{},register:0};if(Rr(),t!==r){if(ve[e])return;Ve(r,Ve(Vs(t,s),o)),Hn(r.prototype,Hn(s,Vs(t,o))),ve[r.prop=e]=r,t.targetTest&&(ds.push(r),Au[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}Wf(e,r),t.register&&t.register(ge,r,pe)}else hd.push(t)},vt=255,ti={aqua:[0,vt,vt],lime:[0,vt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,vt],navy:[0,0,128],white:[vt,vt,vt],olive:[128,128,0],yellow:[vt,vt,0],orange:[vt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[vt,0,0],pink:[vt,192,203],cyan:[0,vt,vt],transparent:[vt,vt,vt,0]},Fo=function(t,e,n){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(n-e)*t*6:t<.5?n:t*3<2?e+(n-e)*(2/3-t)*6:e)*vt+.5|0},dd=function(t,e,n){var r=t?en(t)?[t>>16,t>>8&vt,t&vt]:0:ti.black,s,o,u,l,c,f,_,m,g,E;if(!r){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),ti[t])r=ti[t];else if(t.charAt(0)==="#"){if(t.length<6&&(s=t.charAt(1),o=t.charAt(2),u=t.charAt(3),t="#"+s+s+o+o+u+u+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return r=parseInt(t.substr(1,6),16),[r>>16,r>>8&vt,r&vt,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),r=[t>>16,t>>8&vt,t&vt]}else if(t.substr(0,3)==="hsl"){if(r=E=t.match(da),!e)l=+r[0]%360/360,c=+r[1]/100,f=+r[2]/100,o=f<=.5?f*(c+1):f+c-f*c,s=f*2-o,r.length>3&&(r[3]*=1),r[0]=Fo(l+1/3,s,o),r[1]=Fo(l,s,o),r[2]=Fo(l-1/3,s,o);else if(~t.indexOf("="))return r=t.match(zf),n&&r.length<4&&(r[3]=1),r}else r=t.match(da)||ti.transparent;r=r.map(Number)}return e&&!E&&(s=r[0]/vt,o=r[1]/vt,u=r[2]/vt,_=Math.max(s,o,u),m=Math.min(s,o,u),f=(_+m)/2,_===m?l=c=0:(g=_-m,c=f>.5?g/(2-_-m):g/(_+m),l=_===s?(o-u)/g+(o<u?6:0):_===o?(u-s)/g+2:(s-o)/g+4,l*=60),r[0]=~~(l+.5),r[1]=~~(c*100+.5),r[2]=~~(f*100+.5)),n&&r.length<4&&(r[3]=1),r},_d=function(t){var e=[],n=[],r=-1;return t.split(pn).forEach(function(s){var o=s.match(ar)||[];e.push.apply(e,o),n.push(r+=o.length+1)}),e.c=n,e},qc=function(t,e,n){var r="",s=(t+r).match(pn),o=e?"hsla(":"rgba(",u=0,l,c,f,_;if(!s)return t;if(s=s.map(function(m){return(m=dd(m,e,1))&&o+(e?m[0]+","+m[1]+"%,"+m[2]+"%,"+m[3]:m.join(","))+")"}),n&&(f=_d(t),l=n.c,l.join(r)!==f.c.join(r)))for(c=t.replace(pn,"1").split(ar),_=c.length-1;u<_;u++)r+=c[u]+(~l.indexOf(u)?s.shift()||o+"0,0,0,0)":(f.length?f:s.length?s:n).shift());if(!c)for(c=t.split(pn),_=c.length-1;u<_;u++)r+=c[u]+s[u];return r+c[_]},pn=function(){var i="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in ti)i+="|"+t+"\\b";return new RegExp(i+")","gi")}(),uv=/hsl[a]?\(/,pd=function(t){var e=t.join(" "),n;if(pn.lastIndex=0,pn.test(e))return n=uv.test(e),t[1]=qc(t[1],n),t[0]=qc(t[0],n,_d(t[1])),!0},wi,Te=function(){var i=Date.now,t=500,e=33,n=i(),r=n,s=1e3/240,o=s,u=[],l,c,f,_,m,g,E=function p(w){var S=i()-r,C=w===!0,x,V,k,O;if((S>t||S<0)&&(n+=S-e),r+=S,k=r-n,x=k-o,(x>0||C)&&(O=++_.frame,m=k-_.time*1e3,_.time=k=k/1e3,o+=x+(x>=s?4:s-x),V=1),C||(l=c(p)),V)for(g=0;g<u.length;g++)u[g](k,m,O,w)};return _={time:0,frame:0,tick:function(){E(!0)},deltaRatio:function(w){return m/(1e3/(w||60))},wake:function(){Kf&&(!_a&&Eu()&&(Oe=_a=window,wu=Oe.document||{},Pe.gsap=ge,(Oe.gsapVersions||(Oe.gsapVersions=[])).push(ge.version),Hf(Cs||Oe.GreenSockGlobals||!Oe.gsap&&Oe||{}),hd.forEach(fd)),f=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&_.sleep(),c=f||function(w){return setTimeout(w,o-_.time*1e3+1|0)},wi=1,E(2))},sleep:function(){(f?cancelAnimationFrame:clearTimeout)(l),wi=0,c=Ti},lagSmoothing:function(w,S){t=w||1/0,e=Math.min(S||33,t)},fps:function(w){s=1e3/(w||240),o=_.time*1e3+s},add:function(w,S,C){var x=S?function(V,k,O,I){w(V,k,O,I),_.remove(x)}:w;return _.remove(w),u[C?"unshift":"push"](x),Rr(),x},remove:function(w,S){~(S=u.indexOf(w))&&u.splice(S,1)&&g>=S&&g--},_listeners:u},_}(),Rr=function(){return!wi&&Te.wake()},at={},lv=/^[\d.\-M][\d.\-,\s]/,cv=/["']/g,hv=function(t){for(var e={},n=t.substr(1,t.length-3).split(":"),r=n[0],s=1,o=n.length,u,l,c;s<o;s++)l=n[s],u=s!==o-1?l.lastIndexOf(","):l.length,c=l.substr(0,u),e[r]=isNaN(c)?c.replace(cv,"").trim():+c,r=l.substr(u+1).trim();return e},fv=function(t){var e=t.indexOf("(")+1,n=t.indexOf(")"),r=t.indexOf("(",e);return t.substring(e,~r&&r<n?t.indexOf(")",n+1):n)},dv=function(t){var e=(t+"").split("("),n=at[e[0]];return n&&e.length>1&&n.config?n.config.apply(null,~t.indexOf("{")?[hv(e[1])]:fv(t).split(",").map(Jf)):at._CE&&lv.test(t)?at._CE("",t):n},md=function(t){return function(e){return 1-t(1-e)}},gd=function i(t,e){for(var n=t._first,r;n;)n instanceof ce?i(n,e):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==e&&(n.timeline?i(n.timeline,e):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=e)),n=n._next},Bn=function(t,e){return t&&(Ot(t)?t:at[t]||dv(t))||e},Yn=function(t,e,n,r){n===void 0&&(n=function(l){return 1-e(1-l)}),r===void 0&&(r=function(l){return l<.5?e(l*2)/2:1-e((1-l)*2)/2});var s={easeIn:e,easeOut:n,easeInOut:r},o;return _e(t,function(u){at[u]=Pe[u]=s,at[o=u.toLowerCase()]=n;for(var l in s)at[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=at[u+"."+l]=s[l]}),s},yd=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},Lo=function i(t,e,n){var r=e>=1?e:1,s=(n||(t?.3:.45))/(e<1?e:1),o=s/fa*(Math.asin(1/r)||0),u=function(f){return f===1?1:r*Math.pow(2,-10*f)*B0((f-o)*s)+1},l=t==="out"?u:t==="in"?function(c){return 1-u(1-c)}:yd(u);return s=fa/s,l.config=function(c,f){return i(t,c,f)},l},$o=function i(t,e){e===void 0&&(e=1.70158);var n=function(o){return o?--o*o*((e+1)*o+e)+1:0},r=t==="out"?n:t==="in"?function(s){return 1-n(1-s)}:yd(n);return r.config=function(s){return i(t,s)},r};_e("Linear,Quad,Cubic,Quart,Quint,Strong",function(i,t){var e=t<5?t+1:t;Yn(i+",Power"+(e-1),t?function(n){return Math.pow(n,e)}:function(n){return n},function(n){return 1-Math.pow(1-n,e)},function(n){return n<.5?Math.pow(n*2,e)/2:1-Math.pow((1-n)*2,e)/2})});at.Linear.easeNone=at.none=at.Linear.easeIn;Yn("Elastic",Lo("in"),Lo("out"),Lo());(function(i,t){var e=1/t,n=2*e,r=2.5*e,s=function(u){return u<e?i*u*u:u<n?i*Math.pow(u-1.5/t,2)+.75:u<r?i*(u-=2.25/t)*u+.9375:i*Math.pow(u-2.625/t,2)+.984375};Yn("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);Yn("Expo",function(i){return i?Math.pow(2,10*(i-1)):0});Yn("Circ",function(i){return-(Bf(1-i*i)-1)});Yn("Sine",function(i){return i===1?1:-U0(i*L0)+1});Yn("Back",$o("in"),$o("out"),$o());at.SteppedEase=at.steps=Pe.SteppedEase={config:function(t,e){t===void 0&&(t=1);var n=1/t,r=t+(e?0:1),s=e?1:0,o=1-Tt;return function(u){return((r*Fi(0,o,u)|0)+s)*n}}};Ir.ease=at["quad.out"];_e("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(i){return bu+=i+","+i+"Params,"});var vd=function(t,e){this.id=$0++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:Xf,this.set=e?e.getSetter:Du},Ii=function(){function i(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,br(this,+e.duration,1,1),this.data=e.data,Dt&&(this._ctx=Dt,Dt.data.push(this)),wi||Te.wake()}var t=i.prototype;return t.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},t.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},t.totalDuration=function(n){return arguments.length?(this._dirty=0,br(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(n,r){if(Rr(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(to(this,n),!s._dp||s.parent||ed(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&Me(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Tt||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),Yf(this,n,r)),this},t.time=function(n,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+Bc(this))%(this._dur+this._rDelay)||(n?this._dur:0),r):this._time},t.totalProgress=function(n,r){return arguments.length?this.totalTime(this.totalDuration()*n,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},t.progress=function(n,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+Bc(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(n,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,r):this._repeat?Ar(this._tTime,s)+1:1},t.timeScale=function(n,r){if(!arguments.length)return this._rts===-Tt?0:this._rts;if(this._rts===n)return this;var s=this.parent&&this._ts?ks(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-Tt?0:this._rts,this.totalTime(Fi(-Math.abs(this._delay),this._tDur,s),r!==!1),Zs(this),W0(this)},t.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Rr(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Tt&&(this._tTime-=Tt)))),this):this._ps},t.startTime=function(n){if(arguments.length){this._start=n;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Me(r,this,n-this._delay),this}return this._start},t.endTime=function(n){return this._start+(de(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(n){var r=this.parent||this._dp;return r?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?ks(r.rawTime(n),this):this._tTime:this._tTime},t.revert=function(n){n===void 0&&(n=q0);var r=se;return se=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),se=r,this},t.globalTime=function(n){for(var r=this,s=arguments.length?n:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(n):s},t.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,jc(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(n){if(arguments.length){var r=this._time;return this._rDelay=n,jc(this),r?this.time(r):this}return this._rDelay},t.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},t.seek=function(n,r){return this.totalTime(Se(this,n),de(r))},t.restart=function(n,r){return this.play().totalTime(n?-this._delay:0,de(r))},t.play=function(n,r){return n!=null&&this.seek(n,r),this.reversed(!1).paused(!1)},t.reverse=function(n,r){return n!=null&&this.seek(n||this.totalDuration(),r),this.reversed(!0).paused(!1)},t.pause=function(n,r){return n!=null&&this.seek(n,r),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-Tt:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-Tt,this},t.isActive=function(){var n=this.parent||this._dp,r=this._start,s;return!!(!n||this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=r&&s<this.endTime(!0)-Tt)},t.eventCallback=function(n,r,s){var o=this.vars;return arguments.length>1?(r?(o[n]=r,s&&(o[n+"Params"]=s),n==="onUpdate"&&(this._onUpdate=r)):delete o[n],this):o[n]},t.then=function(n){var r=this;return new Promise(function(s){var o=Ot(n)?n:Zf,u=function(){var c=r.then;r.then=null,Ot(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=c),s(o),r.then=c};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?u():r._prom=u})},t.kill=function(){Zr(this)},i}();Ve(Ii.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Tt,_prom:0,_ps:!1,_rts:1});var ce=function(i){Uf(t,i);function t(n,r){var s;return n===void 0&&(n={}),s=i.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=de(n.sortChildren),Vt&&Me(n.parent||Vt,Qe(s),r),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&nd(Qe(s),n.scrollTrigger),s}var e=t.prototype;return e.to=function(r,s,o){return oi(0,arguments,this),this},e.from=function(r,s,o){return oi(1,arguments,this),this},e.fromTo=function(r,s,o,u){return oi(2,arguments,this),this},e.set=function(r,s,o){return s.duration=0,s.parent=this,si(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new $t(r,s,Se(this,o),1),this},e.call=function(r,s,o){return Me(this,$t.delayedCall(0,r,s),o)},e.staggerTo=function(r,s,o,u,l,c,f){return o.duration=s,o.stagger=o.stagger||u,o.onComplete=c,o.onCompleteParams=f,o.parent=this,new $t(r,o,Se(this,l)),this},e.staggerFrom=function(r,s,o,u,l,c,f){return o.runBackwards=1,si(o).immediateRender=de(o.immediateRender),this.staggerTo(r,s,o,u,l,c,f)},e.staggerFromTo=function(r,s,o,u,l,c,f,_){return u.startAt=o,si(u).immediateRender=de(u.immediateRender),this.staggerTo(r,s,u,l,c,f,_)},e.render=function(r,s,o){var u=this._time,l=this._dirty?this.totalDuration():this._tDur,c=this._dur,f=r<=0?0:qt(r),_=this._zTime<0!=r<0&&(this._initted||!c),m,g,E,p,w,S,C,x,V,k,O,I;if(this!==Vt&&f>l&&r>=0&&(f=l),f!==this._tTime||o||_){if(u!==this._time&&c&&(f+=this._time-u,r+=this._time-u),m=f,V=this._start,x=this._ts,S=!x,_&&(c||(u=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(O=this._yoyo,w=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(w*100+r,s,o);if(m=qt(f%w),f===l?(p=this._repeat,m=c):(p=~~(f/w),p&&p===f/w&&(m=c,p--),m>c&&(m=c)),k=Ar(this._tTime,w),!u&&this._tTime&&k!==p&&this._tTime-k*w-this._dur<=0&&(k=p),O&&p&1&&(m=c-m,I=1),p!==k&&!this._lock){var y=O&&k&1,v=y===(O&&p&1);if(p<k&&(y=!y),u=y?0:f%c?c:f,this._lock=1,this.render(u||(I?0:qt(p*w)),s,!c)._lock=0,this._tTime=f,!s&&this.parent&&we(this,"onRepeat"),this.vars.repeatRefresh&&!I&&(this.invalidate()._lock=1),u&&u!==this._time||S!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,l=this._tDur,v&&(this._lock=2,u=y?c:-1e-4,this.render(u,!0),this.vars.repeatRefresh&&!I&&this.invalidate()),this._lock=0,!this._ts&&!S)return this;gd(this,I)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(C=J0(this,qt(u),qt(m)),C&&(f-=m-(m=C._start))),this._tTime=f,this._time=m,this._act=!x,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,u=0),!u&&m&&!s&&!p&&(we(this,"onStart"),this._tTime!==f))return this;if(m>=u&&r>=0)for(g=this._first;g;){if(E=g._next,(g._act||m>=g._start)&&g._ts&&C!==g){if(g.parent!==this)return this.render(r,s,o);if(g.render(g._ts>0?(m-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(m-g._start)*g._ts,s,o),m!==this._time||!this._ts&&!S){C=0,E&&(f+=this._zTime=-Tt);break}}g=E}else{g=this._last;for(var b=r<0?r:m;g;){if(E=g._prev,(g._act||b<=g._end)&&g._ts&&C!==g){if(g.parent!==this)return this.render(r,s,o);if(g.render(g._ts>0?(b-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(b-g._start)*g._ts,s,o||se&&(g._initted||g._startAt)),m!==this._time||!this._ts&&!S){C=0,E&&(f+=this._zTime=b?-Tt:Tt);break}}g=E}}if(C&&!s&&(this.pause(),C.render(m>=u?0:-Tt)._zTime=m>=u?1:-1,this._ts))return this._start=V,Zs(this),this.render(r,s,o);this._onUpdate&&!s&&we(this,"onUpdate",!0),(f===l&&this._tTime>=this.totalDuration()||!f&&u)&&(V===this._start||Math.abs(x)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(f===l&&this._ts>0||!f&&this._ts<0)&&wn(this,1),!s&&!(r<0&&!u)&&(f||u||!l)&&(we(this,f===l&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(f<l&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(r,s){var o=this;if(en(s)||(s=Se(this,s,r)),!(r instanceof Ii)){if(oe(r))return r.forEach(function(u){return o.add(u,s)}),this;if(Gt(r))return this.addLabel(r,s);if(Ot(r))r=$t.delayedCall(0,r);else return this}return this!==r?Me(this,r,s):this},e.getChildren=function(r,s,o,u){r===void 0&&(r=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),u===void 0&&(u=-Ce);for(var l=[],c=this._first;c;)c._start>=u&&(c instanceof $t?s&&l.push(c):(o&&l.push(c),r&&l.push.apply(l,c.getChildren(!0,s,o)))),c=c._next;return l},e.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},e.remove=function(r){return Gt(r)?this.removeLabel(r):Ot(r)?this.killTweensOf(r):(Js(this,r),r===this._recent&&(this._recent=this._last),Un(this))},e.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=qt(Te.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),i.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},e.addLabel=function(r,s){return this.labels[r]=Se(this,s),this},e.removeLabel=function(r){return delete this.labels[r],this},e.addPause=function(r,s,o){var u=$t.delayedCall(0,s||Ti,o);return u.data="isPause",this._hasPause=1,Me(this,u,Se(this,r))},e.removePause=function(r){var s=this._first;for(r=Se(this,r);s;)s._start===r&&s.data==="isPause"&&wn(s),s=s._next},e.killTweensOf=function(r,s,o){for(var u=this.getTweensOf(r,o),l=u.length;l--;)un!==u[l]&&u[l].kill(r,s);return this},e.getTweensOf=function(r,s){for(var o=[],u=De(r),l=this._first,c=en(s),f;l;)l instanceof $t?G0(l._targets,u)&&(c?(!un||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(f=l.getTweensOf(u,s)).length&&o.push.apply(o,f),l=l._next;return o},e.tweenTo=function(r,s){s=s||{};var o=this,u=Se(o,r),l=s,c=l.startAt,f=l.onStart,_=l.onStartParams,m=l.immediateRender,g,E=$t.to(o,Ve({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:u,overwrite:"auto",duration:s.duration||Math.abs((u-(c&&"time"in c?c.time:o._time))/o.timeScale())||Tt,onStart:function(){if(o.pause(),!g){var w=s.duration||Math.abs((u-(c&&"time"in c?c.time:o._time))/o.timeScale());E._dur!==w&&br(E,w,0,1).render(E._time,!0,!0),g=1}f&&f.apply(E,_||[])}},s));return m?E.render(0):E},e.tweenFromTo=function(r,s,o){return this.tweenTo(s,Ve({startAt:{time:Se(this,r)}},o))},e.recent=function(){return this._recent},e.nextLabel=function(r){return r===void 0&&(r=this._time),zc(this,Se(this,r))},e.previousLabel=function(r){return r===void 0&&(r=this._time),zc(this,Se(this,r),1)},e.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Tt)},e.shiftChildren=function(r,s,o){o===void 0&&(o=0);for(var u=this._first,l=this.labels,c;u;)u._start>=o&&(u._start+=r,u._end+=r),u=u._next;if(s)for(c in l)l[c]>=o&&(l[c]+=r);return Un(this)},e.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return i.prototype.invalidate.call(this,r)},e.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),Un(this)},e.totalDuration=function(r){var s=0,o=this,u=o._last,l=Ce,c,f,_;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(_=o.parent;u;)c=u._prev,u._dirty&&u.totalDuration(),f=u._start,f>l&&o._sort&&u._ts&&!o._lock?(o._lock=1,Me(o,u,f-u._delay,1)._lock=0):l=f,f<0&&u._ts&&(s-=f,(!_&&!o._dp||_&&_.smoothChildTiming)&&(o._start+=f/o._ts,o._time-=f,o._tTime-=f),o.shiftChildren(-f,!1,-1/0),l=0),u._end>s&&u._ts&&(s=u._end),u=c;br(o,o===Vt&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(r){if(Vt._ts&&(Yf(Vt,ks(r,Vt)),Qf=Te.frame),Te.frame>=$c){$c+=be.autoSleep||120;var s=Vt._first;if((!s||!s._ts)&&be.autoSleep&&Te._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Te.sleep()}}},t}(Ii);Ve(ce.prototype,{_lock:0,_hasPause:0,_forcing:0});var _v=function(t,e,n,r,s,o,u){var l=new pe(this._pt,t,e,0,1,bd,null,s),c=0,f=0,_,m,g,E,p,w,S,C;for(l.b=n,l.e=r,n+="",r+="",(S=~r.indexOf("random("))&&(r=Ei(r)),o&&(C=[n,r],o(C,t,e),n=C[0],r=C[1]),m=n.match(Oo)||[];_=Oo.exec(r);)E=_[0],p=r.substring(c,_.index),g?g=(g+1)%5:p.substr(-5)==="rgba("&&(g=1),E!==m[f++]&&(w=parseFloat(m[f-1])||0,l._pt={_next:l._pt,p:p||f===1?p:",",s:w,c:E.charAt(1)==="="?hr(w,E)-w:parseFloat(E)-w,m:g&&g<4?Math.round:0},c=Oo.lastIndex);return l.c=c<r.length?r.substring(c,r.length):"",l.fp=u,(qf.test(r)||S)&&(l.e=0),this._pt=l,l},Pu=function(t,e,n,r,s,o,u,l,c,f){Ot(r)&&(r=r(s||0,t,o));var _=t[e],m=n!=="get"?n:Ot(_)?c?t[e.indexOf("set")||!Ot(t["get"+e.substr(3)])?e:"get"+e.substr(3)](c):t[e]():_,g=Ot(_)?c?vv:Id:Cu,E;if(Gt(r)&&(~r.indexOf("random(")&&(r=Ei(r)),r.charAt(1)==="="&&(E=hr(m,r)+(ie(m)||0),(E||E===0)&&(r=E))),!f||m!==r||Ea)return!isNaN(m*r)&&r!==""?(E=new pe(this._pt,t,e,+m||0,r-(m||0),typeof _=="boolean"?Ev:Ad,0,g),c&&(E.fp=c),u&&E.modifier(u,this,t),this._pt=E):(!_&&!(e in t)&&Iu(e,r),_v.call(this,t,e,m,r,g,l||be.stringFilter,c))},pv=function(t,e,n,r,s){if(Ot(t)&&(t=ai(t,s,e,n,r)),!qe(t)||t.style&&t.nodeType||oe(t)||jf(t))return Gt(t)?ai(t,s,e,n,r):t;var o={},u;for(u in t)o[u]=ai(t[u],s,e,n,r);return o},Td=function(t,e,n,r,s,o){var u,l,c,f;if(ve[t]&&(u=new ve[t]).init(s,u.rawVars?e[t]:pv(e[t],r,s,o,n),n,r,o)!==!1&&(n._pt=l=new pe(n._pt,s,t,0,1,u.render,u,0,u.priority),n!==ur))for(c=n._ptLookup[n._targets.indexOf(s)],f=u._props.length;f--;)c[u._props[f]]=l;return u},un,Ea,Su=function i(t,e,n){var r=t.vars,s=r.ease,o=r.startAt,u=r.immediateRender,l=r.lazy,c=r.onUpdate,f=r.runBackwards,_=r.yoyoEase,m=r.keyframes,g=r.autoRevert,E=t._dur,p=t._startAt,w=t._targets,S=t.parent,C=S&&S.data==="nested"?S.vars.targets:w,x=t._overwrite==="auto"&&!vu,V=t.timeline,k,O,I,y,v,b,R,P,A,et,ut,_t,pt;if(V&&(!m||!s)&&(s="none"),t._ease=Bn(s,Ir.ease),t._yEase=_?md(Bn(_===!0?s:_,Ir.ease)):0,_&&t._yoyo&&!t._repeat&&(_=t._yEase,t._yEase=t._ease,t._ease=_),t._from=!V&&!!r.runBackwards,!V||m&&!r.stagger){if(P=w[0]?$n(w[0]).harness:0,_t=P&&r[P.prop],k=Vs(r,Au),p&&(p._zTime<0&&p.progress(1),e<0&&f&&u&&!g?p.render(-1,!0):p.revert(f&&E?fs:z0),p._lazy=0),o){if(wn(t._startAt=$t.set(w,Ve({data:"isStart",overwrite:!1,parent:S,immediateRender:!0,lazy:!p&&de(l),startAt:null,delay:0,onUpdate:c&&function(){return we(t,"onUpdate")},stagger:0},o))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(se||!u&&!g)&&t._startAt.revert(fs),u&&E&&e<=0&&n<=0){e&&(t._zTime=e);return}}else if(f&&E&&!p){if(e&&(u=!1),I=Ve({overwrite:!1,data:"isFromStart",lazy:u&&!p&&de(l),immediateRender:u,stagger:0,parent:S},k),_t&&(I[P.prop]=_t),wn(t._startAt=$t.set(w,I)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(se?t._startAt.revert(fs):t._startAt.render(-1,!0)),t._zTime=e,!u)i(t._startAt,Tt,Tt);else if(!e)return}for(t._pt=t._ptCache=0,l=E&&de(l)||l&&!E,O=0;O<w.length;O++){if(v=w[O],R=v._gsap||Ru(w)[O]._gsap,t._ptLookup[O]=et={},pa[R.id]&&_n.length&&Ds(),ut=C===w?O:C.indexOf(v),P&&(A=new P).init(v,_t||k,t,ut,C)!==!1&&(t._pt=y=new pe(t._pt,v,A.name,0,1,A.render,A,0,A.priority),A._props.forEach(function(ot){et[ot]=y}),A.priority&&(b=1)),!P||_t)for(I in k)ve[I]&&(A=Td(I,k,t,ut,v,C))?A.priority&&(b=1):et[I]=y=Pu.call(t,v,I,"get",k[I],ut,C,0,r.stringFilter);t._op&&t._op[O]&&t.kill(v,t._op[O]),x&&t._pt&&(un=t,Vt.killTweensOf(v,et,t.globalTime(e)),pt=!t.parent,un=0),t._pt&&l&&(pa[R.id]=1)}b&&Rd(t),t._onInit&&t._onInit(t)}t._onUpdate=c,t._initted=(!t._op||t._pt)&&!pt,m&&e<=0&&V.render(Ce,!0,!0)},mv=function(t,e,n,r,s,o,u,l){var c=(t._pt&&t._ptCache||(t._ptCache={}))[e],f,_,m,g;if(!c)for(c=t._ptCache[e]=[],m=t._ptLookup,g=t._targets.length;g--;){if(f=m[g][e],f&&f.d&&f.d._pt)for(f=f.d._pt;f&&f.p!==e&&f.fp!==e;)f=f._next;if(!f)return Ea=1,t.vars[e]="+=0",Su(t,u),Ea=0,l?vi(e+" not eligible for reset"):1;c.push(f)}for(g=c.length;g--;)_=c[g],f=_._pt||_,f.s=(r||r===0)&&!s?r:f.s+(r||0)+o*f.c,f.c=n-f.s,_.e&&(_.e=Mt(n)+ie(_.e)),_.b&&(_.b=f.s+ie(_.b))},gv=function(t,e){var n=t[0]?$n(t[0]).harness:0,r=n&&n.aliases,s,o,u,l;if(!r)return e;s=Hn({},e);for(o in r)if(o in s)for(l=r[o].split(","),u=l.length;u--;)s[l[u]]=s[o];return s},yv=function(t,e,n,r){var s=e.ease||r||"power1.inOut",o,u;if(oe(e))u=n[t]||(n[t]=[]),e.forEach(function(l,c){return u.push({t:c/(e.length-1)*100,v:l,e:s})});else for(o in e)u=n[o]||(n[o]=[]),o==="ease"||u.push({t:parseFloat(t),v:e[o],e:s})},ai=function(t,e,n,r,s){return Ot(t)?t.call(e,n,r,s):Gt(t)&&~t.indexOf("random(")?Ei(t):t},Ed=bu+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",wd={};_e(Ed+",id,stagger,delay,duration,paused,scrollTrigger",function(i){return wd[i]=1});var $t=function(i){Uf(t,i);function t(n,r,s,o){var u;typeof r=="number"&&(s.duration=r,r=s,s=null),u=i.call(this,o?r:si(r))||this;var l=u.vars,c=l.duration,f=l.delay,_=l.immediateRender,m=l.stagger,g=l.overwrite,E=l.keyframes,p=l.defaults,w=l.scrollTrigger,S=l.yoyoEase,C=r.parent||Vt,x=(oe(n)||jf(n)?en(n[0]):"length"in r)?[n]:De(n),V,k,O,I,y,v,b,R;if(u._targets=x.length?Ru(x):vi("GSAP target "+n+" not found. https://gsap.com",!be.nullTargetWarn)||[],u._ptLookup=[],u._overwrite=g,E||m||os(c)||os(f)){if(r=u.vars,V=u.timeline=new ce({data:"nested",defaults:p||{},targets:C&&C.data==="nested"?C.vars.targets:x}),V.kill(),V.parent=V._dp=Qe(u),V._start=0,m||os(c)||os(f)){if(I=x.length,b=m&&od(m),qe(m))for(y in m)~Ed.indexOf(y)&&(R||(R={}),R[y]=m[y]);for(k=0;k<I;k++)O=Vs(r,wd),O.stagger=0,S&&(O.yoyoEase=S),R&&Hn(O,R),v=x[k],O.duration=+ai(c,Qe(u),k,v,x),O.delay=(+ai(f,Qe(u),k,v,x)||0)-u._delay,!m&&I===1&&O.delay&&(u._delay=f=O.delay,u._start+=f,O.delay=0),V.to(v,O,b?b(k,v,x):0),V._ease=at.none;V.duration()?c=f=0:u.timeline=0}else if(E){si(Ve(V.vars.defaults,{ease:"none"})),V._ease=Bn(E.ease||r.ease||"none");var P=0,A,et,ut;if(oe(E))E.forEach(function(_t){return V.to(x,_t,">")}),V.duration();else{O={};for(y in E)y==="ease"||y==="easeEach"||yv(y,E[y],O,E.easeEach);for(y in O)for(A=O[y].sort(function(_t,pt){return _t.t-pt.t}),P=0,k=0;k<A.length;k++)et=A[k],ut={ease:et.e,duration:(et.t-(k?A[k-1].t:0))/100*c},ut[y]=et.v,V.to(x,ut,P),P+=ut.duration;V.duration()<c&&V.to({},{duration:c-V.duration()})}}c||u.duration(c=V.duration())}else u.timeline=0;return g===!0&&!vu&&(un=Qe(u),Vt.killTweensOf(x),un=0),Me(C,Qe(u),s),r.reversed&&u.reverse(),r.paused&&u.paused(!0),(_||!c&&!E&&u._start===qt(C._time)&&de(_)&&Q0(Qe(u))&&C.data!=="nested")&&(u._tTime=-Tt,u.render(Math.max(0,-f)||0)),w&&nd(Qe(u),w),u}var e=t.prototype;return e.render=function(r,s,o){var u=this._time,l=this._tDur,c=this._dur,f=r<0,_=r>l-Tt&&!f?l:r<Tt?0:r,m,g,E,p,w,S,C,x,V;if(!c)Y0(this,r,s,o);else if(_!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==f){if(m=_,x=this.timeline,this._repeat){if(p=c+this._rDelay,this._repeat<-1&&f)return this.totalTime(p*100+r,s,o);if(m=qt(_%p),_===l?(E=this._repeat,m=c):(E=~~(_/p),E&&E===qt(_/p)&&(m=c,E--),m>c&&(m=c)),S=this._yoyo&&E&1,S&&(V=this._yEase,m=c-m),w=Ar(this._tTime,p),m===u&&!o&&this._initted&&E===w)return this._tTime=_,this;E!==w&&(x&&this._yEase&&gd(x,S),this.vars.repeatRefresh&&!S&&!this._lock&&this._time!==p&&this._initted&&(this._lock=o=1,this.render(qt(p*E),!0).invalidate()._lock=0))}if(!this._initted){if(rd(this,f?r:m,o,s,_))return this._tTime=0,this;if(u!==this._time&&!(o&&this.vars.repeatRefresh&&E!==w))return this;if(c!==this._dur)return this.render(r,s,o)}if(this._tTime=_,this._time=m,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=C=(V||this._ease)(m/c),this._from&&(this.ratio=C=1-C),m&&!u&&!s&&!E&&(we(this,"onStart"),this._tTime!==_))return this;for(g=this._pt;g;)g.r(C,g.d),g=g._next;x&&x.render(r<0?r:x._dur*x._ease(m/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(f&&ma(this,r,s,o),we(this,"onUpdate")),this._repeat&&E!==w&&this.vars.onRepeat&&!s&&this.parent&&we(this,"onRepeat"),(_===this._tDur||!_)&&this._tTime===_&&(f&&!this._onUpdate&&ma(this,r,!0,!0),(r||!c)&&(_===this._tDur&&this._ts>0||!_&&this._ts<0)&&wn(this,1),!s&&!(f&&!u)&&(_||u||S)&&(we(this,_===l?"onComplete":"onReverseComplete",!0),this._prom&&!(_<l&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),i.prototype.invalidate.call(this,r)},e.resetTo=function(r,s,o,u,l){wi||Te.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),f;return this._initted||Su(this,c),f=this._ease(c/this._dur),mv(this,r,s,o,u,f,c,l)?this.resetTo(r,s,o,u,1):(to(this,0),this.parent||td(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Zr(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,un&&un.vars.overwrite!==!0)._first||Zr(this),this.parent&&o!==this.timeline.totalDuration()&&br(this,this._dur*this.timeline._tDur/o,0,1),this}var u=this._targets,l=r?De(r):u,c=this._ptLookup,f=this._pt,_,m,g,E,p,w,S;if((!s||s==="all")&&H0(u,l))return s==="all"&&(this._pt=0),Zr(this);for(_=this._op=this._op||[],s!=="all"&&(Gt(s)&&(p={},_e(s,function(C){return p[C]=1}),s=p),s=gv(u,s)),S=u.length;S--;)if(~l.indexOf(u[S])){m=c[S],s==="all"?(_[S]=s,E=m,g={}):(g=_[S]=_[S]||{},E=s);for(p in E)w=m&&m[p],w&&((!("kill"in w.d)||w.d.kill(p)===!0)&&Js(this,w,"_pt"),delete m[p]),g!=="all"&&(g[p]=1)}return this._initted&&!this._pt&&f&&Zr(this),this},t.to=function(r,s){return new t(r,s,arguments[2])},t.from=function(r,s){return oi(1,arguments)},t.delayedCall=function(r,s,o,u){return new t(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:u})},t.fromTo=function(r,s,o){return oi(2,arguments)},t.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new t(r,s)},t.killTweensOf=function(r,s,o){return Vt.killTweensOf(r,s,o)},t}(Ii);Ve($t.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});_e("staggerTo,staggerFrom,staggerFromTo",function(i){$t[i]=function(){var t=new ce,e=ya.call(arguments,0);return e.splice(i==="staggerFromTo"?5:4,0,0),t[i].apply(t,e)}});var Cu=function(t,e,n){return t[e]=n},Id=function(t,e,n){return t[e](n)},vv=function(t,e,n,r){return t[e](r.fp,n)},Tv=function(t,e,n){return t.setAttribute(e,n)},Du=function(t,e){return Ot(t[e])?Id:Tu(t[e])&&t.setAttribute?Tv:Cu},Ad=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},Ev=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},bd=function(t,e){var n=e._pt,r="";if(!t&&e.b)r=e.b;else if(t===1&&e.e)r=e.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*t):Math.round((n.s+n.c*t)*1e4)/1e4)+r,n=n._next;r+=e.c}e.set(e.t,e.p,r,e)},Vu=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},wv=function(t,e,n,r){for(var s=this._pt,o;s;)o=s._next,s.p===r&&s.modifier(t,e,n),s=o},Iv=function(t){for(var e=this._pt,n,r;e;)r=e._next,e.p===t&&!e.op||e.op===t?Js(this,e,"_pt"):e.dep||(n=1),e=r;return!n},Av=function(t,e,n,r){r.mSet(t,e,r.m.call(r.tween,n,r.mt),r)},Rd=function(t){for(var e=t._pt,n,r,s,o;e;){for(n=e._next,r=s;r&&r.pr>e.pr;)r=r._next;(e._prev=r?r._prev:o)?e._prev._next=e:s=e,(e._next=r)?r._prev=e:o=e,e=n}t._pt=s},pe=function(){function i(e,n,r,s,o,u,l,c,f){this.t=n,this.s=s,this.c=o,this.p=r,this.r=u||Ad,this.d=l||this,this.set=c||Cu,this.pr=f||0,this._next=e,e&&(e._prev=this)}var t=i.prototype;return t.modifier=function(n,r,s){this.mSet=this.mSet||this.set,this.set=Av,this.m=n,this.mt=s,this.tween=r},i}();_e(bu+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(i){return Au[i]=1});Pe.TweenMax=Pe.TweenLite=$t;Pe.TimelineLite=Pe.TimelineMax=ce;Vt=new ce({sortChildren:!1,defaults:Ir,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});be.stringFilter=pd;var jn=[],_s={},bv=[],Gc=0,Rv=0,Uo=function(t){return(_s[t]||bv).map(function(e){return e()})},wa=function(){var t=Date.now(),e=[];t-Gc>2&&(Uo("matchMediaInit"),jn.forEach(function(n){var r=n.queries,s=n.conditions,o,u,l,c;for(u in r)o=Oe.matchMedia(r[u]).matches,o&&(l=1),o!==s[u]&&(s[u]=o,c=1);c&&(n.revert(),l&&e.push(n))}),Uo("matchMediaRevert"),e.forEach(function(n){return n.onMatch(n,function(r){return n.add(null,r)})}),Gc=t,Uo("matchMedia"))},Pd=function(){function i(e,n){this.selector=n&&va(n),this.data=[],this._r=[],this.isReverted=!1,this.id=Rv++,e&&this.add(e)}var t=i.prototype;return t.add=function(n,r,s){Ot(n)&&(s=r,r=n,n=Ot);var o=this,u=function(){var c=Dt,f=o.selector,_;return c&&c!==o&&c.data.push(o),s&&(o.selector=va(s)),Dt=o,_=r.apply(o,arguments),Ot(_)&&o._r.push(_),Dt=c,o.selector=f,o.isReverted=!1,_};return o.last=u,n===Ot?u(o,function(l){return o.add(null,l)}):n?o[n]=u:u},t.ignore=function(n){var r=Dt;Dt=null,n(this),Dt=r},t.getTweens=function(){var n=[];return this.data.forEach(function(r){return r instanceof i?n.push.apply(n,r.getTweens()):r instanceof $t&&!(r.parent&&r.parent.data==="nested")&&n.push(r)}),n},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(n,r){var s=this;if(n?function(){for(var u=s.getTweens(),l=s.data.length,c;l--;)c=s.data[l],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(f){return u.splice(u.indexOf(f),1)}));for(u.map(function(f){return{g:f._dur||f._delay||f._sat&&!f._sat.vars.immediateRender?f.globalTime(0):-1/0,t:f}}).sort(function(f,_){return _.g-f.g||-1/0}).forEach(function(f){return f.t.revert(n)}),l=s.data.length;l--;)c=s.data[l],c instanceof ce?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof $t)&&c.revert&&c.revert(n);s._r.forEach(function(f){return f(n,s)}),s.isReverted=!0}():this.data.forEach(function(u){return u.kill&&u.kill()}),this.clear(),r)for(var o=jn.length;o--;)jn[o].id===this.id&&jn.splice(o,1)},t.revert=function(n){this.kill(n||{})},i}(),Pv=function(){function i(e){this.contexts=[],this.scope=e,Dt&&Dt.data.push(this)}var t=i.prototype;return t.add=function(n,r,s){qe(n)||(n={matches:n});var o=new Pd(0,s||this.scope),u=o.conditions={},l,c,f;Dt&&!o.selector&&(o.selector=Dt.selector),this.contexts.push(o),r=o.add("onMatch",r),o.queries=n;for(c in n)c==="all"?f=1:(l=Oe.matchMedia(n[c]),l&&(jn.indexOf(o)<0&&jn.push(o),(u[c]=l.matches)&&(f=1),l.addListener?l.addListener(wa):l.addEventListener("change",wa)));return f&&r(o,function(_){return o.add(null,_)}),this},t.revert=function(n){this.kill(n||{})},t.kill=function(n){this.contexts.forEach(function(r){return r.kill(n,!0)})},i}(),xs={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(function(r){return fd(r)})},timeline:function(t){return new ce(t)},getTweensOf:function(t,e){return Vt.getTweensOf(t,e)},getProperty:function(t,e,n,r){Gt(t)&&(t=De(t)[0]);var s=$n(t||{}).get,o=n?Zf:Jf;return n==="native"&&(n=""),t&&(e?o((ve[e]&&ve[e].get||s)(t,e,n,r)):function(u,l,c){return o((ve[u]&&ve[u].get||s)(t,u,l,c))})},quickSetter:function(t,e,n){if(t=De(t),t.length>1){var r=t.map(function(f){return ge.quickSetter(f,e,n)}),s=r.length;return function(f){for(var _=s;_--;)r[_](f)}}t=t[0]||{};var o=ve[e],u=$n(t),l=u.harness&&(u.harness.aliases||{})[e]||e,c=o?function(f){var _=new o;ur._pt=0,_.init(t,n?f+n:f,ur,0,[t]),_.render(1,_),ur._pt&&Vu(1,ur)}:u.set(t,l);return o?c:function(f){return c(t,l,n?f+n:f,u,1)}},quickTo:function(t,e,n){var r,s=ge.to(t,Hn((r={},r[e]="+=0.1",r.paused=!0,r),n||{})),o=function(l,c,f){return s.resetTo(e,l,c,f)};return o.tween=s,o},isTweening:function(t){return Vt.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Bn(t.ease,Ir.ease)),Uc(Ir,t||{})},config:function(t){return Uc(be,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,r=t.plugins,s=t.defaults,o=t.extendTimeline;(r||"").split(",").forEach(function(u){return u&&!ve[u]&&!Pe[u]&&vi(e+" effect requires "+u+" plugin.")}),Mo[e]=function(u,l,c){return n(De(u),Ve(l||{},s),c)},o&&(ce.prototype[e]=function(u,l,c){return this.add(Mo[e](u,qe(l)?l:(c=l)&&{},this),c)})},registerEase:function(t,e){at[t]=Bn(e)},parseEase:function(t,e){return arguments.length?Bn(t,e):at},getById:function(t){return Vt.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var n=new ce(t),r,s;for(n.smoothChildTiming=de(t.smoothChildTiming),Vt.remove(n),n._dp=0,n._time=n._tTime=Vt._time,r=Vt._first;r;)s=r._next,(e||!(!r._dur&&r instanceof $t&&r.vars.onComplete===r._targets[0]))&&Me(n,r,r._start-r._delay),r=s;return Me(Vt,n,0),n},context:function(t,e){return t?new Pd(t,e):Dt},matchMedia:function(t){return new Pv(t)},matchMediaRefresh:function(){return jn.forEach(function(t){var e=t.conditions,n,r;for(r in e)e[r]&&(e[r]=!1,n=1);n&&t.revert()})||wa()},addEventListener:function(t,e){var n=_s[t]||(_s[t]=[]);~n.indexOf(e)||n.push(e)},removeEventListener:function(t,e){var n=_s[t],r=n&&n.indexOf(e);r>=0&&n.splice(r,1)},utils:{wrap:sv,wrapYoyo:ov,distribute:od,random:ud,snap:ad,normalize:iv,getUnit:ie,clamp:tv,splitColor:dd,toArray:De,selector:va,mapRange:cd,pipe:nv,unitize:rv,interpolate:av,shuffle:sd},install:Hf,effects:Mo,ticker:Te,updateRoot:ce.updateRoot,plugins:ve,globalTimeline:Vt,core:{PropTween:pe,globals:Wf,Tween:$t,Timeline:ce,Animation:Ii,getCache:$n,_removeLinkedListItem:Js,reverting:function(){return se},context:function(t){return t&&Dt&&(Dt.data.push(t),t._ctx=Dt),Dt},suppressOverwrites:function(t){return vu=t}}};_e("to,from,fromTo,delayedCall,set,killTweensOf",function(i){return xs[i]=$t[i]});Te.add(ce.updateRoot);ur=xs.to({},{duration:0});var Sv=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},Cv=function(t,e){var n=t._targets,r,s,o;for(r in e)for(s=n.length;s--;)o=t._ptLookup[s][r],o&&(o=o.d)&&(o._pt&&(o=Sv(o,r)),o&&o.modifier&&o.modifier(e[r],t,n[s],r))},Bo=function(t,e){return{name:t,rawVars:1,init:function(r,s,o){o._onInit=function(u){var l,c;if(Gt(s)&&(l={},_e(s,function(f){return l[f]=1}),s=l),e){l={};for(c in s)l[c]=e(s[c]);s=l}Cv(u,s)}}}},ge=xs.registerPlugin({name:"attr",init:function(t,e,n,r,s){var o,u,l;this.tween=n;for(o in e)l=t.getAttribute(o)||"",u=this.add(t,"setAttribute",(l||0)+"",e[o],r,s,0,0,o),u.op=o,u.b=l,this._props.push(o)},render:function(t,e){for(var n=e._pt;n;)se?n.set(n.t,n.p,n.b,n):n.r(t,n.d),n=n._next}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n],0,0,0,0,0,1)}},Bo("roundProps",Ta),Bo("modifiers"),Bo("snap",ad))||xs;$t.version=ce.version=ge.version="3.12.5";Kf=1;Eu()&&Rr();at.Power0;at.Power1;at.Power2;at.Power3;at.Power4;at.Linear;at.Quad;at.Cubic;at.Quart;at.Quint;at.Strong;at.Elastic;at.Back;at.SteppedEase;at.Bounce;at.Sine;at.Expo;at.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Kc,ln,fr,ku,Mn,Hc,xu,Dv=function(){return typeof window<"u"},nn={},Nn=180/Math.PI,dr=Math.PI/180,rr=Math.atan2,Wc=1e8,Nu=/([A-Z])/g,Vv=/(left|right|width|margin|padding|x)/i,kv=/[\s,\(]\S/,Fe={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Ia=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},xv=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},Nv=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},Ov=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},Sd=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},Cd=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},Mv=function(t,e,n){return t.style[e]=n},Fv=function(t,e,n){return t.style.setProperty(e,n)},Lv=function(t,e,n){return t._gsap[e]=n},$v=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},Uv=function(t,e,n,r,s){var o=t._gsap;o.scaleX=o.scaleY=n,o.renderTransform(s,o)},Bv=function(t,e,n,r,s){var o=t._gsap;o[e]=n,o.renderTransform(s,o)},kt="transform",me=kt+"Origin",jv=function i(t,e){var n=this,r=this.target,s=r.style,o=r._gsap;if(t in nn&&s){if(this.tfm=this.tfm||{},t!=="transform")t=Fe[t]||t,~t.indexOf(",")?t.split(",").forEach(function(u){return n.tfm[u]=Xe(r,u)}):this.tfm[t]=o.x?o[t]:Xe(r,t),t===me&&(this.tfm.zOrigin=o.zOrigin);else return Fe.transform.split(",").forEach(function(u){return i.call(n,u,e)});if(this.props.indexOf(kt)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(me,e,"")),t=kt}(s||e)&&this.props.push(t,e,s[t])},Dd=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},zv=function(){var t=this.props,e=this.target,n=e.style,r=e._gsap,s,o;for(s=0;s<t.length;s+=3)t[s+1]?e[t[s]]=t[s+2]:t[s+2]?n[t[s]]=t[s+2]:n.removeProperty(t[s].substr(0,2)==="--"?t[s]:t[s].replace(Nu,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),s=xu(),(!s||!s.isStart)&&!n[kt]&&(Dd(n),r.zOrigin&&n[me]&&(n[me]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},Vd=function(t,e){var n={target:t,props:[],revert:zv,save:jv};return t._gsap||ge.core.getCache(t),e&&e.split(",").forEach(function(r){return n.save(r)}),n},kd,Aa=function(t,e){var n=ln.createElementNS?ln.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):ln.createElement(t);return n&&n.style?n:ln.createElement(t)},Ue=function i(t,e,n){var r=getComputedStyle(t);return r[e]||r.getPropertyValue(e.replace(Nu,"-$1").toLowerCase())||r.getPropertyValue(e)||!n&&i(t,Pr(e)||e,1)||""},Qc="O,Moz,ms,Ms,Webkit".split(","),Pr=function(t,e,n){var r=e||Mn,s=r.style,o=5;if(t in s&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);o--&&!(Qc[o]+t in s););return o<0?null:(o===3?"ms":o>=0?Qc[o]:"")+t},ba=function(){Dv()&&window.document&&(Kc=window,ln=Kc.document,fr=ln.documentElement,Mn=Aa("div")||{style:{}},Aa("div"),kt=Pr(kt),me=kt+"Origin",Mn.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",kd=!!Pr("perspective"),xu=ge.core.reverting,ku=1)},jo=function i(t){var e=Aa("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,s=this.style.cssText,o;if(fr.appendChild(e),e.appendChild(this),this.style.display="block",t)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=i}catch{}else this._gsapBBox&&(o=this._gsapBBox());return n&&(r?n.insertBefore(this,r):n.appendChild(this)),fr.removeChild(e),this.style.cssText=s,o},Xc=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},xd=function(t){var e;try{e=t.getBBox()}catch{e=jo.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===jo||(e=jo.call(t,!0)),e&&!e.width&&!e.x&&!e.y?{x:+Xc(t,["x","cx","x1"])||0,y:+Xc(t,["y","cy","y1"])||0,width:0,height:0}:e},Nd=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&xd(t))},Wn=function(t,e){if(e){var n=t.style,r;e in nn&&e!==me&&(e=kt),n.removeProperty?(r=e.substr(0,2),(r==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),n.removeProperty(r==="--"?e:e.replace(Nu,"-$1").toLowerCase())):n.removeAttribute(e)}},cn=function(t,e,n,r,s,o){var u=new pe(t._pt,e,n,0,1,o?Cd:Sd);return t._pt=u,u.b=r,u.e=s,t._props.push(n),u},Yc={deg:1,rad:1,turn:1},qv={grid:1,flex:1},In=function i(t,e,n,r){var s=parseFloat(n)||0,o=(n+"").trim().substr((s+"").length)||"px",u=Mn.style,l=Vv.test(e),c=t.tagName.toLowerCase()==="svg",f=(c?"client":"offset")+(l?"Width":"Height"),_=100,m=r==="px",g=r==="%",E,p,w,S;if(r===o||!s||Yc[r]||Yc[o])return s;if(o!=="px"&&!m&&(s=i(t,e,n,"px")),S=t.getCTM&&Nd(t),(g||o==="%")&&(nn[e]||~e.indexOf("adius")))return E=S?t.getBBox()[l?"width":"height"]:t[f],Mt(g?s/E*_:s/100*E);if(u[l?"width":"height"]=_+(m?o:r),p=~e.indexOf("adius")||r==="em"&&t.appendChild&&!c?t:t.parentNode,S&&(p=(t.ownerSVGElement||{}).parentNode),(!p||p===ln||!p.appendChild)&&(p=ln.body),w=p._gsap,w&&g&&w.width&&l&&w.time===Te.time&&!w.uncache)return Mt(s/w.width*_);if(g&&(e==="height"||e==="width")){var C=t.style[e];t.style[e]=_+r,E=t[f],C?t.style[e]=C:Wn(t,e)}else(g||o==="%")&&!qv[Ue(p,"display")]&&(u.position=Ue(t,"position")),p===t&&(u.position="static"),p.appendChild(Mn),E=Mn[f],p.removeChild(Mn),u.position="absolute";return l&&g&&(w=$n(p),w.time=Te.time,w.width=p[f]),Mt(m?E*s/_:E&&s?_/E*s:0)},Xe=function(t,e,n,r){var s;return ku||ba(),e in Fe&&e!=="transform"&&(e=Fe[e],~e.indexOf(",")&&(e=e.split(",")[0])),nn[e]&&e!=="transform"?(s=bi(t,r),s=e!=="transformOrigin"?s[e]:s.svg?s.origin:Os(Ue(t,me))+" "+s.zOrigin+"px"):(s=t.style[e],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=Ns[e]&&Ns[e](t,e,n)||Ue(t,e)||Xf(t,e)||(e==="opacity"?1:0))),n&&!~(s+"").trim().indexOf(" ")?In(t,e,s,n)+n:s},Gv=function(t,e,n,r){if(!n||n==="none"){var s=Pr(e,t,1),o=s&&Ue(t,s,1);o&&o!==n?(e=s,n=o):e==="borderColor"&&(n=Ue(t,"borderTopColor"))}var u=new pe(this._pt,t.style,e,0,1,bd),l=0,c=0,f,_,m,g,E,p,w,S,C,x,V,k;if(u.b=n,u.e=r,n+="",r+="",r==="auto"&&(p=t.style[e],t.style[e]=r,r=Ue(t,e)||r,p?t.style[e]=p:Wn(t,e)),f=[n,r],pd(f),n=f[0],r=f[1],m=n.match(ar)||[],k=r.match(ar)||[],k.length){for(;_=ar.exec(r);)w=_[0],C=r.substring(l,_.index),E?E=(E+1)%5:(C.substr(-5)==="rgba("||C.substr(-5)==="hsla(")&&(E=1),w!==(p=m[c++]||"")&&(g=parseFloat(p)||0,V=p.substr((g+"").length),w.charAt(1)==="="&&(w=hr(g,w)+V),S=parseFloat(w),x=w.substr((S+"").length),l=ar.lastIndex-x.length,x||(x=x||be.units[e]||V,l===r.length&&(r+=x,u.e+=x)),V!==x&&(g=In(t,e,p,x)||0),u._pt={_next:u._pt,p:C||c===1?C:",",s:g,c:S-g,m:E&&E<4||e==="zIndex"?Math.round:0});u.c=l<r.length?r.substring(l,r.length):""}else u.r=e==="display"&&r==="none"?Cd:Sd;return qf.test(r)&&(u.e=0),this._pt=u,u},Jc={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Kv=function(t){var e=t.split(" "),n=e[0],r=e[1]||"50%";return(n==="top"||n==="bottom"||r==="left"||r==="right")&&(t=n,n=r,r=t),e[0]=Jc[n]||n,e[1]=Jc[r]||r,e.join(" ")},Hv=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n=e.t,r=n.style,s=e.u,o=n._gsap,u,l,c;if(s==="all"||s===!0)r.cssText="",l=1;else for(s=s.split(","),c=s.length;--c>-1;)u=s[c],nn[u]&&(l=1,u=u==="transformOrigin"?me:kt),Wn(n,u);l&&(Wn(n,kt),o&&(o.svg&&n.removeAttribute("transform"),bi(n,1),o.uncache=1,Dd(r)))}},Ns={clearProps:function(t,e,n,r,s){if(s.data!=="isFromStart"){var o=t._pt=new pe(t._pt,e,n,0,0,Hv);return o.u=r,o.pr=-10,o.tween=s,t._props.push(n),1}}},Ai=[1,0,0,1,0,0],Od={},Md=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},Zc=function(t){var e=Ue(t,kt);return Md(e)?Ai:e.substr(7).match(zf).map(Mt)},Ou=function(t,e){var n=t._gsap||$n(t),r=t.style,s=Zc(t),o,u,l,c;return n.svg&&t.getAttribute("transform")?(l=t.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?Ai:s):(s===Ai&&!t.offsetParent&&t!==fr&&!n.svg&&(l=r.display,r.display="block",o=t.parentNode,(!o||!t.offsetParent)&&(c=1,u=t.nextElementSibling,fr.appendChild(t)),s=Zc(t),l?r.display=l:Wn(t,"display"),c&&(u?o.insertBefore(t,u):o?o.appendChild(t):fr.removeChild(t))),e&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},Ra=function(t,e,n,r,s,o){var u=t._gsap,l=s||Ou(t,!0),c=u.xOrigin||0,f=u.yOrigin||0,_=u.xOffset||0,m=u.yOffset||0,g=l[0],E=l[1],p=l[2],w=l[3],S=l[4],C=l[5],x=e.split(" "),V=parseFloat(x[0])||0,k=parseFloat(x[1])||0,O,I,y,v;n?l!==Ai&&(I=g*w-E*p)&&(y=V*(w/I)+k*(-p/I)+(p*C-w*S)/I,v=V*(-E/I)+k*(g/I)-(g*C-E*S)/I,V=y,k=v):(O=xd(t),V=O.x+(~x[0].indexOf("%")?V/100*O.width:V),k=O.y+(~(x[1]||x[0]).indexOf("%")?k/100*O.height:k)),r||r!==!1&&u.smooth?(S=V-c,C=k-f,u.xOffset=_+(S*g+C*p)-S,u.yOffset=m+(S*E+C*w)-C):u.xOffset=u.yOffset=0,u.xOrigin=V,u.yOrigin=k,u.smooth=!!r,u.origin=e,u.originIsAbsolute=!!n,t.style[me]="0px 0px",o&&(cn(o,u,"xOrigin",c,V),cn(o,u,"yOrigin",f,k),cn(o,u,"xOffset",_,u.xOffset),cn(o,u,"yOffset",m,u.yOffset)),t.setAttribute("data-svg-origin",V+" "+k)},bi=function(t,e){var n=t._gsap||new vd(t);if("x"in n&&!e&&!n.uncache)return n;var r=t.style,s=n.scaleX<0,o="px",u="deg",l=getComputedStyle(t),c=Ue(t,me)||"0",f,_,m,g,E,p,w,S,C,x,V,k,O,I,y,v,b,R,P,A,et,ut,_t,pt,ot,J,gt,jt,St,nt,wt,Yt;return f=_=m=p=w=S=C=x=V=0,g=E=1,n.svg=!!(t.getCTM&&Nd(t)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(r[kt]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[kt]!=="none"?l[kt]:"")),r.scale=r.rotate=r.translate="none"),I=Ou(t,n.svg),n.svg&&(n.uncache?(ot=t.getBBox(),c=n.xOrigin-ot.x+"px "+(n.yOrigin-ot.y)+"px",pt=""):pt=!e&&t.getAttribute("data-svg-origin"),Ra(t,pt||c,!!pt||n.originIsAbsolute,n.smooth!==!1,I)),k=n.xOrigin||0,O=n.yOrigin||0,I!==Ai&&(R=I[0],P=I[1],A=I[2],et=I[3],f=ut=I[4],_=_t=I[5],I.length===6?(g=Math.sqrt(R*R+P*P),E=Math.sqrt(et*et+A*A),p=R||P?rr(P,R)*Nn:0,C=A||et?rr(A,et)*Nn+p:0,C&&(E*=Math.abs(Math.cos(C*dr))),n.svg&&(f-=k-(k*R+O*A),_-=O-(k*P+O*et))):(Yt=I[6],nt=I[7],gt=I[8],jt=I[9],St=I[10],wt=I[11],f=I[12],_=I[13],m=I[14],y=rr(Yt,St),w=y*Nn,y&&(v=Math.cos(-y),b=Math.sin(-y),pt=ut*v+gt*b,ot=_t*v+jt*b,J=Yt*v+St*b,gt=ut*-b+gt*v,jt=_t*-b+jt*v,St=Yt*-b+St*v,wt=nt*-b+wt*v,ut=pt,_t=ot,Yt=J),y=rr(-A,St),S=y*Nn,y&&(v=Math.cos(-y),b=Math.sin(-y),pt=R*v-gt*b,ot=P*v-jt*b,J=A*v-St*b,wt=et*b+wt*v,R=pt,P=ot,A=J),y=rr(P,R),p=y*Nn,y&&(v=Math.cos(y),b=Math.sin(y),pt=R*v+P*b,ot=ut*v+_t*b,P=P*v-R*b,_t=_t*v-ut*b,R=pt,ut=ot),w&&Math.abs(w)+Math.abs(p)>359.9&&(w=p=0,S=180-S),g=Mt(Math.sqrt(R*R+P*P+A*A)),E=Mt(Math.sqrt(_t*_t+Yt*Yt)),y=rr(ut,_t),C=Math.abs(y)>2e-4?y*Nn:0,V=wt?1/(wt<0?-wt:wt):0),n.svg&&(pt=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!Md(Ue(t,kt)),pt&&t.setAttribute("transform",pt))),Math.abs(C)>90&&Math.abs(C)<270&&(s?(g*=-1,C+=p<=0?180:-180,p+=p<=0?180:-180):(E*=-1,C+=C<=0?180:-180)),e=e||n.uncache,n.x=f-((n.xPercent=f&&(!e&&n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-f)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+o,n.y=_-((n.yPercent=_&&(!e&&n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-_)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+o,n.z=m+o,n.scaleX=Mt(g),n.scaleY=Mt(E),n.rotation=Mt(p)+u,n.rotationX=Mt(w)+u,n.rotationY=Mt(S)+u,n.skewX=C+u,n.skewY=x+u,n.transformPerspective=V+o,(n.zOrigin=parseFloat(c.split(" ")[2])||!e&&n.zOrigin||0)&&(r[me]=Os(c)),n.xOffset=n.yOffset=0,n.force3D=be.force3D,n.renderTransform=n.svg?Qv:kd?Fd:Wv,n.uncache=0,n},Os=function(t){return(t=t.split(" "))[0]+" "+t[1]},zo=function(t,e,n){var r=ie(e);return Mt(parseFloat(e)+parseFloat(In(t,"x",n+"px",r)))+r},Wv=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Fd(t,e)},Vn="0deg",Wr="0px",kn=") ",Fd=function(t,e){var n=e||this,r=n.xPercent,s=n.yPercent,o=n.x,u=n.y,l=n.z,c=n.rotation,f=n.rotationY,_=n.rotationX,m=n.skewX,g=n.skewY,E=n.scaleX,p=n.scaleY,w=n.transformPerspective,S=n.force3D,C=n.target,x=n.zOrigin,V="",k=S==="auto"&&t&&t!==1||S===!0;if(x&&(_!==Vn||f!==Vn)){var O=parseFloat(f)*dr,I=Math.sin(O),y=Math.cos(O),v;O=parseFloat(_)*dr,v=Math.cos(O),o=zo(C,o,I*v*-x),u=zo(C,u,-Math.sin(O)*-x),l=zo(C,l,y*v*-x+x)}w!==Wr&&(V+="perspective("+w+kn),(r||s)&&(V+="translate("+r+"%, "+s+"%) "),(k||o!==Wr||u!==Wr||l!==Wr)&&(V+=l!==Wr||k?"translate3d("+o+", "+u+", "+l+") ":"translate("+o+", "+u+kn),c!==Vn&&(V+="rotate("+c+kn),f!==Vn&&(V+="rotateY("+f+kn),_!==Vn&&(V+="rotateX("+_+kn),(m!==Vn||g!==Vn)&&(V+="skew("+m+", "+g+kn),(E!==1||p!==1)&&(V+="scale("+E+", "+p+kn),C.style[kt]=V||"translate(0, 0)"},Qv=function(t,e){var n=e||this,r=n.xPercent,s=n.yPercent,o=n.x,u=n.y,l=n.rotation,c=n.skewX,f=n.skewY,_=n.scaleX,m=n.scaleY,g=n.target,E=n.xOrigin,p=n.yOrigin,w=n.xOffset,S=n.yOffset,C=n.forceCSS,x=parseFloat(o),V=parseFloat(u),k,O,I,y,v;l=parseFloat(l),c=parseFloat(c),f=parseFloat(f),f&&(f=parseFloat(f),c+=f,l+=f),l||c?(l*=dr,c*=dr,k=Math.cos(l)*_,O=Math.sin(l)*_,I=Math.sin(l-c)*-m,y=Math.cos(l-c)*m,c&&(f*=dr,v=Math.tan(c-f),v=Math.sqrt(1+v*v),I*=v,y*=v,f&&(v=Math.tan(f),v=Math.sqrt(1+v*v),k*=v,O*=v)),k=Mt(k),O=Mt(O),I=Mt(I),y=Mt(y)):(k=_,y=m,O=I=0),(x&&!~(o+"").indexOf("px")||V&&!~(u+"").indexOf("px"))&&(x=In(g,"x",o,"px"),V=In(g,"y",u,"px")),(E||p||w||S)&&(x=Mt(x+E-(E*k+p*I)+w),V=Mt(V+p-(E*O+p*y)+S)),(r||s)&&(v=g.getBBox(),x=Mt(x+r/100*v.width),V=Mt(V+s/100*v.height)),v="matrix("+k+","+O+","+I+","+y+","+x+","+V+")",g.setAttribute("transform",v),C&&(g.style[kt]=v)},Xv=function(t,e,n,r,s){var o=360,u=Gt(s),l=parseFloat(s)*(u&&~s.indexOf("rad")?Nn:1),c=l-r,f=r+c+"deg",_,m;return u&&(_=s.split("_")[1],_==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),_==="cw"&&c<0?c=(c+o*Wc)%o-~~(c/o)*o:_==="ccw"&&c>0&&(c=(c-o*Wc)%o-~~(c/o)*o)),t._pt=m=new pe(t._pt,e,n,r,c,xv),m.e=f,m.u="deg",t._props.push(n),m},th=function(t,e){for(var n in e)t[n]=e[n];return t},Yv=function(t,e,n){var r=th({},n._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=n.style,u,l,c,f,_,m,g,E;r.svg?(c=n.getAttribute("transform"),n.setAttribute("transform",""),o[kt]=e,u=bi(n,1),Wn(n,kt),n.setAttribute("transform",c)):(c=getComputedStyle(n)[kt],o[kt]=e,u=bi(n,1),o[kt]=c);for(l in nn)c=r[l],f=u[l],c!==f&&s.indexOf(l)<0&&(g=ie(c),E=ie(f),_=g!==E?In(n,l,c,E):parseFloat(c),m=parseFloat(f),t._pt=new pe(t._pt,u,l,_,m-_,Ia),t._pt.u=E||0,t._props.push(l));th(u,r)};_e("padding,margin,Width,Radius",function(i,t){var e="Top",n="Right",r="Bottom",s="Left",o=(t<3?[e,n,r,s]:[e+s,e+n,r+n,r+s]).map(function(u){return t<2?i+u:"border"+u+i});Ns[t>1?"border"+i:i]=function(u,l,c,f,_){var m,g;if(arguments.length<4)return m=o.map(function(E){return Xe(u,E,c)}),g=m.join(" "),g.split(m[0]).length===5?m[0]:g;m=(f+"").split(" "),g={},o.forEach(function(E,p){return g[E]=m[p]=m[p]||m[(p-1)/2|0]}),u.init(l,g,_)}});var Ld={name:"css",register:ba,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,r,s){var o=this._props,u=t.style,l=n.vars.startAt,c,f,_,m,g,E,p,w,S,C,x,V,k,O,I,y;ku||ba(),this.styles=this.styles||Vd(t),y=this.styles.props,this.tween=n;for(p in e)if(p!=="autoRound"&&(f=e[p],!(ve[p]&&Td(p,e,n,r,t,s)))){if(g=typeof f,E=Ns[p],g==="function"&&(f=f.call(n,r,t,s),g=typeof f),g==="string"&&~f.indexOf("random(")&&(f=Ei(f)),E)E(this,t,p,f,n)&&(I=1);else if(p.substr(0,2)==="--")c=(getComputedStyle(t).getPropertyValue(p)+"").trim(),f+="",pn.lastIndex=0,pn.test(c)||(w=ie(c),S=ie(f)),S?w!==S&&(c=In(t,p,c,S)+S):w&&(f+=w),this.add(u,"setProperty",c,f,r,s,0,0,p),o.push(p),y.push(p,0,u[p]);else if(g!=="undefined"){if(l&&p in l?(c=typeof l[p]=="function"?l[p].call(n,r,t,s):l[p],Gt(c)&&~c.indexOf("random(")&&(c=Ei(c)),ie(c+"")||c==="auto"||(c+=be.units[p]||ie(Xe(t,p))||""),(c+"").charAt(1)==="="&&(c=Xe(t,p))):c=Xe(t,p),m=parseFloat(c),C=g==="string"&&f.charAt(1)==="="&&f.substr(0,2),C&&(f=f.substr(2)),_=parseFloat(f),p in Fe&&(p==="autoAlpha"&&(m===1&&Xe(t,"visibility")==="hidden"&&_&&(m=0),y.push("visibility",0,u.visibility),cn(this,u,"visibility",m?"inherit":"hidden",_?"inherit":"hidden",!_)),p!=="scale"&&p!=="transform"&&(p=Fe[p],~p.indexOf(",")&&(p=p.split(",")[0]))),x=p in nn,x){if(this.styles.save(p),V||(k=t._gsap,k.renderTransform&&!e.parseTransform||bi(t,e.parseTransform),O=e.smoothOrigin!==!1&&k.smooth,V=this._pt=new pe(this._pt,u,kt,0,1,k.renderTransform,k,0,-1),V.dep=1),p==="scale")this._pt=new pe(this._pt,k,"scaleY",k.scaleY,(C?hr(k.scaleY,C+_):_)-k.scaleY||0,Ia),this._pt.u=0,o.push("scaleY",p),p+="X";else if(p==="transformOrigin"){y.push(me,0,u[me]),f=Kv(f),k.svg?Ra(t,f,0,O,0,this):(S=parseFloat(f.split(" ")[2])||0,S!==k.zOrigin&&cn(this,k,"zOrigin",k.zOrigin,S),cn(this,u,p,Os(c),Os(f)));continue}else if(p==="svgOrigin"){Ra(t,f,1,O,0,this);continue}else if(p in Od){Xv(this,k,p,m,C?hr(m,C+f):f);continue}else if(p==="smoothOrigin"){cn(this,k,"smooth",k.smooth,f);continue}else if(p==="force3D"){k[p]=f;continue}else if(p==="transform"){Yv(this,f,t);continue}}else p in u||(p=Pr(p)||p);if(x||(_||_===0)&&(m||m===0)&&!kv.test(f)&&p in u)w=(c+"").substr((m+"").length),_||(_=0),S=ie(f)||(p in be.units?be.units[p]:w),w!==S&&(m=In(t,p,c,S)),this._pt=new pe(this._pt,x?k:u,p,m,(C?hr(m,C+_):_)-m,!x&&(S==="px"||p==="zIndex")&&e.autoRound!==!1?Ov:Ia),this._pt.u=S||0,w!==S&&S!=="%"&&(this._pt.b=c,this._pt.r=Nv);else if(p in u)Gv.call(this,t,p,c,C?C+f:f);else if(p in t)this.add(t,p,c||t[p],C?C+f:f,r,s);else if(p!=="parseTransform"){Iu(p,f);continue}x||(p in u?y.push(p,0,u[p]):y.push(p,1,c||t[p])),o.push(p)}}I&&Rd(this)},render:function(t,e){if(e.tween._time||!xu())for(var n=e._pt;n;)n.r(t,n.d),n=n._next;else e.styles.revert()},get:Xe,aliases:Fe,getSetter:function(t,e,n){var r=Fe[e];return r&&r.indexOf(",")<0&&(e=r),e in nn&&e!==me&&(t._gsap.x||Xe(t,"x"))?n&&Hc===n?e==="scale"?$v:Lv:(Hc=n||{})&&(e==="scale"?Uv:Bv):t.style&&!Tu(t.style[e])?Mv:~e.indexOf("-")?Fv:Du(t,e)},core:{_removeProperty:Wn,_getMatrix:Ou}};ge.utils.checkPrefix=Pr;ge.core.getStyleSaver=Vd;(function(i,t,e,n){var r=_e(i+","+t+","+e,function(s){nn[s]=1});_e(t,function(s){be.units[s]="deg",Od[s]=1}),Fe[r[13]]=i+","+t,_e(n,function(s){var o=s.split(":");Fe[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");_e("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(i){be.units[i]="px"});ge.registerPlugin(Ld);var $d=ge.registerPlugin(Ld)||ge;$d.core.Tween;function eh(i){let t,e="Geselecteerd Bestand:",n,r,s=i[0].name+"",o;return{c(){t=G("p"),t.textContent=e,n=rt(),r=G("pre"),o=ht(s),this.h()},l(u){t=K(u,"P",{class:!0,"data-svelte-h":!0}),gn(t)!=="svelte-zs65m6"&&(t.textContent=e),n=it(u),r=K(u,"PRE",{class:!0});var l=Z(r);o=ft(l,s),l.forEach(L),this.h()},h(){W(t,"class","font-bold text-center"),W(r,"class","text-center")},m(u,l){q(u,t,l),q(u,n,l),q(u,r,l),U(r,o)},p(u,l){l&1&&s!==(s=u[0].name+"")&&Qt(o,s)},d(u){u&&(L(t),L(n),L(r))}}}function Jv(i){let t;return{c(){t=ht("Upload")},l(e){t=ft(e,"Upload")},m(e,n){q(e,t,n)},d(e){e&&L(t)}}}function Zv(i){let t;return{c(){t=ht("Terug")},l(e){t=ft(e,"Terug")},m(e,n){q(e,t,n)},d(e){e&&L(t)}}}function tT(i){let t,e,n,r="Selecteer een bestand",s,o,u,l,c,f,_,m,g=i[0]&&eh(i);return u=new Re({props:{class:"my-2",$$slots:{default:[Jv]},$$scope:{ctx:i}}}),u.$on("click",i[3]),c=new Re({props:{theme:"red",class:"my-2",$$slots:{default:[Zv]},$$scope:{ctx:i}}}),c.$on("click",i[5]),{c(){t=G("input"),e=rt(),n=G("label"),n.textContent=r,s=rt(),g&&g.c(),o=rt(),At(u.$$.fragment),l=rt(),At(c.$$.fragment),this.h()},l(E){t=K(E,"INPUT",{id:!0,class:!0,type:!0,accept:!0}),e=it(E),n=K(E,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),gn(n)!=="svelte-1fxuazo"&&(n.textContent=r),s=it(E),g&&g.l(E),o=it(E),bt(u.$$.fragment,E),l=it(E),bt(c.$$.fragment,E),this.h()},h(){W(t,"id","file-upload"),W(t,"class","hidden"),W(t,"type","file"),W(t,"accept","text/csv"),W(n,"for","file-upload"),W(n,"class","my-2 bg-blue-500 text-white px-5 rounded-md py-3 cursor-pointer")},m(E,p){q(E,t,p),i[4](t),q(E,e,p),q(E,n,p),q(E,s,p),g&&g.m(E,p),q(E,o,p),Rt(u,E,p),q(E,l,p),Rt(c,E,p),f=!0,_||(m=xa(t,"change",i[2]),_=!0)},p(E,p){E[0]?g?g.p(E,p):(g=eh(E),g.c(),g.m(o.parentNode,o)):g&&(g.d(1),g=null);const w={};p&1024&&(w.$$scope={dirty:p,ctx:E}),u.$set(w);const S={};p&1024&&(S.$$scope={dirty:p,ctx:E}),c.$set(S)},i(E){f||(X(u.$$.fragment,E),X(c.$$.fragment,E),f=!0)},o(E){tt(u.$$.fragment,E),tt(c.$$.fragment,E),f=!1},d(E){E&&(L(t),L(e),L(n),L(s),L(o),L(l)),i[4](null),g&&g.d(E),Pt(u,E),Pt(c,E),_=!1,m()}}}function eT(i){let t,e;return t=new Pi({props:{$$slots:{default:[tT]},$$scope:{ctx:i}}}),{c(){At(t.$$.fragment)},l(n){bt(t.$$.fragment,n)},m(n,r){Rt(t,n,r),e=!0},p(n,[r]){const s={};r&1027&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(X(t.$$.fragment,n),e=!0)},o(n){tt(t.$$.fragment,n),e=!1},d(n){Pt(t,n)}}}function nT(i,t,e){let n=null,r,s=[],o=null;function u(g){var x,V;const E=g.target,p=(x=E.files)==null?void 0:x[0];if(!p)return;const w=(V=p.name.split(".").pop())==null?void 0:V.toLowerCase(),S=p.type;if(!["text/csv","application/vnd.ms-excel"].includes(S)||w!=="csv"){alert("Ongeldig of niet-ondersteund bestandstype. Upload een CSV-bestand."),E.value="";return}e(0,n=p)}function l(){if(!n){alert("Selecteer een bestand.");return}c(),alert("Upload successvol."),e(1,r.value="",r),e(0,n=null)}function c(){const g=new FileReader;g.onload=function(E){var p;try{const S=((p=E.target)==null?void 0:p.result).split("\r").filter(k=>k.trim()!=="");if(S.length<2){alert("CSV bevat geen data.");return}const C=S[0].split(";"),x=C.indexOf("naam"),V=C.indexOf("maximaal");if(x===-1||V===-1){alert("CSV-bestand bevat niet de vereiste headers.");return}s=[],o=null;for(let k=1;k<S.length;k++){const O=S[k].split(";").map(I=>I.trim().replace("/r",""));if(O[x])if(O[x].includes("budget"))o={maximaal:O[V]};else{const I={};for(let y=0;y<C.length;y++)I[C[y]]=O[y];s.push(I)}}}catch(w){alert("Er is een fout opgetreden tijdens het verwerken van het bestand."),console.error(w)}},g.onerror=function(){alert("Er is een fout opgetreden tijdens het lezen van het bestand.")},g.onloadend=function(){f()},n&&g.readAsText(n)}const f=async()=>{try{const g=s.map(w=>w.id),E=await Ys(Ws(Ln,"maatregelen")),p=s0(Ln);E.docs.forEach(w=>{g.includes(w.id)||p.delete(w.ref)}),s.forEach(w=>{const S=wf(Ln,"maatregelen",w.id);p.set(S,w,{merge:!0})}),await p.commit(),console.log("Firestore updated successfully.")}catch(g){alert("Er is een fout opgetreden bij het opslaan van het bestand in Firestore."),console.error(g)}};function _(g){Va[g?"unshift":"push"](()=>{r=g,e(1,r)})}return[n,r,u,l,_,()=>Be.set(0)]}class rT extends Ge{constructor(t){super(),Ke(this,t,nT,eT,Ne,{})}}function iT(i){let t,e,n,r,s,o,u,l,c,f,_,m,g,E,p,w,S,C,x;return n=new g0({}),o=new F0({}),c=new S0({}),m=new w0({}),p=new V_({}),C=new rT({}),{c(){t=G("div"),e=G("div"),At(n.$$.fragment),r=rt(),s=G("div"),At(o.$$.fragment),u=rt(),l=G("div"),At(c.$$.fragment),f=rt(),_=G("div"),At(m.$$.fragment),g=rt(),E=G("div"),At(p.$$.fragment),w=rt(),S=G("div"),At(C.$$.fragment),this.h()},l(V){t=K(V,"DIV",{class:!0});var k=Z(t);e=K(k,"DIV",{class:!0});var O=Z(e);bt(n.$$.fragment,O),O.forEach(L),r=it(k),s=K(k,"DIV",{class:!0});var I=Z(s);bt(o.$$.fragment,I),I.forEach(L),u=it(k),l=K(k,"DIV",{class:!0});var y=Z(l);bt(c.$$.fragment,y),y.forEach(L),f=it(k),_=K(k,"DIV",{class:!0});var v=Z(_);bt(m.$$.fragment,v),v.forEach(L),g=it(k),E=K(k,"DIV",{class:!0});var b=Z(E);bt(p.$$.fragment,b),b.forEach(L),w=it(k),S=K(k,"DIV",{class:!0});var R=Z(S);bt(C.$$.fragment,R),R.forEach(L),k.forEach(L),this.h()},h(){W(e,"class","h-screen flex justify-center items-center w-screen"),W(s,"class","h-screen flex justify-center items-center w-screen"),W(l,"class","h-screen flex justify-center items-center w-screen"),W(_,"class","h-screen flex justify-center items-center w-screen"),W(E,"class","h-screen flex justify-center items-center w-screen"),W(S,"class","h-screen flex justify-center items-center w-screen"),W(t,"class","module-page flex svelte-atttuc")},m(V,k){q(V,t,k),U(t,e),Rt(n,e,null),U(t,r),U(t,s),Rt(o,s,null),U(t,u),U(t,l),Rt(c,l,null),U(t,f),U(t,_),Rt(m,_,null),U(t,g),U(t,E),Rt(p,E,null),U(t,w),U(t,S),Rt(C,S,null),i[2](t),x=!0},p:m_,i(V){x||(X(n.$$.fragment,V),X(o.$$.fragment,V),X(c.$$.fragment,V),X(m.$$.fragment,V),X(p.$$.fragment,V),X(C.$$.fragment,V),x=!0)},o(V){tt(n.$$.fragment,V),tt(o.$$.fragment,V),tt(c.$$.fragment,V),tt(m.$$.fragment,V),tt(p.$$.fragment,V),tt(C.$$.fragment,V),x=!1},d(V){V&&L(t),Pt(n),Pt(o),Pt(c),Pt(m),Pt(p),Pt(C),i[2](null)}}}function sT(i,t,e){let n;Ye(i,Be,f=>e(1,n=f));const r=Ws(Ln,"stakeholders");let s;const o=f=>{const _=-100/s.children.length*f;$d.to(s,{xPercent:_,duration:1,ease:"power2.inOut"})},u=async()=>{try{const _=(await Ys(r)).docs.map(m=>({id:m.id,values:m.data().values,description:m.data().description}));pr.set(_)}catch(f){console.error("Error fetching document: ",f)}},l=()=>r0(r,f=>{const _=f.docs.map(m=>({id:m.id,values:m.data().values,description:m.data().description}));pr.set(_)},f=>{console.log(`Encountered error: ${f}`)});ka(()=>{u(),l()});function c(f){Va[f?"unshift":"push"](()=>{s=f,e(0,s)})}return i.$$.update=()=>{i.$$.dirty&3&&s&&o(n)},[s,n,c]}class fT extends Ge{constructor(t){super(),Ke(this,t,sT,iT,Ne,{})}}export{fT as component};
