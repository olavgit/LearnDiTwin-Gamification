import{s as ke,a as Xi,u as Yi,g as Ji,b as Zi,x as Gu,y as ha,z as C_,A as vh,e as xi,o as uo,B as S_,c as Xe,n as or,C as D_}from"../chunks/scheduler.CSqdmfRh.js";import{S as je,i as qe,e as U,c as z,a as J,d as N,l as G,g as j,m as K,n as Z,o as De,z as Hu,A as co,v as yt,w as vt,x as Tt,y as Et,r as wn,p as In,s as Q,f as X,q as Ke,B as Qe,H as V_,C as k_,D as se,E as ts,t as at,b as lt,h as L,j as Bt}from"../chunks/index.B8q1fGBa.js";import{w as Zr}from"../chunks/index.3zl3LmRe.js";function dn(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function x_(i,t){const e={},n={},r={$$scope:1};let s=i.length;for(;s--;){const o=i[s],l=t[s];if(l){for(const u in o)u in l||(n[u]=1);for(const u in l)r[u]||(e[u]=l[u],r[u]=1);i[s]=l}else for(const u in o)r[u]=1}for(const o in n)o in e||(e[o]=void 0);return e}const fr=Zr([]),Qa=Zr(null),nn=Zr(0);function Oi(i,t){return i*t.minimaal*t.effectPerWeek*t.rondesPerJaar}function Bs(i,t){return Oi(i,t)*t.kostenPerPersoonPerDrieMaanden}function Us(i,t){if(i===0)return 0;{const e=Number(t.minimaal)+(i-1)*(Number(t.maximaal)-Number(t.minimaal))/9;return Math.round(e)}}const zs=Zr([]);function O_(i){let t,e,n;const r=i[2].default,s=Xi(r,i,i[1],null);return{c(){t=U("div"),s&&s.c(),this.h()},l(o){t=z(o,"DIV",{class:!0});var l=J(t);s&&s.l(l),l.forEach(N),this.h()},h(){G(t,"class",e="p-14 bg-white shadow-lg flex flex-col "+i[0])},m(o,l){j(o,t,l),s&&s.m(t,null),n=!0},p(o,[l]){s&&s.p&&(!n||l&2)&&Yi(s,r,o,o[1],n?Zi(r,o[1],l,null):Ji(o[1]),null),(!n||l&1&&e!==(e="p-14 bg-white shadow-lg flex flex-col "+o[0]))&&G(t,"class",e)},i(o){n||(K(s,o),n=!0)},o(o){Z(s,o),n=!1},d(o){o&&N(t),s&&s.d(o)}}}function M_(i,t,e){let{$$slots:n={},$$scope:r}=t,{class:s=""}=t;return i.$$set=o=>{"class"in o&&e(0,s=o.class),"$$scope"in o&&e(1,r=o.$$scope)},[s,r,n]}class vr extends je{constructor(t){super(),qe(this,t,M_,O_,ke,{class:0})}}function N_(i){return i.filter(Boolean).join(" ")}function Go(i){let t,e,n,r,s;const o=i[6].default,l=Xi(o,i,i[5],null);let u=[{class:e="button-base "+i[3]},{href:i[1]},{target:i[2]},{role:"button"},{tabindex:"0"},i[4]],c={};for(let h=0;h<u.length;h+=1)c=ha(c,u[h]);return{c(){t=U(i[1]?"a":"button"),l&&l.c(),this.h()},l(h){t=z(h,((i[1]?"a":"button")||"null").toUpperCase(),{class:!0,href:!0,target:!0,role:!0,tabindex:!0});var d=J(t);l&&l.l(d),d.forEach(N),this.h()},h(){Hu(i[1]?"a":"button")(t,c)},m(h,d){j(h,t,d),l&&l.m(t,null),i[8](t),n=!0,r||(s=co(t,"click",i[7]),r=!0)},p(h,d){l&&l.p&&(!n||d&32)&&Yi(l,o,h,h[5],n?Zi(o,h[5],d,null):Ji(h[5]),null),Hu(h[1]?"a":"button")(t,c=x_(u,[(!n||d&8&&e!==(e="button-base "+h[3]))&&{class:e},(!n||d&2)&&{href:h[1]},(!n||d&4)&&{target:h[2]},{role:"button"},{tabindex:"0"},d&16&&h[4]]))},i(h){n||(K(l,h),n=!0)},o(h){Z(l,h),n=!1},d(h){h&&N(t),l&&l.d(h),i[8](null),r=!1,s()}}}function L_(i){let t=i[1]?"a":"button",e,n,r=(i[1]?"a":"button")&&Go(i);return{c(){r&&r.c(),e=De()},l(s){r&&r.l(s),e=De()},m(s,o){r&&r.m(s,o),j(s,e,o),n=!0},p(s,[o]){s[1],t?ke(t,s[1]?"a":"button")?(r.d(1),r=Go(s),t=s[1]?"a":"button",r.c(),r.m(e.parentNode,e)):r.p(s,o):(r=Go(s),t=s[1]?"a":"button",r.c(),r.m(e.parentNode,e))},i(s){n||(K(r,s),n=!0)},o(s){Z(r,s),n=!1},d(s){s&&N(e),r&&r.d(s)}}}function F_(i,t,e){const n=["el","href","target","class"];let r=Gu(t,n),{$$slots:s={},$$scope:o}=t,{el:l=void 0}=t,{href:u=void 0}=t,{target:c=void 0}=t,{class:h=""}=t;function d(p){vh.call(this,i,p)}function m(p){xi[p?"unshift":"push"](()=>{l=p,e(0,l)})}return i.$$set=p=>{t=ha(ha({},t),C_(p)),e(4,r=Gu(t,n)),"el"in p&&e(0,l=p.el),"href"in p&&e(1,u=p.href),"target"in p&&e(2,c=p.target),"class"in p&&e(3,h=p.class),"$$scope"in p&&e(5,o=p.$$scope)},[l,u,c,h,r,o,s,d,m]}class $_ extends je{constructor(t){super(),qe(this,t,F_,L_,ke,{el:0,href:1,target:2,class:3})}}function B_(i){let t;const e=i[5].default,n=Xi(e,i,i[7],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),t=!0},p(r,s){n&&n.p&&(!t||s&128)&&Yi(n,e,r,r[7],t?Zi(e,r[7],s,null):Ji(r[7]),null)},i(r){t||(K(n,r),t=!0)},o(r){Z(n,r),t=!1},d(r){n&&n.d(r)}}}function U_(i){let t,e;return t=new $_({props:{class:"button-main px-5 transition-colors duration-300 ease-in-out rounded-md py-3 "+i[2],href:i[0],target:i[1],$$slots:{default:[B_]},$$scope:{ctx:i}}}),t.$on("click",i[6]),{c(){yt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,r){Tt(t,n,r),e=!0},p(n,[r]){const s={};r&4&&(s.class="button-main px-5 transition-colors duration-300 ease-in-out rounded-md py-3 "+n[2]),r&1&&(s.href=n[0]),r&2&&(s.target=n[1]),r&128&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(K(t.$$.fragment,n),e=!0)},o(n){Z(t.$$.fragment,n),e=!1},d(n){Et(t,n)}}}function z_(i,t,e){let n,{$$slots:r={},$$scope:s}=t,{theme:o="blue"}=t,{href:l=void 0}=t,{target:u=void 0}=t,{class:c=""}=t;function h(d){vh.call(this,i,d)}return i.$$set=d=>{"theme"in d&&e(3,o=d.theme),"href"in d&&e(0,l=d.href),"target"in d&&e(1,u=d.target),"class"in d&&e(4,c=d.class),"$$scope"in d&&e(7,s=d.$$scope)},i.$$.update=()=>{i.$$.dirty&24&&e(2,n=N_([o==="blue"&&"bg-blue-500 hover:bg-blue-600 text-white",o==="red"&&"bg-red-500 hover:bg-red-600 text-white",o==="green"&&"bg-green-500 hover:bg-green-600 text-white",c]))},[l,u,n,o,c,r,h,s]}class Te extends je{constructor(t){super(),qe(this,t,z_,U_,ke,{theme:3,href:0,target:1,class:4})}}const j_=i=>i.replace(/-_$/g,"").replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z])([A-Z])(?=[a-z])/g,"$1-$2").toLowerCase(),q_=(i,t)=>{const n=i.getBoundingClientRect().width+2,r=window.getComputedStyle(i),s=parseInt(r.getPropertyValue("padding-left"),10),o=parseInt(r.getPropertyValue("padding-right"),10),l=s+o,u=n-l;return Math.round(Math.min(t,u||t))},G_=(i,t=null,e)=>{const n=i.getBoundingClientRect(),r=window.innerWidth||document.documentElement.clientWidth,s=window.innerHeight||document.documentElement.clientHeight;let o=n.bottom>0&&n.top<s&&n.right>0&&n.left<r;if(t){const l=t.getBoundingClientRect();return e==="top"||e==="bottom"?o=l.bottom+l.height<s&&l.top<s:o=l.right+l.width<r&&l.left<r,o}return o},Ho=(i,t,e,n)=>{if(!i||!t)return n;const r=t.getBoundingClientRect(),s=i.getBoundingClientRect(),o=window.getComputedStyle(i).position;window.getComputedStyle(i);let l=0,u=0,c=0,h=0,d=0,m=i;for(;m&&m!==document.body;){const g=window.getComputedStyle(m),w=g.position,V=m.getBoundingClientRect();w==="fixed"?(c+=V.top+window.scrollY,d+=V.left+window.scrollX):w==="sticky"?(h+=V.top,d+=V.left+window.scrollX):(w==="absolute"||w==="relative")&&(w==="absolute"&&(l-=parseFloat(g.top)||0,u-=parseFloat(g.left)||0),w==="relative"&&(l-=m.offsetTop,u-=m.offsetLeft,e==="bottom"&&(l+=s.height),e==="right"&&(u-=s.width),o==="absolute"&&e==="right"&&(u+=s.width)));const A=g.transform;if(A&&A!=="none"){const P=new DOMMatrix(A);w==="relative"||w==="absolute"?(l-=P.m42,u-=P.m41):(l-=m.offsetTop+P.m42,u-=m.offsetLeft+P.m41)}m=m.parentElement}let p=s.top+l+h-c,y=s.left+u-d;switch(e){case"top":n.top=p,n.left=y+s.width/2;break;case"bottom":n.top=p-r.height,n.left=y+s.width/2;break;case"left":n.left=y,n.top=p+s.height/2;break;case"right":n.left=y+s.width-r.width,n.top=p+s.height/2;break}return n.top+=window.scrollY,n.left+=window.scrollX,n},H_={left:"right",right:"left",top:"bottom",bottom:"top"};function K_(i){let t;const e=i[22].default,n=Xi(e,i,i[21],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),t=!0},p(r,s){n&&n.p&&(!t||s[0]&2097152)&&Yi(n,e,r,r[21],t?Zi(e,r[21],s,null):Ji(r[21]),null)},i(r){t||(K(n,r),t=!0)},o(r){Z(n,r),t=!1},d(r){n&&n.d(r)}}}function W_(i){let t,e,n,r,s;const o=i[22].default,l=Xi(o,i,i[21],null);let u=!i[12]&&Ku(i);return{c(){t=U("span"),l&&l.c(),e=Q(),n=U("div"),u&&u.c(),this.h()},l(c){t=z(c,"SPAN",{class:!0});var h=J(t);l&&l.l(h),h.forEach(N),e=X(c),n=z(c,"DIV",{class:!0,style:!0});var d=J(n);u&&u.l(d),d.forEach(N),this.h()},h(){G(t,"class","tooltip-container"),G(n,"class",r="tooltip animation-"+i[9]+" "+i[0]+" "+i[4]+" svelte-1xktviv"),Ke(n,"bottom","auto"),Ke(n,"right","auto"),Ke(n,"left",i[11].left+"px"),Ke(n,"min-width",i[8]+"px"),Ke(n,"max-width",i[3]+"px"),Ke(n,"text-align",i[2]),Ke(n,"top",i[11].top+"px"),Qe(n,"arrowless",!i[5]),Qe(n,"show",i[10])},m(c,h){j(c,t,h),l&&l.m(t,null),i[23](t),j(c,e,h),j(c,n,h),u&&u.m(n,null),i[24](n),s=!0},p(c,h){l&&l.p&&(!s||h[0]&2097152)&&Yi(l,o,c,c[21],s?Zi(o,c[21],h,null):Ji(c[21]),null),c[12]?u&&(u.d(1),u=null):u?u.p(c,h):(u=Ku(c),u.c(),u.m(n,null)),(!s||h[0]&529&&r!==(r="tooltip animation-"+c[9]+" "+c[0]+" "+c[4]+" svelte-1xktviv"))&&G(n,"class",r),(!s||h[0]&2048)&&Ke(n,"left",c[11].left+"px"),(!s||h[0]&256)&&Ke(n,"min-width",c[8]+"px"),(!s||h[0]&8)&&Ke(n,"max-width",c[3]+"px"),(!s||h[0]&4)&&Ke(n,"text-align",c[2]),(!s||h[0]&2048)&&Ke(n,"top",c[11].top+"px"),(!s||h[0]&561)&&Qe(n,"arrowless",!c[5]),(!s||h[0]&1553)&&Qe(n,"show",c[10])},i(c){s||(K(l,c),s=!0)},o(c){Z(l,c),s=!1},d(c){c&&(N(t),N(e),N(n)),l&&l.d(c),i[23](null),u&&u.d(),i[24](null)}}}function Ku(i){let t,e;return{c(){t=new V_(!1),e=De(),this.h()},l(n){t=k_(n,!1),e=De(),this.h()},h(){t.a=e},m(n,r){t.m(i[1],n,r),j(n,e,r)},p(n,r){r[0]&2&&t.p(n[1])},d(n){n&&(N(e),t.d())}}}function Q_(i){let t,e,n,r,s,o;const l=[W_,K_],u=[];function c(h,d){return h[1]?0:1}return t=c(i),e=u[t]=l[t](i),{c(){e.c(),n=De()},l(h){e.l(h),n=De()},m(h,d){u[t].m(h,d),j(h,n,d),r=!0,s||(o=co(window,"resize",i[13]),s=!0)},p(h,d){let m=t;t=c(h),t===m?u[t].p(h,d):(wn(),Z(u[m],1,1,()=>{u[m]=null}),In(),e=u[t],e?e.p(h,d):(e=u[t]=l[t](h),e.c()),K(e,1),e.m(n.parentNode,n))},i(h){r||(K(e),r=!0)},o(h){Z(e),r=!1},d(h){h&&N(n),u[t].d(h),s=!1,o()}}}function X_(i,t,e){let n,{$$slots:r={},$$scope:s}=t,{action:o="hover"}=t,{content:l=""}=t,{align:u="left"}=t,{position:c="top"}=t,{maxWidth:h=200}=t,{style:d=null}=t,{theme:m=""}=t,{animation:p=""}=t,{hideOnClickOutside:y=!1}=t,{delay:g=200}=t,{arrow:w=!0}=t,{autoPosition:V=!1}=t,{show:A=!1}=t,P=null,D=null,k=0,O=null,I=c,T=null,v=null,R=!1,C={bottom:0,top:0,right:0,left:0};const S=({target:q})=>{y&&P!==q&&D!==q&&!(P!=null&&P.parentNode.contains(q))&&!(D!=null&&D.contains(q))&&rt()},b=()=>{R?rt():st()},st=()=>{const q=p?g:0;V&&!G_(P,D,c)&&e(0,c=H_[c]),e(11,C=Ho(P,D,c,C)),p&&e(9,T=p),v=setTimeout(()=>e(10,R=!0),q)},rt=()=>{e(10,R=!1),e(0,c=I),e(9,T=null),v&&(clearTimeout(v),v=null)},ht=()=>{P!==null&&(ut(),o==="click"&&(P.addEventListener("click",b),y&&document.addEventListener("click",S,{passive:!0,capture:!0})),o==="hover"&&(P.addEventListener("mouseenter",st),P.addEventListener("mouseleave",rt)))},ut=()=>{y&&document.removeEventListener("click",S),P!==null&&(P.removeEventListener("click",b),P.removeEventListener("mouseenter",st),P.removeEventListener("mouseleave",rt))};uo(()=>{if(ht(),Ho(),D!==null&&(n&&!O&&(O=new l.component({target:D,props:l.props})),e(8,k=q_(D,h)),d&&typeof d=="object"))for(let q in d){const H=j_(q),tt=d[q];D.style.setProperty(`--tooltip-${H}`,tt)}}),S_(()=>{O&&(O.$destroy(),O=null),ut()});const dt=()=>{R&&e(11,C=Ho(P,D,c,C))};function xt(q){xi[q?"unshift":"push"](()=>{P=q,e(7,P)})}function zt(q){xi[q?"unshift":"push"](()=>{D=q,e(6,D)})}return i.$$set=q=>{"action"in q&&e(14,o=q.action),"content"in q&&e(1,l=q.content),"align"in q&&e(2,u=q.align),"position"in q&&e(0,c=q.position),"maxWidth"in q&&e(3,h=q.maxWidth),"style"in q&&e(15,d=q.style),"theme"in q&&e(4,m=q.theme),"animation"in q&&e(16,p=q.animation),"hideOnClickOutside"in q&&e(17,y=q.hideOnClickOutside),"delay"in q&&e(18,g=q.delay),"arrow"in q&&e(5,w=q.arrow),"autoPosition"in q&&e(19,V=q.autoPosition),"show"in q&&e(20,A=q.show),"$$scope"in q&&e(21,s=q.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&2&&e(12,n=typeof l=="object"),i.$$.dirty[0]&16384&&ht(),i.$$.dirty[0]&1048640&&setTimeout(D&&A?st:rt,0)},[c,l,u,h,m,w,D,P,k,T,R,C,n,dt,o,d,p,y,g,V,A,s,r,xt,zt]}class Y_ extends je{constructor(t){super(),qe(this,t,X_,Q_,ke,{action:14,content:1,align:2,position:0,maxWidth:3,style:15,theme:4,animation:16,hideOnClickOutside:17,delay:18,arrow:5,autoPosition:19,show:20},null,[-1,-1])}}function Wu(i,t,e){const n=i.slice();return n[4]=t[e],n}function Qu(i,t,e){const n=i.slice();return n[7]=t[e],n[9]=e,n}function Xu(i){let t,e=i[1][i[9]].naam+"",n,r,s=i[7]+"",o;return{c(){t=U("p"),n=at(e),r=at(": "),o=at(s),this.h()},l(l){t=z(l,"P",{class:!0});var u=J(t);n=lt(u,e),r=lt(u,": "),o=lt(u,s),u.forEach(N),this.h()},h(){G(t,"class","capitalize")},m(l,u){j(l,t,u),L(t,n),L(t,r),L(t,o)},p(l,u){u&2&&e!==(e=l[1][l[9]].naam+"")&&Bt(n,e),u&1&&s!==(s=l[7]+"")&&Bt(o,s)},d(l){l&&N(t)}}}function J_(i){let t,e="Sentiment:";return{c(){t=U("u"),t.textContent=e},l(n){t=z(n,"U",{"data-svelte-h":!0}),se(t)!=="svelte-1epx1kf"&&(t.textContent=e)},m(n,r){j(n,t,r)},p:or,d(n){n&&N(t)}}}function Z_(i){let t;return{c(){t=at(":)")},l(e){t=lt(e,":)")},m(e,n){j(e,t,n)},d(e){e&&N(t)}}}function tm(i){let t;return{c(){t=at(":|")},l(e){t=lt(e,":|")},m(e,n){j(e,t,n)},d(e){e&&N(t)}}}function em(i){let t;return{c(){t=at(":(")},l(e){t=lt(e,":(")},m(e,n){j(e,t,n)},d(e){e&&N(t)}}}function Yu(i){let t,e,n=i[4].id+"",r,s,o,l,u,c,h,d,m,p=dn(i[4].values),y=[];for(let A=0;A<p.length;A+=1)y[A]=Xu(Qu(i,p,A));l=new Y_({props:{content:"Het sentiment geeft aan hoe een vertegenwoordiger zich voelt over de gemaakte keuzes.",action:"click",$$slots:{default:[J_]},$$scope:{ctx:i}}});function g(A,P){return P&1&&(c=null),P&1&&(h=null),c==null&&(c=A[2](A[4].values)>Rs||A[2](A[4].values)<-Rs),c?em:(h==null&&(h=A[2](A[4].values)===Rs||A[2](A[4].values)===-Rs),h?tm:Z_)}let w=g(i,-1),V=w(i);return{c(){t=U("div"),e=U("p"),r=at(n),s=Q();for(let A=0;A<y.length;A+=1)y[A].c();o=Q(),yt(l.$$.fragment),u=Q(),V.c(),d=Q(),this.h()},l(A){t=z(A,"DIV",{class:!0});var P=J(t);e=z(P,"P",{class:!0});var D=J(e);r=lt(D,n),D.forEach(N),s=X(P);for(let k=0;k<y.length;k+=1)y[k].l(P);o=X(P),vt(l.$$.fragment,P),u=X(P),V.l(P),d=X(P),P.forEach(N),this.h()},h(){G(e,"class","font-bold"),G(t,"class","bg-yellow-50")},m(A,P){j(A,t,P),L(t,e),L(e,r),L(t,s);for(let D=0;D<y.length;D+=1)y[D]&&y[D].m(t,null);L(t,o),Tt(l,t,null),L(t,u),V.m(t,null),L(t,d),m=!0},p(A,P){if((!m||P&1)&&n!==(n=A[4].id+"")&&Bt(r,n),P&3){p=dn(A[4].values);let k;for(k=0;k<p.length;k+=1){const O=Qu(A,p,k);y[k]?y[k].p(O,P):(y[k]=Xu(O),y[k].c(),y[k].m(t,o))}for(;k<y.length;k+=1)y[k].d(1);y.length=p.length}const D={};P&1024&&(D.$$scope={dirty:P,ctx:A}),l.$set(D),w!==(w=g(A,P))&&(V.d(1),V=w(A),V&&(V.c(),V.m(t,d)))},i(A){m||(K(l.$$.fragment,A),m=!0)},o(A){Z(l.$$.fragment,A),m=!1},d(A){A&&N(t),ts(y,A),Et(l),V.d()}}}function nm(i){let t,e="Resultaten per team",n,r,s,o=dn(i[0]),l=[];for(let c=0;c<o.length;c+=1)l[c]=Yu(Wu(i,o,c));const u=c=>Z(l[c],1,1,()=>{l[c]=null});return{c(){t=U("p"),t.textContent=e,n=Q(),r=U("div");for(let c=0;c<l.length;c+=1)l[c].c();this.h()},l(c){t=z(c,"P",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-boq8th"&&(t.textContent=e),n=X(c),r=z(c,"DIV",{class:!0});var h=J(r);for(let d=0;d<l.length;d+=1)l[d].l(h);h.forEach(N),this.h()},h(){G(t,"class","font-bold text-xl mb-2"),G(r,"class","grid grid-cols-2 gap-4")},m(c,h){j(c,t,h),j(c,n,h),j(c,r,h);for(let d=0;d<l.length;d+=1)l[d]&&l[d].m(r,null);s=!0},p(c,h){if(h&7){o=dn(c[0]);let d;for(d=0;d<o.length;d+=1){const m=Wu(c,o,d);l[d]?(l[d].p(m,h),K(l[d],1)):(l[d]=Yu(m),l[d].c(),K(l[d],1),l[d].m(r,null))}for(wn(),d=o.length;d<l.length;d+=1)u(d);In()}},i(c){if(!s){for(let h=0;h<o.length;h+=1)K(l[h]);s=!0}},o(c){l=l.filter(Boolean);for(let h=0;h<l.length;h+=1)Z(l[h]);s=!1},d(c){c&&(N(t),N(n),N(r)),ts(l,c)}}}function rm(i){let t,e;return t=new vr({props:{$$slots:{default:[nm]},$$scope:{ctx:i}}}),{c(){yt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,r){Tt(t,n,r),e=!0},p(n,[r]){const s={};r&1027&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(K(t.$$.fragment,n),e=!0)},o(n){Z(t.$$.fragment,n),e=!1},d(n){Et(t,n)}}}const Rs=1;function im(i,t,e){let n,r;Xe(i,fr,l=>e(0,n=l)),Xe(i,zs,l=>e(1,r=l));let{averages:s=[]}=t;const o=l=>{console.log(l);const u=[];for(let d=0;d<s.length;d++){const m=s[d]-l[d];u.push(m)}const h=u.reduce((d,m)=>d+m,0)/u.length;return console.log(h),console.log(u),h};return i.$$set=l=>{"averages"in l&&e(3,s=l.averages)},[n,r,o,s]}class sm extends je{constructor(t){super(),qe(this,t,im,rm,ke,{averages:3})}}function Ju(i,t,e){const n=i.slice();return n[13]=t[e],n[15]=e,n}function Zu(i){let t,e,n,r=i[0][i[15]].naam+"",s,o,l,u=i[13].toFixed(2)+"",c;return{c(){t=U("tr"),e=U("td"),n=at("Gemiddelde inzet "),s=at(r),o=Q(),l=U("td"),c=at(u),this.h()},l(h){t=z(h,"TR",{});var d=J(t);e=z(d,"TD",{class:!0});var m=J(e);n=lt(m,"Gemiddelde inzet "),s=lt(m,r),m.forEach(N),o=X(d),l=z(d,"TD",{});var p=J(l);c=lt(p,u),p.forEach(N),d.forEach(N),this.h()},h(){G(e,"class","pr-4")},m(h,d){j(h,t,d),L(t,e),L(e,n),L(e,s),L(t,o),L(t,l),L(l,c)},p(h,d){d&1&&r!==(r=h[0][h[15]].naam+"")&&Bt(s,r),d&4&&u!==(u=h[13].toFixed(2)+"")&&Bt(c,u)},d(h){h&&N(t)}}}function om(i){let t;return{c(){t=at("Terug")},l(e){t=lt(e,"Terug")},m(e,n){j(e,t,n)},d(e){e&&N(t)}}}function am(i){let t;return{c(){t=at("Resultaten per team")},l(e){t=lt(e,"Resultaten per team")},m(e,n){j(e,t,n)},d(e){e&&N(t)}}}function lm(i){let t,e="Resultaat",n,r,s,o='<td class="font-bold pr-4">Maatregel</td> <td class="font-bold">Schaal</td>',l,u,c,h,d="Geholpen mensen per jaar",m,p,y,g,w,V,A="Kosten per jaar",P,D,k=i[4].toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"",O,I,T,v,R="Aantal vrijwilligers per jaar",C,S,b,st,rt,ht,ut,dt,xt,zt=dn(i[2]),q=[];for(let H=0;H<zt.length;H+=1)q[H]=Zu(Ju(i,zt,H));return ht=new Te({props:{theme:"red",$$slots:{default:[om]},$$scope:{ctx:i}}}),ht.$on("click",i[7]),dt=new Te({props:{$$slots:{default:[am]},$$scope:{ctx:i}}}),dt.$on("click",i[8]),{c(){t=U("div"),t.textContent=e,n=Q(),r=U("table"),s=U("tr"),s.innerHTML=o,l=Q();for(let H=0;H<q.length;H+=1)q[H].c();u=Q(),c=U("tr"),h=U("td"),h.textContent=d,m=Q(),p=U("td"),y=at(i[3]),g=Q(),w=U("tr"),V=U("td"),V.textContent=A,P=Q(),D=U("td"),O=at(k),I=Q(),T=U("tr"),v=U("td"),v.textContent=R,C=Q(),S=U("td"),b=at(i[5]),st=Q(),rt=U("div"),yt(ht.$$.fragment),ut=Q(),yt(dt.$$.fragment),this.h()},l(H){t=z(H,"DIV",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-17bvcbp"&&(t.textContent=e),n=X(H),r=z(H,"TABLE",{class:!0});var tt=J(r);s=z(tt,"TR",{"data-svelte-h":!0}),se(s)!=="svelte-2gnwuf"&&(s.innerHTML=o),l=X(tt);for(let Ge=0;Ge<q.length;Ge+=1)q[Ge].l(tt);u=X(tt),c=z(tt,"TR",{});var It=J(c);h=z(It,"TD",{class:!0,"data-svelte-h":!0}),se(h)!=="svelte-51zn7d"&&(h.textContent=d),m=X(It),p=z(It,"TD",{});var Ot=J(p);y=lt(Ot,i[3]),Ot.forEach(N),It.forEach(N),g=X(tt),w=z(tt,"TR",{});var Mt=J(w);V=z(Mt,"TD",{class:!0,"data-svelte-h":!0}),se(V)!=="svelte-tchboe"&&(V.textContent=A),P=X(Mt),D=z(Mt,"TD",{});var ge=J(D);O=lt(ge,k),ge.forEach(N),Mt.forEach(N),I=X(tt),T=z(tt,"TR",{});var tn=J(T);v=z(tn,"TD",{class:!0,"data-svelte-h":!0}),se(v)!=="svelte-22n87w"&&(v.textContent=R),C=X(tn),S=z(tn,"TD",{});var we=J(S);b=lt(we,i[5]),we.forEach(N),tn.forEach(N),tt.forEach(N),st=X(H),rt=z(H,"DIV",{class:!0});var Xt=J(rt);vt(ht.$$.fragment,Xt),ut=X(Xt),vt(dt.$$.fragment,Xt),Xt.forEach(N),this.h()},h(){G(t,"class","font-bold text-2xl mb-4"),G(h,"class","font-bold"),G(V,"class","font-bold pr-4"),G(v,"class","font-bold pr-4"),G(r,"class","mb-4"),G(rt,"class","flex gap-x-2 justify-center")},m(H,tt){j(H,t,tt),j(H,n,tt),j(H,r,tt),L(r,s),L(r,l);for(let It=0;It<q.length;It+=1)q[It]&&q[It].m(r,null);L(r,u),L(r,c),L(c,h),L(c,m),L(c,p),L(p,y),L(r,g),L(r,w),L(w,V),L(w,P),L(w,D),L(D,O),L(r,I),L(r,T),L(T,v),L(T,C),L(T,S),L(S,b),j(H,st,tt),j(H,rt,tt),Tt(ht,rt,null),L(rt,ut),Tt(dt,rt,null),xt=!0},p(H,tt){if(tt&5){zt=dn(H[2]);let Mt;for(Mt=0;Mt<zt.length;Mt+=1){const ge=Ju(H,zt,Mt);q[Mt]?q[Mt].p(ge,tt):(q[Mt]=Zu(ge),q[Mt].c(),q[Mt].m(r,u))}for(;Mt<q.length;Mt+=1)q[Mt].d(1);q.length=zt.length}(!xt||tt&8)&&Bt(y,H[3]),(!xt||tt&16)&&k!==(k=H[4].toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"")&&Bt(O,k),(!xt||tt&32)&&Bt(b,H[5]);const It={};tt&65536&&(It.$$scope={dirty:tt,ctx:H}),ht.$set(It);const Ot={};tt&65536&&(Ot.$$scope={dirty:tt,ctx:H}),dt.$set(Ot)},i(H){xt||(K(ht.$$.fragment,H),K(dt.$$.fragment,H),xt=!0)},o(H){Z(ht.$$.fragment,H),Z(dt.$$.fragment,H),xt=!1},d(H){H&&(N(t),N(n),N(r),N(st),N(rt)),ts(q,H),Et(ht),Et(dt)}}}function tc(i){let t,e;return t=new sm({props:{averages:i[2]}}),{c(){yt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,r){Tt(t,n,r),e=!0},p(n,r){const s={};r&4&&(s.averages=n[2]),t.$set(s)},i(n){e||(K(t.$$.fragment,n),e=!0)},o(n){Z(t.$$.fragment,n),e=!1},d(n){Et(t,n)}}}function um(i){let t,e,n,r;t=new vr({props:{class:"items-start",$$slots:{default:[lm]},$$scope:{ctx:i}}});let s=i[1]&&tc(i);return{c(){yt(t.$$.fragment),e=Q(),s&&s.c(),n=De()},l(o){vt(t.$$.fragment,o),e=X(o),s&&s.l(o),n=De()},m(o,l){Tt(t,o,l),j(o,e,l),s&&s.m(o,l),j(o,n,l),r=!0},p(o,[l]){const u={};l&65599&&(u.$$scope={dirty:l,ctx:o}),t.$set(u),o[1]?s?(s.p(o,l),l&2&&K(s,1)):(s=tc(o),s.c(),K(s,1),s.m(n.parentNode,n)):s&&(wn(),Z(s,1,1,()=>{s=null}),In())},i(o){r||(K(t.$$.fragment,o),K(s),r=!0)},o(o){Z(t.$$.fragment,o),Z(s),r=!1},d(o){o&&(N(e),N(n)),Et(t,o),s&&s.d(o)}}}function cm(i,t,e){let n,r;Xe(i,fr,w=>e(6,n=w)),Xe(i,zs,w=>e(0,r=w));let s=!1,o=[],l=0,u=0,c=0,h=[];const d=()=>{let w=[],V=n.length;n.forEach(A=>{A.values.forEach((P,D)=>{w[D]||(w[D]=0),w[D]+=P})}),e(2,o=w.map(A=>A/V))},m=()=>{e(3,l=r.reduce((w,V,A)=>w+Oi(o[A]??0,V),0)),e(4,u=r.reduce((w,V,A)=>w+Bs(o[A]??0,V),0)),e(5,c=r.reduce((w,V,A)=>w+Us(o[A]??0,V),0))},p=()=>{h=[],n.forEach(w=>{h.push(w)})},y=()=>{nn.set(0)},g=()=>e(1,s=!s);return i.$$.update=()=>{i.$$.dirty&65&&r.length&&n.length&&(d(),m(),p())},[r,s,o,l,u,c,n,y,g]}class hm extends je{constructor(t){super(),qe(this,t,cm,um,ke,{})}}const fm=""+new URL("../assets/bob-logo.ugDKnZ_j.png",import.meta.url).href;var ec={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th=function(i){const t=[];let e=0;for(let n=0;n<i.length;n++){let r=i.charCodeAt(n);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(i.charCodeAt(++n)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},dm=function(i){const t=[];let e=0,n=0;for(;e<i.length;){const r=i[e++];if(r<128)t[n++]=String.fromCharCode(r);else if(r>191&&r<224){const s=i[e++];t[n++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=i[e++],o=i[e++],l=i[e++],u=((r&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;t[n++]=String.fromCharCode(55296+(u>>10)),t[n++]=String.fromCharCode(56320+(u&1023))}else{const s=i[e++],o=i[e++];t[n++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},Eh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<i.length;r+=3){const s=i[r],o=r+1<i.length,l=o?i[r+1]:0,u=r+2<i.length,c=u?i[r+2]:0,h=s>>2,d=(s&3)<<4|l>>4;let m=(l&15)<<2|c>>6,p=c&63;u||(p=64,o||(m=64)),n.push(e[h],e[d],e[m],e[p])}return n.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(Th(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):dm(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<i.length;){const s=e[i.charAt(r++)],l=r<i.length?e[i.charAt(r)]:0;++r;const c=r<i.length?e[i.charAt(r)]:64;++r;const d=r<i.length?e[i.charAt(r)]:64;if(++r,s==null||l==null||c==null||d==null)throw new _m;const m=s<<2|l>>4;if(n.push(m),c!==64){const p=l<<4&240|c>>2;if(n.push(p),d!==64){const y=c<<6&192|d;n.push(y)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class _m extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mm=function(i){const t=Th(i);return Eh.encodeByteArray(t,!0)},js=function(i){return mm(i).replace(/\./g,"")},pm=function(i){try{return Eh.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym=()=>gm().__FIREBASE_DEFAULTS__,vm=()=>{if(typeof process>"u"||typeof ec>"u")return;const i=ec.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Tm=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&pm(i[1]);return t&&JSON.parse(t)},Xa=()=>{try{return ym()||vm()||Tm()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Em=i=>{var t,e;return(e=(t=Xa())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[i]},wm=i=>{const t=Em(i);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),n]:[t.substring(0,e),n]},wh=()=>{var i;return(i=Xa())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},n=t||"demo-project",r=i.iat||0,s=i.sub||i.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},i);return[js(JSON.stringify(e)),js(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Rm(){var i;const t=(i=Xa())===null||i===void 0?void 0:i.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Pm(){return!Rm()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Cm(){try{return typeof indexedDB=="object"}catch{return!1}}function Sm(){return new Promise((i,t)=>{try{let e=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(n),i(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm="FirebaseError";class ti extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name=Dm,Object.setPrototypeOf(this,ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ih.prototype.create)}}class Ih{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?Vm(s,n):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new ti(r,l,n)}}function Vm(i,t){return i.replace(km,(e,n)=>{const r=t[n];return r!=null?String(r):`<${n}?>`})}const km=/\{\$([^}]+)}/g;function fa(i,t){if(i===t)return!0;const e=Object.keys(i),n=Object.keys(t);for(const r of e){if(!n.includes(r))return!1;const s=i[r],o=t[r];if(nc(s)&&nc(o)){if(!fa(s,o))return!1}else if(s!==o)return!1}for(const r of n)if(!e.includes(r))return!1;return!0}function nc(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(i){return i&&i._delegate?i._delegate:i}class Mi{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const n=new Im;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Mm(t))try{this.getOrInitializeService({instanceIdentifier:nr})}catch{}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const s=this.getOrInitializeService({instanceIdentifier:r});n.resolve(s)}catch{}}}}clearInstance(t=nr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=nr){return this.instances.has(t)}getOptions(t=nr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&o.resolve(r)}return r}onInit(t,e){var n;const r=this.normalizeInstanceIdentifier(e),s=(n=this.onInitCallbacks.get(r))!==null&&n!==void 0?n:new Set;s.add(t),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Om(t),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=nr){return this.component?this.component.multipleInstances?t:nr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Om(i){return i===nr?void 0:i}function Mm(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new xm(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(pt||(pt={}));const Lm={debug:pt.DEBUG,verbose:pt.VERBOSE,info:pt.INFO,warn:pt.WARN,error:pt.ERROR,silent:pt.SILENT},Fm=pt.INFO,$m={[pt.DEBUG]:"log",[pt.VERBOSE]:"log",[pt.INFO]:"info",[pt.WARN]:"warn",[pt.ERROR]:"error"},Bm=(i,t,...e)=>{if(t<i.logLevel)return;const n=new Date().toISOString(),r=$m[t];if(r)console[r](`[${n}]  ${i.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Ah{constructor(t){this.name=t,this._logLevel=Fm,this._logHandler=Bm,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in pt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Lm[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,pt.DEBUG,...t),this._logHandler(this,pt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,pt.VERBOSE,...t),this._logHandler(this,pt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,pt.INFO,...t),this._logHandler(this,pt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,pt.WARN,...t),this._logHandler(this,pt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,pt.ERROR,...t),this._logHandler(this,pt.ERROR,...t)}}const Um=(i,t)=>t.some(e=>i instanceof e);let rc,ic;function zm(){return rc||(rc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jm(){return ic||(ic=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bh=new WeakMap,da=new WeakMap,Rh=new WeakMap,Ko=new WeakMap,Ya=new WeakMap;function qm(i){const t=new Promise((e,n)=>{const r=()=>{i.removeEventListener("success",s),i.removeEventListener("error",o)},s=()=>{e(Ln(i.result)),r()},o=()=>{n(i.error),r()};i.addEventListener("success",s),i.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&bh.set(e,i)}).catch(()=>{}),Ya.set(t,i),t}function Gm(i){if(da.has(i))return;const t=new Promise((e,n)=>{const r=()=>{i.removeEventListener("complete",s),i.removeEventListener("error",o),i.removeEventListener("abort",o)},s=()=>{e(),r()},o=()=>{n(i.error||new DOMException("AbortError","AbortError")),r()};i.addEventListener("complete",s),i.addEventListener("error",o),i.addEventListener("abort",o)});da.set(i,t)}let _a={get(i,t,e){if(i instanceof IDBTransaction){if(t==="done")return da.get(i);if(t==="objectStoreNames")return i.objectStoreNames||Rh.get(i);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Ln(i[t])},set(i,t,e){return i[t]=e,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function Hm(i){_a=i(_a)}function Km(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const n=i.call(Wo(this),t,...e);return Rh.set(n,t.sort?t.sort():[t]),Ln(n)}:jm().includes(i)?function(...t){return i.apply(Wo(this),t),Ln(bh.get(this))}:function(...t){return Ln(i.apply(Wo(this),t))}}function Wm(i){return typeof i=="function"?Km(i):(i instanceof IDBTransaction&&Gm(i),Um(i,zm())?new Proxy(i,_a):i)}function Ln(i){if(i instanceof IDBRequest)return qm(i);if(Ko.has(i))return Ko.get(i);const t=Wm(i);return t!==i&&(Ko.set(i,t),Ya.set(t,i)),t}const Wo=i=>Ya.get(i);function Qm(i,t,{blocked:e,upgrade:n,blocking:r,terminated:s}={}){const o=indexedDB.open(i,t),l=Ln(o);return n&&o.addEventListener("upgradeneeded",u=>{n(Ln(o.result),u.oldVersion,u.newVersion,Ln(o.transaction),u)}),e&&o.addEventListener("blocked",u=>e(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const Xm=["get","getKey","getAll","getAllKeys","count"],Ym=["put","add","delete","clear"],Qo=new Map;function sc(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(Qo.get(t))return Qo.get(t);const e=t.replace(/FromIndex$/,""),n=t!==e,r=Ym.includes(e);if(!(e in(n?IDBIndex:IDBObjectStore).prototype)||!(r||Xm.includes(e)))return;const s=async function(o,...l){const u=this.transaction(o,r?"readwrite":"readonly");let c=u.store;return n&&(c=c.index(l.shift())),(await Promise.all([c[e](...l),r&&u.done]))[0]};return Qo.set(t,s),s}Hm(i=>({...i,get:(t,e,n)=>sc(t,e)||i.get(t,e,n),has:(t,e)=>!!sc(t,e)||i.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(Zm(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function Zm(i){const t=i.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ma="@firebase/app",oc="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr=new Ah("@firebase/app"),tp="@firebase/app-compat",ep="@firebase/analytics-compat",np="@firebase/analytics",rp="@firebase/app-check-compat",ip="@firebase/app-check",sp="@firebase/auth",op="@firebase/auth-compat",ap="@firebase/database",lp="@firebase/database-compat",up="@firebase/functions",cp="@firebase/functions-compat",hp="@firebase/installations",fp="@firebase/installations-compat",dp="@firebase/messaging",_p="@firebase/messaging-compat",mp="@firebase/performance",pp="@firebase/performance-compat",gp="@firebase/remote-config",yp="@firebase/remote-config-compat",vp="@firebase/storage",Tp="@firebase/storage-compat",Ep="@firebase/firestore",wp="@firebase/vertexai-preview",Ip="@firebase/firestore-compat",Ap="firebase",bp="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="[DEFAULT]",Rp={[ma]:"fire-core",[tp]:"fire-core-compat",[np]:"fire-analytics",[ep]:"fire-analytics-compat",[ip]:"fire-app-check",[rp]:"fire-app-check-compat",[sp]:"fire-auth",[op]:"fire-auth-compat",[ap]:"fire-rtdb",[lp]:"fire-rtdb-compat",[up]:"fire-fn",[cp]:"fire-fn-compat",[hp]:"fire-iid",[fp]:"fire-iid-compat",[dp]:"fire-fcm",[_p]:"fire-fcm-compat",[mp]:"fire-perf",[pp]:"fire-perf-compat",[gp]:"fire-rc",[yp]:"fire-rc-compat",[vp]:"fire-gcs",[Tp]:"fire-gcs-compat",[Ep]:"fire-fst",[Ip]:"fire-fst-compat",[wp]:"fire-vertex","fire-js":"fire-js",[Ap]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=new Map,Pp=new Map,ga=new Map;function ac(i,t){try{i.container.addComponent(t)}catch(e){dr.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,e)}}function Gs(i){const t=i.name;if(ga.has(t))return dr.debug(`There were multiple attempts to register component ${t}.`),!1;ga.set(t,i);for(const e of qs.values())ac(e,i);for(const e of Pp.values())ac(e,i);return!0}function Cp(i,t){const e=i.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),i.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fn=new Ih("app","Firebase",Sp);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Mi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Fn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp=bp;function Ph(i,t={}){let e=i;typeof t!="object"&&(t={name:t});const n=Object.assign({name:pa,automaticDataCollectionEnabled:!1},t),r=n.name;if(typeof r!="string"||!r)throw Fn.create("bad-app-name",{appName:String(r)});if(e||(e=wh()),!e)throw Fn.create("no-options");const s=qs.get(r);if(s){if(fa(e,s.options)&&fa(n,s.config))return s;throw Fn.create("duplicate-app",{appName:r})}const o=new Nm(r);for(const u of ga.values())o.addComponent(u);const l=new Dp(e,n,o);return qs.set(r,l),l}function kp(i=pa){const t=qs.get(i);if(!t&&i===pa&&wh())return Ph();if(!t)throw Fn.create("no-app",{appName:i});return t}function Mr(i,t,e){var n;let r=(n=Rp[i])!==null&&n!==void 0?n:i;e&&(r+=`-${e}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const l=[`Unable to register library "${r}" with version "${t}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),dr.warn(l.join(" "));return}Gs(new Mi(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp="firebase-heartbeat-database",Op=1,Ni="firebase-heartbeat-store";let Xo=null;function Ch(){return Xo||(Xo=Qm(xp,Op,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(Ni)}catch(e){console.warn(e)}}}}).catch(i=>{throw Fn.create("idb-open",{originalErrorMessage:i.message})})),Xo}async function Mp(i){try{const e=(await Ch()).transaction(Ni),n=await e.objectStore(Ni).get(Sh(i));return await e.done,n}catch(t){if(t instanceof ti)dr.warn(t.message);else{const e=Fn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});dr.warn(e.message)}}}async function lc(i,t){try{const n=(await Ch()).transaction(Ni,"readwrite");await n.objectStore(Ni).put(t,Sh(i)),await n.done}catch(e){if(e instanceof ti)dr.warn(e.message);else{const n=Fn.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});dr.warn(n.message)}}}function Sh(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np=1024,Lp=30*24*60*60*1e3;class Fp{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Bp(e),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,e;const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=uc();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=Lp}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=uc(),{heartbeatsToSend:n,unsentEntries:r}=$p(this._heartbeatsCache.heartbeats),s=js(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function uc(){return new Date().toISOString().substring(0,10)}function $p(i,t=Np){const e=[];let n=i.slice();for(const r of i){const s=e.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),cc(e)>t){s.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),cc(e)>t){e.pop();break}n=n.slice(1)}return{heartbeatsToSend:e,unsentEntries:n}}class Bp{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Cm()?Sm().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await Mp(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return lc(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return lc(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function cc(i){return js(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(i){Gs(new Mi("platform-logger",t=>new Jm(t),"PRIVATE")),Gs(new Mi("heartbeat",t=>new Fp(t),"PRIVATE")),Mr(ma,oc,i),Mr(ma,oc,"esm2017"),Mr("fire-js","")}Up("");var zp="firebase",jp="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mr(zp,jp,"app");var hc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ar,Dh;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,T){function v(){}v.prototype=T.prototype,I.D=T.prototype,I.prototype=new v,I.prototype.constructor=I,I.C=function(R,C,S){for(var b=Array(arguments.length-2),st=2;st<arguments.length;st++)b[st-2]=arguments[st];return T.prototype[C].apply(R,b)}}function e(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,e),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,T,v){v||(v=0);var R=Array(16);if(typeof T=="string")for(var C=0;16>C;++C)R[C]=T.charCodeAt(v++)|T.charCodeAt(v++)<<8|T.charCodeAt(v++)<<16|T.charCodeAt(v++)<<24;else for(C=0;16>C;++C)R[C]=T[v++]|T[v++]<<8|T[v++]<<16|T[v++]<<24;T=I.g[0],v=I.g[1],C=I.g[2];var S=I.g[3],b=T+(S^v&(C^S))+R[0]+3614090360&4294967295;T=v+(b<<7&4294967295|b>>>25),b=S+(C^T&(v^C))+R[1]+3905402710&4294967295,S=T+(b<<12&4294967295|b>>>20),b=C+(v^S&(T^v))+R[2]+606105819&4294967295,C=S+(b<<17&4294967295|b>>>15),b=v+(T^C&(S^T))+R[3]+3250441966&4294967295,v=C+(b<<22&4294967295|b>>>10),b=T+(S^v&(C^S))+R[4]+4118548399&4294967295,T=v+(b<<7&4294967295|b>>>25),b=S+(C^T&(v^C))+R[5]+1200080426&4294967295,S=T+(b<<12&4294967295|b>>>20),b=C+(v^S&(T^v))+R[6]+2821735955&4294967295,C=S+(b<<17&4294967295|b>>>15),b=v+(T^C&(S^T))+R[7]+4249261313&4294967295,v=C+(b<<22&4294967295|b>>>10),b=T+(S^v&(C^S))+R[8]+1770035416&4294967295,T=v+(b<<7&4294967295|b>>>25),b=S+(C^T&(v^C))+R[9]+2336552879&4294967295,S=T+(b<<12&4294967295|b>>>20),b=C+(v^S&(T^v))+R[10]+4294925233&4294967295,C=S+(b<<17&4294967295|b>>>15),b=v+(T^C&(S^T))+R[11]+2304563134&4294967295,v=C+(b<<22&4294967295|b>>>10),b=T+(S^v&(C^S))+R[12]+1804603682&4294967295,T=v+(b<<7&4294967295|b>>>25),b=S+(C^T&(v^C))+R[13]+4254626195&4294967295,S=T+(b<<12&4294967295|b>>>20),b=C+(v^S&(T^v))+R[14]+2792965006&4294967295,C=S+(b<<17&4294967295|b>>>15),b=v+(T^C&(S^T))+R[15]+1236535329&4294967295,v=C+(b<<22&4294967295|b>>>10),b=T+(C^S&(v^C))+R[1]+4129170786&4294967295,T=v+(b<<5&4294967295|b>>>27),b=S+(v^C&(T^v))+R[6]+3225465664&4294967295,S=T+(b<<9&4294967295|b>>>23),b=C+(T^v&(S^T))+R[11]+643717713&4294967295,C=S+(b<<14&4294967295|b>>>18),b=v+(S^T&(C^S))+R[0]+3921069994&4294967295,v=C+(b<<20&4294967295|b>>>12),b=T+(C^S&(v^C))+R[5]+3593408605&4294967295,T=v+(b<<5&4294967295|b>>>27),b=S+(v^C&(T^v))+R[10]+38016083&4294967295,S=T+(b<<9&4294967295|b>>>23),b=C+(T^v&(S^T))+R[15]+3634488961&4294967295,C=S+(b<<14&4294967295|b>>>18),b=v+(S^T&(C^S))+R[4]+3889429448&4294967295,v=C+(b<<20&4294967295|b>>>12),b=T+(C^S&(v^C))+R[9]+568446438&4294967295,T=v+(b<<5&4294967295|b>>>27),b=S+(v^C&(T^v))+R[14]+3275163606&4294967295,S=T+(b<<9&4294967295|b>>>23),b=C+(T^v&(S^T))+R[3]+4107603335&4294967295,C=S+(b<<14&4294967295|b>>>18),b=v+(S^T&(C^S))+R[8]+1163531501&4294967295,v=C+(b<<20&4294967295|b>>>12),b=T+(C^S&(v^C))+R[13]+2850285829&4294967295,T=v+(b<<5&4294967295|b>>>27),b=S+(v^C&(T^v))+R[2]+4243563512&4294967295,S=T+(b<<9&4294967295|b>>>23),b=C+(T^v&(S^T))+R[7]+1735328473&4294967295,C=S+(b<<14&4294967295|b>>>18),b=v+(S^T&(C^S))+R[12]+2368359562&4294967295,v=C+(b<<20&4294967295|b>>>12),b=T+(v^C^S)+R[5]+4294588738&4294967295,T=v+(b<<4&4294967295|b>>>28),b=S+(T^v^C)+R[8]+2272392833&4294967295,S=T+(b<<11&4294967295|b>>>21),b=C+(S^T^v)+R[11]+1839030562&4294967295,C=S+(b<<16&4294967295|b>>>16),b=v+(C^S^T)+R[14]+4259657740&4294967295,v=C+(b<<23&4294967295|b>>>9),b=T+(v^C^S)+R[1]+2763975236&4294967295,T=v+(b<<4&4294967295|b>>>28),b=S+(T^v^C)+R[4]+1272893353&4294967295,S=T+(b<<11&4294967295|b>>>21),b=C+(S^T^v)+R[7]+4139469664&4294967295,C=S+(b<<16&4294967295|b>>>16),b=v+(C^S^T)+R[10]+3200236656&4294967295,v=C+(b<<23&4294967295|b>>>9),b=T+(v^C^S)+R[13]+681279174&4294967295,T=v+(b<<4&4294967295|b>>>28),b=S+(T^v^C)+R[0]+3936430074&4294967295,S=T+(b<<11&4294967295|b>>>21),b=C+(S^T^v)+R[3]+3572445317&4294967295,C=S+(b<<16&4294967295|b>>>16),b=v+(C^S^T)+R[6]+76029189&4294967295,v=C+(b<<23&4294967295|b>>>9),b=T+(v^C^S)+R[9]+3654602809&4294967295,T=v+(b<<4&4294967295|b>>>28),b=S+(T^v^C)+R[12]+3873151461&4294967295,S=T+(b<<11&4294967295|b>>>21),b=C+(S^T^v)+R[15]+530742520&4294967295,C=S+(b<<16&4294967295|b>>>16),b=v+(C^S^T)+R[2]+3299628645&4294967295,v=C+(b<<23&4294967295|b>>>9),b=T+(C^(v|~S))+R[0]+4096336452&4294967295,T=v+(b<<6&4294967295|b>>>26),b=S+(v^(T|~C))+R[7]+1126891415&4294967295,S=T+(b<<10&4294967295|b>>>22),b=C+(T^(S|~v))+R[14]+2878612391&4294967295,C=S+(b<<15&4294967295|b>>>17),b=v+(S^(C|~T))+R[5]+4237533241&4294967295,v=C+(b<<21&4294967295|b>>>11),b=T+(C^(v|~S))+R[12]+1700485571&4294967295,T=v+(b<<6&4294967295|b>>>26),b=S+(v^(T|~C))+R[3]+2399980690&4294967295,S=T+(b<<10&4294967295|b>>>22),b=C+(T^(S|~v))+R[10]+4293915773&4294967295,C=S+(b<<15&4294967295|b>>>17),b=v+(S^(C|~T))+R[1]+2240044497&4294967295,v=C+(b<<21&4294967295|b>>>11),b=T+(C^(v|~S))+R[8]+1873313359&4294967295,T=v+(b<<6&4294967295|b>>>26),b=S+(v^(T|~C))+R[15]+4264355552&4294967295,S=T+(b<<10&4294967295|b>>>22),b=C+(T^(S|~v))+R[6]+2734768916&4294967295,C=S+(b<<15&4294967295|b>>>17),b=v+(S^(C|~T))+R[13]+1309151649&4294967295,v=C+(b<<21&4294967295|b>>>11),b=T+(C^(v|~S))+R[4]+4149444226&4294967295,T=v+(b<<6&4294967295|b>>>26),b=S+(v^(T|~C))+R[11]+3174756917&4294967295,S=T+(b<<10&4294967295|b>>>22),b=C+(T^(S|~v))+R[2]+718787259&4294967295,C=S+(b<<15&4294967295|b>>>17),b=v+(S^(C|~T))+R[9]+3951481745&4294967295,I.g[0]=I.g[0]+T&4294967295,I.g[1]=I.g[1]+(C+(b<<21&4294967295|b>>>11))&4294967295,I.g[2]=I.g[2]+C&4294967295,I.g[3]=I.g[3]+S&4294967295}n.prototype.u=function(I,T){T===void 0&&(T=I.length);for(var v=T-this.blockSize,R=this.B,C=this.h,S=0;S<T;){if(C==0)for(;S<=v;)r(this,I,S),S+=this.blockSize;if(typeof I=="string"){for(;S<T;)if(R[C++]=I.charCodeAt(S++),C==this.blockSize){r(this,R),C=0;break}}else for(;S<T;)if(R[C++]=I[S++],C==this.blockSize){r(this,R),C=0;break}}this.h=C,this.o+=T},n.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var T=1;T<I.length-8;++T)I[T]=0;var v=8*this.o;for(T=I.length-8;T<I.length;++T)I[T]=v&255,v/=256;for(this.u(I),I=Array(16),T=v=0;4>T;++T)for(var R=0;32>R;R+=8)I[v++]=this.g[T]>>>R&255;return I};function s(I,T){var v=l;return Object.prototype.hasOwnProperty.call(v,I)?v[I]:v[I]=T(I)}function o(I,T){this.h=T;for(var v=[],R=!0,C=I.length-1;0<=C;C--){var S=I[C]|0;R&&S==T||(v[C]=S,R=!1)}this.g=v}var l={};function u(I){return-128<=I&&128>I?s(I,function(T){return new o([T|0],0>T?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return w(c(-I));for(var T=[],v=1,R=0;I>=v;R++)T[R]=I/v|0,v*=4294967296;return new o(T,0)}function h(I,T){if(I.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(I.charAt(0)=="-")return w(h(I.substring(1),T));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=c(Math.pow(T,8)),R=d,C=0;C<I.length;C+=8){var S=Math.min(8,I.length-C),b=parseInt(I.substring(C,C+S),T);8>S?(S=c(Math.pow(T,S)),R=R.j(S).add(c(b))):(R=R.j(v),R=R.add(c(b)))}return R}var d=u(0),m=u(1),p=u(16777216);i=o.prototype,i.m=function(){if(g(this))return-w(this).m();for(var I=0,T=1,v=0;v<this.g.length;v++){var R=this.i(v);I+=(0<=R?R:4294967296+R)*T,T*=4294967296}return I},i.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(y(this))return"0";if(g(this))return"-"+w(this).toString(I);for(var T=c(Math.pow(I,6)),v=this,R="";;){var C=D(v,T).g;v=V(v,C.j(T));var S=((0<v.g.length?v.g[0]:v.h)>>>0).toString(I);if(v=C,y(v))return S+R;for(;6>S.length;)S="0"+S;R=S+R}},i.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function y(I){if(I.h!=0)return!1;for(var T=0;T<I.g.length;T++)if(I.g[T]!=0)return!1;return!0}function g(I){return I.h==-1}i.l=function(I){return I=V(this,I),g(I)?-1:y(I)?0:1};function w(I){for(var T=I.g.length,v=[],R=0;R<T;R++)v[R]=~I.g[R];return new o(v,~I.h).add(m)}i.abs=function(){return g(this)?w(this):this},i.add=function(I){for(var T=Math.max(this.g.length,I.g.length),v=[],R=0,C=0;C<=T;C++){var S=R+(this.i(C)&65535)+(I.i(C)&65535),b=(S>>>16)+(this.i(C)>>>16)+(I.i(C)>>>16);R=b>>>16,S&=65535,b&=65535,v[C]=b<<16|S}return new o(v,v[v.length-1]&-2147483648?-1:0)};function V(I,T){return I.add(w(T))}i.j=function(I){if(y(this)||y(I))return d;if(g(this))return g(I)?w(this).j(w(I)):w(w(this).j(I));if(g(I))return w(this.j(w(I)));if(0>this.l(p)&&0>I.l(p))return c(this.m()*I.m());for(var T=this.g.length+I.g.length,v=[],R=0;R<2*T;R++)v[R]=0;for(R=0;R<this.g.length;R++)for(var C=0;C<I.g.length;C++){var S=this.i(R)>>>16,b=this.i(R)&65535,st=I.i(C)>>>16,rt=I.i(C)&65535;v[2*R+2*C]+=b*rt,A(v,2*R+2*C),v[2*R+2*C+1]+=S*rt,A(v,2*R+2*C+1),v[2*R+2*C+1]+=b*st,A(v,2*R+2*C+1),v[2*R+2*C+2]+=S*st,A(v,2*R+2*C+2)}for(R=0;R<T;R++)v[R]=v[2*R+1]<<16|v[2*R];for(R=T;R<2*T;R++)v[R]=0;return new o(v,0)};function A(I,T){for(;(I[T]&65535)!=I[T];)I[T+1]+=I[T]>>>16,I[T]&=65535,T++}function P(I,T){this.g=I,this.h=T}function D(I,T){if(y(T))throw Error("division by zero");if(y(I))return new P(d,d);if(g(I))return T=D(w(I),T),new P(w(T.g),w(T.h));if(g(T))return T=D(I,w(T)),new P(w(T.g),T.h);if(30<I.g.length){if(g(I)||g(T))throw Error("slowDivide_ only works with positive integers.");for(var v=m,R=T;0>=R.l(I);)v=k(v),R=k(R);var C=O(v,1),S=O(R,1);for(R=O(R,2),v=O(v,2);!y(R);){var b=S.add(R);0>=b.l(I)&&(C=C.add(v),S=b),R=O(R,1),v=O(v,1)}return T=V(I,C.j(T)),new P(C,T)}for(C=d;0<=I.l(T);){for(v=Math.max(1,Math.floor(I.m()/T.m())),R=Math.ceil(Math.log(v)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),S=c(v),b=S.j(T);g(b)||0<b.l(I);)v-=R,S=c(v),b=S.j(T);y(S)&&(S=m),C=C.add(S),I=V(I,b)}return new P(C,I)}i.A=function(I){return D(this,I).h},i.and=function(I){for(var T=Math.max(this.g.length,I.g.length),v=[],R=0;R<T;R++)v[R]=this.i(R)&I.i(R);return new o(v,this.h&I.h)},i.or=function(I){for(var T=Math.max(this.g.length,I.g.length),v=[],R=0;R<T;R++)v[R]=this.i(R)|I.i(R);return new o(v,this.h|I.h)},i.xor=function(I){for(var T=Math.max(this.g.length,I.g.length),v=[],R=0;R<T;R++)v[R]=this.i(R)^I.i(R);return new o(v,this.h^I.h)};function k(I){for(var T=I.g.length+1,v=[],R=0;R<T;R++)v[R]=I.i(R)<<1|I.i(R-1)>>>31;return new o(v,I.h)}function O(I,T){var v=T>>5;T%=32;for(var R=I.g.length-v,C=[],S=0;S<R;S++)C[S]=0<T?I.i(S+v)>>>T|I.i(S+v+1)<<32-T:I.i(S+v);return new o(C,I.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,Dh=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,ar=o}).apply(typeof hc<"u"?hc:typeof self<"u"?self:typeof window<"u"?window:{});var Ps=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vh,kh,Ti,xh,ks,ya,Oh,Mh,Nh;(function(){var i,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,f,_){return a==Array.prototype||a==Object.prototype||(a[f]=_.value),a};function e(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ps=="object"&&Ps];for(var f=0;f<a.length;++f){var _=a[f];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var n=e(this);function r(a,f){if(f)t:{var _=n;a=a.split(".");for(var E=0;E<a.length-1;E++){var x=a[E];if(!(x in _))break t;_=_[x]}a=a[a.length-1],E=_[a],f=f(E),f!=E&&f!=null&&t(_,a,{configurable:!0,writable:!0,value:f})}}function s(a,f){a instanceof String&&(a+="");var _=0,E=!1,x={next:function(){if(!E&&_<a.length){var M=_++;return{value:f(M,a[M]),done:!1}}return E=!0,{done:!0,value:void 0}}};return x[Symbol.iterator]=function(){return x},x}r("Array.prototype.values",function(a){return a||function(){return s(this,function(f,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var f=typeof a;return f=f!="object"?f:a?Array.isArray(a)?"array":f:"null",f=="array"||f=="object"&&typeof a.length=="number"}function c(a){var f=typeof a;return f=="object"&&a!=null||f=="function"}function h(a,f,_){return a.call.apply(a.bind,arguments)}function d(a,f,_){if(!a)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(x,E),a.apply(f,x)}}return function(){return a.apply(f,arguments)}}function m(a,f,_){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,m.apply(null,arguments)}function p(a,f){var _=Array.prototype.slice.call(arguments,1);return function(){var E=_.slice();return E.push.apply(E,arguments),a.apply(this,E)}}function y(a,f){function _(){}_.prototype=f.prototype,a.aa=f.prototype,a.prototype=new _,a.prototype.constructor=a,a.Qb=function(E,x,M){for(var B=Array(arguments.length-2),Rt=2;Rt<arguments.length;Rt++)B[Rt-2]=arguments[Rt];return f.prototype[x].apply(E,B)}}function g(a){const f=a.length;if(0<f){const _=Array(f);for(let E=0;E<f;E++)_[E]=a[E];return _}return[]}function w(a,f){for(let _=1;_<arguments.length;_++){const E=arguments[_];if(u(E)){const x=a.length||0,M=E.length||0;a.length=x+M;for(let B=0;B<M;B++)a[x+B]=E[B]}else a.push(E)}}class V{constructor(f,_){this.i=f,this.j=_,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function A(a){return/^[\s\xa0]*$/.test(a)}function P(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var k=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function O(a,f,_){for(const E in a)f.call(_,a[E],E,a)}function I(a,f){for(const _ in a)f.call(void 0,a[_],_,a)}function T(a){const f={};for(const _ in a)f[_]=a[_];return f}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(a,f){let _,E;for(let x=1;x<arguments.length;x++){E=arguments[x];for(_ in E)a[_]=E[_];for(let M=0;M<v.length;M++)_=v[M],Object.prototype.hasOwnProperty.call(E,_)&&(a[_]=E[_])}}function C(a){var f=1;a=a.split(":");const _=[];for(;0<f&&a.length;)_.push(a.shift()),f--;return a.length&&_.push(a.join(":")),_}function S(a){l.setTimeout(()=>{throw a},0)}function b(){var a=xt;let f=null;return a.g&&(f=a.g,a.g=a.g.next,a.g||(a.h=null),f.next=null),f}class st{constructor(){this.h=this.g=null}add(f,_){const E=rt.get();E.set(f,_),this.h?this.h.next=E:this.g=E,this.h=E}}var rt=new V(()=>new ht,a=>a.reset());class ht{constructor(){this.next=this.g=this.h=null}set(f,_){this.h=f,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ut,dt=!1,xt=new st,zt=()=>{const a=l.Promise.resolve(void 0);ut=()=>{a.then(q)}};var q=()=>{for(var a;a=b();){try{a.h.call(a.g)}catch(_){S(_)}var f=rt;f.j(a),100>f.h&&(f.h++,a.next=f.g,f.g=a)}dt=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function tt(a,f){this.type=a,this.g=this.target=f,this.defaultPrevented=!1}tt.prototype.h=function(){this.defaultPrevented=!0};var It=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const _=()=>{};l.addEventListener("test",_,f),l.removeEventListener("test",_,f)}catch{}return a}();function Ot(a,f){if(tt.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var _=this.type=a.type,E=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=f,f=a.relatedTarget){if(k){t:{try{D(f.nodeName);var x=!0;break t}catch{}x=!1}x||(f=null)}}else _=="mouseover"?f=a.fromElement:_=="mouseout"&&(f=a.toElement);this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Mt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Ot.aa.h.call(this)}}y(Ot,tt);var Mt={2:"touch",3:"pen",4:"mouse"};Ot.prototype.h=function(){Ot.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ge="closure_listenable_"+(1e6*Math.random()|0),tn=0;function we(a,f,_,E,x){this.listener=a,this.proxy=null,this.src=f,this.type=_,this.capture=!!E,this.ha=x,this.key=++tn,this.da=this.fa=!1}function Xt(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ge(a){this.src=a,this.g={},this.h=0}Ge.prototype.add=function(a,f,_,E,x){var M=a.toString();a=this.g[M],a||(a=this.g[M]=[],this.h++);var B=Zt(a,f,E,x);return-1<B?(f=a[B],_||(f.fa=!1)):(f=new we(f,this.src,M,!!E,x),f.fa=_,a.push(f)),f};function xe(a,f){var _=f.type;if(_ in a.g){var E=a.g[_],x=Array.prototype.indexOf.call(E,f,void 0),M;(M=0<=x)&&Array.prototype.splice.call(E,x,1),M&&(Xt(f),a.g[_].length==0&&(delete a.g[_],a.h--))}}function Zt(a,f,_,E){for(var x=0;x<a.length;++x){var M=a[x];if(!M.da&&M.listener==f&&M.capture==!!_&&M.ha==E)return x}return-1}var sn="closure_lm_"+(1e6*Math.random()|0),jt={};function nt(a,f,_,E,x){if(Array.isArray(f)){for(var M=0;M<f.length;M++)nt(a,f[M],_,E,x);return null}return _=Ar(_),a&&a[ge]?a.K(f,_,c(E)?!!E.capture:!!E,x):At(a,f,_,!1,E,x)}function At(a,f,_,E,x,M){if(!f)throw Error("Invalid event type");var B=c(x)?!!x.capture:!!x,Rt=Ir(a);if(Rt||(a[sn]=Rt=new Ge(a)),_=Rt.add(f,_,E,B,M),_.proxy)return _;if(E=Ie(),_.proxy=E,E.src=a,E.listener=_,a.addEventListener)It||(x=B),x===void 0&&(x=!1),a.addEventListener(f.toString(),E,x);else if(a.attachEvent)a.attachEvent(Cn(f.toString()),E);else if(a.addListener&&a.removeListener)a.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ie(){function a(_){return f.call(a.src,a.listener,_)}const f=hs;return a}function He(a,f,_,E,x){if(Array.isArray(f))for(var M=0;M<f.length;M++)He(a,f[M],_,E,x);else E=c(E)?!!E.capture:!!E,_=Ar(_),a&&a[ge]?(a=a.i,f=String(f).toString(),f in a.g&&(M=a.g[f],_=Zt(M,_,E,x),-1<_&&(Xt(M[_]),Array.prototype.splice.call(M,_,1),M.length==0&&(delete a.g[f],a.h--)))):a&&(a=Ir(a))&&(f=a.g[f.toString()],a=-1,f&&(a=Zt(f,_,E,x)),(_=-1<a?f[a]:null)&&bt(_))}function bt(a){if(typeof a!="number"&&a&&!a.da){var f=a.src;if(f&&f[ge])xe(f.i,a);else{var _=a.type,E=a.proxy;f.removeEventListener?f.removeEventListener(_,E,a.capture):f.detachEvent?f.detachEvent(Cn(_),E):f.addListener&&f.removeListener&&f.removeListener(E),(_=Ir(f))?(xe(_,a),_.h==0&&(_.src=null,f[sn]=null)):Xt(a)}}}function Cn(a){return a in jt?jt[a]:jt[a]="on"+a}function hs(a,f){if(a.da)a=!0;else{f=new Ot(f,this);var _=a.listener,E=a.ha||a.src;a.fa&&bt(a),a=_.call(E,f)}return a}function Ir(a){return a=a[sn],a instanceof Ge?a:null}var Ae="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ar(a){return typeof a=="function"?a:(a[Ae]||(a[Ae]=function(f){return a.handleEvent(f)}),a[Ae])}function Gt(){H.call(this),this.i=new Ge(this),this.M=this,this.F=null}y(Gt,H),Gt.prototype[ge]=!0,Gt.prototype.removeEventListener=function(a,f,_,E){He(this,a,f,_,E)};function Ht(a,f){var _,E=a.F;if(E)for(_=[];E;E=E.F)_.push(E);if(a=a.M,E=f.type||f,typeof f=="string")f=new tt(f,a);else if(f instanceof tt)f.target=f.target||a;else{var x=f;f=new tt(E,a),R(f,x)}if(x=!0,_)for(var M=_.length-1;0<=M;M--){var B=f.g=_[M];x=Sn(B,E,!0,f)&&x}if(B=f.g=a,x=Sn(B,E,!0,f)&&x,x=Sn(B,E,!1,f)&&x,_)for(M=0;M<_.length;M++)B=f.g=_[M],x=Sn(B,E,!1,f)&&x}Gt.prototype.N=function(){if(Gt.aa.N.call(this),this.i){var a=this.i,f;for(f in a.g){for(var _=a.g[f],E=0;E<_.length;E++)Xt(_[E]);delete a.g[f],a.h--}}this.F=null},Gt.prototype.K=function(a,f,_,E){return this.i.add(String(a),f,!1,_,E)},Gt.prototype.L=function(a,f,_,E){return this.i.add(String(a),f,!0,_,E)};function Sn(a,f,_,E){if(f=a.i.g[String(f)],!f)return!0;f=f.concat();for(var x=!0,M=0;M<f.length;++M){var B=f[M];if(B&&!B.da&&B.capture==_){var Rt=B.listener,re=B.ha||B.src;B.fa&&xe(a.i,B),x=Rt.call(re,E)!==!1&&x}}return x&&!E.defaultPrevented}function Xl(a,f,_){if(typeof a=="function")_&&(a=m(a,_));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:l.setTimeout(a,f||0)}function Yl(a){a.g=Xl(()=>{a.g=null,a.i&&(a.i=!1,Yl(a))},a.l);const f=a.h;a.h=null,a.m.apply(null,f)}class n_ extends H{constructor(f,_){super(),this.m=f,this.l=_,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Yl(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ii(a){H.call(this),this.h=a,this.g={}}y(ii,H);var Jl=[];function Zl(a){O(a.g,function(f,_){this.g.hasOwnProperty(_)&&bt(f)},a),a.g={}}ii.prototype.N=function(){ii.aa.N.call(this),Zl(this)},ii.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var So=l.JSON.stringify,r_=l.JSON.parse,i_=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Do(){}Do.prototype.h=null;function tu(a){return a.h||(a.h=a.i())}function eu(){}var si={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vo(){tt.call(this,"d")}y(Vo,tt);function ko(){tt.call(this,"c")}y(ko,tt);var Xn={},nu=null;function fs(){return nu=nu||new Gt}Xn.La="serverreachability";function ru(a){tt.call(this,Xn.La,a)}y(ru,tt);function oi(a){const f=fs();Ht(f,new ru(f))}Xn.STAT_EVENT="statevent";function iu(a,f){tt.call(this,Xn.STAT_EVENT,a),this.stat=f}y(iu,tt);function ye(a){const f=fs();Ht(f,new iu(f,a))}Xn.Ma="timingevent";function su(a,f){tt.call(this,Xn.Ma,a),this.size=f}y(su,tt);function ai(a,f){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},f)}function li(){this.g=!0}li.prototype.xa=function(){this.g=!1};function s_(a,f,_,E,x,M){a.info(function(){if(a.g)if(M)for(var B="",Rt=M.split("&"),re=0;re<Rt.length;re++){var gt=Rt[re].split("=");if(1<gt.length){var le=gt[0];gt=gt[1];var ue=le.split("_");B=2<=ue.length&&ue[1]=="type"?B+(le+"="+gt+"&"):B+(le+"=redacted&")}}else B=null;else B=M;return"XMLHTTP REQ ("+E+") [attempt "+x+"]: "+f+`
`+_+`
`+B})}function o_(a,f,_,E,x,M,B){a.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+x+"]: "+f+`
`+_+`
`+M+" "+B})}function br(a,f,_,E){a.info(function(){return"XMLHTTP TEXT ("+f+"): "+l_(a,_)+(E?" "+E:"")})}function a_(a,f){a.info(function(){return"TIMEOUT: "+f})}li.prototype.info=function(){};function l_(a,f){if(!a.g)return f;if(!f)return null;try{var _=JSON.parse(f);if(_){for(a=0;a<_.length;a++)if(Array.isArray(_[a])){var E=_[a];if(!(2>E.length)){var x=E[1];if(Array.isArray(x)&&!(1>x.length)){var M=x[0];if(M!="noop"&&M!="stop"&&M!="close")for(var B=1;B<x.length;B++)x[B]=""}}}}return So(_)}catch{return f}}var ds={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ou={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xo;function _s(){}y(_s,Do),_s.prototype.g=function(){return new XMLHttpRequest},_s.prototype.i=function(){return{}},xo=new _s;function Dn(a,f,_,E){this.j=a,this.i=f,this.l=_,this.R=E||1,this.U=new ii(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new au}function au(){this.i=null,this.g="",this.h=!1}var lu={},Oo={};function Mo(a,f,_){a.L=1,a.v=ys(gn(f)),a.m=_,a.P=!0,uu(a,null)}function uu(a,f){a.F=Date.now(),ms(a),a.A=gn(a.v);var _=a.A,E=a.R;Array.isArray(E)||(E=[String(E)]),Iu(_.i,"t",E),a.C=0,_=a.j.J,a.h=new au,a.g=Uu(a.j,_?f:null,!a.m),0<a.O&&(a.M=new n_(m(a.Y,a,a.g),a.O)),f=a.U,_=a.g,E=a.ca;var x="readystatechange";Array.isArray(x)||(x&&(Jl[0]=x.toString()),x=Jl);for(var M=0;M<x.length;M++){var B=nt(_,x[M],E||f.handleEvent,!1,f.h||f);if(!B)break;f.g[B.key]=B}f=a.H?T(a.H):{},a.m?(a.u||(a.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,f)):(a.u="GET",a.g.ea(a.A,a.u,null,f)),oi(),s_(a.i,a.u,a.A,a.l,a.R,a.m)}Dn.prototype.ca=function(a){a=a.target;const f=this.M;f&&yn(a)==3?f.j():this.Y(a)},Dn.prototype.Y=function(a){try{if(a==this.g)t:{const ue=yn(this.g);var f=this.g.Ba();const Cr=this.g.Z();if(!(3>ue)&&(ue!=3||this.g&&(this.h.h||this.g.oa()||Du(this.g)))){this.J||ue!=4||f==7||(f==8||0>=Cr?oi(3):oi(2)),No(this);var _=this.g.Z();this.X=_;e:if(cu(this)){var E=Du(this.g);a="";var x=E.length,M=yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yn(this),ui(this);var B="";break e}this.h.i=new l.TextDecoder}for(f=0;f<x;f++)this.h.h=!0,a+=this.h.i.decode(E[f],{stream:!(M&&f==x-1)});E.length=0,this.h.g+=a,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=_==200,o_(this.i,this.u,this.A,this.l,this.R,ue,_),this.o){if(this.T&&!this.K){e:{if(this.g){var Rt,re=this.g;if((Rt=re.g?re.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(Rt)){var gt=Rt;break e}}gt=null}if(_=gt)br(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Lo(this,_);else{this.o=!1,this.s=3,ye(12),Yn(this),ui(this);break t}}if(this.P){_=!0;let en;for(;!this.J&&this.C<B.length;)if(en=u_(this,B),en==Oo){ue==4&&(this.s=4,ye(14),_=!1),br(this.i,this.l,null,"[Incomplete Response]");break}else if(en==lu){this.s=4,ye(15),br(this.i,this.l,B,"[Invalid Chunk]"),_=!1;break}else br(this.i,this.l,en,null),Lo(this,en);if(cu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ue!=4||B.length!=0||this.h.h||(this.s=1,ye(16),_=!1),this.o=this.o&&_,!_)br(this.i,this.l,B,"[Invalid Chunked Response]"),Yn(this),ui(this);else if(0<B.length&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.ba&&!le.M&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),jo(le),le.M=!0,ye(11))}}else br(this.i,this.l,B,null),Lo(this,B);ue==4&&Yn(this),this.o&&!this.J&&(ue==4?Lu(this.j,this):(this.o=!1,ms(this)))}else R_(this.g),_==400&&0<B.indexOf("Unknown SID")?(this.s=3,ye(12)):(this.s=0,ye(13)),Yn(this),ui(this)}}}catch{}finally{}};function cu(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function u_(a,f){var _=a.C,E=f.indexOf(`
`,_);return E==-1?Oo:(_=Number(f.substring(_,E)),isNaN(_)?lu:(E+=1,E+_>f.length?Oo:(f=f.slice(E,E+_),a.C=E+_,f)))}Dn.prototype.cancel=function(){this.J=!0,Yn(this)};function ms(a){a.S=Date.now()+a.I,hu(a,a.I)}function hu(a,f){if(a.B!=null)throw Error("WatchDog timer not null");a.B=ai(m(a.ba,a),f)}function No(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Dn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(a_(this.i,this.A),this.L!=2&&(oi(),ye(17)),Yn(this),this.s=2,ui(this)):hu(this,this.S-a)};function ui(a){a.j.G==0||a.J||Lu(a.j,a)}function Yn(a){No(a);var f=a.M;f&&typeof f.ma=="function"&&f.ma(),a.M=null,Zl(a.U),a.g&&(f=a.g,a.g=null,f.abort(),f.ma())}function Lo(a,f){try{var _=a.j;if(_.G!=0&&(_.g==a||Fo(_.h,a))){if(!a.K&&Fo(_.h,a)&&_.G==3){try{var E=_.Da.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var x=E;if(x[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<a.F)Is(_),Es(_);else break t;zo(_),ye(18)}}else _.za=x[1],0<_.za-_.T&&37500>x[2]&&_.F&&_.v==0&&!_.C&&(_.C=ai(m(_.Za,_),6e3));if(1>=_u(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Zn(_,11)}else if((a.K||_.g==a)&&Is(_),!A(f))for(x=_.Da.g.parse(f),f=0;f<x.length;f++){let gt=x[f];if(_.T=gt[0],gt=gt[1],_.G==2)if(gt[0]=="c"){_.K=gt[1],_.ia=gt[2];const le=gt[3];le!=null&&(_.la=le,_.j.info("VER="+_.la));const ue=gt[4];ue!=null&&(_.Aa=ue,_.j.info("SVER="+_.Aa));const Cr=gt[5];Cr!=null&&typeof Cr=="number"&&0<Cr&&(E=1.5*Cr,_.L=E,_.j.info("backChannelRequestTimeoutMs_="+E)),E=_;const en=a.g;if(en){const bs=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bs){var M=E.h;M.g||bs.indexOf("spdy")==-1&&bs.indexOf("quic")==-1&&bs.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&($o(M,M.h),M.h=null))}if(E.D){const qo=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;qo&&(E.ya=qo,Dt(E.I,E.D,qo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-a.F,_.j.info("Handshake RTT: "+_.R+"ms")),E=_;var B=a;if(E.qa=Bu(E,E.J?E.ia:null,E.W),B.K){mu(E.h,B);var Rt=B,re=E.L;re&&(Rt.I=re),Rt.B&&(No(Rt),ms(Rt)),E.g=B}else Mu(E);0<_.i.length&&ws(_)}else gt[0]!="stop"&&gt[0]!="close"||Zn(_,7);else _.G==3&&(gt[0]=="stop"||gt[0]=="close"?gt[0]=="stop"?Zn(_,7):Uo(_):gt[0]!="noop"&&_.l&&_.l.ta(gt),_.v=0)}}oi(4)}catch{}}var c_=class{constructor(a,f){this.g=a,this.map=f}};function fu(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function du(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function _u(a){return a.h?1:a.g?a.g.size:0}function Fo(a,f){return a.h?a.h==f:a.g?a.g.has(f):!1}function $o(a,f){a.g?a.g.add(f):a.h=f}function mu(a,f){a.h&&a.h==f?a.h=null:a.g&&a.g.has(f)&&a.g.delete(f)}fu.prototype.cancel=function(){if(this.i=pu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function pu(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let f=a.i;for(const _ of a.g.values())f=f.concat(_.D);return f}return g(a.i)}function h_(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var f=[],_=a.length,E=0;E<_;E++)f.push(a[E]);return f}f=[],_=0;for(E in a)f[_++]=a[E];return f}function f_(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var f=[];a=a.length;for(var _=0;_<a;_++)f.push(_);return f}f=[],_=0;for(const E in a)f[_++]=E;return f}}}function gu(a,f){if(a.forEach&&typeof a.forEach=="function")a.forEach(f,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,f,void 0);else for(var _=f_(a),E=h_(a),x=E.length,M=0;M<x;M++)f.call(void 0,E[M],_&&_[M],a)}var yu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function d_(a,f){if(a){a=a.split("&");for(var _=0;_<a.length;_++){var E=a[_].indexOf("="),x=null;if(0<=E){var M=a[_].substring(0,E);x=a[_].substring(E+1)}else M=a[_];f(M,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function Jn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Jn){this.h=a.h,ps(this,a.j),this.o=a.o,this.g=a.g,gs(this,a.s),this.l=a.l;var f=a.i,_=new fi;_.i=f.i,f.g&&(_.g=new Map(f.g),_.h=f.h),vu(this,_),this.m=a.m}else a&&(f=String(a).match(yu))?(this.h=!1,ps(this,f[1]||"",!0),this.o=ci(f[2]||""),this.g=ci(f[3]||"",!0),gs(this,f[4]),this.l=ci(f[5]||"",!0),vu(this,f[6]||"",!0),this.m=ci(f[7]||"")):(this.h=!1,this.i=new fi(null,this.h))}Jn.prototype.toString=function(){var a=[],f=this.j;f&&a.push(hi(f,Tu,!0),":");var _=this.g;return(_||f=="file")&&(a.push("//"),(f=this.o)&&a.push(hi(f,Tu,!0),"@"),a.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&a.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&a.push("/"),a.push(hi(_,_.charAt(0)=="/"?p_:m_,!0))),(_=this.i.toString())&&a.push("?",_),(_=this.m)&&a.push("#",hi(_,y_)),a.join("")};function gn(a){return new Jn(a)}function ps(a,f,_){a.j=_?ci(f,!0):f,a.j&&(a.j=a.j.replace(/:$/,""))}function gs(a,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);a.s=f}else a.s=null}function vu(a,f,_){f instanceof fi?(a.i=f,v_(a.i,a.h)):(_||(f=hi(f,g_)),a.i=new fi(f,a.h))}function Dt(a,f,_){a.i.set(f,_)}function ys(a){return Dt(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ci(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function hi(a,f,_){return typeof a=="string"?(a=encodeURI(a).replace(f,__),_&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function __(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Tu=/[#\/\?@]/g,m_=/[#\?:]/g,p_=/[#\?]/g,g_=/[#\?@]/g,y_=/#/g;function fi(a,f){this.h=this.g=null,this.i=a||null,this.j=!!f}function Vn(a){a.g||(a.g=new Map,a.h=0,a.i&&d_(a.i,function(f,_){a.add(decodeURIComponent(f.replace(/\+/g," ")),_)}))}i=fi.prototype,i.add=function(a,f){Vn(this),this.i=null,a=Rr(this,a);var _=this.g.get(a);return _||this.g.set(a,_=[]),_.push(f),this.h+=1,this};function Eu(a,f){Vn(a),f=Rr(a,f),a.g.has(f)&&(a.i=null,a.h-=a.g.get(f).length,a.g.delete(f))}function wu(a,f){return Vn(a),f=Rr(a,f),a.g.has(f)}i.forEach=function(a,f){Vn(this),this.g.forEach(function(_,E){_.forEach(function(x){a.call(f,x,E,this)},this)},this)},i.na=function(){Vn(this);const a=Array.from(this.g.values()),f=Array.from(this.g.keys()),_=[];for(let E=0;E<f.length;E++){const x=a[E];for(let M=0;M<x.length;M++)_.push(f[E])}return _},i.V=function(a){Vn(this);let f=[];if(typeof a=="string")wu(this,a)&&(f=f.concat(this.g.get(Rr(this,a))));else{a=Array.from(this.g.values());for(let _=0;_<a.length;_++)f=f.concat(a[_])}return f},i.set=function(a,f){return Vn(this),this.i=null,a=Rr(this,a),wu(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[f]),this.h+=1,this},i.get=function(a,f){return a?(a=this.V(a),0<a.length?String(a[0]):f):f};function Iu(a,f,_){Eu(a,f),0<_.length&&(a.i=null,a.g.set(Rr(a,f),g(_)),a.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],f=Array.from(this.g.keys());for(var _=0;_<f.length;_++){var E=f[_];const M=encodeURIComponent(String(E)),B=this.V(E);for(E=0;E<B.length;E++){var x=M;B[E]!==""&&(x+="="+encodeURIComponent(String(B[E]))),a.push(x)}}return this.i=a.join("&")};function Rr(a,f){return f=String(f),a.j&&(f=f.toLowerCase()),f}function v_(a,f){f&&!a.j&&(Vn(a),a.i=null,a.g.forEach(function(_,E){var x=E.toLowerCase();E!=x&&(Eu(this,E),Iu(this,x,_))},a)),a.j=f}function T_(a,f){const _=new li;if(l.Image){const E=new Image;E.onload=p(kn,_,"TestLoadImage: loaded",!0,f,E),E.onerror=p(kn,_,"TestLoadImage: error",!1,f,E),E.onabort=p(kn,_,"TestLoadImage: abort",!1,f,E),E.ontimeout=p(kn,_,"TestLoadImage: timeout",!1,f,E),l.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=a}else f(!1)}function E_(a,f){const _=new li,E=new AbortController,x=setTimeout(()=>{E.abort(),kn(_,"TestPingServer: timeout",!1,f)},1e4);fetch(a,{signal:E.signal}).then(M=>{clearTimeout(x),M.ok?kn(_,"TestPingServer: ok",!0,f):kn(_,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(x),kn(_,"TestPingServer: error",!1,f)})}function kn(a,f,_,E,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),E(_)}catch{}}function w_(){this.g=new i_}function I_(a,f,_){const E=_||"";try{gu(a,function(x,M){let B=x;c(x)&&(B=So(x)),f.push(E+M+"="+encodeURIComponent(B))})}catch(x){throw f.push(E+"type="+encodeURIComponent("_badmap")),x}}function di(a){this.l=a.Ub||null,this.j=a.eb||!1}y(di,Do),di.prototype.g=function(){return new vs(this.l,this.j)},di.prototype.i=function(a){return function(){return a}}({});function vs(a,f){Gt.call(this),this.D=a,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(vs,Gt),i=vs.prototype,i.open=function(a,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=f,this.readyState=1,mi(this)},i.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(f.body=a),(this.D||l).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_i(this)),this.readyState=0},i.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,mi(this)),this.g&&(this.readyState=3,mi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Au(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Au(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}i.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var f=a.value?a.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!a.done}))&&(this.response=this.responseText+=f)}a.done?_i(this):mi(this),this.readyState==3&&Au(this)}},i.Ra=function(a){this.g&&(this.response=this.responseText=a,_i(this))},i.Qa=function(a){this.g&&(this.response=a,_i(this))},i.ga=function(){this.g&&_i(this)};function _i(a){a.readyState=4,a.l=null,a.j=null,a.v=null,mi(a)}i.setRequestHeader=function(a,f){this.u.append(a,f)},i.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],f=this.h.entries();for(var _=f.next();!_.done;)_=_.value,a.push(_[0]+": "+_[1]),_=f.next();return a.join(`\r
`)};function mi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(vs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function bu(a){let f="";return O(a,function(_,E){f+=E,f+=":",f+=_,f+=`\r
`}),f}function Bo(a,f,_){t:{for(E in _){var E=!1;break t}E=!0}E||(_=bu(_),typeof a=="string"?_!=null&&encodeURIComponent(String(_)):Dt(a,f,_))}function $t(a){Gt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y($t,Gt);var A_=/^https?$/i,b_=["POST","PUT"];i=$t.prototype,i.Ha=function(a){this.J=a},i.ea=function(a,f,_,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);f=f?f.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xo.g(),this.v=this.o?tu(this.o):tu(xo),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(a),!0),this.B=!1}catch(M){Ru(this,M);return}if(a=_||"",_=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var x in E)_.set(x,E[x]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const M of E.keys())_.set(M,E.get(M));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(_.keys()).find(M=>M.toLowerCase()=="content-type"),x=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(b_,f,void 0))||E||x||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,B]of _)this.g.setRequestHeader(M,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Su(this),this.u=!0,this.g.send(a),this.u=!1}catch(M){Ru(this,M)}};function Ru(a,f){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=f,a.m=5,Pu(a),Ts(a)}function Pu(a){a.A||(a.A=!0,Ht(a,"complete"),Ht(a,"error"))}i.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Ht(this,"complete"),Ht(this,"abort"),Ts(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ts(this,!0)),$t.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Cu(this):this.bb())},i.bb=function(){Cu(this)};function Cu(a){if(a.h&&typeof o<"u"&&(!a.v[1]||yn(a)!=4||a.Z()!=2)){if(a.u&&yn(a)==4)Xl(a.Ea,0,a);else if(Ht(a,"readystatechange"),yn(a)==4){a.h=!1;try{const B=a.Z();t:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break t;default:f=!1}var _;if(!(_=f)){var E;if(E=B===0){var x=String(a.D).match(yu)[1]||null;!x&&l.self&&l.self.location&&(x=l.self.location.protocol.slice(0,-1)),E=!A_.test(x?x.toLowerCase():"")}_=E}if(_)Ht(a,"complete"),Ht(a,"success");else{a.m=6;try{var M=2<yn(a)?a.g.statusText:""}catch{M=""}a.l=M+" ["+a.Z()+"]",Pu(a)}}finally{Ts(a)}}}}function Ts(a,f){if(a.g){Su(a);const _=a.g,E=a.v[0]?()=>{}:null;a.g=null,a.v=null,f||Ht(a,"ready");try{_.onreadystatechange=E}catch{}}}function Su(a){a.I&&(l.clearTimeout(a.I),a.I=null)}i.isActive=function(){return!!this.g};function yn(a){return a.g?a.g.readyState:0}i.Z=function(){try{return 2<yn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(a){if(this.g){var f=this.g.responseText;return a&&f.indexOf(a)==0&&(f=f.substring(a.length)),r_(f)}};function Du(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function R_(a){const f={};a=(a.g&&2<=yn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<a.length;E++){if(A(a[E]))continue;var _=C(a[E]);const x=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const M=f[x]||[];f[x]=M,M.push(_)}I(f,function(E){return E.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function pi(a,f,_){return _&&_.internalChannelParams&&_.internalChannelParams[a]||f}function Vu(a){this.Aa=0,this.i=[],this.j=new li,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=pi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=pi("baseRetryDelayMs",5e3,a),this.cb=pi("retryDelaySeedMs",1e4,a),this.Wa=pi("forwardChannelMaxRetries",2,a),this.wa=pi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new fu(a&&a.concurrentRequestLimit),this.Da=new w_,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Vu.prototype,i.la=8,i.G=1,i.connect=function(a,f,_,E){ye(0),this.W=a,this.H=f||{},_&&E!==void 0&&(this.H.OSID=_,this.H.OAID=E),this.F=this.X,this.I=Bu(this,null,this.W),ws(this)};function Uo(a){if(ku(a),a.G==3){var f=a.U++,_=gn(a.I);if(Dt(_,"SID",a.K),Dt(_,"RID",f),Dt(_,"TYPE","terminate"),gi(a,_),f=new Dn(a,a.j,f),f.L=2,f.v=ys(gn(_)),_=!1,l.navigator&&l.navigator.sendBeacon)try{_=l.navigator.sendBeacon(f.v.toString(),"")}catch{}!_&&l.Image&&(new Image().src=f.v,_=!0),_||(f.g=Uu(f.j,null),f.g.ea(f.v)),f.F=Date.now(),ms(f)}$u(a)}function Es(a){a.g&&(jo(a),a.g.cancel(),a.g=null)}function ku(a){Es(a),a.u&&(l.clearTimeout(a.u),a.u=null),Is(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function ws(a){if(!du(a.h)&&!a.s){a.s=!0;var f=a.Ga;ut||zt(),dt||(ut(),dt=!0),xt.add(f,a),a.B=0}}function P_(a,f){return _u(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=f.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=ai(m(a.Ga,a,f),Fu(a,a.B)),a.B++,!0)}i.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const x=new Dn(this,this.j,a);let M=this.o;if(this.S&&(M?(M=T(M),R(M,this.S)):M=this.S),this.m!==null||this.O||(x.H=M,M=null),this.P)t:{for(var f=0,_=0;_<this.i.length;_++){e:{var E=this.i[_];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break e}E=void 0}if(E===void 0)break;if(f+=E,4096<f){f=_;break t}if(f===4096||_===this.i.length-1){f=_+1;break t}}f=1e3}else f=1e3;f=Ou(this,x,f),_=gn(this.I),Dt(_,"RID",a),Dt(_,"CVER",22),this.D&&Dt(_,"X-HTTP-Session-Id",this.D),gi(this,_),M&&(this.O?f="headers="+encodeURIComponent(String(bu(M)))+"&"+f:this.m&&Bo(_,this.m,M)),$o(this.h,x),this.Ua&&Dt(_,"TYPE","init"),this.P?(Dt(_,"$req",f),Dt(_,"SID","null"),x.T=!0,Mo(x,_,null)):Mo(x,_,f),this.G=2}}else this.G==3&&(a?xu(this,a):this.i.length==0||du(this.h)||xu(this))};function xu(a,f){var _;f?_=f.l:_=a.U++;const E=gn(a.I);Dt(E,"SID",a.K),Dt(E,"RID",_),Dt(E,"AID",a.T),gi(a,E),a.m&&a.o&&Bo(E,a.m,a.o),_=new Dn(a,a.j,_,a.B+1),a.m===null&&(_.H=a.o),f&&(a.i=f.D.concat(a.i)),f=Ou(a,_,1e3),_.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),$o(a.h,_),Mo(_,E,f)}function gi(a,f){a.H&&O(a.H,function(_,E){Dt(f,E,_)}),a.l&&gu({},function(_,E){Dt(f,E,_)})}function Ou(a,f,_){_=Math.min(a.i.length,_);var E=a.l?m(a.l.Na,a.l,a):null;t:{var x=a.i;let M=-1;for(;;){const B=["count="+_];M==-1?0<_?(M=x[0].g,B.push("ofs="+M)):M=0:B.push("ofs="+M);let Rt=!0;for(let re=0;re<_;re++){let gt=x[re].g;const le=x[re].map;if(gt-=M,0>gt)M=Math.max(0,x[re].g-100),Rt=!1;else try{I_(le,B,"req"+gt+"_")}catch{E&&E(le)}}if(Rt){E=B.join("&");break t}}}return a=a.i.splice(0,_),f.D=a,E}function Mu(a){if(!a.g&&!a.u){a.Y=1;var f=a.Fa;ut||zt(),dt||(ut(),dt=!0),xt.add(f,a),a.v=0}}function zo(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=ai(m(a.Fa,a),Fu(a,a.v)),a.v++,!0)}i.Fa=function(){if(this.u=null,Nu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=ai(m(this.ab,this),a)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ye(10),Es(this),Nu(this))};function jo(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Nu(a){a.g=new Dn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var f=gn(a.qa);Dt(f,"RID","rpc"),Dt(f,"SID",a.K),Dt(f,"AID",a.T),Dt(f,"CI",a.F?"0":"1"),!a.F&&a.ja&&Dt(f,"TO",a.ja),Dt(f,"TYPE","xmlhttp"),gi(a,f),a.m&&a.o&&Bo(f,a.m,a.o),a.L&&(a.g.I=a.L);var _=a.g;a=a.ia,_.L=1,_.v=ys(gn(f)),_.m=null,_.P=!0,uu(_,a)}i.Za=function(){this.C!=null&&(this.C=null,Es(this),zo(this),ye(19))};function Is(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Lu(a,f){var _=null;if(a.g==f){Is(a),jo(a),a.g=null;var E=2}else if(Fo(a.h,f))_=f.D,mu(a.h,f),E=1;else return;if(a.G!=0){if(f.o)if(E==1){_=f.m?f.m.length:0,f=Date.now()-f.F;var x=a.B;E=fs(),Ht(E,new su(E,_)),ws(a)}else Mu(a);else if(x=f.s,x==3||x==0&&0<f.X||!(E==1&&P_(a,f)||E==2&&zo(a)))switch(_&&0<_.length&&(f=a.h,f.i=f.i.concat(_)),x){case 1:Zn(a,5);break;case 4:Zn(a,10);break;case 3:Zn(a,6);break;default:Zn(a,2)}}}function Fu(a,f){let _=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(_*=2),_*f}function Zn(a,f){if(a.j.info("Error code "+f),f==2){var _=m(a.fb,a),E=a.Xa;const x=!E;E=new Jn(E||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ps(E,"https"),ys(E),x?T_(E.toString(),_):E_(E.toString(),_)}else ye(2);a.G=0,a.l&&a.l.sa(f),$u(a),ku(a)}i.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ye(2)):(this.j.info("Failed to ping google.com"),ye(1))};function $u(a){if(a.G=0,a.ka=[],a.l){const f=pu(a.h);(f.length!=0||a.i.length!=0)&&(w(a.ka,f),w(a.ka,a.i),a.h.i.length=0,g(a.i),a.i.length=0),a.l.ra()}}function Bu(a,f,_){var E=_ instanceof Jn?gn(_):new Jn(_);if(E.g!="")f&&(E.g=f+"."+E.g),gs(E,E.s);else{var x=l.location;E=x.protocol,f=f?f+"."+x.hostname:x.hostname,x=+x.port;var M=new Jn(null);E&&ps(M,E),f&&(M.g=f),x&&gs(M,x),_&&(M.l=_),E=M}return _=a.D,f=a.ya,_&&f&&Dt(E,_,f),Dt(E,"VER",a.la),gi(a,E),E}function Uu(a,f,_){if(f&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=a.Ca&&!a.pa?new $t(new di({eb:_})):new $t(a.pa),f.Ha(a.J),f}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function zu(){}i=zu.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function As(){}As.prototype.g=function(a,f){return new Oe(a,f)};function Oe(a,f){Gt.call(this),this.g=new Vu(f),this.l=a,this.h=f&&f.messageUrlParams||null,a=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(a?a["X-WebChannel-Content-Type"]=f.messageContentType:a={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(a?a["X-WebChannel-Client-Profile"]=f.va:a={"X-WebChannel-Client-Profile":f.va}),this.g.S=a,(a=f&&f.Sb)&&!A(a)&&(this.g.m=a),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!A(f)&&(this.g.D=f,a=this.h,a!==null&&f in a&&(a=this.h,f in a&&delete a[f])),this.j=new Pr(this)}y(Oe,Gt),Oe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Oe.prototype.close=function(){Uo(this.g)},Oe.prototype.o=function(a){var f=this.g;if(typeof a=="string"){var _={};_.__data__=a,a=_}else this.u&&(_={},_.__data__=So(a),a=_);f.i.push(new c_(f.Ya++,a)),f.G==3&&ws(f)},Oe.prototype.N=function(){this.g.l=null,delete this.j,Uo(this.g),delete this.g,Oe.aa.N.call(this)};function ju(a){Vo.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var f=a.__sm__;if(f){t:{for(const _ in f){a=_;break t}a=void 0}(this.i=a)&&(a=this.i,f=f!==null&&a in f?f[a]:void 0),this.data=f}else this.data=a}y(ju,Vo);function qu(){ko.call(this),this.status=1}y(qu,ko);function Pr(a){this.g=a}y(Pr,zu),Pr.prototype.ua=function(){Ht(this.g,"a")},Pr.prototype.ta=function(a){Ht(this.g,new ju(a))},Pr.prototype.sa=function(a){Ht(this.g,new qu)},Pr.prototype.ra=function(){Ht(this.g,"b")},As.prototype.createWebChannel=As.prototype.g,Oe.prototype.send=Oe.prototype.o,Oe.prototype.open=Oe.prototype.m,Oe.prototype.close=Oe.prototype.close,Nh=function(){return new As},Mh=function(){return fs()},Oh=Xn,ya={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ds.NO_ERROR=0,ds.TIMEOUT=8,ds.HTTP_ERROR=6,ks=ds,ou.COMPLETE="complete",xh=ou,eu.EventType=si,si.OPEN="a",si.CLOSE="b",si.ERROR="c",si.MESSAGE="d",Gt.prototype.listen=Gt.prototype.K,Ti=eu,kh=di,$t.prototype.listenOnce=$t.prototype.L,$t.prototype.getLastError=$t.prototype.Ka,$t.prototype.getLastErrorCode=$t.prototype.Ba,$t.prototype.getStatus=$t.prototype.Z,$t.prototype.getResponseJson=$t.prototype.Oa,$t.prototype.getResponseText=$t.prototype.oa,$t.prototype.send=$t.prototype.ea,$t.prototype.setWithCredentials=$t.prototype.Ha,Vh=$t}).apply(typeof Ps<"u"?Ps:typeof self<"u"?self:typeof window<"u"?window:{});const fc="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}he.UNAUTHENTICATED=new he(null),he.GOOGLE_CREDENTIALS=new he("google-credentials-uid"),he.FIRST_PARTY=new he("first-party-uid"),he.MOCK_USER=new he("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ei="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _r=new Ah("@firebase/firestore");function yi(){return _r.logLevel}function W(i,...t){if(_r.logLevel<=pt.DEBUG){const e=t.map(Ja);_r.debug(`Firestore (${ei}): ${i}`,...e)}}function An(i,...t){if(_r.logLevel<=pt.ERROR){const e=t.map(Ja);_r.error(`Firestore (${ei}): ${i}`,...e)}}function Br(i,...t){if(_r.logLevel<=pt.WARN){const e=t.map(Ja);_r.warn(`Firestore (${ei}): ${i}`,...e)}}function Ja(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(i="Unexpected state"){const t=`FIRESTORE (${ei}) INTERNAL ASSERTION FAILED: `+i;throw An(t),new Error(t)}function St(i,t){i||it()}function ct(i,t){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends ti{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class qp{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(he.UNAUTHENTICATED))}shutdown(){}}class Gp{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class Hp{constructor(t){this.t=t,this.currentUser=he.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const r=u=>this.i!==n?(n=this.i,e(u)):Promise.resolve();let s=new En;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new En,t.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new En)}},0),o()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(n=>this.i!==t?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(St(typeof n.accessToken=="string"),new Lh(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return St(t===null||typeof t=="string"),new he(t)}}class Kp{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=he.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Wp{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new Kp(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(he.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qp{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Xp{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};const r=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(St(typeof e.token=="string"),this.R=e.token,new Qp(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(i){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(i);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let n=0;n<i;n++)e[n]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const r=Yp(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<e&&(n+=t.charAt(r[s]%t.length))}return n}}function wt(i,t){return i<t?-1:i>t?1:0}function Ur(i,t,e){return i.length===t.length&&i.every((n,r)=>e(n,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Y(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Y(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Y(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Y(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Jt.fromMillis(Date.now())}static fromDate(t){return Jt.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Jt(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?wt(this.nanoseconds,t.nanoseconds):wt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(t){this.timestamp=t}static fromTimestamp(t){return new ot(t)}static min(){return new ot(new Jt(0,0))}static max(){return new ot(new Jt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(t,e,n){e===void 0?e=0:e>t.length&&it(),n===void 0?n=t.length-e:n>t.length-e&&it(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return Li.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Li?t.forEach(n=>{e.push(n)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.get(r),o=e.get(r);if(s<o)return-1;if(s>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Vt extends Li{construct(t,e,n){return new Vt(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new Y(F.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter(r=>r.length>0))}return new Vt(e)}static emptyPath(){return new Vt([])}}const Jp=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class oe extends Li{construct(t,e,n){return new oe(t,e,n)}static isValidIdentifier(t){return Jp.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),oe.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new oe(["__name__"])}static fromServerFormat(t){const e=[];let n="",r=0;const s=()=>{if(n.length===0)throw new Y(F.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let o=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new Y(F.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Y(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=u,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(n+=l,r++):(s(),r++)}if(s(),o)throw new Y(F.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new oe(e)}static emptyPath(){return new oe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(t){this.path=t}static fromPath(t){return new et(Vt.fromString(t))}static fromName(t){return new et(Vt.fromString(t).popFirst(5))}static empty(){return new et(Vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Vt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Vt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new et(new Vt(t.slice()))}}function Zp(i,t){const e=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,r=ot.fromTimestamp(n===1e9?new Jt(e+1,0):new Jt(e,n));return new zn(r,et.empty(),t)}function tg(i){return new zn(i.readTime,i.key,-1)}class zn{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new zn(ot.min(),et.empty(),-1)}static max(){return new zn(ot.max(),et.empty(),-1)}}function eg(i,t){let e=i.readTime.compareTo(t.readTime);return e!==0?e:(e=et.comparator(i.documentKey,t.documentKey),e!==0?e:wt(i.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rg{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function es(i){if(i.code!==F.FAILED_PRECONDITION||i.message!==ng)throw i;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new $((n,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(n,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof $?e:$.resolve(e)}catch(e){return $.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):$.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):$.reject(e)}static resolve(t){return new $((e,n)=>{e(t)})}static reject(t){return new $((e,n)=>{n(t)})}static waitFor(t){return new $((e,n)=>{let r=0,s=0,o=!1;t.forEach(l=>{++r,l.next(()=>{++s,o&&s===r&&e()},u=>n(u))}),o=!0,s===r&&e()})}static or(t){let e=$.resolve(!1);for(const n of t)e=e.next(r=>r?$.resolve(r):n());return e}static forEach(t,e){const n=[];return t.forEach((r,s)=>{n.push(e.call(this,r,s))}),this.waitFor(n)}static mapArray(t,e){return new $((n,r)=>{const s=t.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const c=u;e(t[c]).next(h=>{o[c]=h,++l,l===s&&n(o)},h=>r(h))}})}static doWhile(t,e){return new $((n,r)=>{const s=()=>{t()===!0?e().next(()=>{s()},r):n()};s()})}}function ig(i){const t=i.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function ns(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=n=>this.ie(n),this.se=n=>e.writeSequenceNumber(n))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}Za.oe=-1;function ho(i){return i==null}function Hs(i){return i===0&&1/i==-1/0}function sg(i){return typeof i=="number"&&Number.isInteger(i)&&!Hs(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(i){let t=0;for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t++;return t}function Tr(i,t){for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t(e,i[e])}function $h(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(t,e){this.comparator=t,this.root=e||ie.EMPTY}insert(t,e){return new Ft(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ie.BLACK,null,null))}remove(t){return new Ft(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ie.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(n===0)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,n)=>(t(e,n),!1))}toString(){const t=[];return this.inorderTraversal((e,n)=>(t.push(`${e}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Cs(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Cs(this.root,t,this.comparator,!1)}getReverseIterator(){return new Cs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Cs(this.root,t,this.comparator,!0)}}class Cs{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?n(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ie{constructor(t,e,n,r,s){this.key=t,this.value=e,this.color=n??ie.RED,this.left=r??ie.EMPTY,this.right=s??ie.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,s){return new ie(t??this.key,e??this.value,n??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const s=n(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,n),null):s===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ie.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return ie.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ie.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ie.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const t=this.left.check();if(t!==this.right.check())throw it();return t+(this.isRed()?0:1)}}ie.EMPTY=null,ie.RED=!0,ie.BLACK=!1;ie.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(t,e,n,r,s){return this}insert(t,e,n){return new ie(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t){this.comparator=t,this.data=new Ft(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,n)=>(t(e),!1))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new _c(this.data.getIterator())}getIteratorFrom(t){return new _c(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(n=>{e=e.add(n)}),e}isEqual(t){if(!(t instanceof ae)||this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=n.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new ae(this.comparator);return e.data=t,e}}class _c{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(t){this.fields=t,t.sort(oe.comparator)}static empty(){return new Le([])}unionWith(t){let e=new ae(oe.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new Le(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Ur(this.fields,t.fields,(e,n)=>e.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Bh("Invalid base64 string: "+s):s}}(t);return new pe(e)}static fromUint8Array(t){const e=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new pe(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return wt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}pe.EMPTY_BYTE_STRING=new pe("");const og=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jn(i){if(St(!!i),typeof i=="string"){let t=0;const e=og.exec(i);if(St(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Wt(i.seconds),nanos:Wt(i.nanos)}}function Wt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function mr(i){return typeof i=="string"?pe.fromBase64String(i):pe.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(i){var t,e;return((e=(((t=i==null?void 0:i.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function el(i){const t=i.mapValue.fields.__previous_value__;return tl(t)?el(t):t}function Fi(i){const t=jn(i.mapValue.fields.__local_write_time__.timestampValue);return new Jt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(t,e,n,r,s,o,l,u,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}class $i{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new $i("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof $i&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function pr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?tl(i)?4:lg(i)?9007199254740991:10:it()}function _n(i,t){if(i===t)return!0;const e=pr(i);if(e!==pr(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return Fi(i).isEqual(Fi(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=jn(r.timestampValue),l=jn(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(i,t);case 5:return i.stringValue===t.stringValue;case 6:return function(r,s){return mr(r.bytesValue).isEqual(mr(s.bytesValue))}(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return function(r,s){return Wt(r.geoPointValue.latitude)===Wt(s.geoPointValue.latitude)&&Wt(r.geoPointValue.longitude)===Wt(s.geoPointValue.longitude)}(i,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Wt(r.integerValue)===Wt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Wt(r.doubleValue),l=Wt(s.doubleValue);return o===l?Hs(o)===Hs(l):isNaN(o)&&isNaN(l)}return!1}(i,t);case 9:return Ur(i.arrayValue.values||[],t.arrayValue.values||[],_n);case 10:return function(r,s){const o=r.mapValue.fields||{},l=s.mapValue.fields||{};if(dc(o)!==dc(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!_n(o[u],l[u])))return!1;return!0}(i,t);default:return it()}}function Bi(i,t){return(i.values||[]).find(e=>_n(e,t))!==void 0}function zr(i,t){if(i===t)return 0;const e=pr(i),n=pr(t);if(e!==n)return wt(e,n);switch(e){case 0:case 9007199254740991:return 0;case 1:return wt(i.booleanValue,t.booleanValue);case 2:return function(s,o){const l=Wt(s.integerValue||s.doubleValue),u=Wt(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(i,t);case 3:return mc(i.timestampValue,t.timestampValue);case 4:return mc(Fi(i),Fi(t));case 5:return wt(i.stringValue,t.stringValue);case 6:return function(s,o){const l=mr(s),u=mr(o);return l.compareTo(u)}(i.bytesValue,t.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const h=wt(l[c],u[c]);if(h!==0)return h}return wt(l.length,u.length)}(i.referenceValue,t.referenceValue);case 8:return function(s,o){const l=wt(Wt(s.latitude),Wt(o.latitude));return l!==0?l:wt(Wt(s.longitude),Wt(o.longitude))}(i.geoPointValue,t.geoPointValue);case 9:return function(s,o){const l=s.values||[],u=o.values||[];for(let c=0;c<l.length&&c<u.length;++c){const h=zr(l[c],u[c]);if(h)return h}return wt(l.length,u.length)}(i.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===Ss.mapValue&&o===Ss.mapValue)return 0;if(s===Ss.mapValue)return 1;if(o===Ss.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let d=0;d<u.length&&d<h.length;++d){const m=wt(u[d],h[d]);if(m!==0)return m;const p=zr(l[u[d]],c[h[d]]);if(p!==0)return p}return wt(u.length,h.length)}(i.mapValue,t.mapValue);default:throw it()}}function mc(i,t){if(typeof i=="string"&&typeof t=="string"&&i.length===t.length)return wt(i,t);const e=jn(i),n=jn(t),r=wt(e.seconds,n.seconds);return r!==0?r:wt(e.nanos,n.nanos)}function jr(i){return va(i)}function va(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(e){const n=jn(e);return`time(${n.seconds},${n.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(e){return mr(e).toBase64()}(i.bytesValue):"referenceValue"in i?function(e){return et.fromName(e).toString()}(i.referenceValue):"geoPointValue"in i?function(e){return`geo(${e.latitude},${e.longitude})`}(i.geoPointValue):"arrayValue"in i?function(e){let n="[",r=!0;for(const s of e.values||[])r?r=!1:n+=",",n+=va(s);return n+"]"}(i.arrayValue):"mapValue"in i?function(e){const n=Object.keys(e.fields||{}).sort();let r="{",s=!0;for(const o of n)s?s=!1:r+=",",r+=`${o}:${va(e.fields[o])}`;return r+"}"}(i.mapValue):it()}function Ta(i){return!!i&&"integerValue"in i}function nl(i){return!!i&&"arrayValue"in i}function pc(i){return!!i&&"nullValue"in i}function gc(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function xs(i){return!!i&&"mapValue"in i}function Ri(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const t={mapValue:{fields:{}}};return Tr(i.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Ri(n)),t}if(i.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(i.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Ri(i.arrayValue.values[e]);return t}return Object.assign({},i)}function lg(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(t){this.value=t}static empty(){return new be({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!xs(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ri(e)}setAll(t){let e=oe.emptyPath(),n={},r=[];t.forEach((o,l)=>{if(!e.isImmediateParentOf(l)){const u=this.getFieldsMap(e);this.applyChanges(u,n,r),n={},r=[],e=l.popLast()}o?n[l.lastSegment()]=Ri(o):r.push(l.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,n,r)}delete(t){const e=this.field(t.popLast());xs(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return _n(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];xs(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){Tr(e,(r,s)=>t[r]=s);for(const r of n)delete t[r]}clone(){return new be(Ri(this.value))}}function Uh(i){const t=[];return Tr(i.fields,(e,n)=>{const r=new oe([e]);if(xs(n)){const s=Uh(n.mapValue).fields;if(s.length===0)t.push(r);else for(const o of s)t.push(r.child(o))}else t.push(r)}),new Le(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(t,e,n,r,s,o,l){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(t){return new fe(t,0,ot.min(),ot.min(),ot.min(),be.empty(),0)}static newFoundDocument(t,e,n,r){return new fe(t,1,e,ot.min(),n,r,0)}static newNoDocument(t,e){return new fe(t,2,e,ot.min(),ot.min(),be.empty(),0)}static newUnknownDocument(t,e){return new fe(t,3,e,ot.min(),ot.min(),be.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=be.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=be.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ot.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof fe&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new fe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(t,e){this.position=t,this.inclusive=e}}function yc(i,t,e){let n=0;for(let r=0;r<i.position.length;r++){const s=t[r],o=i.position[r];if(s.field.isKeyField()?n=et.comparator(et.fromName(o.referenceValue),e.key):n=zr(o,e.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function vc(i,t){if(i===null)return t===null;if(t===null||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let e=0;e<i.position.length;e++)if(!_n(i.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(t,e="asc"){this.field=t,this.dir=e}}function ug(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{}class Yt extends zh{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,n):new hg(t,e,n):e==="array-contains"?new _g(t,n):e==="in"?new mg(t,n):e==="not-in"?new pg(t,n):e==="array-contains-any"?new gg(t,n):new Yt(t,e,n)}static createKeyFieldInFilter(t,e,n){return e==="in"?new fg(t,n):new dg(t,n)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(zr(e,this.value)):e!==null&&pr(this.value)===pr(e)&&this.matchesComparison(zr(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return it()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mn extends zh{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new mn(t,e)}matches(t){return jh(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function jh(i){return i.op==="and"}function qh(i){return cg(i)&&jh(i)}function cg(i){for(const t of i.filters)if(t instanceof mn)return!1;return!0}function Ea(i){if(i instanceof Yt)return i.field.canonicalString()+i.op.toString()+jr(i.value);if(qh(i))return i.filters.map(t=>Ea(t)).join(",");{const t=i.filters.map(e=>Ea(e)).join(",");return`${i.op}(${t})`}}function Gh(i,t){return i instanceof Yt?function(n,r){return r instanceof Yt&&n.op===r.op&&n.field.isEqual(r.field)&&_n(n.value,r.value)}(i,t):i instanceof mn?function(n,r){return r instanceof mn&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((s,o,l)=>s&&Gh(o,r.filters[l]),!0):!1}(i,t):void it()}function Hh(i){return i instanceof Yt?function(e){return`${e.field.canonicalString()} ${e.op} ${jr(e.value)}`}(i):i instanceof mn?function(e){return e.op.toString()+" {"+e.getFilters().map(Hh).join(" ,")+"}"}(i):"Filter"}class hg extends Yt{constructor(t,e,n){super(t,e,n),this.key=et.fromName(n.referenceValue)}matches(t){const e=et.comparator(t.key,this.key);return this.matchesComparison(e)}}class fg extends Yt{constructor(t,e){super(t,"in",e),this.keys=Kh("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class dg extends Yt{constructor(t,e){super(t,"not-in",e),this.keys=Kh("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Kh(i,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(n=>et.fromName(n.referenceValue))}class _g extends Yt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return nl(e)&&Bi(e.arrayValue,this.value)}}class mg extends Yt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Bi(this.value.arrayValue,e)}}class pg extends Yt{constructor(t,e){super(t,"not-in",e)}matches(t){if(Bi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!Bi(this.value.arrayValue,e)}}class gg extends Yt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!nl(e)||!e.arrayValue.values)&&e.arrayValue.values.some(n=>Bi(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(t,e=null,n=[],r=[],s=null,o=null,l=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function Tc(i,t=null,e=[],n=[],r=null,s=null,o=null){return new yg(i,t,e,n,r,s,o)}function rl(i){const t=ct(i);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(n=>Ea(n)).join(","),e+="|ob:",e+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),ho(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>jr(n)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>jr(n)).join(",")),t.ue=e}return t.ue}function il(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<i.orderBy.length;e++)if(!ug(i.orderBy[e],t.orderBy[e]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let e=0;e<i.filters.length;e++)if(!Gh(i.filters[e],t.filters[e]))return!1;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!vc(i.startAt,t.startAt)&&vc(i.endAt,t.endAt)}function wa(i){return et.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(t,e=null,n=[],r=[],s=null,o="F",l=null,u=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function vg(i,t,e,n,r,s,o,l){return new fo(i,t,e,n,r,s,o,l)}function _o(i){return new fo(i)}function Ec(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Tg(i){return i.collectionGroup!==null}function Pi(i){const t=ct(i);if(t.ce===null){t.ce=[];const e=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ae(oe.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.ce.push(new Ws(s,n))}),e.has(oe.keyField().canonicalString())||t.ce.push(new Ws(oe.keyField(),n))}return t.ce}function cn(i){const t=ct(i);return t.le||(t.le=Eg(t,Pi(i))),t.le}function Eg(i,t){if(i.limitType==="F")return Tc(i.path,i.collectionGroup,t,i.filters,i.limit,i.startAt,i.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Ws(r.field,s)});const e=i.endAt?new Ks(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new Ks(i.startAt.position,i.startAt.inclusive):null;return Tc(i.path,i.collectionGroup,t,i.filters,i.limit,e,n)}}function Ia(i,t,e){return new fo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,e,i.startAt,i.endAt)}function mo(i,t){return il(cn(i),cn(t))&&i.limitType===t.limitType}function Wh(i){return`${rl(cn(i))}|lt:${i.limitType}`}function Dr(i){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>Hh(r)).join(", ")}]`),ho(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>jr(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>jr(r)).join(",")),`Target(${n})`}(cn(i))}; limitType=${i.limitType})`}function po(i,t){return t.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):et.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(i,t)&&function(n,r){for(const s of Pi(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(i,t)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(i,t)&&function(n,r){return!(n.startAt&&!function(o,l,u){const c=yc(o,l,u);return o.inclusive?c<=0:c<0}(n.startAt,Pi(n),r)||n.endAt&&!function(o,l,u){const c=yc(o,l,u);return o.inclusive?c>=0:c>0}(n.endAt,Pi(n),r))}(i,t)}function wg(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Qh(i){return(t,e)=>{let n=!1;for(const r of Pi(i)){const s=Ig(r,t,e);if(s!==0)return s;n=n||r.field.isKeyField()}return 0}}function Ig(i,t,e){const n=i.field.isKeyField()?et.comparator(t.key,e.key):function(s,o,l){const u=o.data.field(s),c=l.data.field(s);return u!==null&&c!==null?zr(u,c):it()}(i.field,t,e);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return it()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(n!==void 0){for(const[r,s]of n)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return this.inner[n]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return n.length===1?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Tr(this.inner,(e,n)=>{for(const[r,s]of n)t(r,s)})}isEmpty(){return $h(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ag=new Ft(et.comparator);function bn(){return Ag}const Xh=new Ft(et.comparator);function Ei(...i){let t=Xh;for(const e of i)t=t.insert(e.key,e);return t}function Yh(i){let t=Xh;return i.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function ir(){return Ci()}function Jh(){return Ci()}function Ci(){return new ni(i=>i.toString(),(i,t)=>i.isEqual(t))}const bg=new Ft(et.comparator),Rg=new ae(et.comparator);function ft(...i){let t=Rg;for(const e of i)t=t.add(e);return t}const Pg=new ae(wt);function Cg(){return Pg}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(i,t){if(i.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hs(t)?"-0":t}}function tf(i){return{integerValue:""+i}}function Sg(i,t){return sg(t)?tf(t):Zh(i,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(){this._=void 0}}function Dg(i,t,e){return i instanceof Qs?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&tl(s)&&(s=el(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(e,t):i instanceof Ui?nf(i,t):i instanceof zi?rf(i,t):function(r,s){const o=ef(r,s),l=wc(o)+wc(r.Pe);return Ta(o)&&Ta(r.Pe)?tf(l):Zh(r.serializer,l)}(i,t)}function Vg(i,t,e){return i instanceof Ui?nf(i,t):i instanceof zi?rf(i,t):e}function ef(i,t){return i instanceof Xs?function(n){return Ta(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}class Qs extends go{}class Ui extends go{constructor(t){super(),this.elements=t}}function nf(i,t){const e=sf(t);for(const n of i.elements)e.some(r=>_n(r,n))||e.push(n);return{arrayValue:{values:e}}}class zi extends go{constructor(t){super(),this.elements=t}}function rf(i,t){let e=sf(t);for(const n of i.elements)e=e.filter(r=>!_n(r,n));return{arrayValue:{values:e}}}class Xs extends go{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function wc(i){return Wt(i.integerValue||i.doubleValue)}function sf(i){return nl(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function kg(i,t){return i.field.isEqual(t.field)&&function(n,r){return n instanceof Ui&&r instanceof Ui||n instanceof zi&&r instanceof zi?Ur(n.elements,r.elements,_n):n instanceof Xs&&r instanceof Xs?_n(n.Pe,r.Pe):n instanceof Qs&&r instanceof Qs}(i.transform,t.transform)}class xg{constructor(t,e){this.version=t,this.transformResults=e}}class $e{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new $e}static exists(t){return new $e(void 0,t)}static updateTime(t){return new $e(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Os(i,t){return i.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(i.updateTime):i.exists===void 0||i.exists===t.isFoundDocument()}class yo{}function of(i,t){if(!i.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return i.isNoDocument()?new sl(i.key,$e.none()):new rs(i.key,i.data,$e.none());{const e=i.data,n=be.empty();let r=new ae(oe.comparator);for(let s of t.fields)if(!r.has(s)){let o=e.field(s);o===null&&s.length>1&&(s=s.popLast(),o=e.field(s)),o===null?n.delete(s):n.set(s,o),r=r.add(s)}return new Wn(i.key,n,new Le(r.toArray()),$e.none())}}function Og(i,t,e){i instanceof rs?function(r,s,o){const l=r.value.clone(),u=Ac(r.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(i,t,e):i instanceof Wn?function(r,s,o){if(!Os(r.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Ac(r.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(af(r)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(i,t,e):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,e)}function Si(i,t,e,n){return i instanceof rs?function(s,o,l,u){if(!Os(s.precondition,o))return l;const c=s.value.clone(),h=bc(s.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(i,t,e,n):i instanceof Wn?function(s,o,l,u){if(!Os(s.precondition,o))return l;const c=bc(s.fieldTransforms,u,o),h=o.data;return h.setAll(af(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(i,t,e,n):function(s,o,l){return Os(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(i,t,e)}function Mg(i,t){let e=null;for(const n of i.fieldTransforms){const r=t.data.field(n.field),s=ef(n.transform,r||null);s!=null&&(e===null&&(e=be.empty()),e.set(n.field,s))}return e||null}function Ic(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Ur(n,r,(s,o)=>kg(s,o))}(i.fieldTransforms,t.fieldTransforms)&&(i.type===0?i.value.isEqual(t.value):i.type!==1||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask))}class rs extends yo{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Wn extends yo{constructor(t,e,n,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function af(i){const t=new Map;return i.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const n=i.data.field(e);t.set(e,n)}}),t}function Ac(i,t,e){const n=new Map;St(i.length===e.length);for(let r=0;r<e.length;r++){const s=i[r],o=s.transform,l=t.data.field(s.field);n.set(s.field,Vg(o,l,e[r]))}return n}function bc(i,t,e){const n=new Map;for(const r of i){const s=r.transform,o=e.data.field(r.field);n.set(r.field,Dg(s,o,t))}return n}class sl extends yo{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ng extends yo{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&Og(s,t,n[r])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Si(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Si(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=Jh();return this.mutations.forEach(r=>{const s=t.get(r.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=e.has(r.key)?null:l;const u=of(o,l);u!==null&&n.set(r.key,u),o.isValidDocument()||o.convertToNoDocument(ot.min())}),n}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),ft())}isEqual(t){return this.batchId===t.batchId&&Ur(this.mutations,t.mutations,(e,n)=>Ic(e,n))&&Ur(this.baseMutations,t.baseMutations,(e,n)=>Ic(e,n))}}class ol{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){St(t.mutations.length===n.length);let r=function(){return bg}();const s=t.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,n[o].version);return new ol(t,e,n,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt,mt;function Bg(i){switch(i){default:return it();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function lf(i){if(i===void 0)return An("GRPC error has no .code"),F.UNKNOWN;switch(i){case Kt.OK:return F.OK;case Kt.CANCELLED:return F.CANCELLED;case Kt.UNKNOWN:return F.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return F.INTERNAL;case Kt.UNAVAILABLE:return F.UNAVAILABLE;case Kt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Kt.NOT_FOUND:return F.NOT_FOUND;case Kt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Kt.ABORTED:return F.ABORTED;case Kt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Kt.DATA_LOSS:return F.DATA_LOSS;default:return it()}}(mt=Kt||(Kt={}))[mt.OK=0]="OK",mt[mt.CANCELLED=1]="CANCELLED",mt[mt.UNKNOWN=2]="UNKNOWN",mt[mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mt[mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mt[mt.NOT_FOUND=5]="NOT_FOUND",mt[mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",mt[mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",mt[mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",mt[mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mt[mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mt[mt.ABORTED=10]="ABORTED",mt[mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",mt[mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",mt[mt.INTERNAL=13]="INTERNAL",mt[mt.UNAVAILABLE=14]="UNAVAILABLE",mt[mt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zg=new ar([4294967295,4294967295],0);function Rc(i){const t=Ug().encode(i),e=new Dh;return e.update(t),new Uint8Array(e.digest())}function Pc(i){const t=new DataView(i.buffer),e=t.getUint32(0,!0),n=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new ar([e,n],0),new ar([r,s],0)]}class al{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new wi(`Invalid padding: ${e}`);if(n<0)throw new wi(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new wi(`Invalid hash count: ${n}`);if(t.length===0&&e!==0)throw new wi(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=ar.fromNumber(this.Ie)}Ee(t,e,n){let r=t.add(e.multiply(ar.fromNumber(n)));return r.compare(zg)===1&&(r=new ar([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const e=Rc(t),[n,r]=Pc(e);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,r,s);if(!this.de(o))return!1}return!0}static create(t,e,n){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new al(s,r,e);return n.forEach(l=>o.insert(l)),o}insert(t){if(this.Ie===0)return;const e=Rc(t),[n,r]=Pc(e);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,r,s);this.Ae(o)}}Ae(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class wi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(t,e,n,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const r=new Map;return r.set(t,is.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new vo(ot.min(),r,new Ft(wt),bn(),ft())}}class is{constructor(t,e,n,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new is(n,e,ft(),ft(),ft())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(t,e,n,r){this.Re=t,this.removedTargetIds=e,this.key=n,this.Ve=r}}class uf{constructor(t,e){this.targetId=t,this.me=e}}class cf{constructor(t,e,n=pe.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class Cc{constructor(){this.fe=0,this.ge=Dc(),this.pe=pe.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=ft(),e=ft(),n=ft();return this.ge.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:it()}}),new is(this.pe,this.ye,t,e,n)}ve(){this.we=!1,this.ge=Dc()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,St(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class jg{constructor(t){this.Le=t,this.Be=new Map,this.ke=bn(),this.qe=Sc(),this.Qe=new Ft(wt)}Ke(t){for(const e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(const e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{const n=this.Ge(e);switch(t.state){case 0:this.ze(e)&&n.De(t.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(t.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(n.Ne(),n.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),n.De(t.resumeToken));break;default:it()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((n,r)=>{this.ze(r)&&e(r)})}He(t){const e=t.targetId,n=t.me.count,r=this.Je(e);if(r){const s=r.target;if(wa(s))if(n===0){const o=new et(s.path);this.Ue(e,o,fe.newNoDocument(o,ot.min()))}else St(n===1);else{const o=this.Ye(e);if(o!==n){const l=this.Ze(t),u=l?this.Xe(l,t,o):1;if(u!==0){this.je(e);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,c)}}}}}Ze(t){const e=t.me.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=e;let o,l;try{o=mr(n).toUint8Array()}catch(u){if(u instanceof Bh)return Br("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new al(o,r,s)}catch(u){return Br(u instanceof wi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(t,e,n){return e.me.count===n-this.nt(t,e.targetId)?0:2}nt(t,e){const n=this.Le.getRemoteKeysForTarget(e);let r=0;return n.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.Ue(e,s,null),r++)}),r}rt(t){const e=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&wa(l.target)){const u=new et(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,fe.newNoDocument(u,t))}s.be&&(e.set(o,s.Ce()),s.ve())}});let n=ft();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const r=new vo(t,e,this.Qe,this.ke,n);return this.ke=bn(),this.qe=Sc(),this.Qe=new Ft(wt),r}$e(t,e){if(!this.ze(t))return;const n=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,n),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,n){if(!this.ze(t))return;const r=this.Ge(t);this.it(t,e)?r.Fe(e,1):r.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),n&&(this.ke=this.ke.insert(e,n))}removeTarget(t){this.Be.delete(t)}Ye(t){const e=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new Cc,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new ae(wt),this.qe=this.qe.insert(t,e)),e}ze(t){const e=this.Je(t)!==null;return e||W("WatchChangeAggregator","Detected inactive target",t),e}Je(t){const e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Cc),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function Sc(){return new Ft(et.comparator)}function Dc(){return new Ft(et.comparator)}const qg={asc:"ASCENDING",desc:"DESCENDING"},Gg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Hg={and:"AND",or:"OR"};class Kg{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Aa(i,t){return i.useProto3Json||ho(t)?t:{value:t}}function Ys(i,t){return i.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function hf(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function Wg(i,t){return Ys(i,t.toTimestamp())}function hn(i){return St(!!i),ot.fromTimestamp(function(e){const n=jn(e);return new Jt(n.seconds,n.nanos)}(i))}function ll(i,t){return ba(i,t).canonicalString()}function ba(i,t){const e=function(r){return new Vt(["projects",r.projectId,"databases",r.database])}(i).child("documents");return t===void 0?e:e.child(t)}function ff(i){const t=Vt.fromString(i);return St(gf(t)),t}function Ra(i,t){return ll(i.databaseId,t.path)}function Yo(i,t){const e=ff(t);if(e.get(1)!==i.databaseId.projectId)throw new Y(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+i.databaseId.projectId);if(e.get(3)!==i.databaseId.database)throw new Y(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+i.databaseId.database);return new et(_f(e))}function df(i,t){return ll(i.databaseId,t)}function Qg(i){const t=ff(i);return t.length===4?Vt.emptyPath():_f(t)}function Pa(i){return new Vt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function _f(i){return St(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function Vc(i,t,e){return{name:Ra(i,t),fields:e.value.mapValue.fields}}function Xg(i,t){let e;if("targetChange"in t){t.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:it()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(St(h===void 0||typeof h=="string"),pe.fromBase64String(h||"")):(St(h===void 0||h instanceof Buffer||h instanceof Uint8Array),pe.fromUint8Array(h||new Uint8Array))}(i,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(c){const h=c.code===void 0?F.UNKNOWN:lf(c.code);return new Y(h,c.message||"")}(o);e=new cf(n,r,s,l||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const r=Yo(i,n.document.name),s=hn(n.document.updateTime),o=n.document.createTime?hn(n.document.createTime):ot.min(),l=new be({mapValue:{fields:n.document.fields}}),u=fe.newFoundDocument(r,s,o,l),c=n.targetIds||[],h=n.removedTargetIds||[];e=new Ms(c,h,u.key,u)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const r=Yo(i,n.document),s=n.readTime?hn(n.readTime):ot.min(),o=fe.newNoDocument(r,s),l=n.removedTargetIds||[];e=new Ms([],l,o.key,o)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const r=Yo(i,n.document),s=n.removedTargetIds||[];e=new Ms([],s,r,null)}else{if(!("filter"in t))return it();{t.filter;const n=t.filter;n.targetId;const{count:r=0,unchangedNames:s}=n,o=new $g(r,s),l=n.targetId;e=new uf(l,o)}}return e}function Yg(i,t){let e;if(t instanceof rs)e={update:Vc(i,t.key,t.value)};else if(t instanceof sl)e={delete:Ra(i,t.key)};else if(t instanceof Wn)e={update:Vc(i,t.key,t.data),updateMask:oy(t.fieldMask)};else{if(!(t instanceof Ng))return it();e={verify:Ra(i,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(n=>function(s,o){const l=o.transform;if(l instanceof Qs)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ui)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof zi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Xs)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw it()}(0,n))),t.precondition.isNone||(e.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:Wg(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:it()}(i,t.precondition)),e}function Jg(i,t){return i&&i.length>0?(St(t!==void 0),i.map(e=>function(r,s){let o=r.updateTime?hn(r.updateTime):hn(s);return o.isEqual(ot.min())&&(o=hn(s)),new xg(o,r.transformResults||[])}(e,t))):[]}function Zg(i,t){return{documents:[df(i,t.path)]}}function ty(i,t){const e={structuredQuery:{}},n=t.path;let r;t.collectionGroup!==null?(r=n,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=n.popLast(),e.structuredQuery.from=[{collectionId:n.lastSegment()}]),e.parent=df(i,r);const s=function(c){if(c.length!==0)return pf(mn.create(c,"and"))}(t.filters);s&&(e.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:Vr(m.field),direction:ry(m.dir)}}(h))}(t.orderBy);o&&(e.structuredQuery.orderBy=o);const l=Aa(i,t.limit);return l!==null&&(e.structuredQuery.limit=l),t.startAt&&(e.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{_t:e,parent:r}}function ey(i){let t=Qg(i.parent);const e=i.structuredQuery,n=e.from?e.from.length:0;let r=null;if(n>0){St(n===1);const h=e.from[0];h.allDescendants?r=h.collectionId:t=t.child(h.collectionId)}let s=[];e.where&&(s=function(d){const m=mf(d);return m instanceof mn&&qh(m)?m.getFilters():[m]}(e.where));let o=[];e.orderBy&&(o=function(d){return d.map(m=>function(y){return new Ws(kr(y.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(m))}(e.orderBy));let l=null;e.limit&&(l=function(d){let m;return m=typeof d=="object"?d.value:d,ho(m)?null:m}(e.limit));let u=null;e.startAt&&(u=function(d){const m=!!d.before,p=d.values||[];return new Ks(p,m)}(e.startAt));let c=null;return e.endAt&&(c=function(d){const m=!d.before,p=d.values||[];return new Ks(p,m)}(e.endAt)),vg(t,r,o,s,l,"F",u,c)}function ny(i,t){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return it()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function mf(i){return i.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=kr(e.unaryFilter.field);return Yt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=kr(e.unaryFilter.field);return Yt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=kr(e.unaryFilter.field);return Yt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=kr(e.unaryFilter.field);return Yt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return it()}}(i):i.fieldFilter!==void 0?function(e){return Yt.create(kr(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(e.fieldFilter.op),e.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(e){return mn.create(e.compositeFilter.filters.map(n=>mf(n)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return it()}}(e.compositeFilter.op))}(i):it()}function ry(i){return qg[i]}function iy(i){return Gg[i]}function sy(i){return Hg[i]}function Vr(i){return{fieldPath:i.canonicalString()}}function kr(i){return oe.fromServerFormat(i.fieldPath)}function pf(i){return i instanceof Yt?function(e){if(e.op==="=="){if(gc(e.value))return{unaryFilter:{field:Vr(e.field),op:"IS_NAN"}};if(pc(e.value))return{unaryFilter:{field:Vr(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(gc(e.value))return{unaryFilter:{field:Vr(e.field),op:"IS_NOT_NAN"}};if(pc(e.value))return{unaryFilter:{field:Vr(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vr(e.field),op:iy(e.op),value:e.value}}}(i):i instanceof mn?function(e){const n=e.getFilters().map(r=>pf(r));return n.length===1?n[0]:{compositeFilter:{op:sy(e.op),filters:n}}}(i):it()}function oy(i){const t=[];return i.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function gf(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(t,e,n,r,s=ot.min(),o=ot.min(),l=pe.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new xn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new xn(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new xn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new xn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(t){this.ct=t}}function ly(i){const t=ey({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Ia(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(){this._n=new cy}addToCollectionParentIndex(t,e){return this._n.add(e),$.resolve()}getCollectionParents(t,e){return $.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return $.resolve()}deleteFieldIndex(t,e){return $.resolve()}deleteAllFieldIndexes(t){return $.resolve()}createTargetIndexes(t,e){return $.resolve()}getDocumentsMatchingTarget(t,e){return $.resolve(null)}getIndexType(t,e){return $.resolve(0)}getFieldIndexes(t,e){return $.resolve([])}getNextCollectionGroupToUpdate(t){return $.resolve(null)}getMinOffset(t,e){return $.resolve(zn.min())}getMinOffsetFromCollectionGroup(t,e){return $.resolve(zn.min())}updateCollectionGroup(t,e,n){return $.resolve()}updateIndexEntries(t,e){return $.resolve()}}class cy{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new ae(Vt.comparator),s=!r.has(n);return this.index[e]=r.add(n),s}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new ae(Vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new qr(0)}static Ln(){return new qr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(){this.changes=new ni(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,fe.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return n!==void 0?$.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(t,e,n,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(n=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(n!==null&&Si(n.mutation,r,Le.empty(),Jt.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(n=>this.getLocalViewOfDocuments(t,n,ft()).next(()=>n))}getLocalViewOfDocuments(t,e,n=ft()){const r=ir();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,n).next(s=>{let o=Ei();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){const n=ir();return this.populateOverlays(t,n,e).next(()=>this.computeViews(t,e,n,ft()))}populateOverlays(t,e,n){const r=[];return n.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,l)=>{e.set(o,l)})})}computeViews(t,e,n,r){let s=bn();const o=Ci(),l=function(){return Ci()}();return e.forEach((u,c)=>{const h=n.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof Wn)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Si(h.mutation,c,h.mutation.getFieldMask(),Jt.now())):o.set(c.key,Le.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((c,h)=>o.set(c,h)),e.forEach((c,h)=>{var d;return l.set(c,new fy(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),l))}recalculateAndSaveOverlays(t,e){const n=Ci();let r=new Ft((o,l)=>o-l),s=ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=e.get(u);if(c===null)return;let h=n.get(u)||Le.empty();h=l.applyToLocalView(c,h),n.set(u,h);const d=(r.get(l.batchId)||ft()).add(u);r=r.insert(l.batchId,d)})}).next(()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,h=u.value,d=Jh();h.forEach(m=>{if(!s.has(m)){const p=of(e.get(m),n.get(m));p!==null&&d.set(m,p),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,d))}return $.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,e,n,r){return function(o){return et.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Tg(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,r):this.getDocumentsMatchingCollectionQuery(t,e,n,r)}getNextDocuments(t,e,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-s.size):$.resolve(ir());let l=-1,u=s;return o.next(c=>$.forEach(c,(h,d)=>(l<d.largestBatchId&&(l=d.largestBatchId),s.get(h)?$.resolve():this.remoteDocumentCache.getEntry(t,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(t,c,s)).next(()=>this.computeViews(t,u,c,ft())).next(h=>({batchId:l,changes:Yh(h)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new et(e)).next(n=>{let r=Ei();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,n,r){const s=e.collectionGroup;let o=Ei();return this.indexManager.getCollectionParents(t,s).next(l=>$.forEach(l,u=>{const c=function(d,m){return new fo(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(e,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,c,n,r).next(h=>{h.forEach((d,m)=>{o=o.insert(d,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,s,r))).next(o=>{s.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,fe.newInvalidDocument(h)))});let l=Ei();return o.forEach((u,c)=>{const h=s.get(u);h!==void 0&&Si(h.mutation,c,Le.empty(),Jt.now()),po(e,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return $.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:hn(r.createTime)}}(e)),$.resolve()}getNamedQuery(t,e){return $.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,function(r){return{name:r.name,query:ly(r.bundledQuery),readTime:hn(r.readTime)}}(e)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(){this.overlays=new Ft(et.comparator),this.hr=new Map}getOverlay(t,e){return $.resolve(this.overlays.get(e))}getOverlays(t,e){const n=ir();return $.forEach(e,r=>this.getOverlay(t,r).next(s=>{s!==null&&n.set(r,s)})).next(()=>n)}saveOverlays(t,e,n){return n.forEach((r,s)=>{this.ht(t,e,s)}),$.resolve()}removeOverlaysForBatchId(t,e,n){const r=this.hr.get(n);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(n)),$.resolve()}getOverlaysForCollection(t,e,n){const r=ir(),s=e.length+1,o=new et(e.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!e.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>n&&r.set(u.getKey(),u)}return $.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let s=new Ft((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===e&&c.largestBatchId>n){let h=s.get(c.largestBatchId);h===null&&(h=ir(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const l=ir(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>l.set(c,h)),!(l.size()>=r)););return $.resolve(l)}ht(t,e,n){const r=this.overlays.get(n.key);if(r!==null){const o=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new Fg(e,n));let s=this.hr.get(e);s===void 0&&(s=ft(),this.hr.set(e,s)),this.hr.set(e,s.add(n.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(){this.Pr=new ae(te.Ir),this.Tr=new ae(te.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){const n=new te(t,e);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(t,e){t.forEach(n=>this.addReference(n,e))}removeReference(t,e){this.Ar(new te(t,e))}Rr(t,e){t.forEach(n=>this.removeReference(n,e))}Vr(t){const e=new et(new Vt([])),n=new te(e,t),r=new te(e,t+1),s=[];return this.Tr.forEachInRange([n,r],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const e=new et(new Vt([])),n=new te(e,t),r=new te(e,t+1);let s=ft();return this.Tr.forEachInRange([n,r],o=>{s=s.add(o.key)}),s}containsKey(t){const e=new te(t,0),n=this.Pr.firstAfterOrEqual(e);return n!==null&&t.isEqual(n.key)}}class te{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return et.comparator(t.key,e.key)||wt(t.pr,e.pr)}static Er(t,e){return wt(t.pr,e.pr)||et.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new ae(te.Ir)}checkEmpty(t){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,n,r){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Lg(s,e,n,r);this.mutationQueue.push(o);for(const l of r)this.wr=this.wr.add(new te(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return $.resolve(o)}lookupMutationBatch(t,e){return $.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=this.br(n),s=r<0?0:r;return $.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new te(e,0),r=new te(e,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([n,r],o=>{const l=this.Sr(o.pr);s.push(l)}),$.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new ae(wt);return e.forEach(r=>{const s=new te(r,0),o=new te(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],l=>{n=n.add(l.pr)})}),$.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let s=n;et.isDocumentKey(s)||(s=s.child(""));const o=new te(new et(s),0);let l=new ae(wt);return this.wr.forEachWhile(u=>{const c=u.key.path;return!!n.isPrefixOf(c)&&(c.length===r&&(l=l.add(u.pr)),!0)},o),$.resolve(this.Dr(l))}Dr(t){const e=[];return t.forEach(n=>{const r=this.Sr(n);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){St(this.Cr(e.batchId,"removed")===0),this.mutationQueue.shift();let n=this.wr;return $.forEach(e.mutations,r=>{const s=new te(r.key,e.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.wr=n})}Mn(t){}containsKey(t,e){const n=new te(e,0),r=this.wr.firstAfterOrEqual(n);return $.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,$.resolve()}Cr(t,e){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(t){this.vr=t,this.docs=function(){return new Ft(et.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,r=this.docs.get(n),s=r?r.size:0,o=this.vr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return $.resolve(n?n.document.mutableCopy():fe.newInvalidDocument(e))}getEntries(t,e){let n=bn();return e.forEach(r=>{const s=this.docs.get(r);n=n.insert(r,s?s.document.mutableCopy():fe.newInvalidDocument(r))}),$.resolve(n)}getDocumentsMatchingQuery(t,e,n,r){let s=bn();const o=e.path,l=new et(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||eg(tg(h),n)<=0||(r.has(h.key)||po(e,h))&&(s=s.insert(h.key,h.mutableCopy()))}return $.resolve(s)}getAllFromCollectionGroup(t,e,n,r){it()}Fr(t,e){return $.forEach(this.docs,n=>e(n))}newChangeBuffer(t){return new yy(this)}getSize(t){return $.resolve(this.size)}}class yy extends hy{constructor(t){super(),this.ar=t}applyChanges(t){const e=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?e.push(this.ar.addEntry(t,r)):this.ar.removeEntry(n)}),$.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(t){this.persistence=t,this.Mr=new ni(e=>rl(e),il),this.lastRemoteSnapshotVersion=ot.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ul,this.targetCount=0,this.Lr=qr.Nn()}forEachTarget(t,e){return this.Mr.forEach((n,r)=>e(r)),$.resolve()}getLastRemoteSnapshotVersion(t){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return $.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Or&&(this.Or=e),$.resolve()}qn(t){this.Mr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Lr=new qr(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,$.resolve()}updateTargetData(t,e){return this.qn(e),$.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,$.resolve()}removeTargets(t,e,n){let r=0;const s=[];return this.Mr.forEach((o,l)=>{l.sequenceNumber<=e&&n.get(l.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),$.waitFor(s).next(()=>r)}getTargetCount(t){return $.resolve(this.targetCount)}getTargetData(t,e){const n=this.Mr.get(e)||null;return $.resolve(n)}addMatchingKeys(t,e,n){return this.Nr.dr(e,n),$.resolve()}removeMatchingKeys(t,e,n){this.Nr.Rr(e,n);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),$.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),$.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Nr.gr(e);return $.resolve(n)}containsKey(t,e){return $.resolve(this.Nr.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(t,e){this.Br={},this.overlays={},this.kr=new Za(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new vy(this),this.indexManager=new uy,this.remoteDocumentCache=function(r){return new gy(r)}(n=>this.referenceDelegate.Kr(n)),this.serializer=new ay(e),this.$r=new _y(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new my,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Br[t.toKey()];return n||(n=new py(e,this.referenceDelegate),this.Br[t.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,n){W("MemoryPersistence","Starting transaction:",t);const r=new Ey(this.kr.next());return this.referenceDelegate.Ur(),n(r).next(s=>this.referenceDelegate.Wr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gr(t,e){return $.or(Object.values(this.Br).map(n=>()=>n.containsKey(t,e)))}}class Ey extends rg{constructor(t){super(),this.currentSequenceNumber=t}}class cl{constructor(t){this.persistence=t,this.zr=new ul,this.jr=null}static Hr(t){return new cl(t)}get Jr(){if(this.jr)return this.jr;throw it()}addReference(t,e,n){return this.zr.addReference(n,e),this.Jr.delete(n.toString()),$.resolve()}removeReference(t,e,n){return this.zr.removeReference(n,e),this.Jr.add(n.toString()),$.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),$.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach(r=>this.Jr.add(r.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Jr.add(s.toString()))}).next(()=>n.removeTargetData(t,e))}Ur(){this.jr=new Set}Wr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Jr,n=>{const r=et.fromPath(n);return this.Yr(t,r).next(s=>{s||e.removeEntry(r,ot.min())})}).next(()=>(this.jr=null,e.apply(t)))}updateLimboDocument(t,e){return this.Yr(t,e).next(n=>{n?this.Jr.delete(e.toString()):this.Jr.add(e.toString())})}Kr(t){return 0}Yr(t,e){return $.or([()=>$.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.qi=n,this.Qi=r}static Ki(t,e){let n=ft(),r=ft();for(const s of e.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new hl(t,e.fromCache,n,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Pm()?8:ig(bm())>0?6:4}()}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,n,r){const s={result:null};return this.ji(t,e).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,e,r,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new wy;return this.Ji(t,e,o).next(l=>{if(s.result=l,this.Ui)return this.Yi(t,e,o,l.size)})}).next(()=>s.result)}Yi(t,e,n,r){return n.documentReadCount<this.Wi?(yi()<=pt.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Dr(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),$.resolve()):(yi()<=pt.DEBUG&&W("QueryEngine","Query:",Dr(e),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(yi()<=pt.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Dr(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,cn(e))):$.resolve())}ji(t,e){if(Ec(e))return $.resolve(null);let n=cn(e);return this.indexManager.getIndexType(t,n).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=Ia(e,null,"F"),n=cn(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{const o=ft(...s);return this.zi.getDocuments(t,o).next(l=>this.indexManager.getMinOffset(t,n).next(u=>{const c=this.Zi(e,l);return this.Xi(e,c,o,u.readTime)?this.ji(t,Ia(e,null,"F")):this.es(t,c,e,u)}))})))}Hi(t,e,n,r){return Ec(e)||r.isEqual(ot.min())?$.resolve(null):this.zi.getDocuments(t,n).next(s=>{const o=this.Zi(e,s);return this.Xi(e,o,n,r)?$.resolve(null):(yi()<=pt.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Dr(e)),this.es(t,o,e,Zp(r,-1)).next(l=>l))})}Zi(t,e){let n=new ae(Qh(t));return e.forEach((r,s)=>{po(t,s)&&(n=n.add(s))}),n}Xi(t,e,n,r){if(t.limit===null)return!1;if(n.size!==e.size)return!0;const s=t.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ji(t,e,n){return yi()<=pt.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Dr(e)),this.zi.getDocumentsMatchingQuery(t,e,zn.min(),n)}es(t,e,n,r){return this.zi.getDocumentsMatchingQuery(t,n,r).next(s=>(e.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(t,e,n,r){this.persistence=t,this.ts=e,this.serializer=r,this.ns=new Ft(wt),this.rs=new ni(s=>rl(s),il),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(n)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new dy(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ns))}}function by(i,t,e,n){return new Ay(i,t,e,n)}async function yf(i,t){const e=ct(i);return await e.persistence.runTransaction("Handle user change","readonly",n=>{let r;return e.mutationQueue.getAllMutationBatches(n).next(s=>(r=s,e._s(t),e.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],l=[];let u=ft();for(const c of r){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of s){l.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return e.localDocuments.getDocuments(n,u).next(c=>({us:c,removedBatchIds:o,addedBatchIds:l}))})})}function Ry(i,t){const e=ct(i);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const r=t.batch.keys(),s=e.os.newChangeBuffer({trackRemovals:!0});return function(l,u,c,h){const d=c.batch,m=d.keys();let p=$.resolve();return m.forEach(y=>{p=p.next(()=>h.getEntry(u,y)).next(g=>{const w=c.docVersions.get(y);St(w!==null),g.version.compareTo(w)<0&&(d.applyToRemoteDocument(g,c),g.isValidDocument()&&(g.setReadTime(c.commitVersion),h.addEntry(g)))})}),p.next(()=>l.mutationQueue.removeMutationBatch(u,d))}(e,n,t,s).next(()=>s.apply(n)).next(()=>e.mutationQueue.performConsistencyCheck(n)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(n,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let u=ft();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(t))).next(()=>e.localDocuments.getDocuments(n,r))})}function vf(i){const t=ct(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Qr.getLastRemoteSnapshotVersion(e))}function Py(i,t){const e=ct(i),n=t.snapshotVersion;let r=e.ns;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=e.os.newChangeBuffer({trackRemovals:!0});r=e.ns;const l=[];t.targetChanges.forEach((h,d)=>{const m=r.get(d);if(!m)return;l.push(e.Qr.removeMatchingKeys(s,h.removedDocuments,d).next(()=>e.Qr.addMatchingKeys(s,h.addedDocuments,d)));let p=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(d)!==null?p=p.withResumeToken(pe.EMPTY_BYTE_STRING,ot.min()).withLastLimboFreeSnapshotVersion(ot.min()):h.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(h.resumeToken,n)),r=r.insert(d,p),function(g,w,V){return g.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(m,p,h)&&l.push(e.Qr.updateTargetData(s,p))});let u=bn(),c=ft();if(t.documentUpdates.forEach(h=>{t.resolvedLimboDocuments.has(h)&&l.push(e.persistence.referenceDelegate.updateLimboDocument(s,h))}),l.push(Cy(s,o,t.documentUpdates).next(h=>{u=h.cs,c=h.ls})),!n.isEqual(ot.min())){const h=e.Qr.getLastRemoteSnapshotVersion(s).next(d=>e.Qr.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(h)}return $.waitFor(l).next(()=>o.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(e.ns=r,s))}function Cy(i,t,e){let n=ft(),r=ft();return e.forEach(s=>n=n.add(s)),t.getEntries(i,n).next(s=>{let o=bn();return e.forEach((l,u)=>{const c=s.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(ot.min())?(t.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(u),o=o.insert(l,u)):W("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{cs:o,ls:r}})}function Sy(i,t){const e=ct(i);return e.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function Dy(i,t){const e=ct(i);return e.persistence.runTransaction("Allocate target","readwrite",n=>{let r;return e.Qr.getTargetData(n,t).next(s=>s?(r=s,$.resolve(r)):e.Qr.allocateTargetId(n).next(o=>(r=new xn(t,o,"TargetPurposeListen",n.currentSequenceNumber),e.Qr.addTargetData(n,r).next(()=>r))))}).then(n=>{const r=e.ns.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.ns=e.ns.insert(n.targetId,n),e.rs.set(t,n.targetId)),n})}async function Ca(i,t,e){const n=ct(i),r=n.ns.get(t),s=e?"readwrite":"readwrite-primary";try{e||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!ns(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}n.ns=n.ns.remove(t),n.rs.delete(r.target)}function kc(i,t,e){const n=ct(i);let r=ot.min(),s=ft();return n.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const d=ct(u),m=d.rs.get(h);return m!==void 0?$.resolve(d.ns.get(m)):d.Qr.getTargetData(c,h)}(n,o,cn(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,n.Qr.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>n.ts.getDocumentsMatchingQuery(o,t,e?r:ot.min(),e?s:ft())).next(l=>(Vy(n,wg(t),l),{documents:l,hs:s})))}function Vy(i,t,e){let n=i.ss.get(t)||ot.min();e.forEach((r,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),i.ss.set(t,n)}class xc{constructor(){this.activeTargetIds=Cg()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class ky{constructor(){this.no=new xc,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,n){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new xc,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ds=null;function Jo(){return Ds===null?Ds=function(){return 268435456+Math.round(2147483648*Math.random())}():Ds++,"0x"+Ds.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce="WebChannelConnection";class Ny extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=n+"://"+e.host,this.So=`projects/${r}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Do(){return!1}Co(e,n,r,s,o){const l=Jo(),u=this.vo(e,n.toUriEncodedString());W("RestConnection",`Sending RPC '${e}' ${l}:`,u,r);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(e,u,c,r).then(h=>(W("RestConnection",`Received RPC '${e}' ${l}: `,h),h),h=>{throw Br("RestConnection",`RPC '${e}' ${l} failed with error: `,h,"url: ",u,"request:",r),h})}xo(e,n,r,s,o,l){return this.Co(e,n,r,s,o)}Fo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ei}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}vo(e,n){const r=Oy[e];return`${this.wo}/v1/${n}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,e,n,r){const s=Jo();return new Promise((o,l)=>{const u=new Vh;u.setWithCredentials(!0),u.listenOnce(xh.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ks.NO_ERROR:const h=u.getResponseJson();W(ce,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(h)),o(h);break;case ks.TIMEOUT:W(ce,`RPC '${t}' ${s} timed out`),l(new Y(F.DEADLINE_EXCEEDED,"Request time out"));break;case ks.HTTP_ERROR:const d=u.getStatus();if(W(ce,`RPC '${t}' ${s} failed with status:`,d,"response text:",u.getResponseText()),d>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const p=m==null?void 0:m.error;if(p&&p.status&&p.message){const y=function(w){const V=w.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(V)>=0?V:F.UNKNOWN}(p.status);l(new Y(y,p.message))}else l(new Y(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Y(F.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{W(ce,`RPC '${t}' ${s} completed.`)}});const c=JSON.stringify(r);W(ce,`RPC '${t}' ${s} sending request:`,r),u.send(e,"POST",c,n,15)})}Oo(t,e,n){const r=Jo(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Nh(),l=Mh(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new kh({})),this.Fo(u.initMessageHeaders,e,n),u.encodeInitMessageHeaders=!0;const h=s.join("");W(ce,`Creating RPC '${t}' stream ${r}: ${h}`,u);const d=o.createWebChannel(h,u);let m=!1,p=!1;const y=new My({lo:w=>{p?W(ce,`Not sending because RPC '${t}' stream ${r} is closed:`,w):(m||(W(ce,`Opening RPC '${t}' stream ${r} transport.`),d.open(),m=!0),W(ce,`RPC '${t}' stream ${r} sending:`,w),d.send(w))},ho:()=>d.close()}),g=(w,V,A)=>{w.listen(V,P=>{try{A(P)}catch(D){setTimeout(()=>{throw D},0)}})};return g(d,Ti.EventType.OPEN,()=>{p||(W(ce,`RPC '${t}' stream ${r} transport opened.`),y.mo())}),g(d,Ti.EventType.CLOSE,()=>{p||(p=!0,W(ce,`RPC '${t}' stream ${r} transport closed`),y.po())}),g(d,Ti.EventType.ERROR,w=>{p||(p=!0,Br(ce,`RPC '${t}' stream ${r} transport errored:`,w),y.po(new Y(F.UNAVAILABLE,"The operation could not be completed")))}),g(d,Ti.EventType.MESSAGE,w=>{var V;if(!p){const A=w.data[0];St(!!A);const P=A,D=P.error||((V=P[0])===null||V===void 0?void 0:V.error);if(D){W(ce,`RPC '${t}' stream ${r} received error:`,D);const k=D.status;let O=function(v){const R=Kt[v];if(R!==void 0)return lf(R)}(k),I=D.message;O===void 0&&(O=F.INTERNAL,I="Unknown error status: "+k+" with message "+D.message),p=!0,y.po(new Y(O,I)),d.close()}else W(ce,`RPC '${t}' stream ${r} received:`,A),y.yo(A)}}),g(l,Oh.STAT_EVENT,w=>{w.stat===ya.PROXY?W(ce,`RPC '${t}' stream ${r} detected buffering proxy`):w.stat===ya.NOPROXY&&W(ce,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{y.fo()},0),y}}function Zo(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function To(i){return new Kg(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(t,e,n=1e3,r=1.5,s=6e4){this.oi=t,this.timerId=e,this.No=n,this.Lo=r,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const e=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),r=Math.max(0,e-n);r>0&&W("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(t,e,n,r,s,o,l,u){this.oi=t,this.Go=n,this.zo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Tf(t,e)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,e){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():e&&e.code===F.RESOURCE_EXHAUSTED?(An(e.toString()),An("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):e&&e.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(e)}__(){}auth(){this.state=1;const t=this.a_(this.jo),e=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,r])=>{this.jo===e&&this.u_(n,r)},n=>{t(()=>{const r=new Y(F.UNKNOWN,"Fetching auth token failed: "+n.message);return this.c_(r)})})}u_(t,e){const n=this.a_(this.jo);this.stream=this.l_(t,e),this.stream.Po(()=>{n(()=>this.listener.Po())}),this.stream.To(()=>{n(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{n(()=>this.c_(r))}),this.stream.onMessage(r=>{n(()=>this.onMessage(r))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return W("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return e=>{this.oi.enqueueAndForget(()=>this.jo===t?e():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ly extends Ef{constructor(t,e,n,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,o),this.serializer=s}l_(t,e){return this.connection.Oo("Listen",t,e)}onMessage(t){this.Yo.reset();const e=Xg(this.serializer,t),n=function(s){if(!("targetChange"in s))return ot.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ot.min():o.readTime?hn(o.readTime):ot.min()}(t);return this.listener.h_(e,n)}P_(t){const e={};e.database=Pa(this.serializer),e.addTarget=function(s,o){let l;const u=o.target;if(l=wa(u)?{documents:Zg(s,u)}:{query:ty(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=hf(s,o.resumeToken);const c=Aa(s,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(ot.min())>0){l.readTime=Ys(s,o.snapshotVersion.toTimestamp());const c=Aa(s,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,t);const n=ny(this.serializer,t);n&&(e.labels=n),this.i_(e)}I_(t){const e={};e.database=Pa(this.serializer),e.removeTarget=t,this.i_(e)}}class Fy extends Ef{constructor(t,e,n,r,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,e){return this.connection.Oo("Write",t,e)}onMessage(t){if(St(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const e=Jg(t.writeResults,t.commitTime),n=hn(t.commitTime);return this.listener.A_(n,e)}return St(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=Pa(this.serializer),this.i_(t)}d_(t){const e={streamToken:this.lastStreamToken,writes:t.map(n=>Yg(this.serializer,n))};this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y extends class{}{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new Y(F.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,e,n,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,ba(e,n),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(F.UNKNOWN,s.toString())})}xo(t,e,n,r,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.xo(t,ba(e,n),r,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(F.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class By{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(An(e),this.y_=!1):W("OnlineStateTracker",e)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(t,e,n,r,s){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{n.enqueueAndForget(async()=>{Er(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=ct(u);c.M_.add(4),await ss(c),c.N_.set("Unknown"),c.M_.delete(4),await Eo(c)}(this))})}),this.N_=new By(n,r)}}async function Eo(i){if(Er(i))for(const t of i.x_)await t(!0)}async function ss(i){for(const t of i.x_)await t(!1)}function wf(i,t){const e=ct(i);e.F_.has(t.targetId)||(e.F_.set(t.targetId,t),ml(e)?_l(e):ri(e).Xo()&&dl(e,t))}function fl(i,t){const e=ct(i),n=ri(e);e.F_.delete(t),n.Xo()&&If(e,t),e.F_.size===0&&(n.Xo()?n.n_():Er(e)&&e.N_.set("Unknown"))}function dl(i,t){if(i.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ot.min())>0){const e=i.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}ri(i).P_(t)}function If(i,t){i.L_.xe(t),ri(i).I_(t)}function _l(i){i.L_=new jg({getRemoteKeysForTarget:t=>i.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>i.F_.get(t)||null,tt:()=>i.datastore.serializer.databaseId}),ri(i).start(),i.N_.w_()}function ml(i){return Er(i)&&!ri(i).Zo()&&i.F_.size>0}function Er(i){return ct(i).M_.size===0}function Af(i){i.L_=void 0}async function zy(i){i.N_.set("Online")}async function jy(i){i.F_.forEach((t,e)=>{dl(i,t)})}async function qy(i,t){Af(i),ml(i)?(i.N_.D_(t),_l(i)):i.N_.set("Unknown")}async function Gy(i,t,e){if(i.N_.set("Online"),t instanceof cf&&t.state===2&&t.cause)try{await async function(r,s){const o=s.cause;for(const l of s.targetIds)r.F_.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.F_.delete(l),r.L_.removeTarget(l))}(i,t)}catch(n){W("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Js(i,n)}else if(t instanceof Ms?i.L_.Ke(t):t instanceof uf?i.L_.He(t):i.L_.We(t),!e.isEqual(ot.min()))try{const n=await vf(i.localStore);e.compareTo(n)>=0&&await function(s,o){const l=s.L_.rt(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.F_.get(c);h&&s.F_.set(c,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const h=s.F_.get(u);if(!h)return;s.F_.set(u,h.withResumeToken(pe.EMPTY_BYTE_STRING,h.snapshotVersion)),If(s,u);const d=new xn(h.target,u,c,h.sequenceNumber);dl(s,d)}),s.remoteSyncer.applyRemoteEvent(l)}(i,e)}catch(n){W("RemoteStore","Failed to raise snapshot:",n),await Js(i,n)}}async function Js(i,t,e){if(!ns(t))throw t;i.M_.add(1),await ss(i),i.N_.set("Offline"),e||(e=()=>vf(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await e(),i.M_.delete(1),await Eo(i)})}function bf(i,t){return t().catch(e=>Js(i,e,t))}async function wo(i){const t=ct(i),e=qn(t);let n=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;Hy(t);)try{const r=await Sy(t.localStore,n);if(r===null){t.v_.length===0&&e.n_();break}n=r.batchId,Ky(t,r)}catch(r){await Js(t,r)}Rf(t)&&Pf(t)}function Hy(i){return Er(i)&&i.v_.length<10}function Ky(i,t){i.v_.push(t);const e=qn(i);e.Xo()&&e.E_&&e.d_(t.mutations)}function Rf(i){return Er(i)&&!qn(i).Zo()&&i.v_.length>0}function Pf(i){qn(i).start()}async function Wy(i){qn(i).V_()}async function Qy(i){const t=qn(i);for(const e of i.v_)t.d_(e.mutations)}async function Xy(i,t,e){const n=i.v_.shift(),r=ol.from(n,t,e);await bf(i,()=>i.remoteSyncer.applySuccessfulWrite(r)),await wo(i)}async function Yy(i,t){t&&qn(i).E_&&await async function(n,r){if(function(o){return Bg(o)&&o!==F.ABORTED}(r.code)){const s=n.v_.shift();qn(n).t_(),await bf(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await wo(n)}}(i,t),Rf(i)&&Pf(i)}async function Mc(i,t){const e=ct(i);e.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const n=Er(e);e.M_.add(3),await ss(e),n&&e.N_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.M_.delete(3),await Eo(e)}async function Jy(i,t){const e=ct(i);t?(e.M_.delete(2),await Eo(e)):t||(e.M_.add(2),await ss(e),e.N_.set("Unknown"))}function ri(i){return i.B_||(i.B_=function(e,n,r){const s=ct(e);return s.f_(),new Ly(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{Po:zy.bind(null,i),To:jy.bind(null,i),Ao:qy.bind(null,i),h_:Gy.bind(null,i)}),i.x_.push(async t=>{t?(i.B_.t_(),ml(i)?_l(i):i.N_.set("Unknown")):(await i.B_.stop(),Af(i))})),i.B_}function qn(i){return i.k_||(i.k_=function(e,n,r){const s=ct(e);return s.f_(),new Fy(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{Po:()=>Promise.resolve(),To:Wy.bind(null,i),Ao:Yy.bind(null,i),R_:Qy.bind(null,i),A_:Xy.bind(null,i)}),i.x_.push(async t=>{t?(i.k_.t_(),await wo(i)):(await i.k_.stop(),i.v_.length>0&&(W("RemoteStore",`Stopping write stream with ${i.v_.length} pending writes`),i.v_=[]))})),i.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(t,e,n,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new En,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,r,s){const o=Date.now()+n,l=new pl(t,e,o,r,s);return l.start(n),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(F.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gl(i,t){if(An("AsyncQueue",`${t}: ${i}`),ns(i))return new Y(F.UNAVAILABLE,`${t}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(t){this.comparator=t?(e,n)=>t(e,n)||et.comparator(e.key,n.key):(e,n)=>et.comparator(e.key,n.key),this.keyedMap=Ei(),this.sortedSet=new Ft(this.comparator)}static emptySet(t){return new Nr(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,n)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Nr)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=n.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const n=new Nr;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(){this.q_=new Ft(et.comparator)}track(t){const e=t.doc.key,n=this.q_.get(e);n?t.type!==0&&n.type===3?this.q_=this.q_.insert(e,t):t.type===3&&n.type!==1?this.q_=this.q_.insert(e,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.q_=this.q_.insert(e,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.q_=this.q_.remove(e):t.type===1&&n.type===2?this.q_=this.q_.insert(e,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):it():this.q_=this.q_.insert(e,t)}Q_(){const t=[];return this.q_.inorderTraversal((e,n)=>{t.push(n)}),t}}class Gr{constructor(t,e,n,r,s,o,l,u,c){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(t,e,n,r,s){const o=[];return e.forEach(l=>{o.push({type:0,doc:l})}),new Gr(t,e,Nr.emptySet(e),o,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&mo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class t0{constructor(){this.queries=new ni(t=>Wh(t),mo),this.onlineState="Unknown",this.z_=new Set}}async function yl(i,t){const e=ct(i);let n=3;const r=t.query;let s=e.queries.get(r);s?!s.W_()&&t.G_()&&(n=2):(s=new Zy,n=t.G_()?0:1);try{switch(n){case 0:s.K_=await e.onListen(r,!0);break;case 1:s.K_=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(o){const l=gl(o,`Initialization of query '${Dr(t.query)}' failed`);return void t.onError(l)}e.queries.set(r,s),s.U_.push(t),t.j_(e.onlineState),s.K_&&t.H_(s.K_)&&Tl(e)}async function vl(i,t){const e=ct(i),n=t.query;let r=3;const s=e.queries.get(n);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?r=t.G_()?0:1:!s.W_()&&t.G_()&&(r=2))}switch(r){case 0:return e.queries.delete(n),e.onUnlisten(n,!0);case 1:return e.queries.delete(n),e.onUnlisten(n,!1);case 2:return e.onLastRemoteStoreUnlisten(n);default:return}}function e0(i,t){const e=ct(i);let n=!1;for(const r of t){const s=r.query,o=e.queries.get(s);if(o){for(const l of o.U_)l.H_(r)&&(n=!0);o.K_=r}}n&&Tl(e)}function n0(i,t,e){const n=ct(i),r=n.queries.get(t);if(r)for(const s of r.U_)s.onError(e);n.queries.delete(t)}function Tl(i){i.z_.forEach(t=>{t.next()})}var Sa,Lc;(Lc=Sa||(Sa={})).J_="default",Lc.Cache="cache";class El{constructor(t,e,n){this.query=t,this.Y_=e,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(t){if(!this.options.includeMetadataChanges){const n=[];for(const r of t.docChanges)r.type!==3&&n.push(r);t=new Gr(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),e=!0):this.ta(t,this.onlineState)&&(this.na(t),e=!0),this.X_=t,e}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let e=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),e=!0),e}ta(t,e){if(!t.fromCache||!this.G_())return!0;const n=e!=="Offline";return(!this.options.ra||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const e=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}na(t){t=Gr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==Sa.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(t){this.key=t}}class Sf{constructor(t){this.key=t}}class r0{constructor(t,e){this.query=t,this.la=e,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=ft(),this.mutatedKeys=ft(),this.Ia=Qh(t),this.Ta=new Nr(this.Ia)}get Ea(){return this.la}da(t,e){const n=e?e.Aa:new Nc,r=e?e.Ta:this.Ta;let s=e?e.mutatedKeys:this.mutatedKeys,o=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((h,d)=>{const m=r.get(h),p=po(this.query,d)?d:null,y=!!m&&this.mutatedKeys.has(m.key),g=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let w=!1;m&&p?m.data.isEqual(p.data)?y!==g&&(n.track({type:3,doc:p}),w=!0):this.Ra(m,p)||(n.track({type:2,doc:p}),w=!0,(u&&this.Ia(p,u)>0||c&&this.Ia(p,c)<0)&&(l=!0)):!m&&p?(n.track({type:0,doc:p}),w=!0):m&&!p&&(n.track({type:1,doc:m}),w=!0,(u||c)&&(l=!0)),w&&(p?(o=o.add(p),s=g?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),n.track({type:1,doc:h})}return{Ta:o,Aa:n,Xi:l,mutatedKeys:s}}Ra(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,r){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((h,d)=>function(p,y){const g=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return g(p)-g(y)}(h.type,d.type)||this.Ia(h.doc,d.doc)),this.Va(n),r=r!=null&&r;const l=e&&!r?this.ma():[],u=this.Pa.size===0&&this.current&&!r?1:0,c=u!==this.ha;return this.ha=u,o.length!==0||c?{snapshot:new Gr(this.query,t.Ta,s,o,t.mutatedKeys,u===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:l}:{fa:l}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Nc,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(e=>this.la=this.la.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.la=this.la.delete(e)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=ft(),this.Ta.forEach(n=>{this.ga(n.key)&&(this.Pa=this.Pa.add(n.key))});const e=[];return t.forEach(n=>{this.Pa.has(n)||e.push(new Sf(n))}),this.Pa.forEach(n=>{t.has(n)||e.push(new Cf(n))}),e}pa(t){this.la=t.hs,this.Pa=ft();const e=this.da(t.documents);return this.applyChanges(e,!0)}ya(){return Gr.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class i0{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class s0{constructor(t){this.key=t,this.wa=!1}}class o0{constructor(t,e,n,r,s,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new ni(l=>Wh(l),mo),this.Da=new Map,this.Ca=new Set,this.va=new Ft(et.comparator),this.Fa=new Map,this.Ma=new ul,this.xa={},this.Oa=new Map,this.Na=qr.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function a0(i,t,e=!0){const n=Mf(i);let r;const s=n.ba.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ya()):r=await Df(n,t,e,!0),r}async function l0(i,t){const e=Mf(i);await Df(e,t,!0,!1)}async function Df(i,t,e,n){const r=await Dy(i.localStore,cn(t)),s=r.targetId,o=e?i.sharedClientState.addLocalQueryTarget(s):"not-current";let l;return n&&(l=await u0(i,t,s,o==="current",r.resumeToken)),i.isPrimaryClient&&e&&wf(i.remoteStore,r),l}async function u0(i,t,e,n,r){i.Ba=(d,m,p)=>async function(g,w,V,A){let P=w.view.da(V);P.Xi&&(P=await kc(g.localStore,w.query,!1).then(({documents:I})=>w.view.da(I,P)));const D=A&&A.targetChanges.get(w.targetId),k=A&&A.targetMismatches.get(w.targetId)!=null,O=w.view.applyChanges(P,g.isPrimaryClient,D,k);return $c(g,w.targetId,O.fa),O.snapshot}(i,d,m,p);const s=await kc(i.localStore,t,!0),o=new r0(t,s.hs),l=o.da(s.documents),u=is.createSynthesizedTargetChangeForCurrentChange(e,n&&i.onlineState!=="Offline",r),c=o.applyChanges(l,i.isPrimaryClient,u);$c(i,e,c.fa);const h=new i0(t,e,o);return i.ba.set(t,h),i.Da.has(e)?i.Da.get(e).push(t):i.Da.set(e,[t]),c.snapshot}async function c0(i,t,e){const n=ct(i),r=n.ba.get(t),s=n.Da.get(r.targetId);if(s.length>1)return n.Da.set(r.targetId,s.filter(o=>!mo(o,t))),void n.ba.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Ca(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),e&&fl(n.remoteStore,r.targetId),Da(n,r.targetId)}).catch(es)):(Da(n,r.targetId),await Ca(n.localStore,r.targetId,!0))}async function h0(i,t){const e=ct(i),n=e.ba.get(t),r=e.Da.get(n.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(n.targetId),fl(e.remoteStore,n.targetId))}async function f0(i,t,e){const n=v0(i);try{const r=await function(o,l){const u=ct(o),c=Jt.now(),h=l.reduce((p,y)=>p.add(y.key),ft());let d,m;return u.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=bn(),g=ft();return u.os.getEntries(p,h).next(w=>{y=w,y.forEach((V,A)=>{A.isValidDocument()||(g=g.add(V))})}).next(()=>u.localDocuments.getOverlayedDocuments(p,y)).next(w=>{d=w;const V=[];for(const A of l){const P=Mg(A,d.get(A.key).overlayedDocument);P!=null&&V.push(new Wn(A.key,P,Uh(P.value.mapValue),$e.exists(!0)))}return u.mutationQueue.addMutationBatch(p,c,V,l)}).next(w=>{m=w;const V=w.applyToLocalDocumentSet(d,g);return u.documentOverlayCache.saveOverlays(p,w.batchId,V)})}).then(()=>({batchId:m.batchId,changes:Yh(d)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(r.batchId),function(o,l,u){let c=o.xa[o.currentUser.toKey()];c||(c=new Ft(wt)),c=c.insert(l,u),o.xa[o.currentUser.toKey()]=c}(n,r.batchId,e),await os(n,r.changes),await wo(n.remoteStore)}catch(r){const s=gl(r,"Failed to persist write");e.reject(s)}}async function Vf(i,t){const e=ct(i);try{const n=await Py(e.localStore,t);t.targetChanges.forEach((r,s)=>{const o=e.Fa.get(s);o&&(St(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.wa=!0:r.modifiedDocuments.size>0?St(o.wa):r.removedDocuments.size>0&&(St(o.wa),o.wa=!1))}),await os(e,n,t)}catch(n){await es(n)}}function Fc(i,t,e){const n=ct(i);if(n.isPrimaryClient&&e===0||!n.isPrimaryClient&&e===1){const r=[];n.ba.forEach((s,o)=>{const l=o.view.j_(t);l.snapshot&&r.push(l.snapshot)}),function(o,l){const u=ct(o);u.onlineState=l;let c=!1;u.queries.forEach((h,d)=>{for(const m of d.U_)m.j_(l)&&(c=!0)}),c&&Tl(u)}(n.eventManager,t),r.length&&n.Sa.h_(r),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function d0(i,t,e){const n=ct(i);n.sharedClientState.updateQueryState(t,"rejected",e);const r=n.Fa.get(t),s=r&&r.key;if(s){let o=new Ft(et.comparator);o=o.insert(s,fe.newNoDocument(s,ot.min()));const l=ft().add(s),u=new vo(ot.min(),new Map,new Ft(wt),o,l);await Vf(n,u),n.va=n.va.remove(s),n.Fa.delete(t),wl(n)}else await Ca(n.localStore,t,!1).then(()=>Da(n,t,e)).catch(es)}async function _0(i,t){const e=ct(i),n=t.batch.batchId;try{const r=await Ry(e.localStore,t);xf(e,n,null),kf(e,n),e.sharedClientState.updateMutationState(n,"acknowledged"),await os(e,r)}catch(r){await es(r)}}async function m0(i,t,e){const n=ct(i);try{const r=await function(o,l){const u=ct(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,l).next(d=>(St(d!==null),h=d.keys(),u.mutationQueue.removeMutationBatch(c,d))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(n.localStore,t);xf(n,t,e),kf(n,t),n.sharedClientState.updateMutationState(t,"rejected",e),await os(n,r)}catch(r){await es(r)}}function kf(i,t){(i.Oa.get(t)||[]).forEach(e=>{e.resolve()}),i.Oa.delete(t)}function xf(i,t,e){const n=ct(i);let r=n.xa[n.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),n.xa[n.currentUser.toKey()]=r}}function Da(i,t,e=null){i.sharedClientState.removeLocalQueryTarget(t);for(const n of i.Da.get(t))i.ba.delete(n),e&&i.Sa.ka(n,e);i.Da.delete(t),i.isPrimaryClient&&i.Ma.Vr(t).forEach(n=>{i.Ma.containsKey(n)||Of(i,n)})}function Of(i,t){i.Ca.delete(t.path.canonicalString());const e=i.va.get(t);e!==null&&(fl(i.remoteStore,e),i.va=i.va.remove(t),i.Fa.delete(e),wl(i))}function $c(i,t,e){for(const n of e)n instanceof Cf?(i.Ma.addReference(n.key,t),p0(i,n)):n instanceof Sf?(W("SyncEngine","Document no longer in limbo: "+n.key),i.Ma.removeReference(n.key,t),i.Ma.containsKey(n.key)||Of(i,n.key)):it()}function p0(i,t){const e=t.key,n=e.path.canonicalString();i.va.get(e)||i.Ca.has(n)||(W("SyncEngine","New document in limbo: "+e),i.Ca.add(n),wl(i))}function wl(i){for(;i.Ca.size>0&&i.va.size<i.maxConcurrentLimboResolutions;){const t=i.Ca.values().next().value;i.Ca.delete(t);const e=new et(Vt.fromString(t)),n=i.Na.next();i.Fa.set(n,new s0(e)),i.va=i.va.insert(e,n),wf(i.remoteStore,new xn(cn(_o(e.path)),n,"TargetPurposeLimboResolution",Za.oe))}}async function os(i,t,e){const n=ct(i),r=[],s=[],o=[];n.ba.isEmpty()||(n.ba.forEach((l,u)=>{o.push(n.Ba(u,t,e).then(c=>{if((c||e)&&n.isPrimaryClient){const h=c&&!c.fromCache;n.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(c){r.push(c);const h=hl.Ki(u.targetId,c);s.push(h)}}))}),await Promise.all(o),n.Sa.h_(r),await async function(u,c){const h=ct(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>$.forEach(c,m=>$.forEach(m.qi,p=>h.persistence.referenceDelegate.addReference(d,m.targetId,p)).next(()=>$.forEach(m.Qi,p=>h.persistence.referenceDelegate.removeReference(d,m.targetId,p)))))}catch(d){if(!ns(d))throw d;W("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const m=d.targetId;if(!d.fromCache){const p=h.ns.get(m),y=p.snapshotVersion,g=p.withLastLimboFreeSnapshotVersion(y);h.ns=h.ns.insert(m,g)}}}(n.localStore,s))}async function g0(i,t){const e=ct(i);if(!e.currentUser.isEqual(t)){W("SyncEngine","User change. New user:",t.toKey());const n=await yf(e.localStore,t);e.currentUser=t,function(s,o){s.Oa.forEach(l=>{l.forEach(u=>{u.reject(new Y(F.CANCELLED,o))})}),s.Oa.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await os(e,n.us)}}function y0(i,t){const e=ct(i),n=e.Fa.get(t);if(n&&n.wa)return ft().add(n.key);{let r=ft();const s=e.Da.get(t);if(!s)return r;for(const o of s){const l=e.ba.get(o);r=r.unionWith(l.view.Ea)}return r}}function Mf(i){const t=ct(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=Vf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=y0.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=d0.bind(null,t),t.Sa.h_=e0.bind(null,t.eventManager),t.Sa.ka=n0.bind(null,t.eventManager),t}function v0(i){const t=ct(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=_0.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=m0.bind(null,t),t}class Bc{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=To(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return by(this.persistence,new Iy,t.initialUser,this.serializer)}createPersistence(t){return new Ty(cl.Hr,this.serializer)}createSharedClientState(t){return new ky}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class T0{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Fc(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=g0.bind(null,this.syncEngine),await Jy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new t0}()}createDatastore(t){const e=To(t.databaseInfo.databaseId),n=function(s){return new Ny(s)}(t.databaseInfo);return function(s,o,l,u){return new $y(s,o,l,u)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(n,r,s,o,l){return new Uy(n,r,s,o,l)}(this.localStore,this.datastore,t.asyncQueue,e=>Fc(this.syncEngine,e,0),function(){return Oc.D()?new Oc:new xy}())}createSyncEngine(t,e){return function(r,s,o,l,u,c,h){const d=new o0(r,s,o,l,u,c);return h&&(d.La=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t;await async function(n){const r=ct(n);W("RemoteStore","RemoteStore shutting down."),r.M_.add(5),await ss(r),r.O_.shutdown(),r.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):An("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(t,e,n,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=he.UNAUTHENTICATED,this.clientId=Fh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async s=>{W("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(n,s=>(W("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Y(F.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new En;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=gl(e,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function ta(i,t){i.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const e=i.configuration;await t.initialize(e);let n=e.initialUser;i.setCredentialChangeListener(async r=>{n.isEqual(r)||(await yf(t.localStore,r),n=r)}),t.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=t}async function Uc(i,t){i.asyncQueue.verifyOperationInProgress();const e=await I0(i);W("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(e,i.configuration),i.setCredentialChangeListener(n=>Mc(t.remoteStore,n)),i.setAppCheckTokenChangeListener((n,r)=>Mc(t.remoteStore,r)),i._onlineComponents=t}function w0(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}async function I0(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await ta(i,i._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!w0(e))throw e;Br("Error using user provided cache. Falling back to memory cache: "+e),await ta(i,new Bc)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await ta(i,new Bc);return i._offlineComponents}async function Nf(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await Uc(i,i._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await Uc(i,new T0))),i._onlineComponents}function A0(i){return Nf(i).then(t=>t.syncEngine)}async function Zs(i){const t=await Nf(i),e=t.eventManager;return e.onListen=a0.bind(null,t.syncEngine),e.onUnlisten=c0.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=l0.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=h0.bind(null,t.syncEngine),e}function b0(i,t,e={}){const n=new En;return i.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const h=new Il({next:m=>{o.enqueueAndForget(()=>vl(s,d));const p=m.docs.has(l);!p&&m.fromCache?c.reject(new Y(F.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&m.fromCache&&u&&u.source==="server"?c.reject(new Y(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),d=new El(_o(l.path),h,{includeMetadataChanges:!0,ra:!0});return yl(s,d)}(await Zs(i),i.asyncQueue,t,e,n)),n.promise}function R0(i,t,e={}){const n=new En;return i.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const h=new Il({next:m=>{o.enqueueAndForget(()=>vl(s,d)),m.fromCache&&u.source==="server"?c.reject(new Y(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),d=new El(l,h,{includeMetadataChanges:!0,ra:!0});return yl(s,d)}(await Zs(i),i.asyncQueue,t,e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(i){const t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(i,t,e){if(!e)throw new Y(F.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function P0(i,t,e,n){if(t===!0&&n===!0)throw new Y(F.INVALID_ARGUMENT,`${i} and ${e} cannot be used together.`)}function jc(i){if(!et.isDocumentKey(i))throw new Y(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function qc(i){if(et.isDocumentKey(i))throw new Y(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Al(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":it()}function Be(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new Y(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Al(i);throw new Y(F.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(t){var e,n;if(t.host===void 0){if(t.ssl!==void 0)throw new Y(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Y(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}P0("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Lf((n=t.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Y(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Y(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Y(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,r){return n.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Io{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Gc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Y(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new Y(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Gc(t),t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new qp;switch(n.type){case"firstParty":return new Wp(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Y(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=zc.get(e);n&&(W("ComponentProvider","Removing Datastore"),zc.delete(e),n.terminate())}(this),Promise.resolve()}}function C0(i,t,e,n={}){var r;const s=(i=Be(i,Io))._getSettings(),o=`${t}:${e}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Br("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),n.mockUserToken){let l,u;if(typeof n.mockUserToken=="string")l=n.mockUserToken,u=he.MOCK_USER;else{l=Am(n.mockUserToken,(r=i._app)===null||r===void 0?void 0:r.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new Y(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new he(c)}i._authCredentials=new Gp(new Lh(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new as(this.firestore,t,this._query)}}class Ee{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $n(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ee(this.firestore,t,this._key)}}class $n extends as{constructor(t,e,n){super(t,e,_o(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ee(this.firestore,null,new et(t))}withConverter(t){return new $n(this.firestore,t,this._path)}}function Hr(i,t,...e){if(i=rn(i),Ff("collection","path",t),i instanceof Io){const n=Vt.fromString(t,...e);return qc(n),new $n(i,null,n)}{if(!(i instanceof Ee||i instanceof $n))throw new Y(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Vt.fromString(t,...e));return qc(n),new $n(i.firestore,null,n)}}function Va(i,t,...e){if(i=rn(i),arguments.length===1&&(t=Fh.newId()),Ff("doc","path",t),i instanceof Io){const n=Vt.fromString(t,...e);return jc(n),new Ee(i,null,new et(n))}{if(!(i instanceof Ee||i instanceof $n))throw new Y(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Vt.fromString(t,...e));return jc(n),new Ee(i.firestore,i instanceof $n?i.converter:null,new et(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Tf(this,"async_queue_retry"),this.hu=()=>{const e=Zo();e&&W("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};const t=Zo();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const e=Zo();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const e=new En;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!ns(t))throw t;W("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const e=this.iu.then(()=>(this.uu=!0,t().catch(n=>{this.au=n,this.uu=!1;const r=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(n);throw An("INTERNAL UNHANDLED ERROR: ",r),n}).then(n=>(this.uu=!1,n))));return this.iu=e,e}enqueueAfterDelay(t,e,n){this.Pu(),this.lu.indexOf(t)>-1&&(e=0);const r=pl.createAndSchedule(this,t,e,n,s=>this.Eu(s));return this._u.push(r),r}Pu(){this.au&&it()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const e of this._u)if(e.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((e,n)=>e.targetTimeMs-n.targetTimeMs);for(const e of this._u)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const e=this._u.indexOf(t);this._u.splice(e,1)}}function Hc(i){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const s of n)if(s in r&&typeof r[s]=="function")return!0;return!1}(i,["next","error","complete"])}class Gn extends Io{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=function(){return new S0}(),this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||$f(this),this._firestoreClient.terminate()}}function D0(i,t){const e=typeof i=="object"?i:kp(),n=typeof i=="string"?i:"(default)",r=Cp(e,"firestore").getImmediate({identifier:n});if(!r._initialized){const s=wm("firestore");s&&C0(r,...s)}return r}function ls(i){return i._firestoreClient||$f(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function $f(i){var t,e,n;const r=i._freezeSettings(),s=function(l,u,c,h){return new ag(l,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Lf(h.experimentalLongPollingOptions),h.useFetchStreams)}(i._databaseId,((t=i._app)===null||t===void 0?void 0:t.options.appId)||"",i._persistenceKey,r);i._firestoreClient=new E0(i._authCredentials,i._appCheckCredentials,i._queue,s),!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((n=r.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Kr(pe.fromBase64String(t))}catch(e){throw new Y(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Kr(pe.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new Y(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Y(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Y(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return wt(this._lat,t._lat)||wt(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0=/^__.*__$/;class k0{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return this.fieldMask!==null?new Wn(t,this.data,this.fieldMask,e,this.fieldTransforms):new rs(t,this.data,e,this.fieldTransforms)}}class Bf{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new Wn(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Uf(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class Pl{constructor(t,e,n,r,s,o){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=r,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new Pl(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var e;const n=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.gu({path:n,yu:!1});return r.wu(t),r}Su(t){var e;const n=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return to(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(Uf(this.fu)&&V0.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class x0{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||To(t)}Fu(t,e,n,r=!1){return new Pl({fu:t,methodName:e,vu:n,path:oe.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cl(i){const t=i._freezeSettings(),e=To(i._databaseId);return new x0(i._databaseId,!!t.ignoreUndefinedProperties,e)}function zf(i,t,e,n,r,s={}){const o=i.Fu(s.merge||s.mergeFields?2:0,t,e,r);Sl("Data must be an object, but it was:",o,n);const l=Gf(n,o);let u,c;if(s.merge)u=new Le(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const m=ka(t,d,e);if(!o.contains(m))throw new Y(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Kf(h,m)||h.push(m)}u=new Le(h),c=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=o.fieldTransforms;return new k0(new be(l),u,c)}class Ao extends bl{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Ao}}function jf(i,t,e,n){const r=i.Fu(1,t,e);Sl("Data must be an object, but it was:",r,n);const s=[],o=be.empty();Tr(n,(u,c)=>{const h=Dl(t,u,e);c=rn(c);const d=r.Su(h);if(c instanceof Ao)s.push(h);else{const m=bo(c,d);m!=null&&(s.push(h),o.set(h,m))}});const l=new Le(s);return new Bf(o,l,r.fieldTransforms)}function qf(i,t,e,n,r,s){const o=i.Fu(1,t,e),l=[ka(t,n,e)],u=[r];if(s.length%2!=0)throw new Y(F.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)l.push(ka(t,s[m])),u.push(s[m+1]);const c=[],h=be.empty();for(let m=l.length-1;m>=0;--m)if(!Kf(c,l[m])){const p=l[m];let y=u[m];y=rn(y);const g=o.Su(p);if(y instanceof Ao)c.push(p);else{const w=bo(y,g);w!=null&&(c.push(p),h.set(p,w))}}const d=new Le(c);return new Bf(h,d,o.fieldTransforms)}function bo(i,t){if(Hf(i=rn(i)))return Sl("Unsupported field value:",t,i),Gf(i,t);if(i instanceof bl)return function(n,r){if(!Uf(r.fu))throw r.Du(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(n,r){const s=[];let o=0;for(const l of n){let u=bo(l,r.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(i,t)}return function(n,r){if((n=rn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Sg(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Jt.fromDate(n);return{timestampValue:Ys(r.serializer,s)}}if(n instanceof Jt){const s=new Jt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ys(r.serializer,s)}}if(n instanceof Rl)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Kr)return{bytesValue:hf(r.serializer,n._byteString)};if(n instanceof Ee){const s=r.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw r.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ll(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Du(`Unsupported field value: ${Al(n)}`)}(i,t)}function Gf(i,t){const e={};return $h(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Tr(i,(n,r)=>{const s=bo(r,t.pu(n));s!=null&&(e[n]=s)}),{mapValue:{fields:e}}}function Hf(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Jt||i instanceof Rl||i instanceof Kr||i instanceof Ee||i instanceof bl)}function Sl(i,t,e){if(!Hf(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){const n=Al(e);throw n==="an object"?t.Du(i+" a custom object"):t.Du(i+" "+n)}}function ka(i,t,e){if((t=rn(t))instanceof us)return t._internalPath;if(typeof t=="string")return Dl(i,t);throw to("Field path arguments must be of type string or ",i,!1,void 0,e)}const O0=new RegExp("[~\\*/\\[\\]]");function Dl(i,t,e){if(t.search(O0)>=0)throw to(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,e);try{return new us(...t.split("."))._internalPath}catch{throw to(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,e)}}function to(i,t,e,n,r){const s=n&&!n.isEmpty(),o=r!==void 0;let l=`Function ${t}() called with invalid data`;e&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${n}`),o&&(u+=` in document ${r}`),u+=")"),new Y(F.INVALID_ARGUMENT,l+i+u)}function Kf(i,t){return i.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(t,e,n,r,s){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ee(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new M0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Qf("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class M0 extends Wf{data(){return super.data()}}function Qf(i,t){return typeof t=="string"?Dl(i,t):t instanceof us?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Y(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class N0{convertValue(t,e="none"){switch(pr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Wt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(mr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw it()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return Tr(t,(r,s)=>{n[r]=this.convertValue(s,e)}),n}convertGeoPoint(t){return new Rl(Wt(t.latitude),Wt(t.longitude))}convertArray(t,e){return(t.values||[]).map(n=>this.convertValue(n,e))}convertServerTimestamp(t,e){switch(e){case"previous":const n=el(t);return n==null?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Fi(t));default:return null}}convertTimestamp(t){const e=jn(t);return new Jt(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=Vt.fromString(t);St(gf(n));const r=new $i(n.get(1),n.get(3)),s=new et(n.popFirst(5));return r.isEqual(e)||An(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(i,t,e){let n;return n=i?e&&(e.merge||e.mergeFields)?i.toFirestore(t,e):i.toFirestore(t):t,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Jf extends Wf{constructor(t,e,n,r,s,o){super(t,e,n,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Ns(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Qf("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class Ns extends Jf{data(t={}){return super.data(t)}}class Zf{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Ii(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(n=>{t.call(e,new Ns(this._firestore,this._userDataWriter,n.key,n,new Ii(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Y(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>{const u=new Ns(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Ii(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Ns(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Ii(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:L0(l.type),doc:u,oldIndex:c,newIndex:h}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function L0(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F0(i){i=Be(i,Ee);const t=Be(i.firestore,Gn);return b0(ls(t),i._key).then(e=>ed(t,i,e))}class Vl extends N0{constructor(t){super(),this.firestore=t}convertBytes(t){return new Kr(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ee(this.firestore,null,e)}}function eo(i){i=Be(i,as);const t=Be(i.firestore,Gn),e=ls(t),n=new Vl(t);return Xf(i._query),R0(e,i._query).then(r=>new Zf(t,n,i,r))}function $0(i,t,e){i=Be(i,Ee);const n=Be(i.firestore,Gn),r=Yf(i.converter,t,e);return kl(n,[zf(Cl(n),"setDoc",i._key,r,i.converter!==null,e).toMutation(i._key,$e.none())])}function td(i,t,e,...n){i=Be(i,Ee);const r=Be(i.firestore,Gn),s=Cl(r);let o;return o=typeof(t=rn(t))=="string"||t instanceof us?qf(s,"updateDoc",i._key,t,e,n):jf(s,"updateDoc",i._key,t),kl(r,[o.toMutation(i._key,$e.exists(!0))])}function xa(i,...t){var e,n,r;i=rn(i);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||Hc(t[o])||(s=t[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Hc(t[o])){const d=t[o];t[o]=(e=d.next)===null||e===void 0?void 0:e.bind(d),t[o+1]=(n=d.error)===null||n===void 0?void 0:n.bind(d),t[o+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let u,c,h;if(i instanceof Ee)c=Be(i.firestore,Gn),h=_o(i._key.path),u={next:d=>{t[o]&&t[o](ed(c,i,d))},error:t[o+1],complete:t[o+2]};else{const d=Be(i,as);c=Be(d.firestore,Gn),h=d._query;const m=new Vl(c);u={next:p=>{t[o]&&t[o](new Zf(c,m,d,p))},error:t[o+1],complete:t[o+2]},Xf(i._query)}return function(m,p,y,g){const w=new Il(g),V=new El(p,w,y);return m.asyncQueue.enqueueAndForget(async()=>yl(await Zs(m),V)),()=>{w.$a(),m.asyncQueue.enqueueAndForget(async()=>vl(await Zs(m),V))}}(ls(c),h,l,u)}function kl(i,t){return function(n,r){const s=new En;return n.asyncQueue.enqueueAndForget(async()=>f0(await A0(n),r,s)),s.promise}(ls(i),t)}function ed(i,t,e){const n=e.docs.get(t._key),r=new Vl(i);return new Jf(i,r,t._key,n,new Ii(e.hasPendingWrites,e.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Cl(t)}set(t,e,n){this._verifyNotCommitted();const r=ea(t,this._firestore),s=Yf(r.converter,e,n),o=zf(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,n);return this._mutations.push(o.toMutation(r._key,$e.none())),this}update(t,e,n,...r){this._verifyNotCommitted();const s=ea(t,this._firestore);let o;return o=typeof(e=rn(e))=="string"||e instanceof us?qf(this._dataReader,"WriteBatch.update",s._key,e,n,r):jf(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,$e.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=ea(t,this._firestore);return this._mutations=this._mutations.concat(new sl(e._key,$e.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Y(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ea(i,t){if((i=rn(i)).firestore!==t)throw new Y(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U0(i){return ls(i=Be(i,Gn)),new B0(i,t=>kl(i,t))}(function(t,e=!0){(function(r){ei=r})(Vp),Gs(new Mi("firestore",(n,{instanceIdentifier:r,options:s})=>{const o=n.getProvider("app").getImmediate(),l=new Gn(new Hp(n.getProvider("auth-internal")),new Xp(n.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Y(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $i(c.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Mr(fc,"4.6.3",t),Mr(fc,"4.6.3","esm2017")})();const z0={apiKey:"AIzaSyDrTR0lVaKeBrqIlhJiwst2-KsEwBtE538",authDomain:"bob-game-90e47.firebaseapp.com",projectId:"bob-game-90e47",storageBucket:"bob-game-90e47.appspot.com",messagingSenderId:"880391810715",appId:"1:880391810715:web:f537e6f4c16b7412e7a03e",measurementId:"G-FL5LYSNQ76"},j0=Ph(z0),an=D0(j0);function Kc(i){let t,e,n="Welkom bij de BOB-Game!",r,s,o=`Hier zul je op basis van je eigen aangewezen rol meedenken over een probleem en samen met je
				medespelers tot een besluit komen over welke maatregelen genomen moeten worden.`,l,u,c,h,d,m;return c=new Te({props:{theme:"green",$$slots:{default:[q0]},$$scope:{ctx:i}}}),c.$on("click",i[2]),d=new Te({props:{$$slots:{default:[G0]},$$scope:{ctx:i}}}),d.$on("click",i[3]),{c(){t=U("div"),e=U("h1"),e.textContent=n,r=Q(),s=U("p"),s.textContent=o,l=Q(),u=U("div"),yt(c.$$.fragment),h=Q(),yt(d.$$.fragment),this.h()},l(p){t=z(p,"DIV",{class:!0});var y=J(t);e=z(y,"H1",{class:!0,"data-svelte-h":!0}),se(e)!=="svelte-1og3j6q"&&(e.textContent=n),r=X(y),s=z(y,"P",{class:!0,"data-svelte-h":!0}),se(s)!=="svelte-1g8jkii"&&(s.textContent=o),l=X(y),u=z(y,"DIV",{class:!0});var g=J(u);vt(c.$$.fragment,g),h=X(g),vt(d.$$.fragment,g),g.forEach(N),y.forEach(N),this.h()},h(){G(e,"class","font-bold text-xl mb-2"),G(s,"class","mb-4"),G(u,"class","flex gap-x-2 justify-center"),G(t,"class","text-center")},m(p,y){j(p,t,y),L(t,e),L(t,r),L(t,s),L(t,l),L(t,u),Tt(c,u,null),L(u,h),Tt(d,u,null),m=!0},p(p,y){const g={};y&64&&(g.$$scope={dirty:y,ctx:p}),c.$set(g);const w={};y&64&&(w.$$scope={dirty:y,ctx:p}),d.$set(w)},i(p){m||(K(c.$$.fragment,p),K(d.$$.fragment,p),m=!0)},o(p){Z(c.$$.fragment,p),Z(d.$$.fragment,p),m=!1},d(p){p&&N(t),Et(c),Et(d)}}}function q0(i){let t;return{c(){t=at("Start")},l(e){t=lt(e,"Start")},m(e,n){j(e,t,n)},d(e){e&&N(t)}}}function G0(i){let t;return{c(){t=at("Instellingen")},l(e){t=lt(e,"Instellingen")},m(e,n){j(e,t,n)},d(e){e&&N(t)}}}function Wc(i){let t,e,n="Instellingen",r,s,o,l,u,c,h,d;return o=new Te({props:{$$slots:{default:[H0]},$$scope:{ctx:i}}}),o.$on("click",i[1]),u=new Te({props:{$$slots:{default:[K0]},$$scope:{ctx:i}}}),u.$on("click",i[4]),h=new Te({props:{theme:"red",$$slots:{default:[W0]},$$scope:{ctx:i}}}),h.$on("click",i[5]),{c(){t=U("div"),e=U("p"),e.textContent=n,r=Q(),s=U("div"),yt(o.$$.fragment),l=Q(),yt(u.$$.fragment),c=Q(),yt(h.$$.fragment),this.h()},l(m){t=z(m,"DIV",{class:!0});var p=J(t);e=z(p,"P",{class:!0,"data-svelte-h":!0}),se(e)!=="svelte-1qfzwmq"&&(e.textContent=n),r=X(p),s=z(p,"DIV",{class:!0});var y=J(s);vt(o.$$.fragment,y),l=X(y),vt(u.$$.fragment,y),c=X(y),vt(h.$$.fragment,y),y.forEach(N),p.forEach(N),this.h()},h(){G(e,"class","font-bold text-xl mb-4"),G(s,"class","flex gap-x-2 justify-center"),G(t,"class","text-center")},m(m,p){j(m,t,p),L(t,e),L(t,r),L(t,s),Tt(o,s,null),L(s,l),Tt(u,s,null),L(s,c),Tt(h,s,null),d=!0},p(m,p){const y={};p&64&&(y.$$scope={dirty:p,ctx:m}),o.$set(y);const g={};p&64&&(g.$$scope={dirty:p,ctx:m}),u.$set(g);const w={};p&64&&(w.$$scope={dirty:p,ctx:m}),h.$set(w)},i(m){d||(K(o.$$.fragment,m),K(u.$$.fragment,m),K(h.$$.fragment,m),d=!0)},o(m){Z(o.$$.fragment,m),Z(u.$$.fragment,m),Z(h.$$.fragment,m),d=!1},d(m){m&&N(t),Et(o),Et(u),Et(h)}}}function H0(i){let t;return{c(){t=at("Reset sliders")},l(e){t=lt(e,"Reset sliders")},m(e,n){j(e,t,n)},d(e){e&&N(t)}}}function K0(i){let t;return{c(){t=at("Wijzig brondata (.csv)")},l(e){t=lt(e,"Wijzig brondata (.csv)")},m(e,n){j(e,t,n)},d(e){e&&N(t)}}}function W0(i){let t;return{c(){t=at("Terug")},l(e){t=lt(e,"Terug")},m(e,n){j(e,t,n)},d(e){e&&N(t)}}}function Q0(i){let t,e,n,r,s,o,l=!i[0]&&Kc(i),u=i[0]&&Wc(i);return{c(){t=U("img"),n=Q(),l&&l.c(),r=Q(),u&&u.c(),s=De(),this.h()},l(c){t=z(c,"IMG",{src:!0,alt:!0,class:!0}),n=X(c),l&&l.l(c),r=X(c),u&&u.l(c),s=De(),this.h()},h(){D_(t.src,e=fm)||G(t,"src",e),G(t,"alt","Logo van de BOB-Game"),G(t,"class","w-48")},m(c,h){j(c,t,h),j(c,n,h),l&&l.m(c,h),j(c,r,h),u&&u.m(c,h),j(c,s,h),o=!0},p(c,h){c[0]?l&&(wn(),Z(l,1,1,()=>{l=null}),In()):l?(l.p(c,h),h&1&&K(l,1)):(l=Kc(c),l.c(),K(l,1),l.m(r.parentNode,r)),c[0]?u?(u.p(c,h),h&1&&K(u,1)):(u=Wc(c),u.c(),K(u,1),u.m(s.parentNode,s)):u&&(wn(),Z(u,1,1,()=>{u=null}),In())},i(c){o||(K(l),K(u),o=!0)},o(c){Z(l),Z(u),o=!1},d(c){c&&(N(t),N(n),N(r),N(s)),l&&l.d(c),u&&u.d(c)}}}function X0(i){let t,e;return t=new vr({props:{class:"gap-y-4 lg:w-[540px] items-center",$$slots:{default:[Q0]},$$scope:{ctx:i}}}),{c(){yt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,r){Tt(t,n,r),e=!0},p(n,[r]){const s={};r&65&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(K(t.$$.fragment,n),e=!0)},o(n){Z(t.$$.fragment,n),e=!1},d(n){Et(t,n)}}}function Y0(i,t,e){let n=!1;return[n,async()=>{const c=Hr(an,"stakeholders"),h=await eo(c);let d=[];const m=h.docs[0].data().values.length;for(let p=0;p<m;p++)d.push(0);for(const p of h.docs)await td(p.ref,{values:d});alert("Alle sliders zijn gereset!")},()=>nn.set(1),()=>e(0,n=!n),()=>nn.set(5),()=>e(0,n=!n)]}class J0 extends je{constructor(t){super(),qe(this,t,Y0,X0,ke,{})}}const Qc=Zr([]);function Xc(i,t,e){const n=i.slice();return n[15]=t[e],n[17]=e,n}function Yc(i){let t,e;return t=new vr({props:{class:"lg:w-4/5",$$slots:{default:[ev]},$$scope:{ctx:i}}}),{c(){yt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,r){Tt(t,n,r),e=!0},p(n,r){const s={};r&262271&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(K(t.$$.fragment,n),e=!0)},o(n){Z(t.$$.fragment,n),e=!1},d(n){Et(t,n)}}}function Jc(i){let t,e,n=i[15].naam.charAt(0).toUpperCase()+i[15].naam.slice(1)+"",r,s,o,l,u,c,h,d=Oi(i[2].values[i[17]],i[15])+"",m,p,y,g=Bs(i[2].values[i[17]],i[15]).toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"",w,V,A,P=Us(i[2].values[i[17]],i[15])+"",D,k,O;function I(...T){return i[11](i[17],...T)}return{c(){t=U("tr"),e=U("td"),r=at(n),s=Q(),o=U("td"),l=U("input"),c=Q(),h=U("td"),m=at(d),p=Q(),y=U("td"),w=at(g),V=Q(),A=U("td"),D=at(P),this.h()},l(T){t=z(T,"TR",{});var v=J(t);e=z(v,"TD",{class:!0});var R=J(e);r=lt(R,n),R.forEach(N),s=X(v),o=z(v,"TD",{class:!0});var C=J(o);l=z(C,"INPUT",{type:!0,min:!0,max:!0,class:!0}),C.forEach(N),c=X(v),h=z(v,"TD",{class:!0});var S=J(h);m=lt(S,d),S.forEach(N),p=X(v),y=z(v,"TD",{class:!0});var b=J(y);w=lt(b,g),b.forEach(N),V=X(v),A=z(v,"TD",{});var st=J(A);D=lt(st,P),st.forEach(N),v.forEach(N),this.h()},h(){G(e,"class","pr-4"),G(l,"type","range"),l.value=u=i[2].values[i[17]],G(l,"min","0"),G(l,"max","10"),G(l,"class","slider accent-blue-500 align-middle appearance-none w-full cursor-pointer h-1 bg-red-500"),G(o,"class","pr-4"),G(h,"class","pr-4"),G(y,"class","pr-4")},m(T,v){j(T,t,v),L(t,e),L(e,r),L(t,s),L(t,o),L(o,l),L(t,c),L(t,h),L(h,m),L(t,p),L(t,y),L(y,w),L(t,V),L(t,A),L(A,D),k||(O=co(l,"input",I),k=!0)},p(T,v){i=T,v&8&&n!==(n=i[15].naam.charAt(0).toUpperCase()+i[15].naam.slice(1)+"")&&Bt(r,n),v&4&&u!==(u=i[2].values[i[17]])&&(l.value=u),v&12&&d!==(d=Oi(i[2].values[i[17]],i[15])+"")&&Bt(m,d),v&12&&g!==(g=Bs(i[2].values[i[17]],i[15]).toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"")&&Bt(w,g),v&12&&P!==(P=Us(i[2].values[i[17]],i[15])+"")&&Bt(D,P)},d(T){T&&N(t),k=!1,O()}}}function Z0(i){let t;return{c(){t=at("Terug")},l(e){t=lt(e,"Terug")},m(e,n){j(e,t,n)},d(e){e&&N(t)}}}function tv(i){let t;return{c(){t=at("Klaar")},l(e){t=lt(e,"Klaar")},m(e,n){j(e,t,n)},d(e){e&&N(t)}}}function ev(i){let t,e,n=i[2].id+"",r,s,o,l,u='<tr><th class="pr-4">Maatregel</th> <th class="pr-4">Schaal</th> <th class="pr-4">Geholpen mensen</th> <th class="pr-4">Kosten</th> <th>Vrijwilligers</th></tr>',c,h,d,m,p,y="Totaal",g,w,V,A,P,D,k,O=i[0].toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"",I,T,v,R,C,S,b,st,rt,ht,ut,dt=i[5].toFixed(0)+"",xt,zt,q,H,tt=i[4].toFixed(0)+"",It,Ot,Mt,ge,tn,we,Xt,Ge,xe,Zt,sn=dn(i[3]),jt=[];for(let nt=0;nt<sn.length;nt+=1)jt[nt]=Jc(Xc(i,sn,nt));return Xt=new Te({props:{theme:"red",$$slots:{default:[Z0]},$$scope:{ctx:i}}}),Xt.$on("click",i[12]),xe=new Te({props:{$$slots:{default:[tv]},$$scope:{ctx:i}}}),xe.$on("click",i[13]),{c(){t=U("div"),e=at("Team "),r=at(n),s=Q(),o=U("table"),l=U("thead"),l.innerHTML=u,c=Q(),h=U("tbody");for(let nt=0;nt<jt.length;nt+=1)jt[nt].c();d=Q(),m=U("tr"),p=U("td"),p.textContent=y,g=Q(),w=U("td"),V=Q(),A=U("td"),P=at(i[1]),D=Q(),k=U("td"),I=at(O),T=Q(),v=U("td"),R=at(i[6]),C=Q(),S=U("tr"),b=U("td"),st=Q(),rt=U("td"),ht=Q(),ut=U("td"),xt=at(dt),zt=at("% van het doel"),q=Q(),H=U("td"),It=at(tt),Ot=at("% van het budget"),Mt=Q(),ge=U("td"),tn=Q(),we=U("div"),yt(Xt.$$.fragment),Ge=Q(),yt(xe.$$.fragment),this.h()},l(nt){t=z(nt,"DIV",{class:!0});var At=J(t);e=lt(At,"Team "),r=lt(At,n),At.forEach(N),s=X(nt),o=z(nt,"TABLE",{class:!0});var Ie=J(o);l=z(Ie,"THEAD",{"data-svelte-h":!0}),se(l)!=="svelte-18lvh91"&&(l.innerHTML=u),c=X(Ie),h=z(Ie,"TBODY",{});var He=J(h);for(let Sn=0;Sn<jt.length;Sn+=1)jt[Sn].l(He);d=X(He),m=z(He,"TR",{class:!0});var bt=J(m);p=z(bt,"TD",{class:!0,"data-svelte-h":!0}),se(p)!=="svelte-tvdvct"&&(p.textContent=y),g=X(bt),w=z(bt,"TD",{class:!0}),J(w).forEach(N),V=X(bt),A=z(bt,"TD",{class:!0});var Cn=J(A);P=lt(Cn,i[1]),Cn.forEach(N),D=X(bt),k=z(bt,"TD",{class:!0});var hs=J(k);I=lt(hs,O),hs.forEach(N),T=X(bt),v=z(bt,"TD",{});var Ir=J(v);R=lt(Ir,i[6]),Ir.forEach(N),bt.forEach(N),C=X(He),S=z(He,"TR",{});var Ae=J(S);b=z(Ae,"TD",{class:!0}),J(b).forEach(N),st=X(Ae),rt=z(Ae,"TD",{class:!0}),J(rt).forEach(N),ht=X(Ae),ut=z(Ae,"TD",{class:!0});var Ar=J(ut);xt=lt(Ar,dt),zt=lt(Ar,"% van het doel"),Ar.forEach(N),q=X(Ae),H=z(Ae,"TD",{class:!0});var Gt=J(H);It=lt(Gt,tt),Ot=lt(Gt,"% van het budget"),Gt.forEach(N),Mt=X(Ae),ge=z(Ae,"TD",{}),J(ge).forEach(N),Ae.forEach(N),He.forEach(N),Ie.forEach(N),tn=X(nt),we=z(nt,"DIV",{class:!0});var Ht=J(we);vt(Xt.$$.fragment,Ht),Ge=X(Ht),vt(xe.$$.fragment,Ht),Ht.forEach(N),this.h()},h(){G(t,"class","font-bold text-2xl mb-4"),G(p,"class","pr-4"),G(w,"class","pr-4"),G(A,"class","pr-4"),G(k,"class","pr-4"),G(m,"class","font-bold border-t-2 border-black"),G(b,"class","pr-4"),G(rt,"class","pr-4"),G(ut,"class","pr-4"),Qe(ut,"bg-red-300",i[5]<100),Qe(ut,"bg-green-300",i[5]>=100),G(H,"class","pr-4"),Qe(H,"bg-red-300",i[4]>100),Qe(H,"bg-green-300",i[4]<=100),G(o,"class","text-left mb-2"),G(we,"class","flex gap-x-2")},m(nt,At){j(nt,t,At),L(t,e),L(t,r),j(nt,s,At),j(nt,o,At),L(o,l),L(o,c),L(o,h);for(let Ie=0;Ie<jt.length;Ie+=1)jt[Ie]&&jt[Ie].m(h,null);L(h,d),L(h,m),L(m,p),L(m,g),L(m,w),L(m,V),L(m,A),L(A,P),L(m,D),L(m,k),L(k,I),L(m,T),L(m,v),L(v,R),L(h,C),L(h,S),L(S,b),L(S,st),L(S,rt),L(S,ht),L(S,ut),L(ut,xt),L(ut,zt),L(S,q),L(S,H),L(H,It),L(H,Ot),L(S,Mt),L(S,ge),j(nt,tn,At),j(nt,we,At),Tt(Xt,we,null),L(we,Ge),Tt(xe,we,null),Zt=!0},p(nt,At){if((!Zt||At&4)&&n!==(n=nt[2].id+"")&&Bt(r,n),At&140){sn=dn(nt[3]);let bt;for(bt=0;bt<sn.length;bt+=1){const Cn=Xc(nt,sn,bt);jt[bt]?jt[bt].p(Cn,At):(jt[bt]=Jc(Cn),jt[bt].c(),jt[bt].m(h,d))}for(;bt<jt.length;bt+=1)jt[bt].d(1);jt.length=sn.length}(!Zt||At&2)&&Bt(P,nt[1]),(!Zt||At&1)&&O!==(O=nt[0].toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"")&&Bt(I,O),(!Zt||At&64)&&Bt(R,nt[6]),(!Zt||At&32)&&dt!==(dt=nt[5].toFixed(0)+"")&&Bt(xt,dt),(!Zt||At&32)&&Qe(ut,"bg-red-300",nt[5]<100),(!Zt||At&32)&&Qe(ut,"bg-green-300",nt[5]>=100),(!Zt||At&16)&&tt!==(tt=nt[4].toFixed(0)+"")&&Bt(It,tt),(!Zt||At&16)&&Qe(H,"bg-red-300",nt[4]>100),(!Zt||At&16)&&Qe(H,"bg-green-300",nt[4]<=100);const Ie={};At&262144&&(Ie.$$scope={dirty:At,ctx:nt}),Xt.$set(Ie);const He={};At&262144&&(He.$$scope={dirty:At,ctx:nt}),xe.$set(He)},i(nt){Zt||(K(Xt.$$.fragment,nt),K(xe.$$.fragment,nt),Zt=!0)},o(nt){Z(Xt.$$.fragment,nt),Z(xe.$$.fragment,nt),Zt=!1},d(nt){nt&&(N(t),N(s),N(o),N(tn),N(we)),ts(jt,nt),Et(Xt),Et(xe)}}}function nv(i){let t,e,n=i[2]&&Yc(i);return{c(){n&&n.c(),t=De()},l(r){n&&n.l(r),t=De()},m(r,s){n&&n.m(r,s),j(r,t,s),e=!0},p(r,[s]){r[2]?n?(n.p(r,s),s&4&&K(n,1)):(n=Yc(r),n.c(),K(n,1),n.m(t.parentNode,t)):n&&(wn(),Z(n,1,1,()=>{n=null}),In())},i(r){e||(K(n),e=!0)},o(r){Z(n),e=!1},d(r){r&&N(t),n&&n.d(r)}}}function rv(i,t,e){let n,r,s,o,l,u,c,h,d,m;Xe(i,Qc,A=>e(8,c=A)),Xe(i,zs,A=>e(3,h=A)),Xe(i,Qa,A=>e(9,d=A)),Xe(i,fr,A=>e(10,m=A)),uo(()=>{const A=Hr(an,"maatregelen"),P=Hr(an,"doelen");xa(A,D=>{zs.set(D.docs.map(k=>({id:k.id,...k.data()})))}),xa(P,D=>{Qc.set(D.docs.map(k=>({doel:Number(k.data().doel),budget:Number(k.data().budget),...k.data()})))})});const p=(A,P)=>{const D=A.target;e(2,n.values[P]=D.valueAsNumber,n),y()},y=async()=>{try{const A=n.id,P=Va(an,"stakeholders",A);(await F0(P)).exists()?await td(P,{values:n.values}):await $0(P,{values:n.values}),console.log("Document successfully updated!")}catch(A){console.error("Error updating document: ",A)}},g=(A,P)=>p(P,A),w=()=>{nn.set(2)},V=()=>{nn.set(4)};return i.$$.update=()=>{var A,P;i.$$.dirty&1536&&e(2,n=m.find(D=>D.id===(d==null?void 0:d.id))),i.$$.dirty&12&&e(1,r=h.reduce((D,k,O)=>{var I;return D+Oi(((I=n==null?void 0:n.values)==null?void 0:I[O])??0,k)},0)),i.$$.dirty&12&&e(0,s=h.reduce((D,k,O)=>{var I;return D+Bs(((I=n==null?void 0:n.values)==null?void 0:I[O])??0,k)},0)),i.$$.dirty&12&&e(6,o=h.reduce((D,k,O)=>{var I;return D+Us(((I=n==null?void 0:n.values)==null?void 0:I[O])??0,k)},0)),i.$$.dirty&258&&e(5,l=r/((A=c[0])==null?void 0:A.doel)*100),i.$$.dirty&257&&e(4,u=s/((P=c[0])==null?void 0:P.budget)*100)},[s,r,n,h,u,l,o,p,c,d,m,g,w,V]}class iv extends je{constructor(t){super(),qe(this,t,rv,nv,ke,{})}}function Zc(i){let t,e;return t=new vr({props:{class:"lg:w-[540px]",$$slots:{default:[av]},$$scope:{ctx:i}}}),{c(){yt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,r){Tt(t,n,r),e=!0},p(n,r){const s={};r&9&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(K(t.$$.fragment,n),e=!0)},o(n){Z(t.$$.fragment,n),e=!1},d(n){Et(t,n)}}}function sv(i){let t;return{c(){t=at("Terug")},l(e){t=lt(e,"Terug")},m(e,n){j(e,t,n)},d(e){e&&N(t)}}}function ov(i){let t;return{c(){t=at("Volgende")},l(e){t=lt(e,"Volgende")},m(e,n){j(e,t,n)},d(e){e&&N(t)}}}function av(i){let t,e=i[0].id+"",n,r,s,o=i[0].description+"",l,u,c,h,d,m,p;return h=new Te({props:{theme:"red",$$slots:{default:[sv]},$$scope:{ctx:i}}}),h.$on("click",i[1]),m=new Te({props:{$$slots:{default:[ov]},$$scope:{ctx:i}}}),m.$on("click",i[2]),{c(){t=U("h2"),n=at(e),r=Q(),s=U("p"),l=at(o),u=Q(),c=U("div"),yt(h.$$.fragment),d=Q(),yt(m.$$.fragment),this.h()},l(y){t=z(y,"H2",{class:!0});var g=J(t);n=lt(g,e),g.forEach(N),r=X(y),s=z(y,"P",{class:!0});var w=J(s);l=lt(w,o),w.forEach(N),u=X(y),c=z(y,"DIV",{class:!0});var V=J(c);vt(h.$$.fragment,V),d=X(V),vt(m.$$.fragment,V),V.forEach(N),this.h()},h(){G(t,"class","font-bold text-xl mb-2"),G(s,"class","mb-4"),G(c,"class","flex gap-x-2")},m(y,g){j(y,t,g),L(t,n),j(y,r,g),j(y,s,g),L(s,l),j(y,u,g),j(y,c,g),Tt(h,c,null),L(c,d),Tt(m,c,null),p=!0},p(y,g){(!p||g&1)&&e!==(e=y[0].id+"")&&Bt(n,e),(!p||g&1)&&o!==(o=y[0].description+"")&&Bt(l,o);const w={};g&8&&(w.$$scope={dirty:g,ctx:y}),h.$set(w);const V={};g&8&&(V.$$scope={dirty:g,ctx:y}),m.$set(V)},i(y){p||(K(h.$$.fragment,y),K(m.$$.fragment,y),p=!0)},o(y){Z(h.$$.fragment,y),Z(m.$$.fragment,y),p=!1},d(y){y&&(N(t),N(r),N(s),N(u),N(c)),Et(h),Et(m)}}}function lv(i){let t,e,n=i[0]&&Zc(i);return{c(){n&&n.c(),t=De()},l(r){n&&n.l(r),t=De()},m(r,s){n&&n.m(r,s),j(r,t,s),e=!0},p(r,[s]){r[0]?n?(n.p(r,s),s&1&&K(n,1)):(n=Zc(r),n.c(),K(n,1),n.m(t.parentNode,t)):n&&(wn(),Z(n,1,1,()=>{n=null}),In())},i(r){e||(K(n),e=!0)},o(r){Z(n),e=!1},d(r){r&&N(t),n&&n.d(r)}}}function uv(i,t,e){let n;return Xe(i,Qa,o=>e(0,n=o)),[n,()=>{nn.set(1)},()=>{nn.set(3)}]}class cv extends je{constructor(t){super(),qe(this,t,uv,lv,ke,{})}}function hv(i){let t,e='<svg aria-hidden="true" class="w-8 h-8 text-blue-500 animate-spin fill-white" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z" fill="currentColor"></path><path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z" fill="currentFill"></path></svg> <span class="sr-only">Loading...</span>';return{c(){t=U("div"),t.innerHTML=e,this.h()},l(n){t=z(n,"DIV",{role:!0,"data-svelte-h":!0}),se(t)!=="svelte-108fe9f"&&(t.innerHTML=e),this.h()},h(){G(t,"role","status")},m(n,r){j(n,t,r)},p:or,i:or,o:or,d(n){n&&N(t)}}}class fv extends je{constructor(t){super(),qe(this,t,null,hv,ke,{})}}function th(i,t,e){const n=i.slice();return n[5]=t[e],n}function dv(i){let t,e;return t=new fv({}),{c(){yt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,r){Tt(t,n,r),e=!0},i(n){e||(K(t.$$.fragment,n),e=!0)},o(n){Z(t.$$.fragment,n),e=!1},d(n){Et(t,n)}}}function _v(i){let t,e="Er is iets misgegaan bij het ophalen van de data.";return{c(){t=U("p"),t.textContent=e,this.h()},l(n){t=z(n,"P",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-11wisfj"&&(t.textContent=e),this.h()},h(){G(t,"class","text-red-500")},m(n,r){j(n,t,r)},i:or,o:or,d(n){n&&N(t)}}}function mv(i){let t=i[5].id+"",e,n;return{c(){e=at(t),n=Q()},l(r){e=lt(r,t),n=X(r)},m(r,s){j(r,e,s),j(r,n,s)},p(r,s){s&2&&t!==(t=r[5].id+"")&&Bt(e,t)},d(r){r&&(N(e),N(n))}}}function eh(i){let t,e;function n(){return i[3](i[5])}return t=new Te({props:{$$slots:{default:[mv]},$$scope:{ctx:i}}}),t.$on("click",n),{c(){yt(t.$$.fragment)},l(r){vt(t.$$.fragment,r)},m(r,s){Tt(t,r,s),e=!0},p(r,s){i=r;const o={};s&258&&(o.$$scope={dirty:s,ctx:i}),t.$set(o)},i(r){e||(K(t.$$.fragment,r),e=!0)},o(r){Z(t.$$.fragment,r),e=!1},d(r){Et(t,r)}}}function pv(i){let t;return{c(){t=at("Terug")},l(e){t=lt(e,"Terug")},m(e,n){j(e,t,n)},d(e){e&&N(t)}}}function gv(i){let t,e="Selecteer de rol die je vertegenwoordigd",n,r,s,o,l,u,c,h,d;const m=[_v,dv],p=[];function y(A,P){return A[0]?0:A[1].length===0?1:-1}~(s=y(i))&&(o=p[s]=m[s](i));let g=dn(i[1]),w=[];for(let A=0;A<g.length;A+=1)w[A]=eh(th(i,g,A));const V=A=>Z(w[A],1,1,()=>{w[A]=null});return h=new Te({props:{theme:"red",$$slots:{default:[pv]},$$scope:{ctx:i}}}),h.$on("click",i[4]),{c(){t=U("div"),t.textContent=e,n=Q(),r=U("div"),o&&o.c(),l=Q();for(let A=0;A<w.length;A+=1)w[A].c();u=Q(),c=U("div"),yt(h.$$.fragment),this.h()},l(A){t=z(A,"DIV",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-1jx8mvq"&&(t.textContent=e),n=X(A),r=z(A,"DIV",{class:!0});var P=J(r);o&&o.l(P),l=X(P);for(let k=0;k<w.length;k+=1)w[k].l(P);P.forEach(N),u=X(A),c=z(A,"DIV",{});var D=J(c);vt(h.$$.fragment,D),D.forEach(N),this.h()},h(){G(t,"class","font-bold text-xl mb-4"),G(r,"class","flex gap-x-2 mb-2")},m(A,P){j(A,t,P),j(A,n,P),j(A,r,P),~s&&p[s].m(r,null),L(r,l);for(let D=0;D<w.length;D+=1)w[D]&&w[D].m(r,null);j(A,u,P),j(A,c,P),Tt(h,c,null),d=!0},p(A,P){let D=s;if(s=y(A),s!==D&&(o&&(wn(),Z(p[D],1,1,()=>{p[D]=null}),In()),~s?(o=p[s],o||(o=p[s]=m[s](A),o.c()),K(o,1),o.m(r,l)):o=null),P&2){g=dn(A[1]);let O;for(O=0;O<g.length;O+=1){const I=th(A,g,O);w[O]?(w[O].p(I,P),K(w[O],1)):(w[O]=eh(I),w[O].c(),K(w[O],1),w[O].m(r,null))}for(wn(),O=g.length;O<w.length;O+=1)V(O);In()}const k={};P&256&&(k.$$scope={dirty:P,ctx:A}),h.$set(k)},i(A){if(!d){K(o);for(let P=0;P<g.length;P+=1)K(w[P]);K(h.$$.fragment,A),d=!0}},o(A){Z(o),w=w.filter(Boolean);for(let P=0;P<w.length;P+=1)Z(w[P]);Z(h.$$.fragment,A),d=!1},d(A){A&&(N(t),N(n),N(r),N(u),N(c)),~s&&p[s].d(),ts(w,A),Et(h)}}}function yv(i){let t,e;return t=new vr({props:{$$slots:{default:[gv]},$$scope:{ctx:i}}}),{c(){yt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,r){Tt(t,n,r),e=!0},p(n,[r]){const s={};r&259&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(K(t.$$.fragment,n),e=!0)},o(n){Z(t.$$.fragment,n),e=!1},d(n){Et(t,n)}}}const vv=5e3;function Tv(i,t,e){let n,r;Xe(i,fr,u=>e(1,r=u));const s=Zr(!1);return Xe(i,s,u=>e(0,n=u)),uo(()=>{const u=setTimeout(()=>{s.set(!0)},vv),c=fr.subscribe(h=>{h.length>0&&clearTimeout(u)});return()=>{clearTimeout(u),c()}}),[n,r,s,u=>{Qa.set(u),nn.set(2)},()=>{nn.set(0)}]}class Ev extends je{constructor(t){super(),qe(this,t,Tv,yv,ke,{})}}function vn(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function nd(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.__proto__=t}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Ue={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Wr={duration:.5,overwrite:!1,delay:0},xl,_e,kt,Ye=1e8,Ct=1/Ye,Oa=Math.PI*2,wv=Oa/4,Iv=0,rd=Math.sqrt,Av=Math.cos,bv=Math.sin,ne=function(t){return typeof t=="string"},Ut=function(t){return typeof t=="function"},Rn=function(t){return typeof t=="number"},Ol=function(t){return typeof t>"u"},pn=function(t){return typeof t=="object"},Re=function(t){return t!==!1},Ml=function(){return typeof window<"u"},Vs=function(t){return Ut(t)||ne(t)},id=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},me=Array.isArray,Ma=/(?:-?\.?\d|\.)+/gi,sd=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,xr=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,na=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,od=/[+-]=-?[.\d]+/,ad=/[^,'"\[\]\s]+/gi,Rv=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Nt,on,Na,Nl,ze={},no={},ld,ud=function(t){return(no=gr(t,ze))&&Ve},Ll=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},ji=function(t,e){return!e&&console.warn(t)},cd=function(t,e){return t&&(ze[t]=e)&&no&&(no[t]=e)||ze},qi=function(){return 0},Pv={suppressEvents:!0,isStart:!0,kill:!1},Ls={suppressEvents:!0,kill:!1},Cv={suppressEvents:!0},Fl={},Bn=[],La={},hd,Me={},ra={},nh=30,Fs=[],$l="",Bl=function(t){var e=t[0],n,r;if(pn(e)||Ut(e)||(t=[t]),!(n=(e._gsap||{}).harness)){for(r=Fs.length;r--&&!Fs[r].targetTest(e););n=Fs[r]}for(r=t.length;r--;)t[r]&&(t[r]._gsap||(t[r]._gsap=new Md(t[r],n)))||t.splice(r,1);return t},lr=function(t){return t._gsap||Bl(Je(t))[0]._gsap},fd=function(t,e,n){return(n=t[e])&&Ut(n)?t[e]():Ol(n)&&t.getAttribute&&t.getAttribute(e)||n},Pe=function(t,e){return(t=t.split(",")).forEach(e)||t},qt=function(t){return Math.round(t*1e5)/1e5||0},ee=function(t){return Math.round(t*1e7)/1e7||0},Lr=function(t,e){var n=e.charAt(0),r=parseFloat(e.substr(2));return t=parseFloat(t),n==="+"?t+r:n==="-"?t-r:n==="*"?t*r:t/r},Sv=function(t,e){for(var n=e.length,r=0;t.indexOf(e[r])<0&&++r<n;);return r<n},ro=function(){var t=Bn.length,e=Bn.slice(0),n,r;for(La={},Bn.length=0,n=0;n<t;n++)r=e[n],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},dd=function(t,e,n,r){Bn.length&&!_e&&ro(),t.render(e,n,_e&&e<0&&(t._initted||t._startAt)),Bn.length&&!_e&&ro()},_d=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(ad).length<2?e:ne(t)?t.trim():t},md=function(t){return t},Ze=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},Dv=function(t){return function(e,n){for(var r in n)r in e||r==="duration"&&t||r==="ease"||(e[r]=n[r])}},gr=function(t,e){for(var n in e)t[n]=e[n];return t},rh=function i(t,e){for(var n in e)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(t[n]=pn(e[n])?i(t[n]||(t[n]={}),e[n]):e[n]);return t},io=function(t,e){var n={},r;for(r in t)r in e||(n[r]=t[r]);return n},Di=function(t){var e=t.parent||Nt,n=t.keyframes?Dv(me(t.keyframes)):Ze;if(Re(t.inherit))for(;e;)n(t,e.vars.defaults),e=e.parent||e._dp;return t},Vv=function(t,e){for(var n=t.length,r=n===e.length;r&&n--&&t[n]===e[n];);return n<0},pd=function(t,e,n,r,s){var o=t[r],l;if(s)for(l=e[s];o&&o[s]>l;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[r]=e,e._prev=o,e.parent=e._dp=t,e},Ro=function(t,e,n,r){n===void 0&&(n="_first"),r===void 0&&(r="_last");var s=e._prev,o=e._next;s?s._next=o:t[n]===e&&(t[n]=o),o?o._prev=s:t[r]===e&&(t[r]=s),e._next=e._prev=e.parent=null},Hn=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},ur=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},kv=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},Fa=function(t,e,n,r){return t._startAt&&(_e?t._startAt.revert(Ls):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,r))},xv=function i(t){return!t||t._ts&&i(t.parent)},ih=function(t){return t._repeat?Qr(t._tTime,t=t.duration()+t._rDelay)*t:0},Qr=function(t,e){var n=Math.floor(t/=e);return t&&n===t?n-1:n},so=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Po=function(t){return t._end=ee(t._start+(t._tDur/Math.abs(t._ts||t._rts||Ct)||0))},Co=function(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=ee(n._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Po(t),n._dirty||ur(n,t)),t},gd=function(t,e){var n;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(n=so(t.rawTime(),e),(!e._dur||cs(0,e.totalDuration(),n)-e._tTime>Ct)&&e.render(n,!0)),ur(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-Ct}},ln=function(t,e,n,r){return e.parent&&Hn(e),e._start=ee((Rn(n)?n:n||t!==Nt?We(t,n,e):t._time)+e._delay),e._end=ee(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),pd(t,e,"_first","_last",t._sort?"_start":0),$a(e)||(t._recent=e),r||gd(t,e),t._ts<0&&Co(t,t._tTime),t},yd=function(t,e){return(ze.ScrollTrigger||Ll("scrollTrigger",e))&&ze.ScrollTrigger.create(e,t)},vd=function(t,e,n,r,s){if(zl(t,e,s),!t._initted)return 1;if(!n&&t._pt&&!_e&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&hd!==Ne.frame)return Bn.push(t),t._lazy=[s,r],1},Ov=function i(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||i(e))},$a=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},Mv=function(t,e,n,r){var s=t.ratio,o=e<0||!e&&(!t._start&&Ov(t)&&!(!t._initted&&$a(t))||(t._ts<0||t._dp._ts<0)&&!$a(t))?0:1,l=t._rDelay,u=0,c,h,d;if(l&&t._repeat&&(u=cs(0,t._tDur,e),h=Qr(u,l),t._yoyo&&h&1&&(o=1-o),h!==Qr(t._tTime,l)&&(s=1-o,t.vars.repeatRefresh&&t._initted&&t.invalidate())),o!==s||_e||r||t._zTime===Ct||!e&&t._zTime){if(!t._initted&&vd(t,e,r,n,u))return;for(d=t._zTime,t._zTime=e||(n?Ct:0),n||(n=e&&!d),t.ratio=o,t._from&&(o=1-o),t._time=0,t._tTime=u,c=t._pt;c;)c.r(o,c.d),c=c._next;e<0&&Fa(t,e,n,!0),t._onUpdate&&!n&&Fe(t,"onUpdate"),u&&t._repeat&&!n&&t.parent&&Fe(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===o&&(o&&Hn(t,1),!n&&!_e&&(Fe(t,o?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},Nv=function(t,e,n){var r;if(n>e)for(r=t._first;r&&r._start<=n;){if(r.data==="isPause"&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=n;){if(r.data==="isPause"&&r._start<e)return r;r=r._prev}},Xr=function(t,e,n,r){var s=t._repeat,o=ee(e)||0,l=t._tTime/t._tDur;return l&&!r&&(t._time*=o/t._dur),t._dur=o,t._tDur=s?s<0?1e10:ee(o*(s+1)+t._rDelay*s):o,l>0&&!r&&Co(t,t._tTime=t._tDur*l),t.parent&&Po(t),n||ur(t.parent,t),t},sh=function(t){return t instanceof ve?ur(t):Xr(t,t._dur)},Lv={_start:0,endTime:qi,totalDuration:qi},We=function i(t,e,n){var r=t.labels,s=t._recent||Lv,o=t.duration()>=Ye?s.endTime(!1):t._dur,l,u,c;return ne(e)&&(isNaN(e)||e in r)?(u=e.charAt(0),c=e.substr(-1)==="%",l=e.indexOf("="),u==="<"||u===">"?(l>=0&&(e=e.replace(/=/,"")),(u==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(e.substr(1))||0)*(c?(l<0?s:n).totalDuration()/100:1)):l<0?(e in r||(r[e]=o),r[e]):(u=parseFloat(e.charAt(l-1)+e.substr(l+1)),c&&n&&(u=u/100*(me(n)?n[0]:n).totalDuration()),l>1?i(t,e.substr(0,l-1),n)+u:o+u)):e==null?o:+e},Vi=function(t,e,n){var r=Rn(e[1]),s=(r?2:1)+(t<2?0:1),o=e[s],l,u;if(r&&(o.duration=e[1]),o.parent=n,t){for(l=o,u=n;u&&!("immediateRender"in l);)l=u.vars.defaults||{},u=Re(u.vars.inherit)&&u.parent;o.immediateRender=Re(l.immediateRender),t<2?o.runBackwards=1:o.startAt=e[s-1]}return new Qt(e[0],o,e[s+1])},Qn=function(t,e){return t||t===0?e(t):e},cs=function(t,e,n){return n<t?t:n>e?e:n},de=function(t,e){return!ne(t)||!(e=Rv.exec(t))?"":e[1]},Fv=function(t,e,n){return Qn(n,function(r){return cs(t,e,r)})},Ba=[].slice,Td=function(t,e){return t&&pn(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&pn(t[0]))&&!t.nodeType&&t!==on},$v=function(t,e,n){return n===void 0&&(n=[]),t.forEach(function(r){var s;return ne(r)&&!e||Td(r,1)?(s=n).push.apply(s,Je(r)):n.push(r)})||n},Je=function(t,e,n){return kt&&!e&&kt.selector?kt.selector(t):ne(t)&&!n&&(Na||!Yr())?Ba.call((e||Nl).querySelectorAll(t),0):me(t)?$v(t,n):Td(t)?Ba.call(t,0):t?[t]:[]},Ua=function(t){return t=Je(t)[0]||ji("Invalid scope")||{},function(e){var n=t.current||t.nativeElement||t;return Je(e,n.querySelectorAll?n:n===t?ji("Invalid scope")||Nl.createElement("div"):t)}},Ed=function(t){return t.sort(function(){return .5-Math.random()})},wd=function(t){if(Ut(t))return t;var e=pn(t)?t:{each:t},n=cr(e.ease),r=e.from||0,s=parseFloat(e.base)||0,o={},l=r>0&&r<1,u=isNaN(r)||l,c=e.axis,h=r,d=r;return ne(r)?h=d={center:.5,edges:.5,end:1}[r]||0:!l&&u&&(h=r[0],d=r[1]),function(m,p,y){var g=(y||e).length,w=o[g],V,A,P,D,k,O,I,T,v;if(!w){if(v=e.grid==="auto"?0:(e.grid||[1,Ye])[1],!v){for(I=-Ye;I<(I=y[v++].getBoundingClientRect().left)&&v<g;);v<g&&v--}for(w=o[g]=[],V=u?Math.min(v,g)*h-.5:r%v,A=v===Ye?0:u?g*d/v-.5:r/v|0,I=0,T=Ye,O=0;O<g;O++)P=O%v-V,D=A-(O/v|0),w[O]=k=c?Math.abs(c==="y"?D:P):rd(P*P+D*D),k>I&&(I=k),k<T&&(T=k);r==="random"&&Ed(w),w.max=I-T,w.min=T,w.v=g=(parseFloat(e.amount)||parseFloat(e.each)*(v>g?g-1:c?c==="y"?g/v:v:Math.max(v,g/v))||0)*(r==="edges"?-1:1),w.b=g<0?s-g:s,w.u=de(e.amount||e.each)||0,n=n&&g<0?kd(n):n}return g=(w[m]-w.min)/w.max||0,ee(w.b+(n?n(g):g)*w.v)+w.u}},za=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(n){var r=ee(Math.round(parseFloat(n)/t)*t*e);return(r-r%1)/e+(Rn(n)?0:de(n))}},Id=function(t,e){var n=me(t),r,s;return!n&&pn(t)&&(r=n=t.radius||Ye,t.values?(t=Je(t.values),(s=!Rn(t[0]))&&(r*=r)):t=za(t.increment)),Qn(e,n?Ut(t)?function(o){return s=t(o),Math.abs(s-o)<=r?s:o}:function(o){for(var l=parseFloat(s?o.x:o),u=parseFloat(s?o.y:0),c=Ye,h=0,d=t.length,m,p;d--;)s?(m=t[d].x-l,p=t[d].y-u,m=m*m+p*p):m=Math.abs(t[d]-l),m<c&&(c=m,h=d);return h=!r||c<=r?t[h]:o,s||h===o||Rn(o)?h:h+de(o)}:za(t))},Ad=function(t,e,n,r){return Qn(me(t)?!e:n===!0?!!(n=0):!r,function(){return me(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+n*.99))/n)*n*r)/r})},Bv=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return e.reduce(function(s,o){return o(s)},r)}},Uv=function(t,e){return function(n){return t(parseFloat(n))+(e||de(n))}},zv=function(t,e,n){return Rd(t,e,0,1,n)},bd=function(t,e,n){return Qn(n,function(r){return t[~~e(r)]})},jv=function i(t,e,n){var r=e-t;return me(t)?bd(t,i(0,t.length),e):Qn(n,function(s){return(r+(s-t)%r)%r+t})},qv=function i(t,e,n){var r=e-t,s=r*2;return me(t)?bd(t,i(0,t.length-1),e):Qn(n,function(o){return o=(s+(o-t)%s)%s||0,t+(o>r?s-o:o)})},Gi=function(t){for(var e=0,n="",r,s,o,l;~(r=t.indexOf("random(",e));)o=t.indexOf(")",r),l=t.charAt(r+7)==="[",s=t.substr(r+7,o-r-7).match(l?ad:Ma),n+=t.substr(e,r-e)+Ad(l?s:+s[0],l?0:+s[1],+s[2]||1e-5),e=o+1;return n+t.substr(e,t.length-e)},Rd=function(t,e,n,r,s){var o=e-t,l=r-n;return Qn(s,function(u){return n+((u-t)/o*l||0)})},Gv=function i(t,e,n,r){var s=isNaN(t+e)?0:function(p){return(1-p)*t+p*e};if(!s){var o=ne(t),l={},u,c,h,d,m;if(n===!0&&(r=1)&&(n=null),o)t={p:t},e={p:e};else if(me(t)&&!me(e)){for(h=[],d=t.length,m=d-2,c=1;c<d;c++)h.push(i(t[c-1],t[c]));d--,s=function(y){y*=d;var g=Math.min(m,~~y);return h[g](y-g)},n=e}else r||(t=gr(me(t)?[]:{},t));if(!h){for(u in e)Ul.call(l,t,u,"get",e[u]);s=function(y){return Gl(y,l)||(o?t.p:t)}}}return Qn(n,s)},oh=function(t,e,n){var r=t.labels,s=Ye,o,l,u;for(o in r)l=r[o]-e,l<0==!!n&&l&&s>(l=Math.abs(l))&&(u=o,s=l);return u},Fe=function(t,e,n){var r=t.vars,s=r[e],o=kt,l=t._ctx,u,c,h;if(s)return u=r[e+"Params"],c=r.callbackScope||t,n&&Bn.length&&ro(),l&&(kt=l),h=u?s.apply(c,u):s.call(c),kt=o,h},Ai=function(t){return Hn(t),t.scrollTrigger&&t.scrollTrigger.kill(!!_e),t.progress()<1&&Fe(t,"onInterrupt"),t},Or,Pd=[],Cd=function(t){if(t)if(t=!t.name&&t.default||t,Ml()||t.headless){var e=t.name,n=Ut(t),r=e&&!n&&t.init?function(){this._props=[]}:t,s={init:qi,render:Gl,add:Ul,kill:aT,modifier:oT,rawVars:0},o={targetTest:0,get:0,getSetter:ql,aliases:{},register:0};if(Yr(),t!==r){if(Me[e])return;Ze(r,Ze(io(t,s),o)),gr(r.prototype,gr(s,io(t,o))),Me[r.prop=e]=r,t.targetTest&&(Fs.push(r),Fl[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}cd(e,r),t.register&&t.register(Ve,r,Ce)}else Pd.push(t)},Pt=255,bi={aqua:[0,Pt,Pt],lime:[0,Pt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Pt],navy:[0,0,128],white:[Pt,Pt,Pt],olive:[128,128,0],yellow:[Pt,Pt,0],orange:[Pt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Pt,0,0],pink:[Pt,192,203],cyan:[0,Pt,Pt],transparent:[Pt,Pt,Pt,0]},ia=function(t,e,n){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(n-e)*t*6:t<.5?n:t*3<2?e+(n-e)*(2/3-t)*6:e)*Pt+.5|0},Sd=function(t,e,n){var r=t?Rn(t)?[t>>16,t>>8&Pt,t&Pt]:0:bi.black,s,o,l,u,c,h,d,m,p,y;if(!r){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),bi[t])r=bi[t];else if(t.charAt(0)==="#"){if(t.length<6&&(s=t.charAt(1),o=t.charAt(2),l=t.charAt(3),t="#"+s+s+o+o+l+l+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return r=parseInt(t.substr(1,6),16),[r>>16,r>>8&Pt,r&Pt,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),r=[t>>16,t>>8&Pt,t&Pt]}else if(t.substr(0,3)==="hsl"){if(r=y=t.match(Ma),!e)u=+r[0]%360/360,c=+r[1]/100,h=+r[2]/100,o=h<=.5?h*(c+1):h+c-h*c,s=h*2-o,r.length>3&&(r[3]*=1),r[0]=ia(u+1/3,s,o),r[1]=ia(u,s,o),r[2]=ia(u-1/3,s,o);else if(~t.indexOf("="))return r=t.match(sd),n&&r.length<4&&(r[3]=1),r}else r=t.match(Ma)||bi.transparent;r=r.map(Number)}return e&&!y&&(s=r[0]/Pt,o=r[1]/Pt,l=r[2]/Pt,d=Math.max(s,o,l),m=Math.min(s,o,l),h=(d+m)/2,d===m?u=c=0:(p=d-m,c=h>.5?p/(2-d-m):p/(d+m),u=d===s?(o-l)/p+(o<l?6:0):d===o?(l-s)/p+2:(s-o)/p+4,u*=60),r[0]=~~(u+.5),r[1]=~~(c*100+.5),r[2]=~~(h*100+.5)),n&&r.length<4&&(r[3]=1),r},Dd=function(t){var e=[],n=[],r=-1;return t.split(Un).forEach(function(s){var o=s.match(xr)||[];e.push.apply(e,o),n.push(r+=o.length+1)}),e.c=n,e},ah=function(t,e,n){var r="",s=(t+r).match(Un),o=e?"hsla(":"rgba(",l=0,u,c,h,d;if(!s)return t;if(s=s.map(function(m){return(m=Sd(m,e,1))&&o+(e?m[0]+","+m[1]+"%,"+m[2]+"%,"+m[3]:m.join(","))+")"}),n&&(h=Dd(t),u=n.c,u.join(r)!==h.c.join(r)))for(c=t.replace(Un,"1").split(xr),d=c.length-1;l<d;l++)r+=c[l]+(~u.indexOf(l)?s.shift()||o+"0,0,0,0)":(h.length?h:s.length?s:n).shift());if(!c)for(c=t.split(Un),d=c.length-1;l<d;l++)r+=c[l]+s[l];return r+c[d]},Un=function(){var i="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in bi)i+="|"+t+"\\b";return new RegExp(i+")","gi")}(),Hv=/hsl[a]?\(/,Vd=function(t){var e=t.join(" "),n;if(Un.lastIndex=0,Un.test(e))return n=Hv.test(e),t[1]=ah(t[1],n),t[0]=ah(t[0],n,Dd(t[1])),!0},Hi,Ne=function(){var i=Date.now,t=500,e=33,n=i(),r=n,s=1e3/240,o=s,l=[],u,c,h,d,m,p,y=function g(w){var V=i()-r,A=w===!0,P,D,k,O;if((V>t||V<0)&&(n+=V-e),r+=V,k=r-n,P=k-o,(P>0||A)&&(O=++d.frame,m=k-d.time*1e3,d.time=k=k/1e3,o+=P+(P>=s?4:s-P),D=1),A||(u=c(g)),D)for(p=0;p<l.length;p++)l[p](k,m,O,w)};return d={time:0,frame:0,tick:function(){y(!0)},deltaRatio:function(w){return m/(1e3/(w||60))},wake:function(){ld&&(!Na&&Ml()&&(on=Na=window,Nl=on.document||{},ze.gsap=Ve,(on.gsapVersions||(on.gsapVersions=[])).push(Ve.version),ud(no||on.GreenSockGlobals||!on.gsap&&on||{}),Pd.forEach(Cd)),h=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&d.sleep(),c=h||function(w){return setTimeout(w,o-d.time*1e3+1|0)},Hi=1,y(2))},sleep:function(){(h?cancelAnimationFrame:clearTimeout)(u),Hi=0,c=qi},lagSmoothing:function(w,V){t=w||1/0,e=Math.min(V||33,t)},fps:function(w){s=1e3/(w||240),o=d.time*1e3+s},add:function(w,V,A){var P=V?function(D,k,O,I){w(D,k,O,I),d.remove(P)}:w;return d.remove(w),l[A?"unshift":"push"](P),Yr(),P},remove:function(w,V){~(V=l.indexOf(w))&&l.splice(V,1)&&p>=V&&p--},_listeners:l},d}(),Yr=function(){return!Hi&&Ne.wake()},_t={},Kv=/^[\d.\-M][\d.\-,\s]/,Wv=/["']/g,Qv=function(t){for(var e={},n=t.substr(1,t.length-3).split(":"),r=n[0],s=1,o=n.length,l,u,c;s<o;s++)u=n[s],l=s!==o-1?u.lastIndexOf(","):u.length,c=u.substr(0,l),e[r]=isNaN(c)?c.replace(Wv,"").trim():+c,r=u.substr(l+1).trim();return e},Xv=function(t){var e=t.indexOf("(")+1,n=t.indexOf(")"),r=t.indexOf("(",e);return t.substring(e,~r&&r<n?t.indexOf(")",n+1):n)},Yv=function(t){var e=(t+"").split("("),n=_t[e[0]];return n&&e.length>1&&n.config?n.config.apply(null,~t.indexOf("{")?[Qv(e[1])]:Xv(t).split(",").map(_d)):_t._CE&&Kv.test(t)?_t._CE("",t):n},kd=function(t){return function(e){return 1-t(1-e)}},xd=function i(t,e){for(var n=t._first,r;n;)n instanceof ve?i(n,e):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==e&&(n.timeline?i(n.timeline,e):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=e)),n=n._next},cr=function(t,e){return t&&(Ut(t)?t:_t[t]||Yv(t))||e},wr=function(t,e,n,r){n===void 0&&(n=function(u){return 1-e(1-u)}),r===void 0&&(r=function(u){return u<.5?e(u*2)/2:1-e((1-u)*2)/2});var s={easeIn:e,easeOut:n,easeInOut:r},o;return Pe(t,function(l){_t[l]=ze[l]=s,_t[o=l.toLowerCase()]=n;for(var u in s)_t[o+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=_t[l+"."+u]=s[u]}),s},Od=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},sa=function i(t,e,n){var r=e>=1?e:1,s=(n||(t?.3:.45))/(e<1?e:1),o=s/Oa*(Math.asin(1/r)||0),l=function(h){return h===1?1:r*Math.pow(2,-10*h)*bv((h-o)*s)+1},u=t==="out"?l:t==="in"?function(c){return 1-l(1-c)}:Od(l);return s=Oa/s,u.config=function(c,h){return i(t,c,h)},u},oa=function i(t,e){e===void 0&&(e=1.70158);var n=function(o){return o?--o*o*((e+1)*o+e)+1:0},r=t==="out"?n:t==="in"?function(s){return 1-n(1-s)}:Od(n);return r.config=function(s){return i(t,s)},r};Pe("Linear,Quad,Cubic,Quart,Quint,Strong",function(i,t){var e=t<5?t+1:t;wr(i+",Power"+(e-1),t?function(n){return Math.pow(n,e)}:function(n){return n},function(n){return 1-Math.pow(1-n,e)},function(n){return n<.5?Math.pow(n*2,e)/2:1-Math.pow((1-n)*2,e)/2})});_t.Linear.easeNone=_t.none=_t.Linear.easeIn;wr("Elastic",sa("in"),sa("out"),sa());(function(i,t){var e=1/t,n=2*e,r=2.5*e,s=function(l){return l<e?i*l*l:l<n?i*Math.pow(l-1.5/t,2)+.75:l<r?i*(l-=2.25/t)*l+.9375:i*Math.pow(l-2.625/t,2)+.984375};wr("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);wr("Expo",function(i){return i?Math.pow(2,10*(i-1)):0});wr("Circ",function(i){return-(rd(1-i*i)-1)});wr("Sine",function(i){return i===1?1:-Av(i*wv)+1});wr("Back",oa("in"),oa("out"),oa());_t.SteppedEase=_t.steps=ze.SteppedEase={config:function(t,e){t===void 0&&(t=1);var n=1/t,r=t+(e?0:1),s=e?1:0,o=1-Ct;return function(l){return((r*cs(0,o,l)|0)+s)*n}}};Wr.ease=_t["quad.out"];Pe("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(i){return $l+=i+","+i+"Params,"});var Md=function(t,e){this.id=Iv++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:fd,this.set=e?e.getSetter:ql},Ki=function(){function i(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Xr(this,+e.duration,1,1),this.data=e.data,kt&&(this._ctx=kt,kt.data.push(this)),Hi||Ne.wake()}var t=i.prototype;return t.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},t.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},t.totalDuration=function(n){return arguments.length?(this._dirty=0,Xr(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(n,r){if(Yr(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(Co(this,n),!s._dp||s.parent||gd(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&ln(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Ct||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),dd(this,n,r)),this},t.time=function(n,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+ih(this))%(this._dur+this._rDelay)||(n?this._dur:0),r):this._time},t.totalProgress=function(n,r){return arguments.length?this.totalTime(this.totalDuration()*n,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},t.progress=function(n,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+ih(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(n,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,r):this._repeat?Qr(this._tTime,s)+1:1},t.timeScale=function(n,r){if(!arguments.length)return this._rts===-Ct?0:this._rts;if(this._rts===n)return this;var s=this.parent&&this._ts?so(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-Ct?0:this._rts,this.totalTime(cs(-Math.abs(this._delay),this._tDur,s),r!==!1),Po(this),kv(this)},t.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Yr(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Ct&&(this._tTime-=Ct)))),this):this._ps},t.startTime=function(n){if(arguments.length){this._start=n;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&ln(r,this,n-this._delay),this}return this._start},t.endTime=function(n){return this._start+(Re(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(n){var r=this.parent||this._dp;return r?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?so(r.rawTime(n),this):this._tTime:this._tTime},t.revert=function(n){n===void 0&&(n=Cv);var r=_e;return _e=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),_e=r,this},t.globalTime=function(n){for(var r=this,s=arguments.length?n:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(n):s},t.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,sh(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(n){if(arguments.length){var r=this._time;return this._rDelay=n,sh(this),r?this.time(r):this}return this._rDelay},t.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},t.seek=function(n,r){return this.totalTime(We(this,n),Re(r))},t.restart=function(n,r){return this.play().totalTime(n?-this._delay:0,Re(r))},t.play=function(n,r){return n!=null&&this.seek(n,r),this.reversed(!1).paused(!1)},t.reverse=function(n,r){return n!=null&&this.seek(n||this.totalDuration(),r),this.reversed(!0).paused(!1)},t.pause=function(n,r){return n!=null&&this.seek(n,r),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-Ct:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-Ct,this},t.isActive=function(){var n=this.parent||this._dp,r=this._start,s;return!!(!n||this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=r&&s<this.endTime(!0)-Ct)},t.eventCallback=function(n,r,s){var o=this.vars;return arguments.length>1?(r?(o[n]=r,s&&(o[n+"Params"]=s),n==="onUpdate"&&(this._onUpdate=r)):delete o[n],this):o[n]},t.then=function(n){var r=this;return new Promise(function(s){var o=Ut(n)?n:md,l=function(){var c=r.then;r.then=null,Ut(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=c),s(o),r.then=c};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?l():r._prom=l})},t.kill=function(){Ai(this)},i}();Ze(Ki.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Ct,_prom:0,_ps:!1,_rts:1});var ve=function(i){nd(t,i);function t(n,r){var s;return n===void 0&&(n={}),s=i.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=Re(n.sortChildren),Nt&&ln(n.parent||Nt,vn(s),r),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&yd(vn(s),n.scrollTrigger),s}var e=t.prototype;return e.to=function(r,s,o){return Vi(0,arguments,this),this},e.from=function(r,s,o){return Vi(1,arguments,this),this},e.fromTo=function(r,s,o,l){return Vi(2,arguments,this),this},e.set=function(r,s,o){return s.duration=0,s.parent=this,Di(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Qt(r,s,We(this,o),1),this},e.call=function(r,s,o){return ln(this,Qt.delayedCall(0,r,s),o)},e.staggerTo=function(r,s,o,l,u,c,h){return o.duration=s,o.stagger=o.stagger||l,o.onComplete=c,o.onCompleteParams=h,o.parent=this,new Qt(r,o,We(this,u)),this},e.staggerFrom=function(r,s,o,l,u,c,h){return o.runBackwards=1,Di(o).immediateRender=Re(o.immediateRender),this.staggerTo(r,s,o,l,u,c,h)},e.staggerFromTo=function(r,s,o,l,u,c,h,d){return l.startAt=o,Di(l).immediateRender=Re(l.immediateRender),this.staggerTo(r,s,l,u,c,h,d)},e.render=function(r,s,o){var l=this._time,u=this._dirty?this.totalDuration():this._tDur,c=this._dur,h=r<=0?0:ee(r),d=this._zTime<0!=r<0&&(this._initted||!c),m,p,y,g,w,V,A,P,D,k,O,I;if(this!==Nt&&h>u&&r>=0&&(h=u),h!==this._tTime||o||d){if(l!==this._time&&c&&(h+=this._time-l,r+=this._time-l),m=h,D=this._start,P=this._ts,V=!P,d&&(c||(l=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(O=this._yoyo,w=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(w*100+r,s,o);if(m=ee(h%w),h===u?(g=this._repeat,m=c):(g=~~(h/w),g&&g===h/w&&(m=c,g--),m>c&&(m=c)),k=Qr(this._tTime,w),!l&&this._tTime&&k!==g&&this._tTime-k*w-this._dur<=0&&(k=g),O&&g&1&&(m=c-m,I=1),g!==k&&!this._lock){var T=O&&k&1,v=T===(O&&g&1);if(g<k&&(T=!T),l=T?0:h%c?c:h,this._lock=1,this.render(l||(I?0:ee(g*w)),s,!c)._lock=0,this._tTime=h,!s&&this.parent&&Fe(this,"onRepeat"),this.vars.repeatRefresh&&!I&&(this.invalidate()._lock=1),l&&l!==this._time||V!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,u=this._tDur,v&&(this._lock=2,l=T?c:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!I&&this.invalidate()),this._lock=0,!this._ts&&!V)return this;xd(this,I)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(A=Nv(this,ee(l),ee(m)),A&&(h-=m-(m=A._start))),this._tTime=h,this._time=m,this._act=!P,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,l=0),!l&&m&&!s&&!g&&(Fe(this,"onStart"),this._tTime!==h))return this;if(m>=l&&r>=0)for(p=this._first;p;){if(y=p._next,(p._act||m>=p._start)&&p._ts&&A!==p){if(p.parent!==this)return this.render(r,s,o);if(p.render(p._ts>0?(m-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(m-p._start)*p._ts,s,o),m!==this._time||!this._ts&&!V){A=0,y&&(h+=this._zTime=-Ct);break}}p=y}else{p=this._last;for(var R=r<0?r:m;p;){if(y=p._prev,(p._act||R<=p._end)&&p._ts&&A!==p){if(p.parent!==this)return this.render(r,s,o);if(p.render(p._ts>0?(R-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(R-p._start)*p._ts,s,o||_e&&(p._initted||p._startAt)),m!==this._time||!this._ts&&!V){A=0,y&&(h+=this._zTime=R?-Ct:Ct);break}}p=y}}if(A&&!s&&(this.pause(),A.render(m>=l?0:-Ct)._zTime=m>=l?1:-1,this._ts))return this._start=D,Po(this),this.render(r,s,o);this._onUpdate&&!s&&Fe(this,"onUpdate",!0),(h===u&&this._tTime>=this.totalDuration()||!h&&l)&&(D===this._start||Math.abs(P)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(h===u&&this._ts>0||!h&&this._ts<0)&&Hn(this,1),!s&&!(r<0&&!l)&&(h||l||!u)&&(Fe(this,h===u&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(h<u&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(r,s){var o=this;if(Rn(s)||(s=We(this,s,r)),!(r instanceof Ki)){if(me(r))return r.forEach(function(l){return o.add(l,s)}),this;if(ne(r))return this.addLabel(r,s);if(Ut(r))r=Qt.delayedCall(0,r);else return this}return this!==r?ln(this,r,s):this},e.getChildren=function(r,s,o,l){r===void 0&&(r=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),l===void 0&&(l=-Ye);for(var u=[],c=this._first;c;)c._start>=l&&(c instanceof Qt?s&&u.push(c):(o&&u.push(c),r&&u.push.apply(u,c.getChildren(!0,s,o)))),c=c._next;return u},e.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},e.remove=function(r){return ne(r)?this.removeLabel(r):Ut(r)?this.killTweensOf(r):(Ro(this,r),r===this._recent&&(this._recent=this._last),ur(this))},e.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ee(Ne.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),i.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},e.addLabel=function(r,s){return this.labels[r]=We(this,s),this},e.removeLabel=function(r){return delete this.labels[r],this},e.addPause=function(r,s,o){var l=Qt.delayedCall(0,s||qi,o);return l.data="isPause",this._hasPause=1,ln(this,l,We(this,r))},e.removePause=function(r){var s=this._first;for(r=We(this,r);s;)s._start===r&&s.data==="isPause"&&Hn(s),s=s._next},e.killTweensOf=function(r,s,o){for(var l=this.getTweensOf(r,o),u=l.length;u--;)On!==l[u]&&l[u].kill(r,s);return this},e.getTweensOf=function(r,s){for(var o=[],l=Je(r),u=this._first,c=Rn(s),h;u;)u instanceof Qt?Sv(u._targets,l)&&(c?(!On||u._initted&&u._ts)&&u.globalTime(0)<=s&&u.globalTime(u.totalDuration())>s:!s||u.isActive())&&o.push(u):(h=u.getTweensOf(l,s)).length&&o.push.apply(o,h),u=u._next;return o},e.tweenTo=function(r,s){s=s||{};var o=this,l=We(o,r),u=s,c=u.startAt,h=u.onStart,d=u.onStartParams,m=u.immediateRender,p,y=Qt.to(o,Ze({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:s.duration||Math.abs((l-(c&&"time"in c?c.time:o._time))/o.timeScale())||Ct,onStart:function(){if(o.pause(),!p){var w=s.duration||Math.abs((l-(c&&"time"in c?c.time:o._time))/o.timeScale());y._dur!==w&&Xr(y,w,0,1).render(y._time,!0,!0),p=1}h&&h.apply(y,d||[])}},s));return m?y.render(0):y},e.tweenFromTo=function(r,s,o){return this.tweenTo(s,Ze({startAt:{time:We(this,r)}},o))},e.recent=function(){return this._recent},e.nextLabel=function(r){return r===void 0&&(r=this._time),oh(this,We(this,r))},e.previousLabel=function(r){return r===void 0&&(r=this._time),oh(this,We(this,r),1)},e.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Ct)},e.shiftChildren=function(r,s,o){o===void 0&&(o=0);for(var l=this._first,u=this.labels,c;l;)l._start>=o&&(l._start+=r,l._end+=r),l=l._next;if(s)for(c in u)u[c]>=o&&(u[c]+=r);return ur(this)},e.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return i.prototype.invalidate.call(this,r)},e.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),ur(this)},e.totalDuration=function(r){var s=0,o=this,l=o._last,u=Ye,c,h,d;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(d=o.parent;l;)c=l._prev,l._dirty&&l.totalDuration(),h=l._start,h>u&&o._sort&&l._ts&&!o._lock?(o._lock=1,ln(o,l,h-l._delay,1)._lock=0):u=h,h<0&&l._ts&&(s-=h,(!d&&!o._dp||d&&d.smoothChildTiming)&&(o._start+=h/o._ts,o._time-=h,o._tTime-=h),o.shiftChildren(-h,!1,-1/0),u=0),l._end>s&&l._ts&&(s=l._end),l=c;Xr(o,o===Nt&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(r){if(Nt._ts&&(dd(Nt,so(r,Nt)),hd=Ne.frame),Ne.frame>=nh){nh+=Ue.autoSleep||120;var s=Nt._first;if((!s||!s._ts)&&Ue.autoSleep&&Ne._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Ne.sleep()}}},t}(Ki);Ze(ve.prototype,{_lock:0,_hasPause:0,_forcing:0});var Jv=function(t,e,n,r,s,o,l){var u=new Ce(this._pt,t,e,0,1,Ud,null,s),c=0,h=0,d,m,p,y,g,w,V,A;for(u.b=n,u.e=r,n+="",r+="",(V=~r.indexOf("random("))&&(r=Gi(r)),o&&(A=[n,r],o(A,t,e),n=A[0],r=A[1]),m=n.match(na)||[];d=na.exec(r);)y=d[0],g=r.substring(c,d.index),p?p=(p+1)%5:g.substr(-5)==="rgba("&&(p=1),y!==m[h++]&&(w=parseFloat(m[h-1])||0,u._pt={_next:u._pt,p:g||h===1?g:",",s:w,c:y.charAt(1)==="="?Lr(w,y)-w:parseFloat(y)-w,m:p&&p<4?Math.round:0},c=na.lastIndex);return u.c=c<r.length?r.substring(c,r.length):"",u.fp=l,(od.test(r)||V)&&(u.e=0),this._pt=u,u},Ul=function(t,e,n,r,s,o,l,u,c,h){Ut(r)&&(r=r(s||0,t,o));var d=t[e],m=n!=="get"?n:Ut(d)?c?t[e.indexOf("set")||!Ut(t["get"+e.substr(3)])?e:"get"+e.substr(3)](c):t[e]():d,p=Ut(d)?c?rT:$d:jl,y;if(ne(r)&&(~r.indexOf("random(")&&(r=Gi(r)),r.charAt(1)==="="&&(y=Lr(m,r)+(de(m)||0),(y||y===0)&&(r=y))),!h||m!==r||ja)return!isNaN(m*r)&&r!==""?(y=new Ce(this._pt,t,e,+m||0,r-(m||0),typeof d=="boolean"?sT:Bd,0,p),c&&(y.fp=c),l&&y.modifier(l,this,t),this._pt=y):(!d&&!(e in t)&&Ll(e,r),Jv.call(this,t,e,m,r,p,u||Ue.stringFilter,c))},Zv=function(t,e,n,r,s){if(Ut(t)&&(t=ki(t,s,e,n,r)),!pn(t)||t.style&&t.nodeType||me(t)||id(t))return ne(t)?ki(t,s,e,n,r):t;var o={},l;for(l in t)o[l]=ki(t[l],s,e,n,r);return o},Nd=function(t,e,n,r,s,o){var l,u,c,h;if(Me[t]&&(l=new Me[t]).init(s,l.rawVars?e[t]:Zv(e[t],r,s,o,n),n,r,o)!==!1&&(n._pt=u=new Ce(n._pt,s,t,0,1,l.render,l,0,l.priority),n!==Or))for(c=n._ptLookup[n._targets.indexOf(s)],h=l._props.length;h--;)c[l._props[h]]=u;return l},On,ja,zl=function i(t,e,n){var r=t.vars,s=r.ease,o=r.startAt,l=r.immediateRender,u=r.lazy,c=r.onUpdate,h=r.runBackwards,d=r.yoyoEase,m=r.keyframes,p=r.autoRevert,y=t._dur,g=t._startAt,w=t._targets,V=t.parent,A=V&&V.data==="nested"?V.vars.targets:w,P=t._overwrite==="auto"&&!xl,D=t.timeline,k,O,I,T,v,R,C,S,b,st,rt,ht,ut;if(D&&(!m||!s)&&(s="none"),t._ease=cr(s,Wr.ease),t._yEase=d?kd(cr(d===!0?s:d,Wr.ease)):0,d&&t._yoyo&&!t._repeat&&(d=t._yEase,t._yEase=t._ease,t._ease=d),t._from=!D&&!!r.runBackwards,!D||m&&!r.stagger){if(S=w[0]?lr(w[0]).harness:0,ht=S&&r[S.prop],k=io(r,Fl),g&&(g._zTime<0&&g.progress(1),e<0&&h&&l&&!p?g.render(-1,!0):g.revert(h&&y?Ls:Pv),g._lazy=0),o){if(Hn(t._startAt=Qt.set(w,Ze({data:"isStart",overwrite:!1,parent:V,immediateRender:!0,lazy:!g&&Re(u),startAt:null,delay:0,onUpdate:c&&function(){return Fe(t,"onUpdate")},stagger:0},o))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(_e||!l&&!p)&&t._startAt.revert(Ls),l&&y&&e<=0&&n<=0){e&&(t._zTime=e);return}}else if(h&&y&&!g){if(e&&(l=!1),I=Ze({overwrite:!1,data:"isFromStart",lazy:l&&!g&&Re(u),immediateRender:l,stagger:0,parent:V},k),ht&&(I[S.prop]=ht),Hn(t._startAt=Qt.set(w,I)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(_e?t._startAt.revert(Ls):t._startAt.render(-1,!0)),t._zTime=e,!l)i(t._startAt,Ct,Ct);else if(!e)return}for(t._pt=t._ptCache=0,u=y&&Re(u)||u&&!y,O=0;O<w.length;O++){if(v=w[O],C=v._gsap||Bl(w)[O]._gsap,t._ptLookup[O]=st={},La[C.id]&&Bn.length&&ro(),rt=A===w?O:A.indexOf(v),S&&(b=new S).init(v,ht||k,t,rt,A)!==!1&&(t._pt=T=new Ce(t._pt,v,b.name,0,1,b.render,b,0,b.priority),b._props.forEach(function(dt){st[dt]=T}),b.priority&&(R=1)),!S||ht)for(I in k)Me[I]&&(b=Nd(I,k,t,rt,v,A))?b.priority&&(R=1):st[I]=T=Ul.call(t,v,I,"get",k[I],rt,A,0,r.stringFilter);t._op&&t._op[O]&&t.kill(v,t._op[O]),P&&t._pt&&(On=t,Nt.killTweensOf(v,st,t.globalTime(e)),ut=!t.parent,On=0),t._pt&&u&&(La[C.id]=1)}R&&zd(t),t._onInit&&t._onInit(t)}t._onUpdate=c,t._initted=(!t._op||t._pt)&&!ut,m&&e<=0&&D.render(Ye,!0,!0)},tT=function(t,e,n,r,s,o,l,u){var c=(t._pt&&t._ptCache||(t._ptCache={}))[e],h,d,m,p;if(!c)for(c=t._ptCache[e]=[],m=t._ptLookup,p=t._targets.length;p--;){if(h=m[p][e],h&&h.d&&h.d._pt)for(h=h.d._pt;h&&h.p!==e&&h.fp!==e;)h=h._next;if(!h)return ja=1,t.vars[e]="+=0",zl(t,l),ja=0,u?ji(e+" not eligible for reset"):1;c.push(h)}for(p=c.length;p--;)d=c[p],h=d._pt||d,h.s=(r||r===0)&&!s?r:h.s+(r||0)+o*h.c,h.c=n-h.s,d.e&&(d.e=qt(n)+de(d.e)),d.b&&(d.b=h.s+de(d.b))},eT=function(t,e){var n=t[0]?lr(t[0]).harness:0,r=n&&n.aliases,s,o,l,u;if(!r)return e;s=gr({},e);for(o in r)if(o in s)for(u=r[o].split(","),l=u.length;l--;)s[u[l]]=s[o];return s},nT=function(t,e,n,r){var s=e.ease||r||"power1.inOut",o,l;if(me(e))l=n[t]||(n[t]=[]),e.forEach(function(u,c){return l.push({t:c/(e.length-1)*100,v:u,e:s})});else for(o in e)l=n[o]||(n[o]=[]),o==="ease"||l.push({t:parseFloat(t),v:e[o],e:s})},ki=function(t,e,n,r,s){return Ut(t)?t.call(e,n,r,s):ne(t)&&~t.indexOf("random(")?Gi(t):t},Ld=$l+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Fd={};Pe(Ld+",id,stagger,delay,duration,paused,scrollTrigger",function(i){return Fd[i]=1});var Qt=function(i){nd(t,i);function t(n,r,s,o){var l;typeof r=="number"&&(s.duration=r,r=s,s=null),l=i.call(this,o?r:Di(r))||this;var u=l.vars,c=u.duration,h=u.delay,d=u.immediateRender,m=u.stagger,p=u.overwrite,y=u.keyframes,g=u.defaults,w=u.scrollTrigger,V=u.yoyoEase,A=r.parent||Nt,P=(me(n)||id(n)?Rn(n[0]):"length"in r)?[n]:Je(n),D,k,O,I,T,v,R,C;if(l._targets=P.length?Bl(P):ji("GSAP target "+n+" not found. https://gsap.com",!Ue.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=p,y||m||Vs(c)||Vs(h)){if(r=l.vars,D=l.timeline=new ve({data:"nested",defaults:g||{},targets:A&&A.data==="nested"?A.vars.targets:P}),D.kill(),D.parent=D._dp=vn(l),D._start=0,m||Vs(c)||Vs(h)){if(I=P.length,R=m&&wd(m),pn(m))for(T in m)~Ld.indexOf(T)&&(C||(C={}),C[T]=m[T]);for(k=0;k<I;k++)O=io(r,Fd),O.stagger=0,V&&(O.yoyoEase=V),C&&gr(O,C),v=P[k],O.duration=+ki(c,vn(l),k,v,P),O.delay=(+ki(h,vn(l),k,v,P)||0)-l._delay,!m&&I===1&&O.delay&&(l._delay=h=O.delay,l._start+=h,O.delay=0),D.to(v,O,R?R(k,v,P):0),D._ease=_t.none;D.duration()?c=h=0:l.timeline=0}else if(y){Di(Ze(D.vars.defaults,{ease:"none"})),D._ease=cr(y.ease||r.ease||"none");var S=0,b,st,rt;if(me(y))y.forEach(function(ht){return D.to(P,ht,">")}),D.duration();else{O={};for(T in y)T==="ease"||T==="easeEach"||nT(T,y[T],O,y.easeEach);for(T in O)for(b=O[T].sort(function(ht,ut){return ht.t-ut.t}),S=0,k=0;k<b.length;k++)st=b[k],rt={ease:st.e,duration:(st.t-(k?b[k-1].t:0))/100*c},rt[T]=st.v,D.to(P,rt,S),S+=rt.duration;D.duration()<c&&D.to({},{duration:c-D.duration()})}}c||l.duration(c=D.duration())}else l.timeline=0;return p===!0&&!xl&&(On=vn(l),Nt.killTweensOf(P),On=0),ln(A,vn(l),s),r.reversed&&l.reverse(),r.paused&&l.paused(!0),(d||!c&&!y&&l._start===ee(A._time)&&Re(d)&&xv(vn(l))&&A.data!=="nested")&&(l._tTime=-Ct,l.render(Math.max(0,-h)||0)),w&&yd(vn(l),w),l}var e=t.prototype;return e.render=function(r,s,o){var l=this._time,u=this._tDur,c=this._dur,h=r<0,d=r>u-Ct&&!h?u:r<Ct?0:r,m,p,y,g,w,V,A,P,D;if(!c)Mv(this,r,s,o);else if(d!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==h){if(m=d,P=this.timeline,this._repeat){if(g=c+this._rDelay,this._repeat<-1&&h)return this.totalTime(g*100+r,s,o);if(m=ee(d%g),d===u?(y=this._repeat,m=c):(y=~~(d/g),y&&y===ee(d/g)&&(m=c,y--),m>c&&(m=c)),V=this._yoyo&&y&1,V&&(D=this._yEase,m=c-m),w=Qr(this._tTime,g),m===l&&!o&&this._initted&&y===w)return this._tTime=d,this;y!==w&&(P&&this._yEase&&xd(P,V),this.vars.repeatRefresh&&!V&&!this._lock&&this._time!==g&&this._initted&&(this._lock=o=1,this.render(ee(g*y),!0).invalidate()._lock=0))}if(!this._initted){if(vd(this,h?r:m,o,s,d))return this._tTime=0,this;if(l!==this._time&&!(o&&this.vars.repeatRefresh&&y!==w))return this;if(c!==this._dur)return this.render(r,s,o)}if(this._tTime=d,this._time=m,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=A=(D||this._ease)(m/c),this._from&&(this.ratio=A=1-A),m&&!l&&!s&&!y&&(Fe(this,"onStart"),this._tTime!==d))return this;for(p=this._pt;p;)p.r(A,p.d),p=p._next;P&&P.render(r<0?r:P._dur*P._ease(m/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(h&&Fa(this,r,s,o),Fe(this,"onUpdate")),this._repeat&&y!==w&&this.vars.onRepeat&&!s&&this.parent&&Fe(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(h&&!this._onUpdate&&Fa(this,r,!0,!0),(r||!c)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&Hn(this,1),!s&&!(h&&!l)&&(d||l||V)&&(Fe(this,d===u?"onComplete":"onReverseComplete",!0),this._prom&&!(d<u&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),i.prototype.invalidate.call(this,r)},e.resetTo=function(r,s,o,l,u){Hi||Ne.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),h;return this._initted||zl(this,c),h=this._ease(c/this._dur),tT(this,r,s,o,l,h,c,u)?this.resetTo(r,s,o,l,1):(Co(this,0),this.parent||pd(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Ai(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,On&&On.vars.overwrite!==!0)._first||Ai(this),this.parent&&o!==this.timeline.totalDuration()&&Xr(this,this._dur*this.timeline._tDur/o,0,1),this}var l=this._targets,u=r?Je(r):l,c=this._ptLookup,h=this._pt,d,m,p,y,g,w,V;if((!s||s==="all")&&Vv(l,u))return s==="all"&&(this._pt=0),Ai(this);for(d=this._op=this._op||[],s!=="all"&&(ne(s)&&(g={},Pe(s,function(A){return g[A]=1}),s=g),s=eT(l,s)),V=l.length;V--;)if(~u.indexOf(l[V])){m=c[V],s==="all"?(d[V]=s,y=m,p={}):(p=d[V]=d[V]||{},y=s);for(g in y)w=m&&m[g],w&&((!("kill"in w.d)||w.d.kill(g)===!0)&&Ro(this,w,"_pt"),delete m[g]),p!=="all"&&(p[g]=1)}return this._initted&&!this._pt&&h&&Ai(this),this},t.to=function(r,s){return new t(r,s,arguments[2])},t.from=function(r,s){return Vi(1,arguments)},t.delayedCall=function(r,s,o,l){return new t(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:l})},t.fromTo=function(r,s,o){return Vi(2,arguments)},t.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new t(r,s)},t.killTweensOf=function(r,s,o){return Nt.killTweensOf(r,s,o)},t}(Ki);Ze(Qt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Pe("staggerTo,staggerFrom,staggerFromTo",function(i){Qt[i]=function(){var t=new ve,e=Ba.call(arguments,0);return e.splice(i==="staggerFromTo"?5:4,0,0),t[i].apply(t,e)}});var jl=function(t,e,n){return t[e]=n},$d=function(t,e,n){return t[e](n)},rT=function(t,e,n,r){return t[e](r.fp,n)},iT=function(t,e,n){return t.setAttribute(e,n)},ql=function(t,e){return Ut(t[e])?$d:Ol(t[e])&&t.setAttribute?iT:jl},Bd=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},sT=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},Ud=function(t,e){var n=e._pt,r="";if(!t&&e.b)r=e.b;else if(t===1&&e.e)r=e.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*t):Math.round((n.s+n.c*t)*1e4)/1e4)+r,n=n._next;r+=e.c}e.set(e.t,e.p,r,e)},Gl=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},oT=function(t,e,n,r){for(var s=this._pt,o;s;)o=s._next,s.p===r&&s.modifier(t,e,n),s=o},aT=function(t){for(var e=this._pt,n,r;e;)r=e._next,e.p===t&&!e.op||e.op===t?Ro(this,e,"_pt"):e.dep||(n=1),e=r;return!n},lT=function(t,e,n,r){r.mSet(t,e,r.m.call(r.tween,n,r.mt),r)},zd=function(t){for(var e=t._pt,n,r,s,o;e;){for(n=e._next,r=s;r&&r.pr>e.pr;)r=r._next;(e._prev=r?r._prev:o)?e._prev._next=e:s=e,(e._next=r)?r._prev=e:o=e,e=n}t._pt=s},Ce=function(){function i(e,n,r,s,o,l,u,c,h){this.t=n,this.s=s,this.c=o,this.p=r,this.r=l||Bd,this.d=u||this,this.set=c||jl,this.pr=h||0,this._next=e,e&&(e._prev=this)}var t=i.prototype;return t.modifier=function(n,r,s){this.mSet=this.mSet||this.set,this.set=lT,this.m=n,this.mt=s,this.tween=r},i}();Pe($l+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(i){return Fl[i]=1});ze.TweenMax=ze.TweenLite=Qt;ze.TimelineLite=ze.TimelineMax=ve;Nt=new ve({sortChildren:!1,defaults:Wr,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Ue.stringFilter=Vd;var hr=[],$s={},uT=[],lh=0,cT=0,aa=function(t){return($s[t]||uT).map(function(e){return e()})},qa=function(){var t=Date.now(),e=[];t-lh>2&&(aa("matchMediaInit"),hr.forEach(function(n){var r=n.queries,s=n.conditions,o,l,u,c;for(l in r)o=on.matchMedia(r[l]).matches,o&&(u=1),o!==s[l]&&(s[l]=o,c=1);c&&(n.revert(),u&&e.push(n))}),aa("matchMediaRevert"),e.forEach(function(n){return n.onMatch(n,function(r){return n.add(null,r)})}),lh=t,aa("matchMedia"))},jd=function(){function i(e,n){this.selector=n&&Ua(n),this.data=[],this._r=[],this.isReverted=!1,this.id=cT++,e&&this.add(e)}var t=i.prototype;return t.add=function(n,r,s){Ut(n)&&(s=r,r=n,n=Ut);var o=this,l=function(){var c=kt,h=o.selector,d;return c&&c!==o&&c.data.push(o),s&&(o.selector=Ua(s)),kt=o,d=r.apply(o,arguments),Ut(d)&&o._r.push(d),kt=c,o.selector=h,o.isReverted=!1,d};return o.last=l,n===Ut?l(o,function(u){return o.add(null,u)}):n?o[n]=l:l},t.ignore=function(n){var r=kt;kt=null,n(this),kt=r},t.getTweens=function(){var n=[];return this.data.forEach(function(r){return r instanceof i?n.push.apply(n,r.getTweens()):r instanceof Qt&&!(r.parent&&r.parent.data==="nested")&&n.push(r)}),n},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(n,r){var s=this;if(n?function(){for(var l=s.getTweens(),u=s.data.length,c;u--;)c=s.data[u],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(h){return l.splice(l.indexOf(h),1)}));for(l.map(function(h){return{g:h._dur||h._delay||h._sat&&!h._sat.vars.immediateRender?h.globalTime(0):-1/0,t:h}}).sort(function(h,d){return d.g-h.g||-1/0}).forEach(function(h){return h.t.revert(n)}),u=s.data.length;u--;)c=s.data[u],c instanceof ve?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Qt)&&c.revert&&c.revert(n);s._r.forEach(function(h){return h(n,s)}),s.isReverted=!0}():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),r)for(var o=hr.length;o--;)hr[o].id===this.id&&hr.splice(o,1)},t.revert=function(n){this.kill(n||{})},i}(),hT=function(){function i(e){this.contexts=[],this.scope=e,kt&&kt.data.push(this)}var t=i.prototype;return t.add=function(n,r,s){pn(n)||(n={matches:n});var o=new jd(0,s||this.scope),l=o.conditions={},u,c,h;kt&&!o.selector&&(o.selector=kt.selector),this.contexts.push(o),r=o.add("onMatch",r),o.queries=n;for(c in n)c==="all"?h=1:(u=on.matchMedia(n[c]),u&&(hr.indexOf(o)<0&&hr.push(o),(l[c]=u.matches)&&(h=1),u.addListener?u.addListener(qa):u.addEventListener("change",qa)));return h&&r(o,function(d){return o.add(null,d)}),this},t.revert=function(n){this.kill(n||{})},t.kill=function(n){this.contexts.forEach(function(r){return r.kill(n,!0)})},i}(),oo={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(function(r){return Cd(r)})},timeline:function(t){return new ve(t)},getTweensOf:function(t,e){return Nt.getTweensOf(t,e)},getProperty:function(t,e,n,r){ne(t)&&(t=Je(t)[0]);var s=lr(t||{}).get,o=n?md:_d;return n==="native"&&(n=""),t&&(e?o((Me[e]&&Me[e].get||s)(t,e,n,r)):function(l,u,c){return o((Me[l]&&Me[l].get||s)(t,l,u,c))})},quickSetter:function(t,e,n){if(t=Je(t),t.length>1){var r=t.map(function(h){return Ve.quickSetter(h,e,n)}),s=r.length;return function(h){for(var d=s;d--;)r[d](h)}}t=t[0]||{};var o=Me[e],l=lr(t),u=l.harness&&(l.harness.aliases||{})[e]||e,c=o?function(h){var d=new o;Or._pt=0,d.init(t,n?h+n:h,Or,0,[t]),d.render(1,d),Or._pt&&Gl(1,Or)}:l.set(t,u);return o?c:function(h){return c(t,u,n?h+n:h,l,1)}},quickTo:function(t,e,n){var r,s=Ve.to(t,gr((r={},r[e]="+=0.1",r.paused=!0,r),n||{})),o=function(u,c,h){return s.resetTo(e,u,c,h)};return o.tween=s,o},isTweening:function(t){return Nt.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=cr(t.ease,Wr.ease)),rh(Wr,t||{})},config:function(t){return rh(Ue,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,r=t.plugins,s=t.defaults,o=t.extendTimeline;(r||"").split(",").forEach(function(l){return l&&!Me[l]&&!ze[l]&&ji(e+" effect requires "+l+" plugin.")}),ra[e]=function(l,u,c){return n(Je(l),Ze(u||{},s),c)},o&&(ve.prototype[e]=function(l,u,c){return this.add(ra[e](l,pn(u)?u:(c=u)&&{},this),c)})},registerEase:function(t,e){_t[t]=cr(e)},parseEase:function(t,e){return arguments.length?cr(t,e):_t},getById:function(t){return Nt.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var n=new ve(t),r,s;for(n.smoothChildTiming=Re(t.smoothChildTiming),Nt.remove(n),n._dp=0,n._time=n._tTime=Nt._time,r=Nt._first;r;)s=r._next,(e||!(!r._dur&&r instanceof Qt&&r.vars.onComplete===r._targets[0]))&&ln(n,r,r._start-r._delay),r=s;return ln(Nt,n,0),n},context:function(t,e){return t?new jd(t,e):kt},matchMedia:function(t){return new hT(t)},matchMediaRefresh:function(){return hr.forEach(function(t){var e=t.conditions,n,r;for(r in e)e[r]&&(e[r]=!1,n=1);n&&t.revert()})||qa()},addEventListener:function(t,e){var n=$s[t]||($s[t]=[]);~n.indexOf(e)||n.push(e)},removeEventListener:function(t,e){var n=$s[t],r=n&&n.indexOf(e);r>=0&&n.splice(r,1)},utils:{wrap:jv,wrapYoyo:qv,distribute:wd,random:Ad,snap:Id,normalize:zv,getUnit:de,clamp:Fv,splitColor:Sd,toArray:Je,selector:Ua,mapRange:Rd,pipe:Bv,unitize:Uv,interpolate:Gv,shuffle:Ed},install:ud,effects:ra,ticker:Ne,updateRoot:ve.updateRoot,plugins:Me,globalTimeline:Nt,core:{PropTween:Ce,globals:cd,Tween:Qt,Timeline:ve,Animation:Ki,getCache:lr,_removeLinkedListItem:Ro,reverting:function(){return _e},context:function(t){return t&&kt&&(kt.data.push(t),t._ctx=kt),kt},suppressOverwrites:function(t){return xl=t}}};Pe("to,from,fromTo,delayedCall,set,killTweensOf",function(i){return oo[i]=Qt[i]});Ne.add(ve.updateRoot);Or=oo.to({},{duration:0});var fT=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},dT=function(t,e){var n=t._targets,r,s,o;for(r in e)for(s=n.length;s--;)o=t._ptLookup[s][r],o&&(o=o.d)&&(o._pt&&(o=fT(o,r)),o&&o.modifier&&o.modifier(e[r],t,n[s],r))},la=function(t,e){return{name:t,rawVars:1,init:function(r,s,o){o._onInit=function(l){var u,c;if(ne(s)&&(u={},Pe(s,function(h){return u[h]=1}),s=u),e){u={};for(c in s)u[c]=e(s[c]);s=u}dT(l,s)}}}},Ve=oo.registerPlugin({name:"attr",init:function(t,e,n,r,s){var o,l,u;this.tween=n;for(o in e)u=t.getAttribute(o)||"",l=this.add(t,"setAttribute",(u||0)+"",e[o],r,s,0,0,o),l.op=o,l.b=u,this._props.push(o)},render:function(t,e){for(var n=e._pt;n;)_e?n.set(n.t,n.p,n.b,n):n.r(t,n.d),n=n._next}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n],0,0,0,0,0,1)}},la("roundProps",za),la("modifiers"),la("snap",Id))||oo;Qt.version=ve.version=Ve.version="3.12.5";ld=1;Ml()&&Yr();_t.Power0;_t.Power1;_t.Power2;_t.Power3;_t.Power4;_t.Linear;_t.Quad;_t.Cubic;_t.Quart;_t.Quint;_t.Strong;_t.Elastic;_t.Back;_t.SteppedEase;_t.Bounce;_t.Sine;_t.Expo;_t.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var uh,Mn,Fr,Hl,sr,ch,Kl,_T=function(){return typeof window<"u"},Pn={},rr=180/Math.PI,$r=Math.PI/180,Sr=Math.atan2,hh=1e8,Wl=/([A-Z])/g,mT=/(left|right|width|margin|padding|x)/i,pT=/[\s,\(]\S/,un={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Ga=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},gT=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},yT=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},vT=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},qd=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},Gd=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},TT=function(t,e,n){return t.style[e]=n},ET=function(t,e,n){return t.style.setProperty(e,n)},wT=function(t,e,n){return t._gsap[e]=n},IT=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},AT=function(t,e,n,r,s){var o=t._gsap;o.scaleX=o.scaleY=n,o.renderTransform(s,o)},bT=function(t,e,n,r,s){var o=t._gsap;o[e]=n,o.renderTransform(s,o)},Lt="transform",Se=Lt+"Origin",RT=function i(t,e){var n=this,r=this.target,s=r.style,o=r._gsap;if(t in Pn&&s){if(this.tfm=this.tfm||{},t!=="transform")t=un[t]||t,~t.indexOf(",")?t.split(",").forEach(function(l){return n.tfm[l]=Tn(r,l)}):this.tfm[t]=o.x?o[t]:Tn(r,t),t===Se&&(this.tfm.zOrigin=o.zOrigin);else return un.transform.split(",").forEach(function(l){return i.call(n,l,e)});if(this.props.indexOf(Lt)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Se,e,"")),t=Lt}(s||e)&&this.props.push(t,e,s[t])},Hd=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},PT=function(){var t=this.props,e=this.target,n=e.style,r=e._gsap,s,o;for(s=0;s<t.length;s+=3)t[s+1]?e[t[s]]=t[s+2]:t[s+2]?n[t[s]]=t[s+2]:n.removeProperty(t[s].substr(0,2)==="--"?t[s]:t[s].replace(Wl,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),s=Kl(),(!s||!s.isStart)&&!n[Lt]&&(Hd(n),r.zOrigin&&n[Se]&&(n[Se]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},Kd=function(t,e){var n={target:t,props:[],revert:PT,save:RT};return t._gsap||Ve.core.getCache(t),e&&e.split(",").forEach(function(r){return n.save(r)}),n},Wd,Ha=function(t,e){var n=Mn.createElementNS?Mn.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Mn.createElement(t);return n&&n.style?n:Mn.createElement(t)},fn=function i(t,e,n){var r=getComputedStyle(t);return r[e]||r.getPropertyValue(e.replace(Wl,"-$1").toLowerCase())||r.getPropertyValue(e)||!n&&i(t,Jr(e)||e,1)||""},fh="O,Moz,ms,Ms,Webkit".split(","),Jr=function(t,e,n){var r=e||sr,s=r.style,o=5;if(t in s&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);o--&&!(fh[o]+t in s););return o<0?null:(o===3?"ms":o>=0?fh[o]:"")+t},Ka=function(){_T()&&window.document&&(uh=window,Mn=uh.document,Fr=Mn.documentElement,sr=Ha("div")||{style:{}},Ha("div"),Lt=Jr(Lt),Se=Lt+"Origin",sr.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Wd=!!Jr("perspective"),Kl=Ve.core.reverting,Hl=1)},ua=function i(t){var e=Ha("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,s=this.style.cssText,o;if(Fr.appendChild(e),e.appendChild(this),this.style.display="block",t)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=i}catch{}else this._gsapBBox&&(o=this._gsapBBox());return n&&(r?n.insertBefore(this,r):n.appendChild(this)),Fr.removeChild(e),this.style.cssText=s,o},dh=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},Qd=function(t){var e;try{e=t.getBBox()}catch{e=ua.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===ua||(e=ua.call(t,!0)),e&&!e.width&&!e.x&&!e.y?{x:+dh(t,["x","cx","x1"])||0,y:+dh(t,["y","cy","y1"])||0,width:0,height:0}:e},Xd=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&Qd(t))},yr=function(t,e){if(e){var n=t.style,r;e in Pn&&e!==Se&&(e=Lt),n.removeProperty?(r=e.substr(0,2),(r==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),n.removeProperty(r==="--"?e:e.replace(Wl,"-$1").toLowerCase())):n.removeAttribute(e)}},Nn=function(t,e,n,r,s,o){var l=new Ce(t._pt,e,n,0,1,o?Gd:qd);return t._pt=l,l.b=r,l.e=s,t._props.push(n),l},_h={deg:1,rad:1,turn:1},CT={grid:1,flex:1},Kn=function i(t,e,n,r){var s=parseFloat(n)||0,o=(n+"").trim().substr((s+"").length)||"px",l=sr.style,u=mT.test(e),c=t.tagName.toLowerCase()==="svg",h=(c?"client":"offset")+(u?"Width":"Height"),d=100,m=r==="px",p=r==="%",y,g,w,V;if(r===o||!s||_h[r]||_h[o])return s;if(o!=="px"&&!m&&(s=i(t,e,n,"px")),V=t.getCTM&&Xd(t),(p||o==="%")&&(Pn[e]||~e.indexOf("adius")))return y=V?t.getBBox()[u?"width":"height"]:t[h],qt(p?s/y*d:s/100*y);if(l[u?"width":"height"]=d+(m?o:r),g=~e.indexOf("adius")||r==="em"&&t.appendChild&&!c?t:t.parentNode,V&&(g=(t.ownerSVGElement||{}).parentNode),(!g||g===Mn||!g.appendChild)&&(g=Mn.body),w=g._gsap,w&&p&&w.width&&u&&w.time===Ne.time&&!w.uncache)return qt(s/w.width*d);if(p&&(e==="height"||e==="width")){var A=t.style[e];t.style[e]=d+r,y=t[h],A?t.style[e]=A:yr(t,e)}else(p||o==="%")&&!CT[fn(g,"display")]&&(l.position=fn(t,"position")),g===t&&(l.position="static"),g.appendChild(sr),y=sr[h],g.removeChild(sr),l.position="absolute";return u&&p&&(w=lr(g),w.time=Ne.time,w.width=g[h]),qt(m?y*s/d:y&&s?d/y*s:0)},Tn=function(t,e,n,r){var s;return Hl||Ka(),e in un&&e!=="transform"&&(e=un[e],~e.indexOf(",")&&(e=e.split(",")[0])),Pn[e]&&e!=="transform"?(s=Qi(t,r),s=e!=="transformOrigin"?s[e]:s.svg?s.origin:lo(fn(t,Se))+" "+s.zOrigin+"px"):(s=t.style[e],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=ao[e]&&ao[e](t,e,n)||fn(t,e)||fd(t,e)||(e==="opacity"?1:0))),n&&!~(s+"").trim().indexOf(" ")?Kn(t,e,s,n)+n:s},ST=function(t,e,n,r){if(!n||n==="none"){var s=Jr(e,t,1),o=s&&fn(t,s,1);o&&o!==n?(e=s,n=o):e==="borderColor"&&(n=fn(t,"borderTopColor"))}var l=new Ce(this._pt,t.style,e,0,1,Ud),u=0,c=0,h,d,m,p,y,g,w,V,A,P,D,k;if(l.b=n,l.e=r,n+="",r+="",r==="auto"&&(g=t.style[e],t.style[e]=r,r=fn(t,e)||r,g?t.style[e]=g:yr(t,e)),h=[n,r],Vd(h),n=h[0],r=h[1],m=n.match(xr)||[],k=r.match(xr)||[],k.length){for(;d=xr.exec(r);)w=d[0],A=r.substring(u,d.index),y?y=(y+1)%5:(A.substr(-5)==="rgba("||A.substr(-5)==="hsla(")&&(y=1),w!==(g=m[c++]||"")&&(p=parseFloat(g)||0,D=g.substr((p+"").length),w.charAt(1)==="="&&(w=Lr(p,w)+D),V=parseFloat(w),P=w.substr((V+"").length),u=xr.lastIndex-P.length,P||(P=P||Ue.units[e]||D,u===r.length&&(r+=P,l.e+=P)),D!==P&&(p=Kn(t,e,g,P)||0),l._pt={_next:l._pt,p:A||c===1?A:",",s:p,c:V-p,m:y&&y<4||e==="zIndex"?Math.round:0});l.c=u<r.length?r.substring(u,r.length):""}else l.r=e==="display"&&r==="none"?Gd:qd;return od.test(r)&&(l.e=0),this._pt=l,l},mh={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},DT=function(t){var e=t.split(" "),n=e[0],r=e[1]||"50%";return(n==="top"||n==="bottom"||r==="left"||r==="right")&&(t=n,n=r,r=t),e[0]=mh[n]||n,e[1]=mh[r]||r,e.join(" ")},VT=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n=e.t,r=n.style,s=e.u,o=n._gsap,l,u,c;if(s==="all"||s===!0)r.cssText="",u=1;else for(s=s.split(","),c=s.length;--c>-1;)l=s[c],Pn[l]&&(u=1,l=l==="transformOrigin"?Se:Lt),yr(n,l);u&&(yr(n,Lt),o&&(o.svg&&n.removeAttribute("transform"),Qi(n,1),o.uncache=1,Hd(r)))}},ao={clearProps:function(t,e,n,r,s){if(s.data!=="isFromStart"){var o=t._pt=new Ce(t._pt,e,n,0,0,VT);return o.u=r,o.pr=-10,o.tween=s,t._props.push(n),1}}},Wi=[1,0,0,1,0,0],Yd={},Jd=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},ph=function(t){var e=fn(t,Lt);return Jd(e)?Wi:e.substr(7).match(sd).map(qt)},Ql=function(t,e){var n=t._gsap||lr(t),r=t.style,s=ph(t),o,l,u,c;return n.svg&&t.getAttribute("transform")?(u=t.transform.baseVal.consolidate().matrix,s=[u.a,u.b,u.c,u.d,u.e,u.f],s.join(",")==="1,0,0,1,0,0"?Wi:s):(s===Wi&&!t.offsetParent&&t!==Fr&&!n.svg&&(u=r.display,r.display="block",o=t.parentNode,(!o||!t.offsetParent)&&(c=1,l=t.nextElementSibling,Fr.appendChild(t)),s=ph(t),u?r.display=u:yr(t,"display"),c&&(l?o.insertBefore(t,l):o?o.appendChild(t):Fr.removeChild(t))),e&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},Wa=function(t,e,n,r,s,o){var l=t._gsap,u=s||Ql(t,!0),c=l.xOrigin||0,h=l.yOrigin||0,d=l.xOffset||0,m=l.yOffset||0,p=u[0],y=u[1],g=u[2],w=u[3],V=u[4],A=u[5],P=e.split(" "),D=parseFloat(P[0])||0,k=parseFloat(P[1])||0,O,I,T,v;n?u!==Wi&&(I=p*w-y*g)&&(T=D*(w/I)+k*(-g/I)+(g*A-w*V)/I,v=D*(-y/I)+k*(p/I)-(p*A-y*V)/I,D=T,k=v):(O=Qd(t),D=O.x+(~P[0].indexOf("%")?D/100*O.width:D),k=O.y+(~(P[1]||P[0]).indexOf("%")?k/100*O.height:k)),r||r!==!1&&l.smooth?(V=D-c,A=k-h,l.xOffset=d+(V*p+A*g)-V,l.yOffset=m+(V*y+A*w)-A):l.xOffset=l.yOffset=0,l.xOrigin=D,l.yOrigin=k,l.smooth=!!r,l.origin=e,l.originIsAbsolute=!!n,t.style[Se]="0px 0px",o&&(Nn(o,l,"xOrigin",c,D),Nn(o,l,"yOrigin",h,k),Nn(o,l,"xOffset",d,l.xOffset),Nn(o,l,"yOffset",m,l.yOffset)),t.setAttribute("data-svg-origin",D+" "+k)},Qi=function(t,e){var n=t._gsap||new Md(t);if("x"in n&&!e&&!n.uncache)return n;var r=t.style,s=n.scaleX<0,o="px",l="deg",u=getComputedStyle(t),c=fn(t,Se)||"0",h,d,m,p,y,g,w,V,A,P,D,k,O,I,T,v,R,C,S,b,st,rt,ht,ut,dt,xt,zt,q,H,tt,It,Ot;return h=d=m=g=w=V=A=P=D=0,p=y=1,n.svg=!!(t.getCTM&&Xd(t)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(r[Lt]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[Lt]!=="none"?u[Lt]:"")),r.scale=r.rotate=r.translate="none"),I=Ql(t,n.svg),n.svg&&(n.uncache?(dt=t.getBBox(),c=n.xOrigin-dt.x+"px "+(n.yOrigin-dt.y)+"px",ut=""):ut=!e&&t.getAttribute("data-svg-origin"),Wa(t,ut||c,!!ut||n.originIsAbsolute,n.smooth!==!1,I)),k=n.xOrigin||0,O=n.yOrigin||0,I!==Wi&&(C=I[0],S=I[1],b=I[2],st=I[3],h=rt=I[4],d=ht=I[5],I.length===6?(p=Math.sqrt(C*C+S*S),y=Math.sqrt(st*st+b*b),g=C||S?Sr(S,C)*rr:0,A=b||st?Sr(b,st)*rr+g:0,A&&(y*=Math.abs(Math.cos(A*$r))),n.svg&&(h-=k-(k*C+O*b),d-=O-(k*S+O*st))):(Ot=I[6],tt=I[7],zt=I[8],q=I[9],H=I[10],It=I[11],h=I[12],d=I[13],m=I[14],T=Sr(Ot,H),w=T*rr,T&&(v=Math.cos(-T),R=Math.sin(-T),ut=rt*v+zt*R,dt=ht*v+q*R,xt=Ot*v+H*R,zt=rt*-R+zt*v,q=ht*-R+q*v,H=Ot*-R+H*v,It=tt*-R+It*v,rt=ut,ht=dt,Ot=xt),T=Sr(-b,H),V=T*rr,T&&(v=Math.cos(-T),R=Math.sin(-T),ut=C*v-zt*R,dt=S*v-q*R,xt=b*v-H*R,It=st*R+It*v,C=ut,S=dt,b=xt),T=Sr(S,C),g=T*rr,T&&(v=Math.cos(T),R=Math.sin(T),ut=C*v+S*R,dt=rt*v+ht*R,S=S*v-C*R,ht=ht*v-rt*R,C=ut,rt=dt),w&&Math.abs(w)+Math.abs(g)>359.9&&(w=g=0,V=180-V),p=qt(Math.sqrt(C*C+S*S+b*b)),y=qt(Math.sqrt(ht*ht+Ot*Ot)),T=Sr(rt,ht),A=Math.abs(T)>2e-4?T*rr:0,D=It?1/(It<0?-It:It):0),n.svg&&(ut=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!Jd(fn(t,Lt)),ut&&t.setAttribute("transform",ut))),Math.abs(A)>90&&Math.abs(A)<270&&(s?(p*=-1,A+=g<=0?180:-180,g+=g<=0?180:-180):(y*=-1,A+=A<=0?180:-180)),e=e||n.uncache,n.x=h-((n.xPercent=h&&(!e&&n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-h)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+o,n.y=d-((n.yPercent=d&&(!e&&n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-d)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+o,n.z=m+o,n.scaleX=qt(p),n.scaleY=qt(y),n.rotation=qt(g)+l,n.rotationX=qt(w)+l,n.rotationY=qt(V)+l,n.skewX=A+l,n.skewY=P+l,n.transformPerspective=D+o,(n.zOrigin=parseFloat(c.split(" ")[2])||!e&&n.zOrigin||0)&&(r[Se]=lo(c)),n.xOffset=n.yOffset=0,n.force3D=Ue.force3D,n.renderTransform=n.svg?xT:Wd?Zd:kT,n.uncache=0,n},lo=function(t){return(t=t.split(" "))[0]+" "+t[1]},ca=function(t,e,n){var r=de(e);return qt(parseFloat(e)+parseFloat(Kn(t,"x",n+"px",r)))+r},kT=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Zd(t,e)},tr="0deg",vi="0px",er=") ",Zd=function(t,e){var n=e||this,r=n.xPercent,s=n.yPercent,o=n.x,l=n.y,u=n.z,c=n.rotation,h=n.rotationY,d=n.rotationX,m=n.skewX,p=n.skewY,y=n.scaleX,g=n.scaleY,w=n.transformPerspective,V=n.force3D,A=n.target,P=n.zOrigin,D="",k=V==="auto"&&t&&t!==1||V===!0;if(P&&(d!==tr||h!==tr)){var O=parseFloat(h)*$r,I=Math.sin(O),T=Math.cos(O),v;O=parseFloat(d)*$r,v=Math.cos(O),o=ca(A,o,I*v*-P),l=ca(A,l,-Math.sin(O)*-P),u=ca(A,u,T*v*-P+P)}w!==vi&&(D+="perspective("+w+er),(r||s)&&(D+="translate("+r+"%, "+s+"%) "),(k||o!==vi||l!==vi||u!==vi)&&(D+=u!==vi||k?"translate3d("+o+", "+l+", "+u+") ":"translate("+o+", "+l+er),c!==tr&&(D+="rotate("+c+er),h!==tr&&(D+="rotateY("+h+er),d!==tr&&(D+="rotateX("+d+er),(m!==tr||p!==tr)&&(D+="skew("+m+", "+p+er),(y!==1||g!==1)&&(D+="scale("+y+", "+g+er),A.style[Lt]=D||"translate(0, 0)"},xT=function(t,e){var n=e||this,r=n.xPercent,s=n.yPercent,o=n.x,l=n.y,u=n.rotation,c=n.skewX,h=n.skewY,d=n.scaleX,m=n.scaleY,p=n.target,y=n.xOrigin,g=n.yOrigin,w=n.xOffset,V=n.yOffset,A=n.forceCSS,P=parseFloat(o),D=parseFloat(l),k,O,I,T,v;u=parseFloat(u),c=parseFloat(c),h=parseFloat(h),h&&(h=parseFloat(h),c+=h,u+=h),u||c?(u*=$r,c*=$r,k=Math.cos(u)*d,O=Math.sin(u)*d,I=Math.sin(u-c)*-m,T=Math.cos(u-c)*m,c&&(h*=$r,v=Math.tan(c-h),v=Math.sqrt(1+v*v),I*=v,T*=v,h&&(v=Math.tan(h),v=Math.sqrt(1+v*v),k*=v,O*=v)),k=qt(k),O=qt(O),I=qt(I),T=qt(T)):(k=d,T=m,O=I=0),(P&&!~(o+"").indexOf("px")||D&&!~(l+"").indexOf("px"))&&(P=Kn(p,"x",o,"px"),D=Kn(p,"y",l,"px")),(y||g||w||V)&&(P=qt(P+y-(y*k+g*I)+w),D=qt(D+g-(y*O+g*T)+V)),(r||s)&&(v=p.getBBox(),P=qt(P+r/100*v.width),D=qt(D+s/100*v.height)),v="matrix("+k+","+O+","+I+","+T+","+P+","+D+")",p.setAttribute("transform",v),A&&(p.style[Lt]=v)},OT=function(t,e,n,r,s){var o=360,l=ne(s),u=parseFloat(s)*(l&&~s.indexOf("rad")?rr:1),c=u-r,h=r+c+"deg",d,m;return l&&(d=s.split("_")[1],d==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),d==="cw"&&c<0?c=(c+o*hh)%o-~~(c/o)*o:d==="ccw"&&c>0&&(c=(c-o*hh)%o-~~(c/o)*o)),t._pt=m=new Ce(t._pt,e,n,r,c,gT),m.e=h,m.u="deg",t._props.push(n),m},gh=function(t,e){for(var n in e)t[n]=e[n];return t},MT=function(t,e,n){var r=gh({},n._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=n.style,l,u,c,h,d,m,p,y;r.svg?(c=n.getAttribute("transform"),n.setAttribute("transform",""),o[Lt]=e,l=Qi(n,1),yr(n,Lt),n.setAttribute("transform",c)):(c=getComputedStyle(n)[Lt],o[Lt]=e,l=Qi(n,1),o[Lt]=c);for(u in Pn)c=r[u],h=l[u],c!==h&&s.indexOf(u)<0&&(p=de(c),y=de(h),d=p!==y?Kn(n,u,c,y):parseFloat(c),m=parseFloat(h),t._pt=new Ce(t._pt,l,u,d,m-d,Ga),t._pt.u=y||0,t._props.push(u));gh(l,r)};Pe("padding,margin,Width,Radius",function(i,t){var e="Top",n="Right",r="Bottom",s="Left",o=(t<3?[e,n,r,s]:[e+s,e+n,r+n,r+s]).map(function(l){return t<2?i+l:"border"+l+i});ao[t>1?"border"+i:i]=function(l,u,c,h,d){var m,p;if(arguments.length<4)return m=o.map(function(y){return Tn(l,y,c)}),p=m.join(" "),p.split(m[0]).length===5?m[0]:p;m=(h+"").split(" "),p={},o.forEach(function(y,g){return p[y]=m[g]=m[g]||m[(g-1)/2|0]}),l.init(u,p,d)}});var t_={name:"css",register:Ka,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,r,s){var o=this._props,l=t.style,u=n.vars.startAt,c,h,d,m,p,y,g,w,V,A,P,D,k,O,I,T;Hl||Ka(),this.styles=this.styles||Kd(t),T=this.styles.props,this.tween=n;for(g in e)if(g!=="autoRound"&&(h=e[g],!(Me[g]&&Nd(g,e,n,r,t,s)))){if(p=typeof h,y=ao[g],p==="function"&&(h=h.call(n,r,t,s),p=typeof h),p==="string"&&~h.indexOf("random(")&&(h=Gi(h)),y)y(this,t,g,h,n)&&(I=1);else if(g.substr(0,2)==="--")c=(getComputedStyle(t).getPropertyValue(g)+"").trim(),h+="",Un.lastIndex=0,Un.test(c)||(w=de(c),V=de(h)),V?w!==V&&(c=Kn(t,g,c,V)+V):w&&(h+=w),this.add(l,"setProperty",c,h,r,s,0,0,g),o.push(g),T.push(g,0,l[g]);else if(p!=="undefined"){if(u&&g in u?(c=typeof u[g]=="function"?u[g].call(n,r,t,s):u[g],ne(c)&&~c.indexOf("random(")&&(c=Gi(c)),de(c+"")||c==="auto"||(c+=Ue.units[g]||de(Tn(t,g))||""),(c+"").charAt(1)==="="&&(c=Tn(t,g))):c=Tn(t,g),m=parseFloat(c),A=p==="string"&&h.charAt(1)==="="&&h.substr(0,2),A&&(h=h.substr(2)),d=parseFloat(h),g in un&&(g==="autoAlpha"&&(m===1&&Tn(t,"visibility")==="hidden"&&d&&(m=0),T.push("visibility",0,l.visibility),Nn(this,l,"visibility",m?"inherit":"hidden",d?"inherit":"hidden",!d)),g!=="scale"&&g!=="transform"&&(g=un[g],~g.indexOf(",")&&(g=g.split(",")[0]))),P=g in Pn,P){if(this.styles.save(g),D||(k=t._gsap,k.renderTransform&&!e.parseTransform||Qi(t,e.parseTransform),O=e.smoothOrigin!==!1&&k.smooth,D=this._pt=new Ce(this._pt,l,Lt,0,1,k.renderTransform,k,0,-1),D.dep=1),g==="scale")this._pt=new Ce(this._pt,k,"scaleY",k.scaleY,(A?Lr(k.scaleY,A+d):d)-k.scaleY||0,Ga),this._pt.u=0,o.push("scaleY",g),g+="X";else if(g==="transformOrigin"){T.push(Se,0,l[Se]),h=DT(h),k.svg?Wa(t,h,0,O,0,this):(V=parseFloat(h.split(" ")[2])||0,V!==k.zOrigin&&Nn(this,k,"zOrigin",k.zOrigin,V),Nn(this,l,g,lo(c),lo(h)));continue}else if(g==="svgOrigin"){Wa(t,h,1,O,0,this);continue}else if(g in Yd){OT(this,k,g,m,A?Lr(m,A+h):h);continue}else if(g==="smoothOrigin"){Nn(this,k,"smooth",k.smooth,h);continue}else if(g==="force3D"){k[g]=h;continue}else if(g==="transform"){MT(this,h,t);continue}}else g in l||(g=Jr(g)||g);if(P||(d||d===0)&&(m||m===0)&&!pT.test(h)&&g in l)w=(c+"").substr((m+"").length),d||(d=0),V=de(h)||(g in Ue.units?Ue.units[g]:w),w!==V&&(m=Kn(t,g,c,V)),this._pt=new Ce(this._pt,P?k:l,g,m,(A?Lr(m,A+d):d)-m,!P&&(V==="px"||g==="zIndex")&&e.autoRound!==!1?vT:Ga),this._pt.u=V||0,w!==V&&V!=="%"&&(this._pt.b=c,this._pt.r=yT);else if(g in l)ST.call(this,t,g,c,A?A+h:h);else if(g in t)this.add(t,g,c||t[g],A?A+h:h,r,s);else if(g!=="parseTransform"){Ll(g,h);continue}P||(g in l?T.push(g,0,l[g]):T.push(g,1,c||t[g])),o.push(g)}}I&&zd(this)},render:function(t,e){if(e.tween._time||!Kl())for(var n=e._pt;n;)n.r(t,n.d),n=n._next;else e.styles.revert()},get:Tn,aliases:un,getSetter:function(t,e,n){var r=un[e];return r&&r.indexOf(",")<0&&(e=r),e in Pn&&e!==Se&&(t._gsap.x||Tn(t,"x"))?n&&ch===n?e==="scale"?IT:wT:(ch=n||{})&&(e==="scale"?AT:bT):t.style&&!Ol(t.style[e])?TT:~e.indexOf("-")?ET:ql(t,e)},core:{_removeProperty:yr,_getMatrix:Ql}};Ve.utils.checkPrefix=Jr;Ve.core.getStyleSaver=Kd;(function(i,t,e,n){var r=Pe(i+","+t+","+e,function(s){Pn[s]=1});Pe(t,function(s){Ue.units[s]="deg",Yd[s]=1}),un[r[13]]=i+","+t,Pe(n,function(s){var o=s.split(":");un[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Pe("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(i){Ue.units[i]="px"});Ve.registerPlugin(t_);var e_=Ve.registerPlugin(t_)||Ve;e_.core.Tween;function yh(i){let t,e="Geselecteerd Bestand:",n,r,s=i[0].name+"",o;return{c(){t=U("p"),t.textContent=e,n=Q(),r=U("pre"),o=at(s),this.h()},l(l){t=z(l,"P",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-zs65m6"&&(t.textContent=e),n=X(l),r=z(l,"PRE",{class:!0});var u=J(r);o=lt(u,s),u.forEach(N),this.h()},h(){G(t,"class","font-bold text-center"),G(r,"class","text-center")},m(l,u){j(l,t,u),j(l,n,u),j(l,r,u),L(r,o)},p(l,u){u&1&&s!==(s=l[0].name+"")&&Bt(o,s)},d(l){l&&(N(t),N(n),N(r))}}}function NT(i){let t;return{c(){t=at("Upload")},l(e){t=lt(e,"Upload")},m(e,n){j(e,t,n)},d(e){e&&N(t)}}}function LT(i){let t;return{c(){t=at("Terug")},l(e){t=lt(e,"Terug")},m(e,n){j(e,t,n)},d(e){e&&N(t)}}}function FT(i){let t,e,n,r="Selecteer een bestand",s,o,l,u,c,h,d,m,p=i[0]&&yh(i);return l=new Te({props:{class:"my-2",$$slots:{default:[NT]},$$scope:{ctx:i}}}),l.$on("click",i[3]),c=new Te({props:{theme:"red",class:"my-2",$$slots:{default:[LT]},$$scope:{ctx:i}}}),c.$on("click",i[5]),{c(){t=U("input"),e=Q(),n=U("label"),n.textContent=r,s=Q(),p&&p.c(),o=Q(),yt(l.$$.fragment),u=Q(),yt(c.$$.fragment),this.h()},l(y){t=z(y,"INPUT",{id:!0,class:!0,type:!0,accept:!0}),e=X(y),n=z(y,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),se(n)!=="svelte-1fxuazo"&&(n.textContent=r),s=X(y),p&&p.l(y),o=X(y),vt(l.$$.fragment,y),u=X(y),vt(c.$$.fragment,y),this.h()},h(){G(t,"id","file-upload"),G(t,"class","hidden"),G(t,"type","file"),G(t,"accept","text/csv"),G(n,"for","file-upload"),G(n,"class","my-2 bg-blue-500 text-white px-5 rounded-md py-3 cursor-pointer")},m(y,g){j(y,t,g),i[4](t),j(y,e,g),j(y,n,g),j(y,s,g),p&&p.m(y,g),j(y,o,g),Tt(l,y,g),j(y,u,g),Tt(c,y,g),h=!0,d||(m=co(t,"change",i[2]),d=!0)},p(y,g){y[0]?p?p.p(y,g):(p=yh(y),p.c(),p.m(o.parentNode,o)):p&&(p.d(1),p=null);const w={};g&2048&&(w.$$scope={dirty:g,ctx:y}),l.$set(w);const V={};g&2048&&(V.$$scope={dirty:g,ctx:y}),c.$set(V)},i(y){h||(K(l.$$.fragment,y),K(c.$$.fragment,y),h=!0)},o(y){Z(l.$$.fragment,y),Z(c.$$.fragment,y),h=!1},d(y){y&&(N(t),N(e),N(n),N(s),N(o),N(u)),i[4](null),p&&p.d(y),Et(l,y),Et(c,y),d=!1,m()}}}function $T(i){let t,e;return t=new vr({props:{$$slots:{default:[FT]},$$scope:{ctx:i}}}),{c(){yt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,r){Tt(t,n,r),e=!0},p(n,[r]){const s={};r&2051&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(K(t.$$.fragment,n),e=!0)},o(n){Z(t.$$.fragment,n),e=!1},d(n){Et(t,n)}}}function BT(i,t,e){let n=null,r,s=[],o=null,l=null;function u(y){var D,k;const g=y.target,w=(D=g.files)==null?void 0:D[0];if(!w)return;const V=(k=w.name.split(".").pop())==null?void 0:k.toLowerCase(),A=w.type;if(!["text/csv","application/vnd.ms-excel"].includes(A)||V!=="csv"){alert("Ongeldig of niet-ondersteund bestandstype. Upload een CSV-bestand."),g.value="";return}e(0,n=w)}function c(){if(!n){alert("Selecteer een bestand.");return}h(),alert("Upload successvol."),e(1,r.value="",r),e(0,n=null)}function h(){const y=new FileReader;y.onload=function(g){var w;try{const A=((w=g.target)==null?void 0:w.result).split("\r").filter(O=>O.trim()!=="");if(A.length<2){alert("CSV bevat geen data.");return}const P=A[0].split(";"),D=P.indexOf("naam"),k=P.indexOf("maximaal");if(D===-1||k===-1){alert("CSV-bestand bevat niet de vereiste headers.");return}s=[],o=null,l=null;for(let O=1;O<A.length;O++){const I=A[O].split(";").map(T=>T.trim().replace("/r",""));if(I[D])if(I[D].includes("budget"))o={maximaal:I[k]};else if(I[D].includes("doel"))l={maximaal:I[k]};else{const T={};for(let v=0;v<P.length;v++)T[P[v]]=I[v];s.push(T)}}}catch(V){alert("Er is een fout opgetreden tijdens het verwerken van het bestand."),console.error(V)}},y.onerror=function(){alert("Er is een fout opgetreden tijdens het lezen van het bestand.")},y.onloadend=function(){d()},n&&y.readAsText(n)}const d=async()=>{try{const y=s.map(P=>P.id),g=await eo(Hr(an,"maatregelen")),w=await eo(Hr(an,"doelen")),V=U0(an);g.docs.forEach(P=>{y.includes(P.id)||V.delete(P.ref)}),s.forEach(P=>{const D=Va(an,"maatregelen",P.id);V.set(D,P,{merge:!0})});const A=Va(an,"doelen","taalgroeiers");o&&V.set(A,{budget:o.maximaal},{merge:!0}),l&&V.set(A,{doel:l.maximaal},{merge:!0}),await V.commit(),console.log("Firestore updated successfully.")}catch(y){alert("Er is een fout opgetreden bij het opslaan van het bestand in Firestore."),console.error(y)}};function m(y){xi[y?"unshift":"push"](()=>{r=y,e(1,r)})}return[n,r,u,c,m,()=>nn.set(0)]}class UT extends je{constructor(t){super(),qe(this,t,BT,$T,ke,{})}}function zT(i){let t,e,n,r,s,o,l,u,c,h,d,m,p,y,g,w,V,A,P;return n=new J0({}),o=new Ev({}),c=new cv({}),m=new iv({}),g=new hm({}),A=new UT({}),{c(){t=U("div"),e=U("div"),yt(n.$$.fragment),r=Q(),s=U("div"),yt(o.$$.fragment),l=Q(),u=U("div"),yt(c.$$.fragment),h=Q(),d=U("div"),yt(m.$$.fragment),p=Q(),y=U("div"),yt(g.$$.fragment),w=Q(),V=U("div"),yt(A.$$.fragment),this.h()},l(D){t=z(D,"DIV",{class:!0});var k=J(t);e=z(k,"DIV",{class:!0});var O=J(e);vt(n.$$.fragment,O),O.forEach(N),r=X(k),s=z(k,"DIV",{class:!0});var I=J(s);vt(o.$$.fragment,I),I.forEach(N),l=X(k),u=z(k,"DIV",{class:!0});var T=J(u);vt(c.$$.fragment,T),T.forEach(N),h=X(k),d=z(k,"DIV",{class:!0});var v=J(d);vt(m.$$.fragment,v),v.forEach(N),p=X(k),y=z(k,"DIV",{class:!0});var R=J(y);vt(g.$$.fragment,R),R.forEach(N),w=X(k),V=z(k,"DIV",{class:!0});var C=J(V);vt(A.$$.fragment,C),C.forEach(N),k.forEach(N),this.h()},h(){G(e,"class","h-screen flex justify-center items-center w-screen"),G(s,"class","h-screen flex justify-center items-center w-screen"),G(u,"class","h-screen flex justify-center items-center w-screen"),G(d,"class","h-screen flex justify-center items-center w-screen"),G(y,"class","h-screen flex justify-center items-center w-screen"),G(V,"class","h-screen flex justify-center items-center w-screen"),G(t,"class","module-page flex svelte-r0zrw9")},m(D,k){j(D,t,k),L(t,e),Tt(n,e,null),L(t,r),L(t,s),Tt(o,s,null),L(t,l),L(t,u),Tt(c,u,null),L(t,h),L(t,d),Tt(m,d,null),L(t,p),L(t,y),Tt(g,y,null),L(t,w),L(t,V),Tt(A,V,null),i[2](t),P=!0},p:or,i(D){P||(K(n.$$.fragment,D),K(o.$$.fragment,D),K(c.$$.fragment,D),K(m.$$.fragment,D),K(g.$$.fragment,D),K(A.$$.fragment,D),P=!0)},o(D){Z(n.$$.fragment,D),Z(o.$$.fragment,D),Z(c.$$.fragment,D),Z(m.$$.fragment,D),Z(g.$$.fragment,D),Z(A.$$.fragment,D),P=!1},d(D){D&&N(t),Et(n),Et(o),Et(c),Et(m),Et(g),Et(A),i[2](null)}}}function jT(i,t,e){let n;Xe(i,nn,h=>e(1,n=h));const r=Hr(an,"stakeholders");let s;const o=h=>{const d=-100/s.children.length*h;e_.to(s,{xPercent:d,duration:1,ease:"power2.inOut"})},l=async()=>{try{const d=(await eo(r)).docs.map(m=>({id:m.id,values:m.data().values,description:m.data().description}));fr.set(d)}catch(h){console.error("Error fetching document: ",h)}},u=()=>xa(r,h=>{const d=h.docs.map(m=>({id:m.id,values:m.data().values,description:m.data().description}));fr.set(d)},h=>{console.log(`Encountered error: ${h}`)});uo(()=>{l(),u()});function c(h){xi[h?"unshift":"push"](()=>{s=h,e(0,s)})}return i.$$.update=()=>{i.$$.dirty&3&&s&&o(n)},[s,n,c]}class XT extends je{constructor(t){super(),qe(this,t,jT,zT,ke,{})}}export{XT as component};
