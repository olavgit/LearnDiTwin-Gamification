import{s as Ge,a as $a,u as Ua,g as Ba,b as ja,x as Bu,y as ta,z as w_,A as dh,e as za,c as Ze,o as qa,n as I_}from"../chunks/scheduler.C82xti6L.js";import{S as un,i as cn,e as B,c as j,a as K,d as F,l as G,g as W,m as J,n as rt,o as Nn,z as ju,A as Ga,v as vt,w as Tt,x as Et,y as wt,s as Q,f as X,h as M,B as Ki,t as tt,C as On,b as et,j as jt,r as Si,p as Ci,D as vs}from"../chunks/index.DwHYlU7N.js";import{w as Kr}from"../chunks/index.LvUj3rKe.js";function sn(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function A_(i,t){const e={},n={},r={$$scope:1};let s=i.length;for(;s--;){const o=i[s],l=t[s];if(l){for(const u in o)u in l||(n[u]=1);for(const u in l)r[u]||(e[u]=l[u],r[u]=1);i[s]=l}else for(const u in o)r[u]=1}for(const o in n)o in e||(e[o]=void 0);return e}const kr=Kr([]),Ka=Kr(null),ze=Kr(0);function Di(i,t){return i*t.minimaal*t.effectPerWeek*t.rondesPerJaar}function xs(i,t){return Di(i,t)*t.kostenPerPersoonPerDrieMaanden}function Ns(i,t){if(i===0)return 0;{const e=Number(t.minimaal)+(i-1)*(Number(t.maximaal)-Number(t.minimaal))/9;return Math.round(e)}}const ea=Kr([]);function b_(i){let t,e;const n=i[1].default,r=$a(n,i,i[0],null);return{c(){t=B("div"),r&&r.c(),this.h()},l(s){t=j(s,"DIV",{class:!0});var o=K(t);r&&r.l(o),o.forEach(F),this.h()},h(){G(t,"class","p-14 bg-white shadow-lg flex flex-col")},m(s,o){W(s,t,o),r&&r.m(t,null),e=!0},p(s,[o]){r&&r.p&&(!e||o&1)&&Ua(r,n,s,s[0],e?ja(n,s[0],o,null):Ba(s[0]),null)},i(s){e||(J(r,s),e=!0)},o(s){rt(r,s),e=!1},d(s){s&&F(t),r&&r.d(s)}}}function R_(i,t,e){let{$$slots:n={},$$scope:r}=t;return i.$$set=s=>{"$$scope"in s&&e(0,r=s.$$scope)},[r,n]}class Hi extends un{constructor(t){super(),cn(this,t,R_,b_,Ge,{})}}function P_(i){return i.filter(Boolean).join(" ")}function Oo(i){let t,e,n,r,s;const o=i[6].default,l=$a(o,i,i[5],null);let u=[{class:e="button-base "+i[3]},{href:i[1]},{target:i[2]},{role:"button"},{tabindex:"0"},i[4]],c={};for(let h=0;h<u.length;h+=1)c=ta(c,u[h]);return{c(){t=B(i[1]?"a":"button"),l&&l.c(),this.h()},l(h){t=j(h,((i[1]?"a":"button")||"null").toUpperCase(),{class:!0,href:!0,target:!0,role:!0,tabindex:!0});var _=K(t);l&&l.l(_),_.forEach(F),this.h()},h(){ju(i[1]?"a":"button")(t,c)},m(h,_){W(h,t,_),l&&l.m(t,null),i[8](t),n=!0,r||(s=Ga(t,"click",i[7]),r=!0)},p(h,_){l&&l.p&&(!n||_&32)&&Ua(l,o,h,h[5],n?ja(o,h[5],_,null):Ba(h[5]),null),ju(h[1]?"a":"button")(t,c=A_(u,[(!n||_&8&&e!==(e="button-base "+h[3]))&&{class:e},(!n||_&2)&&{href:h[1]},(!n||_&4)&&{target:h[2]},{role:"button"},{tabindex:"0"},_&16&&h[4]]))},i(h){n||(J(l,h),n=!0)},o(h){rt(l,h),n=!1},d(h){h&&F(t),l&&l.d(h),i[8](null),r=!1,s()}}}function S_(i){let t=i[1]?"a":"button",e,n,r=(i[1]?"a":"button")&&Oo(i);return{c(){r&&r.c(),e=Nn()},l(s){r&&r.l(s),e=Nn()},m(s,o){r&&r.m(s,o),W(s,e,o),n=!0},p(s,[o]){s[1],t?Ge(t,s[1]?"a":"button")?(r.d(1),r=Oo(s),t=s[1]?"a":"button",r.c(),r.m(e.parentNode,e)):r.p(s,o):(r=Oo(s),t=s[1]?"a":"button",r.c(),r.m(e.parentNode,e))},i(s){n||(J(r,s),n=!0)},o(s){rt(r,s),n=!1},d(s){s&&F(e),r&&r.d(s)}}}function C_(i,t,e){const n=["el","href","target","class"];let r=Bu(t,n),{$$slots:s={},$$scope:o}=t,{el:l=void 0}=t,{href:u=void 0}=t,{target:c=void 0}=t,{class:h=""}=t;function _(m){dh.call(this,i,m)}function p(m){za[m?"unshift":"push"](()=>{l=m,e(0,l)})}return i.$$set=m=>{t=ta(ta({},t),w_(m)),e(4,r=Bu(t,n)),"el"in m&&e(0,l=m.el),"href"in m&&e(1,u=m.href),"target"in m&&e(2,c=m.target),"class"in m&&e(3,h=m.class),"$$scope"in m&&e(5,o=m.$$scope)},[l,u,c,h,r,o,s,_,p]}class D_ extends un{constructor(t){super(),cn(this,t,C_,S_,Ge,{el:0,href:1,target:2,class:3})}}function V_(i){let t;const e=i[5].default,n=$a(e,i,i[7],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),t=!0},p(r,s){n&&n.p&&(!t||s&128)&&Ua(n,e,r,r[7],t?ja(e,r[7],s,null):Ba(r[7]),null)},i(r){t||(J(n,r),t=!0)},o(r){rt(n,r),t=!1},d(r){n&&n.d(r)}}}function k_(i){let t,e;return t=new D_({props:{class:"button-main px-5 rounded-md py-3 "+i[2],href:i[0],target:i[1],$$slots:{default:[V_]},$$scope:{ctx:i}}}),t.$on("click",i[6]),{c(){vt(t.$$.fragment)},l(n){Tt(t.$$.fragment,n)},m(n,r){Et(t,n,r),e=!0},p(n,[r]){const s={};r&4&&(s.class="button-main px-5 rounded-md py-3 "+n[2]),r&1&&(s.href=n[0]),r&2&&(s.target=n[1]),r&128&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(J(t.$$.fragment,n),e=!0)},o(n){rt(t.$$.fragment,n),e=!1},d(n){wt(t,n)}}}function x_(i,t,e){let n,{$$slots:r={},$$scope:s}=t,{theme:o="blue"}=t,{href:l=void 0}=t,{target:u=void 0}=t,{class:c=""}=t;function h(_){dh.call(this,i,_)}return i.$$set=_=>{"theme"in _&&e(3,o=_.theme),"href"in _&&e(0,l=_.href),"target"in _&&e(1,u=_.target),"class"in _&&e(4,c=_.class),"$$scope"in _&&e(7,s=_.$$scope)},i.$$.update=()=>{i.$$.dirty&24&&e(2,n=P_([o==="blue"&&"bg-blue-500 text-white",o==="red"&&"bg-red-500 text-white",c]))},[l,u,n,o,c,r,h,s]}class ge extends un{constructor(t){super(),cn(this,t,x_,k_,Ge,{theme:3,href:0,target:1,class:4})}}function zu(i,t,e){const n=i.slice();return n[10]=t[e],n}function qu(i,t,e){const n=i.slice();return n[13]=t[e],n[15]=e,n}function Gu(i,t,e){const n=i.slice();return n[16]=t[e],n[15]=e,n}function Ku(i){let t,e,n=i[0][i[15]].naam.charAt(0).toUpperCase()+i[0][i[15]].naam.slice(1)+"",r,s,o=i[16].toFixed(2)+"",l;return{c(){t=B("div"),e=B("span"),r=tt(n),s=tt(" heeft een gemiddelde schaal van "),l=tt(o)},l(u){t=j(u,"DIV",{});var c=K(t);e=j(c,"SPAN",{});var h=K(e);r=et(h,n),s=et(h," heeft een gemiddelde schaal van "),l=et(h,o),h.forEach(F),c.forEach(F)},m(u,c){W(u,t,c),M(t,e),M(e,r),M(e,s),M(e,l)},p(u,c){c&1&&n!==(n=u[0][u[15]].naam.charAt(0).toUpperCase()+u[0][u[15]].naam.slice(1)+"")&&jt(r,n),c&2&&o!==(o=u[16].toFixed(2)+"")&&jt(l,o)},d(u){u&&F(t)}}}function N_(i){let t;return{c(){t=tt("Terug")},l(e){t=et(e,"Terug")},m(e,n){W(e,t,n)},d(e){e&&F(t)}}}function O_(i){let t,e,n="Resultaat",r,s,o,l,u,c,h,_,p,m=i[3].toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"",T,g,I,C,S,k,V,x,O,w=sn(i[1]),v=[];for(let y=0;y<w.length;y+=1)v[y]=Ku(Gu(i,w,y));return x=new ge({props:{theme:"red",$$slots:{default:[N_]},$$scope:{ctx:i}}}),x.$on("click",i[7]),{c(){t=B("div"),e=B("div"),e.textContent=n,r=Q();for(let y=0;y<v.length;y+=1)v[y].c();s=Q(),o=B("div"),l=B("p"),u=tt("Geholpen mensen per jaar: "),c=tt(i[2]),h=Q(),_=B("p"),p=tt("Kosten per jaar: "),T=tt(m),g=Q(),I=B("p"),C=tt("Aantal vrijwilligers per jaar: "),S=tt(i[4]),k=Q(),V=B("div"),vt(x.$$.fragment),this.h()},l(y){t=j(y,"DIV",{});var b=K(t);e=j(b,"DIV",{class:!0,"data-svelte-h":!0}),On(e)!=="svelte-17bvcbp"&&(e.textContent=n),r=X(b);for(let _t=0;_t<v.length;_t+=1)v[_t].l(b);s=X(b),o=j(b,"DIV",{class:!0});var R=K(o);l=j(R,"P",{});var P=K(l);u=et(P,"Geholpen mensen per jaar: "),c=et(P,i[2]),P.forEach(F),h=X(R),_=j(R,"P",{});var A=K(_);p=et(A,"Kosten per jaar: "),T=et(A,m),A.forEach(F),g=X(R),I=j(R,"P",{});var it=K(I);C=et(it,"Aantal vrijwilligers per jaar: "),S=et(it,i[4]),it.forEach(F),R.forEach(F),k=X(b),V=j(b,"DIV",{});var ct=K(V);Tt(x.$$.fragment,ct),ct.forEach(F),b.forEach(F),this.h()},h(){G(e,"class","font-bold text-2xl mb-4"),G(o,"class","py-2")},m(y,b){W(y,t,b),M(t,e),M(t,r);for(let R=0;R<v.length;R+=1)v[R]&&v[R].m(t,null);M(t,s),M(t,o),M(o,l),M(l,u),M(l,c),M(o,h),M(o,_),M(_,p),M(_,T),M(o,g),M(o,I),M(I,C),M(I,S),M(t,k),M(t,V),Et(x,V,null),O=!0},p(y,b){if(b&3){w=sn(y[1]);let P;for(P=0;P<w.length;P+=1){const A=Gu(y,w,P);v[P]?v[P].p(A,b):(v[P]=Ku(A),v[P].c(),v[P].m(t,s))}for(;P<v.length;P+=1)v[P].d(1);v.length=w.length}(!O||b&4)&&jt(c,y[2]),(!O||b&8)&&m!==(m=y[3].toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"")&&jt(T,m),(!O||b&16)&&jt(S,y[4]);const R={};b&262144&&(R.$$scope={dirty:b,ctx:y}),x.$set(R)},i(y){O||(J(x.$$.fragment,y),O=!0)},o(y){rt(x.$$.fragment,y),O=!1},d(y){y&&F(t),Ki(v,y),wt(x)}}}function Hu(i){let t,e=i[0][i[15]].naam.charAt(0).toUpperCase()+i[0][i[15]].naam.slice(1)+"",n,r,s=i[13]+"",o;return{c(){t=B("p"),n=tt(e),r=tt(": "),o=tt(s)},l(l){t=j(l,"P",{});var u=K(t);n=et(u,e),r=et(u,": "),o=et(u,s),u.forEach(F)},m(l,u){W(l,t,u),M(t,n),M(t,r),M(t,o)},p(l,u){u&1&&e!==(e=l[0][l[15]].naam.charAt(0).toUpperCase()+l[0][l[15]].naam.slice(1)+"")&&jt(n,e)},d(l){l&&F(t)}}}function Wu(i){let t,e,n,r,s=i[10].id+"",o,l,u,c,h=sn(i[10].values),_=[];for(let p=0;p<h.length;p+=1)_[p]=Hu(qu(i,h,p));return{c(){t=B("div"),e=B("p"),n=tt("Team: "),r=B("b"),o=tt(s),l=tt(" heeft het volgende gestemd:"),u=Q();for(let p=0;p<_.length;p+=1)_[p].c();c=Q(),this.h()},l(p){t=j(p,"DIV",{class:!0});var m=K(t);e=j(m,"P",{class:!0});var T=K(e);n=et(T,"Team: "),r=j(T,"B",{});var g=K(r);o=et(g,s),g.forEach(F),l=et(T," heeft het volgende gestemd:"),T.forEach(F),u=X(m);for(let I=0;I<_.length;I+=1)_[I].l(m);c=X(m),m.forEach(F),this.h()},h(){G(e,"class","border-y-2"),G(t,"class","border-2 rounded m-2")},m(p,m){W(p,t,m),M(t,e),M(e,n),M(e,r),M(r,o),M(e,l),M(t,u);for(let T=0;T<_.length;T+=1)_[T]&&_[T].m(t,null);M(t,c)},p(p,m){if(m&33){h=sn(p[10].values);let T;for(T=0;T<h.length;T+=1){const g=qu(p,h,T);_[T]?_[T].p(g,m):(_[T]=Hu(g),_[T].c(),_[T].m(t,c))}for(;T<_.length;T+=1)_[T].d(1);_.length=h.length}},d(p){p&&F(t),Ki(_,p)}}}function M_(i){let t,e,n,r,s;e=new Hi({props:{$$slots:{default:[O_]},$$scope:{ctx:i}}});let o=sn(i[5]),l=[];for(let u=0;u<o.length;u+=1)l[u]=Wu(zu(i,o,u));return{c(){t=B("div"),vt(e.$$.fragment),n=Q(),r=B("div");for(let u=0;u<l.length;u+=1)l[u].c();this.h()},l(u){t=j(u,"DIV",{class:!0});var c=K(t);Tt(e.$$.fragment,c),n=X(c),r=j(c,"DIV",{class:!0});var h=K(r);for(let _=0;_<l.length;_+=1)l[_].l(h);h.forEach(F),c.forEach(F),this.h()},h(){G(r,"class","bg-white"),G(t,"class","flex flex-row")},m(u,c){W(u,t,c),Et(e,t,null),M(t,n),M(t,r);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(r,null);s=!0},p(u,[c]){const h={};if(c&262175&&(h.$$scope={dirty:c,ctx:u}),e.$set(h),c&33){o=sn(u[5]);let _;for(_=0;_<o.length;_+=1){const p=zu(u,o,_);l[_]?l[_].p(p,c):(l[_]=Wu(p),l[_].c(),l[_].m(r,null))}for(;_<l.length;_+=1)l[_].d(1);l.length=o.length}},i(u){s||(J(e.$$.fragment,u),s=!0)},o(u){rt(e.$$.fragment,u),s=!1},d(u){u&&F(t),wt(e),Ki(l,u)}}}function F_(i,t,e){let n,r;Ze(i,kr,m=>e(6,n=m)),Ze(i,ea,m=>e(0,r=m));let s=[],o=0,l=0,u=0;const c=()=>{let m=[],T=n.length;n.forEach(g=>{g.values.forEach((I,C)=>{m[C]||(m[C]=0),m[C]+=I})}),e(1,s=m.map(g=>g/T))},h=()=>{e(2,o=r.reduce((m,T,g)=>m+Di(s[g]??0,T),0)),e(3,l=r.reduce((m,T,g)=>m+xs(s[g]??0,T),0)),e(4,u=r.reduce((m,T,g)=>m+Ns(s[g]??0,T),0))},_=[];n.forEach(m=>{_.push(m)});const p=()=>{ze.set(0)};return i.$$.update=()=>{i.$$.dirty&65&&r.length&&n.length&&(c(),h())},[r,s,o,l,u,_,n,p]}class L_ extends un{constructor(t){super(),cn(this,t,F_,M_,Ge,{})}}var Qu={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=function(i){const t=[];let e=0;for(let n=0;n<i.length;n++){let r=i.charCodeAt(n);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(i.charCodeAt(++n)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},$_=function(i){const t=[];let e=0,n=0;for(;e<i.length;){const r=i[e++];if(r<128)t[n++]=String.fromCharCode(r);else if(r>191&&r<224){const s=i[e++];t[n++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=i[e++],o=i[e++],l=i[e++],u=((r&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;t[n++]=String.fromCharCode(55296+(u>>10)),t[n++]=String.fromCharCode(56320+(u&1023))}else{const s=i[e++],o=i[e++];t[n++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},ph={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<i.length;r+=3){const s=i[r],o=r+1<i.length,l=o?i[r+1]:0,u=r+2<i.length,c=u?i[r+2]:0,h=s>>2,_=(s&3)<<4|l>>4;let p=(l&15)<<2|c>>6,m=c&63;u||(m=64,o||(p=64)),n.push(e[h],e[_],e[p],e[m])}return n.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(_h(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):$_(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<i.length;){const s=e[i.charAt(r++)],l=r<i.length?e[i.charAt(r)]:0;++r;const c=r<i.length?e[i.charAt(r)]:64;++r;const _=r<i.length?e[i.charAt(r)]:64;if(++r,s==null||l==null||c==null||_==null)throw new U_;const p=s<<2|l>>4;if(n.push(p),c!==64){const m=l<<4&240|c>>2;if(n.push(m),_!==64){const T=c<<6&192|_;n.push(T)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class U_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const B_=function(i){const t=_h(i);return ph.encodeByteArray(t,!0)},Os=function(i){return B_(i).replace(/\./g,"")},j_=function(i){try{return ph.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_=()=>z_().__FIREBASE_DEFAULTS__,G_=()=>{if(typeof process>"u"||typeof Qu>"u")return;const i=Qu.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},K_=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&j_(i[1]);return t&&JSON.parse(t)},Ha=()=>{try{return q_()||G_()||K_()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},H_=i=>{var t,e;return(e=(t=Ha())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[i]},W_=i=>{const t=H_(i);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),n]:[t.substring(0,e),n]},mh=()=>{var i;return(i=Ha())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},n=t||"demo-project",r=i.iat||0,s=i.sub||i.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Os(JSON.stringify(e)),Os(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function J_(){var i;const t=(i=Ha())===null||i===void 0?void 0:i.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Z_(){return!J_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tp(){try{return typeof indexedDB=="object"}catch{return!1}}function ep(){return new Promise((i,t)=>{try{let e=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(n),i(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np="FirebaseError";class Hr extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name=np,Object.setPrototypeOf(this,Hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gh.prototype.create)}}class gh{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?rp(s,n):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new Hr(r,l,n)}}function rp(i,t){return i.replace(ip,(e,n)=>{const r=t[n];return r!=null?String(r):`<${n}?>`})}const ip=/\{\$([^}]+)}/g;function na(i,t){if(i===t)return!0;const e=Object.keys(i),n=Object.keys(t);for(const r of e){if(!n.includes(r))return!1;const s=i[r],o=t[r];if(Xu(s)&&Xu(o)){if(!na(s,o))return!1}else if(s!==o)return!1}for(const r of n)if(!e.includes(r))return!1;return!0}function Xu(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(i){return i&&i._delegate?i._delegate:i}class Vi{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const n=new Q_;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(ap(t))try{this.getOrInitializeService({instanceIdentifier:Xn})}catch{}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const s=this.getOrInitializeService({instanceIdentifier:r});n.resolve(s)}catch{}}}}clearInstance(t=Xn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Xn){return this.instances.has(t)}getOptions(t=Xn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&o.resolve(r)}return r}onInit(t,e){var n;const r=this.normalizeInstanceIdentifier(e),s=(n=this.onInitCallbacks.get(r))!==null&&n!==void 0?n:new Set;s.add(t),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:op(t),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Xn){return this.component?this.component.multipleInstances?t:Xn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function op(i){return i===Xn?void 0:i}function ap(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new sp(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ht;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(ht||(ht={}));const up={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},cp=ht.INFO,hp={[ht.DEBUG]:"log",[ht.VERBOSE]:"log",[ht.INFO]:"info",[ht.WARN]:"warn",[ht.ERROR]:"error"},fp=(i,t,...e)=>{if(t<i.logLevel)return;const n=new Date().toISOString(),r=hp[t];if(r)console[r](`[${n}]  ${i.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class yh{constructor(t){this.name=t,this._logLevel=cp,this._logHandler=fp,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ht))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?up[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ht.DEBUG,...t),this._logHandler(this,ht.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ht.VERBOSE,...t),this._logHandler(this,ht.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ht.INFO,...t),this._logHandler(this,ht.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ht.WARN,...t),this._logHandler(this,ht.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ht.ERROR,...t),this._logHandler(this,ht.ERROR,...t)}}const dp=(i,t)=>t.some(e=>i instanceof e);let Yu,Ju;function _p(){return Yu||(Yu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pp(){return Ju||(Ju=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vh=new WeakMap,ra=new WeakMap,Th=new WeakMap,Mo=new WeakMap,Wa=new WeakMap;function mp(i){const t=new Promise((e,n)=>{const r=()=>{i.removeEventListener("success",s),i.removeEventListener("error",o)},s=()=>{e(Cn(i.result)),r()},o=()=>{n(i.error),r()};i.addEventListener("success",s),i.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&vh.set(e,i)}).catch(()=>{}),Wa.set(t,i),t}function gp(i){if(ra.has(i))return;const t=new Promise((e,n)=>{const r=()=>{i.removeEventListener("complete",s),i.removeEventListener("error",o),i.removeEventListener("abort",o)},s=()=>{e(),r()},o=()=>{n(i.error||new DOMException("AbortError","AbortError")),r()};i.addEventListener("complete",s),i.addEventListener("error",o),i.addEventListener("abort",o)});ra.set(i,t)}let ia={get(i,t,e){if(i instanceof IDBTransaction){if(t==="done")return ra.get(i);if(t==="objectStoreNames")return i.objectStoreNames||Th.get(i);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return Cn(i[t])},set(i,t,e){return i[t]=e,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function yp(i){ia=i(ia)}function vp(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const n=i.call(Fo(this),t,...e);return Th.set(n,t.sort?t.sort():[t]),Cn(n)}:pp().includes(i)?function(...t){return i.apply(Fo(this),t),Cn(vh.get(this))}:function(...t){return Cn(i.apply(Fo(this),t))}}function Tp(i){return typeof i=="function"?vp(i):(i instanceof IDBTransaction&&gp(i),dp(i,_p())?new Proxy(i,ia):i)}function Cn(i){if(i instanceof IDBRequest)return mp(i);if(Mo.has(i))return Mo.get(i);const t=Tp(i);return t!==i&&(Mo.set(i,t),Wa.set(t,i)),t}const Fo=i=>Wa.get(i);function Ep(i,t,{blocked:e,upgrade:n,blocking:r,terminated:s}={}){const o=indexedDB.open(i,t),l=Cn(o);return n&&o.addEventListener("upgradeneeded",u=>{n(Cn(o.result),u.oldVersion,u.newVersion,Cn(o.transaction),u)}),e&&o.addEventListener("blocked",u=>e(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const wp=["get","getKey","getAll","getAllKeys","count"],Ip=["put","add","delete","clear"],Lo=new Map;function Zu(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(Lo.get(t))return Lo.get(t);const e=t.replace(/FromIndex$/,""),n=t!==e,r=Ip.includes(e);if(!(e in(n?IDBIndex:IDBObjectStore).prototype)||!(r||wp.includes(e)))return;const s=async function(o,...l){const u=this.transaction(o,r?"readwrite":"readonly");let c=u.store;return n&&(c=c.index(l.shift())),(await Promise.all([c[e](...l),r&&u.done]))[0]};return Lo.set(t,s),s}yp(i=>({...i,get:(t,e,n)=>Zu(t,e)||i.get(t,e,n),has:(t,e)=>!!Zu(t,e)||i.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(bp(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function bp(i){const t=i.getComponent();return(t==null?void 0:t.type)==="VERSION"}const sa="@firebase/app",tc="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr=new yh("@firebase/app"),Rp="@firebase/app-compat",Pp="@firebase/analytics-compat",Sp="@firebase/analytics",Cp="@firebase/app-check-compat",Dp="@firebase/app-check",Vp="@firebase/auth",kp="@firebase/auth-compat",xp="@firebase/database",Np="@firebase/database-compat",Op="@firebase/functions",Mp="@firebase/functions-compat",Fp="@firebase/installations",Lp="@firebase/installations-compat",$p="@firebase/messaging",Up="@firebase/messaging-compat",Bp="@firebase/performance",jp="@firebase/performance-compat",zp="@firebase/remote-config",qp="@firebase/remote-config-compat",Gp="@firebase/storage",Kp="@firebase/storage-compat",Hp="@firebase/firestore",Wp="@firebase/vertexai-preview",Qp="@firebase/firestore-compat",Xp="firebase",Yp="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa="[DEFAULT]",Jp={[sa]:"fire-core",[Rp]:"fire-core-compat",[Sp]:"fire-analytics",[Pp]:"fire-analytics-compat",[Dp]:"fire-app-check",[Cp]:"fire-app-check-compat",[Vp]:"fire-auth",[kp]:"fire-auth-compat",[xp]:"fire-rtdb",[Np]:"fire-rtdb-compat",[Op]:"fire-fn",[Mp]:"fire-fn-compat",[Fp]:"fire-iid",[Lp]:"fire-iid-compat",[$p]:"fire-fcm",[Up]:"fire-fcm-compat",[Bp]:"fire-perf",[jp]:"fire-perf-compat",[zp]:"fire-rc",[qp]:"fire-rc-compat",[Gp]:"fire-gcs",[Kp]:"fire-gcs-compat",[Hp]:"fire-fst",[Qp]:"fire-fst-compat",[Wp]:"fire-vertex","fire-js":"fire-js",[Xp]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new Map,Zp=new Map,aa=new Map;function ec(i,t){try{i.container.addComponent(t)}catch(e){sr.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,e)}}function Fs(i){const t=i.name;if(aa.has(t))return sr.debug(`There were multiple attempts to register component ${t}.`),!1;aa.set(t,i);for(const e of Ms.values())ec(e,i);for(const e of Zp.values())ec(e,i);return!0}function tm(i,t){const e=i.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),i.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Dn=new gh("app","Firebase",em);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Vi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Dn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm=Yp;function Eh(i,t={}){let e=i;typeof t!="object"&&(t={name:t});const n=Object.assign({name:oa,automaticDataCollectionEnabled:!1},t),r=n.name;if(typeof r!="string"||!r)throw Dn.create("bad-app-name",{appName:String(r)});if(e||(e=mh()),!e)throw Dn.create("no-options");const s=Ms.get(r);if(s){if(na(e,s.options)&&na(n,s.config))return s;throw Dn.create("duplicate-app",{appName:r})}const o=new lp(r);for(const u of aa.values())o.addComponent(u);const l=new nm(e,n,o);return Ms.set(r,l),l}function im(i=oa){const t=Ms.get(i);if(!t&&i===oa&&mh())return Eh();if(!t)throw Dn.create("no-app",{appName:i});return t}function Pr(i,t,e){var n;let r=(n=Jp[i])!==null&&n!==void 0?n:i;e&&(r+=`-${e}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const l=[`Unable to register library "${r}" with version "${t}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),sr.warn(l.join(" "));return}Fs(new Vi(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm="firebase-heartbeat-database",om=1,ki="firebase-heartbeat-store";let $o=null;function wh(){return $o||($o=Ep(sm,om,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(ki)}catch(e){console.warn(e)}}}}).catch(i=>{throw Dn.create("idb-open",{originalErrorMessage:i.message})})),$o}async function am(i){try{const e=(await wh()).transaction(ki),n=await e.objectStore(ki).get(Ih(i));return await e.done,n}catch(t){if(t instanceof Hr)sr.warn(t.message);else{const e=Dn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});sr.warn(e.message)}}}async function nc(i,t){try{const n=(await wh()).transaction(ki,"readwrite");await n.objectStore(ki).put(t,Ih(i)),await n.done}catch(e){if(e instanceof Hr)sr.warn(e.message);else{const n=Dn.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});sr.warn(n.message)}}}function Ih(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm=1024,um=30*24*60*60*1e3;class cm{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new fm(e),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,e;const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=rc();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=um}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=rc(),{heartbeatsToSend:n,unsentEntries:r}=hm(this._heartbeatsCache.heartbeats),s=Os(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function rc(){return new Date().toISOString().substring(0,10)}function hm(i,t=lm){const e=[];let n=i.slice();for(const r of i){const s=e.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),ic(e)>t){s.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),ic(e)>t){e.pop();break}n=n.slice(1)}return{heartbeatsToSend:e,unsentEntries:n}}class fm{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tp()?ep().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await am(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return nc(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return nc(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function ic(i){return Os(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(i){Fs(new Vi("platform-logger",t=>new Ap(t),"PRIVATE")),Fs(new Vi("heartbeat",t=>new cm(t),"PRIVATE")),Pr(sa,tc,i),Pr(sa,tc,"esm2017"),Pr("fire-js","")}dm("");var sc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tr,Ah;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(w,v){function y(){}y.prototype=v.prototype,w.D=v.prototype,w.prototype=new y,w.prototype.constructor=w,w.C=function(b,R,P){for(var A=Array(arguments.length-2),it=2;it<arguments.length;it++)A[it-2]=arguments[it];return v.prototype[R].apply(b,A)}}function e(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,e),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(w,v,y){y||(y=0);var b=Array(16);if(typeof v=="string")for(var R=0;16>R;++R)b[R]=v.charCodeAt(y++)|v.charCodeAt(y++)<<8|v.charCodeAt(y++)<<16|v.charCodeAt(y++)<<24;else for(R=0;16>R;++R)b[R]=v[y++]|v[y++]<<8|v[y++]<<16|v[y++]<<24;v=w.g[0],y=w.g[1],R=w.g[2];var P=w.g[3],A=v+(P^y&(R^P))+b[0]+3614090360&4294967295;v=y+(A<<7&4294967295|A>>>25),A=P+(R^v&(y^R))+b[1]+3905402710&4294967295,P=v+(A<<12&4294967295|A>>>20),A=R+(y^P&(v^y))+b[2]+606105819&4294967295,R=P+(A<<17&4294967295|A>>>15),A=y+(v^R&(P^v))+b[3]+3250441966&4294967295,y=R+(A<<22&4294967295|A>>>10),A=v+(P^y&(R^P))+b[4]+4118548399&4294967295,v=y+(A<<7&4294967295|A>>>25),A=P+(R^v&(y^R))+b[5]+1200080426&4294967295,P=v+(A<<12&4294967295|A>>>20),A=R+(y^P&(v^y))+b[6]+2821735955&4294967295,R=P+(A<<17&4294967295|A>>>15),A=y+(v^R&(P^v))+b[7]+4249261313&4294967295,y=R+(A<<22&4294967295|A>>>10),A=v+(P^y&(R^P))+b[8]+1770035416&4294967295,v=y+(A<<7&4294967295|A>>>25),A=P+(R^v&(y^R))+b[9]+2336552879&4294967295,P=v+(A<<12&4294967295|A>>>20),A=R+(y^P&(v^y))+b[10]+4294925233&4294967295,R=P+(A<<17&4294967295|A>>>15),A=y+(v^R&(P^v))+b[11]+2304563134&4294967295,y=R+(A<<22&4294967295|A>>>10),A=v+(P^y&(R^P))+b[12]+1804603682&4294967295,v=y+(A<<7&4294967295|A>>>25),A=P+(R^v&(y^R))+b[13]+4254626195&4294967295,P=v+(A<<12&4294967295|A>>>20),A=R+(y^P&(v^y))+b[14]+2792965006&4294967295,R=P+(A<<17&4294967295|A>>>15),A=y+(v^R&(P^v))+b[15]+1236535329&4294967295,y=R+(A<<22&4294967295|A>>>10),A=v+(R^P&(y^R))+b[1]+4129170786&4294967295,v=y+(A<<5&4294967295|A>>>27),A=P+(y^R&(v^y))+b[6]+3225465664&4294967295,P=v+(A<<9&4294967295|A>>>23),A=R+(v^y&(P^v))+b[11]+643717713&4294967295,R=P+(A<<14&4294967295|A>>>18),A=y+(P^v&(R^P))+b[0]+3921069994&4294967295,y=R+(A<<20&4294967295|A>>>12),A=v+(R^P&(y^R))+b[5]+3593408605&4294967295,v=y+(A<<5&4294967295|A>>>27),A=P+(y^R&(v^y))+b[10]+38016083&4294967295,P=v+(A<<9&4294967295|A>>>23),A=R+(v^y&(P^v))+b[15]+3634488961&4294967295,R=P+(A<<14&4294967295|A>>>18),A=y+(P^v&(R^P))+b[4]+3889429448&4294967295,y=R+(A<<20&4294967295|A>>>12),A=v+(R^P&(y^R))+b[9]+568446438&4294967295,v=y+(A<<5&4294967295|A>>>27),A=P+(y^R&(v^y))+b[14]+3275163606&4294967295,P=v+(A<<9&4294967295|A>>>23),A=R+(v^y&(P^v))+b[3]+4107603335&4294967295,R=P+(A<<14&4294967295|A>>>18),A=y+(P^v&(R^P))+b[8]+1163531501&4294967295,y=R+(A<<20&4294967295|A>>>12),A=v+(R^P&(y^R))+b[13]+2850285829&4294967295,v=y+(A<<5&4294967295|A>>>27),A=P+(y^R&(v^y))+b[2]+4243563512&4294967295,P=v+(A<<9&4294967295|A>>>23),A=R+(v^y&(P^v))+b[7]+1735328473&4294967295,R=P+(A<<14&4294967295|A>>>18),A=y+(P^v&(R^P))+b[12]+2368359562&4294967295,y=R+(A<<20&4294967295|A>>>12),A=v+(y^R^P)+b[5]+4294588738&4294967295,v=y+(A<<4&4294967295|A>>>28),A=P+(v^y^R)+b[8]+2272392833&4294967295,P=v+(A<<11&4294967295|A>>>21),A=R+(P^v^y)+b[11]+1839030562&4294967295,R=P+(A<<16&4294967295|A>>>16),A=y+(R^P^v)+b[14]+4259657740&4294967295,y=R+(A<<23&4294967295|A>>>9),A=v+(y^R^P)+b[1]+2763975236&4294967295,v=y+(A<<4&4294967295|A>>>28),A=P+(v^y^R)+b[4]+1272893353&4294967295,P=v+(A<<11&4294967295|A>>>21),A=R+(P^v^y)+b[7]+4139469664&4294967295,R=P+(A<<16&4294967295|A>>>16),A=y+(R^P^v)+b[10]+3200236656&4294967295,y=R+(A<<23&4294967295|A>>>9),A=v+(y^R^P)+b[13]+681279174&4294967295,v=y+(A<<4&4294967295|A>>>28),A=P+(v^y^R)+b[0]+3936430074&4294967295,P=v+(A<<11&4294967295|A>>>21),A=R+(P^v^y)+b[3]+3572445317&4294967295,R=P+(A<<16&4294967295|A>>>16),A=y+(R^P^v)+b[6]+76029189&4294967295,y=R+(A<<23&4294967295|A>>>9),A=v+(y^R^P)+b[9]+3654602809&4294967295,v=y+(A<<4&4294967295|A>>>28),A=P+(v^y^R)+b[12]+3873151461&4294967295,P=v+(A<<11&4294967295|A>>>21),A=R+(P^v^y)+b[15]+530742520&4294967295,R=P+(A<<16&4294967295|A>>>16),A=y+(R^P^v)+b[2]+3299628645&4294967295,y=R+(A<<23&4294967295|A>>>9),A=v+(R^(y|~P))+b[0]+4096336452&4294967295,v=y+(A<<6&4294967295|A>>>26),A=P+(y^(v|~R))+b[7]+1126891415&4294967295,P=v+(A<<10&4294967295|A>>>22),A=R+(v^(P|~y))+b[14]+2878612391&4294967295,R=P+(A<<15&4294967295|A>>>17),A=y+(P^(R|~v))+b[5]+4237533241&4294967295,y=R+(A<<21&4294967295|A>>>11),A=v+(R^(y|~P))+b[12]+1700485571&4294967295,v=y+(A<<6&4294967295|A>>>26),A=P+(y^(v|~R))+b[3]+2399980690&4294967295,P=v+(A<<10&4294967295|A>>>22),A=R+(v^(P|~y))+b[10]+4293915773&4294967295,R=P+(A<<15&4294967295|A>>>17),A=y+(P^(R|~v))+b[1]+2240044497&4294967295,y=R+(A<<21&4294967295|A>>>11),A=v+(R^(y|~P))+b[8]+1873313359&4294967295,v=y+(A<<6&4294967295|A>>>26),A=P+(y^(v|~R))+b[15]+4264355552&4294967295,P=v+(A<<10&4294967295|A>>>22),A=R+(v^(P|~y))+b[6]+2734768916&4294967295,R=P+(A<<15&4294967295|A>>>17),A=y+(P^(R|~v))+b[13]+1309151649&4294967295,y=R+(A<<21&4294967295|A>>>11),A=v+(R^(y|~P))+b[4]+4149444226&4294967295,v=y+(A<<6&4294967295|A>>>26),A=P+(y^(v|~R))+b[11]+3174756917&4294967295,P=v+(A<<10&4294967295|A>>>22),A=R+(v^(P|~y))+b[2]+718787259&4294967295,R=P+(A<<15&4294967295|A>>>17),A=y+(P^(R|~v))+b[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(R+(A<<21&4294967295|A>>>11))&4294967295,w.g[2]=w.g[2]+R&4294967295,w.g[3]=w.g[3]+P&4294967295}n.prototype.u=function(w,v){v===void 0&&(v=w.length);for(var y=v-this.blockSize,b=this.B,R=this.h,P=0;P<v;){if(R==0)for(;P<=y;)r(this,w,P),P+=this.blockSize;if(typeof w=="string"){for(;P<v;)if(b[R++]=w.charCodeAt(P++),R==this.blockSize){r(this,b),R=0;break}}else for(;P<v;)if(b[R++]=w[P++],R==this.blockSize){r(this,b),R=0;break}}this.h=R,this.o+=v},n.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;var y=8*this.o;for(v=w.length-8;v<w.length;++v)w[v]=y&255,y/=256;for(this.u(w),w=Array(16),v=y=0;4>v;++v)for(var b=0;32>b;b+=8)w[y++]=this.g[v]>>>b&255;return w};function s(w,v){var y=l;return Object.prototype.hasOwnProperty.call(y,w)?y[w]:y[w]=v(w)}function o(w,v){this.h=v;for(var y=[],b=!0,R=w.length-1;0<=R;R--){var P=w[R]|0;b&&P==v||(y[R]=P,b=!1)}this.g=y}var l={};function u(w){return-128<=w&&128>w?s(w,function(v){return new o([v|0],0>v?-1:0)}):new o([w|0],0>w?-1:0)}function c(w){if(isNaN(w)||!isFinite(w))return _;if(0>w)return I(c(-w));for(var v=[],y=1,b=0;w>=y;b++)v[b]=w/y|0,y*=4294967296;return new o(v,0)}function h(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return I(h(w.substring(1),v));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=c(Math.pow(v,8)),b=_,R=0;R<w.length;R+=8){var P=Math.min(8,w.length-R),A=parseInt(w.substring(R,R+P),v);8>P?(P=c(Math.pow(v,P)),b=b.j(P).add(c(A))):(b=b.j(y),b=b.add(c(A)))}return b}var _=u(0),p=u(1),m=u(16777216);i=o.prototype,i.m=function(){if(g(this))return-I(this).m();for(var w=0,v=1,y=0;y<this.g.length;y++){var b=this.i(y);w+=(0<=b?b:4294967296+b)*v,v*=4294967296}return w},i.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(T(this))return"0";if(g(this))return"-"+I(this).toString(w);for(var v=c(Math.pow(w,6)),y=this,b="";;){var R=V(y,v).g;y=C(y,R.j(v));var P=((0<y.g.length?y.g[0]:y.h)>>>0).toString(w);if(y=R,T(y))return P+b;for(;6>P.length;)P="0"+P;b=P+b}},i.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function T(w){if(w.h!=0)return!1;for(var v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function g(w){return w.h==-1}i.l=function(w){return w=C(this,w),g(w)?-1:T(w)?0:1};function I(w){for(var v=w.g.length,y=[],b=0;b<v;b++)y[b]=~w.g[b];return new o(y,~w.h).add(p)}i.abs=function(){return g(this)?I(this):this},i.add=function(w){for(var v=Math.max(this.g.length,w.g.length),y=[],b=0,R=0;R<=v;R++){var P=b+(this.i(R)&65535)+(w.i(R)&65535),A=(P>>>16)+(this.i(R)>>>16)+(w.i(R)>>>16);b=A>>>16,P&=65535,A&=65535,y[R]=A<<16|P}return new o(y,y[y.length-1]&-2147483648?-1:0)};function C(w,v){return w.add(I(v))}i.j=function(w){if(T(this)||T(w))return _;if(g(this))return g(w)?I(this).j(I(w)):I(I(this).j(w));if(g(w))return I(this.j(I(w)));if(0>this.l(m)&&0>w.l(m))return c(this.m()*w.m());for(var v=this.g.length+w.g.length,y=[],b=0;b<2*v;b++)y[b]=0;for(b=0;b<this.g.length;b++)for(var R=0;R<w.g.length;R++){var P=this.i(b)>>>16,A=this.i(b)&65535,it=w.i(R)>>>16,ct=w.i(R)&65535;y[2*b+2*R]+=A*ct,S(y,2*b+2*R),y[2*b+2*R+1]+=P*ct,S(y,2*b+2*R+1),y[2*b+2*R+1]+=A*it,S(y,2*b+2*R+1),y[2*b+2*R+2]+=P*it,S(y,2*b+2*R+2)}for(b=0;b<v;b++)y[b]=y[2*b+1]<<16|y[2*b];for(b=v;b<2*v;b++)y[b]=0;return new o(y,0)};function S(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function k(w,v){this.g=w,this.h=v}function V(w,v){if(T(v))throw Error("division by zero");if(T(w))return new k(_,_);if(g(w))return v=V(I(w),v),new k(I(v.g),I(v.h));if(g(v))return v=V(w,I(v)),new k(I(v.g),v.h);if(30<w.g.length){if(g(w)||g(v))throw Error("slowDivide_ only works with positive integers.");for(var y=p,b=v;0>=b.l(w);)y=x(y),b=x(b);var R=O(y,1),P=O(b,1);for(b=O(b,2),y=O(y,2);!T(b);){var A=P.add(b);0>=A.l(w)&&(R=R.add(y),P=A),b=O(b,1),y=O(y,1)}return v=C(w,R.j(v)),new k(R,v)}for(R=_;0<=w.l(v);){for(y=Math.max(1,Math.floor(w.m()/v.m())),b=Math.ceil(Math.log(y)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),P=c(y),A=P.j(v);g(A)||0<A.l(w);)y-=b,P=c(y),A=P.j(v);T(P)&&(P=p),R=R.add(P),w=C(w,A)}return new k(R,w)}i.A=function(w){return V(this,w).h},i.and=function(w){for(var v=Math.max(this.g.length,w.g.length),y=[],b=0;b<v;b++)y[b]=this.i(b)&w.i(b);return new o(y,this.h&w.h)},i.or=function(w){for(var v=Math.max(this.g.length,w.g.length),y=[],b=0;b<v;b++)y[b]=this.i(b)|w.i(b);return new o(y,this.h|w.h)},i.xor=function(w){for(var v=Math.max(this.g.length,w.g.length),y=[],b=0;b<v;b++)y[b]=this.i(b)^w.i(b);return new o(y,this.h^w.h)};function x(w){for(var v=w.g.length+1,y=[],b=0;b<v;b++)y[b]=w.i(b)<<1|w.i(b-1)>>>31;return new o(y,w.h)}function O(w,v){var y=v>>5;v%=32;for(var b=w.g.length-y,R=[],P=0;P<b;P++)R[P]=0<v?w.i(P+y)>>>v|w.i(P+y+1)<<32-v:w.i(P+y);return new o(R,w.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,Ah=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,tr=o}).apply(typeof sc<"u"?sc:typeof self<"u"?self:typeof window<"u"?window:{});var Ts=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bh,Rh,pi,Ph,bs,la,Sh,Ch,Dh;(function(){var i,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,f,d){return a==Array.prototype||a==Object.prototype||(a[f]=d.value),a};function e(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ts=="object"&&Ts];for(var f=0;f<a.length;++f){var d=a[f];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var n=e(this);function r(a,f){if(f)t:{var d=n;a=a.split(".");for(var E=0;E<a.length-1;E++){var D=a[E];if(!(D in d))break t;d=d[D]}a=a[a.length-1],E=d[a],f=f(E),f!=E&&f!=null&&t(d,a,{configurable:!0,writable:!0,value:f})}}function s(a,f){a instanceof String&&(a+="");var d=0,E=!1,D={next:function(){if(!E&&d<a.length){var N=d++;return{value:f(N,a[N]),done:!1}}return E=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}r("Array.prototype.values",function(a){return a||function(){return s(this,function(f,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var f=typeof a;return f=f!="object"?f:a?Array.isArray(a)?"array":f:"null",f=="array"||f=="object"&&typeof a.length=="number"}function c(a){var f=typeof a;return f=="object"&&a!=null||f=="function"}function h(a,f,d){return a.call.apply(a.bind,arguments)}function _(a,f,d){if(!a)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,E),a.apply(f,D)}}return function(){return a.apply(f,arguments)}}function p(a,f,d){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:_,p.apply(null,arguments)}function m(a,f){var d=Array.prototype.slice.call(arguments,1);return function(){var E=d.slice();return E.push.apply(E,arguments),a.apply(this,E)}}function T(a,f){function d(){}d.prototype=f.prototype,a.aa=f.prototype,a.prototype=new d,a.prototype.constructor=a,a.Qb=function(E,D,N){for(var U=Array(arguments.length-2),pt=2;pt<arguments.length;pt++)U[pt-2]=arguments[pt];return f.prototype[D].apply(E,U)}}function g(a){const f=a.length;if(0<f){const d=Array(f);for(let E=0;E<f;E++)d[E]=a[E];return d}return[]}function I(a,f){for(let d=1;d<arguments.length;d++){const E=arguments[d];if(u(E)){const D=a.length||0,N=E.length||0;a.length=D+N;for(let U=0;U<N;U++)a[D+U]=E[U]}else a.push(E)}}class C{constructor(f,d){this.i=f,this.j=d,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function S(a){return/^[\s\xa0]*$/.test(a)}function k(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function V(a){return V[" "](a),a}V[" "]=function(){};var x=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function O(a,f,d){for(const E in a)f.call(d,a[E],E,a)}function w(a,f){for(const d in a)f.call(void 0,a[d],d,a)}function v(a){const f={};for(const d in a)f[d]=a[d];return f}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(a,f){let d,E;for(let D=1;D<arguments.length;D++){E=arguments[D];for(d in E)a[d]=E[d];for(let N=0;N<y.length;N++)d=y[N],Object.prototype.hasOwnProperty.call(E,d)&&(a[d]=E[d])}}function R(a){var f=1;a=a.split(":");const d=[];for(;0<f&&a.length;)d.push(a.shift()),f--;return a.length&&d.push(a.join(":")),d}function P(a){l.setTimeout(()=>{throw a},0)}function A(){var a=Ie;let f=null;return a.g&&(f=a.g,a.g=a.g.next,a.g||(a.h=null),f.next=null),f}class it{constructor(){this.h=this.g=null}add(f,d){const E=ct.get();E.set(f,d),this.h?this.h.next=E:this.g=E,this.h=E}}var ct=new C(()=>new _t,a=>a.reset());class _t{constructor(){this.next=this.g=this.h=null}set(f,d){this.h=f,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let lt,Ct=!1,Ie=new it,Oe=()=>{const a=l.Promise.resolve(void 0);lt=()=>{a.then(Be)}};var Be=()=>{for(var a;a=A();){try{a.h.call(a.g)}catch(d){P(d)}var f=ct;f.j(a),100>f.h&&(f.h++,a.next=f.g,f.g=a)}Ct=!1};function gt(){this.s=this.s,this.C=this.C}gt.prototype.s=!1,gt.prototype.ma=function(){this.s||(this.s=!0,this.N())},gt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function At(a,f){this.type=a,this.g=this.target=f,this.defaultPrevented=!1}At.prototype.h=function(){this.defaultPrevented=!0};var te=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};l.addEventListener("test",d,f),l.removeEventListener("test",d,f)}catch{}return a}();function Qt(a,f){if(At.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var d=this.type=a.type,E=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=f,f=a.relatedTarget){if(x){t:{try{V(f.nodeName);var D=!0;break t}catch{}D=!1}D||(f=null)}}else d=="mouseover"?f=a.fromElement:d=="mouseout"&&(f=a.toElement);this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Yr[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Qt.aa.h.call(this)}}T(Qt,At);var Yr={2:"touch",3:"pen",4:"mouse"};Qt.prototype.h=function(){Qt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ke="closure_listenable_"+(1e6*Math.random()|0),Jr=0;function He(a,f,d,E,D){this.listener=a,this.proxy=null,this.src=f,this.type=d,this.capture=!!E,this.ha=D,this.key=++Jr,this.da=this.fa=!1}function pe(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function En(a){this.src=a,this.g={},this.h=0}En.prototype.add=function(a,f,d,E,D){var N=a.toString();a=this.g[N],a||(a=this.g[N]=[],this.h++);var U=ee(a,f,E,D);return-1<U?(f=a[U],d||(f.fa=!1)):(f=new He(f,this.src,N,!!E,D),f.fa=d,a.push(f)),f};function Ae(a,f){var d=f.type;if(d in a.g){var E=a.g[d],D=Array.prototype.indexOf.call(E,f,void 0),N;(N=0<=D)&&Array.prototype.splice.call(E,D,1),N&&(pe(f),a.g[d].length==0&&(delete a.g[d],a.h--))}}function ee(a,f,d,E){for(var D=0;D<a.length;++D){var N=a[D];if(!N.da&&N.listener==f&&N.capture==!!d&&N.ha==E)return D}return-1}var We="closure_lm_"+(1e6*Math.random()|0),Mt={};function st(a,f,d,E,D){if(Array.isArray(f)){for(var N=0;N<f.length;N++)st(a,f[N],d,E,D);return null}return d=be(d),a&&a[Ke]?a.K(f,d,c(E)?!!E.capture:!!E,D):bt(a,f,d,!1,E,D)}function bt(a,f,d,E,D,N){if(!f)throw Error("Invalid event type");var U=c(D)?!!D.capture:!!D,pt=_r(a);if(pt||(a[We]=pt=new En(a)),d=pt.add(f,d,E,U,N),d.proxy)return d;if(E=Me(),d.proxy=E,E.src=a,E.listener=d,a.addEventListener)te||(D=U),D===void 0&&(D=!1),a.addEventListener(f.toString(),E,D);else if(a.attachEvent)a.attachEvent(ne(f.toString()),E);else if(a.addListener&&a.removeListener)a.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Me(){function a(d){return f.call(a.src,a.listener,d)}const f=is;return a}function Qe(a,f,d,E,D){if(Array.isArray(f))for(var N=0;N<f.length;N++)Qe(a,f[N],d,E,D);else E=c(E)?!!E.capture:!!E,d=be(d),a&&a[Ke]?(a=a.i,f=String(f).toString(),f in a.g&&(N=a.g[f],d=ee(N,d,E,D),-1<d&&(pe(N[d]),Array.prototype.splice.call(N,d,1),N.length==0&&(delete a.g[f],a.h--)))):a&&(a=_r(a))&&(f=a.g[f.toString()],a=-1,f&&(a=ee(f,d,E,D)),(d=-1<a?f[a]:null)&&Dt(d))}function Dt(a){if(typeof a!="number"&&a&&!a.da){var f=a.src;if(f&&f[Ke])Ae(f.i,a);else{var d=a.type,E=a.proxy;f.removeEventListener?f.removeEventListener(d,E,a.capture):f.detachEvent?f.detachEvent(ne(d),E):f.addListener&&f.removeListener&&f.removeListener(E),(d=_r(f))?(Ae(d,a),d.h==0&&(d.src=null,f[We]=null)):pe(a)}}}function ne(a){return a in Mt?Mt[a]:Mt[a]="on"+a}function is(a,f){if(a.da)a=!0;else{f=new Qt(f,this);var d=a.listener,E=a.ha||a.src;a.fa&&Dt(a),a=d.call(E,f)}return a}function _r(a){return a=a[We],a instanceof En?a:null}var pr="__closure_events_fn_"+(1e9*Math.random()>>>0);function be(a){return typeof a=="function"?a:(a[pr]||(a[pr]=function(f){return a.handleEvent(f)}),a[pr])}function Lt(){gt.call(this),this.i=new En(this),this.M=this,this.F=null}T(Lt,gt),Lt.prototype[Ke]=!0,Lt.prototype.removeEventListener=function(a,f,d,E){Qe(this,a,f,d,E)};function zt(a,f){var d,E=a.F;if(E)for(d=[];E;E=E.F)d.push(E);if(a=a.M,E=f.type||f,typeof f=="string")f=new At(f,a);else if(f instanceof At)f.target=f.target||a;else{var D=f;f=new At(E,a),b(f,D)}if(D=!0,d)for(var N=d.length-1;0<=N;N--){var U=f.g=d[N];D=hn(U,E,!0,f)&&D}if(U=f.g=a,D=hn(U,E,!0,f)&&D,D=hn(U,E,!1,f)&&D,d)for(N=0;N<d.length;N++)U=f.g=d[N],D=hn(U,E,!1,f)&&D}Lt.prototype.N=function(){if(Lt.aa.N.call(this),this.i){var a=this.i,f;for(f in a.g){for(var d=a.g[f],E=0;E<d.length;E++)pe(d[E]);delete a.g[f],a.h--}}this.F=null},Lt.prototype.K=function(a,f,d,E){return this.i.add(String(a),f,!1,d,E)},Lt.prototype.L=function(a,f,d,E){return this.i.add(String(a),f,!0,d,E)};function hn(a,f,d,E){if(f=a.i.g[String(f)],!f)return!0;f=f.concat();for(var D=!0,N=0;N<f.length;++N){var U=f[N];if(U&&!U.da&&U.capture==d){var pt=U.listener,Xt=U.ha||U.src;U.fa&&Ae(a.i,U),D=pt.call(Xt,E)!==!1&&D}}return D&&!E.defaultPrevented}function mr(a,f,d){if(typeof a=="function")d&&(a=p(a,d));else if(a&&typeof a.handleEvent=="function")a=p(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:l.setTimeout(a,f||0)}function Hl(a){a.g=mr(()=>{a.g=null,a.i&&(a.i=!1,Hl(a))},a.l);const f=a.h;a.h=null,a.m.apply(null,f)}class Xd extends gt{constructor(f,d){super(),this.m=f,this.l=d,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Hl(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zr(a){gt.call(this),this.h=a,this.g={}}T(Zr,gt);var Wl=[];function Ql(a){O(a.g,function(f,d){this.g.hasOwnProperty(d)&&Dt(f)},a),a.g={}}Zr.prototype.N=function(){Zr.aa.N.call(this),Ql(this)},Zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vo=l.JSON.stringify,Yd=l.JSON.parse,Jd=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function To(){}To.prototype.h=null;function Xl(a){return a.h||(a.h=a.i())}function Yl(){}var ti={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Eo(){At.call(this,"d")}T(Eo,At);function wo(){At.call(this,"c")}T(wo,At);var qn={},Jl=null;function ss(){return Jl=Jl||new Lt}qn.La="serverreachability";function Zl(a){At.call(this,qn.La,a)}T(Zl,At);function ei(a){const f=ss();zt(f,new Zl(f))}qn.STAT_EVENT="statevent";function tu(a,f){At.call(this,qn.STAT_EVENT,a),this.stat=f}T(tu,At);function fe(a){const f=ss();zt(f,new tu(f,a))}qn.Ma="timingevent";function eu(a,f){At.call(this,qn.Ma,a),this.size=f}T(eu,At);function ni(a,f){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},f)}function ri(){this.g=!0}ri.prototype.xa=function(){this.g=!1};function Zd(a,f,d,E,D,N){a.info(function(){if(a.g)if(N)for(var U="",pt=N.split("&"),Xt=0;Xt<pt.length;Xt++){var ft=pt[Xt].split("=");if(1<ft.length){var re=ft[0];ft=ft[1];var ie=re.split("_");U=2<=ie.length&&ie[1]=="type"?U+(re+"="+ft+"&"):U+(re+"=redacted&")}}else U=null;else U=N;return"XMLHTTP REQ ("+E+") [attempt "+D+"]: "+f+`
`+d+`
`+U})}function t_(a,f,d,E,D,N,U){a.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+D+"]: "+f+`
`+d+`
`+N+" "+U})}function gr(a,f,d,E){a.info(function(){return"XMLHTTP TEXT ("+f+"): "+n_(a,d)+(E?" "+E:"")})}function e_(a,f){a.info(function(){return"TIMEOUT: "+f})}ri.prototype.info=function(){};function n_(a,f){if(!a.g)return f;if(!f)return null;try{var d=JSON.parse(f);if(d){for(a=0;a<d.length;a++)if(Array.isArray(d[a])){var E=d[a];if(!(2>E.length)){var D=E[1];if(Array.isArray(D)&&!(1>D.length)){var N=D[0];if(N!="noop"&&N!="stop"&&N!="close")for(var U=1;U<D.length;U++)D[U]=""}}}}return vo(d)}catch{return f}}var os={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},nu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Io;function as(){}T(as,To),as.prototype.g=function(){return new XMLHttpRequest},as.prototype.i=function(){return{}},Io=new as;function wn(a,f,d,E){this.j=a,this.i=f,this.l=d,this.R=E||1,this.U=new Zr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ru}function ru(){this.i=null,this.g="",this.h=!1}var iu={},Ao={};function bo(a,f,d){a.L=1,a.v=hs(fn(f)),a.m=d,a.P=!0,su(a,null)}function su(a,f){a.F=Date.now(),ls(a),a.A=fn(a.v);var d=a.A,E=a.R;Array.isArray(E)||(E=[String(E)]),vu(d.i,"t",E),a.C=0,d=a.j.J,a.h=new ru,a.g=Fu(a.j,d?f:null,!a.m),0<a.O&&(a.M=new Xd(p(a.Y,a,a.g),a.O)),f=a.U,d=a.g,E=a.ca;var D="readystatechange";Array.isArray(D)||(D&&(Wl[0]=D.toString()),D=Wl);for(var N=0;N<D.length;N++){var U=st(d,D[N],E||f.handleEvent,!1,f.h||f);if(!U)break;f.g[U.key]=U}f=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,f)):(a.u="GET",a.g.ea(a.A,a.u,null,f)),ei(),Zd(a.i,a.u,a.A,a.l,a.R,a.m)}wn.prototype.ca=function(a){a=a.target;const f=this.M;f&&dn(a)==3?f.j():this.Y(a)},wn.prototype.Y=function(a){try{if(a==this.g)t:{const ie=dn(this.g);var f=this.g.Ba();const Tr=this.g.Z();if(!(3>ie)&&(ie!=3||this.g&&(this.h.h||this.g.oa()||Ru(this.g)))){this.J||ie!=4||f==7||(f==8||0>=Tr?ei(3):ei(2)),Ro(this);var d=this.g.Z();this.X=d;e:if(ou(this)){var E=Ru(this.g);a="";var D=E.length,N=dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gn(this),ii(this);var U="";break e}this.h.i=new l.TextDecoder}for(f=0;f<D;f++)this.h.h=!0,a+=this.h.i.decode(E[f],{stream:!(N&&f==D-1)});E.length=0,this.h.g+=a,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=d==200,t_(this.i,this.u,this.A,this.l,this.R,ie,d),this.o){if(this.T&&!this.K){e:{if(this.g){var pt,Xt=this.g;if((pt=Xt.g?Xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(pt)){var ft=pt;break e}}ft=null}if(d=ft)gr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Po(this,d);else{this.o=!1,this.s=3,fe(12),Gn(this),ii(this);break t}}if(this.P){d=!0;let je;for(;!this.J&&this.C<U.length;)if(je=r_(this,U),je==Ao){ie==4&&(this.s=4,fe(14),d=!1),gr(this.i,this.l,null,"[Incomplete Response]");break}else if(je==iu){this.s=4,fe(15),gr(this.i,this.l,U,"[Invalid Chunk]"),d=!1;break}else gr(this.i,this.l,je,null),Po(this,je);if(ou(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ie!=4||U.length!=0||this.h.h||(this.s=1,fe(16),d=!1),this.o=this.o&&d,!d)gr(this.i,this.l,U,"[Invalid Chunked Response]"),Gn(this),ii(this);else if(0<U.length&&!this.W){this.W=!0;var re=this.j;re.g==this&&re.ba&&!re.M&&(re.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),xo(re),re.M=!0,fe(11))}}else gr(this.i,this.l,U,null),Po(this,U);ie==4&&Gn(this),this.o&&!this.J&&(ie==4?xu(this.j,this):(this.o=!1,ls(this)))}else T_(this.g),d==400&&0<U.indexOf("Unknown SID")?(this.s=3,fe(12)):(this.s=0,fe(13)),Gn(this),ii(this)}}}catch{}finally{}};function ou(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function r_(a,f){var d=a.C,E=f.indexOf(`
`,d);return E==-1?Ao:(d=Number(f.substring(d,E)),isNaN(d)?iu:(E+=1,E+d>f.length?Ao:(f=f.slice(E,E+d),a.C=E+d,f)))}wn.prototype.cancel=function(){this.J=!0,Gn(this)};function ls(a){a.S=Date.now()+a.I,au(a,a.I)}function au(a,f){if(a.B!=null)throw Error("WatchDog timer not null");a.B=ni(p(a.ba,a),f)}function Ro(a){a.B&&(l.clearTimeout(a.B),a.B=null)}wn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(e_(this.i,this.A),this.L!=2&&(ei(),fe(17)),Gn(this),this.s=2,ii(this)):au(this,this.S-a)};function ii(a){a.j.G==0||a.J||xu(a.j,a)}function Gn(a){Ro(a);var f=a.M;f&&typeof f.ma=="function"&&f.ma(),a.M=null,Ql(a.U),a.g&&(f=a.g,a.g=null,f.abort(),f.ma())}function Po(a,f){try{var d=a.j;if(d.G!=0&&(d.g==a||So(d.h,a))){if(!a.K&&So(d.h,a)&&d.G==3){try{var E=d.Da.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var D=E;if(D[0]==0){t:if(!d.u){if(d.g)if(d.g.F+3e3<a.F)ms(d),_s(d);else break t;ko(d),fe(18)}}else d.za=D[1],0<d.za-d.T&&37500>D[2]&&d.F&&d.v==0&&!d.C&&(d.C=ni(p(d.Za,d),6e3));if(1>=cu(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else Hn(d,11)}else if((a.K||d.g==a)&&ms(d),!S(f))for(D=d.Da.g.parse(f),f=0;f<D.length;f++){let ft=D[f];if(d.T=ft[0],ft=ft[1],d.G==2)if(ft[0]=="c"){d.K=ft[1],d.ia=ft[2];const re=ft[3];re!=null&&(d.la=re,d.j.info("VER="+d.la));const ie=ft[4];ie!=null&&(d.Aa=ie,d.j.info("SVER="+d.Aa));const Tr=ft[5];Tr!=null&&typeof Tr=="number"&&0<Tr&&(E=1.5*Tr,d.L=E,d.j.info("backChannelRequestTimeoutMs_="+E)),E=d;const je=a.g;if(je){const ys=je.g?je.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ys){var N=E.h;N.g||ys.indexOf("spdy")==-1&&ys.indexOf("quic")==-1&&ys.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(Co(N,N.h),N.h=null))}if(E.D){const No=je.g?je.g.getResponseHeader("X-HTTP-Session-Id"):null;No&&(E.ya=No,Rt(E.I,E.D,No))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-a.F,d.j.info("Handshake RTT: "+d.R+"ms")),E=d;var U=a;if(E.qa=Mu(E,E.J?E.ia:null,E.W),U.K){hu(E.h,U);var pt=U,Xt=E.L;Xt&&(pt.I=Xt),pt.B&&(Ro(pt),ls(pt)),E.g=U}else Vu(E);0<d.i.length&&ps(d)}else ft[0]!="stop"&&ft[0]!="close"||Hn(d,7);else d.G==3&&(ft[0]=="stop"||ft[0]=="close"?ft[0]=="stop"?Hn(d,7):Vo(d):ft[0]!="noop"&&d.l&&d.l.ta(ft),d.v=0)}}ei(4)}catch{}}var i_=class{constructor(a,f){this.g=a,this.map=f}};function lu(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function uu(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function cu(a){return a.h?1:a.g?a.g.size:0}function So(a,f){return a.h?a.h==f:a.g?a.g.has(f):!1}function Co(a,f){a.g?a.g.add(f):a.h=f}function hu(a,f){a.h&&a.h==f?a.h=null:a.g&&a.g.has(f)&&a.g.delete(f)}lu.prototype.cancel=function(){if(this.i=fu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function fu(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let f=a.i;for(const d of a.g.values())f=f.concat(d.D);return f}return g(a.i)}function s_(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var f=[],d=a.length,E=0;E<d;E++)f.push(a[E]);return f}f=[],d=0;for(E in a)f[d++]=a[E];return f}function o_(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var f=[];a=a.length;for(var d=0;d<a;d++)f.push(d);return f}f=[],d=0;for(const E in a)f[d++]=E;return f}}}function du(a,f){if(a.forEach&&typeof a.forEach=="function")a.forEach(f,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,f,void 0);else for(var d=o_(a),E=s_(a),D=E.length,N=0;N<D;N++)f.call(void 0,E[N],d&&d[N],a)}var _u=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function a_(a,f){if(a){a=a.split("&");for(var d=0;d<a.length;d++){var E=a[d].indexOf("="),D=null;if(0<=E){var N=a[d].substring(0,E);D=a[d].substring(E+1)}else N=a[d];f(N,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Kn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Kn){this.h=a.h,us(this,a.j),this.o=a.o,this.g=a.g,cs(this,a.s),this.l=a.l;var f=a.i,d=new ai;d.i=f.i,f.g&&(d.g=new Map(f.g),d.h=f.h),pu(this,d),this.m=a.m}else a&&(f=String(a).match(_u))?(this.h=!1,us(this,f[1]||"",!0),this.o=si(f[2]||""),this.g=si(f[3]||"",!0),cs(this,f[4]),this.l=si(f[5]||"",!0),pu(this,f[6]||"",!0),this.m=si(f[7]||"")):(this.h=!1,this.i=new ai(null,this.h))}Kn.prototype.toString=function(){var a=[],f=this.j;f&&a.push(oi(f,mu,!0),":");var d=this.g;return(d||f=="file")&&(a.push("//"),(f=this.o)&&a.push(oi(f,mu,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&a.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(oi(d,d.charAt(0)=="/"?c_:u_,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",oi(d,f_)),a.join("")};function fn(a){return new Kn(a)}function us(a,f,d){a.j=d?si(f,!0):f,a.j&&(a.j=a.j.replace(/:$/,""))}function cs(a,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);a.s=f}else a.s=null}function pu(a,f,d){f instanceof ai?(a.i=f,d_(a.i,a.h)):(d||(f=oi(f,h_)),a.i=new ai(f,a.h))}function Rt(a,f,d){a.i.set(f,d)}function hs(a){return Rt(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function si(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function oi(a,f,d){return typeof a=="string"?(a=encodeURI(a).replace(f,l_),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function l_(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var mu=/[#\/\?@]/g,u_=/[#\?:]/g,c_=/[#\?]/g,h_=/[#\?@]/g,f_=/#/g;function ai(a,f){this.h=this.g=null,this.i=a||null,this.j=!!f}function In(a){a.g||(a.g=new Map,a.h=0,a.i&&a_(a.i,function(f,d){a.add(decodeURIComponent(f.replace(/\+/g," ")),d)}))}i=ai.prototype,i.add=function(a,f){In(this),this.i=null,a=yr(this,a);var d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(f),this.h+=1,this};function gu(a,f){In(a),f=yr(a,f),a.g.has(f)&&(a.i=null,a.h-=a.g.get(f).length,a.g.delete(f))}function yu(a,f){return In(a),f=yr(a,f),a.g.has(f)}i.forEach=function(a,f){In(this),this.g.forEach(function(d,E){d.forEach(function(D){a.call(f,D,E,this)},this)},this)},i.na=function(){In(this);const a=Array.from(this.g.values()),f=Array.from(this.g.keys()),d=[];for(let E=0;E<f.length;E++){const D=a[E];for(let N=0;N<D.length;N++)d.push(f[E])}return d},i.V=function(a){In(this);let f=[];if(typeof a=="string")yu(this,a)&&(f=f.concat(this.g.get(yr(this,a))));else{a=Array.from(this.g.values());for(let d=0;d<a.length;d++)f=f.concat(a[d])}return f},i.set=function(a,f){return In(this),this.i=null,a=yr(this,a),yu(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[f]),this.h+=1,this},i.get=function(a,f){return a?(a=this.V(a),0<a.length?String(a[0]):f):f};function vu(a,f,d){gu(a,f),0<d.length&&(a.i=null,a.g.set(yr(a,f),g(d)),a.h+=d.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],f=Array.from(this.g.keys());for(var d=0;d<f.length;d++){var E=f[d];const N=encodeURIComponent(String(E)),U=this.V(E);for(E=0;E<U.length;E++){var D=N;U[E]!==""&&(D+="="+encodeURIComponent(String(U[E]))),a.push(D)}}return this.i=a.join("&")};function yr(a,f){return f=String(f),a.j&&(f=f.toLowerCase()),f}function d_(a,f){f&&!a.j&&(In(a),a.i=null,a.g.forEach(function(d,E){var D=E.toLowerCase();E!=D&&(gu(this,E),vu(this,D,d))},a)),a.j=f}function __(a,f){const d=new ri;if(l.Image){const E=new Image;E.onload=m(An,d,"TestLoadImage: loaded",!0,f,E),E.onerror=m(An,d,"TestLoadImage: error",!1,f,E),E.onabort=m(An,d,"TestLoadImage: abort",!1,f,E),E.ontimeout=m(An,d,"TestLoadImage: timeout",!1,f,E),l.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=a}else f(!1)}function p_(a,f){const d=new ri,E=new AbortController,D=setTimeout(()=>{E.abort(),An(d,"TestPingServer: timeout",!1,f)},1e4);fetch(a,{signal:E.signal}).then(N=>{clearTimeout(D),N.ok?An(d,"TestPingServer: ok",!0,f):An(d,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(D),An(d,"TestPingServer: error",!1,f)})}function An(a,f,d,E,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),E(d)}catch{}}function m_(){this.g=new Jd}function g_(a,f,d){const E=d||"";try{du(a,function(D,N){let U=D;c(D)&&(U=vo(D)),f.push(E+N+"="+encodeURIComponent(U))})}catch(D){throw f.push(E+"type="+encodeURIComponent("_badmap")),D}}function li(a){this.l=a.Ub||null,this.j=a.eb||!1}T(li,To),li.prototype.g=function(){return new fs(this.l,this.j)},li.prototype.i=function(a){return function(){return a}}({});function fs(a,f){Lt.call(this),this.D=a,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(fs,Lt),i=fs.prototype,i.open=function(a,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=f,this.readyState=1,ci(this)},i.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(f.body=a),(this.D||l).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ui(this)),this.readyState=0},i.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ci(this)),this.g&&(this.readyState=3,ci(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tu(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tu(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}i.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var f=a.value?a.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!a.done}))&&(this.response=this.responseText+=f)}a.done?ui(this):ci(this),this.readyState==3&&Tu(this)}},i.Ra=function(a){this.g&&(this.response=this.responseText=a,ui(this))},i.Qa=function(a){this.g&&(this.response=a,ui(this))},i.ga=function(){this.g&&ui(this)};function ui(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ci(a)}i.setRequestHeader=function(a,f){this.u.append(a,f)},i.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],f=this.h.entries();for(var d=f.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=f.next();return a.join(`\r
`)};function ci(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(fs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Eu(a){let f="";return O(a,function(d,E){f+=E,f+=":",f+=d,f+=`\r
`}),f}function Do(a,f,d){t:{for(E in d){var E=!1;break t}E=!0}E||(d=Eu(d),typeof a=="string"?d!=null&&encodeURIComponent(String(d)):Rt(a,f,d))}function Nt(a){Lt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Nt,Lt);var y_=/^https?$/i,v_=["POST","PUT"];i=Nt.prototype,i.Ha=function(a){this.J=a},i.ea=function(a,f,d,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);f=f?f.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Io.g(),this.v=this.o?Xl(this.o):Xl(Io),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(a),!0),this.B=!1}catch(N){wu(this,N);return}if(a=d||"",d=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var D in E)d.set(D,E[D]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const N of E.keys())d.set(N,E.get(N));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(d.keys()).find(N=>N.toLowerCase()=="content-type"),D=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(v_,f,void 0))||E||D||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,U]of d)this.g.setRequestHeader(N,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bu(this),this.u=!0,this.g.send(a),this.u=!1}catch(N){wu(this,N)}};function wu(a,f){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=f,a.m=5,Iu(a),ds(a)}function Iu(a){a.A||(a.A=!0,zt(a,"complete"),zt(a,"error"))}i.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,zt(this,"complete"),zt(this,"abort"),ds(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ds(this,!0)),Nt.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Au(this):this.bb())},i.bb=function(){Au(this)};function Au(a){if(a.h&&typeof o<"u"&&(!a.v[1]||dn(a)!=4||a.Z()!=2)){if(a.u&&dn(a)==4)mr(a.Ea,0,a);else if(zt(a,"readystatechange"),dn(a)==4){a.h=!1;try{const U=a.Z();t:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break t;default:f=!1}var d;if(!(d=f)){var E;if(E=U===0){var D=String(a.D).match(_u)[1]||null;!D&&l.self&&l.self.location&&(D=l.self.location.protocol.slice(0,-1)),E=!y_.test(D?D.toLowerCase():"")}d=E}if(d)zt(a,"complete"),zt(a,"success");else{a.m=6;try{var N=2<dn(a)?a.g.statusText:""}catch{N=""}a.l=N+" ["+a.Z()+"]",Iu(a)}}finally{ds(a)}}}}function ds(a,f){if(a.g){bu(a);const d=a.g,E=a.v[0]?()=>{}:null;a.g=null,a.v=null,f||zt(a,"ready");try{d.onreadystatechange=E}catch{}}}function bu(a){a.I&&(l.clearTimeout(a.I),a.I=null)}i.isActive=function(){return!!this.g};function dn(a){return a.g?a.g.readyState:0}i.Z=function(){try{return 2<dn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(a){if(this.g){var f=this.g.responseText;return a&&f.indexOf(a)==0&&(f=f.substring(a.length)),Yd(f)}};function Ru(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function T_(a){const f={};a=(a.g&&2<=dn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<a.length;E++){if(S(a[E]))continue;var d=R(a[E]);const D=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const N=f[D]||[];f[D]=N,N.push(d)}w(f,function(E){return E.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function hi(a,f,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||f}function Pu(a){this.Aa=0,this.i=[],this.j=new ri,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hi("baseRetryDelayMs",5e3,a),this.cb=hi("retryDelaySeedMs",1e4,a),this.Wa=hi("forwardChannelMaxRetries",2,a),this.wa=hi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new lu(a&&a.concurrentRequestLimit),this.Da=new m_,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Pu.prototype,i.la=8,i.G=1,i.connect=function(a,f,d,E){fe(0),this.W=a,this.H=f||{},d&&E!==void 0&&(this.H.OSID=d,this.H.OAID=E),this.F=this.X,this.I=Mu(this,null,this.W),ps(this)};function Vo(a){if(Su(a),a.G==3){var f=a.U++,d=fn(a.I);if(Rt(d,"SID",a.K),Rt(d,"RID",f),Rt(d,"TYPE","terminate"),fi(a,d),f=new wn(a,a.j,f),f.L=2,f.v=hs(fn(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(f.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=f.v,d=!0),d||(f.g=Fu(f.j,null),f.g.ea(f.v)),f.F=Date.now(),ls(f)}Ou(a)}function _s(a){a.g&&(xo(a),a.g.cancel(),a.g=null)}function Su(a){_s(a),a.u&&(l.clearTimeout(a.u),a.u=null),ms(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function ps(a){if(!uu(a.h)&&!a.s){a.s=!0;var f=a.Ga;lt||Oe(),Ct||(lt(),Ct=!0),Ie.add(f,a),a.B=0}}function E_(a,f){return cu(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=f.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=ni(p(a.Ga,a,f),Nu(a,a.B)),a.B++,!0)}i.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const D=new wn(this,this.j,a);let N=this.o;if(this.S&&(N?(N=v(N),b(N,this.S)):N=this.S),this.m!==null||this.O||(D.H=N,N=null),this.P)t:{for(var f=0,d=0;d<this.i.length;d++){e:{var E=this.i[d];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break e}E=void 0}if(E===void 0)break;if(f+=E,4096<f){f=d;break t}if(f===4096||d===this.i.length-1){f=d+1;break t}}f=1e3}else f=1e3;f=Du(this,D,f),d=fn(this.I),Rt(d,"RID",a),Rt(d,"CVER",22),this.D&&Rt(d,"X-HTTP-Session-Id",this.D),fi(this,d),N&&(this.O?f="headers="+encodeURIComponent(String(Eu(N)))+"&"+f:this.m&&Do(d,this.m,N)),Co(this.h,D),this.Ua&&Rt(d,"TYPE","init"),this.P?(Rt(d,"$req",f),Rt(d,"SID","null"),D.T=!0,bo(D,d,null)):bo(D,d,f),this.G=2}}else this.G==3&&(a?Cu(this,a):this.i.length==0||uu(this.h)||Cu(this))};function Cu(a,f){var d;f?d=f.l:d=a.U++;const E=fn(a.I);Rt(E,"SID",a.K),Rt(E,"RID",d),Rt(E,"AID",a.T),fi(a,E),a.m&&a.o&&Do(E,a.m,a.o),d=new wn(a,a.j,d,a.B+1),a.m===null&&(d.H=a.o),f&&(a.i=f.D.concat(a.i)),f=Du(a,d,1e3),d.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Co(a.h,d),bo(d,E,f)}function fi(a,f){a.H&&O(a.H,function(d,E){Rt(f,E,d)}),a.l&&du({},function(d,E){Rt(f,E,d)})}function Du(a,f,d){d=Math.min(a.i.length,d);var E=a.l?p(a.l.Na,a.l,a):null;t:{var D=a.i;let N=-1;for(;;){const U=["count="+d];N==-1?0<d?(N=D[0].g,U.push("ofs="+N)):N=0:U.push("ofs="+N);let pt=!0;for(let Xt=0;Xt<d;Xt++){let ft=D[Xt].g;const re=D[Xt].map;if(ft-=N,0>ft)N=Math.max(0,D[Xt].g-100),pt=!1;else try{g_(re,U,"req"+ft+"_")}catch{E&&E(re)}}if(pt){E=U.join("&");break t}}}return a=a.i.splice(0,d),f.D=a,E}function Vu(a){if(!a.g&&!a.u){a.Y=1;var f=a.Fa;lt||Oe(),Ct||(lt(),Ct=!0),Ie.add(f,a),a.v=0}}function ko(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=ni(p(a.Fa,a),Nu(a,a.v)),a.v++,!0)}i.Fa=function(){if(this.u=null,ku(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=ni(p(this.ab,this),a)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,fe(10),_s(this),ku(this))};function xo(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function ku(a){a.g=new wn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var f=fn(a.qa);Rt(f,"RID","rpc"),Rt(f,"SID",a.K),Rt(f,"AID",a.T),Rt(f,"CI",a.F?"0":"1"),!a.F&&a.ja&&Rt(f,"TO",a.ja),Rt(f,"TYPE","xmlhttp"),fi(a,f),a.m&&a.o&&Do(f,a.m,a.o),a.L&&(a.g.I=a.L);var d=a.g;a=a.ia,d.L=1,d.v=hs(fn(f)),d.m=null,d.P=!0,su(d,a)}i.Za=function(){this.C!=null&&(this.C=null,_s(this),ko(this),fe(19))};function ms(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function xu(a,f){var d=null;if(a.g==f){ms(a),xo(a),a.g=null;var E=2}else if(So(a.h,f))d=f.D,hu(a.h,f),E=1;else return;if(a.G!=0){if(f.o)if(E==1){d=f.m?f.m.length:0,f=Date.now()-f.F;var D=a.B;E=ss(),zt(E,new eu(E,d)),ps(a)}else Vu(a);else if(D=f.s,D==3||D==0&&0<f.X||!(E==1&&E_(a,f)||E==2&&ko(a)))switch(d&&0<d.length&&(f=a.h,f.i=f.i.concat(d)),D){case 1:Hn(a,5);break;case 4:Hn(a,10);break;case 3:Hn(a,6);break;default:Hn(a,2)}}}function Nu(a,f){let d=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(d*=2),d*f}function Hn(a,f){if(a.j.info("Error code "+f),f==2){var d=p(a.fb,a),E=a.Xa;const D=!E;E=new Kn(E||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||us(E,"https"),hs(E),D?__(E.toString(),d):p_(E.toString(),d)}else fe(2);a.G=0,a.l&&a.l.sa(f),Ou(a),Su(a)}i.fb=function(a){a?(this.j.info("Successfully pinged google.com"),fe(2)):(this.j.info("Failed to ping google.com"),fe(1))};function Ou(a){if(a.G=0,a.ka=[],a.l){const f=fu(a.h);(f.length!=0||a.i.length!=0)&&(I(a.ka,f),I(a.ka,a.i),a.h.i.length=0,g(a.i),a.i.length=0),a.l.ra()}}function Mu(a,f,d){var E=d instanceof Kn?fn(d):new Kn(d);if(E.g!="")f&&(E.g=f+"."+E.g),cs(E,E.s);else{var D=l.location;E=D.protocol,f=f?f+"."+D.hostname:D.hostname,D=+D.port;var N=new Kn(null);E&&us(N,E),f&&(N.g=f),D&&cs(N,D),d&&(N.l=d),E=N}return d=a.D,f=a.ya,d&&f&&Rt(E,d,f),Rt(E,"VER",a.la),fi(a,E),E}function Fu(a,f,d){if(f&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=a.Ca&&!a.pa?new Nt(new li({eb:d})):new Nt(a.pa),f.Ha(a.J),f}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Lu(){}i=Lu.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function gs(){}gs.prototype.g=function(a,f){return new Re(a,f)};function Re(a,f){Lt.call(this),this.g=new Pu(f),this.l=a,this.h=f&&f.messageUrlParams||null,a=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(a?a["X-WebChannel-Content-Type"]=f.messageContentType:a={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(a?a["X-WebChannel-Client-Profile"]=f.va:a={"X-WebChannel-Client-Profile":f.va}),this.g.S=a,(a=f&&f.Sb)&&!S(a)&&(this.g.m=a),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!S(f)&&(this.g.D=f,a=this.h,a!==null&&f in a&&(a=this.h,f in a&&delete a[f])),this.j=new vr(this)}T(Re,Lt),Re.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Re.prototype.close=function(){Vo(this.g)},Re.prototype.o=function(a){var f=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.u&&(d={},d.__data__=vo(a),a=d);f.i.push(new i_(f.Ya++,a)),f.G==3&&ps(f)},Re.prototype.N=function(){this.g.l=null,delete this.j,Vo(this.g),delete this.g,Re.aa.N.call(this)};function $u(a){Eo.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var f=a.__sm__;if(f){t:{for(const d in f){a=d;break t}a=void 0}(this.i=a)&&(a=this.i,f=f!==null&&a in f?f[a]:void 0),this.data=f}else this.data=a}T($u,Eo);function Uu(){wo.call(this),this.status=1}T(Uu,wo);function vr(a){this.g=a}T(vr,Lu),vr.prototype.ua=function(){zt(this.g,"a")},vr.prototype.ta=function(a){zt(this.g,new $u(a))},vr.prototype.sa=function(a){zt(this.g,new Uu)},vr.prototype.ra=function(){zt(this.g,"b")},gs.prototype.createWebChannel=gs.prototype.g,Re.prototype.send=Re.prototype.o,Re.prototype.open=Re.prototype.m,Re.prototype.close=Re.prototype.close,Dh=function(){return new gs},Ch=function(){return ss()},Sh=qn,la={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},os.NO_ERROR=0,os.TIMEOUT=8,os.HTTP_ERROR=6,bs=os,nu.COMPLETE="complete",Ph=nu,Yl.EventType=ti,ti.OPEN="a",ti.CLOSE="b",ti.ERROR="c",ti.MESSAGE="d",Lt.prototype.listen=Lt.prototype.K,pi=Yl,Rh=li,Nt.prototype.listenOnce=Nt.prototype.L,Nt.prototype.getLastError=Nt.prototype.Ka,Nt.prototype.getLastErrorCode=Nt.prototype.Ba,Nt.prototype.getStatus=Nt.prototype.Z,Nt.prototype.getResponseJson=Nt.prototype.Oa,Nt.prototype.getResponseText=Nt.prototype.oa,Nt.prototype.send=Nt.prototype.ea,Nt.prototype.setWithCredentials=Nt.prototype.Ha,bh=Nt}).apply(typeof Ts<"u"?Ts:typeof self<"u"?self:typeof window<"u"?window:{});const oc="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}oe.UNAUTHENTICATED=new oe(null),oe.GOOGLE_CREDENTIALS=new oe("google-credentials-uid"),oe.FIRST_PARTY=new oe("first-party-uid"),oe.MOCK_USER=new oe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wr="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or=new yh("@firebase/firestore");function di(){return or.logLevel}function z(i,...t){if(or.logLevel<=ht.DEBUG){const e=t.map(Qa);or.debug(`Firestore (${Wr}): ${i}`,...e)}}function gn(i,...t){if(or.logLevel<=ht.ERROR){const e=t.map(Qa);or.error(`Firestore (${Wr}): ${i}`,...e)}}function xr(i,...t){if(or.logLevel<=ht.WARN){const e=t.map(Qa);or.warn(`Firestore (${Wr}): ${i}`,...e)}}function Qa(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(i="Unexpected state"){const t=`FIRESTORE (${Wr}) INTERNAL ASSERTION FAILED: `+i;throw gn(t),new Error(t)}function It(i,t){i||Y()}function nt(i,t){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends Hr{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class _m{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(oe.UNAUTHENTICATED))}shutdown(){}}class pm{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class mm{constructor(t){this.t=t,this.currentUser=oe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const r=u=>this.i!==n?(n=this.i,e(u)):Promise.resolve();let s=new mn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new mn,t.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new mn)}},0),o()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(n=>this.i!==t?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(It(typeof n.accessToken=="string"),new Vh(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return It(t===null||typeof t=="string"),new oe(t)}}class gm{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=oe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ym{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new gm(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(oe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vm{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Tm{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=s=>{s.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};const r=s=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(It(typeof e.token=="string"),this.R=e.token,new vm(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(i){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(i);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let n=0;n<i;n++)e[n]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const r=Em(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<e&&(n+=t.charAt(r[s]%t.length))}return n}}function dt(i,t){return i<t?-1:i>t?1:0}function Nr(i,t,e){return i.length===t.length&&i.every((n,r)=>e(n,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new q(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new q(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new q(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new q(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Gt.fromMillis(Date.now())}static fromDate(t){return Gt.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Gt(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?dt(this.nanoseconds,t.nanoseconds):dt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Z(t)}static min(){return new Z(new Gt(0,0))}static max(){return new Z(new Gt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(t,e,n){e===void 0?e=0:e>t.length&&Y(),n===void 0?n=t.length-e:n>t.length-e&&Y(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return xi.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof xi?t.forEach(n=>{e.push(n)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.get(r),o=e.get(r);if(s<o)return-1;if(s>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Pt extends xi{construct(t,e,n){return new Pt(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new q(L.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter(r=>r.length>0))}return new Pt(e)}static emptyPath(){return new Pt([])}}const wm=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jt extends xi{construct(t,e,n){return new Jt(t,e,n)}static isValidIdentifier(t){return wm.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Jt(["__name__"])}static fromServerFormat(t){const e=[];let n="",r=0;const s=()=>{if(n.length===0)throw new q(L.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let o=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new q(L.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new q(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=u,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(n+=l,r++):(s(),r++)}if(s(),o)throw new q(L.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Jt(e)}static emptyPath(){return new Jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(t){this.path=t}static fromPath(t){return new H(Pt.fromString(t))}static fromName(t){return new H(Pt.fromString(t).popFirst(5))}static empty(){return new H(Pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Pt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Pt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new H(new Pt(t.slice()))}}function Im(i,t){const e=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,r=Z.fromTimestamp(n===1e9?new Gt(e+1,0):new Gt(e,n));return new Mn(r,H.empty(),t)}function Am(i){return new Mn(i.readTime,i.key,-1)}class Mn{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new Mn(Z.min(),H.empty(),-1)}static max(){return new Mn(Z.max(),H.empty(),-1)}}function bm(i,t){let e=i.readTime.compareTo(t.readTime);return e!==0?e:(e=H.comparator(i.documentKey,t.documentKey),e!==0?e:dt(i.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Pm{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wi(i){if(i.code!==L.FAILED_PRECONDITION||i.message!==Rm)throw i;z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new $((n,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(n,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof $?e:$.resolve(e)}catch(e){return $.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):$.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):$.reject(e)}static resolve(t){return new $((e,n)=>{e(t)})}static reject(t){return new $((e,n)=>{n(t)})}static waitFor(t){return new $((e,n)=>{let r=0,s=0,o=!1;t.forEach(l=>{++r,l.next(()=>{++s,o&&s===r&&e()},u=>n(u))}),o=!0,s===r&&e()})}static or(t){let e=$.resolve(!1);for(const n of t)e=e.next(r=>r?$.resolve(r):n());return e}static forEach(t,e){const n=[];return t.forEach((r,s)=>{n.push(e.call(this,r,s))}),this.waitFor(n)}static mapArray(t,e){return new $((n,r)=>{const s=t.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const c=u;e(t[c]).next(h=>{o[c]=h,++l,l===s&&n(o)},h=>r(h))}})}static doWhile(t,e){return new $((n,r)=>{const s=()=>{t()===!0?e().next(()=>{s()},r):n()};s()})}}function Sm(i){const t=i.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Qi(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=n=>this.ie(n),this.se=n=>e.writeSequenceNumber(n))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}Xa.oe=-1;function eo(i){return i==null}function Ls(i){return i===0&&1/i==-1/0}function Cm(i){return typeof i=="number"&&Number.isInteger(i)&&!Ls(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ac(i){let t=0;for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t++;return t}function hr(i,t){for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t(e,i[e])}function xh(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(t,e){this.comparator=t,this.root=e||Yt.EMPTY}insert(t,e){return new xt(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Yt.BLACK,null,null))}remove(t){return new xt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Yt.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(n===0)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,n)=>(t(e,n),!1))}toString(){const t=[];return this.inorderTraversal((e,n)=>(t.push(`${e}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Es(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Es(this.root,t,this.comparator,!1)}getReverseIterator(){return new Es(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Es(this.root,t,this.comparator,!0)}}class Es{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?n(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Yt{constructor(t,e,n,r,s){this.key=t,this.value=e,this.color=n??Yt.RED,this.left=r??Yt.EMPTY,this.right=s??Yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,s){return new Yt(t??this.key,e??this.value,n??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const s=n(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,n),null):s===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Yt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return Yt.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const t=this.left.check();if(t!==this.right.check())throw Y();return t+(this.isRed()?0:1)}}Yt.EMPTY=null,Yt.RED=!0,Yt.BLACK=!1;Yt.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(t,e,n,r,s){return this}insert(t,e,n){return new Yt(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(t){this.comparator=t,this.data=new xt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,n)=>(t(e),!1))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new lc(this.data.getIterator())}getIteratorFrom(t){return new lc(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(n=>{e=e.add(n)}),e}isEqual(t){if(!(t instanceof Zt)||this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=n.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new Zt(this.comparator);return e.data=t,e}}class lc{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(t){this.fields=t,t.sort(Jt.comparator)}static empty(){return new Ce([])}unionWith(t){let e=new Zt(Jt.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new Ce(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Nr(this.fields,t.fields,(e,n)=>e.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Nh("Invalid base64 string: "+s):s}}(t);return new he(e)}static fromUint8Array(t){const e=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new he(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return dt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}he.EMPTY_BYTE_STRING=new he("");const Dm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fn(i){if(It(!!i),typeof i=="string"){let t=0;const e=Dm.exec(i);if(It(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Ut(i.seconds),nanos:Ut(i.nanos)}}function Ut(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ar(i){return typeof i=="string"?he.fromBase64String(i):he.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(i){var t,e;return((e=(((t=i==null?void 0:i.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function Ja(i){const t=i.mapValue.fields.__previous_value__;return Ya(t)?Ja(t):t}function Ni(i){const t=Fn(i.mapValue.fields.__local_write_time__.timestampValue);return new Gt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(t,e,n,r,s,o,l,u,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}class Oi{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Oi("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Oi&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function lr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Ya(i)?4:km(i)?9007199254740991:10:Y()}function on(i,t){if(i===t)return!0;const e=lr(i);if(e!==lr(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return Ni(i).isEqual(Ni(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Fn(r.timestampValue),l=Fn(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(i,t);case 5:return i.stringValue===t.stringValue;case 6:return function(r,s){return ar(r.bytesValue).isEqual(ar(s.bytesValue))}(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return function(r,s){return Ut(r.geoPointValue.latitude)===Ut(s.geoPointValue.latitude)&&Ut(r.geoPointValue.longitude)===Ut(s.geoPointValue.longitude)}(i,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ut(r.integerValue)===Ut(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Ut(r.doubleValue),l=Ut(s.doubleValue);return o===l?Ls(o)===Ls(l):isNaN(o)&&isNaN(l)}return!1}(i,t);case 9:return Nr(i.arrayValue.values||[],t.arrayValue.values||[],on);case 10:return function(r,s){const o=r.mapValue.fields||{},l=s.mapValue.fields||{};if(ac(o)!==ac(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!on(o[u],l[u])))return!1;return!0}(i,t);default:return Y()}}function Mi(i,t){return(i.values||[]).find(e=>on(e,t))!==void 0}function Or(i,t){if(i===t)return 0;const e=lr(i),n=lr(t);if(e!==n)return dt(e,n);switch(e){case 0:case 9007199254740991:return 0;case 1:return dt(i.booleanValue,t.booleanValue);case 2:return function(s,o){const l=Ut(s.integerValue||s.doubleValue),u=Ut(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(i,t);case 3:return uc(i.timestampValue,t.timestampValue);case 4:return uc(Ni(i),Ni(t));case 5:return dt(i.stringValue,t.stringValue);case 6:return function(s,o){const l=ar(s),u=ar(o);return l.compareTo(u)}(i.bytesValue,t.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const h=dt(l[c],u[c]);if(h!==0)return h}return dt(l.length,u.length)}(i.referenceValue,t.referenceValue);case 8:return function(s,o){const l=dt(Ut(s.latitude),Ut(o.latitude));return l!==0?l:dt(Ut(s.longitude),Ut(o.longitude))}(i.geoPointValue,t.geoPointValue);case 9:return function(s,o){const l=s.values||[],u=o.values||[];for(let c=0;c<l.length&&c<u.length;++c){const h=Or(l[c],u[c]);if(h)return h}return dt(l.length,u.length)}(i.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===ws.mapValue&&o===ws.mapValue)return 0;if(s===ws.mapValue)return 1;if(o===ws.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let _=0;_<u.length&&_<h.length;++_){const p=dt(u[_],h[_]);if(p!==0)return p;const m=Or(l[u[_]],c[h[_]]);if(m!==0)return m}return dt(u.length,h.length)}(i.mapValue,t.mapValue);default:throw Y()}}function uc(i,t){if(typeof i=="string"&&typeof t=="string"&&i.length===t.length)return dt(i,t);const e=Fn(i),n=Fn(t),r=dt(e.seconds,n.seconds);return r!==0?r:dt(e.nanos,n.nanos)}function Mr(i){return ua(i)}function ua(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(e){const n=Fn(e);return`time(${n.seconds},${n.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(e){return ar(e).toBase64()}(i.bytesValue):"referenceValue"in i?function(e){return H.fromName(e).toString()}(i.referenceValue):"geoPointValue"in i?function(e){return`geo(${e.latitude},${e.longitude})`}(i.geoPointValue):"arrayValue"in i?function(e){let n="[",r=!0;for(const s of e.values||[])r?r=!1:n+=",",n+=ua(s);return n+"]"}(i.arrayValue):"mapValue"in i?function(e){const n=Object.keys(e.fields||{}).sort();let r="{",s=!0;for(const o of n)s?s=!1:r+=",",r+=`${o}:${ua(e.fields[o])}`;return r+"}"}(i.mapValue):Y()}function ca(i){return!!i&&"integerValue"in i}function Za(i){return!!i&&"arrayValue"in i}function cc(i){return!!i&&"nullValue"in i}function hc(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Rs(i){return!!i&&"mapValue"in i}function Ei(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const t={mapValue:{fields:{}}};return hr(i.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Ei(n)),t}if(i.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(i.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Ei(i.arrayValue.values[e]);return t}return Object.assign({},i)}function km(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(t){this.value=t}static empty(){return new me({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Rs(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ei(e)}setAll(t){let e=Jt.emptyPath(),n={},r=[];t.forEach((o,l)=>{if(!e.isImmediateParentOf(l)){const u=this.getFieldsMap(e);this.applyChanges(u,n,r),n={},r=[],e=l.popLast()}o?n[l.lastSegment()]=Ei(o):r.push(l.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,n,r)}delete(t){const e=this.field(t.popLast());Rs(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return on(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];Rs(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){hr(e,(r,s)=>t[r]=s);for(const r of n)delete t[r]}clone(){return new me(Ei(this.value))}}function Oh(i){const t=[];return hr(i.fields,(e,n)=>{const r=new Jt([e]);if(Rs(n)){const s=Oh(n.mapValue).fields;if(s.length===0)t.push(r);else for(const o of s)t.push(r.child(o))}else t.push(r)}),new Ce(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t,e,n,r,s,o,l){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(t){return new ae(t,0,Z.min(),Z.min(),Z.min(),me.empty(),0)}static newFoundDocument(t,e,n,r){return new ae(t,1,e,Z.min(),n,r,0)}static newNoDocument(t,e){return new ae(t,2,e,Z.min(),Z.min(),me.empty(),0)}static newUnknownDocument(t,e){return new ae(t,3,e,Z.min(),Z.min(),me.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=me.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=me.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ae&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ae(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(t,e){this.position=t,this.inclusive=e}}function fc(i,t,e){let n=0;for(let r=0;r<i.position.length;r++){const s=t[r],o=i.position[r];if(s.field.isKeyField()?n=H.comparator(H.fromName(o.referenceValue),e.key):n=Or(o,e.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function dc(i,t){if(i===null)return t===null;if(t===null||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let e=0;e<i.position.length;e++)if(!on(i.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(t,e="asc"){this.field=t,this.dir=e}}function xm(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{}class qt extends Mh{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,n):new Om(t,e,n):e==="array-contains"?new Lm(t,n):e==="in"?new $m(t,n):e==="not-in"?new Um(t,n):e==="array-contains-any"?new Bm(t,n):new qt(t,e,n)}static createKeyFieldInFilter(t,e,n){return e==="in"?new Mm(t,n):new Fm(t,n)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(Or(e,this.value)):e!==null&&lr(this.value)===lr(e)&&this.matchesComparison(Or(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class an extends Mh{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new an(t,e)}matches(t){return Fh(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Fh(i){return i.op==="and"}function Lh(i){return Nm(i)&&Fh(i)}function Nm(i){for(const t of i.filters)if(t instanceof an)return!1;return!0}function ha(i){if(i instanceof qt)return i.field.canonicalString()+i.op.toString()+Mr(i.value);if(Lh(i))return i.filters.map(t=>ha(t)).join(",");{const t=i.filters.map(e=>ha(e)).join(",");return`${i.op}(${t})`}}function $h(i,t){return i instanceof qt?function(n,r){return r instanceof qt&&n.op===r.op&&n.field.isEqual(r.field)&&on(n.value,r.value)}(i,t):i instanceof an?function(n,r){return r instanceof an&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((s,o,l)=>s&&$h(o,r.filters[l]),!0):!1}(i,t):void Y()}function Uh(i){return i instanceof qt?function(e){return`${e.field.canonicalString()} ${e.op} ${Mr(e.value)}`}(i):i instanceof an?function(e){return e.op.toString()+" {"+e.getFilters().map(Uh).join(" ,")+"}"}(i):"Filter"}class Om extends qt{constructor(t,e,n){super(t,e,n),this.key=H.fromName(n.referenceValue)}matches(t){const e=H.comparator(t.key,this.key);return this.matchesComparison(e)}}class Mm extends qt{constructor(t,e){super(t,"in",e),this.keys=Bh("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class Fm extends qt{constructor(t,e){super(t,"not-in",e),this.keys=Bh("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Bh(i,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(n=>H.fromName(n.referenceValue))}class Lm extends qt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Za(e)&&Mi(e.arrayValue,this.value)}}class $m extends qt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Mi(this.value.arrayValue,e)}}class Um extends qt{constructor(t,e){super(t,"not-in",e)}matches(t){if(Mi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!Mi(this.value.arrayValue,e)}}class Bm extends qt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Za(e)||!e.arrayValue.values)&&e.arrayValue.values.some(n=>Mi(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(t,e=null,n=[],r=[],s=null,o=null,l=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function _c(i,t=null,e=[],n=[],r=null,s=null,o=null){return new jm(i,t,e,n,r,s,o)}function tl(i){const t=nt(i);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(n=>ha(n)).join(","),e+="|ob:",e+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),eo(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>Mr(n)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>Mr(n)).join(",")),t.ue=e}return t.ue}function el(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<i.orderBy.length;e++)if(!xm(i.orderBy[e],t.orderBy[e]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let e=0;e<i.filters.length;e++)if(!$h(i.filters[e],t.filters[e]))return!1;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!dc(i.startAt,t.startAt)&&dc(i.endAt,t.endAt)}function fa(i){return H.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(t,e=null,n=[],r=[],s=null,o="F",l=null,u=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function zm(i,t,e,n,r,s,o,l){return new no(i,t,e,n,r,s,o,l)}function ro(i){return new no(i)}function pc(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function qm(i){return i.collectionGroup!==null}function wi(i){const t=nt(i);if(t.ce===null){t.ce=[];const e=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Zt(Jt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.ce.push(new Us(s,n))}),e.has(Jt.keyField().canonicalString())||t.ce.push(new Us(Jt.keyField(),n))}return t.ce}function en(i){const t=nt(i);return t.le||(t.le=Gm(t,wi(i))),t.le}function Gm(i,t){if(i.limitType==="F")return _c(i.path,i.collectionGroup,t,i.filters,i.limit,i.startAt,i.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Us(r.field,s)});const e=i.endAt?new $s(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new $s(i.startAt.position,i.startAt.inclusive):null;return _c(i.path,i.collectionGroup,t,i.filters,i.limit,e,n)}}function da(i,t,e){return new no(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,e,i.startAt,i.endAt)}function io(i,t){return el(en(i),en(t))&&i.limitType===t.limitType}function jh(i){return`${tl(en(i))}|lt:${i.limitType}`}function wr(i){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>Uh(r)).join(", ")}]`),eo(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Mr(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Mr(r)).join(",")),`Target(${n})`}(en(i))}; limitType=${i.limitType})`}function so(i,t){return t.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):H.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(i,t)&&function(n,r){for(const s of wi(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(i,t)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(i,t)&&function(n,r){return!(n.startAt&&!function(o,l,u){const c=fc(o,l,u);return o.inclusive?c<=0:c<0}(n.startAt,wi(n),r)||n.endAt&&!function(o,l,u){const c=fc(o,l,u);return o.inclusive?c>=0:c>0}(n.endAt,wi(n),r))}(i,t)}function Km(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function zh(i){return(t,e)=>{let n=!1;for(const r of wi(i)){const s=Hm(r,t,e);if(s!==0)return s;n=n||r.field.isKeyField()}return 0}}function Hm(i,t,e){const n=i.field.isKeyField()?H.comparator(t.key,e.key):function(s,o,l){const u=o.data.field(s),c=l.data.field(s);return u!==null&&c!==null?Or(u,c):Y()}(i.field,t,e);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return Y()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(n!==void 0){for(const[r,s]of n)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return this.inner[n]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return n.length===1?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){hr(this.inner,(e,n)=>{for(const[r,s]of n)t(r,s)})}isEmpty(){return xh(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm=new xt(H.comparator);function yn(){return Wm}const qh=new xt(H.comparator);function mi(...i){let t=qh;for(const e of i)t=t.insert(e.key,e);return t}function Gh(i){let t=qh;return i.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Jn(){return Ii()}function Kh(){return Ii()}function Ii(){return new Qr(i=>i.toString(),(i,t)=>i.isEqual(t))}const Qm=new xt(H.comparator),Xm=new Zt(H.comparator);function ot(...i){let t=Xm;for(const e of i)t=t.add(e);return t}const Ym=new Zt(dt);function Jm(){return Ym}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(i,t){if(i.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ls(t)?"-0":t}}function Wh(i){return{integerValue:""+i}}function Zm(i,t){return Cm(t)?Wh(t):Hh(i,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(){this._=void 0}}function tg(i,t,e){return i instanceof Bs?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Ya(s)&&(s=Ja(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(e,t):i instanceof Fi?Xh(i,t):i instanceof Li?Yh(i,t):function(r,s){const o=Qh(r,s),l=mc(o)+mc(r.Pe);return ca(o)&&ca(r.Pe)?Wh(l):Hh(r.serializer,l)}(i,t)}function eg(i,t,e){return i instanceof Fi?Xh(i,t):i instanceof Li?Yh(i,t):e}function Qh(i,t){return i instanceof js?function(n){return ca(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}class Bs extends oo{}class Fi extends oo{constructor(t){super(),this.elements=t}}function Xh(i,t){const e=Jh(t);for(const n of i.elements)e.some(r=>on(r,n))||e.push(n);return{arrayValue:{values:e}}}class Li extends oo{constructor(t){super(),this.elements=t}}function Yh(i,t){let e=Jh(t);for(const n of i.elements)e=e.filter(r=>!on(r,n));return{arrayValue:{values:e}}}class js extends oo{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function mc(i){return Ut(i.integerValue||i.doubleValue)}function Jh(i){return Za(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function ng(i,t){return i.field.isEqual(t.field)&&function(n,r){return n instanceof Fi&&r instanceof Fi||n instanceof Li&&r instanceof Li?Nr(n.elements,r.elements,on):n instanceof js&&r instanceof js?on(n.Pe,r.Pe):n instanceof Bs&&r instanceof Bs}(i.transform,t.transform)}class rg{constructor(t,e){this.version=t,this.transformResults=e}}class Ve{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ve}static exists(t){return new Ve(void 0,t)}static updateTime(t){return new Ve(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ps(i,t){return i.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(i.updateTime):i.exists===void 0||i.exists===t.isFoundDocument()}class ao{}function Zh(i,t){if(!i.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return i.isNoDocument()?new nl(i.key,Ve.none()):new Xi(i.key,i.data,Ve.none());{const e=i.data,n=me.empty();let r=new Zt(Jt.comparator);for(let s of t.fields)if(!r.has(s)){let o=e.field(s);o===null&&s.length>1&&(s=s.popLast(),o=e.field(s)),o===null?n.delete(s):n.set(s,o),r=r.add(s)}return new jn(i.key,n,new Ce(r.toArray()),Ve.none())}}function ig(i,t,e){i instanceof Xi?function(r,s,o){const l=r.value.clone(),u=yc(r.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(i,t,e):i instanceof jn?function(r,s,o){if(!Ps(r.precondition,s))return void s.convertToUnknownDocument(o.version);const l=yc(r.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(tf(r)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(i,t,e):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,e)}function Ai(i,t,e,n){return i instanceof Xi?function(s,o,l,u){if(!Ps(s.precondition,o))return l;const c=s.value.clone(),h=vc(s.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(i,t,e,n):i instanceof jn?function(s,o,l,u){if(!Ps(s.precondition,o))return l;const c=vc(s.fieldTransforms,u,o),h=o.data;return h.setAll(tf(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(_=>_.field))}(i,t,e,n):function(s,o,l){return Ps(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(i,t,e)}function sg(i,t){let e=null;for(const n of i.fieldTransforms){const r=t.data.field(n.field),s=Qh(n.transform,r||null);s!=null&&(e===null&&(e=me.empty()),e.set(n.field,s))}return e||null}function gc(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Nr(n,r,(s,o)=>ng(s,o))}(i.fieldTransforms,t.fieldTransforms)&&(i.type===0?i.value.isEqual(t.value):i.type!==1||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask))}class Xi extends ao{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class jn extends ao{constructor(t,e,n,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function tf(i){const t=new Map;return i.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const n=i.data.field(e);t.set(e,n)}}),t}function yc(i,t,e){const n=new Map;It(i.length===e.length);for(let r=0;r<e.length;r++){const s=i[r],o=s.transform,l=t.data.field(s.field);n.set(s.field,eg(o,l,e[r]))}return n}function vc(i,t,e){const n=new Map;for(const r of i){const s=r.transform,o=e.data.field(r.field);n.set(r.field,tg(s,o,t))}return n}class nl extends ao{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class og extends ao{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&ig(s,t,n[r])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Ai(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Ai(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=Kh();return this.mutations.forEach(r=>{const s=t.get(r.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=e.has(r.key)?null:l;const u=Zh(o,l);u!==null&&n.set(r.key,u),o.isValidDocument()||o.convertToNoDocument(Z.min())}),n}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),ot())}isEqual(t){return this.batchId===t.batchId&&Nr(this.mutations,t.mutations,(e,n)=>gc(e,n))&&Nr(this.baseMutations,t.baseMutations,(e,n)=>gc(e,n))}}class rl{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){It(t.mutations.length===n.length);let r=function(){return Qm}();const s=t.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,n[o].version);return new rl(t,e,n,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t,ut;function cg(i){switch(i){default:return Y();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function ef(i){if(i===void 0)return gn("GRPC error has no .code"),L.UNKNOWN;switch(i){case $t.OK:return L.OK;case $t.CANCELLED:return L.CANCELLED;case $t.UNKNOWN:return L.UNKNOWN;case $t.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case $t.INTERNAL:return L.INTERNAL;case $t.UNAVAILABLE:return L.UNAVAILABLE;case $t.UNAUTHENTICATED:return L.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case $t.NOT_FOUND:return L.NOT_FOUND;case $t.ALREADY_EXISTS:return L.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return L.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case $t.ABORTED:return L.ABORTED;case $t.OUT_OF_RANGE:return L.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return L.UNIMPLEMENTED;case $t.DATA_LOSS:return L.DATA_LOSS;default:return Y()}}(ut=$t||($t={}))[ut.OK=0]="OK",ut[ut.CANCELLED=1]="CANCELLED",ut[ut.UNKNOWN=2]="UNKNOWN",ut[ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ut[ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ut[ut.NOT_FOUND=5]="NOT_FOUND",ut[ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",ut[ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",ut[ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",ut[ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ut[ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ut[ut.ABORTED=10]="ABORTED",ut[ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",ut[ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",ut[ut.INTERNAL=13]="INTERNAL",ut[ut.UNAVAILABLE=14]="UNAVAILABLE",ut[ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg=new tr([4294967295,4294967295],0);function Tc(i){const t=hg().encode(i),e=new Ah;return e.update(t),new Uint8Array(e.digest())}function Ec(i){const t=new DataView(i.buffer),e=t.getUint32(0,!0),n=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new tr([e,n],0),new tr([r,s],0)]}class il{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new gi(`Invalid padding: ${e}`);if(n<0)throw new gi(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new gi(`Invalid hash count: ${n}`);if(t.length===0&&e!==0)throw new gi(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=tr.fromNumber(this.Ie)}Ee(t,e,n){let r=t.add(e.multiply(tr.fromNumber(n)));return r.compare(fg)===1&&(r=new tr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const e=Tc(t),[n,r]=Ec(e);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,r,s);if(!this.de(o))return!1}return!0}static create(t,e,n){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new il(s,r,e);return n.forEach(l=>o.insert(l)),o}insert(t){if(this.Ie===0)return;const e=Tc(t),[n,r]=Ec(e);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,r,s);this.Ae(o)}}Ae(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class gi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(t,e,n,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const r=new Map;return r.set(t,Yi.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new lo(Z.min(),r,new xt(dt),yn(),ot())}}class Yi{constructor(t,e,n,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new Yi(n,e,ot(),ot(),ot())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{constructor(t,e,n,r){this.Re=t,this.removedTargetIds=e,this.key=n,this.Ve=r}}class nf{constructor(t,e){this.targetId=t,this.me=e}}class rf{constructor(t,e,n=he.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class wc{constructor(){this.fe=0,this.ge=Ac(),this.pe=he.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=ot(),e=ot(),n=ot();return this.ge.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Y()}}),new Yi(this.pe,this.ye,t,e,n)}ve(){this.we=!1,this.ge=Ac()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,It(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class dg{constructor(t){this.Le=t,this.Be=new Map,this.ke=yn(),this.qe=Ic(),this.Qe=new xt(dt)}Ke(t){for(const e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(const e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{const n=this.Ge(e);switch(t.state){case 0:this.ze(e)&&n.De(t.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(t.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(n.Ne(),n.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),n.De(t.resumeToken));break;default:Y()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((n,r)=>{this.ze(r)&&e(r)})}He(t){const e=t.targetId,n=t.me.count,r=this.Je(e);if(r){const s=r.target;if(fa(s))if(n===0){const o=new H(s.path);this.Ue(e,o,ae.newNoDocument(o,Z.min()))}else It(n===1);else{const o=this.Ye(e);if(o!==n){const l=this.Ze(t),u=l?this.Xe(l,t,o):1;if(u!==0){this.je(e);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,c)}}}}}Ze(t){const e=t.me.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=e;let o,l;try{o=ar(n).toUint8Array()}catch(u){if(u instanceof Nh)return xr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new il(o,r,s)}catch(u){return xr(u instanceof gi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(t,e,n){return e.me.count===n-this.nt(t,e.targetId)?0:2}nt(t,e){const n=this.Le.getRemoteKeysForTarget(e);let r=0;return n.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.Ue(e,s,null),r++)}),r}rt(t){const e=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&fa(l.target)){const u=new H(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,ae.newNoDocument(u,t))}s.be&&(e.set(o,s.Ce()),s.ve())}});let n=ot();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const r=new lo(t,e,this.Qe,this.ke,n);return this.ke=yn(),this.qe=Ic(),this.Qe=new xt(dt),r}$e(t,e){if(!this.ze(t))return;const n=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,n),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,n){if(!this.ze(t))return;const r=this.Ge(t);this.it(t,e)?r.Fe(e,1):r.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),n&&(this.ke=this.ke.insert(e,n))}removeTarget(t){this.Be.delete(t)}Ye(t){const e=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new wc,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new Zt(dt),this.qe=this.qe.insert(t,e)),e}ze(t){const e=this.Je(t)!==null;return e||z("WatchChangeAggregator","Detected inactive target",t),e}Je(t){const e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new wc),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function Ic(){return new xt(H.comparator)}function Ac(){return new xt(H.comparator)}const _g={asc:"ASCENDING",desc:"DESCENDING"},pg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mg={and:"AND",or:"OR"};class gg{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function _a(i,t){return i.useProto3Json||eo(t)?t:{value:t}}function zs(i,t){return i.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function sf(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function yg(i,t){return zs(i,t.toTimestamp())}function nn(i){return It(!!i),Z.fromTimestamp(function(e){const n=Fn(e);return new Gt(n.seconds,n.nanos)}(i))}function sl(i,t){return pa(i,t).canonicalString()}function pa(i,t){const e=function(r){return new Pt(["projects",r.projectId,"databases",r.database])}(i).child("documents");return t===void 0?e:e.child(t)}function of(i){const t=Pt.fromString(i);return It(hf(t)),t}function ma(i,t){return sl(i.databaseId,t.path)}function Uo(i,t){const e=of(t);if(e.get(1)!==i.databaseId.projectId)throw new q(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+i.databaseId.projectId);if(e.get(3)!==i.databaseId.database)throw new q(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+i.databaseId.database);return new H(lf(e))}function af(i,t){return sl(i.databaseId,t)}function vg(i){const t=of(i);return t.length===4?Pt.emptyPath():lf(t)}function ga(i){return new Pt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function lf(i){return It(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function bc(i,t,e){return{name:ma(i,t),fields:e.value.mapValue.fields}}function Tg(i,t){let e;if("targetChange"in t){t.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Y()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(It(h===void 0||typeof h=="string"),he.fromBase64String(h||"")):(It(h===void 0||h instanceof Buffer||h instanceof Uint8Array),he.fromUint8Array(h||new Uint8Array))}(i,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(c){const h=c.code===void 0?L.UNKNOWN:ef(c.code);return new q(h,c.message||"")}(o);e=new rf(n,r,s,l||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const r=Uo(i,n.document.name),s=nn(n.document.updateTime),o=n.document.createTime?nn(n.document.createTime):Z.min(),l=new me({mapValue:{fields:n.document.fields}}),u=ae.newFoundDocument(r,s,o,l),c=n.targetIds||[],h=n.removedTargetIds||[];e=new Ss(c,h,u.key,u)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const r=Uo(i,n.document),s=n.readTime?nn(n.readTime):Z.min(),o=ae.newNoDocument(r,s),l=n.removedTargetIds||[];e=new Ss([],l,o.key,o)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const r=Uo(i,n.document),s=n.removedTargetIds||[];e=new Ss([],s,r,null)}else{if(!("filter"in t))return Y();{t.filter;const n=t.filter;n.targetId;const{count:r=0,unchangedNames:s}=n,o=new ug(r,s),l=n.targetId;e=new nf(l,o)}}return e}function Eg(i,t){let e;if(t instanceof Xi)e={update:bc(i,t.key,t.value)};else if(t instanceof nl)e={delete:ma(i,t.key)};else if(t instanceof jn)e={update:bc(i,t.key,t.data),updateMask:Dg(t.fieldMask)};else{if(!(t instanceof og))return Y();e={verify:ma(i,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(n=>function(s,o){const l=o.transform;if(l instanceof Bs)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Fi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Li)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof js)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw Y()}(0,n))),t.precondition.isNone||(e.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:yg(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Y()}(i,t.precondition)),e}function wg(i,t){return i&&i.length>0?(It(t!==void 0),i.map(e=>function(r,s){let o=r.updateTime?nn(r.updateTime):nn(s);return o.isEqual(Z.min())&&(o=nn(s)),new rg(o,r.transformResults||[])}(e,t))):[]}function Ig(i,t){return{documents:[af(i,t.path)]}}function Ag(i,t){const e={structuredQuery:{}},n=t.path;let r;t.collectionGroup!==null?(r=n,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=n.popLast(),e.structuredQuery.from=[{collectionId:n.lastSegment()}]),e.parent=af(i,r);const s=function(c){if(c.length!==0)return cf(an.create(c,"and"))}(t.filters);s&&(e.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:Ir(p.field),direction:Pg(p.dir)}}(h))}(t.orderBy);o&&(e.structuredQuery.orderBy=o);const l=_a(i,t.limit);return l!==null&&(e.structuredQuery.limit=l),t.startAt&&(e.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{_t:e,parent:r}}function bg(i){let t=vg(i.parent);const e=i.structuredQuery,n=e.from?e.from.length:0;let r=null;if(n>0){It(n===1);const h=e.from[0];h.allDescendants?r=h.collectionId:t=t.child(h.collectionId)}let s=[];e.where&&(s=function(_){const p=uf(_);return p instanceof an&&Lh(p)?p.getFilters():[p]}(e.where));let o=[];e.orderBy&&(o=function(_){return _.map(p=>function(T){return new Us(Ar(T.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(p))}(e.orderBy));let l=null;e.limit&&(l=function(_){let p;return p=typeof _=="object"?_.value:_,eo(p)?null:p}(e.limit));let u=null;e.startAt&&(u=function(_){const p=!!_.before,m=_.values||[];return new $s(m,p)}(e.startAt));let c=null;return e.endAt&&(c=function(_){const p=!_.before,m=_.values||[];return new $s(m,p)}(e.endAt)),zm(t,r,o,s,l,"F",u,c)}function Rg(i,t){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function uf(i){return i.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Ar(e.unaryFilter.field);return qt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Ar(e.unaryFilter.field);return qt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ar(e.unaryFilter.field);return qt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ar(e.unaryFilter.field);return qt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(i):i.fieldFilter!==void 0?function(e){return qt.create(Ar(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(e.fieldFilter.op),e.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(e){return an.create(e.compositeFilter.filters.map(n=>uf(n)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Y()}}(e.compositeFilter.op))}(i):Y()}function Pg(i){return _g[i]}function Sg(i){return pg[i]}function Cg(i){return mg[i]}function Ir(i){return{fieldPath:i.canonicalString()}}function Ar(i){return Jt.fromServerFormat(i.fieldPath)}function cf(i){return i instanceof qt?function(e){if(e.op==="=="){if(hc(e.value))return{unaryFilter:{field:Ir(e.field),op:"IS_NAN"}};if(cc(e.value))return{unaryFilter:{field:Ir(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(hc(e.value))return{unaryFilter:{field:Ir(e.field),op:"IS_NOT_NAN"}};if(cc(e.value))return{unaryFilter:{field:Ir(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ir(e.field),op:Sg(e.op),value:e.value}}}(i):i instanceof an?function(e){const n=e.getFilters().map(r=>cf(r));return n.length===1?n[0]:{compositeFilter:{op:Cg(e.op),filters:n}}}(i):Y()}function Dg(i){const t=[];return i.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function hf(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(t,e,n,r,s=Z.min(),o=Z.min(),l=he.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new bn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new bn(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new bn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new bn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(t){this.ct=t}}function kg(i){const t=bg({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?da(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(){this._n=new Ng}addToCollectionParentIndex(t,e){return this._n.add(e),$.resolve()}getCollectionParents(t,e){return $.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return $.resolve()}deleteFieldIndex(t,e){return $.resolve()}deleteAllFieldIndexes(t){return $.resolve()}createTargetIndexes(t,e){return $.resolve()}getDocumentsMatchingTarget(t,e){return $.resolve(null)}getIndexType(t,e){return $.resolve(0)}getFieldIndexes(t,e){return $.resolve([])}getNextCollectionGroupToUpdate(t){return $.resolve(null)}getMinOffset(t,e){return $.resolve(Mn.min())}getMinOffsetFromCollectionGroup(t,e){return $.resolve(Mn.min())}updateCollectionGroup(t,e,n){return $.resolve()}updateIndexEntries(t,e){return $.resolve()}}class Ng{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Zt(Pt.comparator),s=!r.has(n);return this.index[e]=r.add(n),s}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new Zt(Pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new Fr(0)}static Ln(){return new Fr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(){this.changes=new Qr(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ae.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return n!==void 0?$.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(t,e,n,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(n=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(n!==null&&Ai(n.mutation,r,Ce.empty(),Gt.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(n=>this.getLocalViewOfDocuments(t,n,ot()).next(()=>n))}getLocalViewOfDocuments(t,e,n=ot()){const r=Jn();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,n).next(s=>{let o=mi();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){const n=Jn();return this.populateOverlays(t,n,e).next(()=>this.computeViews(t,e,n,ot()))}populateOverlays(t,e,n){const r=[];return n.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,l)=>{e.set(o,l)})})}computeViews(t,e,n,r){let s=yn();const o=Ii(),l=function(){return Ii()}();return e.forEach((u,c)=>{const h=n.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof jn)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Ai(h.mutation,c,h.mutation.getFieldMask(),Gt.now())):o.set(c.key,Ce.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((c,h)=>o.set(c,h)),e.forEach((c,h)=>{var _;return l.set(c,new Mg(h,(_=o.get(c))!==null&&_!==void 0?_:null))}),l))}recalculateAndSaveOverlays(t,e){const n=Ii();let r=new xt((o,l)=>o-l),s=ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=e.get(u);if(c===null)return;let h=n.get(u)||Ce.empty();h=l.applyToLocalView(c,h),n.set(u,h);const _=(r.get(l.batchId)||ot()).add(u);r=r.insert(l.batchId,_)})}).next(()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,h=u.value,_=Kh();h.forEach(p=>{if(!s.has(p)){const m=Zh(e.get(p),n.get(p));m!==null&&_.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,_))}return $.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,e,n,r){return function(o){return H.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):qm(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,r):this.getDocumentsMatchingCollectionQuery(t,e,n,r)}getNextDocuments(t,e,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-s.size):$.resolve(Jn());let l=-1,u=s;return o.next(c=>$.forEach(c,(h,_)=>(l<_.largestBatchId&&(l=_.largestBatchId),s.get(h)?$.resolve():this.remoteDocumentCache.getEntry(t,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(t,c,s)).next(()=>this.computeViews(t,u,c,ot())).next(h=>({batchId:l,changes:Gh(h)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new H(e)).next(n=>{let r=mi();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,n,r){const s=e.collectionGroup;let o=mi();return this.indexManager.getCollectionParents(t,s).next(l=>$.forEach(l,u=>{const c=function(_,p){return new no(p,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(e,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,c,n,r).next(h=>{h.forEach((_,p)=>{o=o.insert(_,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,s,r))).next(o=>{s.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,ae.newInvalidDocument(h)))});let l=mi();return o.forEach((u,c)=>{const h=s.get(u);h!==void 0&&Ai(h.mutation,c,Ce.empty(),Gt.now()),so(e,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return $.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:nn(r.createTime)}}(e)),$.resolve()}getNamedQuery(t,e){return $.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,function(r){return{name:r.name,query:kg(r.bundledQuery),readTime:nn(r.readTime)}}(e)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(){this.overlays=new xt(H.comparator),this.hr=new Map}getOverlay(t,e){return $.resolve(this.overlays.get(e))}getOverlays(t,e){const n=Jn();return $.forEach(e,r=>this.getOverlay(t,r).next(s=>{s!==null&&n.set(r,s)})).next(()=>n)}saveOverlays(t,e,n){return n.forEach((r,s)=>{this.ht(t,e,s)}),$.resolve()}removeOverlaysForBatchId(t,e,n){const r=this.hr.get(n);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(n)),$.resolve()}getOverlaysForCollection(t,e,n){const r=Jn(),s=e.length+1,o=new H(e.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!e.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>n&&r.set(u.getKey(),u)}return $.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let s=new xt((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===e&&c.largestBatchId>n){let h=s.get(c.largestBatchId);h===null&&(h=Jn(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const l=Jn(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>l.set(c,h)),!(l.size()>=r)););return $.resolve(l)}ht(t,e,n){const r=this.overlays.get(n.key);if(r!==null){const o=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new lg(e,n));let s=this.hr.get(e);s===void 0&&(s=ot(),this.hr.set(e,s)),this.hr.set(e,s.add(n.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(){this.Pr=new Zt(Kt.Ir),this.Tr=new Zt(Kt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){const n=new Kt(t,e);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(t,e){t.forEach(n=>this.addReference(n,e))}removeReference(t,e){this.Ar(new Kt(t,e))}Rr(t,e){t.forEach(n=>this.removeReference(n,e))}Vr(t){const e=new H(new Pt([])),n=new Kt(e,t),r=new Kt(e,t+1),s=[];return this.Tr.forEachInRange([n,r],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const e=new H(new Pt([])),n=new Kt(e,t),r=new Kt(e,t+1);let s=ot();return this.Tr.forEachInRange([n,r],o=>{s=s.add(o.key)}),s}containsKey(t){const e=new Kt(t,0),n=this.Pr.firstAfterOrEqual(e);return n!==null&&t.isEqual(n.key)}}class Kt{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return H.comparator(t.key,e.key)||dt(t.pr,e.pr)}static Er(t,e){return dt(t.pr,e.pr)||H.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new Zt(Kt.Ir)}checkEmpty(t){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,n,r){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ag(s,e,n,r);this.mutationQueue.push(o);for(const l of r)this.wr=this.wr.add(new Kt(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return $.resolve(o)}lookupMutationBatch(t,e){return $.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=this.br(n),s=r<0?0:r;return $.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Kt(e,0),r=new Kt(e,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([n,r],o=>{const l=this.Sr(o.pr);s.push(l)}),$.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Zt(dt);return e.forEach(r=>{const s=new Kt(r,0),o=new Kt(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],l=>{n=n.add(l.pr)})}),$.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let s=n;H.isDocumentKey(s)||(s=s.child(""));const o=new Kt(new H(s),0);let l=new Zt(dt);return this.wr.forEachWhile(u=>{const c=u.key.path;return!!n.isPrefixOf(c)&&(c.length===r&&(l=l.add(u.pr)),!0)},o),$.resolve(this.Dr(l))}Dr(t){const e=[];return t.forEach(n=>{const r=this.Sr(n);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){It(this.Cr(e.batchId,"removed")===0),this.mutationQueue.shift();let n=this.wr;return $.forEach(e.mutations,r=>{const s=new Kt(r.key,e.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.wr=n})}Mn(t){}containsKey(t,e){const n=new Kt(e,0),r=this.wr.firstAfterOrEqual(n);return $.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,$.resolve()}Cr(t,e){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(t){this.vr=t,this.docs=function(){return new xt(H.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,r=this.docs.get(n),s=r?r.size:0,o=this.vr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return $.resolve(n?n.document.mutableCopy():ae.newInvalidDocument(e))}getEntries(t,e){let n=yn();return e.forEach(r=>{const s=this.docs.get(r);n=n.insert(r,s?s.document.mutableCopy():ae.newInvalidDocument(r))}),$.resolve(n)}getDocumentsMatchingQuery(t,e,n,r){let s=yn();const o=e.path,l=new H(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||bm(Am(h),n)<=0||(r.has(h.key)||so(e,h))&&(s=s.insert(h.key,h.mutableCopy()))}return $.resolve(s)}getAllFromCollectionGroup(t,e,n,r){Y()}Fr(t,e){return $.forEach(this.docs,n=>e(n))}newChangeBuffer(t){return new jg(this)}getSize(t){return $.resolve(this.size)}}class jg extends Og{constructor(t){super(),this.ar=t}applyChanges(t){const e=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?e.push(this.ar.addEntry(t,r)):this.ar.removeEntry(n)}),$.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg{constructor(t){this.persistence=t,this.Mr=new Qr(e=>tl(e),el),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ol,this.targetCount=0,this.Lr=Fr.Nn()}forEachTarget(t,e){return this.Mr.forEach((n,r)=>e(r)),$.resolve()}getLastRemoteSnapshotVersion(t){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return $.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Or&&(this.Or=e),$.resolve()}qn(t){this.Mr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Lr=new Fr(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,$.resolve()}updateTargetData(t,e){return this.qn(e),$.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,$.resolve()}removeTargets(t,e,n){let r=0;const s=[];return this.Mr.forEach((o,l)=>{l.sequenceNumber<=e&&n.get(l.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),$.waitFor(s).next(()=>r)}getTargetCount(t){return $.resolve(this.targetCount)}getTargetData(t,e){const n=this.Mr.get(e)||null;return $.resolve(n)}addMatchingKeys(t,e,n){return this.Nr.dr(e,n),$.resolve()}removeMatchingKeys(t,e,n){this.Nr.Rr(e,n);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),$.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),$.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Nr.gr(e);return $.resolve(n)}containsKey(t,e){return $.resolve(this.Nr.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(t,e){this.Br={},this.overlays={},this.kr=new Xa(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new zg(this),this.indexManager=new xg,this.remoteDocumentCache=function(r){return new Bg(r)}(n=>this.referenceDelegate.Kr(n)),this.serializer=new Vg(e),this.$r=new Lg(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new $g,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Br[t.toKey()];return n||(n=new Ug(e,this.referenceDelegate),this.Br[t.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,n){z("MemoryPersistence","Starting transaction:",t);const r=new Gg(this.kr.next());return this.referenceDelegate.Ur(),n(r).next(s=>this.referenceDelegate.Wr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gr(t,e){return $.or(Object.values(this.Br).map(n=>()=>n.containsKey(t,e)))}}class Gg extends Pm{constructor(t){super(),this.currentSequenceNumber=t}}class al{constructor(t){this.persistence=t,this.zr=new ol,this.jr=null}static Hr(t){return new al(t)}get Jr(){if(this.jr)return this.jr;throw Y()}addReference(t,e,n){return this.zr.addReference(n,e),this.Jr.delete(n.toString()),$.resolve()}removeReference(t,e,n){return this.zr.removeReference(n,e),this.Jr.add(n.toString()),$.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),$.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach(r=>this.Jr.add(r.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Jr.add(s.toString()))}).next(()=>n.removeTargetData(t,e))}Ur(){this.jr=new Set}Wr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Jr,n=>{const r=H.fromPath(n);return this.Yr(t,r).next(s=>{s||e.removeEntry(r,Z.min())})}).next(()=>(this.jr=null,e.apply(t)))}updateLimboDocument(t,e){return this.Yr(t,e).next(n=>{n?this.Jr.delete(e.toString()):this.Jr.add(e.toString())})}Kr(t){return 0}Yr(t,e){return $.or([()=>$.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.qi=n,this.Qi=r}static Ki(t,e){let n=ot(),r=ot();for(const s of e.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new ll(t,e.fromCache,n,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Z_()?8:Sm(Y_())>0?6:4}()}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,n,r){const s={result:null};return this.ji(t,e).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,e,r,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Kg;return this.Ji(t,e,o).next(l=>{if(s.result=l,this.Ui)return this.Yi(t,e,o,l.size)})}).next(()=>s.result)}Yi(t,e,n,r){return n.documentReadCount<this.Wi?(di()<=ht.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",wr(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),$.resolve()):(di()<=ht.DEBUG&&z("QueryEngine","Query:",wr(e),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(di()<=ht.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",wr(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,en(e))):$.resolve())}ji(t,e){if(pc(e))return $.resolve(null);let n=en(e);return this.indexManager.getIndexType(t,n).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=da(e,null,"F"),n=en(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{const o=ot(...s);return this.zi.getDocuments(t,o).next(l=>this.indexManager.getMinOffset(t,n).next(u=>{const c=this.Zi(e,l);return this.Xi(e,c,o,u.readTime)?this.ji(t,da(e,null,"F")):this.es(t,c,e,u)}))})))}Hi(t,e,n,r){return pc(e)||r.isEqual(Z.min())?$.resolve(null):this.zi.getDocuments(t,n).next(s=>{const o=this.Zi(e,s);return this.Xi(e,o,n,r)?$.resolve(null):(di()<=ht.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),wr(e)),this.es(t,o,e,Im(r,-1)).next(l=>l))})}Zi(t,e){let n=new Zt(zh(t));return e.forEach((r,s)=>{so(t,s)&&(n=n.add(s))}),n}Xi(t,e,n,r){if(t.limit===null)return!1;if(n.size!==e.size)return!0;const s=t.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ji(t,e,n){return di()<=ht.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",wr(e)),this.zi.getDocumentsMatchingQuery(t,e,Mn.min(),n)}es(t,e,n,r){return this.zi.getDocumentsMatchingQuery(t,n,r).next(s=>(e.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(t,e,n,r){this.persistence=t,this.ts=e,this.serializer=r,this.ns=new xt(dt),this.rs=new Qr(s=>tl(s),el),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(n)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Fg(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ns))}}function Qg(i,t,e,n){return new Wg(i,t,e,n)}async function ff(i,t){const e=nt(i);return await e.persistence.runTransaction("Handle user change","readonly",n=>{let r;return e.mutationQueue.getAllMutationBatches(n).next(s=>(r=s,e._s(t),e.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],l=[];let u=ot();for(const c of r){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of s){l.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return e.localDocuments.getDocuments(n,u).next(c=>({us:c,removedBatchIds:o,addedBatchIds:l}))})})}function Xg(i,t){const e=nt(i);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const r=t.batch.keys(),s=e.os.newChangeBuffer({trackRemovals:!0});return function(l,u,c,h){const _=c.batch,p=_.keys();let m=$.resolve();return p.forEach(T=>{m=m.next(()=>h.getEntry(u,T)).next(g=>{const I=c.docVersions.get(T);It(I!==null),g.version.compareTo(I)<0&&(_.applyToRemoteDocument(g,c),g.isValidDocument()&&(g.setReadTime(c.commitVersion),h.addEntry(g)))})}),m.next(()=>l.mutationQueue.removeMutationBatch(u,_))}(e,n,t,s).next(()=>s.apply(n)).next(()=>e.mutationQueue.performConsistencyCheck(n)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(n,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let u=ot();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(t))).next(()=>e.localDocuments.getDocuments(n,r))})}function df(i){const t=nt(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Qr.getLastRemoteSnapshotVersion(e))}function Yg(i,t){const e=nt(i),n=t.snapshotVersion;let r=e.ns;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=e.os.newChangeBuffer({trackRemovals:!0});r=e.ns;const l=[];t.targetChanges.forEach((h,_)=>{const p=r.get(_);if(!p)return;l.push(e.Qr.removeMatchingKeys(s,h.removedDocuments,_).next(()=>e.Qr.addMatchingKeys(s,h.addedDocuments,_)));let m=p.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(_)!==null?m=m.withResumeToken(he.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,n)),r=r.insert(_,m),function(g,I,C){return g.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-g.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(p,m,h)&&l.push(e.Qr.updateTargetData(s,m))});let u=yn(),c=ot();if(t.documentUpdates.forEach(h=>{t.resolvedLimboDocuments.has(h)&&l.push(e.persistence.referenceDelegate.updateLimboDocument(s,h))}),l.push(Jg(s,o,t.documentUpdates).next(h=>{u=h.cs,c=h.ls})),!n.isEqual(Z.min())){const h=e.Qr.getLastRemoteSnapshotVersion(s).next(_=>e.Qr.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(h)}return $.waitFor(l).next(()=>o.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(e.ns=r,s))}function Jg(i,t,e){let n=ot(),r=ot();return e.forEach(s=>n=n.add(s)),t.getEntries(i,n).next(s=>{let o=yn();return e.forEach((l,u)=>{const c=s.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(Z.min())?(t.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(u),o=o.insert(l,u)):z("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{cs:o,ls:r}})}function Zg(i,t){const e=nt(i);return e.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function ty(i,t){const e=nt(i);return e.persistence.runTransaction("Allocate target","readwrite",n=>{let r;return e.Qr.getTargetData(n,t).next(s=>s?(r=s,$.resolve(r)):e.Qr.allocateTargetId(n).next(o=>(r=new bn(t,o,"TargetPurposeListen",n.currentSequenceNumber),e.Qr.addTargetData(n,r).next(()=>r))))}).then(n=>{const r=e.ns.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.ns=e.ns.insert(n.targetId,n),e.rs.set(t,n.targetId)),n})}async function ya(i,t,e){const n=nt(i),r=n.ns.get(t),s=e?"readwrite":"readwrite-primary";try{e||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Qi(o))throw o;z("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}n.ns=n.ns.remove(t),n.rs.delete(r.target)}function Rc(i,t,e){const n=nt(i);let r=Z.min(),s=ot();return n.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const _=nt(u),p=_.rs.get(h);return p!==void 0?$.resolve(_.ns.get(p)):_.Qr.getTargetData(c,h)}(n,o,en(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,n.Qr.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>n.ts.getDocumentsMatchingQuery(o,t,e?r:Z.min(),e?s:ot())).next(l=>(ey(n,Km(t),l),{documents:l,hs:s})))}function ey(i,t,e){let n=i.ss.get(t)||Z.min();e.forEach((r,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),i.ss.set(t,n)}class Pc{constructor(){this.activeTargetIds=Jm()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class ny{constructor(){this.no=new Pc,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,n){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Pc,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Is=null;function Bo(){return Is===null?Is=function(){return 268435456+Math.round(2147483648*Math.random())}():Is++,"0x"+Is.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const se="WebChannelConnection";class oy extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=n+"://"+e.host,this.So=`projects/${r}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Do(){return!1}Co(e,n,r,s,o){const l=Bo(),u=this.vo(e,n.toUriEncodedString());z("RestConnection",`Sending RPC '${e}' ${l}:`,u,r);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(e,u,c,r).then(h=>(z("RestConnection",`Received RPC '${e}' ${l}: `,h),h),h=>{throw xr("RestConnection",`RPC '${e}' ${l} failed with error: `,h,"url: ",u,"request:",r),h})}xo(e,n,r,s,o,l){return this.Co(e,n,r,s,o)}Fo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Wr}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}vo(e,n){const r=iy[e];return`${this.wo}/v1/${n}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,e,n,r){const s=Bo();return new Promise((o,l)=>{const u=new bh;u.setWithCredentials(!0),u.listenOnce(Ph.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case bs.NO_ERROR:const h=u.getResponseJson();z(se,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(h)),o(h);break;case bs.TIMEOUT:z(se,`RPC '${t}' ${s} timed out`),l(new q(L.DEADLINE_EXCEEDED,"Request time out"));break;case bs.HTTP_ERROR:const _=u.getStatus();if(z(se,`RPC '${t}' ${s} failed with status:`,_,"response text:",u.getResponseText()),_>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const T=function(I){const C=I.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(C)>=0?C:L.UNKNOWN}(m.status);l(new q(T,m.message))}else l(new q(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new q(L.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{z(se,`RPC '${t}' ${s} completed.`)}});const c=JSON.stringify(r);z(se,`RPC '${t}' ${s} sending request:`,r),u.send(e,"POST",c,n,15)})}Oo(t,e,n){const r=Bo(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Dh(),l=Ch(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new Rh({})),this.Fo(u.initMessageHeaders,e,n),u.encodeInitMessageHeaders=!0;const h=s.join("");z(se,`Creating RPC '${t}' stream ${r}: ${h}`,u);const _=o.createWebChannel(h,u);let p=!1,m=!1;const T=new sy({lo:I=>{m?z(se,`Not sending because RPC '${t}' stream ${r} is closed:`,I):(p||(z(se,`Opening RPC '${t}' stream ${r} transport.`),_.open(),p=!0),z(se,`RPC '${t}' stream ${r} sending:`,I),_.send(I))},ho:()=>_.close()}),g=(I,C,S)=>{I.listen(C,k=>{try{S(k)}catch(V){setTimeout(()=>{throw V},0)}})};return g(_,pi.EventType.OPEN,()=>{m||(z(se,`RPC '${t}' stream ${r} transport opened.`),T.mo())}),g(_,pi.EventType.CLOSE,()=>{m||(m=!0,z(se,`RPC '${t}' stream ${r} transport closed`),T.po())}),g(_,pi.EventType.ERROR,I=>{m||(m=!0,xr(se,`RPC '${t}' stream ${r} transport errored:`,I),T.po(new q(L.UNAVAILABLE,"The operation could not be completed")))}),g(_,pi.EventType.MESSAGE,I=>{var C;if(!m){const S=I.data[0];It(!!S);const k=S,V=k.error||((C=k[0])===null||C===void 0?void 0:C.error);if(V){z(se,`RPC '${t}' stream ${r} received error:`,V);const x=V.status;let O=function(y){const b=$t[y];if(b!==void 0)return ef(b)}(x),w=V.message;O===void 0&&(O=L.INTERNAL,w="Unknown error status: "+x+" with message "+V.message),m=!0,T.po(new q(O,w)),_.close()}else z(se,`RPC '${t}' stream ${r} received:`,S),T.yo(S)}}),g(l,Sh.STAT_EVENT,I=>{I.stat===la.PROXY?z(se,`RPC '${t}' stream ${r} detected buffering proxy`):I.stat===la.NOPROXY&&z(se,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{T.fo()},0),T}}function jo(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(i){return new gg(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(t,e,n=1e3,r=1.5,s=6e4){this.oi=t,this.timerId=e,this.No=n,this.Lo=r,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const e=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),r=Math.max(0,e-n);r>0&&z("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(t,e,n,r,s,o,l,u){this.oi=t,this.Go=n,this.zo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new _f(t,e)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,e){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():e&&e.code===L.RESOURCE_EXHAUSTED?(gn(e.toString()),gn("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):e&&e.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(e)}__(){}auth(){this.state=1;const t=this.a_(this.jo),e=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,r])=>{this.jo===e&&this.u_(n,r)},n=>{t(()=>{const r=new q(L.UNKNOWN,"Fetching auth token failed: "+n.message);return this.c_(r)})})}u_(t,e){const n=this.a_(this.jo);this.stream=this.l_(t,e),this.stream.Po(()=>{n(()=>this.listener.Po())}),this.stream.To(()=>{n(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{n(()=>this.c_(r))}),this.stream.onMessage(r=>{n(()=>this.onMessage(r))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return z("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return e=>{this.oi.enqueueAndForget(()=>this.jo===t?e():(z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ay extends pf{constructor(t,e,n,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,o),this.serializer=s}l_(t,e){return this.connection.Oo("Listen",t,e)}onMessage(t){this.Yo.reset();const e=Tg(this.serializer,t),n=function(s){if(!("targetChange"in s))return Z.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Z.min():o.readTime?nn(o.readTime):Z.min()}(t);return this.listener.h_(e,n)}P_(t){const e={};e.database=ga(this.serializer),e.addTarget=function(s,o){let l;const u=o.target;if(l=fa(u)?{documents:Ig(s,u)}:{query:Ag(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=sf(s,o.resumeToken);const c=_a(s,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(Z.min())>0){l.readTime=zs(s,o.snapshotVersion.toTimestamp());const c=_a(s,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,t);const n=Rg(this.serializer,t);n&&(e.labels=n),this.i_(e)}I_(t){const e={};e.database=ga(this.serializer),e.removeTarget=t,this.i_(e)}}class ly extends pf{constructor(t,e,n,r,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,e){return this.connection.Oo("Write",t,e)}onMessage(t){if(It(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const e=wg(t.writeResults,t.commitTime),n=nn(t.commitTime);return this.listener.A_(n,e)}return It(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=ga(this.serializer),this.i_(t)}d_(t){const e={streamToken:this.lastStreamToken,writes:t.map(n=>Eg(this.serializer,n))};this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy extends class{}{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new q(L.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,e,n,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,pa(e,n),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(L.UNKNOWN,s.toString())})}xo(t,e,n,r,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.xo(t,pa(e,n),r,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(L.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class cy{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(gn(e),this.y_=!1):z("OnlineStateTracker",e)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(t,e,n,r,s){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{n.enqueueAndForget(async()=>{fr(this)&&(z("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=nt(u);c.M_.add(4),await Ji(c),c.N_.set("Unknown"),c.M_.delete(4),await co(c)}(this))})}),this.N_=new cy(n,r)}}async function co(i){if(fr(i))for(const t of i.x_)await t(!0)}async function Ji(i){for(const t of i.x_)await t(!1)}function mf(i,t){const e=nt(i);e.F_.has(t.targetId)||(e.F_.set(t.targetId,t),fl(e)?hl(e):Xr(e).Xo()&&cl(e,t))}function ul(i,t){const e=nt(i),n=Xr(e);e.F_.delete(t),n.Xo()&&gf(e,t),e.F_.size===0&&(n.Xo()?n.n_():fr(e)&&e.N_.set("Unknown"))}function cl(i,t){if(i.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Z.min())>0){const e=i.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}Xr(i).P_(t)}function gf(i,t){i.L_.xe(t),Xr(i).I_(t)}function hl(i){i.L_=new dg({getRemoteKeysForTarget:t=>i.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>i.F_.get(t)||null,tt:()=>i.datastore.serializer.databaseId}),Xr(i).start(),i.N_.w_()}function fl(i){return fr(i)&&!Xr(i).Zo()&&i.F_.size>0}function fr(i){return nt(i).M_.size===0}function yf(i){i.L_=void 0}async function fy(i){i.N_.set("Online")}async function dy(i){i.F_.forEach((t,e)=>{cl(i,t)})}async function _y(i,t){yf(i),fl(i)?(i.N_.D_(t),hl(i)):i.N_.set("Unknown")}async function py(i,t,e){if(i.N_.set("Online"),t instanceof rf&&t.state===2&&t.cause)try{await async function(r,s){const o=s.cause;for(const l of s.targetIds)r.F_.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.F_.delete(l),r.L_.removeTarget(l))}(i,t)}catch(n){z("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await qs(i,n)}else if(t instanceof Ss?i.L_.Ke(t):t instanceof nf?i.L_.He(t):i.L_.We(t),!e.isEqual(Z.min()))try{const n=await df(i.localStore);e.compareTo(n)>=0&&await function(s,o){const l=s.L_.rt(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.F_.get(c);h&&s.F_.set(c,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const h=s.F_.get(u);if(!h)return;s.F_.set(u,h.withResumeToken(he.EMPTY_BYTE_STRING,h.snapshotVersion)),gf(s,u);const _=new bn(h.target,u,c,h.sequenceNumber);cl(s,_)}),s.remoteSyncer.applyRemoteEvent(l)}(i,e)}catch(n){z("RemoteStore","Failed to raise snapshot:",n),await qs(i,n)}}async function qs(i,t,e){if(!Qi(t))throw t;i.M_.add(1),await Ji(i),i.N_.set("Offline"),e||(e=()=>df(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{z("RemoteStore","Retrying IndexedDB access"),await e(),i.M_.delete(1),await co(i)})}function vf(i,t){return t().catch(e=>qs(i,e,t))}async function ho(i){const t=nt(i),e=Ln(t);let n=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;my(t);)try{const r=await Zg(t.localStore,n);if(r===null){t.v_.length===0&&e.n_();break}n=r.batchId,gy(t,r)}catch(r){await qs(t,r)}Tf(t)&&Ef(t)}function my(i){return fr(i)&&i.v_.length<10}function gy(i,t){i.v_.push(t);const e=Ln(i);e.Xo()&&e.E_&&e.d_(t.mutations)}function Tf(i){return fr(i)&&!Ln(i).Zo()&&i.v_.length>0}function Ef(i){Ln(i).start()}async function yy(i){Ln(i).V_()}async function vy(i){const t=Ln(i);for(const e of i.v_)t.d_(e.mutations)}async function Ty(i,t,e){const n=i.v_.shift(),r=rl.from(n,t,e);await vf(i,()=>i.remoteSyncer.applySuccessfulWrite(r)),await ho(i)}async function Ey(i,t){t&&Ln(i).E_&&await async function(n,r){if(function(o){return cg(o)&&o!==L.ABORTED}(r.code)){const s=n.v_.shift();Ln(n).t_(),await vf(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await ho(n)}}(i,t),Tf(i)&&Ef(i)}async function Cc(i,t){const e=nt(i);e.asyncQueue.verifyOperationInProgress(),z("RemoteStore","RemoteStore received new credentials");const n=fr(e);e.M_.add(3),await Ji(e),n&&e.N_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.M_.delete(3),await co(e)}async function wy(i,t){const e=nt(i);t?(e.M_.delete(2),await co(e)):t||(e.M_.add(2),await Ji(e),e.N_.set("Unknown"))}function Xr(i){return i.B_||(i.B_=function(e,n,r){const s=nt(e);return s.f_(),new ay(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{Po:fy.bind(null,i),To:dy.bind(null,i),Ao:_y.bind(null,i),h_:py.bind(null,i)}),i.x_.push(async t=>{t?(i.B_.t_(),fl(i)?hl(i):i.N_.set("Unknown")):(await i.B_.stop(),yf(i))})),i.B_}function Ln(i){return i.k_||(i.k_=function(e,n,r){const s=nt(e);return s.f_(),new ly(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{Po:()=>Promise.resolve(),To:yy.bind(null,i),Ao:Ey.bind(null,i),R_:vy.bind(null,i),A_:Ty.bind(null,i)}),i.x_.push(async t=>{t?(i.k_.t_(),await ho(i)):(await i.k_.stop(),i.v_.length>0&&(z("RemoteStore",`Stopping write stream with ${i.v_.length} pending writes`),i.v_=[]))})),i.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(t,e,n,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new mn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,r,s){const o=Date.now()+n,l=new dl(t,e,o,r,s);return l.start(n),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(L.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _l(i,t){if(gn("AsyncQueue",`${t}: ${i}`),Qi(i))return new q(L.UNAVAILABLE,`${t}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(t){this.comparator=t?(e,n)=>t(e,n)||H.comparator(e.key,n.key):(e,n)=>H.comparator(e.key,n.key),this.keyedMap=mi(),this.sortedSet=new xt(this.comparator)}static emptySet(t){return new Sr(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,n)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Sr)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=n.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const n=new Sr;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(){this.q_=new xt(H.comparator)}track(t){const e=t.doc.key,n=this.q_.get(e);n?t.type!==0&&n.type===3?this.q_=this.q_.insert(e,t):t.type===3&&n.type!==1?this.q_=this.q_.insert(e,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.q_=this.q_.insert(e,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.q_=this.q_.remove(e):t.type===1&&n.type===2?this.q_=this.q_.insert(e,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):Y():this.q_=this.q_.insert(e,t)}Q_(){const t=[];return this.q_.inorderTraversal((e,n)=>{t.push(n)}),t}}class Lr{constructor(t,e,n,r,s,o,l,u,c){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(t,e,n,r,s){const o=[];return e.forEach(l=>{o.push({type:0,doc:l})}),new Lr(t,e,Sr.emptySet(e),o,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&io(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class Ay{constructor(){this.queries=new Qr(t=>jh(t),io),this.onlineState="Unknown",this.z_=new Set}}async function pl(i,t){const e=nt(i);let n=3;const r=t.query;let s=e.queries.get(r);s?!s.W_()&&t.G_()&&(n=2):(s=new Iy,n=t.G_()?0:1);try{switch(n){case 0:s.K_=await e.onListen(r,!0);break;case 1:s.K_=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(o){const l=_l(o,`Initialization of query '${wr(t.query)}' failed`);return void t.onError(l)}e.queries.set(r,s),s.U_.push(t),t.j_(e.onlineState),s.K_&&t.H_(s.K_)&&gl(e)}async function ml(i,t){const e=nt(i),n=t.query;let r=3;const s=e.queries.get(n);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?r=t.G_()?0:1:!s.W_()&&t.G_()&&(r=2))}switch(r){case 0:return e.queries.delete(n),e.onUnlisten(n,!0);case 1:return e.queries.delete(n),e.onUnlisten(n,!1);case 2:return e.onLastRemoteStoreUnlisten(n);default:return}}function by(i,t){const e=nt(i);let n=!1;for(const r of t){const s=r.query,o=e.queries.get(s);if(o){for(const l of o.U_)l.H_(r)&&(n=!0);o.K_=r}}n&&gl(e)}function Ry(i,t,e){const n=nt(i),r=n.queries.get(t);if(r)for(const s of r.U_)s.onError(e);n.queries.delete(t)}function gl(i){i.z_.forEach(t=>{t.next()})}var va,Vc;(Vc=va||(va={})).J_="default",Vc.Cache="cache";class yl{constructor(t,e,n){this.query=t,this.Y_=e,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(t){if(!this.options.includeMetadataChanges){const n=[];for(const r of t.docChanges)r.type!==3&&n.push(r);t=new Lr(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),e=!0):this.ta(t,this.onlineState)&&(this.na(t),e=!0),this.X_=t,e}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let e=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),e=!0),e}ta(t,e){if(!t.fromCache||!this.G_())return!0;const n=e!=="Offline";return(!this.options.ra||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const e=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}na(t){t=Lr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==va.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(t){this.key=t}}class If{constructor(t){this.key=t}}class Py{constructor(t,e){this.query=t,this.la=e,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=ot(),this.mutatedKeys=ot(),this.Ia=zh(t),this.Ta=new Sr(this.Ia)}get Ea(){return this.la}da(t,e){const n=e?e.Aa:new Dc,r=e?e.Ta:this.Ta;let s=e?e.mutatedKeys:this.mutatedKeys,o=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((h,_)=>{const p=r.get(h),m=so(this.query,_)?_:null,T=!!p&&this.mutatedKeys.has(p.key),g=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let I=!1;p&&m?p.data.isEqual(m.data)?T!==g&&(n.track({type:3,doc:m}),I=!0):this.Ra(p,m)||(n.track({type:2,doc:m}),I=!0,(u&&this.Ia(m,u)>0||c&&this.Ia(m,c)<0)&&(l=!0)):!p&&m?(n.track({type:0,doc:m}),I=!0):p&&!m&&(n.track({type:1,doc:p}),I=!0,(u||c)&&(l=!0)),I&&(m?(o=o.add(m),s=g?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),n.track({type:1,doc:h})}return{Ta:o,Aa:n,Xi:l,mutatedKeys:s}}Ra(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,r){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((h,_)=>function(m,T){const g=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return g(m)-g(T)}(h.type,_.type)||this.Ia(h.doc,_.doc)),this.Va(n),r=r!=null&&r;const l=e&&!r?this.ma():[],u=this.Pa.size===0&&this.current&&!r?1:0,c=u!==this.ha;return this.ha=u,o.length!==0||c?{snapshot:new Lr(this.query,t.Ta,s,o,t.mutatedKeys,u===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:l}:{fa:l}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Dc,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(e=>this.la=this.la.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.la=this.la.delete(e)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=ot(),this.Ta.forEach(n=>{this.ga(n.key)&&(this.Pa=this.Pa.add(n.key))});const e=[];return t.forEach(n=>{this.Pa.has(n)||e.push(new If(n))}),this.Pa.forEach(n=>{t.has(n)||e.push(new wf(n))}),e}pa(t){this.la=t.hs,this.Pa=ot();const e=this.da(t.documents);return this.applyChanges(e,!0)}ya(){return Lr.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class Sy{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Cy{constructor(t){this.key=t,this.wa=!1}}class Dy{constructor(t,e,n,r,s,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Qr(l=>jh(l),io),this.Da=new Map,this.Ca=new Set,this.va=new xt(H.comparator),this.Fa=new Map,this.Ma=new ol,this.xa={},this.Oa=new Map,this.Na=Fr.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function Vy(i,t,e=!0){const n=Cf(i);let r;const s=n.ba.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ya()):r=await Af(n,t,e,!0),r}async function ky(i,t){const e=Cf(i);await Af(e,t,!0,!1)}async function Af(i,t,e,n){const r=await ty(i.localStore,en(t)),s=r.targetId,o=e?i.sharedClientState.addLocalQueryTarget(s):"not-current";let l;return n&&(l=await xy(i,t,s,o==="current",r.resumeToken)),i.isPrimaryClient&&e&&mf(i.remoteStore,r),l}async function xy(i,t,e,n,r){i.Ba=(_,p,m)=>async function(g,I,C,S){let k=I.view.da(C);k.Xi&&(k=await Rc(g.localStore,I.query,!1).then(({documents:w})=>I.view.da(w,k)));const V=S&&S.targetChanges.get(I.targetId),x=S&&S.targetMismatches.get(I.targetId)!=null,O=I.view.applyChanges(k,g.isPrimaryClient,V,x);return xc(g,I.targetId,O.fa),O.snapshot}(i,_,p,m);const s=await Rc(i.localStore,t,!0),o=new Py(t,s.hs),l=o.da(s.documents),u=Yi.createSynthesizedTargetChangeForCurrentChange(e,n&&i.onlineState!=="Offline",r),c=o.applyChanges(l,i.isPrimaryClient,u);xc(i,e,c.fa);const h=new Sy(t,e,o);return i.ba.set(t,h),i.Da.has(e)?i.Da.get(e).push(t):i.Da.set(e,[t]),c.snapshot}async function Ny(i,t,e){const n=nt(i),r=n.ba.get(t),s=n.Da.get(r.targetId);if(s.length>1)return n.Da.set(r.targetId,s.filter(o=>!io(o,t))),void n.ba.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await ya(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),e&&ul(n.remoteStore,r.targetId),Ta(n,r.targetId)}).catch(Wi)):(Ta(n,r.targetId),await ya(n.localStore,r.targetId,!0))}async function Oy(i,t){const e=nt(i),n=e.ba.get(t),r=e.Da.get(n.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(n.targetId),ul(e.remoteStore,n.targetId))}async function My(i,t,e){const n=zy(i);try{const r=await function(o,l){const u=nt(o),c=Gt.now(),h=l.reduce((m,T)=>m.add(T.key),ot());let _,p;return u.persistence.runTransaction("Locally write mutations","readwrite",m=>{let T=yn(),g=ot();return u.os.getEntries(m,h).next(I=>{T=I,T.forEach((C,S)=>{S.isValidDocument()||(g=g.add(C))})}).next(()=>u.localDocuments.getOverlayedDocuments(m,T)).next(I=>{_=I;const C=[];for(const S of l){const k=sg(S,_.get(S.key).overlayedDocument);k!=null&&C.push(new jn(S.key,k,Oh(k.value.mapValue),Ve.exists(!0)))}return u.mutationQueue.addMutationBatch(m,c,C,l)}).next(I=>{p=I;const C=I.applyToLocalDocumentSet(_,g);return u.documentOverlayCache.saveOverlays(m,I.batchId,C)})}).then(()=>({batchId:p.batchId,changes:Gh(_)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(r.batchId),function(o,l,u){let c=o.xa[o.currentUser.toKey()];c||(c=new xt(dt)),c=c.insert(l,u),o.xa[o.currentUser.toKey()]=c}(n,r.batchId,e),await Zi(n,r.changes),await ho(n.remoteStore)}catch(r){const s=_l(r,"Failed to persist write");e.reject(s)}}async function bf(i,t){const e=nt(i);try{const n=await Yg(e.localStore,t);t.targetChanges.forEach((r,s)=>{const o=e.Fa.get(s);o&&(It(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.wa=!0:r.modifiedDocuments.size>0?It(o.wa):r.removedDocuments.size>0&&(It(o.wa),o.wa=!1))}),await Zi(e,n,t)}catch(n){await Wi(n)}}function kc(i,t,e){const n=nt(i);if(n.isPrimaryClient&&e===0||!n.isPrimaryClient&&e===1){const r=[];n.ba.forEach((s,o)=>{const l=o.view.j_(t);l.snapshot&&r.push(l.snapshot)}),function(o,l){const u=nt(o);u.onlineState=l;let c=!1;u.queries.forEach((h,_)=>{for(const p of _.U_)p.j_(l)&&(c=!0)}),c&&gl(u)}(n.eventManager,t),r.length&&n.Sa.h_(r),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function Fy(i,t,e){const n=nt(i);n.sharedClientState.updateQueryState(t,"rejected",e);const r=n.Fa.get(t),s=r&&r.key;if(s){let o=new xt(H.comparator);o=o.insert(s,ae.newNoDocument(s,Z.min()));const l=ot().add(s),u=new lo(Z.min(),new Map,new xt(dt),o,l);await bf(n,u),n.va=n.va.remove(s),n.Fa.delete(t),vl(n)}else await ya(n.localStore,t,!1).then(()=>Ta(n,t,e)).catch(Wi)}async function Ly(i,t){const e=nt(i),n=t.batch.batchId;try{const r=await Xg(e.localStore,t);Pf(e,n,null),Rf(e,n),e.sharedClientState.updateMutationState(n,"acknowledged"),await Zi(e,r)}catch(r){await Wi(r)}}async function $y(i,t,e){const n=nt(i);try{const r=await function(o,l){const u=nt(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,l).next(_=>(It(_!==null),h=_.keys(),u.mutationQueue.removeMutationBatch(c,_))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(n.localStore,t);Pf(n,t,e),Rf(n,t),n.sharedClientState.updateMutationState(t,"rejected",e),await Zi(n,r)}catch(r){await Wi(r)}}function Rf(i,t){(i.Oa.get(t)||[]).forEach(e=>{e.resolve()}),i.Oa.delete(t)}function Pf(i,t,e){const n=nt(i);let r=n.xa[n.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),n.xa[n.currentUser.toKey()]=r}}function Ta(i,t,e=null){i.sharedClientState.removeLocalQueryTarget(t);for(const n of i.Da.get(t))i.ba.delete(n),e&&i.Sa.ka(n,e);i.Da.delete(t),i.isPrimaryClient&&i.Ma.Vr(t).forEach(n=>{i.Ma.containsKey(n)||Sf(i,n)})}function Sf(i,t){i.Ca.delete(t.path.canonicalString());const e=i.va.get(t);e!==null&&(ul(i.remoteStore,e),i.va=i.va.remove(t),i.Fa.delete(e),vl(i))}function xc(i,t,e){for(const n of e)n instanceof wf?(i.Ma.addReference(n.key,t),Uy(i,n)):n instanceof If?(z("SyncEngine","Document no longer in limbo: "+n.key),i.Ma.removeReference(n.key,t),i.Ma.containsKey(n.key)||Sf(i,n.key)):Y()}function Uy(i,t){const e=t.key,n=e.path.canonicalString();i.va.get(e)||i.Ca.has(n)||(z("SyncEngine","New document in limbo: "+e),i.Ca.add(n),vl(i))}function vl(i){for(;i.Ca.size>0&&i.va.size<i.maxConcurrentLimboResolutions;){const t=i.Ca.values().next().value;i.Ca.delete(t);const e=new H(Pt.fromString(t)),n=i.Na.next();i.Fa.set(n,new Cy(e)),i.va=i.va.insert(e,n),mf(i.remoteStore,new bn(en(ro(e.path)),n,"TargetPurposeLimboResolution",Xa.oe))}}async function Zi(i,t,e){const n=nt(i),r=[],s=[],o=[];n.ba.isEmpty()||(n.ba.forEach((l,u)=>{o.push(n.Ba(u,t,e).then(c=>{if((c||e)&&n.isPrimaryClient){const h=c&&!c.fromCache;n.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(c){r.push(c);const h=ll.Ki(u.targetId,c);s.push(h)}}))}),await Promise.all(o),n.Sa.h_(r),await async function(u,c){const h=nt(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>$.forEach(c,p=>$.forEach(p.qi,m=>h.persistence.referenceDelegate.addReference(_,p.targetId,m)).next(()=>$.forEach(p.Qi,m=>h.persistence.referenceDelegate.removeReference(_,p.targetId,m)))))}catch(_){if(!Qi(_))throw _;z("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of c){const p=_.targetId;if(!_.fromCache){const m=h.ns.get(p),T=m.snapshotVersion,g=m.withLastLimboFreeSnapshotVersion(T);h.ns=h.ns.insert(p,g)}}}(n.localStore,s))}async function By(i,t){const e=nt(i);if(!e.currentUser.isEqual(t)){z("SyncEngine","User change. New user:",t.toKey());const n=await ff(e.localStore,t);e.currentUser=t,function(s,o){s.Oa.forEach(l=>{l.forEach(u=>{u.reject(new q(L.CANCELLED,o))})}),s.Oa.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await Zi(e,n.us)}}function jy(i,t){const e=nt(i),n=e.Fa.get(t);if(n&&n.wa)return ot().add(n.key);{let r=ot();const s=e.Da.get(t);if(!s)return r;for(const o of s){const l=e.ba.get(o);r=r.unionWith(l.view.Ea)}return r}}function Cf(i){const t=nt(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=bf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=jy.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Fy.bind(null,t),t.Sa.h_=by.bind(null,t.eventManager),t.Sa.ka=Ry.bind(null,t.eventManager),t}function zy(i){const t=nt(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ly.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=$y.bind(null,t),t}class Nc{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=uo(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return Qg(this.persistence,new Hg,t.initialUser,this.serializer)}createPersistence(t){return new qg(al.Hr,this.serializer)}createSharedClientState(t){return new ny}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class qy{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>kc(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=By.bind(null,this.syncEngine),await wy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Ay}()}createDatastore(t){const e=uo(t.databaseInfo.databaseId),n=function(s){return new oy(s)}(t.databaseInfo);return function(s,o,l,u){return new uy(s,o,l,u)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(n,r,s,o,l){return new hy(n,r,s,o,l)}(this.localStore,this.datastore,t.asyncQueue,e=>kc(this.syncEngine,e,0),function(){return Sc.D()?new Sc:new ry}())}createSyncEngine(t,e){return function(r,s,o,l,u,c,h){const _=new Dy(r,s,o,l,u,c);return h&&(_.La=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t;await async function(n){const r=nt(n);z("RemoteStore","RemoteStore shutting down."),r.M_.add(5),await Ji(r),r.O_.shutdown(),r.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):gn("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(t,e,n,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=oe.UNAUTHENTICATED,this.clientId=kh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async s=>{z("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(n,s=>(z("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new q(L.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new mn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=_l(e,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function zo(i,t){i.asyncQueue.verifyOperationInProgress(),z("FirestoreClient","Initializing OfflineComponentProvider");const e=i.configuration;await t.initialize(e);let n=e.initialUser;i.setCredentialChangeListener(async r=>{n.isEqual(r)||(await ff(t.localStore,r),n=r)}),t.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=t}async function Oc(i,t){i.asyncQueue.verifyOperationInProgress();const e=await Hy(i);z("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(e,i.configuration),i.setCredentialChangeListener(n=>Cc(t.remoteStore,n)),i.setAppCheckTokenChangeListener((n,r)=>Cc(t.remoteStore,r)),i._onlineComponents=t}function Ky(i){return i.name==="FirebaseError"?i.code===L.FAILED_PRECONDITION||i.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}async function Hy(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){z("FirestoreClient","Using user provided OfflineComponentProvider");try{await zo(i,i._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!Ky(e))throw e;xr("Error using user provided cache. Falling back to memory cache: "+e),await zo(i,new Nc)}}else z("FirestoreClient","Using default OfflineComponentProvider"),await zo(i,new Nc);return i._offlineComponents}async function Df(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(z("FirestoreClient","Using user provided OnlineComponentProvider"),await Oc(i,i._uninitializedComponentsProvider._online)):(z("FirestoreClient","Using default OnlineComponentProvider"),await Oc(i,new qy))),i._onlineComponents}function Wy(i){return Df(i).then(t=>t.syncEngine)}async function Gs(i){const t=await Df(i),e=t.eventManager;return e.onListen=Vy.bind(null,t.syncEngine),e.onUnlisten=Ny.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=ky.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=Oy.bind(null,t.syncEngine),e}function Qy(i,t,e={}){const n=new mn;return i.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const h=new Tl({next:p=>{o.enqueueAndForget(()=>ml(s,_));const m=p.docs.has(l);!m&&p.fromCache?c.reject(new q(L.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&u&&u.source==="server"?c.reject(new q(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),_=new yl(ro(l.path),h,{includeMetadataChanges:!0,ra:!0});return pl(s,_)}(await Gs(i),i.asyncQueue,t,e,n)),n.promise}function Xy(i,t,e={}){const n=new mn;return i.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const h=new Tl({next:p=>{o.enqueueAndForget(()=>ml(s,_)),p.fromCache&&u.source==="server"?c.reject(new q(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),_=new yl(l,h,{includeMetadataChanges:!0,ra:!0});return pl(s,_)}(await Gs(i),i.asyncQueue,t,e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(i){const t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(i,t,e){if(!e)throw new q(L.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function Yy(i,t,e,n){if(t===!0&&n===!0)throw new q(L.INVALID_ARGUMENT,`${i} and ${e} cannot be used together.`)}function Fc(i){if(!H.isDocumentKey(i))throw new q(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Lc(i){if(H.isDocumentKey(i))throw new q(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function El(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":Y()}function ke(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new q(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=El(i);throw new q(L.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(t){var e,n;if(t.host===void 0){if(t.ssl!==void 0)throw new q(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new q(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Yy("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Vf((n=t.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,r){return n.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class fo{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $c({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new q(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new q(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $c(t),t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new _m;switch(n.type){case"firstParty":return new ym(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new q(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Mc.get(e);n&&(z("ComponentProvider","Removing Datastore"),Mc.delete(e),n.terminate())}(this),Promise.resolve()}}function Jy(i,t,e,n={}){var r;const s=(i=ke(i,fo))._getSettings(),o=`${t}:${e}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&xr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),n.mockUserToken){let l,u;if(typeof n.mockUserToken=="string")l=n.mockUserToken,u=oe.MOCK_USER;else{l=X_(n.mockUserToken,(r=i._app)===null||r===void 0?void 0:r.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new q(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new oe(c)}i._authCredentials=new pm(new Vh(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new ts(this.firestore,t,this._query)}}class _e{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new _e(this.firestore,t,this._key)}}class Vn extends ts{constructor(t,e,n){super(t,e,ro(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new _e(this.firestore,null,new H(t))}withConverter(t){return new Vn(this.firestore,t,this._path)}}function $r(i,t,...e){if(i=qe(i),kf("collection","path",t),i instanceof fo){const n=Pt.fromString(t,...e);return Lc(n),new Vn(i,null,n)}{if(!(i instanceof _e||i instanceof Vn))throw new q(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Pt.fromString(t,...e));return Lc(n),new Vn(i.firestore,null,n)}}function Ea(i,t,...e){if(i=qe(i),arguments.length===1&&(t=kh.newId()),kf("doc","path",t),i instanceof fo){const n=Pt.fromString(t,...e);return Fc(n),new _e(i,null,new H(n))}{if(!(i instanceof _e||i instanceof Vn))throw new q(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Pt.fromString(t,...e));return Fc(n),new _e(i.firestore,i instanceof Vn?i.converter:null,new H(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new _f(this,"async_queue_retry"),this.hu=()=>{const e=jo();e&&z("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};const t=jo();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const e=jo();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const e=new mn;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!Qi(t))throw t;z("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const e=this.iu.then(()=>(this.uu=!0,t().catch(n=>{this.au=n,this.uu=!1;const r=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(n);throw gn("INTERNAL UNHANDLED ERROR: ",r),n}).then(n=>(this.uu=!1,n))));return this.iu=e,e}enqueueAfterDelay(t,e,n){this.Pu(),this.lu.indexOf(t)>-1&&(e=0);const r=dl.createAndSchedule(this,t,e,n,s=>this.Eu(s));return this._u.push(r),r}Pu(){this.au&&Y()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const e of this._u)if(e.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((e,n)=>e.targetTimeMs-n.targetTimeMs);for(const e of this._u)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const e=this._u.indexOf(t);this._u.splice(e,1)}}function Uc(i){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const s of n)if(s in r&&typeof r[s]=="function")return!0;return!1}(i,["next","error","complete"])}class $n extends fo{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=function(){return new Zy}(),this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||xf(this),this._firestoreClient.terminate()}}function t0(i,t){const e=typeof i=="object"?i:im(),n=typeof i=="string"?i:"(default)",r=tm(e,"firestore").getImmediate({identifier:n});if(!r._initialized){const s=W_("firestore");s&&Jy(r,...s)}return r}function es(i){return i._firestoreClient||xf(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function xf(i){var t,e,n;const r=i._freezeSettings(),s=function(l,u,c,h){return new Vm(l,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Vf(h.experimentalLongPollingOptions),h.useFetchStreams)}(i._databaseId,((t=i._app)===null||t===void 0?void 0:t.options.appId)||"",i._persistenceKey,r);i._firestoreClient=new Gy(i._authCredentials,i._appCheckCredentials,i._queue,s),!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((n=r.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ur(he.fromBase64String(t))}catch(e){throw new q(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Ur(he.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new q(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new q(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new q(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return dt(this._lat,t._lat)||dt(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0=/^__.*__$/;class n0{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return this.fieldMask!==null?new jn(t,this.data,this.fieldMask,e,this.fieldTransforms):new Xi(t,this.data,e,this.fieldTransforms)}}class Nf{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new jn(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Of(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class Al{constructor(t,e,n,r,s,o){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=r,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new Al(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var e;const n=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.gu({path:n,yu:!1});return r.wu(t),r}Su(t){var e;const n=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return Ks(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(Of(this.fu)&&e0.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class r0{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||uo(t)}Fu(t,e,n,r=!1){return new Al({fu:t,methodName:e,vu:n,path:Jt.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bl(i){const t=i._freezeSettings(),e=uo(i._databaseId);return new r0(i._databaseId,!!t.ignoreUndefinedProperties,e)}function Mf(i,t,e,n,r,s={}){const o=i.Fu(s.merge||s.mergeFields?2:0,t,e,r);Rl("Data must be an object, but it was:",o,n);const l=$f(n,o);let u,c;if(s.merge)u=new Ce(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const _ of s.mergeFields){const p=wa(t,_,e);if(!o.contains(p))throw new q(L.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Bf(h,p)||h.push(p)}u=new Ce(h),c=o.fieldTransforms.filter(_=>u.covers(_.field))}else u=null,c=o.fieldTransforms;return new n0(new me(l),u,c)}class _o extends wl{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof _o}}function Ff(i,t,e,n){const r=i.Fu(1,t,e);Rl("Data must be an object, but it was:",r,n);const s=[],o=me.empty();hr(n,(u,c)=>{const h=Pl(t,u,e);c=qe(c);const _=r.Su(h);if(c instanceof _o)s.push(h);else{const p=po(c,_);p!=null&&(s.push(h),o.set(h,p))}});const l=new Ce(s);return new Nf(o,l,r.fieldTransforms)}function Lf(i,t,e,n,r,s){const o=i.Fu(1,t,e),l=[wa(t,n,e)],u=[r];if(s.length%2!=0)throw new q(L.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)l.push(wa(t,s[p])),u.push(s[p+1]);const c=[],h=me.empty();for(let p=l.length-1;p>=0;--p)if(!Bf(c,l[p])){const m=l[p];let T=u[p];T=qe(T);const g=o.Su(m);if(T instanceof _o)c.push(m);else{const I=po(T,g);I!=null&&(c.push(m),h.set(m,I))}}const _=new Ce(c);return new Nf(h,_,o.fieldTransforms)}function po(i,t){if(Uf(i=qe(i)))return Rl("Unsupported field value:",t,i),$f(i,t);if(i instanceof wl)return function(n,r){if(!Of(r.fu))throw r.Du(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(n,r){const s=[];let o=0;for(const l of n){let u=po(l,r.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(i,t)}return function(n,r){if((n=qe(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Zm(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Gt.fromDate(n);return{timestampValue:zs(r.serializer,s)}}if(n instanceof Gt){const s=new Gt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:zs(r.serializer,s)}}if(n instanceof Il)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ur)return{bytesValue:sf(r.serializer,n._byteString)};if(n instanceof _e){const s=r.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw r.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:sl(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Du(`Unsupported field value: ${El(n)}`)}(i,t)}function $f(i,t){const e={};return xh(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):hr(i,(n,r)=>{const s=po(r,t.pu(n));s!=null&&(e[n]=s)}),{mapValue:{fields:e}}}function Uf(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Gt||i instanceof Il||i instanceof Ur||i instanceof _e||i instanceof wl)}function Rl(i,t,e){if(!Uf(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){const n=El(e);throw n==="an object"?t.Du(i+" a custom object"):t.Du(i+" "+n)}}function wa(i,t,e){if((t=qe(t))instanceof ns)return t._internalPath;if(typeof t=="string")return Pl(i,t);throw Ks("Field path arguments must be of type string or ",i,!1,void 0,e)}const i0=new RegExp("[~\\*/\\[\\]]");function Pl(i,t,e){if(t.search(i0)>=0)throw Ks(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,e);try{return new ns(...t.split("."))._internalPath}catch{throw Ks(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,e)}}function Ks(i,t,e,n,r){const s=n&&!n.isEmpty(),o=r!==void 0;let l=`Function ${t}() called with invalid data`;e&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${n}`),o&&(u+=` in document ${r}`),u+=")"),new q(L.INVALID_ARGUMENT,l+i+u)}function Bf(i,t){return i.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(t,e,n,r,s){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new _e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new s0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(zf("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class s0 extends jf{data(){return super.data()}}function zf(i,t){return typeof t=="string"?Pl(i,t):t instanceof ns?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new q(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class o0{convertValue(t,e="none"){switch(lr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ut(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ar(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Y()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return hr(t,(r,s)=>{n[r]=this.convertValue(s,e)}),n}convertGeoPoint(t){return new Il(Ut(t.latitude),Ut(t.longitude))}convertArray(t,e){return(t.values||[]).map(n=>this.convertValue(n,e))}convertServerTimestamp(t,e){switch(e){case"previous":const n=Ja(t);return n==null?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Ni(t));default:return null}}convertTimestamp(t){const e=Fn(t);return new Gt(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=Pt.fromString(t);It(hf(n));const r=new Oi(n.get(1),n.get(3)),s=new H(n.popFirst(5));return r.isEqual(e)||gn(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(i,t,e){let n;return n=i?e&&(e.merge||e.mergeFields)?i.toFirestore(t,e):i.toFirestore(t):t,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Kf extends jf{constructor(t,e,n,r,s,o){super(t,e,n,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Cs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(zf("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class Cs extends Kf{data(t={}){return super.data(t)}}class Hf{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new yi(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(n=>{t.call(e,new Cs(this._firestore,this._userDataWriter,n.key,n,new yi(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new q(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>{const u=new Cs(r._firestore,r._userDataWriter,l.doc.key,l.doc,new yi(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Cs(r._firestore,r._userDataWriter,l.doc.key,l.doc,new yi(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:a0(l.type),doc:u,oldIndex:c,newIndex:h}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function a0(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(i){i=ke(i,_e);const t=ke(i.firestore,$n);return Qy(es(t),i._key).then(e=>Qf(t,i,e))}class Sl extends o0{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ur(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new _e(this.firestore,null,e)}}function Hs(i){i=ke(i,ts);const t=ke(i.firestore,$n),e=es(t),n=new Sl(t);return qf(i._query),Xy(e,i._query).then(r=>new Hf(t,n,i,r))}function u0(i,t,e){i=ke(i,_e);const n=ke(i.firestore,$n),r=Gf(i.converter,t,e);return Cl(n,[Mf(bl(n),"setDoc",i._key,r,i.converter!==null,e).toMutation(i._key,Ve.none())])}function Wf(i,t,e,...n){i=ke(i,_e);const r=ke(i.firestore,$n),s=bl(r);let o;return o=typeof(t=qe(t))=="string"||t instanceof ns?Lf(s,"updateDoc",i._key,t,e,n):Ff(s,"updateDoc",i._key,t),Cl(r,[o.toMutation(i._key,Ve.exists(!0))])}function Ia(i,...t){var e,n,r;i=qe(i);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||Uc(t[o])||(s=t[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Uc(t[o])){const _=t[o];t[o]=(e=_.next)===null||e===void 0?void 0:e.bind(_),t[o+1]=(n=_.error)===null||n===void 0?void 0:n.bind(_),t[o+2]=(r=_.complete)===null||r===void 0?void 0:r.bind(_)}let u,c,h;if(i instanceof _e)c=ke(i.firestore,$n),h=ro(i._key.path),u={next:_=>{t[o]&&t[o](Qf(c,i,_))},error:t[o+1],complete:t[o+2]};else{const _=ke(i,ts);c=ke(_.firestore,$n),h=_._query;const p=new Sl(c);u={next:m=>{t[o]&&t[o](new Hf(c,p,_,m))},error:t[o+1],complete:t[o+2]},qf(i._query)}return function(p,m,T,g){const I=new Tl(g),C=new yl(m,I,T);return p.asyncQueue.enqueueAndForget(async()=>pl(await Gs(p),C)),()=>{I.$a(),p.asyncQueue.enqueueAndForget(async()=>ml(await Gs(p),C))}}(es(c),h,l,u)}function Cl(i,t){return function(n,r){const s=new mn;return n.asyncQueue.enqueueAndForget(async()=>My(await Wy(n),r,s)),s.promise}(es(i),t)}function Qf(i,t,e){const n=e.docs.get(t._key),r=new Sl(i);return new Kf(i,r,t._key,n,new yi(e.hasPendingWrites,e.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=bl(t)}set(t,e,n){this._verifyNotCommitted();const r=qo(t,this._firestore),s=Gf(r.converter,e,n),o=Mf(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,n);return this._mutations.push(o.toMutation(r._key,Ve.none())),this}update(t,e,n,...r){this._verifyNotCommitted();const s=qo(t,this._firestore);let o;return o=typeof(e=qe(e))=="string"||e instanceof ns?Lf(this._dataReader,"WriteBatch.update",s._key,e,n,r):Ff(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Ve.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=qo(t,this._firestore);return this._mutations=this._mutations.concat(new nl(e._key,Ve.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new q(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function qo(i,t){if((i=qe(i)).firestore!==t)throw new q(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(i){return es(i=ke(i,$n)),new c0(i,t=>Cl(i,t))}(function(t,e=!0){(function(r){Wr=r})(rm),Fs(new Vi("firestore",(n,{instanceIdentifier:r,options:s})=>{const o=n.getProvider("app").getImmediate(),l=new $n(new mm(n.getProvider("auth-internal")),new Tm(n.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new q(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oi(c.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Pr(oc,"4.6.3",t),Pr(oc,"4.6.3","esm2017")})();var f0="firebase",d0="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pr(f0,d0,"app");const _0={apiKey:"AIzaSyDrTR0lVaKeBrqIlhJiwst2-KsEwBtE538",authDomain:"bob-game-90e47.firebaseapp.com",projectId:"bob-game-90e47",storageBucket:"bob-game-90e47.appspot.com",messagingSenderId:"880391810715",appId:"1:880391810715:web:f537e6f4c16b7412e7a03e",measurementId:"G-FL5LYSNQ76"},p0=Eh(_0),Ye=t0(p0);function Bc(i){let t,e,n,r,s;return e=new ge({props:{$$slots:{default:[m0]},$$scope:{ctx:i}}}),e.$on("click",i[2]),r=new ge({props:{$$slots:{default:[g0]},$$scope:{ctx:i}}}),r.$on("click",i[3]),{c(){t=B("div"),vt(e.$$.fragment),n=Q(),vt(r.$$.fragment)},l(o){t=j(o,"DIV",{});var l=K(t);Tt(e.$$.fragment,l),n=X(l),Tt(r.$$.fragment,l),l.forEach(F)},m(o,l){W(o,t,l),Et(e,t,null),M(t,n),Et(r,t,null),s=!0},p(o,l){const u={};l&64&&(u.$$scope={dirty:l,ctx:o}),e.$set(u);const c={};l&64&&(c.$$scope={dirty:l,ctx:o}),r.$set(c)},i(o){s||(J(e.$$.fragment,o),J(r.$$.fragment,o),s=!0)},o(o){rt(e.$$.fragment,o),rt(r.$$.fragment,o),s=!1},d(o){o&&F(t),wt(e),wt(r)}}}function m0(i){let t;return{c(){t=tt("Start")},l(e){t=et(e,"Start")},m(e,n){W(e,t,n)},d(e){e&&F(t)}}}function g0(i){let t;return{c(){t=tt("Instellingen")},l(e){t=et(e,"Instellingen")},m(e,n){W(e,t,n)},d(e){e&&F(t)}}}function jc(i){let t,e,n,r,s,o,l;return e=new ge({props:{$$slots:{default:[y0]},$$scope:{ctx:i}}}),e.$on("click",i[1]),r=new ge({props:{$$slots:{default:[v0]},$$scope:{ctx:i}}}),r.$on("click",i[4]),o=new ge({props:{theme:"red",$$slots:{default:[T0]},$$scope:{ctx:i}}}),o.$on("click",i[5]),{c(){t=B("div"),vt(e.$$.fragment),n=Q(),vt(r.$$.fragment),s=Q(),vt(o.$$.fragment)},l(u){t=j(u,"DIV",{});var c=K(t);Tt(e.$$.fragment,c),n=X(c),Tt(r.$$.fragment,c),s=X(c),Tt(o.$$.fragment,c),c.forEach(F)},m(u,c){W(u,t,c),Et(e,t,null),M(t,n),Et(r,t,null),M(t,s),Et(o,t,null),l=!0},p(u,c){const h={};c&64&&(h.$$scope={dirty:c,ctx:u}),e.$set(h);const _={};c&64&&(_.$$scope={dirty:c,ctx:u}),r.$set(_);const p={};c&64&&(p.$$scope={dirty:c,ctx:u}),o.$set(p)},i(u){l||(J(e.$$.fragment,u),J(r.$$.fragment,u),J(o.$$.fragment,u),l=!0)},o(u){rt(e.$$.fragment,u),rt(r.$$.fragment,u),rt(o.$$.fragment,u),l=!1},d(u){u&&F(t),wt(e),wt(r),wt(o)}}}function y0(i){let t;return{c(){t=tt("Reset Schalen")},l(e){t=et(e,"Reset Schalen")},m(e,n){W(e,t,n)},d(e){e&&F(t)}}}function v0(i){let t;return{c(){t=tt("Upload CSV")},l(e){t=et(e,"Upload CSV")},m(e,n){W(e,t,n)},d(e){e&&F(t)}}}function T0(i){let t;return{c(){t=tt("Terug")},l(e){t=et(e,"Terug")},m(e,n){W(e,t,n)},d(e){e&&F(t)}}}function E0(i){let t,e,n,r=!i[0]&&Bc(i),s=i[0]&&jc(i);return{c(){r&&r.c(),t=Q(),s&&s.c(),e=Nn()},l(o){r&&r.l(o),t=X(o),s&&s.l(o),e=Nn()},m(o,l){r&&r.m(o,l),W(o,t,l),s&&s.m(o,l),W(o,e,l),n=!0},p(o,l){o[0]?r&&(Si(),rt(r,1,1,()=>{r=null}),Ci()):r?(r.p(o,l),l&1&&J(r,1)):(r=Bc(o),r.c(),J(r,1),r.m(t.parentNode,t)),o[0]?s?(s.p(o,l),l&1&&J(s,1)):(s=jc(o),s.c(),J(s,1),s.m(e.parentNode,e)):s&&(Si(),rt(s,1,1,()=>{s=null}),Ci())},i(o){n||(J(r),J(s),n=!0)},o(o){rt(r),rt(s),n=!1},d(o){o&&(F(t),F(e)),r&&r.d(o),s&&s.d(o)}}}function w0(i){let t,e;return t=new Hi({props:{$$slots:{default:[E0]},$$scope:{ctx:i}}}),{c(){vt(t.$$.fragment)},l(n){Tt(t.$$.fragment,n)},m(n,r){Et(t,n,r),e=!0},p(n,[r]){const s={};r&65&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(J(t.$$.fragment,n),e=!0)},o(n){rt(t.$$.fragment,n),e=!1},d(n){wt(t,n)}}}function I0(i,t,e){let n=!1;return[n,async()=>{const c=$r(Ye,"stakeholders"),h=await Hs(c);let _=[];const p=h.docs[0].data().values.length;for(let m=0;m<p;m++)_.push(0);console.log();for(const m of h.docs)await Wf(m.ref,{values:_});alert("Alle schalen staan weer op 0!")},()=>ze.set(1),()=>e(0,n=!n),()=>ze.set(5),()=>e(0,n=!n)]}class A0 extends un{constructor(t){super(),cn(this,t,I0,w0,Ge,{})}}const zc=Kr([]);function qc(i,t,e){const n=i.slice();return n[15]=t[e],n[17]=e,n}function Gc(i){let t,e,n=i[2].id+"",r,s,o,l,u='<tr><th class="px-2">Naam</th> <th class="px-2">Schaal</th> <th class="px-2">Geholpen mensen</th> <th class="px-2">Kosten</th> <th class="px-2">Vrijwilligers</th></tr>',c,h,_,p,m,T="Totaal",g,I,C,S,k,V,x,O=i[0].toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"",w,v,y,b,R,P,A,it,ct,_t,lt,Ct=i[5].toFixed(0)+"",Ie,Oe,Be,gt,At=i[4].toFixed(0)+"",te,Qt,Yr,Ke,Jr,He,pe,En,Ae,ee,We=sn(i[3]),Mt=[];for(let st=0;st<We.length;st+=1)Mt[st]=Kc(qc(i,We,st));return pe=new ge({props:{theme:"red",$$slots:{default:[b0]},$$scope:{ctx:i}}}),pe.$on("click",i[12]),Ae=new ge({props:{$$slots:{default:[R0]},$$scope:{ctx:i}}}),Ae.$on("click",i[13]),{c(){t=B("div"),e=B("div"),r=tt(n),s=Q(),o=B("table"),l=B("thead"),l.innerHTML=u,c=Q(),h=B("tbody");for(let st=0;st<Mt.length;st+=1)Mt[st].c();_=Q(),p=B("tr"),m=B("td"),m.textContent=T,g=Q(),I=B("td"),C=Q(),S=B("td"),k=tt(i[1]),V=Q(),x=B("td"),w=tt(O),v=Q(),y=B("td"),b=tt(i[6]),R=Q(),P=B("tr"),A=B("td"),it=Q(),ct=B("td"),_t=Q(),lt=B("td"),Ie=tt(Ct),Oe=tt("% van het doel"),Be=Q(),gt=B("td"),te=tt(At),Qt=tt("% van het budget"),Yr=Q(),Ke=B("td"),Jr=Q(),He=B("div"),vt(pe.$$.fragment),En=Q(),vt(Ae.$$.fragment),this.h()},l(st){t=j(st,"DIV",{class:!0});var bt=K(t);e=j(bt,"DIV",{class:!0});var Me=K(e);r=et(Me,n),Me.forEach(F),s=X(bt),o=j(bt,"TABLE",{class:!0});var Qe=K(o);l=j(Qe,"THEAD",{"data-svelte-h":!0}),On(l)!=="svelte-1wftw8g"&&(l.innerHTML=u),c=X(Qe),h=j(Qe,"TBODY",{});var Dt=K(h);for(let mr=0;mr<Mt.length;mr+=1)Mt[mr].l(Dt);_=X(Dt),p=j(Dt,"TR",{class:!0});var ne=K(p);m=j(ne,"TD",{class:!0,"data-svelte-h":!0}),On(m)!=="svelte-iomj7a"&&(m.textContent=T),g=X(ne),I=j(ne,"TD",{class:!0}),K(I).forEach(F),C=X(ne),S=j(ne,"TD",{class:!0});var is=K(S);k=et(is,i[1]),is.forEach(F),V=X(ne),x=j(ne,"TD",{class:!0});var _r=K(x);w=et(_r,O),_r.forEach(F),v=X(ne),y=j(ne,"TD",{class:!0});var pr=K(y);b=et(pr,i[6]),pr.forEach(F),ne.forEach(F),R=X(Dt),P=j(Dt,"TR",{});var be=K(P);A=j(be,"TD",{class:!0}),K(A).forEach(F),it=X(be),ct=j(be,"TD",{class:!0}),K(ct).forEach(F),_t=X(be),lt=j(be,"TD",{class:!0});var Lt=K(lt);Ie=et(Lt,Ct),Oe=et(Lt,"% van het doel"),Lt.forEach(F),Be=X(be),gt=j(be,"TD",{class:!0});var zt=K(gt);te=et(zt,At),Qt=et(zt,"% van het budget"),zt.forEach(F),Yr=X(be),Ke=j(be,"TD",{class:!0}),K(Ke).forEach(F),be.forEach(F),Dt.forEach(F),Qe.forEach(F),Jr=X(bt),He=j(bt,"DIV",{class:!0});var hn=K(He);Tt(pe.$$.fragment,hn),En=X(hn),Tt(Ae.$$.fragment,hn),hn.forEach(F),bt.forEach(F),this.h()},h(){G(e,"class","font-bold text-2xl mb-4"),G(m,"class","px-2 py-1"),G(I,"class","px-2 py-1"),G(S,"class","px-2 py-1"),G(x,"class","px-2 py-1"),G(y,"class","px-2 py-1"),G(p,"class","font-bold border-t-2 border-black"),G(A,"class","px-2 py-1"),G(ct,"class","px-2 py-1"),G(lt,"class","px-2 py-1"),vs(lt,"bg-green-300",i[5]>=100),G(gt,"class","px-2 py-1"),vs(gt,"bg-red-300",i[4]>100),G(Ke,"class","px-2 py-1"),G(o,"class","text-left"),G(He,"class","flex gap-x-2"),G(t,"class","p-10 bg-yellow-100 shadow-lg flex flex-col")},m(st,bt){W(st,t,bt),M(t,e),M(e,r),M(t,s),M(t,o),M(o,l),M(o,c),M(o,h);for(let Me=0;Me<Mt.length;Me+=1)Mt[Me]&&Mt[Me].m(h,null);M(h,_),M(h,p),M(p,m),M(p,g),M(p,I),M(p,C),M(p,S),M(S,k),M(p,V),M(p,x),M(x,w),M(p,v),M(p,y),M(y,b),M(h,R),M(h,P),M(P,A),M(P,it),M(P,ct),M(P,_t),M(P,lt),M(lt,Ie),M(lt,Oe),M(P,Be),M(P,gt),M(gt,te),M(gt,Qt),M(P,Yr),M(P,Ke),M(t,Jr),M(t,He),Et(pe,He,null),M(He,En),Et(Ae,He,null),ee=!0},p(st,bt){if((!ee||bt&4)&&n!==(n=st[2].id+"")&&jt(r,n),bt&140){We=sn(st[3]);let Dt;for(Dt=0;Dt<We.length;Dt+=1){const ne=qc(st,We,Dt);Mt[Dt]?Mt[Dt].p(ne,bt):(Mt[Dt]=Kc(ne),Mt[Dt].c(),Mt[Dt].m(h,_))}for(;Dt<Mt.length;Dt+=1)Mt[Dt].d(1);Mt.length=We.length}(!ee||bt&2)&&jt(k,st[1]),(!ee||bt&1)&&O!==(O=st[0].toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"")&&jt(w,O),(!ee||bt&64)&&jt(b,st[6]),(!ee||bt&32)&&Ct!==(Ct=st[5].toFixed(0)+"")&&jt(Ie,Ct),(!ee||bt&32)&&vs(lt,"bg-green-300",st[5]>=100),(!ee||bt&16)&&At!==(At=st[4].toFixed(0)+"")&&jt(te,At),(!ee||bt&16)&&vs(gt,"bg-red-300",st[4]>100);const Me={};bt&262144&&(Me.$$scope={dirty:bt,ctx:st}),pe.$set(Me);const Qe={};bt&262144&&(Qe.$$scope={dirty:bt,ctx:st}),Ae.$set(Qe)},i(st){ee||(J(pe.$$.fragment,st),J(Ae.$$.fragment,st),ee=!0)},o(st){rt(pe.$$.fragment,st),rt(Ae.$$.fragment,st),ee=!1},d(st){st&&F(t),Ki(Mt,st),wt(pe),wt(Ae)}}}function Kc(i){let t,e,n=i[15].naam.charAt(0).toUpperCase()+i[15].naam.slice(1)+"",r,s,o,l,u,c,h,_=Di(i[2].values[i[17]],i[15])+"",p,m,T,g=xs(i[2].values[i[17]],i[15]).toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"",I,C,S,k=Ns(i[2].values[i[17]],i[15])+"",V,x,O;function w(...v){return i[11](i[17],...v)}return{c(){t=B("tr"),e=B("td"),r=tt(n),s=Q(),o=B("td"),l=B("input"),c=Q(),h=B("td"),p=tt(_),m=Q(),T=B("td"),I=tt(g),C=Q(),S=B("td"),V=tt(k),this.h()},l(v){t=j(v,"TR",{});var y=K(t);e=j(y,"TD",{class:!0});var b=K(e);r=et(b,n),b.forEach(F),s=X(y),o=j(y,"TD",{class:!0});var R=K(o);l=j(R,"INPUT",{type:!0,min:!0,max:!0,class:!0}),R.forEach(F),c=X(y),h=j(y,"TD",{class:!0});var P=K(h);p=et(P,_),P.forEach(F),m=X(y),T=j(y,"TD",{class:!0});var A=K(T);I=et(A,g),A.forEach(F),C=X(y),S=j(y,"TD",{class:!0});var it=K(S);V=et(it,k),it.forEach(F),y.forEach(F),this.h()},h(){G(e,"class","px-2"),G(l,"type","range"),l.value=u=i[2].values[i[17]],G(l,"min","0"),G(l,"max","10"),G(l,"class","slider accent-blue-500 align-middle appearance-none w-full cursor-pointer h-1 bg-red-500"),G(o,"class","px-2"),G(h,"class","px-2"),G(T,"class","px-2"),G(S,"class","px-2")},m(v,y){W(v,t,y),M(t,e),M(e,r),M(t,s),M(t,o),M(o,l),M(t,c),M(t,h),M(h,p),M(t,m),M(t,T),M(T,I),M(t,C),M(t,S),M(S,V),x||(O=Ga(l,"input",w),x=!0)},p(v,y){i=v,y&8&&n!==(n=i[15].naam.charAt(0).toUpperCase()+i[15].naam.slice(1)+"")&&jt(r,n),y&4&&u!==(u=i[2].values[i[17]])&&(l.value=u),y&12&&_!==(_=Di(i[2].values[i[17]],i[15])+"")&&jt(p,_),y&12&&g!==(g=xs(i[2].values[i[17]],i[15]).toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"")&&jt(I,g),y&12&&k!==(k=Ns(i[2].values[i[17]],i[15])+"")&&jt(V,k)},d(v){v&&F(t),x=!1,O()}}}function b0(i){let t;return{c(){t=tt("Terug")},l(e){t=et(e,"Terug")},m(e,n){W(e,t,n)},d(e){e&&F(t)}}}function R0(i){let t;return{c(){t=tt("Klaar")},l(e){t=et(e,"Klaar")},m(e,n){W(e,t,n)},d(e){e&&F(t)}}}function P0(i){let t,e,n=i[2]&&Gc(i);return{c(){n&&n.c(),t=Nn()},l(r){n&&n.l(r),t=Nn()},m(r,s){n&&n.m(r,s),W(r,t,s),e=!0},p(r,[s]){r[2]?n?(n.p(r,s),s&4&&J(n,1)):(n=Gc(r),n.c(),J(n,1),n.m(t.parentNode,t)):n&&(Si(),rt(n,1,1,()=>{n=null}),Ci())},i(r){e||(J(n),e=!0)},o(r){rt(n),e=!1},d(r){r&&F(t),n&&n.d(r)}}}function S0(i,t,e){let n,r,s,o,l,u,c,h,_,p;Ze(i,zc,S=>e(8,c=S)),Ze(i,ea,S=>e(3,h=S)),Ze(i,Ka,S=>e(9,_=S)),Ze(i,kr,S=>e(10,p=S)),qa(()=>{const S=$r(Ye,"maatregelen"),k=$r(Ye,"doelen");Ia(S,V=>{ea.set(V.docs.map(x=>({id:x.id,...x.data()})))}),Ia(k,V=>{zc.set(V.docs.map(x=>({doel:Number(x.data().doel),budget:Number(x.data().budget),...x.data()})))})});const m=(S,k)=>{const V=S.target;e(2,n.values[k]=V.valueAsNumber,n),T()},T=async()=>{try{const S=n.id,k=Ea(Ye,"stakeholders",S);(await l0(k)).exists()?await Wf(k,{values:n.values}):await u0(k,{values:n.values}),console.log("Document successfully updated!")}catch(S){console.error("Error updating document: ",S)}},g=(S,k)=>m(k,S),I=()=>{ze.set(2)},C=()=>{ze.set(4)};return i.$$.update=()=>{var S,k;i.$$.dirty&1536&&e(2,n=p.find(V=>V.id===(_==null?void 0:_.id))),i.$$.dirty&12&&e(1,r=h.reduce((V,x,O)=>{var w;return V+Di(((w=n==null?void 0:n.values)==null?void 0:w[O])??0,x)},0)),i.$$.dirty&12&&e(0,s=h.reduce((V,x,O)=>{var w;return V+xs(((w=n==null?void 0:n.values)==null?void 0:w[O])??0,x)},0)),i.$$.dirty&12&&e(6,o=h.reduce((V,x,O)=>{var w;return V+Ns(((w=n==null?void 0:n.values)==null?void 0:w[O])??0,x)},0)),i.$$.dirty&258&&e(5,l=r/((S=c[0])==null?void 0:S.doel)*100),i.$$.dirty&257&&e(4,u=s/((k=c[0])==null?void 0:k.budget)*100)},[s,r,n,h,u,l,o,m,c,_,p,g,I,C]}class C0 extends un{constructor(t){super(),cn(this,t,S0,P0,Ge,{})}}function Hc(i){let t,e;return t=new Hi({props:{$$slots:{default:[k0]},$$scope:{ctx:i}}}),{c(){vt(t.$$.fragment)},l(n){Tt(t.$$.fragment,n)},m(n,r){Et(t,n,r),e=!0},p(n,r){const s={};r&9&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(J(t.$$.fragment,n),e=!0)},o(n){rt(t.$$.fragment,n),e=!1},d(n){wt(t,n)}}}function D0(i){let t;return{c(){t=tt("Terug")},l(e){t=et(e,"Terug")},m(e,n){W(e,t,n)},d(e){e&&F(t)}}}function V0(i){let t;return{c(){t=tt("Klaar")},l(e){t=et(e,"Klaar")},m(e,n){W(e,t,n)},d(e){e&&F(t)}}}function k0(i){let t,e=i[0].id+"",n,r,s,o=i[0].description+"",l,u,c,h,_,p,m;return h=new ge({props:{theme:"red",$$slots:{default:[D0]},$$scope:{ctx:i}}}),h.$on("click",i[1]),p=new ge({props:{$$slots:{default:[V0]},$$scope:{ctx:i}}}),p.$on("click",i[2]),{c(){t=B("h2"),n=tt(e),r=Q(),s=B("p"),l=tt(o),u=Q(),c=B("div"),vt(h.$$.fragment),_=Q(),vt(p.$$.fragment),this.h()},l(T){t=j(T,"H2",{class:!0});var g=K(t);n=et(g,e),g.forEach(F),r=X(T),s=j(T,"P",{class:!0});var I=K(s);l=et(I,o),I.forEach(F),u=X(T),c=j(T,"DIV",{class:!0});var C=K(c);Tt(h.$$.fragment,C),_=X(C),Tt(p.$$.fragment,C),C.forEach(F),this.h()},h(){G(t,"class","font-bold text-2xl"),G(s,"class","lg:max-w-[400px]"),G(c,"class","flex gap-x-2")},m(T,g){W(T,t,g),M(t,n),W(T,r,g),W(T,s,g),M(s,l),W(T,u,g),W(T,c,g),Et(h,c,null),M(c,_),Et(p,c,null),m=!0},p(T,g){(!m||g&1)&&e!==(e=T[0].id+"")&&jt(n,e),(!m||g&1)&&o!==(o=T[0].description+"")&&jt(l,o);const I={};g&8&&(I.$$scope={dirty:g,ctx:T}),h.$set(I);const C={};g&8&&(C.$$scope={dirty:g,ctx:T}),p.$set(C)},i(T){m||(J(h.$$.fragment,T),J(p.$$.fragment,T),m=!0)},o(T){rt(h.$$.fragment,T),rt(p.$$.fragment,T),m=!1},d(T){T&&(F(t),F(r),F(s),F(u),F(c)),wt(h),wt(p)}}}function x0(i){let t,e,n=i[0]&&Hc(i);return{c(){n&&n.c(),t=Nn()},l(r){n&&n.l(r),t=Nn()},m(r,s){n&&n.m(r,s),W(r,t,s),e=!0},p(r,[s]){r[0]?n?(n.p(r,s),s&1&&J(n,1)):(n=Hc(r),n.c(),J(n,1),n.m(t.parentNode,t)):n&&(Si(),rt(n,1,1,()=>{n=null}),Ci())},i(r){e||(J(n),e=!0)},o(r){rt(n),e=!1},d(r){r&&F(t),n&&n.d(r)}}}function N0(i,t,e){let n;return Ze(i,Ka,o=>e(0,n=o)),[n,()=>{ze.set(1)},()=>{ze.set(3)}]}class O0 extends un{constructor(t){super(),cn(this,t,N0,x0,Ge,{})}}function Wc(i,t,e){const n=i.slice();return n[5]=t[e],n}function M0(i){let t,e='<svg aria-hidden="true" class="w-8 h-8 text-blue-500 animate-spin fill-white" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z" fill="currentColor"></path><path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z" fill="currentFill"></path></svg> <span class="sr-only">Loading...</span>';return{c(){t=B("div"),t.innerHTML=e,this.h()},l(n){t=j(n,"DIV",{role:!0,"data-svelte-h":!0}),On(t)!=="svelte-1enh005"&&(t.innerHTML=e),this.h()},h(){G(t,"role","status")},m(n,r){W(n,t,r)},d(n){n&&F(t)}}}function F0(i){let t,e='Er is iets misgegaan bij het ophalen van de data. <a class="text-blue-500 underline" href="/upload">upload een excel bestand</a> en probeer het opnieuw.';return{c(){t=B("div"),t.innerHTML=e,this.h()},l(n){t=j(n,"DIV",{class:!0,"data-svelte-h":!0}),On(t)!=="svelte-1s9ns9h"&&(t.innerHTML=e),this.h()},h(){G(t,"class","text-red-500")},m(n,r){W(n,t,r)},d(n){n&&F(t)}}}function L0(i){let t=i[5].id+"",e;return{c(){e=tt(t)},l(n){e=et(n,t)},m(n,r){W(n,e,r)},p(n,r){r&2&&t!==(t=n[5].id+"")&&jt(e,t)},d(n){n&&F(e)}}}function Qc(i){let t,e;function n(){return i[3](i[5])}return t=new ge({props:{$$slots:{default:[L0]},$$scope:{ctx:i}}}),t.$on("click",n),{c(){vt(t.$$.fragment)},l(r){Tt(t.$$.fragment,r)},m(r,s){Et(t,r,s),e=!0},p(r,s){i=r;const o={};s&258&&(o.$$scope={dirty:s,ctx:i}),t.$set(o)},i(r){e||(J(t.$$.fragment,r),e=!0)},o(r){rt(t.$$.fragment,r),e=!1},d(r){wt(t,r)}}}function $0(i){let t;return{c(){t=tt("Terug")},l(e){t=et(e,"Terug")},m(e,n){W(e,t,n)},d(e){e&&F(t)}}}function U0(i){let t,e="Kies je doelgroep om te vertegenwoordigen",n,r,s,o,l,u;function c(g,I){if(g[0])return F0;if(g[1].length===0)return M0}let h=c(i),_=h&&h(i),p=sn(i[1]),m=[];for(let g=0;g<p.length;g+=1)m[g]=Qc(Wc(i,p,g));const T=g=>rt(m[g],1,1,()=>{m[g]=null});return l=new ge({props:{theme:"red",$$slots:{default:[$0]},$$scope:{ctx:i}}}),l.$on("click",i[4]),{c(){t=B("div"),t.textContent=e,n=Q(),r=B("div"),_&&_.c(),s=Q();for(let g=0;g<m.length;g+=1)m[g].c();o=Q(),vt(l.$$.fragment),this.h()},l(g){t=j(g,"DIV",{class:!0,"data-svelte-h":!0}),On(t)!=="svelte-a914y3"&&(t.textContent=e),n=X(g),r=j(g,"DIV",{class:!0});var I=K(r);_&&_.l(I),s=X(I);for(let C=0;C<m.length;C+=1)m[C].l(I);o=X(I),Tt(l.$$.fragment,I),I.forEach(F),this.h()},h(){G(t,"class","font-bold text-2xl mb-4"),G(r,"class","flex gap-x-2")},m(g,I){W(g,t,I),W(g,n,I),W(g,r,I),_&&_.m(r,null),M(r,s);for(let C=0;C<m.length;C+=1)m[C]&&m[C].m(r,null);M(r,o),Et(l,r,null),u=!0},p(g,I){if(h!==(h=c(g))&&(_&&_.d(1),_=h&&h(g),_&&(_.c(),_.m(r,s))),I&2){p=sn(g[1]);let S;for(S=0;S<p.length;S+=1){const k=Wc(g,p,S);m[S]?(m[S].p(k,I),J(m[S],1)):(m[S]=Qc(k),m[S].c(),J(m[S],1),m[S].m(r,o))}for(Si(),S=p.length;S<m.length;S+=1)T(S);Ci()}const C={};I&256&&(C.$$scope={dirty:I,ctx:g}),l.$set(C)},i(g){if(!u){for(let I=0;I<p.length;I+=1)J(m[I]);J(l.$$.fragment,g),u=!0}},o(g){m=m.filter(Boolean);for(let I=0;I<m.length;I+=1)rt(m[I]);rt(l.$$.fragment,g),u=!1},d(g){g&&(F(t),F(n),F(r)),_&&_.d(),Ki(m,g),wt(l)}}}function B0(i){let t,e;return t=new Hi({props:{$$slots:{default:[U0]},$$scope:{ctx:i}}}),{c(){vt(t.$$.fragment)},l(n){Tt(t.$$.fragment,n)},m(n,r){Et(t,n,r),e=!0},p(n,[r]){const s={};r&259&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(J(t.$$.fragment,n),e=!0)},o(n){rt(t.$$.fragment,n),e=!1},d(n){wt(t,n)}}}const j0=5e3;function z0(i,t,e){let n,r;Ze(i,kr,u=>e(1,r=u));const s=Kr(!1);return Ze(i,s,u=>e(0,n=u)),qa(()=>{const u=setTimeout(()=>{s.set(!0)},j0),c=kr.subscribe(h=>{h.length>0&&clearTimeout(u)});return()=>{clearTimeout(u),c()}}),[n,r,s,u=>{Ka.set(u),ze.set(2)},()=>{ze.set(0)}]}class q0 extends un{constructor(t){super(),cn(this,t,z0,B0,Ge,{})}}function _n(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Xf(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.__proto__=t}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var xe={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Br={duration:.5,overwrite:!1,delay:0},Dl,ue,St,Le=1e8,yt=1/Le,Aa=Math.PI*2,G0=Aa/4,K0=0,Yf=Math.sqrt,H0=Math.cos,W0=Math.sin,Wt=function(t){return typeof t=="string"},Ot=function(t){return typeof t=="function"},vn=function(t){return typeof t=="number"},Vl=function(t){return typeof t>"u"},ln=function(t){return typeof t=="object"},ye=function(t){return t!==!1},kl=function(){return typeof window<"u"},As=function(t){return Ot(t)||Wt(t)},Jf=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},ce=Array.isArray,ba=/(?:-?\.?\d|\.)+/gi,Zf=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,br=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Go=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,td=/[+-]=-?[.\d]+/,ed=/[^,'"\[\]\s]+/gi,Q0=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Vt,Xe,Ra,xl,Ne={},Ws={},nd,rd=function(t){return(Ws=ur(t,Ne))&&we},Nl=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},$i=function(t,e){return!e&&console.warn(t)},id=function(t,e){return t&&(Ne[t]=e)&&Ws&&(Ws[t]=e)||Ne},Ui=function(){return 0},X0={suppressEvents:!0,isStart:!0,kill:!1},Ds={suppressEvents:!0,kill:!1},Y0={suppressEvents:!0},Ol={},kn=[],Pa={},sd,Pe={},Ko={},Xc=30,Vs=[],Ml="",Fl=function(t){var e=t[0],n,r;if(ln(e)||Ot(e)||(t=[t]),!(n=(e._gsap||{}).harness)){for(r=Vs.length;r--&&!Vs[r].targetTest(e););n=Vs[r]}for(r=t.length;r--;)t[r]&&(t[r]._gsap||(t[r]._gsap=new Cd(t[r],n)))||t.splice(r,1);return t},er=function(t){return t._gsap||Fl($e(t))[0]._gsap},od=function(t,e,n){return(n=t[e])&&Ot(n)?t[e]():Vl(n)&&t.getAttribute&&t.getAttribute(e)||n},ve=function(t,e){return(t=t.split(",")).forEach(e)||t},Ft=function(t){return Math.round(t*1e5)/1e5||0},Ht=function(t){return Math.round(t*1e7)/1e7||0},Cr=function(t,e){var n=e.charAt(0),r=parseFloat(e.substr(2));return t=parseFloat(t),n==="+"?t+r:n==="-"?t-r:n==="*"?t*r:t/r},J0=function(t,e){for(var n=e.length,r=0;t.indexOf(e[r])<0&&++r<n;);return r<n},Qs=function(){var t=kn.length,e=kn.slice(0),n,r;for(Pa={},kn.length=0,n=0;n<t;n++)r=e[n],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},ad=function(t,e,n,r){kn.length&&!ue&&Qs(),t.render(e,n,ue&&e<0&&(t._initted||t._startAt)),kn.length&&!ue&&Qs()},ld=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(ed).length<2?e:Wt(t)?t.trim():t},ud=function(t){return t},Ue=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},Z0=function(t){return function(e,n){for(var r in n)r in e||r==="duration"&&t||r==="ease"||(e[r]=n[r])}},ur=function(t,e){for(var n in e)t[n]=e[n];return t},Yc=function i(t,e){for(var n in e)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(t[n]=ln(e[n])?i(t[n]||(t[n]={}),e[n]):e[n]);return t},Xs=function(t,e){var n={},r;for(r in t)r in e||(n[r]=t[r]);return n},bi=function(t){var e=t.parent||Vt,n=t.keyframes?Z0(ce(t.keyframes)):Ue;if(ye(t.inherit))for(;e;)n(t,e.vars.defaults),e=e.parent||e._dp;return t},tv=function(t,e){for(var n=t.length,r=n===e.length;r&&n--&&t[n]===e[n];);return n<0},cd=function(t,e,n,r,s){var o=t[r],l;if(s)for(l=e[s];o&&o[s]>l;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[r]=e,e._prev=o,e.parent=e._dp=t,e},mo=function(t,e,n,r){n===void 0&&(n="_first"),r===void 0&&(r="_last");var s=e._prev,o=e._next;s?s._next=o:t[n]===e&&(t[n]=o),o?o._prev=s:t[r]===e&&(t[r]=s),e._next=e._prev=e.parent=null},Un=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},nr=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},ev=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},Sa=function(t,e,n,r){return t._startAt&&(ue?t._startAt.revert(Ds):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,r))},nv=function i(t){return!t||t._ts&&i(t.parent)},Jc=function(t){return t._repeat?jr(t._tTime,t=t.duration()+t._rDelay)*t:0},jr=function(t,e){var n=Math.floor(t/=e);return t&&n===t?n-1:n},Ys=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},go=function(t){return t._end=Ht(t._start+(t._tDur/Math.abs(t._ts||t._rts||yt)||0))},yo=function(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=Ht(n._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),go(t),n._dirty||nr(n,t)),t},hd=function(t,e){var n;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(n=Ys(t.rawTime(),e),(!e._dur||rs(0,e.totalDuration(),n)-e._tTime>yt)&&e.render(n,!0)),nr(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-yt}},Je=function(t,e,n,r){return e.parent&&Un(e),e._start=Ht((vn(n)?n:n||t!==Vt?Fe(t,n,e):t._time)+e._delay),e._end=Ht(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),cd(t,e,"_first","_last",t._sort?"_start":0),Ca(e)||(t._recent=e),r||hd(t,e),t._ts<0&&yo(t,t._tTime),t},fd=function(t,e){return(Ne.ScrollTrigger||Nl("scrollTrigger",e))&&Ne.ScrollTrigger.create(e,t)},dd=function(t,e,n,r,s){if($l(t,e,s),!t._initted)return 1;if(!n&&t._pt&&!ue&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&sd!==Se.frame)return kn.push(t),t._lazy=[s,r],1},rv=function i(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||i(e))},Ca=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},iv=function(t,e,n,r){var s=t.ratio,o=e<0||!e&&(!t._start&&rv(t)&&!(!t._initted&&Ca(t))||(t._ts<0||t._dp._ts<0)&&!Ca(t))?0:1,l=t._rDelay,u=0,c,h,_;if(l&&t._repeat&&(u=rs(0,t._tDur,e),h=jr(u,l),t._yoyo&&h&1&&(o=1-o),h!==jr(t._tTime,l)&&(s=1-o,t.vars.repeatRefresh&&t._initted&&t.invalidate())),o!==s||ue||r||t._zTime===yt||!e&&t._zTime){if(!t._initted&&dd(t,e,r,n,u))return;for(_=t._zTime,t._zTime=e||(n?yt:0),n||(n=e&&!_),t.ratio=o,t._from&&(o=1-o),t._time=0,t._tTime=u,c=t._pt;c;)c.r(o,c.d),c=c._next;e<0&&Sa(t,e,n,!0),t._onUpdate&&!n&&De(t,"onUpdate"),u&&t._repeat&&!n&&t.parent&&De(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===o&&(o&&Un(t,1),!n&&!ue&&(De(t,o?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},sv=function(t,e,n){var r;if(n>e)for(r=t._first;r&&r._start<=n;){if(r.data==="isPause"&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=n;){if(r.data==="isPause"&&r._start<e)return r;r=r._prev}},zr=function(t,e,n,r){var s=t._repeat,o=Ht(e)||0,l=t._tTime/t._tDur;return l&&!r&&(t._time*=o/t._dur),t._dur=o,t._tDur=s?s<0?1e10:Ht(o*(s+1)+t._rDelay*s):o,l>0&&!r&&yo(t,t._tTime=t._tDur*l),t.parent&&go(t),n||nr(t.parent,t),t},Zc=function(t){return t instanceof de?nr(t):zr(t,t._dur)},ov={_start:0,endTime:Ui,totalDuration:Ui},Fe=function i(t,e,n){var r=t.labels,s=t._recent||ov,o=t.duration()>=Le?s.endTime(!1):t._dur,l,u,c;return Wt(e)&&(isNaN(e)||e in r)?(u=e.charAt(0),c=e.substr(-1)==="%",l=e.indexOf("="),u==="<"||u===">"?(l>=0&&(e=e.replace(/=/,"")),(u==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(e.substr(1))||0)*(c?(l<0?s:n).totalDuration()/100:1)):l<0?(e in r||(r[e]=o),r[e]):(u=parseFloat(e.charAt(l-1)+e.substr(l+1)),c&&n&&(u=u/100*(ce(n)?n[0]:n).totalDuration()),l>1?i(t,e.substr(0,l-1),n)+u:o+u)):e==null?o:+e},Ri=function(t,e,n){var r=vn(e[1]),s=(r?2:1)+(t<2?0:1),o=e[s],l,u;if(r&&(o.duration=e[1]),o.parent=n,t){for(l=o,u=n;u&&!("immediateRender"in l);)l=u.vars.defaults||{},u=ye(u.vars.inherit)&&u.parent;o.immediateRender=ye(l.immediateRender),t<2?o.runBackwards=1:o.startAt=e[s-1]}return new Bt(e[0],o,e[s+1])},zn=function(t,e){return t||t===0?e(t):e},rs=function(t,e,n){return n<t?t:n>e?e:n},le=function(t,e){return!Wt(t)||!(e=Q0.exec(t))?"":e[1]},av=function(t,e,n){return zn(n,function(r){return rs(t,e,r)})},Da=[].slice,_d=function(t,e){return t&&ln(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&ln(t[0]))&&!t.nodeType&&t!==Xe},lv=function(t,e,n){return n===void 0&&(n=[]),t.forEach(function(r){var s;return Wt(r)&&!e||_d(r,1)?(s=n).push.apply(s,$e(r)):n.push(r)})||n},$e=function(t,e,n){return St&&!e&&St.selector?St.selector(t):Wt(t)&&!n&&(Ra||!qr())?Da.call((e||xl).querySelectorAll(t),0):ce(t)?lv(t,n):_d(t)?Da.call(t,0):t?[t]:[]},Va=function(t){return t=$e(t)[0]||$i("Invalid scope")||{},function(e){var n=t.current||t.nativeElement||t;return $e(e,n.querySelectorAll?n:n===t?$i("Invalid scope")||xl.createElement("div"):t)}},pd=function(t){return t.sort(function(){return .5-Math.random()})},md=function(t){if(Ot(t))return t;var e=ln(t)?t:{each:t},n=rr(e.ease),r=e.from||0,s=parseFloat(e.base)||0,o={},l=r>0&&r<1,u=isNaN(r)||l,c=e.axis,h=r,_=r;return Wt(r)?h=_={center:.5,edges:.5,end:1}[r]||0:!l&&u&&(h=r[0],_=r[1]),function(p,m,T){var g=(T||e).length,I=o[g],C,S,k,V,x,O,w,v,y;if(!I){if(y=e.grid==="auto"?0:(e.grid||[1,Le])[1],!y){for(w=-Le;w<(w=T[y++].getBoundingClientRect().left)&&y<g;);y<g&&y--}for(I=o[g]=[],C=u?Math.min(y,g)*h-.5:r%y,S=y===Le?0:u?g*_/y-.5:r/y|0,w=0,v=Le,O=0;O<g;O++)k=O%y-C,V=S-(O/y|0),I[O]=x=c?Math.abs(c==="y"?V:k):Yf(k*k+V*V),x>w&&(w=x),x<v&&(v=x);r==="random"&&pd(I),I.max=w-v,I.min=v,I.v=g=(parseFloat(e.amount)||parseFloat(e.each)*(y>g?g-1:c?c==="y"?g/y:y:Math.max(y,g/y))||0)*(r==="edges"?-1:1),I.b=g<0?s-g:s,I.u=le(e.amount||e.each)||0,n=n&&g<0?Rd(n):n}return g=(I[p]-I.min)/I.max||0,Ht(I.b+(n?n(g):g)*I.v)+I.u}},ka=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(n){var r=Ht(Math.round(parseFloat(n)/t)*t*e);return(r-r%1)/e+(vn(n)?0:le(n))}},gd=function(t,e){var n=ce(t),r,s;return!n&&ln(t)&&(r=n=t.radius||Le,t.values?(t=$e(t.values),(s=!vn(t[0]))&&(r*=r)):t=ka(t.increment)),zn(e,n?Ot(t)?function(o){return s=t(o),Math.abs(s-o)<=r?s:o}:function(o){for(var l=parseFloat(s?o.x:o),u=parseFloat(s?o.y:0),c=Le,h=0,_=t.length,p,m;_--;)s?(p=t[_].x-l,m=t[_].y-u,p=p*p+m*m):p=Math.abs(t[_]-l),p<c&&(c=p,h=_);return h=!r||c<=r?t[h]:o,s||h===o||vn(o)?h:h+le(o)}:ka(t))},yd=function(t,e,n,r){return zn(ce(t)?!e:n===!0?!!(n=0):!r,function(){return ce(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+n*.99))/n)*n*r)/r})},uv=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return e.reduce(function(s,o){return o(s)},r)}},cv=function(t,e){return function(n){return t(parseFloat(n))+(e||le(n))}},hv=function(t,e,n){return Td(t,e,0,1,n)},vd=function(t,e,n){return zn(n,function(r){return t[~~e(r)]})},fv=function i(t,e,n){var r=e-t;return ce(t)?vd(t,i(0,t.length),e):zn(n,function(s){return(r+(s-t)%r)%r+t})},dv=function i(t,e,n){var r=e-t,s=r*2;return ce(t)?vd(t,i(0,t.length-1),e):zn(n,function(o){return o=(s+(o-t)%s)%s||0,t+(o>r?s-o:o)})},Bi=function(t){for(var e=0,n="",r,s,o,l;~(r=t.indexOf("random(",e));)o=t.indexOf(")",r),l=t.charAt(r+7)==="[",s=t.substr(r+7,o-r-7).match(l?ed:ba),n+=t.substr(e,r-e)+yd(l?s:+s[0],l?0:+s[1],+s[2]||1e-5),e=o+1;return n+t.substr(e,t.length-e)},Td=function(t,e,n,r,s){var o=e-t,l=r-n;return zn(s,function(u){return n+((u-t)/o*l||0)})},_v=function i(t,e,n,r){var s=isNaN(t+e)?0:function(m){return(1-m)*t+m*e};if(!s){var o=Wt(t),l={},u,c,h,_,p;if(n===!0&&(r=1)&&(n=null),o)t={p:t},e={p:e};else if(ce(t)&&!ce(e)){for(h=[],_=t.length,p=_-2,c=1;c<_;c++)h.push(i(t[c-1],t[c]));_--,s=function(T){T*=_;var g=Math.min(p,~~T);return h[g](T-g)},n=e}else r||(t=ur(ce(t)?[]:{},t));if(!h){for(u in e)Ll.call(l,t,u,"get",e[u]);s=function(T){return jl(T,l)||(o?t.p:t)}}}return zn(n,s)},th=function(t,e,n){var r=t.labels,s=Le,o,l,u;for(o in r)l=r[o]-e,l<0==!!n&&l&&s>(l=Math.abs(l))&&(u=o,s=l);return u},De=function(t,e,n){var r=t.vars,s=r[e],o=St,l=t._ctx,u,c,h;if(s)return u=r[e+"Params"],c=r.callbackScope||t,n&&kn.length&&Qs(),l&&(St=l),h=u?s.apply(c,u):s.call(c),St=o,h},vi=function(t){return Un(t),t.scrollTrigger&&t.scrollTrigger.kill(!!ue),t.progress()<1&&De(t,"onInterrupt"),t},Rr,Ed=[],wd=function(t){if(t)if(t=!t.name&&t.default||t,kl()||t.headless){var e=t.name,n=Ot(t),r=e&&!n&&t.init?function(){this._props=[]}:t,s={init:Ui,render:jl,add:Ll,kill:Dv,modifier:Cv,rawVars:0},o={targetTest:0,get:0,getSetter:Bl,aliases:{},register:0};if(qr(),t!==r){if(Pe[e])return;Ue(r,Ue(Xs(t,s),o)),ur(r.prototype,ur(s,Xs(t,o))),Pe[r.prop=e]=r,t.targetTest&&(Vs.push(r),Ol[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}id(e,r),t.register&&t.register(we,r,Te)}else Ed.push(t)},mt=255,Ti={aqua:[0,mt,mt],lime:[0,mt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,mt],navy:[0,0,128],white:[mt,mt,mt],olive:[128,128,0],yellow:[mt,mt,0],orange:[mt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[mt,0,0],pink:[mt,192,203],cyan:[0,mt,mt],transparent:[mt,mt,mt,0]},Ho=function(t,e,n){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(n-e)*t*6:t<.5?n:t*3<2?e+(n-e)*(2/3-t)*6:e)*mt+.5|0},Id=function(t,e,n){var r=t?vn(t)?[t>>16,t>>8&mt,t&mt]:0:Ti.black,s,o,l,u,c,h,_,p,m,T;if(!r){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Ti[t])r=Ti[t];else if(t.charAt(0)==="#"){if(t.length<6&&(s=t.charAt(1),o=t.charAt(2),l=t.charAt(3),t="#"+s+s+o+o+l+l+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return r=parseInt(t.substr(1,6),16),[r>>16,r>>8&mt,r&mt,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),r=[t>>16,t>>8&mt,t&mt]}else if(t.substr(0,3)==="hsl"){if(r=T=t.match(ba),!e)u=+r[0]%360/360,c=+r[1]/100,h=+r[2]/100,o=h<=.5?h*(c+1):h+c-h*c,s=h*2-o,r.length>3&&(r[3]*=1),r[0]=Ho(u+1/3,s,o),r[1]=Ho(u,s,o),r[2]=Ho(u-1/3,s,o);else if(~t.indexOf("="))return r=t.match(Zf),n&&r.length<4&&(r[3]=1),r}else r=t.match(ba)||Ti.transparent;r=r.map(Number)}return e&&!T&&(s=r[0]/mt,o=r[1]/mt,l=r[2]/mt,_=Math.max(s,o,l),p=Math.min(s,o,l),h=(_+p)/2,_===p?u=c=0:(m=_-p,c=h>.5?m/(2-_-p):m/(_+p),u=_===s?(o-l)/m+(o<l?6:0):_===o?(l-s)/m+2:(s-o)/m+4,u*=60),r[0]=~~(u+.5),r[1]=~~(c*100+.5),r[2]=~~(h*100+.5)),n&&r.length<4&&(r[3]=1),r},Ad=function(t){var e=[],n=[],r=-1;return t.split(xn).forEach(function(s){var o=s.match(br)||[];e.push.apply(e,o),n.push(r+=o.length+1)}),e.c=n,e},eh=function(t,e,n){var r="",s=(t+r).match(xn),o=e?"hsla(":"rgba(",l=0,u,c,h,_;if(!s)return t;if(s=s.map(function(p){return(p=Id(p,e,1))&&o+(e?p[0]+","+p[1]+"%,"+p[2]+"%,"+p[3]:p.join(","))+")"}),n&&(h=Ad(t),u=n.c,u.join(r)!==h.c.join(r)))for(c=t.replace(xn,"1").split(br),_=c.length-1;l<_;l++)r+=c[l]+(~u.indexOf(l)?s.shift()||o+"0,0,0,0)":(h.length?h:s.length?s:n).shift());if(!c)for(c=t.split(xn),_=c.length-1;l<_;l++)r+=c[l]+s[l];return r+c[_]},xn=function(){var i="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Ti)i+="|"+t+"\\b";return new RegExp(i+")","gi")}(),pv=/hsl[a]?\(/,bd=function(t){var e=t.join(" "),n;if(xn.lastIndex=0,xn.test(e))return n=pv.test(e),t[1]=eh(t[1],n),t[0]=eh(t[0],n,Ad(t[1])),!0},ji,Se=function(){var i=Date.now,t=500,e=33,n=i(),r=n,s=1e3/240,o=s,l=[],u,c,h,_,p,m,T=function g(I){var C=i()-r,S=I===!0,k,V,x,O;if((C>t||C<0)&&(n+=C-e),r+=C,x=r-n,k=x-o,(k>0||S)&&(O=++_.frame,p=x-_.time*1e3,_.time=x=x/1e3,o+=k+(k>=s?4:s-k),V=1),S||(u=c(g)),V)for(m=0;m<l.length;m++)l[m](x,p,O,I)};return _={time:0,frame:0,tick:function(){T(!0)},deltaRatio:function(I){return p/(1e3/(I||60))},wake:function(){nd&&(!Ra&&kl()&&(Xe=Ra=window,xl=Xe.document||{},Ne.gsap=we,(Xe.gsapVersions||(Xe.gsapVersions=[])).push(we.version),rd(Ws||Xe.GreenSockGlobals||!Xe.gsap&&Xe||{}),Ed.forEach(wd)),h=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&_.sleep(),c=h||function(I){return setTimeout(I,o-_.time*1e3+1|0)},ji=1,T(2))},sleep:function(){(h?cancelAnimationFrame:clearTimeout)(u),ji=0,c=Ui},lagSmoothing:function(I,C){t=I||1/0,e=Math.min(C||33,t)},fps:function(I){s=1e3/(I||240),o=_.time*1e3+s},add:function(I,C,S){var k=C?function(V,x,O,w){I(V,x,O,w),_.remove(k)}:I;return _.remove(I),l[S?"unshift":"push"](k),qr(),k},remove:function(I,C){~(C=l.indexOf(I))&&l.splice(C,1)&&m>=C&&m--},_listeners:l},_}(),qr=function(){return!ji&&Se.wake()},at={},mv=/^[\d.\-M][\d.\-,\s]/,gv=/["']/g,yv=function(t){for(var e={},n=t.substr(1,t.length-3).split(":"),r=n[0],s=1,o=n.length,l,u,c;s<o;s++)u=n[s],l=s!==o-1?u.lastIndexOf(","):u.length,c=u.substr(0,l),e[r]=isNaN(c)?c.replace(gv,"").trim():+c,r=u.substr(l+1).trim();return e},vv=function(t){var e=t.indexOf("(")+1,n=t.indexOf(")"),r=t.indexOf("(",e);return t.substring(e,~r&&r<n?t.indexOf(")",n+1):n)},Tv=function(t){var e=(t+"").split("("),n=at[e[0]];return n&&e.length>1&&n.config?n.config.apply(null,~t.indexOf("{")?[yv(e[1])]:vv(t).split(",").map(ld)):at._CE&&mv.test(t)?at._CE("",t):n},Rd=function(t){return function(e){return 1-t(1-e)}},Pd=function i(t,e){for(var n=t._first,r;n;)n instanceof de?i(n,e):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==e&&(n.timeline?i(n.timeline,e):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=e)),n=n._next},rr=function(t,e){return t&&(Ot(t)?t:at[t]||Tv(t))||e},dr=function(t,e,n,r){n===void 0&&(n=function(u){return 1-e(1-u)}),r===void 0&&(r=function(u){return u<.5?e(u*2)/2:1-e((1-u)*2)/2});var s={easeIn:e,easeOut:n,easeInOut:r},o;return ve(t,function(l){at[l]=Ne[l]=s,at[o=l.toLowerCase()]=n;for(var u in s)at[o+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=at[l+"."+u]=s[u]}),s},Sd=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},Wo=function i(t,e,n){var r=e>=1?e:1,s=(n||(t?.3:.45))/(e<1?e:1),o=s/Aa*(Math.asin(1/r)||0),l=function(h){return h===1?1:r*Math.pow(2,-10*h)*W0((h-o)*s)+1},u=t==="out"?l:t==="in"?function(c){return 1-l(1-c)}:Sd(l);return s=Aa/s,u.config=function(c,h){return i(t,c,h)},u},Qo=function i(t,e){e===void 0&&(e=1.70158);var n=function(o){return o?--o*o*((e+1)*o+e)+1:0},r=t==="out"?n:t==="in"?function(s){return 1-n(1-s)}:Sd(n);return r.config=function(s){return i(t,s)},r};ve("Linear,Quad,Cubic,Quart,Quint,Strong",function(i,t){var e=t<5?t+1:t;dr(i+",Power"+(e-1),t?function(n){return Math.pow(n,e)}:function(n){return n},function(n){return 1-Math.pow(1-n,e)},function(n){return n<.5?Math.pow(n*2,e)/2:1-Math.pow((1-n)*2,e)/2})});at.Linear.easeNone=at.none=at.Linear.easeIn;dr("Elastic",Wo("in"),Wo("out"),Wo());(function(i,t){var e=1/t,n=2*e,r=2.5*e,s=function(l){return l<e?i*l*l:l<n?i*Math.pow(l-1.5/t,2)+.75:l<r?i*(l-=2.25/t)*l+.9375:i*Math.pow(l-2.625/t,2)+.984375};dr("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);dr("Expo",function(i){return i?Math.pow(2,10*(i-1)):0});dr("Circ",function(i){return-(Yf(1-i*i)-1)});dr("Sine",function(i){return i===1?1:-H0(i*G0)+1});dr("Back",Qo("in"),Qo("out"),Qo());at.SteppedEase=at.steps=Ne.SteppedEase={config:function(t,e){t===void 0&&(t=1);var n=1/t,r=t+(e?0:1),s=e?1:0,o=1-yt;return function(l){return((r*rs(0,o,l)|0)+s)*n}}};Br.ease=at["quad.out"];ve("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(i){return Ml+=i+","+i+"Params,"});var Cd=function(t,e){this.id=K0++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:od,this.set=e?e.getSetter:Bl},zi=function(){function i(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,zr(this,+e.duration,1,1),this.data=e.data,St&&(this._ctx=St,St.data.push(this)),ji||Se.wake()}var t=i.prototype;return t.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},t.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},t.totalDuration=function(n){return arguments.length?(this._dirty=0,zr(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(n,r){if(qr(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(yo(this,n),!s._dp||s.parent||hd(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&Je(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===yt||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),ad(this,n,r)),this},t.time=function(n,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+Jc(this))%(this._dur+this._rDelay)||(n?this._dur:0),r):this._time},t.totalProgress=function(n,r){return arguments.length?this.totalTime(this.totalDuration()*n,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},t.progress=function(n,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+Jc(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(n,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,r):this._repeat?jr(this._tTime,s)+1:1},t.timeScale=function(n,r){if(!arguments.length)return this._rts===-yt?0:this._rts;if(this._rts===n)return this;var s=this.parent&&this._ts?Ys(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-yt?0:this._rts,this.totalTime(rs(-Math.abs(this._delay),this._tDur,s),r!==!1),go(this),ev(this)},t.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(qr(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==yt&&(this._tTime-=yt)))),this):this._ps},t.startTime=function(n){if(arguments.length){this._start=n;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Je(r,this,n-this._delay),this}return this._start},t.endTime=function(n){return this._start+(ye(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(n){var r=this.parent||this._dp;return r?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Ys(r.rawTime(n),this):this._tTime:this._tTime},t.revert=function(n){n===void 0&&(n=Y0);var r=ue;return ue=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),ue=r,this},t.globalTime=function(n){for(var r=this,s=arguments.length?n:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(n):s},t.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,Zc(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(n){if(arguments.length){var r=this._time;return this._rDelay=n,Zc(this),r?this.time(r):this}return this._rDelay},t.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},t.seek=function(n,r){return this.totalTime(Fe(this,n),ye(r))},t.restart=function(n,r){return this.play().totalTime(n?-this._delay:0,ye(r))},t.play=function(n,r){return n!=null&&this.seek(n,r),this.reversed(!1).paused(!1)},t.reverse=function(n,r){return n!=null&&this.seek(n||this.totalDuration(),r),this.reversed(!0).paused(!1)},t.pause=function(n,r){return n!=null&&this.seek(n,r),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-yt:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-yt,this},t.isActive=function(){var n=this.parent||this._dp,r=this._start,s;return!!(!n||this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=r&&s<this.endTime(!0)-yt)},t.eventCallback=function(n,r,s){var o=this.vars;return arguments.length>1?(r?(o[n]=r,s&&(o[n+"Params"]=s),n==="onUpdate"&&(this._onUpdate=r)):delete o[n],this):o[n]},t.then=function(n){var r=this;return new Promise(function(s){var o=Ot(n)?n:ud,l=function(){var c=r.then;r.then=null,Ot(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=c),s(o),r.then=c};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?l():r._prom=l})},t.kill=function(){vi(this)},i}();Ue(zi.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-yt,_prom:0,_ps:!1,_rts:1});var de=function(i){Xf(t,i);function t(n,r){var s;return n===void 0&&(n={}),s=i.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=ye(n.sortChildren),Vt&&Je(n.parent||Vt,_n(s),r),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&fd(_n(s),n.scrollTrigger),s}var e=t.prototype;return e.to=function(r,s,o){return Ri(0,arguments,this),this},e.from=function(r,s,o){return Ri(1,arguments,this),this},e.fromTo=function(r,s,o,l){return Ri(2,arguments,this),this},e.set=function(r,s,o){return s.duration=0,s.parent=this,bi(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Bt(r,s,Fe(this,o),1),this},e.call=function(r,s,o){return Je(this,Bt.delayedCall(0,r,s),o)},e.staggerTo=function(r,s,o,l,u,c,h){return o.duration=s,o.stagger=o.stagger||l,o.onComplete=c,o.onCompleteParams=h,o.parent=this,new Bt(r,o,Fe(this,u)),this},e.staggerFrom=function(r,s,o,l,u,c,h){return o.runBackwards=1,bi(o).immediateRender=ye(o.immediateRender),this.staggerTo(r,s,o,l,u,c,h)},e.staggerFromTo=function(r,s,o,l,u,c,h,_){return l.startAt=o,bi(l).immediateRender=ye(l.immediateRender),this.staggerTo(r,s,l,u,c,h,_)},e.render=function(r,s,o){var l=this._time,u=this._dirty?this.totalDuration():this._tDur,c=this._dur,h=r<=0?0:Ht(r),_=this._zTime<0!=r<0&&(this._initted||!c),p,m,T,g,I,C,S,k,V,x,O,w;if(this!==Vt&&h>u&&r>=0&&(h=u),h!==this._tTime||o||_){if(l!==this._time&&c&&(h+=this._time-l,r+=this._time-l),p=h,V=this._start,k=this._ts,C=!k,_&&(c||(l=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(O=this._yoyo,I=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(I*100+r,s,o);if(p=Ht(h%I),h===u?(g=this._repeat,p=c):(g=~~(h/I),g&&g===h/I&&(p=c,g--),p>c&&(p=c)),x=jr(this._tTime,I),!l&&this._tTime&&x!==g&&this._tTime-x*I-this._dur<=0&&(x=g),O&&g&1&&(p=c-p,w=1),g!==x&&!this._lock){var v=O&&x&1,y=v===(O&&g&1);if(g<x&&(v=!v),l=v?0:h%c?c:h,this._lock=1,this.render(l||(w?0:Ht(g*I)),s,!c)._lock=0,this._tTime=h,!s&&this.parent&&De(this,"onRepeat"),this.vars.repeatRefresh&&!w&&(this.invalidate()._lock=1),l&&l!==this._time||C!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,u=this._tDur,y&&(this._lock=2,l=v?c:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!w&&this.invalidate()),this._lock=0,!this._ts&&!C)return this;Pd(this,w)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(S=sv(this,Ht(l),Ht(p)),S&&(h-=p-(p=S._start))),this._tTime=h,this._time=p,this._act=!k,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,l=0),!l&&p&&!s&&!g&&(De(this,"onStart"),this._tTime!==h))return this;if(p>=l&&r>=0)for(m=this._first;m;){if(T=m._next,(m._act||p>=m._start)&&m._ts&&S!==m){if(m.parent!==this)return this.render(r,s,o);if(m.render(m._ts>0?(p-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(p-m._start)*m._ts,s,o),p!==this._time||!this._ts&&!C){S=0,T&&(h+=this._zTime=-yt);break}}m=T}else{m=this._last;for(var b=r<0?r:p;m;){if(T=m._prev,(m._act||b<=m._end)&&m._ts&&S!==m){if(m.parent!==this)return this.render(r,s,o);if(m.render(m._ts>0?(b-m._start)*m._ts:(m._dirty?m.totalDuration():m._tDur)+(b-m._start)*m._ts,s,o||ue&&(m._initted||m._startAt)),p!==this._time||!this._ts&&!C){S=0,T&&(h+=this._zTime=b?-yt:yt);break}}m=T}}if(S&&!s&&(this.pause(),S.render(p>=l?0:-yt)._zTime=p>=l?1:-1,this._ts))return this._start=V,go(this),this.render(r,s,o);this._onUpdate&&!s&&De(this,"onUpdate",!0),(h===u&&this._tTime>=this.totalDuration()||!h&&l)&&(V===this._start||Math.abs(k)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(h===u&&this._ts>0||!h&&this._ts<0)&&Un(this,1),!s&&!(r<0&&!l)&&(h||l||!u)&&(De(this,h===u&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(h<u&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(r,s){var o=this;if(vn(s)||(s=Fe(this,s,r)),!(r instanceof zi)){if(ce(r))return r.forEach(function(l){return o.add(l,s)}),this;if(Wt(r))return this.addLabel(r,s);if(Ot(r))r=Bt.delayedCall(0,r);else return this}return this!==r?Je(this,r,s):this},e.getChildren=function(r,s,o,l){r===void 0&&(r=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),l===void 0&&(l=-Le);for(var u=[],c=this._first;c;)c._start>=l&&(c instanceof Bt?s&&u.push(c):(o&&u.push(c),r&&u.push.apply(u,c.getChildren(!0,s,o)))),c=c._next;return u},e.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},e.remove=function(r){return Wt(r)?this.removeLabel(r):Ot(r)?this.killTweensOf(r):(mo(this,r),r===this._recent&&(this._recent=this._last),nr(this))},e.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ht(Se.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),i.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},e.addLabel=function(r,s){return this.labels[r]=Fe(this,s),this},e.removeLabel=function(r){return delete this.labels[r],this},e.addPause=function(r,s,o){var l=Bt.delayedCall(0,s||Ui,o);return l.data="isPause",this._hasPause=1,Je(this,l,Fe(this,r))},e.removePause=function(r){var s=this._first;for(r=Fe(this,r);s;)s._start===r&&s.data==="isPause"&&Un(s),s=s._next},e.killTweensOf=function(r,s,o){for(var l=this.getTweensOf(r,o),u=l.length;u--;)Rn!==l[u]&&l[u].kill(r,s);return this},e.getTweensOf=function(r,s){for(var o=[],l=$e(r),u=this._first,c=vn(s),h;u;)u instanceof Bt?J0(u._targets,l)&&(c?(!Rn||u._initted&&u._ts)&&u.globalTime(0)<=s&&u.globalTime(u.totalDuration())>s:!s||u.isActive())&&o.push(u):(h=u.getTweensOf(l,s)).length&&o.push.apply(o,h),u=u._next;return o},e.tweenTo=function(r,s){s=s||{};var o=this,l=Fe(o,r),u=s,c=u.startAt,h=u.onStart,_=u.onStartParams,p=u.immediateRender,m,T=Bt.to(o,Ue({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:s.duration||Math.abs((l-(c&&"time"in c?c.time:o._time))/o.timeScale())||yt,onStart:function(){if(o.pause(),!m){var I=s.duration||Math.abs((l-(c&&"time"in c?c.time:o._time))/o.timeScale());T._dur!==I&&zr(T,I,0,1).render(T._time,!0,!0),m=1}h&&h.apply(T,_||[])}},s));return p?T.render(0):T},e.tweenFromTo=function(r,s,o){return this.tweenTo(s,Ue({startAt:{time:Fe(this,r)}},o))},e.recent=function(){return this._recent},e.nextLabel=function(r){return r===void 0&&(r=this._time),th(this,Fe(this,r))},e.previousLabel=function(r){return r===void 0&&(r=this._time),th(this,Fe(this,r),1)},e.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+yt)},e.shiftChildren=function(r,s,o){o===void 0&&(o=0);for(var l=this._first,u=this.labels,c;l;)l._start>=o&&(l._start+=r,l._end+=r),l=l._next;if(s)for(c in u)u[c]>=o&&(u[c]+=r);return nr(this)},e.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return i.prototype.invalidate.call(this,r)},e.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),nr(this)},e.totalDuration=function(r){var s=0,o=this,l=o._last,u=Le,c,h,_;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(_=o.parent;l;)c=l._prev,l._dirty&&l.totalDuration(),h=l._start,h>u&&o._sort&&l._ts&&!o._lock?(o._lock=1,Je(o,l,h-l._delay,1)._lock=0):u=h,h<0&&l._ts&&(s-=h,(!_&&!o._dp||_&&_.smoothChildTiming)&&(o._start+=h/o._ts,o._time-=h,o._tTime-=h),o.shiftChildren(-h,!1,-1/0),u=0),l._end>s&&l._ts&&(s=l._end),l=c;zr(o,o===Vt&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(r){if(Vt._ts&&(ad(Vt,Ys(r,Vt)),sd=Se.frame),Se.frame>=Xc){Xc+=xe.autoSleep||120;var s=Vt._first;if((!s||!s._ts)&&xe.autoSleep&&Se._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Se.sleep()}}},t}(zi);Ue(de.prototype,{_lock:0,_hasPause:0,_forcing:0});var Ev=function(t,e,n,r,s,o,l){var u=new Te(this._pt,t,e,0,1,Od,null,s),c=0,h=0,_,p,m,T,g,I,C,S;for(u.b=n,u.e=r,n+="",r+="",(C=~r.indexOf("random("))&&(r=Bi(r)),o&&(S=[n,r],o(S,t,e),n=S[0],r=S[1]),p=n.match(Go)||[];_=Go.exec(r);)T=_[0],g=r.substring(c,_.index),m?m=(m+1)%5:g.substr(-5)==="rgba("&&(m=1),T!==p[h++]&&(I=parseFloat(p[h-1])||0,u._pt={_next:u._pt,p:g||h===1?g:",",s:I,c:T.charAt(1)==="="?Cr(I,T)-I:parseFloat(T)-I,m:m&&m<4?Math.round:0},c=Go.lastIndex);return u.c=c<r.length?r.substring(c,r.length):"",u.fp=l,(td.test(r)||C)&&(u.e=0),this._pt=u,u},Ll=function(t,e,n,r,s,o,l,u,c,h){Ot(r)&&(r=r(s||0,t,o));var _=t[e],p=n!=="get"?n:Ot(_)?c?t[e.indexOf("set")||!Ot(t["get"+e.substr(3)])?e:"get"+e.substr(3)](c):t[e]():_,m=Ot(_)?c?Rv:xd:Ul,T;if(Wt(r)&&(~r.indexOf("random(")&&(r=Bi(r)),r.charAt(1)==="="&&(T=Cr(p,r)+(le(p)||0),(T||T===0)&&(r=T))),!h||p!==r||xa)return!isNaN(p*r)&&r!==""?(T=new Te(this._pt,t,e,+p||0,r-(p||0),typeof _=="boolean"?Sv:Nd,0,m),c&&(T.fp=c),l&&T.modifier(l,this,t),this._pt=T):(!_&&!(e in t)&&Nl(e,r),Ev.call(this,t,e,p,r,m,u||xe.stringFilter,c))},wv=function(t,e,n,r,s){if(Ot(t)&&(t=Pi(t,s,e,n,r)),!ln(t)||t.style&&t.nodeType||ce(t)||Jf(t))return Wt(t)?Pi(t,s,e,n,r):t;var o={},l;for(l in t)o[l]=Pi(t[l],s,e,n,r);return o},Dd=function(t,e,n,r,s,o){var l,u,c,h;if(Pe[t]&&(l=new Pe[t]).init(s,l.rawVars?e[t]:wv(e[t],r,s,o,n),n,r,o)!==!1&&(n._pt=u=new Te(n._pt,s,t,0,1,l.render,l,0,l.priority),n!==Rr))for(c=n._ptLookup[n._targets.indexOf(s)],h=l._props.length;h--;)c[l._props[h]]=u;return l},Rn,xa,$l=function i(t,e,n){var r=t.vars,s=r.ease,o=r.startAt,l=r.immediateRender,u=r.lazy,c=r.onUpdate,h=r.runBackwards,_=r.yoyoEase,p=r.keyframes,m=r.autoRevert,T=t._dur,g=t._startAt,I=t._targets,C=t.parent,S=C&&C.data==="nested"?C.vars.targets:I,k=t._overwrite==="auto"&&!Dl,V=t.timeline,x,O,w,v,y,b,R,P,A,it,ct,_t,lt;if(V&&(!p||!s)&&(s="none"),t._ease=rr(s,Br.ease),t._yEase=_?Rd(rr(_===!0?s:_,Br.ease)):0,_&&t._yoyo&&!t._repeat&&(_=t._yEase,t._yEase=t._ease,t._ease=_),t._from=!V&&!!r.runBackwards,!V||p&&!r.stagger){if(P=I[0]?er(I[0]).harness:0,_t=P&&r[P.prop],x=Xs(r,Ol),g&&(g._zTime<0&&g.progress(1),e<0&&h&&l&&!m?g.render(-1,!0):g.revert(h&&T?Ds:X0),g._lazy=0),o){if(Un(t._startAt=Bt.set(I,Ue({data:"isStart",overwrite:!1,parent:C,immediateRender:!0,lazy:!g&&ye(u),startAt:null,delay:0,onUpdate:c&&function(){return De(t,"onUpdate")},stagger:0},o))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(ue||!l&&!m)&&t._startAt.revert(Ds),l&&T&&e<=0&&n<=0){e&&(t._zTime=e);return}}else if(h&&T&&!g){if(e&&(l=!1),w=Ue({overwrite:!1,data:"isFromStart",lazy:l&&!g&&ye(u),immediateRender:l,stagger:0,parent:C},x),_t&&(w[P.prop]=_t),Un(t._startAt=Bt.set(I,w)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(ue?t._startAt.revert(Ds):t._startAt.render(-1,!0)),t._zTime=e,!l)i(t._startAt,yt,yt);else if(!e)return}for(t._pt=t._ptCache=0,u=T&&ye(u)||u&&!T,O=0;O<I.length;O++){if(y=I[O],R=y._gsap||Fl(I)[O]._gsap,t._ptLookup[O]=it={},Pa[R.id]&&kn.length&&Qs(),ct=S===I?O:S.indexOf(y),P&&(A=new P).init(y,_t||x,t,ct,S)!==!1&&(t._pt=v=new Te(t._pt,y,A.name,0,1,A.render,A,0,A.priority),A._props.forEach(function(Ct){it[Ct]=v}),A.priority&&(b=1)),!P||_t)for(w in x)Pe[w]&&(A=Dd(w,x,t,ct,y,S))?A.priority&&(b=1):it[w]=v=Ll.call(t,y,w,"get",x[w],ct,S,0,r.stringFilter);t._op&&t._op[O]&&t.kill(y,t._op[O]),k&&t._pt&&(Rn=t,Vt.killTweensOf(y,it,t.globalTime(e)),lt=!t.parent,Rn=0),t._pt&&u&&(Pa[R.id]=1)}b&&Md(t),t._onInit&&t._onInit(t)}t._onUpdate=c,t._initted=(!t._op||t._pt)&&!lt,p&&e<=0&&V.render(Le,!0,!0)},Iv=function(t,e,n,r,s,o,l,u){var c=(t._pt&&t._ptCache||(t._ptCache={}))[e],h,_,p,m;if(!c)for(c=t._ptCache[e]=[],p=t._ptLookup,m=t._targets.length;m--;){if(h=p[m][e],h&&h.d&&h.d._pt)for(h=h.d._pt;h&&h.p!==e&&h.fp!==e;)h=h._next;if(!h)return xa=1,t.vars[e]="+=0",$l(t,l),xa=0,u?$i(e+" not eligible for reset"):1;c.push(h)}for(m=c.length;m--;)_=c[m],h=_._pt||_,h.s=(r||r===0)&&!s?r:h.s+(r||0)+o*h.c,h.c=n-h.s,_.e&&(_.e=Ft(n)+le(_.e)),_.b&&(_.b=h.s+le(_.b))},Av=function(t,e){var n=t[0]?er(t[0]).harness:0,r=n&&n.aliases,s,o,l,u;if(!r)return e;s=ur({},e);for(o in r)if(o in s)for(u=r[o].split(","),l=u.length;l--;)s[u[l]]=s[o];return s},bv=function(t,e,n,r){var s=e.ease||r||"power1.inOut",o,l;if(ce(e))l=n[t]||(n[t]=[]),e.forEach(function(u,c){return l.push({t:c/(e.length-1)*100,v:u,e:s})});else for(o in e)l=n[o]||(n[o]=[]),o==="ease"||l.push({t:parseFloat(t),v:e[o],e:s})},Pi=function(t,e,n,r,s){return Ot(t)?t.call(e,n,r,s):Wt(t)&&~t.indexOf("random(")?Bi(t):t},Vd=Ml+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",kd={};ve(Vd+",id,stagger,delay,duration,paused,scrollTrigger",function(i){return kd[i]=1});var Bt=function(i){Xf(t,i);function t(n,r,s,o){var l;typeof r=="number"&&(s.duration=r,r=s,s=null),l=i.call(this,o?r:bi(r))||this;var u=l.vars,c=u.duration,h=u.delay,_=u.immediateRender,p=u.stagger,m=u.overwrite,T=u.keyframes,g=u.defaults,I=u.scrollTrigger,C=u.yoyoEase,S=r.parent||Vt,k=(ce(n)||Jf(n)?vn(n[0]):"length"in r)?[n]:$e(n),V,x,O,w,v,y,b,R;if(l._targets=k.length?Fl(k):$i("GSAP target "+n+" not found. https://gsap.com",!xe.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=m,T||p||As(c)||As(h)){if(r=l.vars,V=l.timeline=new de({data:"nested",defaults:g||{},targets:S&&S.data==="nested"?S.vars.targets:k}),V.kill(),V.parent=V._dp=_n(l),V._start=0,p||As(c)||As(h)){if(w=k.length,b=p&&md(p),ln(p))for(v in p)~Vd.indexOf(v)&&(R||(R={}),R[v]=p[v]);for(x=0;x<w;x++)O=Xs(r,kd),O.stagger=0,C&&(O.yoyoEase=C),R&&ur(O,R),y=k[x],O.duration=+Pi(c,_n(l),x,y,k),O.delay=(+Pi(h,_n(l),x,y,k)||0)-l._delay,!p&&w===1&&O.delay&&(l._delay=h=O.delay,l._start+=h,O.delay=0),V.to(y,O,b?b(x,y,k):0),V._ease=at.none;V.duration()?c=h=0:l.timeline=0}else if(T){bi(Ue(V.vars.defaults,{ease:"none"})),V._ease=rr(T.ease||r.ease||"none");var P=0,A,it,ct;if(ce(T))T.forEach(function(_t){return V.to(k,_t,">")}),V.duration();else{O={};for(v in T)v==="ease"||v==="easeEach"||bv(v,T[v],O,T.easeEach);for(v in O)for(A=O[v].sort(function(_t,lt){return _t.t-lt.t}),P=0,x=0;x<A.length;x++)it=A[x],ct={ease:it.e,duration:(it.t-(x?A[x-1].t:0))/100*c},ct[v]=it.v,V.to(k,ct,P),P+=ct.duration;V.duration()<c&&V.to({},{duration:c-V.duration()})}}c||l.duration(c=V.duration())}else l.timeline=0;return m===!0&&!Dl&&(Rn=_n(l),Vt.killTweensOf(k),Rn=0),Je(S,_n(l),s),r.reversed&&l.reverse(),r.paused&&l.paused(!0),(_||!c&&!T&&l._start===Ht(S._time)&&ye(_)&&nv(_n(l))&&S.data!=="nested")&&(l._tTime=-yt,l.render(Math.max(0,-h)||0)),I&&fd(_n(l),I),l}var e=t.prototype;return e.render=function(r,s,o){var l=this._time,u=this._tDur,c=this._dur,h=r<0,_=r>u-yt&&!h?u:r<yt?0:r,p,m,T,g,I,C,S,k,V;if(!c)iv(this,r,s,o);else if(_!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==h){if(p=_,k=this.timeline,this._repeat){if(g=c+this._rDelay,this._repeat<-1&&h)return this.totalTime(g*100+r,s,o);if(p=Ht(_%g),_===u?(T=this._repeat,p=c):(T=~~(_/g),T&&T===Ht(_/g)&&(p=c,T--),p>c&&(p=c)),C=this._yoyo&&T&1,C&&(V=this._yEase,p=c-p),I=jr(this._tTime,g),p===l&&!o&&this._initted&&T===I)return this._tTime=_,this;T!==I&&(k&&this._yEase&&Pd(k,C),this.vars.repeatRefresh&&!C&&!this._lock&&this._time!==g&&this._initted&&(this._lock=o=1,this.render(Ht(g*T),!0).invalidate()._lock=0))}if(!this._initted){if(dd(this,h?r:p,o,s,_))return this._tTime=0,this;if(l!==this._time&&!(o&&this.vars.repeatRefresh&&T!==I))return this;if(c!==this._dur)return this.render(r,s,o)}if(this._tTime=_,this._time=p,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=S=(V||this._ease)(p/c),this._from&&(this.ratio=S=1-S),p&&!l&&!s&&!T&&(De(this,"onStart"),this._tTime!==_))return this;for(m=this._pt;m;)m.r(S,m.d),m=m._next;k&&k.render(r<0?r:k._dur*k._ease(p/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(h&&Sa(this,r,s,o),De(this,"onUpdate")),this._repeat&&T!==I&&this.vars.onRepeat&&!s&&this.parent&&De(this,"onRepeat"),(_===this._tDur||!_)&&this._tTime===_&&(h&&!this._onUpdate&&Sa(this,r,!0,!0),(r||!c)&&(_===this._tDur&&this._ts>0||!_&&this._ts<0)&&Un(this,1),!s&&!(h&&!l)&&(_||l||C)&&(De(this,_===u?"onComplete":"onReverseComplete",!0),this._prom&&!(_<u&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),i.prototype.invalidate.call(this,r)},e.resetTo=function(r,s,o,l,u){ji||Se.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),h;return this._initted||$l(this,c),h=this._ease(c/this._dur),Iv(this,r,s,o,l,h,c,u)?this.resetTo(r,s,o,l,1):(yo(this,0),this.parent||cd(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?vi(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,Rn&&Rn.vars.overwrite!==!0)._first||vi(this),this.parent&&o!==this.timeline.totalDuration()&&zr(this,this._dur*this.timeline._tDur/o,0,1),this}var l=this._targets,u=r?$e(r):l,c=this._ptLookup,h=this._pt,_,p,m,T,g,I,C;if((!s||s==="all")&&tv(l,u))return s==="all"&&(this._pt=0),vi(this);for(_=this._op=this._op||[],s!=="all"&&(Wt(s)&&(g={},ve(s,function(S){return g[S]=1}),s=g),s=Av(l,s)),C=l.length;C--;)if(~u.indexOf(l[C])){p=c[C],s==="all"?(_[C]=s,T=p,m={}):(m=_[C]=_[C]||{},T=s);for(g in T)I=p&&p[g],I&&((!("kill"in I.d)||I.d.kill(g)===!0)&&mo(this,I,"_pt"),delete p[g]),m!=="all"&&(m[g]=1)}return this._initted&&!this._pt&&h&&vi(this),this},t.to=function(r,s){return new t(r,s,arguments[2])},t.from=function(r,s){return Ri(1,arguments)},t.delayedCall=function(r,s,o,l){return new t(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:l})},t.fromTo=function(r,s,o){return Ri(2,arguments)},t.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new t(r,s)},t.killTweensOf=function(r,s,o){return Vt.killTweensOf(r,s,o)},t}(zi);Ue(Bt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});ve("staggerTo,staggerFrom,staggerFromTo",function(i){Bt[i]=function(){var t=new de,e=Da.call(arguments,0);return e.splice(i==="staggerFromTo"?5:4,0,0),t[i].apply(t,e)}});var Ul=function(t,e,n){return t[e]=n},xd=function(t,e,n){return t[e](n)},Rv=function(t,e,n,r){return t[e](r.fp,n)},Pv=function(t,e,n){return t.setAttribute(e,n)},Bl=function(t,e){return Ot(t[e])?xd:Vl(t[e])&&t.setAttribute?Pv:Ul},Nd=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},Sv=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},Od=function(t,e){var n=e._pt,r="";if(!t&&e.b)r=e.b;else if(t===1&&e.e)r=e.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*t):Math.round((n.s+n.c*t)*1e4)/1e4)+r,n=n._next;r+=e.c}e.set(e.t,e.p,r,e)},jl=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},Cv=function(t,e,n,r){for(var s=this._pt,o;s;)o=s._next,s.p===r&&s.modifier(t,e,n),s=o},Dv=function(t){for(var e=this._pt,n,r;e;)r=e._next,e.p===t&&!e.op||e.op===t?mo(this,e,"_pt"):e.dep||(n=1),e=r;return!n},Vv=function(t,e,n,r){r.mSet(t,e,r.m.call(r.tween,n,r.mt),r)},Md=function(t){for(var e=t._pt,n,r,s,o;e;){for(n=e._next,r=s;r&&r.pr>e.pr;)r=r._next;(e._prev=r?r._prev:o)?e._prev._next=e:s=e,(e._next=r)?r._prev=e:o=e,e=n}t._pt=s},Te=function(){function i(e,n,r,s,o,l,u,c,h){this.t=n,this.s=s,this.c=o,this.p=r,this.r=l||Nd,this.d=u||this,this.set=c||Ul,this.pr=h||0,this._next=e,e&&(e._prev=this)}var t=i.prototype;return t.modifier=function(n,r,s){this.mSet=this.mSet||this.set,this.set=Vv,this.m=n,this.mt=s,this.tween=r},i}();ve(Ml+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(i){return Ol[i]=1});Ne.TweenMax=Ne.TweenLite=Bt;Ne.TimelineLite=Ne.TimelineMax=de;Vt=new de({sortChildren:!1,defaults:Br,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});xe.stringFilter=bd;var ir=[],ks={},kv=[],nh=0,xv=0,Xo=function(t){return(ks[t]||kv).map(function(e){return e()})},Na=function(){var t=Date.now(),e=[];t-nh>2&&(Xo("matchMediaInit"),ir.forEach(function(n){var r=n.queries,s=n.conditions,o,l,u,c;for(l in r)o=Xe.matchMedia(r[l]).matches,o&&(u=1),o!==s[l]&&(s[l]=o,c=1);c&&(n.revert(),u&&e.push(n))}),Xo("matchMediaRevert"),e.forEach(function(n){return n.onMatch(n,function(r){return n.add(null,r)})}),nh=t,Xo("matchMedia"))},Fd=function(){function i(e,n){this.selector=n&&Va(n),this.data=[],this._r=[],this.isReverted=!1,this.id=xv++,e&&this.add(e)}var t=i.prototype;return t.add=function(n,r,s){Ot(n)&&(s=r,r=n,n=Ot);var o=this,l=function(){var c=St,h=o.selector,_;return c&&c!==o&&c.data.push(o),s&&(o.selector=Va(s)),St=o,_=r.apply(o,arguments),Ot(_)&&o._r.push(_),St=c,o.selector=h,o.isReverted=!1,_};return o.last=l,n===Ot?l(o,function(u){return o.add(null,u)}):n?o[n]=l:l},t.ignore=function(n){var r=St;St=null,n(this),St=r},t.getTweens=function(){var n=[];return this.data.forEach(function(r){return r instanceof i?n.push.apply(n,r.getTweens()):r instanceof Bt&&!(r.parent&&r.parent.data==="nested")&&n.push(r)}),n},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(n,r){var s=this;if(n?function(){for(var l=s.getTweens(),u=s.data.length,c;u--;)c=s.data[u],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(h){return l.splice(l.indexOf(h),1)}));for(l.map(function(h){return{g:h._dur||h._delay||h._sat&&!h._sat.vars.immediateRender?h.globalTime(0):-1/0,t:h}}).sort(function(h,_){return _.g-h.g||-1/0}).forEach(function(h){return h.t.revert(n)}),u=s.data.length;u--;)c=s.data[u],c instanceof de?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Bt)&&c.revert&&c.revert(n);s._r.forEach(function(h){return h(n,s)}),s.isReverted=!0}():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),r)for(var o=ir.length;o--;)ir[o].id===this.id&&ir.splice(o,1)},t.revert=function(n){this.kill(n||{})},i}(),Nv=function(){function i(e){this.contexts=[],this.scope=e,St&&St.data.push(this)}var t=i.prototype;return t.add=function(n,r,s){ln(n)||(n={matches:n});var o=new Fd(0,s||this.scope),l=o.conditions={},u,c,h;St&&!o.selector&&(o.selector=St.selector),this.contexts.push(o),r=o.add("onMatch",r),o.queries=n;for(c in n)c==="all"?h=1:(u=Xe.matchMedia(n[c]),u&&(ir.indexOf(o)<0&&ir.push(o),(l[c]=u.matches)&&(h=1),u.addListener?u.addListener(Na):u.addEventListener("change",Na)));return h&&r(o,function(_){return o.add(null,_)}),this},t.revert=function(n){this.kill(n||{})},t.kill=function(n){this.contexts.forEach(function(r){return r.kill(n,!0)})},i}(),Js={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(function(r){return wd(r)})},timeline:function(t){return new de(t)},getTweensOf:function(t,e){return Vt.getTweensOf(t,e)},getProperty:function(t,e,n,r){Wt(t)&&(t=$e(t)[0]);var s=er(t||{}).get,o=n?ud:ld;return n==="native"&&(n=""),t&&(e?o((Pe[e]&&Pe[e].get||s)(t,e,n,r)):function(l,u,c){return o((Pe[l]&&Pe[l].get||s)(t,l,u,c))})},quickSetter:function(t,e,n){if(t=$e(t),t.length>1){var r=t.map(function(h){return we.quickSetter(h,e,n)}),s=r.length;return function(h){for(var _=s;_--;)r[_](h)}}t=t[0]||{};var o=Pe[e],l=er(t),u=l.harness&&(l.harness.aliases||{})[e]||e,c=o?function(h){var _=new o;Rr._pt=0,_.init(t,n?h+n:h,Rr,0,[t]),_.render(1,_),Rr._pt&&jl(1,Rr)}:l.set(t,u);return o?c:function(h){return c(t,u,n?h+n:h,l,1)}},quickTo:function(t,e,n){var r,s=we.to(t,ur((r={},r[e]="+=0.1",r.paused=!0,r),n||{})),o=function(u,c,h){return s.resetTo(e,u,c,h)};return o.tween=s,o},isTweening:function(t){return Vt.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=rr(t.ease,Br.ease)),Yc(Br,t||{})},config:function(t){return Yc(xe,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,r=t.plugins,s=t.defaults,o=t.extendTimeline;(r||"").split(",").forEach(function(l){return l&&!Pe[l]&&!Ne[l]&&$i(e+" effect requires "+l+" plugin.")}),Ko[e]=function(l,u,c){return n($e(l),Ue(u||{},s),c)},o&&(de.prototype[e]=function(l,u,c){return this.add(Ko[e](l,ln(u)?u:(c=u)&&{},this),c)})},registerEase:function(t,e){at[t]=rr(e)},parseEase:function(t,e){return arguments.length?rr(t,e):at},getById:function(t){return Vt.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var n=new de(t),r,s;for(n.smoothChildTiming=ye(t.smoothChildTiming),Vt.remove(n),n._dp=0,n._time=n._tTime=Vt._time,r=Vt._first;r;)s=r._next,(e||!(!r._dur&&r instanceof Bt&&r.vars.onComplete===r._targets[0]))&&Je(n,r,r._start-r._delay),r=s;return Je(Vt,n,0),n},context:function(t,e){return t?new Fd(t,e):St},matchMedia:function(t){return new Nv(t)},matchMediaRefresh:function(){return ir.forEach(function(t){var e=t.conditions,n,r;for(r in e)e[r]&&(e[r]=!1,n=1);n&&t.revert()})||Na()},addEventListener:function(t,e){var n=ks[t]||(ks[t]=[]);~n.indexOf(e)||n.push(e)},removeEventListener:function(t,e){var n=ks[t],r=n&&n.indexOf(e);r>=0&&n.splice(r,1)},utils:{wrap:fv,wrapYoyo:dv,distribute:md,random:yd,snap:gd,normalize:hv,getUnit:le,clamp:av,splitColor:Id,toArray:$e,selector:Va,mapRange:Td,pipe:uv,unitize:cv,interpolate:_v,shuffle:pd},install:rd,effects:Ko,ticker:Se,updateRoot:de.updateRoot,plugins:Pe,globalTimeline:Vt,core:{PropTween:Te,globals:id,Tween:Bt,Timeline:de,Animation:zi,getCache:er,_removeLinkedListItem:mo,reverting:function(){return ue},context:function(t){return t&&St&&(St.data.push(t),t._ctx=St),St},suppressOverwrites:function(t){return Dl=t}}};ve("to,from,fromTo,delayedCall,set,killTweensOf",function(i){return Js[i]=Bt[i]});Se.add(de.updateRoot);Rr=Js.to({},{duration:0});var Ov=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},Mv=function(t,e){var n=t._targets,r,s,o;for(r in e)for(s=n.length;s--;)o=t._ptLookup[s][r],o&&(o=o.d)&&(o._pt&&(o=Ov(o,r)),o&&o.modifier&&o.modifier(e[r],t,n[s],r))},Yo=function(t,e){return{name:t,rawVars:1,init:function(r,s,o){o._onInit=function(l){var u,c;if(Wt(s)&&(u={},ve(s,function(h){return u[h]=1}),s=u),e){u={};for(c in s)u[c]=e(s[c]);s=u}Mv(l,s)}}}},we=Js.registerPlugin({name:"attr",init:function(t,e,n,r,s){var o,l,u;this.tween=n;for(o in e)u=t.getAttribute(o)||"",l=this.add(t,"setAttribute",(u||0)+"",e[o],r,s,0,0,o),l.op=o,l.b=u,this._props.push(o)},render:function(t,e){for(var n=e._pt;n;)ue?n.set(n.t,n.p,n.b,n):n.r(t,n.d),n=n._next}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n],0,0,0,0,0,1)}},Yo("roundProps",ka),Yo("modifiers"),Yo("snap",gd))||Js;Bt.version=de.version=we.version="3.12.5";nd=1;kl()&&qr();at.Power0;at.Power1;at.Power2;at.Power3;at.Power4;at.Linear;at.Quad;at.Cubic;at.Quart;at.Quint;at.Strong;at.Elastic;at.Back;at.SteppedEase;at.Bounce;at.Sine;at.Expo;at.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var rh,Pn,Dr,zl,Zn,ih,ql,Fv=function(){return typeof window<"u"},Tn={},Yn=180/Math.PI,Vr=Math.PI/180,Er=Math.atan2,sh=1e8,Gl=/([A-Z])/g,Lv=/(left|right|width|margin|padding|x)/i,$v=/[\s,\(]\S/,tn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Oa=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},Uv=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},Bv=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},jv=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},Ld=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},$d=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},zv=function(t,e,n){return t.style[e]=n},qv=function(t,e,n){return t.style.setProperty(e,n)},Gv=function(t,e,n){return t._gsap[e]=n},Kv=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},Hv=function(t,e,n,r,s){var o=t._gsap;o.scaleX=o.scaleY=n,o.renderTransform(s,o)},Wv=function(t,e,n,r,s){var o=t._gsap;o[e]=n,o.renderTransform(s,o)},kt="transform",Ee=kt+"Origin",Qv=function i(t,e){var n=this,r=this.target,s=r.style,o=r._gsap;if(t in Tn&&s){if(this.tfm=this.tfm||{},t!=="transform")t=tn[t]||t,~t.indexOf(",")?t.split(",").forEach(function(l){return n.tfm[l]=pn(r,l)}):this.tfm[t]=o.x?o[t]:pn(r,t),t===Ee&&(this.tfm.zOrigin=o.zOrigin);else return tn.transform.split(",").forEach(function(l){return i.call(n,l,e)});if(this.props.indexOf(kt)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Ee,e,"")),t=kt}(s||e)&&this.props.push(t,e,s[t])},Ud=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},Xv=function(){var t=this.props,e=this.target,n=e.style,r=e._gsap,s,o;for(s=0;s<t.length;s+=3)t[s+1]?e[t[s]]=t[s+2]:t[s+2]?n[t[s]]=t[s+2]:n.removeProperty(t[s].substr(0,2)==="--"?t[s]:t[s].replace(Gl,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),s=ql(),(!s||!s.isStart)&&!n[kt]&&(Ud(n),r.zOrigin&&n[Ee]&&(n[Ee]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},Bd=function(t,e){var n={target:t,props:[],revert:Xv,save:Qv};return t._gsap||we.core.getCache(t),e&&e.split(",").forEach(function(r){return n.save(r)}),n},jd,Ma=function(t,e){var n=Pn.createElementNS?Pn.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Pn.createElement(t);return n&&n.style?n:Pn.createElement(t)},rn=function i(t,e,n){var r=getComputedStyle(t);return r[e]||r.getPropertyValue(e.replace(Gl,"-$1").toLowerCase())||r.getPropertyValue(e)||!n&&i(t,Gr(e)||e,1)||""},oh="O,Moz,ms,Ms,Webkit".split(","),Gr=function(t,e,n){var r=e||Zn,s=r.style,o=5;if(t in s&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);o--&&!(oh[o]+t in s););return o<0?null:(o===3?"ms":o>=0?oh[o]:"")+t},Fa=function(){Fv()&&window.document&&(rh=window,Pn=rh.document,Dr=Pn.documentElement,Zn=Ma("div")||{style:{}},Ma("div"),kt=Gr(kt),Ee=kt+"Origin",Zn.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",jd=!!Gr("perspective"),ql=we.core.reverting,zl=1)},Jo=function i(t){var e=Ma("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,s=this.style.cssText,o;if(Dr.appendChild(e),e.appendChild(this),this.style.display="block",t)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=i}catch{}else this._gsapBBox&&(o=this._gsapBBox());return n&&(r?n.insertBefore(this,r):n.appendChild(this)),Dr.removeChild(e),this.style.cssText=s,o},ah=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},zd=function(t){var e;try{e=t.getBBox()}catch{e=Jo.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===Jo||(e=Jo.call(t,!0)),e&&!e.width&&!e.x&&!e.y?{x:+ah(t,["x","cx","x1"])||0,y:+ah(t,["y","cy","y1"])||0,width:0,height:0}:e},qd=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&zd(t))},cr=function(t,e){if(e){var n=t.style,r;e in Tn&&e!==Ee&&(e=kt),n.removeProperty?(r=e.substr(0,2),(r==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),n.removeProperty(r==="--"?e:e.replace(Gl,"-$1").toLowerCase())):n.removeAttribute(e)}},Sn=function(t,e,n,r,s,o){var l=new Te(t._pt,e,n,0,1,o?$d:Ld);return t._pt=l,l.b=r,l.e=s,t._props.push(n),l},lh={deg:1,rad:1,turn:1},Yv={grid:1,flex:1},Bn=function i(t,e,n,r){var s=parseFloat(n)||0,o=(n+"").trim().substr((s+"").length)||"px",l=Zn.style,u=Lv.test(e),c=t.tagName.toLowerCase()==="svg",h=(c?"client":"offset")+(u?"Width":"Height"),_=100,p=r==="px",m=r==="%",T,g,I,C;if(r===o||!s||lh[r]||lh[o])return s;if(o!=="px"&&!p&&(s=i(t,e,n,"px")),C=t.getCTM&&qd(t),(m||o==="%")&&(Tn[e]||~e.indexOf("adius")))return T=C?t.getBBox()[u?"width":"height"]:t[h],Ft(m?s/T*_:s/100*T);if(l[u?"width":"height"]=_+(p?o:r),g=~e.indexOf("adius")||r==="em"&&t.appendChild&&!c?t:t.parentNode,C&&(g=(t.ownerSVGElement||{}).parentNode),(!g||g===Pn||!g.appendChild)&&(g=Pn.body),I=g._gsap,I&&m&&I.width&&u&&I.time===Se.time&&!I.uncache)return Ft(s/I.width*_);if(m&&(e==="height"||e==="width")){var S=t.style[e];t.style[e]=_+r,T=t[h],S?t.style[e]=S:cr(t,e)}else(m||o==="%")&&!Yv[rn(g,"display")]&&(l.position=rn(t,"position")),g===t&&(l.position="static"),g.appendChild(Zn),T=Zn[h],g.removeChild(Zn),l.position="absolute";return u&&m&&(I=er(g),I.time=Se.time,I.width=g[h]),Ft(p?T*s/_:T&&s?_/T*s:0)},pn=function(t,e,n,r){var s;return zl||Fa(),e in tn&&e!=="transform"&&(e=tn[e],~e.indexOf(",")&&(e=e.split(",")[0])),Tn[e]&&e!=="transform"?(s=Gi(t,r),s=e!=="transformOrigin"?s[e]:s.svg?s.origin:to(rn(t,Ee))+" "+s.zOrigin+"px"):(s=t.style[e],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=Zs[e]&&Zs[e](t,e,n)||rn(t,e)||od(t,e)||(e==="opacity"?1:0))),n&&!~(s+"").trim().indexOf(" ")?Bn(t,e,s,n)+n:s},Jv=function(t,e,n,r){if(!n||n==="none"){var s=Gr(e,t,1),o=s&&rn(t,s,1);o&&o!==n?(e=s,n=o):e==="borderColor"&&(n=rn(t,"borderTopColor"))}var l=new Te(this._pt,t.style,e,0,1,Od),u=0,c=0,h,_,p,m,T,g,I,C,S,k,V,x;if(l.b=n,l.e=r,n+="",r+="",r==="auto"&&(g=t.style[e],t.style[e]=r,r=rn(t,e)||r,g?t.style[e]=g:cr(t,e)),h=[n,r],bd(h),n=h[0],r=h[1],p=n.match(br)||[],x=r.match(br)||[],x.length){for(;_=br.exec(r);)I=_[0],S=r.substring(u,_.index),T?T=(T+1)%5:(S.substr(-5)==="rgba("||S.substr(-5)==="hsla(")&&(T=1),I!==(g=p[c++]||"")&&(m=parseFloat(g)||0,V=g.substr((m+"").length),I.charAt(1)==="="&&(I=Cr(m,I)+V),C=parseFloat(I),k=I.substr((C+"").length),u=br.lastIndex-k.length,k||(k=k||xe.units[e]||V,u===r.length&&(r+=k,l.e+=k)),V!==k&&(m=Bn(t,e,g,k)||0),l._pt={_next:l._pt,p:S||c===1?S:",",s:m,c:C-m,m:T&&T<4||e==="zIndex"?Math.round:0});l.c=u<r.length?r.substring(u,r.length):""}else l.r=e==="display"&&r==="none"?$d:Ld;return td.test(r)&&(l.e=0),this._pt=l,l},uh={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Zv=function(t){var e=t.split(" "),n=e[0],r=e[1]||"50%";return(n==="top"||n==="bottom"||r==="left"||r==="right")&&(t=n,n=r,r=t),e[0]=uh[n]||n,e[1]=uh[r]||r,e.join(" ")},tT=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n=e.t,r=n.style,s=e.u,o=n._gsap,l,u,c;if(s==="all"||s===!0)r.cssText="",u=1;else for(s=s.split(","),c=s.length;--c>-1;)l=s[c],Tn[l]&&(u=1,l=l==="transformOrigin"?Ee:kt),cr(n,l);u&&(cr(n,kt),o&&(o.svg&&n.removeAttribute("transform"),Gi(n,1),o.uncache=1,Ud(r)))}},Zs={clearProps:function(t,e,n,r,s){if(s.data!=="isFromStart"){var o=t._pt=new Te(t._pt,e,n,0,0,tT);return o.u=r,o.pr=-10,o.tween=s,t._props.push(n),1}}},qi=[1,0,0,1,0,0],Gd={},Kd=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},ch=function(t){var e=rn(t,kt);return Kd(e)?qi:e.substr(7).match(Zf).map(Ft)},Kl=function(t,e){var n=t._gsap||er(t),r=t.style,s=ch(t),o,l,u,c;return n.svg&&t.getAttribute("transform")?(u=t.transform.baseVal.consolidate().matrix,s=[u.a,u.b,u.c,u.d,u.e,u.f],s.join(",")==="1,0,0,1,0,0"?qi:s):(s===qi&&!t.offsetParent&&t!==Dr&&!n.svg&&(u=r.display,r.display="block",o=t.parentNode,(!o||!t.offsetParent)&&(c=1,l=t.nextElementSibling,Dr.appendChild(t)),s=ch(t),u?r.display=u:cr(t,"display"),c&&(l?o.insertBefore(t,l):o?o.appendChild(t):Dr.removeChild(t))),e&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},La=function(t,e,n,r,s,o){var l=t._gsap,u=s||Kl(t,!0),c=l.xOrigin||0,h=l.yOrigin||0,_=l.xOffset||0,p=l.yOffset||0,m=u[0],T=u[1],g=u[2],I=u[3],C=u[4],S=u[5],k=e.split(" "),V=parseFloat(k[0])||0,x=parseFloat(k[1])||0,O,w,v,y;n?u!==qi&&(w=m*I-T*g)&&(v=V*(I/w)+x*(-g/w)+(g*S-I*C)/w,y=V*(-T/w)+x*(m/w)-(m*S-T*C)/w,V=v,x=y):(O=zd(t),V=O.x+(~k[0].indexOf("%")?V/100*O.width:V),x=O.y+(~(k[1]||k[0]).indexOf("%")?x/100*O.height:x)),r||r!==!1&&l.smooth?(C=V-c,S=x-h,l.xOffset=_+(C*m+S*g)-C,l.yOffset=p+(C*T+S*I)-S):l.xOffset=l.yOffset=0,l.xOrigin=V,l.yOrigin=x,l.smooth=!!r,l.origin=e,l.originIsAbsolute=!!n,t.style[Ee]="0px 0px",o&&(Sn(o,l,"xOrigin",c,V),Sn(o,l,"yOrigin",h,x),Sn(o,l,"xOffset",_,l.xOffset),Sn(o,l,"yOffset",p,l.yOffset)),t.setAttribute("data-svg-origin",V+" "+x)},Gi=function(t,e){var n=t._gsap||new Cd(t);if("x"in n&&!e&&!n.uncache)return n;var r=t.style,s=n.scaleX<0,o="px",l="deg",u=getComputedStyle(t),c=rn(t,Ee)||"0",h,_,p,m,T,g,I,C,S,k,V,x,O,w,v,y,b,R,P,A,it,ct,_t,lt,Ct,Ie,Oe,Be,gt,At,te,Qt;return h=_=p=g=I=C=S=k=V=0,m=T=1,n.svg=!!(t.getCTM&&qd(t)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(r[kt]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[kt]!=="none"?u[kt]:"")),r.scale=r.rotate=r.translate="none"),w=Kl(t,n.svg),n.svg&&(n.uncache?(Ct=t.getBBox(),c=n.xOrigin-Ct.x+"px "+(n.yOrigin-Ct.y)+"px",lt=""):lt=!e&&t.getAttribute("data-svg-origin"),La(t,lt||c,!!lt||n.originIsAbsolute,n.smooth!==!1,w)),x=n.xOrigin||0,O=n.yOrigin||0,w!==qi&&(R=w[0],P=w[1],A=w[2],it=w[3],h=ct=w[4],_=_t=w[5],w.length===6?(m=Math.sqrt(R*R+P*P),T=Math.sqrt(it*it+A*A),g=R||P?Er(P,R)*Yn:0,S=A||it?Er(A,it)*Yn+g:0,S&&(T*=Math.abs(Math.cos(S*Vr))),n.svg&&(h-=x-(x*R+O*A),_-=O-(x*P+O*it))):(Qt=w[6],At=w[7],Oe=w[8],Be=w[9],gt=w[10],te=w[11],h=w[12],_=w[13],p=w[14],v=Er(Qt,gt),I=v*Yn,v&&(y=Math.cos(-v),b=Math.sin(-v),lt=ct*y+Oe*b,Ct=_t*y+Be*b,Ie=Qt*y+gt*b,Oe=ct*-b+Oe*y,Be=_t*-b+Be*y,gt=Qt*-b+gt*y,te=At*-b+te*y,ct=lt,_t=Ct,Qt=Ie),v=Er(-A,gt),C=v*Yn,v&&(y=Math.cos(-v),b=Math.sin(-v),lt=R*y-Oe*b,Ct=P*y-Be*b,Ie=A*y-gt*b,te=it*b+te*y,R=lt,P=Ct,A=Ie),v=Er(P,R),g=v*Yn,v&&(y=Math.cos(v),b=Math.sin(v),lt=R*y+P*b,Ct=ct*y+_t*b,P=P*y-R*b,_t=_t*y-ct*b,R=lt,ct=Ct),I&&Math.abs(I)+Math.abs(g)>359.9&&(I=g=0,C=180-C),m=Ft(Math.sqrt(R*R+P*P+A*A)),T=Ft(Math.sqrt(_t*_t+Qt*Qt)),v=Er(ct,_t),S=Math.abs(v)>2e-4?v*Yn:0,V=te?1/(te<0?-te:te):0),n.svg&&(lt=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!Kd(rn(t,kt)),lt&&t.setAttribute("transform",lt))),Math.abs(S)>90&&Math.abs(S)<270&&(s?(m*=-1,S+=g<=0?180:-180,g+=g<=0?180:-180):(T*=-1,S+=S<=0?180:-180)),e=e||n.uncache,n.x=h-((n.xPercent=h&&(!e&&n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-h)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+o,n.y=_-((n.yPercent=_&&(!e&&n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-_)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+o,n.z=p+o,n.scaleX=Ft(m),n.scaleY=Ft(T),n.rotation=Ft(g)+l,n.rotationX=Ft(I)+l,n.rotationY=Ft(C)+l,n.skewX=S+l,n.skewY=k+l,n.transformPerspective=V+o,(n.zOrigin=parseFloat(c.split(" ")[2])||!e&&n.zOrigin||0)&&(r[Ee]=to(c)),n.xOffset=n.yOffset=0,n.force3D=xe.force3D,n.renderTransform=n.svg?nT:jd?Hd:eT,n.uncache=0,n},to=function(t){return(t=t.split(" "))[0]+" "+t[1]},Zo=function(t,e,n){var r=le(e);return Ft(parseFloat(e)+parseFloat(Bn(t,"x",n+"px",r)))+r},eT=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Hd(t,e)},Wn="0deg",_i="0px",Qn=") ",Hd=function(t,e){var n=e||this,r=n.xPercent,s=n.yPercent,o=n.x,l=n.y,u=n.z,c=n.rotation,h=n.rotationY,_=n.rotationX,p=n.skewX,m=n.skewY,T=n.scaleX,g=n.scaleY,I=n.transformPerspective,C=n.force3D,S=n.target,k=n.zOrigin,V="",x=C==="auto"&&t&&t!==1||C===!0;if(k&&(_!==Wn||h!==Wn)){var O=parseFloat(h)*Vr,w=Math.sin(O),v=Math.cos(O),y;O=parseFloat(_)*Vr,y=Math.cos(O),o=Zo(S,o,w*y*-k),l=Zo(S,l,-Math.sin(O)*-k),u=Zo(S,u,v*y*-k+k)}I!==_i&&(V+="perspective("+I+Qn),(r||s)&&(V+="translate("+r+"%, "+s+"%) "),(x||o!==_i||l!==_i||u!==_i)&&(V+=u!==_i||x?"translate3d("+o+", "+l+", "+u+") ":"translate("+o+", "+l+Qn),c!==Wn&&(V+="rotate("+c+Qn),h!==Wn&&(V+="rotateY("+h+Qn),_!==Wn&&(V+="rotateX("+_+Qn),(p!==Wn||m!==Wn)&&(V+="skew("+p+", "+m+Qn),(T!==1||g!==1)&&(V+="scale("+T+", "+g+Qn),S.style[kt]=V||"translate(0, 0)"},nT=function(t,e){var n=e||this,r=n.xPercent,s=n.yPercent,o=n.x,l=n.y,u=n.rotation,c=n.skewX,h=n.skewY,_=n.scaleX,p=n.scaleY,m=n.target,T=n.xOrigin,g=n.yOrigin,I=n.xOffset,C=n.yOffset,S=n.forceCSS,k=parseFloat(o),V=parseFloat(l),x,O,w,v,y;u=parseFloat(u),c=parseFloat(c),h=parseFloat(h),h&&(h=parseFloat(h),c+=h,u+=h),u||c?(u*=Vr,c*=Vr,x=Math.cos(u)*_,O=Math.sin(u)*_,w=Math.sin(u-c)*-p,v=Math.cos(u-c)*p,c&&(h*=Vr,y=Math.tan(c-h),y=Math.sqrt(1+y*y),w*=y,v*=y,h&&(y=Math.tan(h),y=Math.sqrt(1+y*y),x*=y,O*=y)),x=Ft(x),O=Ft(O),w=Ft(w),v=Ft(v)):(x=_,v=p,O=w=0),(k&&!~(o+"").indexOf("px")||V&&!~(l+"").indexOf("px"))&&(k=Bn(m,"x",o,"px"),V=Bn(m,"y",l,"px")),(T||g||I||C)&&(k=Ft(k+T-(T*x+g*w)+I),V=Ft(V+g-(T*O+g*v)+C)),(r||s)&&(y=m.getBBox(),k=Ft(k+r/100*y.width),V=Ft(V+s/100*y.height)),y="matrix("+x+","+O+","+w+","+v+","+k+","+V+")",m.setAttribute("transform",y),S&&(m.style[kt]=y)},rT=function(t,e,n,r,s){var o=360,l=Wt(s),u=parseFloat(s)*(l&&~s.indexOf("rad")?Yn:1),c=u-r,h=r+c+"deg",_,p;return l&&(_=s.split("_")[1],_==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),_==="cw"&&c<0?c=(c+o*sh)%o-~~(c/o)*o:_==="ccw"&&c>0&&(c=(c-o*sh)%o-~~(c/o)*o)),t._pt=p=new Te(t._pt,e,n,r,c,Uv),p.e=h,p.u="deg",t._props.push(n),p},hh=function(t,e){for(var n in e)t[n]=e[n];return t},iT=function(t,e,n){var r=hh({},n._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=n.style,l,u,c,h,_,p,m,T;r.svg?(c=n.getAttribute("transform"),n.setAttribute("transform",""),o[kt]=e,l=Gi(n,1),cr(n,kt),n.setAttribute("transform",c)):(c=getComputedStyle(n)[kt],o[kt]=e,l=Gi(n,1),o[kt]=c);for(u in Tn)c=r[u],h=l[u],c!==h&&s.indexOf(u)<0&&(m=le(c),T=le(h),_=m!==T?Bn(n,u,c,T):parseFloat(c),p=parseFloat(h),t._pt=new Te(t._pt,l,u,_,p-_,Oa),t._pt.u=T||0,t._props.push(u));hh(l,r)};ve("padding,margin,Width,Radius",function(i,t){var e="Top",n="Right",r="Bottom",s="Left",o=(t<3?[e,n,r,s]:[e+s,e+n,r+n,r+s]).map(function(l){return t<2?i+l:"border"+l+i});Zs[t>1?"border"+i:i]=function(l,u,c,h,_){var p,m;if(arguments.length<4)return p=o.map(function(T){return pn(l,T,c)}),m=p.join(" "),m.split(p[0]).length===5?p[0]:m;p=(h+"").split(" "),m={},o.forEach(function(T,g){return m[T]=p[g]=p[g]||p[(g-1)/2|0]}),l.init(u,m,_)}});var Wd={name:"css",register:Fa,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,r,s){var o=this._props,l=t.style,u=n.vars.startAt,c,h,_,p,m,T,g,I,C,S,k,V,x,O,w,v;zl||Fa(),this.styles=this.styles||Bd(t),v=this.styles.props,this.tween=n;for(g in e)if(g!=="autoRound"&&(h=e[g],!(Pe[g]&&Dd(g,e,n,r,t,s)))){if(m=typeof h,T=Zs[g],m==="function"&&(h=h.call(n,r,t,s),m=typeof h),m==="string"&&~h.indexOf("random(")&&(h=Bi(h)),T)T(this,t,g,h,n)&&(w=1);else if(g.substr(0,2)==="--")c=(getComputedStyle(t).getPropertyValue(g)+"").trim(),h+="",xn.lastIndex=0,xn.test(c)||(I=le(c),C=le(h)),C?I!==C&&(c=Bn(t,g,c,C)+C):I&&(h+=I),this.add(l,"setProperty",c,h,r,s,0,0,g),o.push(g),v.push(g,0,l[g]);else if(m!=="undefined"){if(u&&g in u?(c=typeof u[g]=="function"?u[g].call(n,r,t,s):u[g],Wt(c)&&~c.indexOf("random(")&&(c=Bi(c)),le(c+"")||c==="auto"||(c+=xe.units[g]||le(pn(t,g))||""),(c+"").charAt(1)==="="&&(c=pn(t,g))):c=pn(t,g),p=parseFloat(c),S=m==="string"&&h.charAt(1)==="="&&h.substr(0,2),S&&(h=h.substr(2)),_=parseFloat(h),g in tn&&(g==="autoAlpha"&&(p===1&&pn(t,"visibility")==="hidden"&&_&&(p=0),v.push("visibility",0,l.visibility),Sn(this,l,"visibility",p?"inherit":"hidden",_?"inherit":"hidden",!_)),g!=="scale"&&g!=="transform"&&(g=tn[g],~g.indexOf(",")&&(g=g.split(",")[0]))),k=g in Tn,k){if(this.styles.save(g),V||(x=t._gsap,x.renderTransform&&!e.parseTransform||Gi(t,e.parseTransform),O=e.smoothOrigin!==!1&&x.smooth,V=this._pt=new Te(this._pt,l,kt,0,1,x.renderTransform,x,0,-1),V.dep=1),g==="scale")this._pt=new Te(this._pt,x,"scaleY",x.scaleY,(S?Cr(x.scaleY,S+_):_)-x.scaleY||0,Oa),this._pt.u=0,o.push("scaleY",g),g+="X";else if(g==="transformOrigin"){v.push(Ee,0,l[Ee]),h=Zv(h),x.svg?La(t,h,0,O,0,this):(C=parseFloat(h.split(" ")[2])||0,C!==x.zOrigin&&Sn(this,x,"zOrigin",x.zOrigin,C),Sn(this,l,g,to(c),to(h)));continue}else if(g==="svgOrigin"){La(t,h,1,O,0,this);continue}else if(g in Gd){rT(this,x,g,p,S?Cr(p,S+h):h);continue}else if(g==="smoothOrigin"){Sn(this,x,"smooth",x.smooth,h);continue}else if(g==="force3D"){x[g]=h;continue}else if(g==="transform"){iT(this,h,t);continue}}else g in l||(g=Gr(g)||g);if(k||(_||_===0)&&(p||p===0)&&!$v.test(h)&&g in l)I=(c+"").substr((p+"").length),_||(_=0),C=le(h)||(g in xe.units?xe.units[g]:I),I!==C&&(p=Bn(t,g,c,C)),this._pt=new Te(this._pt,k?x:l,g,p,(S?Cr(p,S+_):_)-p,!k&&(C==="px"||g==="zIndex")&&e.autoRound!==!1?jv:Oa),this._pt.u=C||0,I!==C&&C!=="%"&&(this._pt.b=c,this._pt.r=Bv);else if(g in l)Jv.call(this,t,g,c,S?S+h:h);else if(g in t)this.add(t,g,c||t[g],S?S+h:h,r,s);else if(g!=="parseTransform"){Nl(g,h);continue}k||(g in l?v.push(g,0,l[g]):v.push(g,1,c||t[g])),o.push(g)}}w&&Md(this)},render:function(t,e){if(e.tween._time||!ql())for(var n=e._pt;n;)n.r(t,n.d),n=n._next;else e.styles.revert()},get:pn,aliases:tn,getSetter:function(t,e,n){var r=tn[e];return r&&r.indexOf(",")<0&&(e=r),e in Tn&&e!==Ee&&(t._gsap.x||pn(t,"x"))?n&&ih===n?e==="scale"?Kv:Gv:(ih=n||{})&&(e==="scale"?Hv:Wv):t.style&&!Vl(t.style[e])?zv:~e.indexOf("-")?qv:Bl(t,e)},core:{_removeProperty:cr,_getMatrix:Kl}};we.utils.checkPrefix=Gr;we.core.getStyleSaver=Bd;(function(i,t,e,n){var r=ve(i+","+t+","+e,function(s){Tn[s]=1});ve(t,function(s){xe.units[s]="deg",Gd[s]=1}),tn[r[13]]=i+","+t,ve(n,function(s){var o=s.split(":");tn[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");ve("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(i){xe.units[i]="px"});we.registerPlugin(Wd);var Qd=we.registerPlugin(Wd)||we;Qd.core.Tween;function fh(i){let t,e="Geselecteerd Bestand:",n,r,s=i[0].name+"",o;return{c(){t=B("p"),t.textContent=e,n=Q(),r=B("pre"),o=tt(s),this.h()},l(l){t=j(l,"P",{class:!0,"data-svelte-h":!0}),On(t)!=="svelte-zs65m6"&&(t.textContent=e),n=X(l),r=j(l,"PRE",{class:!0});var u=K(r);o=et(u,s),u.forEach(F),this.h()},h(){G(t,"class","font-bold text-center"),G(r,"class","text-center")},m(l,u){W(l,t,u),W(l,n,u),W(l,r,u),M(r,o)},p(l,u){u&1&&s!==(s=l[0].name+"")&&jt(o,s)},d(l){l&&(F(t),F(n),F(r))}}}function sT(i){let t;return{c(){t=tt("Upload")},l(e){t=et(e,"Upload")},m(e,n){W(e,t,n)},d(e){e&&F(t)}}}function oT(i){let t;return{c(){t=tt("Terug")},l(e){t=et(e,"Terug")},m(e,n){W(e,t,n)},d(e){e&&F(t)}}}function aT(i){let t,e,n,r="Selecteer een bestand",s,o,l,u,c,h,_,p,m=i[0]&&fh(i);return l=new ge({props:{class:"my-2",$$slots:{default:[sT]},$$scope:{ctx:i}}}),l.$on("click",i[3]),c=new ge({props:{theme:"red",class:"my-2",$$slots:{default:[oT]},$$scope:{ctx:i}}}),c.$on("click",i[5]),{c(){t=B("input"),e=Q(),n=B("label"),n.textContent=r,s=Q(),m&&m.c(),o=Q(),vt(l.$$.fragment),u=Q(),vt(c.$$.fragment),this.h()},l(T){t=j(T,"INPUT",{id:!0,class:!0,type:!0,accept:!0}),e=X(T),n=j(T,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),On(n)!=="svelte-1fxuazo"&&(n.textContent=r),s=X(T),m&&m.l(T),o=X(T),Tt(l.$$.fragment,T),u=X(T),Tt(c.$$.fragment,T),this.h()},h(){G(t,"id","file-upload"),G(t,"class","hidden"),G(t,"type","file"),G(t,"accept","text/csv"),G(n,"for","file-upload"),G(n,"class","my-2 bg-blue-500 text-white px-5 rounded-md py-3 cursor-pointer")},m(T,g){W(T,t,g),i[4](t),W(T,e,g),W(T,n,g),W(T,s,g),m&&m.m(T,g),W(T,o,g),Et(l,T,g),W(T,u,g),Et(c,T,g),h=!0,_||(p=Ga(t,"change",i[2]),_=!0)},p(T,g){T[0]?m?m.p(T,g):(m=fh(T),m.c(),m.m(o.parentNode,o)):m&&(m.d(1),m=null);const I={};g&2048&&(I.$$scope={dirty:g,ctx:T}),l.$set(I);const C={};g&2048&&(C.$$scope={dirty:g,ctx:T}),c.$set(C)},i(T){h||(J(l.$$.fragment,T),J(c.$$.fragment,T),h=!0)},o(T){rt(l.$$.fragment,T),rt(c.$$.fragment,T),h=!1},d(T){T&&(F(t),F(e),F(n),F(s),F(o),F(u)),i[4](null),m&&m.d(T),wt(l,T),wt(c,T),_=!1,p()}}}function lT(i){let t,e;return t=new Hi({props:{$$slots:{default:[aT]},$$scope:{ctx:i}}}),{c(){vt(t.$$.fragment)},l(n){Tt(t.$$.fragment,n)},m(n,r){Et(t,n,r),e=!0},p(n,[r]){const s={};r&2051&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(J(t.$$.fragment,n),e=!0)},o(n){rt(t.$$.fragment,n),e=!1},d(n){wt(t,n)}}}function uT(i,t,e){let n=null,r,s=[],o=null,l=null;function u(T){var V,x;const g=T.target,I=(V=g.files)==null?void 0:V[0];if(!I)return;const C=(x=I.name.split(".").pop())==null?void 0:x.toLowerCase(),S=I.type;if(!["text/csv","application/vnd.ms-excel"].includes(S)||C!=="csv"){alert("Ongeldig of niet-ondersteund bestandstype. Upload een CSV-bestand."),g.value="";return}e(0,n=I)}function c(){if(!n){alert("Selecteer een bestand.");return}h(),alert("Upload successvol."),e(1,r.value="",r),e(0,n=null)}function h(){const T=new FileReader;T.onload=function(g){var I;try{const S=((I=g.target)==null?void 0:I.result).split("\r").filter(O=>O.trim()!=="");if(S.length<2){alert("CSV bevat geen data.");return}const k=S[0].split(";"),V=k.indexOf("naam"),x=k.indexOf("maximaal");if(V===-1||x===-1){alert("CSV-bestand bevat niet de vereiste headers.");return}s=[],o=null,l=null;for(let O=1;O<S.length;O++){const w=S[O].split(";").map(v=>v.trim().replace("/r",""));if(w[V])if(w[V].includes("budget"))o={maximaal:w[x]};else if(w[V].includes("doel"))l={maximaal:w[x]};else{const v={};for(let y=0;y<k.length;y++)v[k[y]]=w[y];s.push(v)}}}catch(C){alert("Er is een fout opgetreden tijdens het verwerken van het bestand."),console.error(C)}},T.onerror=function(){alert("Er is een fout opgetreden tijdens het lezen van het bestand.")},T.onloadend=function(){_()},n&&T.readAsText(n)}const _=async()=>{try{const T=s.map(k=>k.id),g=await Hs($r(Ye,"maatregelen")),I=await Hs($r(Ye,"doelen")),C=h0(Ye);g.docs.forEach(k=>{T.includes(k.id)||C.delete(k.ref)}),s.forEach(k=>{const V=Ea(Ye,"maatregelen",k.id);C.set(V,k,{merge:!0})});const S=Ea(Ye,"doelen","taalgroeiers");o&&C.set(S,{budget:o.maximaal},{merge:!0}),l&&C.set(S,{doel:l.maximaal},{merge:!0}),await C.commit(),console.log("Firestore updated successfully.")}catch(T){alert("Er is een fout opgetreden bij het opslaan van het bestand in Firestore."),console.error(T)}};function p(T){za[T?"unshift":"push"](()=>{r=T,e(1,r)})}return[n,r,u,c,p,()=>ze.set(0)]}class cT extends un{constructor(t){super(),cn(this,t,uT,lT,Ge,{})}}function hT(i){let t,e,n,r,s,o,l,u,c,h,_,p,m,T,g,I,C,S,k;return n=new A0({}),o=new q0({}),c=new O0({}),p=new C0({}),g=new L_({}),S=new cT({}),{c(){t=B("div"),e=B("div"),vt(n.$$.fragment),r=Q(),s=B("div"),vt(o.$$.fragment),l=Q(),u=B("div"),vt(c.$$.fragment),h=Q(),_=B("div"),vt(p.$$.fragment),m=Q(),T=B("div"),vt(g.$$.fragment),I=Q(),C=B("div"),vt(S.$$.fragment),this.h()},l(V){t=j(V,"DIV",{class:!0});var x=K(t);e=j(x,"DIV",{class:!0});var O=K(e);Tt(n.$$.fragment,O),O.forEach(F),r=X(x),s=j(x,"DIV",{class:!0});var w=K(s);Tt(o.$$.fragment,w),w.forEach(F),l=X(x),u=j(x,"DIV",{class:!0});var v=K(u);Tt(c.$$.fragment,v),v.forEach(F),h=X(x),_=j(x,"DIV",{class:!0});var y=K(_);Tt(p.$$.fragment,y),y.forEach(F),m=X(x),T=j(x,"DIV",{class:!0});var b=K(T);Tt(g.$$.fragment,b),b.forEach(F),I=X(x),C=j(x,"DIV",{class:!0});var R=K(C);Tt(S.$$.fragment,R),R.forEach(F),x.forEach(F),this.h()},h(){G(e,"class","h-screen flex justify-center items-center w-screen"),G(s,"class","h-screen flex justify-center items-center w-screen"),G(u,"class","h-screen flex justify-center items-center w-screen"),G(_,"class","h-screen flex justify-center items-center w-screen"),G(T,"class","h-screen flex justify-center items-center w-screen"),G(C,"class","h-screen flex justify-center items-center w-screen"),G(t,"class","module-page flex svelte-atttuc")},m(V,x){W(V,t,x),M(t,e),Et(n,e,null),M(t,r),M(t,s),Et(o,s,null),M(t,l),M(t,u),Et(c,u,null),M(t,h),M(t,_),Et(p,_,null),M(t,m),M(t,T),Et(g,T,null),M(t,I),M(t,C),Et(S,C,null),i[2](t),k=!0},p:I_,i(V){k||(J(n.$$.fragment,V),J(o.$$.fragment,V),J(c.$$.fragment,V),J(p.$$.fragment,V),J(g.$$.fragment,V),J(S.$$.fragment,V),k=!0)},o(V){rt(n.$$.fragment,V),rt(o.$$.fragment,V),rt(c.$$.fragment,V),rt(p.$$.fragment,V),rt(g.$$.fragment,V),rt(S.$$.fragment,V),k=!1},d(V){V&&F(t),wt(n),wt(o),wt(c),wt(p),wt(g),wt(S),i[2](null)}}}function fT(i,t,e){let n;Ze(i,ze,h=>e(1,n=h));const r=$r(Ye,"stakeholders");let s;const o=h=>{const _=-100/s.children.length*h;Qd.to(s,{xPercent:_,duration:1,ease:"power2.inOut"})},l=async()=>{try{const _=(await Hs(r)).docs.map(p=>({id:p.id,values:p.data().values,description:p.data().description}));kr.set(_)}catch(h){console.error("Error fetching document: ",h)}},u=()=>Ia(r,h=>{const _=h.docs.map(p=>({id:p.id,values:p.data().values,description:p.data().description}));kr.set(_)},h=>{console.log(`Encountered error: ${h}`)});qa(()=>{l(),u()});function c(h){za[h?"unshift":"push"](()=>{s=h,e(0,s)})}return i.$$.update=()=>{i.$$.dirty&3&&s&&o(n)},[s,n,c]}class vT extends un{constructor(t){super(),cn(this,t,fT,hT,Ge,{})}}export{vT as component};
