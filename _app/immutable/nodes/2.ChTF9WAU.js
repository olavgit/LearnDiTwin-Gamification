import{s as xe,o as lo,y as C_,e as ki,a as Xi,u as Yi,g as Ji,b as Zi,z as Hu,A as ha,B as S_,C as Th,f as D_,c as Re,n as or,D as V_}from"../chunks/scheduler.Depnz_9n.js";import{S as qe,i as Ge,o as Ve,g as q,z as uo,r as wn,n as Z,p as In,m as K,d as M,e as U,s as Q,c as z,a as Y,f as X,l as G,q as We,A as Xe,H as k_,B as x_,C as Ku,v as yt,w as vt,x as Tt,y as Et,D as se,h as F,E as O_,F as N_,G as ts,t as lt,b as ut,j as Ft}from"../chunks/index.nEIu_tRv.js";import{w as vr}from"../chunks/index.CfksRUY7.js";function fn(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function M_(i,t){const e={},n={},r={$$scope:1};let s=i.length;for(;s--;){const o=i[s],l=t[s];if(l){for(const u in o)u in l||(n[u]=1);for(const u in l)r[u]||(e[u]=l[u],r[u]=1);i[s]=l}else for(const u in o)r[u]=1}for(const o in n)o in e||(e[o]=void 0);return e}const fr=vr([]),Qa=vr(null),nn=vr(0),$s=vr(!1);function xi(i,t){return i*t.minimaal*t.effectPerWeek*t.rondesPerJaar}function Bs(i,t){return xi(i,t)*t.kostenPerPersoonPerDrieMaanden}function Us(i,t){if(i===0)return 0;{const e=Number(t.minimaal)+(i-1)*(Number(t.maximaal)-Number(t.minimaal))/9;return Math.round(e)}}const zs=vr([]),F_=i=>i.replace(/-_$/g,"").replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z])([A-Z])(?=[a-z])/g,"$1-$2").toLowerCase(),L_=(i,t)=>{const n=i.getBoundingClientRect().width+2,r=window.getComputedStyle(i),s=parseInt(r.getPropertyValue("padding-left"),10),o=parseInt(r.getPropertyValue("padding-right"),10),l=s+o,u=n-l;return Math.round(Math.min(t,u||t))},$_=(i,t=null,e)=>{const n=i.getBoundingClientRect(),r=window.innerWidth||document.documentElement.clientWidth,s=window.innerHeight||document.documentElement.clientHeight;let o=n.bottom>0&&n.top<s&&n.right>0&&n.left<r;if(t){const l=t.getBoundingClientRect();return e==="top"||e==="bottom"?o=l.bottom+l.height<s&&l.top<s:o=l.right+l.width<r&&l.left<r,o}return o},Go=(i,t,e,n)=>{if(!i||!t)return n;const r=t.getBoundingClientRect(),s=i.getBoundingClientRect(),o=window.getComputedStyle(i).position;window.getComputedStyle(i);let l=0,u=0,c=0,h=0,d=0,m=i;for(;m&&m!==document.body;){const p=window.getComputedStyle(m),T=p.position,C=m.getBoundingClientRect();T==="fixed"?(c+=C.top+window.scrollY,d+=C.left+window.scrollX):T==="sticky"?(h+=C.top,d+=C.left+window.scrollX):(T==="absolute"||T==="relative")&&(T==="absolute"&&(l-=parseFloat(p.top)||0,u-=parseFloat(p.left)||0),T==="relative"&&(l-=m.offsetTop,u-=m.offsetLeft,e==="bottom"&&(l+=s.height),e==="right"&&(u-=s.width),o==="absolute"&&e==="right"&&(u+=s.width)));const b=p.transform;if(b&&b!=="none"){const D=new DOMMatrix(b);T==="relative"||T==="absolute"?(l-=D.m42,u-=D.m41):(l-=m.offsetTop+D.m42,u-=m.offsetLeft+D.m41)}m=m.parentElement}let g=s.top+l+h-c,y=s.left+u-d;switch(e){case"top":n.top=g,n.left=y+s.width/2;break;case"bottom":n.top=g-r.height,n.left=y+s.width/2;break;case"left":n.left=y,n.top=g+s.height/2;break;case"right":n.left=y+s.width-r.width,n.top=g+s.height/2;break}return n.top+=window.scrollY,n.left+=window.scrollX,n},B_={left:"right",right:"left",top:"bottom",bottom:"top"};function U_(i){let t;const e=i[22].default,n=Xi(e,i,i[21],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),t=!0},p(r,s){n&&n.p&&(!t||s[0]&2097152)&&Yi(n,e,r,r[21],t?Zi(e,r[21],s,null):Ji(r[21]),null)},i(r){t||(K(n,r),t=!0)},o(r){Z(n,r),t=!1},d(r){n&&n.d(r)}}}function z_(i){let t,e,n,r,s;const o=i[22].default,l=Xi(o,i,i[21],null);let u=!i[12]&&Wu(i);return{c(){t=U("span"),l&&l.c(),e=Q(),n=U("div"),u&&u.c(),this.h()},l(c){t=z(c,"SPAN",{class:!0});var h=Y(t);l&&l.l(h),h.forEach(M),e=X(c),n=z(c,"DIV",{class:!0,style:!0});var d=Y(n);u&&u.l(d),d.forEach(M),this.h()},h(){G(t,"class","tooltip-container"),G(n,"class",r="tooltip animation-"+i[9]+" "+i[0]+" "+i[4]+" svelte-1xktviv"),We(n,"bottom","auto"),We(n,"right","auto"),We(n,"left",i[11].left+"px"),We(n,"min-width",i[8]+"px"),We(n,"max-width",i[3]+"px"),We(n,"text-align",i[2]),We(n,"top",i[11].top+"px"),Xe(n,"arrowless",!i[5]),Xe(n,"show",i[10])},m(c,h){q(c,t,h),l&&l.m(t,null),i[23](t),q(c,e,h),q(c,n,h),u&&u.m(n,null),i[24](n),s=!0},p(c,h){l&&l.p&&(!s||h[0]&2097152)&&Yi(l,o,c,c[21],s?Zi(o,c[21],h,null):Ji(c[21]),null),c[12]?u&&(u.d(1),u=null):u?u.p(c,h):(u=Wu(c),u.c(),u.m(n,null)),(!s||h[0]&529&&r!==(r="tooltip animation-"+c[9]+" "+c[0]+" "+c[4]+" svelte-1xktviv"))&&G(n,"class",r),(!s||h[0]&2048)&&We(n,"left",c[11].left+"px"),(!s||h[0]&256)&&We(n,"min-width",c[8]+"px"),(!s||h[0]&8)&&We(n,"max-width",c[3]+"px"),(!s||h[0]&4)&&We(n,"text-align",c[2]),(!s||h[0]&2048)&&We(n,"top",c[11].top+"px"),(!s||h[0]&561)&&Xe(n,"arrowless",!c[5]),(!s||h[0]&1553)&&Xe(n,"show",c[10])},i(c){s||(K(l,c),s=!0)},o(c){Z(l,c),s=!1},d(c){c&&(M(t),M(e),M(n)),l&&l.d(c),i[23](null),u&&u.d(),i[24](null)}}}function Wu(i){let t,e;return{c(){t=new k_(!1),e=Ve(),this.h()},l(n){t=x_(n,!1),e=Ve(),this.h()},h(){t.a=e},m(n,r){t.m(i[1],n,r),q(n,e,r)},p(n,r){r[0]&2&&t.p(n[1])},d(n){n&&(M(e),t.d())}}}function j_(i){let t,e,n,r,s,o;const l=[z_,U_],u=[];function c(h,d){return h[1]?0:1}return t=c(i),e=u[t]=l[t](i),{c(){e.c(),n=Ve()},l(h){e.l(h),n=Ve()},m(h,d){u[t].m(h,d),q(h,n,d),r=!0,s||(o=uo(window,"resize",i[13]),s=!0)},p(h,d){let m=t;t=c(h),t===m?u[t].p(h,d):(wn(),Z(u[m],1,1,()=>{u[m]=null}),In(),e=u[t],e?e.p(h,d):(e=u[t]=l[t](h),e.c()),K(e,1),e.m(n.parentNode,n))},i(h){r||(K(e),r=!0)},o(h){Z(e),r=!1},d(h){h&&M(n),u[t].d(h),s=!1,o()}}}function q_(i,t,e){let n,{$$slots:r={},$$scope:s}=t,{action:o="hover"}=t,{content:l=""}=t,{align:u="left"}=t,{position:c="top"}=t,{maxWidth:h=200}=t,{style:d=null}=t,{theme:m=""}=t,{animation:g=""}=t,{hideOnClickOutside:y=!1}=t,{delay:p=200}=t,{arrow:T=!0}=t,{autoPosition:C=!1}=t,{show:b=!1}=t,D=null,V=null,k=0,O=null,I=c,E=null,v=null,R=!1,P={bottom:0,top:0,right:0,left:0};const S=({target:j})=>{y&&D!==j&&V!==j&&!(D!=null&&D.parentNode.contains(j))&&!(V!=null&&V.contains(j))&&rt()},A=()=>{R?rt():st()},st=()=>{const j=g?p:0;C&&!$_(D,V,c)&&e(0,c=B_[c]),e(11,P=Go(D,V,c,P)),g&&e(9,E=g),v=setTimeout(()=>e(10,R=!0),j)},rt=()=>{e(10,R=!1),e(0,c=I),e(9,E=null),v&&(clearTimeout(v),v=null)},ht=()=>{D!==null&&(at(),o==="click"&&(D.addEventListener("click",A),y&&document.addEventListener("click",S,{passive:!0,capture:!0})),o==="hover"&&(D.addEventListener("mouseenter",st),D.addEventListener("mouseleave",rt)))},at=()=>{y&&document.removeEventListener("click",S),D!==null&&(D.removeEventListener("click",A),D.removeEventListener("mouseenter",st),D.removeEventListener("mouseleave",rt))};lo(()=>{if(ht(),Go(),V!==null&&(n&&!O&&(O=new l.component({target:V,props:l.props})),e(8,k=L_(V,h)),d&&typeof d=="object"))for(let j in d){const H=F_(j),tt=d[j];V.style.setProperty(`--tooltip-${H}`,tt)}}),C_(()=>{O&&(O.$destroy(),O=null),at()});const dt=()=>{R&&e(11,P=Go(D,V,c,P))};function xt(j){ki[j?"unshift":"push"](()=>{D=j,e(7,D)})}function zt(j){ki[j?"unshift":"push"](()=>{V=j,e(6,V)})}return i.$$set=j=>{"action"in j&&e(14,o=j.action),"content"in j&&e(1,l=j.content),"align"in j&&e(2,u=j.align),"position"in j&&e(0,c=j.position),"maxWidth"in j&&e(3,h=j.maxWidth),"style"in j&&e(15,d=j.style),"theme"in j&&e(4,m=j.theme),"animation"in j&&e(16,g=j.animation),"hideOnClickOutside"in j&&e(17,y=j.hideOnClickOutside),"delay"in j&&e(18,p=j.delay),"arrow"in j&&e(5,T=j.arrow),"autoPosition"in j&&e(19,C=j.autoPosition),"show"in j&&e(20,b=j.show),"$$scope"in j&&e(21,s=j.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&2&&e(12,n=typeof l=="object"),i.$$.dirty[0]&16384&&ht(),i.$$.dirty[0]&1048640&&setTimeout(V&&b?st:rt,0)},[c,l,u,h,m,T,V,D,k,E,R,P,n,dt,o,d,g,y,p,C,b,s,r,xt,zt]}class G_ extends qe{constructor(t){super(),Ge(this,t,q_,j_,xe,{action:14,content:1,align:2,position:0,maxWidth:3,style:15,theme:4,animation:16,hideOnClickOutside:17,delay:18,arrow:5,autoPosition:19,show:20},null,[-1,-1])}}function yn(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Eh(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.__proto__=t}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Be={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Br={duration:.5,overwrite:!1,delay:0},Xa,_e,Vt,Ye=1e8,Ct=1/Ye,fa=Math.PI*2,H_=fa/4,K_=0,wh=Math.sqrt,W_=Math.cos,Q_=Math.sin,ne=function(t){return typeof t=="string"},Ut=function(t){return typeof t=="function"},An=function(t){return typeof t=="number"},Ya=function(t){return typeof t>"u"},dn=function(t){return typeof t=="object"},Pe=function(t){return t!==!1},Ja=function(){return typeof window<"u"},Rs=function(t){return Ut(t)||ne(t)},Ih=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},me=Array.isArray,da=/(?:-?\.?\d|\.)+/gi,Ah=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,xr=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Ho=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,bh=/[+-]=-?[.\d]+/,Rh=/[^,'"\[\]\s]+/gi,X_=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Mt,on,_a,Za,je={},js={},Ph,Ch=function(t){return(js=dr(t,je))&&ke},tl=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},Oi=function(t,e){return!e&&console.warn(t)},Sh=function(t,e){return t&&(je[t]=e)&&js&&(js[t]=e)||je},Ni=function(){return 0},Y_={suppressEvents:!0,isStart:!0,kill:!1},Vs={suppressEvents:!0,kill:!1},J_={suppressEvents:!0},el={},Fn=[],ma={},Dh,Me={},Ko={},Qu=30,ks=[],nl="",rl=function(t){var e=t[0],n,r;if(dn(e)||Ut(e)||(t=[t]),!(n=(e._gsap||{}).harness)){for(r=ks.length;r--&&!ks[r].targetTest(e););n=ks[r]}for(r=t.length;r--;)t[r]&&(t[r]._gsap||(t[r]._gsap=new tf(t[r],n)))||t.splice(r,1);return t},ar=function(t){return t._gsap||rl(Je(t))[0]._gsap},Vh=function(t,e,n){return(n=t[e])&&Ut(n)?t[e]():Ya(n)&&t.getAttribute&&t.getAttribute(e)||n},Ce=function(t,e){return(t=t.split(",")).forEach(e)||t},qt=function(t){return Math.round(t*1e5)/1e5||0},ee=function(t){return Math.round(t*1e7)/1e7||0},Nr=function(t,e){var n=e.charAt(0),r=parseFloat(e.substr(2));return t=parseFloat(t),n==="+"?t+r:n==="-"?t-r:n==="*"?t*r:t/r},Z_=function(t,e){for(var n=e.length,r=0;t.indexOf(e[r])<0&&++r<n;);return r<n},qs=function(){var t=Fn.length,e=Fn.slice(0),n,r;for(ma={},Fn.length=0,n=0;n<t;n++)r=e[n],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},kh=function(t,e,n,r){Fn.length&&!_e&&qs(),t.render(e,n,_e&&e<0&&(t._initted||t._startAt)),Fn.length&&!_e&&qs()},xh=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(Rh).length<2?e:ne(t)?t.trim():t},Oh=function(t){return t},Ze=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},tm=function(t){return function(e,n){for(var r in n)r in e||r==="duration"&&t||r==="ease"||(e[r]=n[r])}},dr=function(t,e){for(var n in e)t[n]=e[n];return t},Xu=function i(t,e){for(var n in e)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(t[n]=dn(e[n])?i(t[n]||(t[n]={}),e[n]):e[n]);return t},Gs=function(t,e){var n={},r;for(r in t)r in e||(n[r]=t[r]);return n},bi=function(t){var e=t.parent||Mt,n=t.keyframes?tm(me(t.keyframes)):Ze;if(Pe(t.inherit))for(;e;)n(t,e.vars.defaults),e=e.parent||e._dp;return t},em=function(t,e){for(var n=t.length,r=n===e.length;r&&n--&&t[n]===e[n];);return n<0},Nh=function(t,e,n,r,s){var o=t[r],l;if(s)for(l=e[s];o&&o[s]>l;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[r]=e,e._prev=o,e.parent=e._dp=t,e},co=function(t,e,n,r){n===void 0&&(n="_first"),r===void 0&&(r="_last");var s=e._prev,o=e._next;s?s._next=o:t[n]===e&&(t[n]=o),o?o._prev=s:t[r]===e&&(t[r]=s),e._next=e._prev=e.parent=null},zn=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},lr=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},nm=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},pa=function(t,e,n,r){return t._startAt&&(_e?t._startAt.revert(Vs):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,r))},rm=function i(t){return!t||t._ts&&i(t.parent)},Yu=function(t){return t._repeat?Ur(t._tTime,t=t.duration()+t._rDelay)*t:0},Ur=function(t,e){var n=Math.floor(t/=e);return t&&n===t?n-1:n},Hs=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},ho=function(t){return t._end=ee(t._start+(t._tDur/Math.abs(t._ts||t._rts||Ct)||0))},fo=function(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=ee(n._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),ho(t),n._dirty||lr(n,t)),t},Mh=function(t,e){var n;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(n=Hs(t.rawTime(),e),(!e._dur||es(0,e.totalDuration(),n)-e._tTime>Ct)&&e.render(n,!0)),lr(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-Ct}},an=function(t,e,n,r){return e.parent&&zn(e),e._start=ee((An(n)?n:n||t!==Mt?Qe(t,n,e):t._time)+e._delay),e._end=ee(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),Nh(t,e,"_first","_last",t._sort?"_start":0),ga(e)||(t._recent=e),r||Mh(t,e),t._ts<0&&fo(t,t._tTime),t},Fh=function(t,e){return(je.ScrollTrigger||tl("scrollTrigger",e))&&je.ScrollTrigger.create(e,t)},Lh=function(t,e,n,r,s){if(sl(t,e,s),!t._initted)return 1;if(!n&&t._pt&&!_e&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&Dh!==Fe.frame)return Fn.push(t),t._lazy=[s,r],1},im=function i(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||i(e))},ga=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},sm=function(t,e,n,r){var s=t.ratio,o=e<0||!e&&(!t._start&&im(t)&&!(!t._initted&&ga(t))||(t._ts<0||t._dp._ts<0)&&!ga(t))?0:1,l=t._rDelay,u=0,c,h,d;if(l&&t._repeat&&(u=es(0,t._tDur,e),h=Ur(u,l),t._yoyo&&h&1&&(o=1-o),h!==Ur(t._tTime,l)&&(s=1-o,t.vars.repeatRefresh&&t._initted&&t.invalidate())),o!==s||_e||r||t._zTime===Ct||!e&&t._zTime){if(!t._initted&&Lh(t,e,r,n,u))return;for(d=t._zTime,t._zTime=e||(n?Ct:0),n||(n=e&&!d),t.ratio=o,t._from&&(o=1-o),t._time=0,t._tTime=u,c=t._pt;c;)c.r(o,c.d),c=c._next;e<0&&pa(t,e,n,!0),t._onUpdate&&!n&&Le(t,"onUpdate"),u&&t._repeat&&!n&&t.parent&&Le(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===o&&(o&&zn(t,1),!n&&!_e&&(Le(t,o?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},om=function(t,e,n){var r;if(n>e)for(r=t._first;r&&r._start<=n;){if(r.data==="isPause"&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=n;){if(r.data==="isPause"&&r._start<e)return r;r=r._prev}},zr=function(t,e,n,r){var s=t._repeat,o=ee(e)||0,l=t._tTime/t._tDur;return l&&!r&&(t._time*=o/t._dur),t._dur=o,t._tDur=s?s<0?1e10:ee(o*(s+1)+t._rDelay*s):o,l>0&&!r&&fo(t,t._tTime=t._tDur*l),t.parent&&ho(t),n||lr(t.parent,t),t},Ju=function(t){return t instanceof Te?lr(t):zr(t,t._dur)},am={_start:0,endTime:Ni,totalDuration:Ni},Qe=function i(t,e,n){var r=t.labels,s=t._recent||am,o=t.duration()>=Ye?s.endTime(!1):t._dur,l,u,c;return ne(e)&&(isNaN(e)||e in r)?(u=e.charAt(0),c=e.substr(-1)==="%",l=e.indexOf("="),u==="<"||u===">"?(l>=0&&(e=e.replace(/=/,"")),(u==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(e.substr(1))||0)*(c?(l<0?s:n).totalDuration()/100:1)):l<0?(e in r||(r[e]=o),r[e]):(u=parseFloat(e.charAt(l-1)+e.substr(l+1)),c&&n&&(u=u/100*(me(n)?n[0]:n).totalDuration()),l>1?i(t,e.substr(0,l-1),n)+u:o+u)):e==null?o:+e},Ri=function(t,e,n){var r=An(e[1]),s=(r?2:1)+(t<2?0:1),o=e[s],l,u;if(r&&(o.duration=e[1]),o.parent=n,t){for(l=o,u=n;u&&!("immediateRender"in l);)l=u.vars.defaults||{},u=Pe(u.vars.inherit)&&u.parent;o.immediateRender=Pe(l.immediateRender),t<2?o.runBackwards=1:o.startAt=e[s-1]}return new Wt(e[0],o,e[s+1])},Wn=function(t,e){return t||t===0?e(t):e},es=function(t,e,n){return n<t?t:n>e?e:n},de=function(t,e){return!ne(t)||!(e=X_.exec(t))?"":e[1]},lm=function(t,e,n){return Wn(n,function(r){return es(t,e,r)})},ya=[].slice,$h=function(t,e){return t&&dn(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&dn(t[0]))&&!t.nodeType&&t!==on},um=function(t,e,n){return n===void 0&&(n=[]),t.forEach(function(r){var s;return ne(r)&&!e||$h(r,1)?(s=n).push.apply(s,Je(r)):n.push(r)})||n},Je=function(t,e,n){return Vt&&!e&&Vt.selector?Vt.selector(t):ne(t)&&!n&&(_a||!jr())?ya.call((e||Za).querySelectorAll(t),0):me(t)?um(t,n):$h(t)?ya.call(t,0):t?[t]:[]},va=function(t){return t=Je(t)[0]||Oi("Invalid scope")||{},function(e){var n=t.current||t.nativeElement||t;return Je(e,n.querySelectorAll?n:n===t?Oi("Invalid scope")||Za.createElement("div"):t)}},Bh=function(t){return t.sort(function(){return .5-Math.random()})},Uh=function(t){if(Ut(t))return t;var e=dn(t)?t:{each:t},n=ur(e.ease),r=e.from||0,s=parseFloat(e.base)||0,o={},l=r>0&&r<1,u=isNaN(r)||l,c=e.axis,h=r,d=r;return ne(r)?h=d={center:.5,edges:.5,end:1}[r]||0:!l&&u&&(h=r[0],d=r[1]),function(m,g,y){var p=(y||e).length,T=o[p],C,b,D,V,k,O,I,E,v;if(!T){if(v=e.grid==="auto"?0:(e.grid||[1,Ye])[1],!v){for(I=-Ye;I<(I=y[v++].getBoundingClientRect().left)&&v<p;);v<p&&v--}for(T=o[p]=[],C=u?Math.min(v,p)*h-.5:r%v,b=v===Ye?0:u?p*d/v-.5:r/v|0,I=0,E=Ye,O=0;O<p;O++)D=O%v-C,V=b-(O/v|0),T[O]=k=c?Math.abs(c==="y"?V:D):wh(D*D+V*V),k>I&&(I=k),k<E&&(E=k);r==="random"&&Bh(T),T.max=I-E,T.min=E,T.v=p=(parseFloat(e.amount)||parseFloat(e.each)*(v>p?p-1:c?c==="y"?p/v:v:Math.max(v,p/v))||0)*(r==="edges"?-1:1),T.b=p<0?s-p:s,T.u=de(e.amount||e.each)||0,n=n&&p<0?Yh(n):n}return p=(T[m]-T.min)/T.max||0,ee(T.b+(n?n(p):p)*T.v)+T.u}},Ta=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(n){var r=ee(Math.round(parseFloat(n)/t)*t*e);return(r-r%1)/e+(An(n)?0:de(n))}},zh=function(t,e){var n=me(t),r,s;return!n&&dn(t)&&(r=n=t.radius||Ye,t.values?(t=Je(t.values),(s=!An(t[0]))&&(r*=r)):t=Ta(t.increment)),Wn(e,n?Ut(t)?function(o){return s=t(o),Math.abs(s-o)<=r?s:o}:function(o){for(var l=parseFloat(s?o.x:o),u=parseFloat(s?o.y:0),c=Ye,h=0,d=t.length,m,g;d--;)s?(m=t[d].x-l,g=t[d].y-u,m=m*m+g*g):m=Math.abs(t[d]-l),m<c&&(c=m,h=d);return h=!r||c<=r?t[h]:o,s||h===o||An(o)?h:h+de(o)}:Ta(t))},jh=function(t,e,n,r){return Wn(me(t)?!e:n===!0?!!(n=0):!r,function(){return me(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+n*.99))/n)*n*r)/r})},cm=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return e.reduce(function(s,o){return o(s)},r)}},hm=function(t,e){return function(n){return t(parseFloat(n))+(e||de(n))}},fm=function(t,e,n){return Gh(t,e,0,1,n)},qh=function(t,e,n){return Wn(n,function(r){return t[~~e(r)]})},dm=function i(t,e,n){var r=e-t;return me(t)?qh(t,i(0,t.length),e):Wn(n,function(s){return(r+(s-t)%r)%r+t})},_m=function i(t,e,n){var r=e-t,s=r*2;return me(t)?qh(t,i(0,t.length-1),e):Wn(n,function(o){return o=(s+(o-t)%s)%s||0,t+(o>r?s-o:o)})},Mi=function(t){for(var e=0,n="",r,s,o,l;~(r=t.indexOf("random(",e));)o=t.indexOf(")",r),l=t.charAt(r+7)==="[",s=t.substr(r+7,o-r-7).match(l?Rh:da),n+=t.substr(e,r-e)+jh(l?s:+s[0],l?0:+s[1],+s[2]||1e-5),e=o+1;return n+t.substr(e,t.length-e)},Gh=function(t,e,n,r,s){var o=e-t,l=r-n;return Wn(s,function(u){return n+((u-t)/o*l||0)})},mm=function i(t,e,n,r){var s=isNaN(t+e)?0:function(g){return(1-g)*t+g*e};if(!s){var o=ne(t),l={},u,c,h,d,m;if(n===!0&&(r=1)&&(n=null),o)t={p:t},e={p:e};else if(me(t)&&!me(e)){for(h=[],d=t.length,m=d-2,c=1;c<d;c++)h.push(i(t[c-1],t[c]));d--,s=function(y){y*=d;var p=Math.min(m,~~y);return h[p](y-p)},n=e}else r||(t=dr(me(t)?[]:{},t));if(!h){for(u in e)il.call(l,t,u,"get",e[u]);s=function(y){return ll(y,l)||(o?t.p:t)}}}return Wn(n,s)},Zu=function(t,e,n){var r=t.labels,s=Ye,o,l,u;for(o in r)l=r[o]-e,l<0==!!n&&l&&s>(l=Math.abs(l))&&(u=o,s=l);return u},Le=function(t,e,n){var r=t.vars,s=r[e],o=Vt,l=t._ctx,u,c,h;if(s)return u=r[e+"Params"],c=r.callbackScope||t,n&&Fn.length&&qs(),l&&(Vt=l),h=u?s.apply(c,u):s.call(c),Vt=o,h},vi=function(t){return zn(t),t.scrollTrigger&&t.scrollTrigger.kill(!!_e),t.progress()<1&&Le(t,"onInterrupt"),t},Or,Hh=[],Kh=function(t){if(t)if(t=!t.name&&t.default||t,Ja()||t.headless){var e=t.name,n=Ut(t),r=e&&!n&&t.init?function(){this._props=[]}:t,s={init:Ni,render:ll,add:il,kill:Vm,modifier:Dm,rawVars:0},o={targetTest:0,get:0,getSetter:al,aliases:{},register:0};if(jr(),t!==r){if(Me[e])return;Ze(r,Ze(Gs(t,s),o)),dr(r.prototype,dr(s,Gs(t,o))),Me[r.prop=e]=r,t.targetTest&&(ks.push(r),el[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}Sh(e,r),t.register&&t.register(ke,r,Se)}else Hh.push(t)},Pt=255,Ti={aqua:[0,Pt,Pt],lime:[0,Pt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Pt],navy:[0,0,128],white:[Pt,Pt,Pt],olive:[128,128,0],yellow:[Pt,Pt,0],orange:[Pt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Pt,0,0],pink:[Pt,192,203],cyan:[0,Pt,Pt],transparent:[Pt,Pt,Pt,0]},Wo=function(t,e,n){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(n-e)*t*6:t<.5?n:t*3<2?e+(n-e)*(2/3-t)*6:e)*Pt+.5|0},Wh=function(t,e,n){var r=t?An(t)?[t>>16,t>>8&Pt,t&Pt]:0:Ti.black,s,o,l,u,c,h,d,m,g,y;if(!r){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Ti[t])r=Ti[t];else if(t.charAt(0)==="#"){if(t.length<6&&(s=t.charAt(1),o=t.charAt(2),l=t.charAt(3),t="#"+s+s+o+o+l+l+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return r=parseInt(t.substr(1,6),16),[r>>16,r>>8&Pt,r&Pt,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),r=[t>>16,t>>8&Pt,t&Pt]}else if(t.substr(0,3)==="hsl"){if(r=y=t.match(da),!e)u=+r[0]%360/360,c=+r[1]/100,h=+r[2]/100,o=h<=.5?h*(c+1):h+c-h*c,s=h*2-o,r.length>3&&(r[3]*=1),r[0]=Wo(u+1/3,s,o),r[1]=Wo(u,s,o),r[2]=Wo(u-1/3,s,o);else if(~t.indexOf("="))return r=t.match(Ah),n&&r.length<4&&(r[3]=1),r}else r=t.match(da)||Ti.transparent;r=r.map(Number)}return e&&!y&&(s=r[0]/Pt,o=r[1]/Pt,l=r[2]/Pt,d=Math.max(s,o,l),m=Math.min(s,o,l),h=(d+m)/2,d===m?u=c=0:(g=d-m,c=h>.5?g/(2-d-m):g/(d+m),u=d===s?(o-l)/g+(o<l?6:0):d===o?(l-s)/g+2:(s-o)/g+4,u*=60),r[0]=~~(u+.5),r[1]=~~(c*100+.5),r[2]=~~(h*100+.5)),n&&r.length<4&&(r[3]=1),r},Qh=function(t){var e=[],n=[],r=-1;return t.split(Ln).forEach(function(s){var o=s.match(xr)||[];e.push.apply(e,o),n.push(r+=o.length+1)}),e.c=n,e},tc=function(t,e,n){var r="",s=(t+r).match(Ln),o=e?"hsla(":"rgba(",l=0,u,c,h,d;if(!s)return t;if(s=s.map(function(m){return(m=Wh(m,e,1))&&o+(e?m[0]+","+m[1]+"%,"+m[2]+"%,"+m[3]:m.join(","))+")"}),n&&(h=Qh(t),u=n.c,u.join(r)!==h.c.join(r)))for(c=t.replace(Ln,"1").split(xr),d=c.length-1;l<d;l++)r+=c[l]+(~u.indexOf(l)?s.shift()||o+"0,0,0,0)":(h.length?h:s.length?s:n).shift());if(!c)for(c=t.split(Ln),d=c.length-1;l<d;l++)r+=c[l]+s[l];return r+c[d]},Ln=function(){var i="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Ti)i+="|"+t+"\\b";return new RegExp(i+")","gi")}(),pm=/hsl[a]?\(/,Xh=function(t){var e=t.join(" "),n;if(Ln.lastIndex=0,Ln.test(e))return n=pm.test(e),t[1]=tc(t[1],n),t[0]=tc(t[0],n,Qh(t[1])),!0},Fi,Fe=function(){var i=Date.now,t=500,e=33,n=i(),r=n,s=1e3/240,o=s,l=[],u,c,h,d,m,g,y=function p(T){var C=i()-r,b=T===!0,D,V,k,O;if((C>t||C<0)&&(n+=C-e),r+=C,k=r-n,D=k-o,(D>0||b)&&(O=++d.frame,m=k-d.time*1e3,d.time=k=k/1e3,o+=D+(D>=s?4:s-D),V=1),b||(u=c(p)),V)for(g=0;g<l.length;g++)l[g](k,m,O,T)};return d={time:0,frame:0,tick:function(){y(!0)},deltaRatio:function(T){return m/(1e3/(T||60))},wake:function(){Ph&&(!_a&&Ja()&&(on=_a=window,Za=on.document||{},je.gsap=ke,(on.gsapVersions||(on.gsapVersions=[])).push(ke.version),Ch(js||on.GreenSockGlobals||!on.gsap&&on||{}),Hh.forEach(Kh)),h=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&d.sleep(),c=h||function(T){return setTimeout(T,o-d.time*1e3+1|0)},Fi=1,y(2))},sleep:function(){(h?cancelAnimationFrame:clearTimeout)(u),Fi=0,c=Ni},lagSmoothing:function(T,C){t=T||1/0,e=Math.min(C||33,t)},fps:function(T){s=1e3/(T||240),o=d.time*1e3+s},add:function(T,C,b){var D=C?function(V,k,O,I){T(V,k,O,I),d.remove(D)}:T;return d.remove(T),l[b?"unshift":"push"](D),jr(),D},remove:function(T,C){~(C=l.indexOf(T))&&l.splice(C,1)&&g>=C&&g--},_listeners:l},d}(),jr=function(){return!Fi&&Fe.wake()},_t={},gm=/^[\d.\-M][\d.\-,\s]/,ym=/["']/g,vm=function(t){for(var e={},n=t.substr(1,t.length-3).split(":"),r=n[0],s=1,o=n.length,l,u,c;s<o;s++)u=n[s],l=s!==o-1?u.lastIndexOf(","):u.length,c=u.substr(0,l),e[r]=isNaN(c)?c.replace(ym,"").trim():+c,r=u.substr(l+1).trim();return e},Tm=function(t){var e=t.indexOf("(")+1,n=t.indexOf(")"),r=t.indexOf("(",e);return t.substring(e,~r&&r<n?t.indexOf(")",n+1):n)},Em=function(t){var e=(t+"").split("("),n=_t[e[0]];return n&&e.length>1&&n.config?n.config.apply(null,~t.indexOf("{")?[vm(e[1])]:Tm(t).split(",").map(xh)):_t._CE&&gm.test(t)?_t._CE("",t):n},Yh=function(t){return function(e){return 1-t(1-e)}},Jh=function i(t,e){for(var n=t._first,r;n;)n instanceof Te?i(n,e):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==e&&(n.timeline?i(n.timeline,e):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=e)),n=n._next},ur=function(t,e){return t&&(Ut(t)?t:_t[t]||Em(t))||e},Tr=function(t,e,n,r){n===void 0&&(n=function(u){return 1-e(1-u)}),r===void 0&&(r=function(u){return u<.5?e(u*2)/2:1-e((1-u)*2)/2});var s={easeIn:e,easeOut:n,easeInOut:r},o;return Ce(t,function(l){_t[l]=je[l]=s,_t[o=l.toLowerCase()]=n;for(var u in s)_t[o+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=_t[l+"."+u]=s[u]}),s},Zh=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},Qo=function i(t,e,n){var r=e>=1?e:1,s=(n||(t?.3:.45))/(e<1?e:1),o=s/fa*(Math.asin(1/r)||0),l=function(h){return h===1?1:r*Math.pow(2,-10*h)*Q_((h-o)*s)+1},u=t==="out"?l:t==="in"?function(c){return 1-l(1-c)}:Zh(l);return s=fa/s,u.config=function(c,h){return i(t,c,h)},u},Xo=function i(t,e){e===void 0&&(e=1.70158);var n=function(o){return o?--o*o*((e+1)*o+e)+1:0},r=t==="out"?n:t==="in"?function(s){return 1-n(1-s)}:Zh(n);return r.config=function(s){return i(t,s)},r};Ce("Linear,Quad,Cubic,Quart,Quint,Strong",function(i,t){var e=t<5?t+1:t;Tr(i+",Power"+(e-1),t?function(n){return Math.pow(n,e)}:function(n){return n},function(n){return 1-Math.pow(1-n,e)},function(n){return n<.5?Math.pow(n*2,e)/2:1-Math.pow((1-n)*2,e)/2})});_t.Linear.easeNone=_t.none=_t.Linear.easeIn;Tr("Elastic",Qo("in"),Qo("out"),Qo());(function(i,t){var e=1/t,n=2*e,r=2.5*e,s=function(l){return l<e?i*l*l:l<n?i*Math.pow(l-1.5/t,2)+.75:l<r?i*(l-=2.25/t)*l+.9375:i*Math.pow(l-2.625/t,2)+.984375};Tr("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);Tr("Expo",function(i){return i?Math.pow(2,10*(i-1)):0});Tr("Circ",function(i){return-(wh(1-i*i)-1)});Tr("Sine",function(i){return i===1?1:-W_(i*H_)+1});Tr("Back",Xo("in"),Xo("out"),Xo());_t.SteppedEase=_t.steps=je.SteppedEase={config:function(t,e){t===void 0&&(t=1);var n=1/t,r=t+(e?0:1),s=e?1:0,o=1-Ct;return function(l){return((r*es(0,o,l)|0)+s)*n}}};Br.ease=_t["quad.out"];Ce("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(i){return nl+=i+","+i+"Params,"});var tf=function(t,e){this.id=K_++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:Vh,this.set=e?e.getSetter:al},Li=function(){function i(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,zr(this,+e.duration,1,1),this.data=e.data,Vt&&(this._ctx=Vt,Vt.data.push(this)),Fi||Fe.wake()}var t=i.prototype;return t.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},t.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},t.totalDuration=function(n){return arguments.length?(this._dirty=0,zr(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(n,r){if(jr(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(fo(this,n),!s._dp||s.parent||Mh(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&an(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Ct||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),kh(this,n,r)),this},t.time=function(n,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+Yu(this))%(this._dur+this._rDelay)||(n?this._dur:0),r):this._time},t.totalProgress=function(n,r){return arguments.length?this.totalTime(this.totalDuration()*n,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},t.progress=function(n,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+Yu(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(n,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,r):this._repeat?Ur(this._tTime,s)+1:1},t.timeScale=function(n,r){if(!arguments.length)return this._rts===-Ct?0:this._rts;if(this._rts===n)return this;var s=this.parent&&this._ts?Hs(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-Ct?0:this._rts,this.totalTime(es(-Math.abs(this._delay),this._tDur,s),r!==!1),ho(this),nm(this)},t.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(jr(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Ct&&(this._tTime-=Ct)))),this):this._ps},t.startTime=function(n){if(arguments.length){this._start=n;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&an(r,this,n-this._delay),this}return this._start},t.endTime=function(n){return this._start+(Pe(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(n){var r=this.parent||this._dp;return r?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Hs(r.rawTime(n),this):this._tTime:this._tTime},t.revert=function(n){n===void 0&&(n=J_);var r=_e;return _e=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),_e=r,this},t.globalTime=function(n){for(var r=this,s=arguments.length?n:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(n):s},t.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,Ju(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(n){if(arguments.length){var r=this._time;return this._rDelay=n,Ju(this),r?this.time(r):this}return this._rDelay},t.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},t.seek=function(n,r){return this.totalTime(Qe(this,n),Pe(r))},t.restart=function(n,r){return this.play().totalTime(n?-this._delay:0,Pe(r))},t.play=function(n,r){return n!=null&&this.seek(n,r),this.reversed(!1).paused(!1)},t.reverse=function(n,r){return n!=null&&this.seek(n||this.totalDuration(),r),this.reversed(!0).paused(!1)},t.pause=function(n,r){return n!=null&&this.seek(n,r),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-Ct:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-Ct,this},t.isActive=function(){var n=this.parent||this._dp,r=this._start,s;return!!(!n||this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=r&&s<this.endTime(!0)-Ct)},t.eventCallback=function(n,r,s){var o=this.vars;return arguments.length>1?(r?(o[n]=r,s&&(o[n+"Params"]=s),n==="onUpdate"&&(this._onUpdate=r)):delete o[n],this):o[n]},t.then=function(n){var r=this;return new Promise(function(s){var o=Ut(n)?n:Oh,l=function(){var c=r.then;r.then=null,Ut(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=c),s(o),r.then=c};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?l():r._prom=l})},t.kill=function(){vi(this)},i}();Ze(Li.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Ct,_prom:0,_ps:!1,_rts:1});var Te=function(i){Eh(t,i);function t(n,r){var s;return n===void 0&&(n={}),s=i.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=Pe(n.sortChildren),Mt&&an(n.parent||Mt,yn(s),r),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&Fh(yn(s),n.scrollTrigger),s}var e=t.prototype;return e.to=function(r,s,o){return Ri(0,arguments,this),this},e.from=function(r,s,o){return Ri(1,arguments,this),this},e.fromTo=function(r,s,o,l){return Ri(2,arguments,this),this},e.set=function(r,s,o){return s.duration=0,s.parent=this,bi(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Wt(r,s,Qe(this,o),1),this},e.call=function(r,s,o){return an(this,Wt.delayedCall(0,r,s),o)},e.staggerTo=function(r,s,o,l,u,c,h){return o.duration=s,o.stagger=o.stagger||l,o.onComplete=c,o.onCompleteParams=h,o.parent=this,new Wt(r,o,Qe(this,u)),this},e.staggerFrom=function(r,s,o,l,u,c,h){return o.runBackwards=1,bi(o).immediateRender=Pe(o.immediateRender),this.staggerTo(r,s,o,l,u,c,h)},e.staggerFromTo=function(r,s,o,l,u,c,h,d){return l.startAt=o,bi(l).immediateRender=Pe(l.immediateRender),this.staggerTo(r,s,l,u,c,h,d)},e.render=function(r,s,o){var l=this._time,u=this._dirty?this.totalDuration():this._tDur,c=this._dur,h=r<=0?0:ee(r),d=this._zTime<0!=r<0&&(this._initted||!c),m,g,y,p,T,C,b,D,V,k,O,I;if(this!==Mt&&h>u&&r>=0&&(h=u),h!==this._tTime||o||d){if(l!==this._time&&c&&(h+=this._time-l,r+=this._time-l),m=h,V=this._start,D=this._ts,C=!D,d&&(c||(l=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(O=this._yoyo,T=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(T*100+r,s,o);if(m=ee(h%T),h===u?(p=this._repeat,m=c):(p=~~(h/T),p&&p===h/T&&(m=c,p--),m>c&&(m=c)),k=Ur(this._tTime,T),!l&&this._tTime&&k!==p&&this._tTime-k*T-this._dur<=0&&(k=p),O&&p&1&&(m=c-m,I=1),p!==k&&!this._lock){var E=O&&k&1,v=E===(O&&p&1);if(p<k&&(E=!E),l=E?0:h%c?c:h,this._lock=1,this.render(l||(I?0:ee(p*T)),s,!c)._lock=0,this._tTime=h,!s&&this.parent&&Le(this,"onRepeat"),this.vars.repeatRefresh&&!I&&(this.invalidate()._lock=1),l&&l!==this._time||C!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,u=this._tDur,v&&(this._lock=2,l=E?c:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!I&&this.invalidate()),this._lock=0,!this._ts&&!C)return this;Jh(this,I)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(b=om(this,ee(l),ee(m)),b&&(h-=m-(m=b._start))),this._tTime=h,this._time=m,this._act=!D,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,l=0),!l&&m&&!s&&!p&&(Le(this,"onStart"),this._tTime!==h))return this;if(m>=l&&r>=0)for(g=this._first;g;){if(y=g._next,(g._act||m>=g._start)&&g._ts&&b!==g){if(g.parent!==this)return this.render(r,s,o);if(g.render(g._ts>0?(m-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(m-g._start)*g._ts,s,o),m!==this._time||!this._ts&&!C){b=0,y&&(h+=this._zTime=-Ct);break}}g=y}else{g=this._last;for(var R=r<0?r:m;g;){if(y=g._prev,(g._act||R<=g._end)&&g._ts&&b!==g){if(g.parent!==this)return this.render(r,s,o);if(g.render(g._ts>0?(R-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(R-g._start)*g._ts,s,o||_e&&(g._initted||g._startAt)),m!==this._time||!this._ts&&!C){b=0,y&&(h+=this._zTime=R?-Ct:Ct);break}}g=y}}if(b&&!s&&(this.pause(),b.render(m>=l?0:-Ct)._zTime=m>=l?1:-1,this._ts))return this._start=V,ho(this),this.render(r,s,o);this._onUpdate&&!s&&Le(this,"onUpdate",!0),(h===u&&this._tTime>=this.totalDuration()||!h&&l)&&(V===this._start||Math.abs(D)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(h===u&&this._ts>0||!h&&this._ts<0)&&zn(this,1),!s&&!(r<0&&!l)&&(h||l||!u)&&(Le(this,h===u&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(h<u&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(r,s){var o=this;if(An(s)||(s=Qe(this,s,r)),!(r instanceof Li)){if(me(r))return r.forEach(function(l){return o.add(l,s)}),this;if(ne(r))return this.addLabel(r,s);if(Ut(r))r=Wt.delayedCall(0,r);else return this}return this!==r?an(this,r,s):this},e.getChildren=function(r,s,o,l){r===void 0&&(r=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),l===void 0&&(l=-Ye);for(var u=[],c=this._first;c;)c._start>=l&&(c instanceof Wt?s&&u.push(c):(o&&u.push(c),r&&u.push.apply(u,c.getChildren(!0,s,o)))),c=c._next;return u},e.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},e.remove=function(r){return ne(r)?this.removeLabel(r):Ut(r)?this.killTweensOf(r):(co(this,r),r===this._recent&&(this._recent=this._last),lr(this))},e.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ee(Fe.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),i.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},e.addLabel=function(r,s){return this.labels[r]=Qe(this,s),this},e.removeLabel=function(r){return delete this.labels[r],this},e.addPause=function(r,s,o){var l=Wt.delayedCall(0,s||Ni,o);return l.data="isPause",this._hasPause=1,an(this,l,Qe(this,r))},e.removePause=function(r){var s=this._first;for(r=Qe(this,r);s;)s._start===r&&s.data==="isPause"&&zn(s),s=s._next},e.killTweensOf=function(r,s,o){for(var l=this.getTweensOf(r,o),u=l.length;u--;)xn!==l[u]&&l[u].kill(r,s);return this},e.getTweensOf=function(r,s){for(var o=[],l=Je(r),u=this._first,c=An(s),h;u;)u instanceof Wt?Z_(u._targets,l)&&(c?(!xn||u._initted&&u._ts)&&u.globalTime(0)<=s&&u.globalTime(u.totalDuration())>s:!s||u.isActive())&&o.push(u):(h=u.getTweensOf(l,s)).length&&o.push.apply(o,h),u=u._next;return o},e.tweenTo=function(r,s){s=s||{};var o=this,l=Qe(o,r),u=s,c=u.startAt,h=u.onStart,d=u.onStartParams,m=u.immediateRender,g,y=Wt.to(o,Ze({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:s.duration||Math.abs((l-(c&&"time"in c?c.time:o._time))/o.timeScale())||Ct,onStart:function(){if(o.pause(),!g){var T=s.duration||Math.abs((l-(c&&"time"in c?c.time:o._time))/o.timeScale());y._dur!==T&&zr(y,T,0,1).render(y._time,!0,!0),g=1}h&&h.apply(y,d||[])}},s));return m?y.render(0):y},e.tweenFromTo=function(r,s,o){return this.tweenTo(s,Ze({startAt:{time:Qe(this,r)}},o))},e.recent=function(){return this._recent},e.nextLabel=function(r){return r===void 0&&(r=this._time),Zu(this,Qe(this,r))},e.previousLabel=function(r){return r===void 0&&(r=this._time),Zu(this,Qe(this,r),1)},e.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Ct)},e.shiftChildren=function(r,s,o){o===void 0&&(o=0);for(var l=this._first,u=this.labels,c;l;)l._start>=o&&(l._start+=r,l._end+=r),l=l._next;if(s)for(c in u)u[c]>=o&&(u[c]+=r);return lr(this)},e.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return i.prototype.invalidate.call(this,r)},e.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),lr(this)},e.totalDuration=function(r){var s=0,o=this,l=o._last,u=Ye,c,h,d;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(d=o.parent;l;)c=l._prev,l._dirty&&l.totalDuration(),h=l._start,h>u&&o._sort&&l._ts&&!o._lock?(o._lock=1,an(o,l,h-l._delay,1)._lock=0):u=h,h<0&&l._ts&&(s-=h,(!d&&!o._dp||d&&d.smoothChildTiming)&&(o._start+=h/o._ts,o._time-=h,o._tTime-=h),o.shiftChildren(-h,!1,-1/0),u=0),l._end>s&&l._ts&&(s=l._end),l=c;zr(o,o===Mt&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(r){if(Mt._ts&&(kh(Mt,Hs(r,Mt)),Dh=Fe.frame),Fe.frame>=Qu){Qu+=Be.autoSleep||120;var s=Mt._first;if((!s||!s._ts)&&Be.autoSleep&&Fe._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||Fe.sleep()}}},t}(Li);Ze(Te.prototype,{_lock:0,_hasPause:0,_forcing:0});var wm=function(t,e,n,r,s,o,l){var u=new Se(this._pt,t,e,0,1,af,null,s),c=0,h=0,d,m,g,y,p,T,C,b;for(u.b=n,u.e=r,n+="",r+="",(C=~r.indexOf("random("))&&(r=Mi(r)),o&&(b=[n,r],o(b,t,e),n=b[0],r=b[1]),m=n.match(Ho)||[];d=Ho.exec(r);)y=d[0],p=r.substring(c,d.index),g?g=(g+1)%5:p.substr(-5)==="rgba("&&(g=1),y!==m[h++]&&(T=parseFloat(m[h-1])||0,u._pt={_next:u._pt,p:p||h===1?p:",",s:T,c:y.charAt(1)==="="?Nr(T,y)-T:parseFloat(y)-T,m:g&&g<4?Math.round:0},c=Ho.lastIndex);return u.c=c<r.length?r.substring(c,r.length):"",u.fp=l,(bh.test(r)||C)&&(u.e=0),this._pt=u,u},il=function(t,e,n,r,s,o,l,u,c,h){Ut(r)&&(r=r(s||0,t,o));var d=t[e],m=n!=="get"?n:Ut(d)?c?t[e.indexOf("set")||!Ut(t["get"+e.substr(3)])?e:"get"+e.substr(3)](c):t[e]():d,g=Ut(d)?c?Pm:sf:ol,y;if(ne(r)&&(~r.indexOf("random(")&&(r=Mi(r)),r.charAt(1)==="="&&(y=Nr(m,r)+(de(m)||0),(y||y===0)&&(r=y))),!h||m!==r||Ea)return!isNaN(m*r)&&r!==""?(y=new Se(this._pt,t,e,+m||0,r-(m||0),typeof d=="boolean"?Sm:of,0,g),c&&(y.fp=c),l&&y.modifier(l,this,t),this._pt=y):(!d&&!(e in t)&&tl(e,r),wm.call(this,t,e,m,r,g,u||Be.stringFilter,c))},Im=function(t,e,n,r,s){if(Ut(t)&&(t=Pi(t,s,e,n,r)),!dn(t)||t.style&&t.nodeType||me(t)||Ih(t))return ne(t)?Pi(t,s,e,n,r):t;var o={},l;for(l in t)o[l]=Pi(t[l],s,e,n,r);return o},ef=function(t,e,n,r,s,o){var l,u,c,h;if(Me[t]&&(l=new Me[t]).init(s,l.rawVars?e[t]:Im(e[t],r,s,o,n),n,r,o)!==!1&&(n._pt=u=new Se(n._pt,s,t,0,1,l.render,l,0,l.priority),n!==Or))for(c=n._ptLookup[n._targets.indexOf(s)],h=l._props.length;h--;)c[l._props[h]]=u;return l},xn,Ea,sl=function i(t,e,n){var r=t.vars,s=r.ease,o=r.startAt,l=r.immediateRender,u=r.lazy,c=r.onUpdate,h=r.runBackwards,d=r.yoyoEase,m=r.keyframes,g=r.autoRevert,y=t._dur,p=t._startAt,T=t._targets,C=t.parent,b=C&&C.data==="nested"?C.vars.targets:T,D=t._overwrite==="auto"&&!Xa,V=t.timeline,k,O,I,E,v,R,P,S,A,st,rt,ht,at;if(V&&(!m||!s)&&(s="none"),t._ease=ur(s,Br.ease),t._yEase=d?Yh(ur(d===!0?s:d,Br.ease)):0,d&&t._yoyo&&!t._repeat&&(d=t._yEase,t._yEase=t._ease,t._ease=d),t._from=!V&&!!r.runBackwards,!V||m&&!r.stagger){if(S=T[0]?ar(T[0]).harness:0,ht=S&&r[S.prop],k=Gs(r,el),p&&(p._zTime<0&&p.progress(1),e<0&&h&&l&&!g?p.render(-1,!0):p.revert(h&&y?Vs:Y_),p._lazy=0),o){if(zn(t._startAt=Wt.set(T,Ze({data:"isStart",overwrite:!1,parent:C,immediateRender:!0,lazy:!p&&Pe(u),startAt:null,delay:0,onUpdate:c&&function(){return Le(t,"onUpdate")},stagger:0},o))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(_e||!l&&!g)&&t._startAt.revert(Vs),l&&y&&e<=0&&n<=0){e&&(t._zTime=e);return}}else if(h&&y&&!p){if(e&&(l=!1),I=Ze({overwrite:!1,data:"isFromStart",lazy:l&&!p&&Pe(u),immediateRender:l,stagger:0,parent:C},k),ht&&(I[S.prop]=ht),zn(t._startAt=Wt.set(T,I)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(_e?t._startAt.revert(Vs):t._startAt.render(-1,!0)),t._zTime=e,!l)i(t._startAt,Ct,Ct);else if(!e)return}for(t._pt=t._ptCache=0,u=y&&Pe(u)||u&&!y,O=0;O<T.length;O++){if(v=T[O],P=v._gsap||rl(T)[O]._gsap,t._ptLookup[O]=st={},ma[P.id]&&Fn.length&&qs(),rt=b===T?O:b.indexOf(v),S&&(A=new S).init(v,ht||k,t,rt,b)!==!1&&(t._pt=E=new Se(t._pt,v,A.name,0,1,A.render,A,0,A.priority),A._props.forEach(function(dt){st[dt]=E}),A.priority&&(R=1)),!S||ht)for(I in k)Me[I]&&(A=ef(I,k,t,rt,v,b))?A.priority&&(R=1):st[I]=E=il.call(t,v,I,"get",k[I],rt,b,0,r.stringFilter);t._op&&t._op[O]&&t.kill(v,t._op[O]),D&&t._pt&&(xn=t,Mt.killTweensOf(v,st,t.globalTime(e)),at=!t.parent,xn=0),t._pt&&u&&(ma[P.id]=1)}R&&lf(t),t._onInit&&t._onInit(t)}t._onUpdate=c,t._initted=(!t._op||t._pt)&&!at,m&&e<=0&&V.render(Ye,!0,!0)},Am=function(t,e,n,r,s,o,l,u){var c=(t._pt&&t._ptCache||(t._ptCache={}))[e],h,d,m,g;if(!c)for(c=t._ptCache[e]=[],m=t._ptLookup,g=t._targets.length;g--;){if(h=m[g][e],h&&h.d&&h.d._pt)for(h=h.d._pt;h&&h.p!==e&&h.fp!==e;)h=h._next;if(!h)return Ea=1,t.vars[e]="+=0",sl(t,l),Ea=0,u?Oi(e+" not eligible for reset"):1;c.push(h)}for(g=c.length;g--;)d=c[g],h=d._pt||d,h.s=(r||r===0)&&!s?r:h.s+(r||0)+o*h.c,h.c=n-h.s,d.e&&(d.e=qt(n)+de(d.e)),d.b&&(d.b=h.s+de(d.b))},bm=function(t,e){var n=t[0]?ar(t[0]).harness:0,r=n&&n.aliases,s,o,l,u;if(!r)return e;s=dr({},e);for(o in r)if(o in s)for(u=r[o].split(","),l=u.length;l--;)s[u[l]]=s[o];return s},Rm=function(t,e,n,r){var s=e.ease||r||"power1.inOut",o,l;if(me(e))l=n[t]||(n[t]=[]),e.forEach(function(u,c){return l.push({t:c/(e.length-1)*100,v:u,e:s})});else for(o in e)l=n[o]||(n[o]=[]),o==="ease"||l.push({t:parseFloat(t),v:e[o],e:s})},Pi=function(t,e,n,r,s){return Ut(t)?t.call(e,n,r,s):ne(t)&&~t.indexOf("random(")?Mi(t):t},nf=nl+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",rf={};Ce(nf+",id,stagger,delay,duration,paused,scrollTrigger",function(i){return rf[i]=1});var Wt=function(i){Eh(t,i);function t(n,r,s,o){var l;typeof r=="number"&&(s.duration=r,r=s,s=null),l=i.call(this,o?r:bi(r))||this;var u=l.vars,c=u.duration,h=u.delay,d=u.immediateRender,m=u.stagger,g=u.overwrite,y=u.keyframes,p=u.defaults,T=u.scrollTrigger,C=u.yoyoEase,b=r.parent||Mt,D=(me(n)||Ih(n)?An(n[0]):"length"in r)?[n]:Je(n),V,k,O,I,E,v,R,P;if(l._targets=D.length?rl(D):Oi("GSAP target "+n+" not found. https://gsap.com",!Be.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=g,y||m||Rs(c)||Rs(h)){if(r=l.vars,V=l.timeline=new Te({data:"nested",defaults:p||{},targets:b&&b.data==="nested"?b.vars.targets:D}),V.kill(),V.parent=V._dp=yn(l),V._start=0,m||Rs(c)||Rs(h)){if(I=D.length,R=m&&Uh(m),dn(m))for(E in m)~nf.indexOf(E)&&(P||(P={}),P[E]=m[E]);for(k=0;k<I;k++)O=Gs(r,rf),O.stagger=0,C&&(O.yoyoEase=C),P&&dr(O,P),v=D[k],O.duration=+Pi(c,yn(l),k,v,D),O.delay=(+Pi(h,yn(l),k,v,D)||0)-l._delay,!m&&I===1&&O.delay&&(l._delay=h=O.delay,l._start+=h,O.delay=0),V.to(v,O,R?R(k,v,D):0),V._ease=_t.none;V.duration()?c=h=0:l.timeline=0}else if(y){bi(Ze(V.vars.defaults,{ease:"none"})),V._ease=ur(y.ease||r.ease||"none");var S=0,A,st,rt;if(me(y))y.forEach(function(ht){return V.to(D,ht,">")}),V.duration();else{O={};for(E in y)E==="ease"||E==="easeEach"||Rm(E,y[E],O,y.easeEach);for(E in O)for(A=O[E].sort(function(ht,at){return ht.t-at.t}),S=0,k=0;k<A.length;k++)st=A[k],rt={ease:st.e,duration:(st.t-(k?A[k-1].t:0))/100*c},rt[E]=st.v,V.to(D,rt,S),S+=rt.duration;V.duration()<c&&V.to({},{duration:c-V.duration()})}}c||l.duration(c=V.duration())}else l.timeline=0;return g===!0&&!Xa&&(xn=yn(l),Mt.killTweensOf(D),xn=0),an(b,yn(l),s),r.reversed&&l.reverse(),r.paused&&l.paused(!0),(d||!c&&!y&&l._start===ee(b._time)&&Pe(d)&&rm(yn(l))&&b.data!=="nested")&&(l._tTime=-Ct,l.render(Math.max(0,-h)||0)),T&&Fh(yn(l),T),l}var e=t.prototype;return e.render=function(r,s,o){var l=this._time,u=this._tDur,c=this._dur,h=r<0,d=r>u-Ct&&!h?u:r<Ct?0:r,m,g,y,p,T,C,b,D,V;if(!c)sm(this,r,s,o);else if(d!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==h){if(m=d,D=this.timeline,this._repeat){if(p=c+this._rDelay,this._repeat<-1&&h)return this.totalTime(p*100+r,s,o);if(m=ee(d%p),d===u?(y=this._repeat,m=c):(y=~~(d/p),y&&y===ee(d/p)&&(m=c,y--),m>c&&(m=c)),C=this._yoyo&&y&1,C&&(V=this._yEase,m=c-m),T=Ur(this._tTime,p),m===l&&!o&&this._initted&&y===T)return this._tTime=d,this;y!==T&&(D&&this._yEase&&Jh(D,C),this.vars.repeatRefresh&&!C&&!this._lock&&this._time!==p&&this._initted&&(this._lock=o=1,this.render(ee(p*y),!0).invalidate()._lock=0))}if(!this._initted){if(Lh(this,h?r:m,o,s,d))return this._tTime=0,this;if(l!==this._time&&!(o&&this.vars.repeatRefresh&&y!==T))return this;if(c!==this._dur)return this.render(r,s,o)}if(this._tTime=d,this._time=m,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=b=(V||this._ease)(m/c),this._from&&(this.ratio=b=1-b),m&&!l&&!s&&!y&&(Le(this,"onStart"),this._tTime!==d))return this;for(g=this._pt;g;)g.r(b,g.d),g=g._next;D&&D.render(r<0?r:D._dur*D._ease(m/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(h&&pa(this,r,s,o),Le(this,"onUpdate")),this._repeat&&y!==T&&this.vars.onRepeat&&!s&&this.parent&&Le(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(h&&!this._onUpdate&&pa(this,r,!0,!0),(r||!c)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&zn(this,1),!s&&!(h&&!l)&&(d||l||C)&&(Le(this,d===u?"onComplete":"onReverseComplete",!0),this._prom&&!(d<u&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),i.prototype.invalidate.call(this,r)},e.resetTo=function(r,s,o,l,u){Fi||Fe.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),h;return this._initted||sl(this,c),h=this._ease(c/this._dur),Am(this,r,s,o,l,h,c,u)?this.resetTo(r,s,o,l,1):(fo(this,0),this.parent||Nh(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?vi(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,xn&&xn.vars.overwrite!==!0)._first||vi(this),this.parent&&o!==this.timeline.totalDuration()&&zr(this,this._dur*this.timeline._tDur/o,0,1),this}var l=this._targets,u=r?Je(r):l,c=this._ptLookup,h=this._pt,d,m,g,y,p,T,C;if((!s||s==="all")&&em(l,u))return s==="all"&&(this._pt=0),vi(this);for(d=this._op=this._op||[],s!=="all"&&(ne(s)&&(p={},Ce(s,function(b){return p[b]=1}),s=p),s=bm(l,s)),C=l.length;C--;)if(~u.indexOf(l[C])){m=c[C],s==="all"?(d[C]=s,y=m,g={}):(g=d[C]=d[C]||{},y=s);for(p in y)T=m&&m[p],T&&((!("kill"in T.d)||T.d.kill(p)===!0)&&co(this,T,"_pt"),delete m[p]),g!=="all"&&(g[p]=1)}return this._initted&&!this._pt&&h&&vi(this),this},t.to=function(r,s){return new t(r,s,arguments[2])},t.from=function(r,s){return Ri(1,arguments)},t.delayedCall=function(r,s,o,l){return new t(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:l})},t.fromTo=function(r,s,o){return Ri(2,arguments)},t.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new t(r,s)},t.killTweensOf=function(r,s,o){return Mt.killTweensOf(r,s,o)},t}(Li);Ze(Wt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Ce("staggerTo,staggerFrom,staggerFromTo",function(i){Wt[i]=function(){var t=new Te,e=ya.call(arguments,0);return e.splice(i==="staggerFromTo"?5:4,0,0),t[i].apply(t,e)}});var ol=function(t,e,n){return t[e]=n},sf=function(t,e,n){return t[e](n)},Pm=function(t,e,n,r){return t[e](r.fp,n)},Cm=function(t,e,n){return t.setAttribute(e,n)},al=function(t,e){return Ut(t[e])?sf:Ya(t[e])&&t.setAttribute?Cm:ol},of=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},Sm=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},af=function(t,e){var n=e._pt,r="";if(!t&&e.b)r=e.b;else if(t===1&&e.e)r=e.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*t):Math.round((n.s+n.c*t)*1e4)/1e4)+r,n=n._next;r+=e.c}e.set(e.t,e.p,r,e)},ll=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},Dm=function(t,e,n,r){for(var s=this._pt,o;s;)o=s._next,s.p===r&&s.modifier(t,e,n),s=o},Vm=function(t){for(var e=this._pt,n,r;e;)r=e._next,e.p===t&&!e.op||e.op===t?co(this,e,"_pt"):e.dep||(n=1),e=r;return!n},km=function(t,e,n,r){r.mSet(t,e,r.m.call(r.tween,n,r.mt),r)},lf=function(t){for(var e=t._pt,n,r,s,o;e;){for(n=e._next,r=s;r&&r.pr>e.pr;)r=r._next;(e._prev=r?r._prev:o)?e._prev._next=e:s=e,(e._next=r)?r._prev=e:o=e,e=n}t._pt=s},Se=function(){function i(e,n,r,s,o,l,u,c,h){this.t=n,this.s=s,this.c=o,this.p=r,this.r=l||of,this.d=u||this,this.set=c||ol,this.pr=h||0,this._next=e,e&&(e._prev=this)}var t=i.prototype;return t.modifier=function(n,r,s){this.mSet=this.mSet||this.set,this.set=km,this.m=n,this.mt=s,this.tween=r},i}();Ce(nl+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(i){return el[i]=1});je.TweenMax=je.TweenLite=Wt;je.TimelineLite=je.TimelineMax=Te;Mt=new Te({sortChildren:!1,defaults:Br,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Be.stringFilter=Xh;var cr=[],xs={},xm=[],ec=0,Om=0,Yo=function(t){return(xs[t]||xm).map(function(e){return e()})},wa=function(){var t=Date.now(),e=[];t-ec>2&&(Yo("matchMediaInit"),cr.forEach(function(n){var r=n.queries,s=n.conditions,o,l,u,c;for(l in r)o=on.matchMedia(r[l]).matches,o&&(u=1),o!==s[l]&&(s[l]=o,c=1);c&&(n.revert(),u&&e.push(n))}),Yo("matchMediaRevert"),e.forEach(function(n){return n.onMatch(n,function(r){return n.add(null,r)})}),ec=t,Yo("matchMedia"))},uf=function(){function i(e,n){this.selector=n&&va(n),this.data=[],this._r=[],this.isReverted=!1,this.id=Om++,e&&this.add(e)}var t=i.prototype;return t.add=function(n,r,s){Ut(n)&&(s=r,r=n,n=Ut);var o=this,l=function(){var c=Vt,h=o.selector,d;return c&&c!==o&&c.data.push(o),s&&(o.selector=va(s)),Vt=o,d=r.apply(o,arguments),Ut(d)&&o._r.push(d),Vt=c,o.selector=h,o.isReverted=!1,d};return o.last=l,n===Ut?l(o,function(u){return o.add(null,u)}):n?o[n]=l:l},t.ignore=function(n){var r=Vt;Vt=null,n(this),Vt=r},t.getTweens=function(){var n=[];return this.data.forEach(function(r){return r instanceof i?n.push.apply(n,r.getTweens()):r instanceof Wt&&!(r.parent&&r.parent.data==="nested")&&n.push(r)}),n},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(n,r){var s=this;if(n?function(){for(var l=s.getTweens(),u=s.data.length,c;u--;)c=s.data[u],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(h){return l.splice(l.indexOf(h),1)}));for(l.map(function(h){return{g:h._dur||h._delay||h._sat&&!h._sat.vars.immediateRender?h.globalTime(0):-1/0,t:h}}).sort(function(h,d){return d.g-h.g||-1/0}).forEach(function(h){return h.t.revert(n)}),u=s.data.length;u--;)c=s.data[u],c instanceof Te?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Wt)&&c.revert&&c.revert(n);s._r.forEach(function(h){return h(n,s)}),s.isReverted=!0}():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),r)for(var o=cr.length;o--;)cr[o].id===this.id&&cr.splice(o,1)},t.revert=function(n){this.kill(n||{})},i}(),Nm=function(){function i(e){this.contexts=[],this.scope=e,Vt&&Vt.data.push(this)}var t=i.prototype;return t.add=function(n,r,s){dn(n)||(n={matches:n});var o=new uf(0,s||this.scope),l=o.conditions={},u,c,h;Vt&&!o.selector&&(o.selector=Vt.selector),this.contexts.push(o),r=o.add("onMatch",r),o.queries=n;for(c in n)c==="all"?h=1:(u=on.matchMedia(n[c]),u&&(cr.indexOf(o)<0&&cr.push(o),(l[c]=u.matches)&&(h=1),u.addListener?u.addListener(wa):u.addEventListener("change",wa)));return h&&r(o,function(d){return o.add(null,d)}),this},t.revert=function(n){this.kill(n||{})},t.kill=function(n){this.contexts.forEach(function(r){return r.kill(n,!0)})},i}(),Ks={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(function(r){return Kh(r)})},timeline:function(t){return new Te(t)},getTweensOf:function(t,e){return Mt.getTweensOf(t,e)},getProperty:function(t,e,n,r){ne(t)&&(t=Je(t)[0]);var s=ar(t||{}).get,o=n?Oh:xh;return n==="native"&&(n=""),t&&(e?o((Me[e]&&Me[e].get||s)(t,e,n,r)):function(l,u,c){return o((Me[l]&&Me[l].get||s)(t,l,u,c))})},quickSetter:function(t,e,n){if(t=Je(t),t.length>1){var r=t.map(function(h){return ke.quickSetter(h,e,n)}),s=r.length;return function(h){for(var d=s;d--;)r[d](h)}}t=t[0]||{};var o=Me[e],l=ar(t),u=l.harness&&(l.harness.aliases||{})[e]||e,c=o?function(h){var d=new o;Or._pt=0,d.init(t,n?h+n:h,Or,0,[t]),d.render(1,d),Or._pt&&ll(1,Or)}:l.set(t,u);return o?c:function(h){return c(t,u,n?h+n:h,l,1)}},quickTo:function(t,e,n){var r,s=ke.to(t,dr((r={},r[e]="+=0.1",r.paused=!0,r),n||{})),o=function(u,c,h){return s.resetTo(e,u,c,h)};return o.tween=s,o},isTweening:function(t){return Mt.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=ur(t.ease,Br.ease)),Xu(Br,t||{})},config:function(t){return Xu(Be,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,r=t.plugins,s=t.defaults,o=t.extendTimeline;(r||"").split(",").forEach(function(l){return l&&!Me[l]&&!je[l]&&Oi(e+" effect requires "+l+" plugin.")}),Ko[e]=function(l,u,c){return n(Je(l),Ze(u||{},s),c)},o&&(Te.prototype[e]=function(l,u,c){return this.add(Ko[e](l,dn(u)?u:(c=u)&&{},this),c)})},registerEase:function(t,e){_t[t]=ur(e)},parseEase:function(t,e){return arguments.length?ur(t,e):_t},getById:function(t){return Mt.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var n=new Te(t),r,s;for(n.smoothChildTiming=Pe(t.smoothChildTiming),Mt.remove(n),n._dp=0,n._time=n._tTime=Mt._time,r=Mt._first;r;)s=r._next,(e||!(!r._dur&&r instanceof Wt&&r.vars.onComplete===r._targets[0]))&&an(n,r,r._start-r._delay),r=s;return an(Mt,n,0),n},context:function(t,e){return t?new uf(t,e):Vt},matchMedia:function(t){return new Nm(t)},matchMediaRefresh:function(){return cr.forEach(function(t){var e=t.conditions,n,r;for(r in e)e[r]&&(e[r]=!1,n=1);n&&t.revert()})||wa()},addEventListener:function(t,e){var n=xs[t]||(xs[t]=[]);~n.indexOf(e)||n.push(e)},removeEventListener:function(t,e){var n=xs[t],r=n&&n.indexOf(e);r>=0&&n.splice(r,1)},utils:{wrap:dm,wrapYoyo:_m,distribute:Uh,random:jh,snap:zh,normalize:fm,getUnit:de,clamp:lm,splitColor:Wh,toArray:Je,selector:va,mapRange:Gh,pipe:cm,unitize:hm,interpolate:mm,shuffle:Bh},install:Ch,effects:Ko,ticker:Fe,updateRoot:Te.updateRoot,plugins:Me,globalTimeline:Mt,core:{PropTween:Se,globals:Sh,Tween:Wt,Timeline:Te,Animation:Li,getCache:ar,_removeLinkedListItem:co,reverting:function(){return _e},context:function(t){return t&&Vt&&(Vt.data.push(t),t._ctx=Vt),Vt},suppressOverwrites:function(t){return Xa=t}}};Ce("to,from,fromTo,delayedCall,set,killTweensOf",function(i){return Ks[i]=Wt[i]});Fe.add(Te.updateRoot);Or=Ks.to({},{duration:0});var Mm=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},Fm=function(t,e){var n=t._targets,r,s,o;for(r in e)for(s=n.length;s--;)o=t._ptLookup[s][r],o&&(o=o.d)&&(o._pt&&(o=Mm(o,r)),o&&o.modifier&&o.modifier(e[r],t,n[s],r))},Jo=function(t,e){return{name:t,rawVars:1,init:function(r,s,o){o._onInit=function(l){var u,c;if(ne(s)&&(u={},Ce(s,function(h){return u[h]=1}),s=u),e){u={};for(c in s)u[c]=e(s[c]);s=u}Fm(l,s)}}}},ke=Ks.registerPlugin({name:"attr",init:function(t,e,n,r,s){var o,l,u;this.tween=n;for(o in e)u=t.getAttribute(o)||"",l=this.add(t,"setAttribute",(u||0)+"",e[o],r,s,0,0,o),l.op=o,l.b=u,this._props.push(o)},render:function(t,e){for(var n=e._pt;n;)_e?n.set(n.t,n.p,n.b,n):n.r(t,n.d),n=n._next}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n],0,0,0,0,0,1)}},Jo("roundProps",Ta),Jo("modifiers"),Jo("snap",zh))||Ks;Wt.version=Te.version=ke.version="3.12.5";Ph=1;Ja()&&jr();_t.Power0;_t.Power1;_t.Power2;_t.Power3;_t.Power4;_t.Linear;_t.Quad;_t.Cubic;_t.Quart;_t.Quint;_t.Strong;_t.Elastic;_t.Back;_t.SteppedEase;_t.Bounce;_t.Sine;_t.Expo;_t.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var nc,On,Mr,ul,ir,rc,cl,Lm=function(){return typeof window<"u"},bn={},nr=180/Math.PI,Fr=Math.PI/180,Sr=Math.atan2,ic=1e8,hl=/([A-Z])/g,$m=/(left|right|width|margin|padding|x)/i,Bm=/[\s,\(]\S/,ln={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Ia=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},Um=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},zm=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},jm=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},cf=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},hf=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},qm=function(t,e,n){return t.style[e]=n},Gm=function(t,e,n){return t.style.setProperty(e,n)},Hm=function(t,e,n){return t._gsap[e]=n},Km=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},Wm=function(t,e,n,r,s){var o=t._gsap;o.scaleX=o.scaleY=n,o.renderTransform(s,o)},Qm=function(t,e,n,r,s){var o=t._gsap;o[e]=n,o.renderTransform(s,o)},Lt="transform",De=Lt+"Origin",Xm=function i(t,e){var n=this,r=this.target,s=r.style,o=r._gsap;if(t in bn&&s){if(this.tfm=this.tfm||{},t!=="transform")t=ln[t]||t,~t.indexOf(",")?t.split(",").forEach(function(l){return n.tfm[l]=vn(r,l)}):this.tfm[t]=o.x?o[t]:vn(r,t),t===De&&(this.tfm.zOrigin=o.zOrigin);else return ln.transform.split(",").forEach(function(l){return i.call(n,l,e)});if(this.props.indexOf(Lt)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(De,e,"")),t=Lt}(s||e)&&this.props.push(t,e,s[t])},ff=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},Ym=function(){var t=this.props,e=this.target,n=e.style,r=e._gsap,s,o;for(s=0;s<t.length;s+=3)t[s+1]?e[t[s]]=t[s+2]:t[s+2]?n[t[s]]=t[s+2]:n.removeProperty(t[s].substr(0,2)==="--"?t[s]:t[s].replace(hl,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),s=cl(),(!s||!s.isStart)&&!n[Lt]&&(ff(n),r.zOrigin&&n[De]&&(n[De]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},df=function(t,e){var n={target:t,props:[],revert:Ym,save:Xm};return t._gsap||ke.core.getCache(t),e&&e.split(",").forEach(function(r){return n.save(r)}),n},_f,Aa=function(t,e){var n=On.createElementNS?On.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):On.createElement(t);return n&&n.style?n:On.createElement(t)},un=function i(t,e,n){var r=getComputedStyle(t);return r[e]||r.getPropertyValue(e.replace(hl,"-$1").toLowerCase())||r.getPropertyValue(e)||!n&&i(t,qr(e)||e,1)||""},sc="O,Moz,ms,Ms,Webkit".split(","),qr=function(t,e,n){var r=e||ir,s=r.style,o=5;if(t in s&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);o--&&!(sc[o]+t in s););return o<0?null:(o===3?"ms":o>=0?sc[o]:"")+t},ba=function(){Lm()&&window.document&&(nc=window,On=nc.document,Mr=On.documentElement,ir=Aa("div")||{style:{}},Aa("div"),Lt=qr(Lt),De=Lt+"Origin",ir.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",_f=!!qr("perspective"),cl=ke.core.reverting,ul=1)},Zo=function i(t){var e=Aa("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,s=this.style.cssText,o;if(Mr.appendChild(e),e.appendChild(this),this.style.display="block",t)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=i}catch{}else this._gsapBBox&&(o=this._gsapBBox());return n&&(r?n.insertBefore(this,r):n.appendChild(this)),Mr.removeChild(e),this.style.cssText=s,o},oc=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},mf=function(t){var e;try{e=t.getBBox()}catch{e=Zo.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===Zo||(e=Zo.call(t,!0)),e&&!e.width&&!e.x&&!e.y?{x:+oc(t,["x","cx","x1"])||0,y:+oc(t,["y","cy","y1"])||0,width:0,height:0}:e},pf=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&mf(t))},_r=function(t,e){if(e){var n=t.style,r;e in bn&&e!==De&&(e=Lt),n.removeProperty?(r=e.substr(0,2),(r==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),n.removeProperty(r==="--"?e:e.replace(hl,"-$1").toLowerCase())):n.removeAttribute(e)}},Nn=function(t,e,n,r,s,o){var l=new Se(t._pt,e,n,0,1,o?hf:cf);return t._pt=l,l.b=r,l.e=s,t._props.push(n),l},ac={deg:1,rad:1,turn:1},Jm={grid:1,flex:1},jn=function i(t,e,n,r){var s=parseFloat(n)||0,o=(n+"").trim().substr((s+"").length)||"px",l=ir.style,u=$m.test(e),c=t.tagName.toLowerCase()==="svg",h=(c?"client":"offset")+(u?"Width":"Height"),d=100,m=r==="px",g=r==="%",y,p,T,C;if(r===o||!s||ac[r]||ac[o])return s;if(o!=="px"&&!m&&(s=i(t,e,n,"px")),C=t.getCTM&&pf(t),(g||o==="%")&&(bn[e]||~e.indexOf("adius")))return y=C?t.getBBox()[u?"width":"height"]:t[h],qt(g?s/y*d:s/100*y);if(l[u?"width":"height"]=d+(m?o:r),p=~e.indexOf("adius")||r==="em"&&t.appendChild&&!c?t:t.parentNode,C&&(p=(t.ownerSVGElement||{}).parentNode),(!p||p===On||!p.appendChild)&&(p=On.body),T=p._gsap,T&&g&&T.width&&u&&T.time===Fe.time&&!T.uncache)return qt(s/T.width*d);if(g&&(e==="height"||e==="width")){var b=t.style[e];t.style[e]=d+r,y=t[h],b?t.style[e]=b:_r(t,e)}else(g||o==="%")&&!Jm[un(p,"display")]&&(l.position=un(t,"position")),p===t&&(l.position="static"),p.appendChild(ir),y=ir[h],p.removeChild(ir),l.position="absolute";return u&&g&&(T=ar(p),T.time=Fe.time,T.width=p[h]),qt(m?y*s/d:y&&s?d/y*s:0)},vn=function(t,e,n,r){var s;return ul||ba(),e in ln&&e!=="transform"&&(e=ln[e],~e.indexOf(",")&&(e=e.split(",")[0])),bn[e]&&e!=="transform"?(s=Bi(t,r),s=e!=="transformOrigin"?s[e]:s.svg?s.origin:Qs(un(t,De))+" "+s.zOrigin+"px"):(s=t.style[e],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=Ws[e]&&Ws[e](t,e,n)||un(t,e)||Vh(t,e)||(e==="opacity"?1:0))),n&&!~(s+"").trim().indexOf(" ")?jn(t,e,s,n)+n:s},Zm=function(t,e,n,r){if(!n||n==="none"){var s=qr(e,t,1),o=s&&un(t,s,1);o&&o!==n?(e=s,n=o):e==="borderColor"&&(n=un(t,"borderTopColor"))}var l=new Se(this._pt,t.style,e,0,1,af),u=0,c=0,h,d,m,g,y,p,T,C,b,D,V,k;if(l.b=n,l.e=r,n+="",r+="",r==="auto"&&(p=t.style[e],t.style[e]=r,r=un(t,e)||r,p?t.style[e]=p:_r(t,e)),h=[n,r],Xh(h),n=h[0],r=h[1],m=n.match(xr)||[],k=r.match(xr)||[],k.length){for(;d=xr.exec(r);)T=d[0],b=r.substring(u,d.index),y?y=(y+1)%5:(b.substr(-5)==="rgba("||b.substr(-5)==="hsla(")&&(y=1),T!==(p=m[c++]||"")&&(g=parseFloat(p)||0,V=p.substr((g+"").length),T.charAt(1)==="="&&(T=Nr(g,T)+V),C=parseFloat(T),D=T.substr((C+"").length),u=xr.lastIndex-D.length,D||(D=D||Be.units[e]||V,u===r.length&&(r+=D,l.e+=D)),V!==D&&(g=jn(t,e,p,D)||0),l._pt={_next:l._pt,p:b||c===1?b:",",s:g,c:C-g,m:y&&y<4||e==="zIndex"?Math.round:0});l.c=u<r.length?r.substring(u,r.length):""}else l.r=e==="display"&&r==="none"?hf:cf;return bh.test(r)&&(l.e=0),this._pt=l,l},lc={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},tp=function(t){var e=t.split(" "),n=e[0],r=e[1]||"50%";return(n==="top"||n==="bottom"||r==="left"||r==="right")&&(t=n,n=r,r=t),e[0]=lc[n]||n,e[1]=lc[r]||r,e.join(" ")},ep=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n=e.t,r=n.style,s=e.u,o=n._gsap,l,u,c;if(s==="all"||s===!0)r.cssText="",u=1;else for(s=s.split(","),c=s.length;--c>-1;)l=s[c],bn[l]&&(u=1,l=l==="transformOrigin"?De:Lt),_r(n,l);u&&(_r(n,Lt),o&&(o.svg&&n.removeAttribute("transform"),Bi(n,1),o.uncache=1,ff(r)))}},Ws={clearProps:function(t,e,n,r,s){if(s.data!=="isFromStart"){var o=t._pt=new Se(t._pt,e,n,0,0,ep);return o.u=r,o.pr=-10,o.tween=s,t._props.push(n),1}}},$i=[1,0,0,1,0,0],gf={},yf=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},uc=function(t){var e=un(t,Lt);return yf(e)?$i:e.substr(7).match(Ah).map(qt)},fl=function(t,e){var n=t._gsap||ar(t),r=t.style,s=uc(t),o,l,u,c;return n.svg&&t.getAttribute("transform")?(u=t.transform.baseVal.consolidate().matrix,s=[u.a,u.b,u.c,u.d,u.e,u.f],s.join(",")==="1,0,0,1,0,0"?$i:s):(s===$i&&!t.offsetParent&&t!==Mr&&!n.svg&&(u=r.display,r.display="block",o=t.parentNode,(!o||!t.offsetParent)&&(c=1,l=t.nextElementSibling,Mr.appendChild(t)),s=uc(t),u?r.display=u:_r(t,"display"),c&&(l?o.insertBefore(t,l):o?o.appendChild(t):Mr.removeChild(t))),e&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},Ra=function(t,e,n,r,s,o){var l=t._gsap,u=s||fl(t,!0),c=l.xOrigin||0,h=l.yOrigin||0,d=l.xOffset||0,m=l.yOffset||0,g=u[0],y=u[1],p=u[2],T=u[3],C=u[4],b=u[5],D=e.split(" "),V=parseFloat(D[0])||0,k=parseFloat(D[1])||0,O,I,E,v;n?u!==$i&&(I=g*T-y*p)&&(E=V*(T/I)+k*(-p/I)+(p*b-T*C)/I,v=V*(-y/I)+k*(g/I)-(g*b-y*C)/I,V=E,k=v):(O=mf(t),V=O.x+(~D[0].indexOf("%")?V/100*O.width:V),k=O.y+(~(D[1]||D[0]).indexOf("%")?k/100*O.height:k)),r||r!==!1&&l.smooth?(C=V-c,b=k-h,l.xOffset=d+(C*g+b*p)-C,l.yOffset=m+(C*y+b*T)-b):l.xOffset=l.yOffset=0,l.xOrigin=V,l.yOrigin=k,l.smooth=!!r,l.origin=e,l.originIsAbsolute=!!n,t.style[De]="0px 0px",o&&(Nn(o,l,"xOrigin",c,V),Nn(o,l,"yOrigin",h,k),Nn(o,l,"xOffset",d,l.xOffset),Nn(o,l,"yOffset",m,l.yOffset)),t.setAttribute("data-svg-origin",V+" "+k)},Bi=function(t,e){var n=t._gsap||new tf(t);if("x"in n&&!e&&!n.uncache)return n;var r=t.style,s=n.scaleX<0,o="px",l="deg",u=getComputedStyle(t),c=un(t,De)||"0",h,d,m,g,y,p,T,C,b,D,V,k,O,I,E,v,R,P,S,A,st,rt,ht,at,dt,xt,zt,j,H,tt,It,Ot;return h=d=m=p=T=C=b=D=V=0,g=y=1,n.svg=!!(t.getCTM&&pf(t)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(r[Lt]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[Lt]!=="none"?u[Lt]:"")),r.scale=r.rotate=r.translate="none"),I=fl(t,n.svg),n.svg&&(n.uncache?(dt=t.getBBox(),c=n.xOrigin-dt.x+"px "+(n.yOrigin-dt.y)+"px",at=""):at=!e&&t.getAttribute("data-svg-origin"),Ra(t,at||c,!!at||n.originIsAbsolute,n.smooth!==!1,I)),k=n.xOrigin||0,O=n.yOrigin||0,I!==$i&&(P=I[0],S=I[1],A=I[2],st=I[3],h=rt=I[4],d=ht=I[5],I.length===6?(g=Math.sqrt(P*P+S*S),y=Math.sqrt(st*st+A*A),p=P||S?Sr(S,P)*nr:0,b=A||st?Sr(A,st)*nr+p:0,b&&(y*=Math.abs(Math.cos(b*Fr))),n.svg&&(h-=k-(k*P+O*A),d-=O-(k*S+O*st))):(Ot=I[6],tt=I[7],zt=I[8],j=I[9],H=I[10],It=I[11],h=I[12],d=I[13],m=I[14],E=Sr(Ot,H),T=E*nr,E&&(v=Math.cos(-E),R=Math.sin(-E),at=rt*v+zt*R,dt=ht*v+j*R,xt=Ot*v+H*R,zt=rt*-R+zt*v,j=ht*-R+j*v,H=Ot*-R+H*v,It=tt*-R+It*v,rt=at,ht=dt,Ot=xt),E=Sr(-A,H),C=E*nr,E&&(v=Math.cos(-E),R=Math.sin(-E),at=P*v-zt*R,dt=S*v-j*R,xt=A*v-H*R,It=st*R+It*v,P=at,S=dt,A=xt),E=Sr(S,P),p=E*nr,E&&(v=Math.cos(E),R=Math.sin(E),at=P*v+S*R,dt=rt*v+ht*R,S=S*v-P*R,ht=ht*v-rt*R,P=at,rt=dt),T&&Math.abs(T)+Math.abs(p)>359.9&&(T=p=0,C=180-C),g=qt(Math.sqrt(P*P+S*S+A*A)),y=qt(Math.sqrt(ht*ht+Ot*Ot)),E=Sr(rt,ht),b=Math.abs(E)>2e-4?E*nr:0,V=It?1/(It<0?-It:It):0),n.svg&&(at=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!yf(un(t,Lt)),at&&t.setAttribute("transform",at))),Math.abs(b)>90&&Math.abs(b)<270&&(s?(g*=-1,b+=p<=0?180:-180,p+=p<=0?180:-180):(y*=-1,b+=b<=0?180:-180)),e=e||n.uncache,n.x=h-((n.xPercent=h&&(!e&&n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-h)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+o,n.y=d-((n.yPercent=d&&(!e&&n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-d)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+o,n.z=m+o,n.scaleX=qt(g),n.scaleY=qt(y),n.rotation=qt(p)+l,n.rotationX=qt(T)+l,n.rotationY=qt(C)+l,n.skewX=b+l,n.skewY=D+l,n.transformPerspective=V+o,(n.zOrigin=parseFloat(c.split(" ")[2])||!e&&n.zOrigin||0)&&(r[De]=Qs(c)),n.xOffset=n.yOffset=0,n.force3D=Be.force3D,n.renderTransform=n.svg?rp:_f?vf:np,n.uncache=0,n},Qs=function(t){return(t=t.split(" "))[0]+" "+t[1]},ta=function(t,e,n){var r=de(e);return qt(parseFloat(e)+parseFloat(jn(t,"x",n+"px",r)))+r},np=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,vf(t,e)},tr="0deg",gi="0px",er=") ",vf=function(t,e){var n=e||this,r=n.xPercent,s=n.yPercent,o=n.x,l=n.y,u=n.z,c=n.rotation,h=n.rotationY,d=n.rotationX,m=n.skewX,g=n.skewY,y=n.scaleX,p=n.scaleY,T=n.transformPerspective,C=n.force3D,b=n.target,D=n.zOrigin,V="",k=C==="auto"&&t&&t!==1||C===!0;if(D&&(d!==tr||h!==tr)){var O=parseFloat(h)*Fr,I=Math.sin(O),E=Math.cos(O),v;O=parseFloat(d)*Fr,v=Math.cos(O),o=ta(b,o,I*v*-D),l=ta(b,l,-Math.sin(O)*-D),u=ta(b,u,E*v*-D+D)}T!==gi&&(V+="perspective("+T+er),(r||s)&&(V+="translate("+r+"%, "+s+"%) "),(k||o!==gi||l!==gi||u!==gi)&&(V+=u!==gi||k?"translate3d("+o+", "+l+", "+u+") ":"translate("+o+", "+l+er),c!==tr&&(V+="rotate("+c+er),h!==tr&&(V+="rotateY("+h+er),d!==tr&&(V+="rotateX("+d+er),(m!==tr||g!==tr)&&(V+="skew("+m+", "+g+er),(y!==1||p!==1)&&(V+="scale("+y+", "+p+er),b.style[Lt]=V||"translate(0, 0)"},rp=function(t,e){var n=e||this,r=n.xPercent,s=n.yPercent,o=n.x,l=n.y,u=n.rotation,c=n.skewX,h=n.skewY,d=n.scaleX,m=n.scaleY,g=n.target,y=n.xOrigin,p=n.yOrigin,T=n.xOffset,C=n.yOffset,b=n.forceCSS,D=parseFloat(o),V=parseFloat(l),k,O,I,E,v;u=parseFloat(u),c=parseFloat(c),h=parseFloat(h),h&&(h=parseFloat(h),c+=h,u+=h),u||c?(u*=Fr,c*=Fr,k=Math.cos(u)*d,O=Math.sin(u)*d,I=Math.sin(u-c)*-m,E=Math.cos(u-c)*m,c&&(h*=Fr,v=Math.tan(c-h),v=Math.sqrt(1+v*v),I*=v,E*=v,h&&(v=Math.tan(h),v=Math.sqrt(1+v*v),k*=v,O*=v)),k=qt(k),O=qt(O),I=qt(I),E=qt(E)):(k=d,E=m,O=I=0),(D&&!~(o+"").indexOf("px")||V&&!~(l+"").indexOf("px"))&&(D=jn(g,"x",o,"px"),V=jn(g,"y",l,"px")),(y||p||T||C)&&(D=qt(D+y-(y*k+p*I)+T),V=qt(V+p-(y*O+p*E)+C)),(r||s)&&(v=g.getBBox(),D=qt(D+r/100*v.width),V=qt(V+s/100*v.height)),v="matrix("+k+","+O+","+I+","+E+","+D+","+V+")",g.setAttribute("transform",v),b&&(g.style[Lt]=v)},ip=function(t,e,n,r,s){var o=360,l=ne(s),u=parseFloat(s)*(l&&~s.indexOf("rad")?nr:1),c=u-r,h=r+c+"deg",d,m;return l&&(d=s.split("_")[1],d==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),d==="cw"&&c<0?c=(c+o*ic)%o-~~(c/o)*o:d==="ccw"&&c>0&&(c=(c-o*ic)%o-~~(c/o)*o)),t._pt=m=new Se(t._pt,e,n,r,c,Um),m.e=h,m.u="deg",t._props.push(n),m},cc=function(t,e){for(var n in e)t[n]=e[n];return t},sp=function(t,e,n){var r=cc({},n._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=n.style,l,u,c,h,d,m,g,y;r.svg?(c=n.getAttribute("transform"),n.setAttribute("transform",""),o[Lt]=e,l=Bi(n,1),_r(n,Lt),n.setAttribute("transform",c)):(c=getComputedStyle(n)[Lt],o[Lt]=e,l=Bi(n,1),o[Lt]=c);for(u in bn)c=r[u],h=l[u],c!==h&&s.indexOf(u)<0&&(g=de(c),y=de(h),d=g!==y?jn(n,u,c,y):parseFloat(c),m=parseFloat(h),t._pt=new Se(t._pt,l,u,d,m-d,Ia),t._pt.u=y||0,t._props.push(u));cc(l,r)};Ce("padding,margin,Width,Radius",function(i,t){var e="Top",n="Right",r="Bottom",s="Left",o=(t<3?[e,n,r,s]:[e+s,e+n,r+n,r+s]).map(function(l){return t<2?i+l:"border"+l+i});Ws[t>1?"border"+i:i]=function(l,u,c,h,d){var m,g;if(arguments.length<4)return m=o.map(function(y){return vn(l,y,c)}),g=m.join(" "),g.split(m[0]).length===5?m[0]:g;m=(h+"").split(" "),g={},o.forEach(function(y,p){return g[y]=m[p]=m[p]||m[(p-1)/2|0]}),l.init(u,g,d)}});var Tf={name:"css",register:ba,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,r,s){var o=this._props,l=t.style,u=n.vars.startAt,c,h,d,m,g,y,p,T,C,b,D,V,k,O,I,E;ul||ba(),this.styles=this.styles||df(t),E=this.styles.props,this.tween=n;for(p in e)if(p!=="autoRound"&&(h=e[p],!(Me[p]&&ef(p,e,n,r,t,s)))){if(g=typeof h,y=Ws[p],g==="function"&&(h=h.call(n,r,t,s),g=typeof h),g==="string"&&~h.indexOf("random(")&&(h=Mi(h)),y)y(this,t,p,h,n)&&(I=1);else if(p.substr(0,2)==="--")c=(getComputedStyle(t).getPropertyValue(p)+"").trim(),h+="",Ln.lastIndex=0,Ln.test(c)||(T=de(c),C=de(h)),C?T!==C&&(c=jn(t,p,c,C)+C):T&&(h+=T),this.add(l,"setProperty",c,h,r,s,0,0,p),o.push(p),E.push(p,0,l[p]);else if(g!=="undefined"){if(u&&p in u?(c=typeof u[p]=="function"?u[p].call(n,r,t,s):u[p],ne(c)&&~c.indexOf("random(")&&(c=Mi(c)),de(c+"")||c==="auto"||(c+=Be.units[p]||de(vn(t,p))||""),(c+"").charAt(1)==="="&&(c=vn(t,p))):c=vn(t,p),m=parseFloat(c),b=g==="string"&&h.charAt(1)==="="&&h.substr(0,2),b&&(h=h.substr(2)),d=parseFloat(h),p in ln&&(p==="autoAlpha"&&(m===1&&vn(t,"visibility")==="hidden"&&d&&(m=0),E.push("visibility",0,l.visibility),Nn(this,l,"visibility",m?"inherit":"hidden",d?"inherit":"hidden",!d)),p!=="scale"&&p!=="transform"&&(p=ln[p],~p.indexOf(",")&&(p=p.split(",")[0]))),D=p in bn,D){if(this.styles.save(p),V||(k=t._gsap,k.renderTransform&&!e.parseTransform||Bi(t,e.parseTransform),O=e.smoothOrigin!==!1&&k.smooth,V=this._pt=new Se(this._pt,l,Lt,0,1,k.renderTransform,k,0,-1),V.dep=1),p==="scale")this._pt=new Se(this._pt,k,"scaleY",k.scaleY,(b?Nr(k.scaleY,b+d):d)-k.scaleY||0,Ia),this._pt.u=0,o.push("scaleY",p),p+="X";else if(p==="transformOrigin"){E.push(De,0,l[De]),h=tp(h),k.svg?Ra(t,h,0,O,0,this):(C=parseFloat(h.split(" ")[2])||0,C!==k.zOrigin&&Nn(this,k,"zOrigin",k.zOrigin,C),Nn(this,l,p,Qs(c),Qs(h)));continue}else if(p==="svgOrigin"){Ra(t,h,1,O,0,this);continue}else if(p in gf){ip(this,k,p,m,b?Nr(m,b+h):h);continue}else if(p==="smoothOrigin"){Nn(this,k,"smooth",k.smooth,h);continue}else if(p==="force3D"){k[p]=h;continue}else if(p==="transform"){sp(this,h,t);continue}}else p in l||(p=qr(p)||p);if(D||(d||d===0)&&(m||m===0)&&!Bm.test(h)&&p in l)T=(c+"").substr((m+"").length),d||(d=0),C=de(h)||(p in Be.units?Be.units[p]:T),T!==C&&(m=jn(t,p,c,C)),this._pt=new Se(this._pt,D?k:l,p,m,(b?Nr(m,b+d):d)-m,!D&&(C==="px"||p==="zIndex")&&e.autoRound!==!1?jm:Ia),this._pt.u=C||0,T!==C&&C!=="%"&&(this._pt.b=c,this._pt.r=zm);else if(p in l)Zm.call(this,t,p,c,b?b+h:h);else if(p in t)this.add(t,p,c||t[p],b?b+h:h,r,s);else if(p!=="parseTransform"){tl(p,h);continue}D||(p in l?E.push(p,0,l[p]):E.push(p,1,c||t[p])),o.push(p)}}I&&lf(this)},render:function(t,e){if(e.tween._time||!cl())for(var n=e._pt;n;)n.r(t,n.d),n=n._next;else e.styles.revert()},get:vn,aliases:ln,getSetter:function(t,e,n){var r=ln[e];return r&&r.indexOf(",")<0&&(e=r),e in bn&&e!==De&&(t._gsap.x||vn(t,"x"))?n&&rc===n?e==="scale"?Km:Hm:(rc=n||{})&&(e==="scale"?Wm:Qm):t.style&&!Ya(t.style[e])?qm:~e.indexOf("-")?Gm:al(t,e)},core:{_removeProperty:_r,_getMatrix:fl}};ke.utils.checkPrefix=qr;ke.core.getStyleSaver=df;(function(i,t,e,n){var r=Ce(i+","+t+","+e,function(s){bn[s]=1});Ce(t,function(s){Be.units[s]="deg",gf[s]=1}),ln[r[13]]=i+","+t,Ce(n,function(s){var o=s.split(":");ln[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Ce("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(i){Be.units[i]="px"});ke.registerPlugin(Tf);var _o=ke.registerPlugin(Tf)||ke;_o.core.Tween;function op(i){return i.filter(Boolean).join(" ")}function ea(i){let t,e,n,r,s;const o=i[6].default,l=Xi(o,i,i[5],null);let u=[{class:e="button-base "+i[3]},{href:i[1]},{target:i[2]},{role:"button"},{tabindex:"0"},i[4]],c={};for(let h=0;h<u.length;h+=1)c=ha(c,u[h]);return{c(){t=U(i[1]?"a":"button"),l&&l.c(),this.h()},l(h){t=z(h,((i[1]?"a":"button")||"null").toUpperCase(),{class:!0,href:!0,target:!0,role:!0,tabindex:!0});var d=Y(t);l&&l.l(d),d.forEach(M),this.h()},h(){Ku(i[1]?"a":"button")(t,c)},m(h,d){q(h,t,d),l&&l.m(t,null),i[8](t),n=!0,r||(s=uo(t,"click",i[7]),r=!0)},p(h,d){l&&l.p&&(!n||d&32)&&Yi(l,o,h,h[5],n?Zi(o,h[5],d,null):Ji(h[5]),null),Ku(h[1]?"a":"button")(t,c=M_(u,[(!n||d&8&&e!==(e="button-base "+h[3]))&&{class:e},(!n||d&2)&&{href:h[1]},(!n||d&4)&&{target:h[2]},{role:"button"},{tabindex:"0"},d&16&&h[4]]))},i(h){n||(K(l,h),n=!0)},o(h){Z(l,h),n=!1},d(h){h&&M(t),l&&l.d(h),i[8](null),r=!1,s()}}}function ap(i){let t=i[1]?"a":"button",e,n,r=(i[1]?"a":"button")&&ea(i);return{c(){r&&r.c(),e=Ve()},l(s){r&&r.l(s),e=Ve()},m(s,o){r&&r.m(s,o),q(s,e,o),n=!0},p(s,[o]){s[1],t?xe(t,s[1]?"a":"button")?(r.d(1),r=ea(s),t=s[1]?"a":"button",r.c(),r.m(e.parentNode,e)):r.p(s,o):(r=ea(s),t=s[1]?"a":"button",r.c(),r.m(e.parentNode,e))},i(s){n||(K(r,s),n=!0)},o(s){Z(r,s),n=!1},d(s){s&&M(e),r&&r.d(s)}}}function lp(i,t,e){const n=["el","href","target","class"];let r=Hu(t,n),{$$slots:s={},$$scope:o}=t,{el:l=void 0}=t,{href:u=void 0}=t,{target:c=void 0}=t,{class:h=""}=t;function d(g){Th.call(this,i,g)}function m(g){ki[g?"unshift":"push"](()=>{l=g,e(0,l)})}return i.$$set=g=>{t=ha(ha({},t),S_(g)),e(4,r=Hu(t,n)),"el"in g&&e(0,l=g.el),"href"in g&&e(1,u=g.href),"target"in g&&e(2,c=g.target),"class"in g&&e(3,h=g.class),"$$scope"in g&&e(5,o=g.$$scope)},[l,u,c,h,r,o,s,d,m]}class up extends qe{constructor(t){super(),Ge(this,t,lp,ap,xe,{el:0,href:1,target:2,class:3})}}function cp(i){let t;const e=i[5].default,n=Xi(e,i,i[7],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),t=!0},p(r,s){n&&n.p&&(!t||s&128)&&Yi(n,e,r,r[7],t?Zi(e,r[7],s,null):Ji(r[7]),null)},i(r){t||(K(n,r),t=!0)},o(r){Z(n,r),t=!1},d(r){n&&n.d(r)}}}function hp(i){let t,e;return t=new up({props:{class:"button-main px-5 transition-colors duration-300 ease-in-out rounded-md py-3 "+i[2],href:i[0],target:i[1],$$slots:{default:[cp]},$$scope:{ctx:i}}}),t.$on("click",i[6]),{c(){yt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,r){Tt(t,n,r),e=!0},p(n,[r]){const s={};r&4&&(s.class="button-main px-5 transition-colors duration-300 ease-in-out rounded-md py-3 "+n[2]),r&1&&(s.href=n[0]),r&2&&(s.target=n[1]),r&128&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(K(t.$$.fragment,n),e=!0)},o(n){Z(t.$$.fragment,n),e=!1},d(n){Et(t,n)}}}function fp(i,t,e){let n,{$$slots:r={},$$scope:s}=t,{theme:o="blue"}=t,{href:l=void 0}=t,{target:u=void 0}=t,{class:c=""}=t;function h(d){Th.call(this,i,d)}return i.$$set=d=>{"theme"in d&&e(3,o=d.theme),"href"in d&&e(0,l=d.href),"target"in d&&e(1,u=d.target),"class"in d&&e(4,c=d.class),"$$scope"in d&&e(7,s=d.$$scope)},i.$$.update=()=>{i.$$.dirty&24&&e(2,n=op([o==="blue"&&"bg-blue-500 hover:bg-blue-600 text-white",o==="red"&&"bg-red-500 hover:bg-red-600 text-white",o==="green"&&"bg-green-500 hover:bg-green-600 text-white",c]))},[l,u,n,o,c,r,h,s]}class pe extends qe{constructor(t){super(),Ge(this,t,fp,hp,xe,{theme:3,href:0,target:1,class:4})}}function hc(i,t,e){const n=i.slice();return n[6]=t[e],n}function fc(i,t,e){const n=i.slice();return n[9]=t[e],n[11]=e,n}function dc(i){let t,e=i[1][i[11]].naam+"",n,r,s=i[9]+"",o;return{c(){t=U("p"),n=lt(e),r=lt(": "),o=lt(s),this.h()},l(l){t=z(l,"P",{class:!0});var u=Y(t);n=ut(u,e),r=ut(u,": "),o=ut(u,s),u.forEach(M),this.h()},h(){G(t,"class","capitalize")},m(l,u){q(l,t,u),F(t,n),F(t,r),F(t,o)},p(l,u){u&2&&e!==(e=l[1][l[11]].naam+"")&&Ft(n,e),u&1&&s!==(s=l[9]+"")&&Ft(o,s)},d(l){l&&M(t)}}}function dp(i){let t,e="Sentiment:";return{c(){t=U("u"),t.textContent=e},l(n){t=z(n,"U",{"data-svelte-h":!0}),se(t)!=="svelte-1epx1kf"&&(t.textContent=e)},m(n,r){q(n,t,r)},p:or,d(n){n&&M(t)}}}function _c(i){let t,e,n=i[6].id+"",r,s,o,l,u,c=i[3](i[6].values)+"",h,d,m,g=fn(i[6].values),y=[];for(let p=0;p<g.length;p+=1)y[p]=dc(fc(i,g,p));return l=new G_({props:{content:"Het sentiment geeft aan hoe een vertegenwoordiger zich voelt over de gemaakte keuzes.",action:"click",$$slots:{default:[dp]},$$scope:{ctx:i}}}),{c(){t=U("div"),e=U("p"),r=lt(n),s=Q();for(let p=0;p<y.length;p+=1)y[p].c();o=Q(),yt(l.$$.fragment),u=Q(),h=lt(c),d=Q(),this.h()},l(p){t=z(p,"DIV",{class:!0});var T=Y(t);e=z(T,"P",{class:!0});var C=Y(e);r=ut(C,n),C.forEach(M),s=X(T);for(let b=0;b<y.length;b+=1)y[b].l(T);o=X(T),vt(l.$$.fragment,T),u=X(T),h=ut(T,c),d=X(T),T.forEach(M),this.h()},h(){G(e,"class","font-bold"),G(t,"class","bg-yellow-50")},m(p,T){q(p,t,T),F(t,e),F(e,r),F(t,s);for(let C=0;C<y.length;C+=1)y[C]&&y[C].m(t,null);F(t,o),Tt(l,t,null),F(t,u),F(t,h),F(t,d),m=!0},p(p,T){if((!m||T&1)&&n!==(n=p[6].id+"")&&Ft(r,n),T&3){g=fn(p[6].values);let b;for(b=0;b<g.length;b+=1){const D=fc(p,g,b);y[b]?y[b].p(D,T):(y[b]=dc(D),y[b].c(),y[b].m(t,o))}for(;b<y.length;b+=1)y[b].d(1);y.length=g.length}const C={};T&4096&&(C.$$scope={dirty:T,ctx:p}),l.$set(C),(!m||T&1)&&c!==(c=p[3](p[6].values)+"")&&Ft(h,c)},i(p){m||(K(l.$$.fragment,p),m=!0)},o(p){Z(l.$$.fragment,p),m=!1},d(p){p&&M(t),ts(y,p),Et(l)}}}function _p(i){let t;return{c(){t=lt("Sluit")},l(e){t=ut(e,"Sluit")},m(e,n){q(e,t,n)},d(e){e&&M(t)}}}function mp(i){let t,e,n="Resultaten per team",r,s,o,l,u,c,h,d=fn(i[0]),m=[];for(let y=0;y<d.length;y+=1)m[y]=_c(hc(i,d,y));const g=y=>Z(m[y],1,1,()=>{m[y]=null});return l=new pe({props:{theme:"red",$$slots:{default:[_p]},$$scope:{ctx:i}}}),l.$on("click",i[5]),{c(){t=U("div"),e=U("p"),e.textContent=n,r=Q(),s=U("div");for(let y=0;y<m.length;y+=1)m[y].c();o=Q(),yt(l.$$.fragment),this.h()},l(y){t=z(y,"DIV",{class:!0});var p=Y(t);e=z(p,"P",{class:!0,"data-svelte-h":!0}),se(e)!=="svelte-boq8th"&&(e.textContent=n),r=X(p),s=z(p,"DIV",{class:!0});var T=Y(s);for(let C=0;C<m.length;C+=1)m[C].l(T);T.forEach(M),o=X(p),vt(l.$$.fragment,p),p.forEach(M),this.h()},h(){G(e,"class","font-bold text-xl mb-2"),G(s,"class","grid grid-cols-2 gap-4 mb-4"),G(t,"class","p-14 bg-white shadow-lg items-start absolute flex flex-col")},m(y,p){q(y,t,p),F(t,e),F(t,r),F(t,s);for(let T=0;T<m.length;T+=1)m[T]&&m[T].m(s,null);F(t,o),Tt(l,t,null),h=!0},p(y,[p]){if(p&11){d=fn(y[0]);let C;for(C=0;C<d.length;C+=1){const b=hc(y,d,C);m[C]?(m[C].p(b,p),K(m[C],1)):(m[C]=_c(b),m[C].c(),K(m[C],1),m[C].m(s,null))}for(wn(),C=d.length;C<m.length;C+=1)g(C);In()}const T={};p&4096&&(T.$$scope={dirty:p,ctx:y}),l.$set(T)},i(y){if(!h){for(let p=0;p<d.length;p+=1)K(m[p]);K(l.$$.fragment,y),y&&D_(()=>{h&&(c&&c.end(1),u=O_(t,pp,{}),u.start())}),h=!0}},o(y){m=m.filter(Boolean);for(let p=0;p<m.length;p+=1)Z(m[p]);Z(l.$$.fragment,y),u&&u.invalidate(),y&&(c=N_(t,gp,{})),h=!1},d(y){y&&M(t),ts(m,y),Et(l),y&&c&&c.end()}}}function pp(i){let t=_o.timeline().fromTo(i,{yPercent:200},{yPercent:0,duration:.48,ease:"power1.inOut"});return{duration:t.totalDuration()*1e3,tick:e=>{t.progress(e)}}}function gp(i){let t=_o.timeline().fromTo(i,{yPercent:0},{yPercent:-200,duration:.48,ease:"power2.inOut"});return{duration:t.totalDuration()*1e3,tick:e=>{t.progress(1-e)}}}function yp(i,t,e){let n,r,s;Re(i,fr,c=>e(0,n=c)),Re(i,zs,c=>e(1,r=c)),Re(i,$s,c=>e(2,s=c));let{averages:o=[]}=t;const l=c=>{const h=[];for(let g=0;g<o.length;g++){const y=o[g]-c[g];h.push(y)}return h.reduce((g,y)=>g+y,0)/h.length},u=()=>$s.set(!s);return i.$$set=c=>{"averages"in c&&e(4,o=c.averages)},[n,r,s,l,o,u]}class vp extends qe{constructor(t){super(),Ge(this,t,yp,mp,xe,{averages:4})}}function Tp(i){let t,e,n;const r=i[2].default,s=Xi(r,i,i[1],null);return{c(){t=U("div"),s&&s.c(),this.h()},l(o){t=z(o,"DIV",{class:!0});var l=Y(t);s&&s.l(l),l.forEach(M),this.h()},h(){G(t,"class",e="p-14 bg-white shadow-lg flex flex-col "+i[0])},m(o,l){q(o,t,l),s&&s.m(t,null),n=!0},p(o,[l]){s&&s.p&&(!n||l&2)&&Yi(s,r,o,o[1],n?Zi(r,o[1],l,null):Ji(o[1]),null),(!n||l&1&&e!==(e="p-14 bg-white shadow-lg flex flex-col "+o[0]))&&G(t,"class",e)},i(o){n||(K(s,o),n=!0)},o(o){Z(s,o),n=!1},d(o){o&&M(t),s&&s.d(o)}}}function Ep(i,t,e){let{$$slots:n={},$$scope:r}=t,{class:s=""}=t;return i.$$set=o=>{"class"in o&&e(0,s=o.class),"$$scope"in o&&e(1,r=o.$$scope)},[s,r,n]}class Jr extends qe{constructor(t){super(),Ge(this,t,Ep,Tp,xe,{class:0})}}function mc(i,t,e){const n=i.slice();return n[13]=t[e],n[15]=e,n}function pc(i){let t,e,n,r=i[0][i[15]].naam+"",s,o,l,u=i[13].toFixed(2)+"",c;return{c(){t=U("tr"),e=U("td"),n=lt("Gemiddelde inzet "),s=lt(r),o=Q(),l=U("td"),c=lt(u),this.h()},l(h){t=z(h,"TR",{});var d=Y(t);e=z(d,"TD",{class:!0});var m=Y(e);n=ut(m,"Gemiddelde inzet "),s=ut(m,r),m.forEach(M),o=X(d),l=z(d,"TD",{});var g=Y(l);c=ut(g,u),g.forEach(M),d.forEach(M),this.h()},h(){G(e,"class","pr-4")},m(h,d){q(h,t,d),F(t,e),F(e,n),F(e,s),F(t,o),F(t,l),F(l,c)},p(h,d){d&1&&r!==(r=h[0][h[15]].naam+"")&&Ft(s,r),d&2&&u!==(u=h[13].toFixed(2)+"")&&Ft(c,u)},d(h){h&&M(t)}}}function wp(i){let t;return{c(){t=lt("Terug")},l(e){t=ut(e,"Terug")},m(e,n){q(e,t,n)},d(e){e&&M(t)}}}function Ip(i){let t;return{c(){t=lt("Resultaten per team")},l(e){t=ut(e,"Resultaten per team")},m(e,n){q(e,t,n)},d(e){e&&M(t)}}}function Ap(i){let t,e="Resultaat",n,r,s,o='<td class="font-bold pr-4">Maatregel</td> <td class="font-bold">Schaal</td>',l,u,c,h,d="Geholpen mensen per jaar",m,g,y,p,T,C,b="Kosten per jaar",D,V,k=i[3].toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"",O,I,E,v,R="Aantal vrijwilligers per jaar",P,S,A,st,rt,ht,at,dt,xt,zt=fn(i[1]),j=[];for(let H=0;H<zt.length;H+=1)j[H]=pc(mc(i,zt,H));return ht=new pe({props:{theme:"red",$$slots:{default:[wp]},$$scope:{ctx:i}}}),ht.$on("click",i[7]),dt=new pe({props:{$$slots:{default:[Ip]},$$scope:{ctx:i}}}),dt.$on("click",i[8]),{c(){t=U("div"),t.textContent=e,n=Q(),r=U("table"),s=U("tr"),s.innerHTML=o,l=Q();for(let H=0;H<j.length;H+=1)j[H].c();u=Q(),c=U("tr"),h=U("td"),h.textContent=d,m=Q(),g=U("td"),y=lt(i[2]),p=Q(),T=U("tr"),C=U("td"),C.textContent=b,D=Q(),V=U("td"),O=lt(k),I=Q(),E=U("tr"),v=U("td"),v.textContent=R,P=Q(),S=U("td"),A=lt(i[4]),st=Q(),rt=U("div"),yt(ht.$$.fragment),at=Q(),yt(dt.$$.fragment),this.h()},l(H){t=z(H,"DIV",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-17bvcbp"&&(t.textContent=e),n=X(H),r=z(H,"TABLE",{class:!0});var tt=Y(r);s=z(tt,"TR",{"data-svelte-h":!0}),se(s)!=="svelte-2gnwuf"&&(s.innerHTML=o),l=X(tt);for(let He=0;He<j.length;He+=1)j[He].l(tt);u=X(tt),c=z(tt,"TR",{});var It=Y(c);h=z(It,"TD",{class:!0,"data-svelte-h":!0}),se(h)!=="svelte-51zn7d"&&(h.textContent=d),m=X(It),g=z(It,"TD",{});var Ot=Y(g);y=ut(Ot,i[2]),Ot.forEach(M),It.forEach(M),p=X(tt),T=z(tt,"TR",{});var Nt=Y(T);C=z(Nt,"TD",{class:!0,"data-svelte-h":!0}),se(C)!=="svelte-tchboe"&&(C.textContent=b),D=X(Nt),V=z(Nt,"TD",{});var ye=Y(V);O=ut(ye,k),ye.forEach(M),Nt.forEach(M),I=X(tt),E=z(tt,"TR",{});var tn=Y(E);v=z(tn,"TD",{class:!0,"data-svelte-h":!0}),se(v)!=="svelte-22n87w"&&(v.textContent=R),P=X(tn),S=z(tn,"TD",{});var we=Y(S);A=ut(we,i[4]),we.forEach(M),tn.forEach(M),tt.forEach(M),st=X(H),rt=z(H,"DIV",{class:!0});var Xt=Y(rt);vt(ht.$$.fragment,Xt),at=X(Xt),vt(dt.$$.fragment,Xt),Xt.forEach(M),this.h()},h(){G(t,"class","font-bold text-2xl mb-4"),G(h,"class","font-bold"),G(C,"class","font-bold pr-4"),G(v,"class","font-bold pr-4"),G(r,"class","mb-4"),G(rt,"class","flex gap-x-2 justify-center")},m(H,tt){q(H,t,tt),q(H,n,tt),q(H,r,tt),F(r,s),F(r,l);for(let It=0;It<j.length;It+=1)j[It]&&j[It].m(r,null);F(r,u),F(r,c),F(c,h),F(c,m),F(c,g),F(g,y),F(r,p),F(r,T),F(T,C),F(T,D),F(T,V),F(V,O),F(r,I),F(r,E),F(E,v),F(E,P),F(E,S),F(S,A),q(H,st,tt),q(H,rt,tt),Tt(ht,rt,null),F(rt,at),Tt(dt,rt,null),xt=!0},p(H,tt){if(tt&3){zt=fn(H[1]);let Nt;for(Nt=0;Nt<zt.length;Nt+=1){const ye=mc(H,zt,Nt);j[Nt]?j[Nt].p(ye,tt):(j[Nt]=pc(ye),j[Nt].c(),j[Nt].m(r,u))}for(;Nt<j.length;Nt+=1)j[Nt].d(1);j.length=zt.length}(!xt||tt&4)&&Ft(y,H[2]),(!xt||tt&8)&&k!==(k=H[3].toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"")&&Ft(O,k),(!xt||tt&16)&&Ft(A,H[4]);const It={};tt&65536&&(It.$$scope={dirty:tt,ctx:H}),ht.$set(It);const Ot={};tt&65536&&(Ot.$$scope={dirty:tt,ctx:H}),dt.$set(Ot)},i(H){xt||(K(ht.$$.fragment,H),K(dt.$$.fragment,H),xt=!0)},o(H){Z(ht.$$.fragment,H),Z(dt.$$.fragment,H),xt=!1},d(H){H&&(M(t),M(n),M(r),M(st),M(rt)),ts(j,H),Et(ht),Et(dt)}}}function gc(i){let t,e;return t=new vp({props:{averages:i[1]}}),{c(){yt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,r){Tt(t,n,r),e=!0},p(n,r){const s={};r&2&&(s.averages=n[1]),t.$set(s)},i(n){e||(K(t.$$.fragment,n),e=!0)},o(n){Z(t.$$.fragment,n),e=!1},d(n){Et(t,n)}}}function bp(i){let t,e,n,r;t=new Jr({props:{class:"items-start",$$slots:{default:[Ap]},$$scope:{ctx:i}}});let s=i[5]&&gc(i);return{c(){yt(t.$$.fragment),e=Q(),s&&s.c(),n=Ve()},l(o){vt(t.$$.fragment,o),e=X(o),s&&s.l(o),n=Ve()},m(o,l){Tt(t,o,l),q(o,e,l),s&&s.m(o,l),q(o,n,l),r=!0},p(o,[l]){const u={};l&65599&&(u.$$scope={dirty:l,ctx:o}),t.$set(u),o[5]?s?(s.p(o,l),l&32&&K(s,1)):(s=gc(o),s.c(),K(s,1),s.m(n.parentNode,n)):s&&(wn(),Z(s,1,1,()=>{s=null}),In())},i(o){r||(K(t.$$.fragment,o),K(s),r=!0)},o(o){Z(t.$$.fragment,o),Z(s),r=!1},d(o){o&&(M(e),M(n)),Et(t,o),s&&s.d(o)}}}function Rp(i,t,e){let n,r,s;Re(i,fr,T=>e(6,n=T)),Re(i,zs,T=>e(0,r=T)),Re(i,$s,T=>e(5,s=T));let o=[],l=0,u=0,c=0,h=[];const d=()=>{let T=[],C=n.length;n.forEach(b=>{b.values.forEach((D,V)=>{T[V]||(T[V]=0),T[V]+=D})}),e(1,o=T.map(b=>b/C))},m=()=>{e(2,l=r.reduce((T,C,b)=>T+xi(o[b]??0,C),0)),e(3,u=r.reduce((T,C,b)=>T+Bs(o[b]??0,C),0)),e(4,c=r.reduce((T,C,b)=>T+Us(o[b]??0,C),0))},g=()=>{h=[],n.forEach(T=>{h.push(T)})},y=()=>{nn.set(3)},p=()=>$s.set(!s);return i.$$.update=()=>{i.$$.dirty&65&&r.length&&n.length&&(d(),m(),g())},[r,o,l,u,c,s,n,y,p]}class Pp extends qe{constructor(t){super(),Ge(this,t,Rp,bp,xe,{})}}const Cp=""+new URL("../assets/bob-logo.ugDKnZ_j.png",import.meta.url).href;var yc={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef=function(i){const t=[];let e=0;for(let n=0;n<i.length;n++){let r=i.charCodeAt(n);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(i.charCodeAt(++n)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},Sp=function(i){const t=[];let e=0,n=0;for(;e<i.length;){const r=i[e++];if(r<128)t[n++]=String.fromCharCode(r);else if(r>191&&r<224){const s=i[e++];t[n++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=i[e++],o=i[e++],l=i[e++],u=((r&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;t[n++]=String.fromCharCode(55296+(u>>10)),t[n++]=String.fromCharCode(56320+(u&1023))}else{const s=i[e++],o=i[e++];t[n++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},wf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<i.length;r+=3){const s=i[r],o=r+1<i.length,l=o?i[r+1]:0,u=r+2<i.length,c=u?i[r+2]:0,h=s>>2,d=(s&3)<<4|l>>4;let m=(l&15)<<2|c>>6,g=c&63;u||(g=64,o||(m=64)),n.push(e[h],e[d],e[m],e[g])}return n.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(Ef(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):Sp(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<i.length;){const s=e[i.charAt(r++)],l=r<i.length?e[i.charAt(r)]:0;++r;const c=r<i.length?e[i.charAt(r)]:64;++r;const d=r<i.length?e[i.charAt(r)]:64;if(++r,s==null||l==null||c==null||d==null)throw new Dp;const m=s<<2|l>>4;if(n.push(m),c!==64){const g=l<<4&240|c>>2;if(n.push(g),d!==64){const y=c<<6&192|d;n.push(y)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class Dp extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Vp=function(i){const t=Ef(i);return wf.encodeByteArray(t,!0)},Xs=function(i){return Vp(i).replace(/\./g,"")},kp=function(i){try{return wf.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op=()=>xp().__FIREBASE_DEFAULTS__,Np=()=>{if(typeof process>"u"||typeof yc>"u")return;const i=yc.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Mp=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&kp(i[1]);return t&&JSON.parse(t)},dl=()=>{try{return Op()||Np()||Mp()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Fp=i=>{var t,e;return(e=(t=dl())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[i]},Lp=i=>{const t=Fp(i);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),n]:[t.substring(0,e),n]},If=()=>{var i;return(i=dl())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},n=t||"demo-project",r=i.iat||0,s=i.sub||i.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Xs(JSON.stringify(e)),Xs(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zp(){var i;const t=(i=dl())===null||i===void 0?void 0:i.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function jp(){return!zp()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qp(){try{return typeof indexedDB=="object"}catch{return!1}}function Gp(){return new Promise((i,t)=>{try{let e=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(n),i(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="FirebaseError";class Zr extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name=Hp,Object.setPrototypeOf(this,Zr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Af.prototype.create)}}class Af{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?Kp(s,n):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new Zr(r,l,n)}}function Kp(i,t){return i.replace(Wp,(e,n)=>{const r=t[n];return r!=null?String(r):`<${n}?>`})}const Wp=/\{\$([^}]+)}/g;function Pa(i,t){if(i===t)return!0;const e=Object.keys(i),n=Object.keys(t);for(const r of e){if(!n.includes(r))return!1;const s=i[r],o=t[r];if(vc(s)&&vc(o)){if(!Pa(s,o))return!1}else if(s!==o)return!1}for(const r of n)if(!e.includes(r))return!1;return!0}function vc(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rn(i){return i&&i._delegate?i._delegate:i}class Ui{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const n=new $p;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Yp(t))try{this.getOrInitializeService({instanceIdentifier:rr})}catch{}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const s=this.getOrInitializeService({instanceIdentifier:r});n.resolve(s)}catch{}}}}clearInstance(t=rr){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=rr){return this.instances.has(t)}getOptions(t=rr){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&o.resolve(r)}return r}onInit(t,e){var n;const r=this.normalizeInstanceIdentifier(e),s=(n=this.onInitCallbacks.get(r))!==null&&n!==void 0?n:new Set;s.add(t),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Xp(t),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=rr){return this.component?this.component.multipleInstances?t:rr:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Xp(i){return i===rr?void 0:i}function Yp(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new Qp(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(pt||(pt={}));const Zp={debug:pt.DEBUG,verbose:pt.VERBOSE,info:pt.INFO,warn:pt.WARN,error:pt.ERROR,silent:pt.SILENT},tg=pt.INFO,eg={[pt.DEBUG]:"log",[pt.VERBOSE]:"log",[pt.INFO]:"info",[pt.WARN]:"warn",[pt.ERROR]:"error"},ng=(i,t,...e)=>{if(t<i.logLevel)return;const n=new Date().toISOString(),r=eg[t];if(r)console[r](`[${n}]  ${i.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class bf{constructor(t){this.name=t,this._logLevel=tg,this._logHandler=ng,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in pt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Zp[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,pt.DEBUG,...t),this._logHandler(this,pt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,pt.VERBOSE,...t),this._logHandler(this,pt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,pt.INFO,...t),this._logHandler(this,pt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,pt.WARN,...t),this._logHandler(this,pt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,pt.ERROR,...t),this._logHandler(this,pt.ERROR,...t)}}const rg=(i,t)=>t.some(e=>i instanceof e);let Tc,Ec;function ig(){return Tc||(Tc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sg(){return Ec||(Ec=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Rf=new WeakMap,Ca=new WeakMap,Pf=new WeakMap,na=new WeakMap,_l=new WeakMap;function og(i){const t=new Promise((e,n)=>{const r=()=>{i.removeEventListener("success",s),i.removeEventListener("error",o)},s=()=>{e($n(i.result)),r()},o=()=>{n(i.error),r()};i.addEventListener("success",s),i.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&Rf.set(e,i)}).catch(()=>{}),_l.set(t,i),t}function ag(i){if(Ca.has(i))return;const t=new Promise((e,n)=>{const r=()=>{i.removeEventListener("complete",s),i.removeEventListener("error",o),i.removeEventListener("abort",o)},s=()=>{e(),r()},o=()=>{n(i.error||new DOMException("AbortError","AbortError")),r()};i.addEventListener("complete",s),i.addEventListener("error",o),i.addEventListener("abort",o)});Ca.set(i,t)}let Sa={get(i,t,e){if(i instanceof IDBTransaction){if(t==="done")return Ca.get(i);if(t==="objectStoreNames")return i.objectStoreNames||Pf.get(i);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return $n(i[t])},set(i,t,e){return i[t]=e,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function lg(i){Sa=i(Sa)}function ug(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const n=i.call(ra(this),t,...e);return Pf.set(n,t.sort?t.sort():[t]),$n(n)}:sg().includes(i)?function(...t){return i.apply(ra(this),t),$n(Rf.get(this))}:function(...t){return $n(i.apply(ra(this),t))}}function cg(i){return typeof i=="function"?ug(i):(i instanceof IDBTransaction&&ag(i),rg(i,ig())?new Proxy(i,Sa):i)}function $n(i){if(i instanceof IDBRequest)return og(i);if(na.has(i))return na.get(i);const t=cg(i);return t!==i&&(na.set(i,t),_l.set(t,i)),t}const ra=i=>_l.get(i);function hg(i,t,{blocked:e,upgrade:n,blocking:r,terminated:s}={}){const o=indexedDB.open(i,t),l=$n(o);return n&&o.addEventListener("upgradeneeded",u=>{n($n(o.result),u.oldVersion,u.newVersion,$n(o.transaction),u)}),e&&o.addEventListener("blocked",u=>e(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const fg=["get","getKey","getAll","getAllKeys","count"],dg=["put","add","delete","clear"],ia=new Map;function wc(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(ia.get(t))return ia.get(t);const e=t.replace(/FromIndex$/,""),n=t!==e,r=dg.includes(e);if(!(e in(n?IDBIndex:IDBObjectStore).prototype)||!(r||fg.includes(e)))return;const s=async function(o,...l){const u=this.transaction(o,r?"readwrite":"readonly");let c=u.store;return n&&(c=c.index(l.shift())),(await Promise.all([c[e](...l),r&&u.done]))[0]};return ia.set(t,s),s}lg(i=>({...i,get:(t,e,n)=>wc(t,e)||i.get(t,e,n),has:(t,e)=>!!wc(t,e)||i.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(mg(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function mg(i){const t=i.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Da="@firebase/app",Ic="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr=new bf("@firebase/app"),pg="@firebase/app-compat",gg="@firebase/analytics-compat",yg="@firebase/analytics",vg="@firebase/app-check-compat",Tg="@firebase/app-check",Eg="@firebase/auth",wg="@firebase/auth-compat",Ig="@firebase/database",Ag="@firebase/database-compat",bg="@firebase/functions",Rg="@firebase/functions-compat",Pg="@firebase/installations",Cg="@firebase/installations-compat",Sg="@firebase/messaging",Dg="@firebase/messaging-compat",Vg="@firebase/performance",kg="@firebase/performance-compat",xg="@firebase/remote-config",Og="@firebase/remote-config-compat",Ng="@firebase/storage",Mg="@firebase/storage-compat",Fg="@firebase/firestore",Lg="@firebase/vertexai-preview",$g="@firebase/firestore-compat",Bg="firebase",Ug="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va="[DEFAULT]",zg={[Da]:"fire-core",[pg]:"fire-core-compat",[yg]:"fire-analytics",[gg]:"fire-analytics-compat",[Tg]:"fire-app-check",[vg]:"fire-app-check-compat",[Eg]:"fire-auth",[wg]:"fire-auth-compat",[Ig]:"fire-rtdb",[Ag]:"fire-rtdb-compat",[bg]:"fire-fn",[Rg]:"fire-fn-compat",[Pg]:"fire-iid",[Cg]:"fire-iid-compat",[Sg]:"fire-fcm",[Dg]:"fire-fcm-compat",[Vg]:"fire-perf",[kg]:"fire-perf-compat",[xg]:"fire-rc",[Og]:"fire-rc-compat",[Ng]:"fire-gcs",[Mg]:"fire-gcs-compat",[Fg]:"fire-fst",[$g]:"fire-fst-compat",[Lg]:"fire-vertex","fire-js":"fire-js",[Bg]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=new Map,jg=new Map,ka=new Map;function Ac(i,t){try{i.container.addComponent(t)}catch(e){mr.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,e)}}function Js(i){const t=i.name;if(ka.has(t))return mr.debug(`There were multiple attempts to register component ${t}.`),!1;ka.set(t,i);for(const e of Ys.values())Ac(e,i);for(const e of jg.values())Ac(e,i);return!0}function qg(i,t){const e=i.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),i.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bn=new Af("app","Firebase",Gg);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ui("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Bn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kg=Ug;function Cf(i,t={}){let e=i;typeof t!="object"&&(t={name:t});const n=Object.assign({name:Va,automaticDataCollectionEnabled:!1},t),r=n.name;if(typeof r!="string"||!r)throw Bn.create("bad-app-name",{appName:String(r)});if(e||(e=If()),!e)throw Bn.create("no-options");const s=Ys.get(r);if(s){if(Pa(e,s.options)&&Pa(n,s.config))return s;throw Bn.create("duplicate-app",{appName:r})}const o=new Jp(r);for(const u of ka.values())o.addComponent(u);const l=new Hg(e,n,o);return Ys.set(r,l),l}function Wg(i=Va){const t=Ys.get(i);if(!t&&i===Va&&If())return Cf();if(!t)throw Bn.create("no-app",{appName:i});return t}function Lr(i,t,e){var n;let r=(n=zg[i])!==null&&n!==void 0?n:i;e&&(r+=`-${e}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const l=[`Unable to register library "${r}" with version "${t}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),mr.warn(l.join(" "));return}Js(new Ui(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qg="firebase-heartbeat-database",Xg=1,zi="firebase-heartbeat-store";let sa=null;function Sf(){return sa||(sa=hg(Qg,Xg,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(zi)}catch(e){console.warn(e)}}}}).catch(i=>{throw Bn.create("idb-open",{originalErrorMessage:i.message})})),sa}async function Yg(i){try{const e=(await Sf()).transaction(zi),n=await e.objectStore(zi).get(Df(i));return await e.done,n}catch(t){if(t instanceof Zr)mr.warn(t.message);else{const e=Bn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});mr.warn(e.message)}}}async function bc(i,t){try{const n=(await Sf()).transaction(zi,"readwrite");await n.objectStore(zi).put(t,Df(i)),await n.done}catch(e){if(e instanceof Zr)mr.warn(e.message);else{const n=Bn.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});mr.warn(n.message)}}}function Df(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg=1024,Zg=30*24*60*60*1e3;class ty{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new ny(e),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,e;const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Rc();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=Zg}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Rc(),{heartbeatsToSend:n,unsentEntries:r}=ey(this._heartbeatsCache.heartbeats),s=Xs(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Rc(){return new Date().toISOString().substring(0,10)}function ey(i,t=Jg){const e=[];let n=i.slice();for(const r of i){const s=e.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Pc(e)>t){s.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),Pc(e)>t){e.pop();break}n=n.slice(1)}return{heartbeatsToSend:e,unsentEntries:n}}class ny{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qp()?Gp().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await Yg(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return bc(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return bc(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function Pc(i){return Xs(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ry(i){Js(new Ui("platform-logger",t=>new _g(t),"PRIVATE")),Js(new Ui("heartbeat",t=>new ty(t),"PRIVATE")),Lr(Da,Ic,i),Lr(Da,Ic,"esm2017"),Lr("fire-js","")}ry("");var iy="firebase",sy="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lr(iy,sy,"app");var Cc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hr,Vf;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,E){function v(){}v.prototype=E.prototype,I.D=E.prototype,I.prototype=new v,I.prototype.constructor=I,I.C=function(R,P,S){for(var A=Array(arguments.length-2),st=2;st<arguments.length;st++)A[st-2]=arguments[st];return E.prototype[P].apply(R,A)}}function e(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,e),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,E,v){v||(v=0);var R=Array(16);if(typeof E=="string")for(var P=0;16>P;++P)R[P]=E.charCodeAt(v++)|E.charCodeAt(v++)<<8|E.charCodeAt(v++)<<16|E.charCodeAt(v++)<<24;else for(P=0;16>P;++P)R[P]=E[v++]|E[v++]<<8|E[v++]<<16|E[v++]<<24;E=I.g[0],v=I.g[1],P=I.g[2];var S=I.g[3],A=E+(S^v&(P^S))+R[0]+3614090360&4294967295;E=v+(A<<7&4294967295|A>>>25),A=S+(P^E&(v^P))+R[1]+3905402710&4294967295,S=E+(A<<12&4294967295|A>>>20),A=P+(v^S&(E^v))+R[2]+606105819&4294967295,P=S+(A<<17&4294967295|A>>>15),A=v+(E^P&(S^E))+R[3]+3250441966&4294967295,v=P+(A<<22&4294967295|A>>>10),A=E+(S^v&(P^S))+R[4]+4118548399&4294967295,E=v+(A<<7&4294967295|A>>>25),A=S+(P^E&(v^P))+R[5]+1200080426&4294967295,S=E+(A<<12&4294967295|A>>>20),A=P+(v^S&(E^v))+R[6]+2821735955&4294967295,P=S+(A<<17&4294967295|A>>>15),A=v+(E^P&(S^E))+R[7]+4249261313&4294967295,v=P+(A<<22&4294967295|A>>>10),A=E+(S^v&(P^S))+R[8]+1770035416&4294967295,E=v+(A<<7&4294967295|A>>>25),A=S+(P^E&(v^P))+R[9]+2336552879&4294967295,S=E+(A<<12&4294967295|A>>>20),A=P+(v^S&(E^v))+R[10]+4294925233&4294967295,P=S+(A<<17&4294967295|A>>>15),A=v+(E^P&(S^E))+R[11]+2304563134&4294967295,v=P+(A<<22&4294967295|A>>>10),A=E+(S^v&(P^S))+R[12]+1804603682&4294967295,E=v+(A<<7&4294967295|A>>>25),A=S+(P^E&(v^P))+R[13]+4254626195&4294967295,S=E+(A<<12&4294967295|A>>>20),A=P+(v^S&(E^v))+R[14]+2792965006&4294967295,P=S+(A<<17&4294967295|A>>>15),A=v+(E^P&(S^E))+R[15]+1236535329&4294967295,v=P+(A<<22&4294967295|A>>>10),A=E+(P^S&(v^P))+R[1]+4129170786&4294967295,E=v+(A<<5&4294967295|A>>>27),A=S+(v^P&(E^v))+R[6]+3225465664&4294967295,S=E+(A<<9&4294967295|A>>>23),A=P+(E^v&(S^E))+R[11]+643717713&4294967295,P=S+(A<<14&4294967295|A>>>18),A=v+(S^E&(P^S))+R[0]+3921069994&4294967295,v=P+(A<<20&4294967295|A>>>12),A=E+(P^S&(v^P))+R[5]+3593408605&4294967295,E=v+(A<<5&4294967295|A>>>27),A=S+(v^P&(E^v))+R[10]+38016083&4294967295,S=E+(A<<9&4294967295|A>>>23),A=P+(E^v&(S^E))+R[15]+3634488961&4294967295,P=S+(A<<14&4294967295|A>>>18),A=v+(S^E&(P^S))+R[4]+3889429448&4294967295,v=P+(A<<20&4294967295|A>>>12),A=E+(P^S&(v^P))+R[9]+568446438&4294967295,E=v+(A<<5&4294967295|A>>>27),A=S+(v^P&(E^v))+R[14]+3275163606&4294967295,S=E+(A<<9&4294967295|A>>>23),A=P+(E^v&(S^E))+R[3]+4107603335&4294967295,P=S+(A<<14&4294967295|A>>>18),A=v+(S^E&(P^S))+R[8]+1163531501&4294967295,v=P+(A<<20&4294967295|A>>>12),A=E+(P^S&(v^P))+R[13]+2850285829&4294967295,E=v+(A<<5&4294967295|A>>>27),A=S+(v^P&(E^v))+R[2]+4243563512&4294967295,S=E+(A<<9&4294967295|A>>>23),A=P+(E^v&(S^E))+R[7]+1735328473&4294967295,P=S+(A<<14&4294967295|A>>>18),A=v+(S^E&(P^S))+R[12]+2368359562&4294967295,v=P+(A<<20&4294967295|A>>>12),A=E+(v^P^S)+R[5]+4294588738&4294967295,E=v+(A<<4&4294967295|A>>>28),A=S+(E^v^P)+R[8]+2272392833&4294967295,S=E+(A<<11&4294967295|A>>>21),A=P+(S^E^v)+R[11]+1839030562&4294967295,P=S+(A<<16&4294967295|A>>>16),A=v+(P^S^E)+R[14]+4259657740&4294967295,v=P+(A<<23&4294967295|A>>>9),A=E+(v^P^S)+R[1]+2763975236&4294967295,E=v+(A<<4&4294967295|A>>>28),A=S+(E^v^P)+R[4]+1272893353&4294967295,S=E+(A<<11&4294967295|A>>>21),A=P+(S^E^v)+R[7]+4139469664&4294967295,P=S+(A<<16&4294967295|A>>>16),A=v+(P^S^E)+R[10]+3200236656&4294967295,v=P+(A<<23&4294967295|A>>>9),A=E+(v^P^S)+R[13]+681279174&4294967295,E=v+(A<<4&4294967295|A>>>28),A=S+(E^v^P)+R[0]+3936430074&4294967295,S=E+(A<<11&4294967295|A>>>21),A=P+(S^E^v)+R[3]+3572445317&4294967295,P=S+(A<<16&4294967295|A>>>16),A=v+(P^S^E)+R[6]+76029189&4294967295,v=P+(A<<23&4294967295|A>>>9),A=E+(v^P^S)+R[9]+3654602809&4294967295,E=v+(A<<4&4294967295|A>>>28),A=S+(E^v^P)+R[12]+3873151461&4294967295,S=E+(A<<11&4294967295|A>>>21),A=P+(S^E^v)+R[15]+530742520&4294967295,P=S+(A<<16&4294967295|A>>>16),A=v+(P^S^E)+R[2]+3299628645&4294967295,v=P+(A<<23&4294967295|A>>>9),A=E+(P^(v|~S))+R[0]+4096336452&4294967295,E=v+(A<<6&4294967295|A>>>26),A=S+(v^(E|~P))+R[7]+1126891415&4294967295,S=E+(A<<10&4294967295|A>>>22),A=P+(E^(S|~v))+R[14]+2878612391&4294967295,P=S+(A<<15&4294967295|A>>>17),A=v+(S^(P|~E))+R[5]+4237533241&4294967295,v=P+(A<<21&4294967295|A>>>11),A=E+(P^(v|~S))+R[12]+1700485571&4294967295,E=v+(A<<6&4294967295|A>>>26),A=S+(v^(E|~P))+R[3]+2399980690&4294967295,S=E+(A<<10&4294967295|A>>>22),A=P+(E^(S|~v))+R[10]+4293915773&4294967295,P=S+(A<<15&4294967295|A>>>17),A=v+(S^(P|~E))+R[1]+2240044497&4294967295,v=P+(A<<21&4294967295|A>>>11),A=E+(P^(v|~S))+R[8]+1873313359&4294967295,E=v+(A<<6&4294967295|A>>>26),A=S+(v^(E|~P))+R[15]+4264355552&4294967295,S=E+(A<<10&4294967295|A>>>22),A=P+(E^(S|~v))+R[6]+2734768916&4294967295,P=S+(A<<15&4294967295|A>>>17),A=v+(S^(P|~E))+R[13]+1309151649&4294967295,v=P+(A<<21&4294967295|A>>>11),A=E+(P^(v|~S))+R[4]+4149444226&4294967295,E=v+(A<<6&4294967295|A>>>26),A=S+(v^(E|~P))+R[11]+3174756917&4294967295,S=E+(A<<10&4294967295|A>>>22),A=P+(E^(S|~v))+R[2]+718787259&4294967295,P=S+(A<<15&4294967295|A>>>17),A=v+(S^(P|~E))+R[9]+3951481745&4294967295,I.g[0]=I.g[0]+E&4294967295,I.g[1]=I.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,I.g[2]=I.g[2]+P&4294967295,I.g[3]=I.g[3]+S&4294967295}n.prototype.u=function(I,E){E===void 0&&(E=I.length);for(var v=E-this.blockSize,R=this.B,P=this.h,S=0;S<E;){if(P==0)for(;S<=v;)r(this,I,S),S+=this.blockSize;if(typeof I=="string"){for(;S<E;)if(R[P++]=I.charCodeAt(S++),P==this.blockSize){r(this,R),P=0;break}}else for(;S<E;)if(R[P++]=I[S++],P==this.blockSize){r(this,R),P=0;break}}this.h=P,this.o+=E},n.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var E=1;E<I.length-8;++E)I[E]=0;var v=8*this.o;for(E=I.length-8;E<I.length;++E)I[E]=v&255,v/=256;for(this.u(I),I=Array(16),E=v=0;4>E;++E)for(var R=0;32>R;R+=8)I[v++]=this.g[E]>>>R&255;return I};function s(I,E){var v=l;return Object.prototype.hasOwnProperty.call(v,I)?v[I]:v[I]=E(I)}function o(I,E){this.h=E;for(var v=[],R=!0,P=I.length-1;0<=P;P--){var S=I[P]|0;R&&S==E||(v[P]=S,R=!1)}this.g=v}var l={};function u(I){return-128<=I&&128>I?s(I,function(E){return new o([E|0],0>E?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return T(c(-I));for(var E=[],v=1,R=0;I>=v;R++)E[R]=I/v|0,v*=4294967296;return new o(E,0)}function h(I,E){if(I.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(I.charAt(0)=="-")return T(h(I.substring(1),E));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=c(Math.pow(E,8)),R=d,P=0;P<I.length;P+=8){var S=Math.min(8,I.length-P),A=parseInt(I.substring(P,P+S),E);8>S?(S=c(Math.pow(E,S)),R=R.j(S).add(c(A))):(R=R.j(v),R=R.add(c(A)))}return R}var d=u(0),m=u(1),g=u(16777216);i=o.prototype,i.m=function(){if(p(this))return-T(this).m();for(var I=0,E=1,v=0;v<this.g.length;v++){var R=this.i(v);I+=(0<=R?R:4294967296+R)*E,E*=4294967296}return I},i.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(y(this))return"0";if(p(this))return"-"+T(this).toString(I);for(var E=c(Math.pow(I,6)),v=this,R="";;){var P=V(v,E).g;v=C(v,P.j(E));var S=((0<v.g.length?v.g[0]:v.h)>>>0).toString(I);if(v=P,y(v))return S+R;for(;6>S.length;)S="0"+S;R=S+R}},i.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function y(I){if(I.h!=0)return!1;for(var E=0;E<I.g.length;E++)if(I.g[E]!=0)return!1;return!0}function p(I){return I.h==-1}i.l=function(I){return I=C(this,I),p(I)?-1:y(I)?0:1};function T(I){for(var E=I.g.length,v=[],R=0;R<E;R++)v[R]=~I.g[R];return new o(v,~I.h).add(m)}i.abs=function(){return p(this)?T(this):this},i.add=function(I){for(var E=Math.max(this.g.length,I.g.length),v=[],R=0,P=0;P<=E;P++){var S=R+(this.i(P)&65535)+(I.i(P)&65535),A=(S>>>16)+(this.i(P)>>>16)+(I.i(P)>>>16);R=A>>>16,S&=65535,A&=65535,v[P]=A<<16|S}return new o(v,v[v.length-1]&-2147483648?-1:0)};function C(I,E){return I.add(T(E))}i.j=function(I){if(y(this)||y(I))return d;if(p(this))return p(I)?T(this).j(T(I)):T(T(this).j(I));if(p(I))return T(this.j(T(I)));if(0>this.l(g)&&0>I.l(g))return c(this.m()*I.m());for(var E=this.g.length+I.g.length,v=[],R=0;R<2*E;R++)v[R]=0;for(R=0;R<this.g.length;R++)for(var P=0;P<I.g.length;P++){var S=this.i(R)>>>16,A=this.i(R)&65535,st=I.i(P)>>>16,rt=I.i(P)&65535;v[2*R+2*P]+=A*rt,b(v,2*R+2*P),v[2*R+2*P+1]+=S*rt,b(v,2*R+2*P+1),v[2*R+2*P+1]+=A*st,b(v,2*R+2*P+1),v[2*R+2*P+2]+=S*st,b(v,2*R+2*P+2)}for(R=0;R<E;R++)v[R]=v[2*R+1]<<16|v[2*R];for(R=E;R<2*E;R++)v[R]=0;return new o(v,0)};function b(I,E){for(;(I[E]&65535)!=I[E];)I[E+1]+=I[E]>>>16,I[E]&=65535,E++}function D(I,E){this.g=I,this.h=E}function V(I,E){if(y(E))throw Error("division by zero");if(y(I))return new D(d,d);if(p(I))return E=V(T(I),E),new D(T(E.g),T(E.h));if(p(E))return E=V(I,T(E)),new D(T(E.g),E.h);if(30<I.g.length){if(p(I)||p(E))throw Error("slowDivide_ only works with positive integers.");for(var v=m,R=E;0>=R.l(I);)v=k(v),R=k(R);var P=O(v,1),S=O(R,1);for(R=O(R,2),v=O(v,2);!y(R);){var A=S.add(R);0>=A.l(I)&&(P=P.add(v),S=A),R=O(R,1),v=O(v,1)}return E=C(I,P.j(E)),new D(P,E)}for(P=d;0<=I.l(E);){for(v=Math.max(1,Math.floor(I.m()/E.m())),R=Math.ceil(Math.log(v)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),S=c(v),A=S.j(E);p(A)||0<A.l(I);)v-=R,S=c(v),A=S.j(E);y(S)&&(S=m),P=P.add(S),I=C(I,A)}return new D(P,I)}i.A=function(I){return V(this,I).h},i.and=function(I){for(var E=Math.max(this.g.length,I.g.length),v=[],R=0;R<E;R++)v[R]=this.i(R)&I.i(R);return new o(v,this.h&I.h)},i.or=function(I){for(var E=Math.max(this.g.length,I.g.length),v=[],R=0;R<E;R++)v[R]=this.i(R)|I.i(R);return new o(v,this.h|I.h)},i.xor=function(I){for(var E=Math.max(this.g.length,I.g.length),v=[],R=0;R<E;R++)v[R]=this.i(R)^I.i(R);return new o(v,this.h^I.h)};function k(I){for(var E=I.g.length+1,v=[],R=0;R<E;R++)v[R]=I.i(R)<<1|I.i(R-1)>>>31;return new o(v,I.h)}function O(I,E){var v=E>>5;E%=32;for(var R=I.g.length-v,P=[],S=0;S<R;S++)P[S]=0<E?I.i(S+v)>>>E|I.i(S+v+1)<<32-E:I.i(S+v);return new o(P,I.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,Vf=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,hr=o}).apply(typeof Cc<"u"?Cc:typeof self<"u"?self:typeof window<"u"?window:{});var Ps=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kf,xf,Ei,Of,Os,xa,Nf,Mf,Ff;(function(){var i,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,f,_){return a==Array.prototype||a==Object.prototype||(a[f]=_.value),a};function e(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ps=="object"&&Ps];for(var f=0;f<a.length;++f){var _=a[f];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var n=e(this);function r(a,f){if(f)t:{var _=n;a=a.split(".");for(var w=0;w<a.length-1;w++){var x=a[w];if(!(x in _))break t;_=_[x]}a=a[a.length-1],w=_[a],f=f(w),f!=w&&f!=null&&t(_,a,{configurable:!0,writable:!0,value:f})}}function s(a,f){a instanceof String&&(a+="");var _=0,w=!1,x={next:function(){if(!w&&_<a.length){var N=_++;return{value:f(N,a[N]),done:!1}}return w=!0,{done:!0,value:void 0}}};return x[Symbol.iterator]=function(){return x},x}r("Array.prototype.values",function(a){return a||function(){return s(this,function(f,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var f=typeof a;return f=f!="object"?f:a?Array.isArray(a)?"array":f:"null",f=="array"||f=="object"&&typeof a.length=="number"}function c(a){var f=typeof a;return f=="object"&&a!=null||f=="function"}function h(a,f,_){return a.call.apply(a.bind,arguments)}function d(a,f,_){if(!a)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(x,w),a.apply(f,x)}}return function(){return a.apply(f,arguments)}}function m(a,f,_){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,m.apply(null,arguments)}function g(a,f){var _=Array.prototype.slice.call(arguments,1);return function(){var w=_.slice();return w.push.apply(w,arguments),a.apply(this,w)}}function y(a,f){function _(){}_.prototype=f.prototype,a.aa=f.prototype,a.prototype=new _,a.prototype.constructor=a,a.Qb=function(w,x,N){for(var B=Array(arguments.length-2),Rt=2;Rt<arguments.length;Rt++)B[Rt-2]=arguments[Rt];return f.prototype[x].apply(w,B)}}function p(a){const f=a.length;if(0<f){const _=Array(f);for(let w=0;w<f;w++)_[w]=a[w];return _}return[]}function T(a,f){for(let _=1;_<arguments.length;_++){const w=arguments[_];if(u(w)){const x=a.length||0,N=w.length||0;a.length=x+N;for(let B=0;B<N;B++)a[x+B]=w[B]}else a.push(w)}}class C{constructor(f,_){this.i=f,this.j=_,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function b(a){return/^[\s\xa0]*$/.test(a)}function D(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function V(a){return V[" "](a),a}V[" "]=function(){};var k=D().indexOf("Gecko")!=-1&&!(D().toLowerCase().indexOf("webkit")!=-1&&D().indexOf("Edge")==-1)&&!(D().indexOf("Trident")!=-1||D().indexOf("MSIE")!=-1)&&D().indexOf("Edge")==-1;function O(a,f,_){for(const w in a)f.call(_,a[w],w,a)}function I(a,f){for(const _ in a)f.call(void 0,a[_],_,a)}function E(a){const f={};for(const _ in a)f[_]=a[_];return f}const v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(a,f){let _,w;for(let x=1;x<arguments.length;x++){w=arguments[x];for(_ in w)a[_]=w[_];for(let N=0;N<v.length;N++)_=v[N],Object.prototype.hasOwnProperty.call(w,_)&&(a[_]=w[_])}}function P(a){var f=1;a=a.split(":");const _=[];for(;0<f&&a.length;)_.push(a.shift()),f--;return a.length&&_.push(a.join(":")),_}function S(a){l.setTimeout(()=>{throw a},0)}function A(){var a=xt;let f=null;return a.g&&(f=a.g,a.g=a.g.next,a.g||(a.h=null),f.next=null),f}class st{constructor(){this.h=this.g=null}add(f,_){const w=rt.get();w.set(f,_),this.h?this.h.next=w:this.g=w,this.h=w}}var rt=new C(()=>new ht,a=>a.reset());class ht{constructor(){this.next=this.g=this.h=null}set(f,_){this.h=f,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let at,dt=!1,xt=new st,zt=()=>{const a=l.Promise.resolve(void 0);at=()=>{a.then(j)}};var j=()=>{for(var a;a=A();){try{a.h.call(a.g)}catch(_){S(_)}var f=rt;f.j(a),100>f.h&&(f.h++,a.next=f.g,f.g=a)}dt=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function tt(a,f){this.type=a,this.g=this.target=f,this.defaultPrevented=!1}tt.prototype.h=function(){this.defaultPrevented=!0};var It=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const _=()=>{};l.addEventListener("test",_,f),l.removeEventListener("test",_,f)}catch{}return a}();function Ot(a,f){if(tt.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var _=this.type=a.type,w=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=f,f=a.relatedTarget){if(k){t:{try{V(f.nodeName);var x=!0;break t}catch{}x=!1}x||(f=null)}}else _=="mouseover"?f=a.fromElement:_=="mouseout"&&(f=a.toElement);this.relatedTarget=f,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Nt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Ot.aa.h.call(this)}}y(Ot,tt);var Nt={2:"touch",3:"pen",4:"mouse"};Ot.prototype.h=function(){Ot.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var ye="closure_listenable_"+(1e6*Math.random()|0),tn=0;function we(a,f,_,w,x){this.listener=a,this.proxy=null,this.src=f,this.type=_,this.capture=!!w,this.ha=x,this.key=++tn,this.da=this.fa=!1}function Xt(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function He(a){this.src=a,this.g={},this.h=0}He.prototype.add=function(a,f,_,w,x){var N=a.toString();a=this.g[N],a||(a=this.g[N]=[],this.h++);var B=Zt(a,f,w,x);return-1<B?(f=a[B],_||(f.fa=!1)):(f=new we(f,this.src,N,!!w,x),f.fa=_,a.push(f)),f};function Oe(a,f){var _=f.type;if(_ in a.g){var w=a.g[_],x=Array.prototype.indexOf.call(w,f,void 0),N;(N=0<=x)&&Array.prototype.splice.call(w,x,1),N&&(Xt(f),a.g[_].length==0&&(delete a.g[_],a.h--))}}function Zt(a,f,_,w){for(var x=0;x<a.length;++x){var N=a[x];if(!N.da&&N.listener==f&&N.capture==!!_&&N.ha==w)return x}return-1}var sn="closure_lm_"+(1e6*Math.random()|0),jt={};function nt(a,f,_,w,x){if(Array.isArray(f)){for(var N=0;N<f.length;N++)nt(a,f[N],_,w,x);return null}return _=Ar(_),a&&a[ye]?a.K(f,_,c(w)?!!w.capture:!!w,x):At(a,f,_,!1,w,x)}function At(a,f,_,w,x,N){if(!f)throw Error("Invalid event type");var B=c(x)?!!x.capture:!!x,Rt=Ir(a);if(Rt||(a[sn]=Rt=new He(a)),_=Rt.add(f,_,w,B,N),_.proxy)return _;if(w=Ie(),_.proxy=w,w.src=a,w.listener=_,a.addEventListener)It||(x=B),x===void 0&&(x=!1),a.addEventListener(f.toString(),w,x);else if(a.attachEvent)a.attachEvent(Cn(f.toString()),w);else if(a.addListener&&a.removeListener)a.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ie(){function a(_){return f.call(a.src,a.listener,_)}const f=hs;return a}function Ke(a,f,_,w,x){if(Array.isArray(f))for(var N=0;N<f.length;N++)Ke(a,f[N],_,w,x);else w=c(w)?!!w.capture:!!w,_=Ar(_),a&&a[ye]?(a=a.i,f=String(f).toString(),f in a.g&&(N=a.g[f],_=Zt(N,_,w,x),-1<_&&(Xt(N[_]),Array.prototype.splice.call(N,_,1),N.length==0&&(delete a.g[f],a.h--)))):a&&(a=Ir(a))&&(f=a.g[f.toString()],a=-1,f&&(a=Zt(f,_,w,x)),(_=-1<a?f[a]:null)&&bt(_))}function bt(a){if(typeof a!="number"&&a&&!a.da){var f=a.src;if(f&&f[ye])Oe(f.i,a);else{var _=a.type,w=a.proxy;f.removeEventListener?f.removeEventListener(_,w,a.capture):f.detachEvent?f.detachEvent(Cn(_),w):f.addListener&&f.removeListener&&f.removeListener(w),(_=Ir(f))?(Oe(_,a),_.h==0&&(_.src=null,f[sn]=null)):Xt(a)}}}function Cn(a){return a in jt?jt[a]:jt[a]="on"+a}function hs(a,f){if(a.da)a=!0;else{f=new Ot(f,this);var _=a.listener,w=a.ha||a.src;a.fa&&bt(a),a=_.call(w,f)}return a}function Ir(a){return a=a[sn],a instanceof He?a:null}var Ae="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ar(a){return typeof a=="function"?a:(a[Ae]||(a[Ae]=function(f){return a.handleEvent(f)}),a[Ae])}function Gt(){H.call(this),this.i=new He(this),this.M=this,this.F=null}y(Gt,H),Gt.prototype[ye]=!0,Gt.prototype.removeEventListener=function(a,f,_,w){Ke(this,a,f,_,w)};function Ht(a,f){var _,w=a.F;if(w)for(_=[];w;w=w.F)_.push(w);if(a=a.M,w=f.type||f,typeof f=="string")f=new tt(f,a);else if(f instanceof tt)f.target=f.target||a;else{var x=f;f=new tt(w,a),R(f,x)}if(x=!0,_)for(var N=_.length-1;0<=N;N--){var B=f.g=_[N];x=Sn(B,w,!0,f)&&x}if(B=f.g=a,x=Sn(B,w,!0,f)&&x,x=Sn(B,w,!1,f)&&x,_)for(N=0;N<_.length;N++)B=f.g=_[N],x=Sn(B,w,!1,f)&&x}Gt.prototype.N=function(){if(Gt.aa.N.call(this),this.i){var a=this.i,f;for(f in a.g){for(var _=a.g[f],w=0;w<_.length;w++)Xt(_[w]);delete a.g[f],a.h--}}this.F=null},Gt.prototype.K=function(a,f,_,w){return this.i.add(String(a),f,!1,_,w)},Gt.prototype.L=function(a,f,_,w){return this.i.add(String(a),f,!0,_,w)};function Sn(a,f,_,w){if(f=a.i.g[String(f)],!f)return!0;f=f.concat();for(var x=!0,N=0;N<f.length;++N){var B=f[N];if(B&&!B.da&&B.capture==_){var Rt=B.listener,re=B.ha||B.src;B.fa&&Oe(a.i,B),x=Rt.call(re,w)!==!1&&x}}return x&&!w.defaultPrevented}function Yl(a,f,_){if(typeof a=="function")_&&(a=m(a,_));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:l.setTimeout(a,f||0)}function Jl(a){a.g=Yl(()=>{a.g=null,a.i&&(a.i=!1,Jl(a))},a.l);const f=a.h;a.h=null,a.m.apply(null,f)}class n_ extends H{constructor(f,_){super(),this.m=f,this.l=_,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Jl(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ri(a){H.call(this),this.h=a,this.g={}}y(ri,H);var Zl=[];function tu(a){O(a.g,function(f,_){this.g.hasOwnProperty(_)&&bt(f)},a),a.g={}}ri.prototype.N=function(){ri.aa.N.call(this),tu(this)},ri.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var So=l.JSON.stringify,r_=l.JSON.parse,i_=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Do(){}Do.prototype.h=null;function eu(a){return a.h||(a.h=a.i())}function nu(){}var ii={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vo(){tt.call(this,"d")}y(Vo,tt);function ko(){tt.call(this,"c")}y(ko,tt);var Xn={},ru=null;function fs(){return ru=ru||new Gt}Xn.La="serverreachability";function iu(a){tt.call(this,Xn.La,a)}y(iu,tt);function si(a){const f=fs();Ht(f,new iu(f))}Xn.STAT_EVENT="statevent";function su(a,f){tt.call(this,Xn.STAT_EVENT,a),this.stat=f}y(su,tt);function ve(a){const f=fs();Ht(f,new su(f,a))}Xn.Ma="timingevent";function ou(a,f){tt.call(this,Xn.Ma,a),this.size=f}y(ou,tt);function oi(a,f){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},f)}function ai(){this.g=!0}ai.prototype.xa=function(){this.g=!1};function s_(a,f,_,w,x,N){a.info(function(){if(a.g)if(N)for(var B="",Rt=N.split("&"),re=0;re<Rt.length;re++){var gt=Rt[re].split("=");if(1<gt.length){var le=gt[0];gt=gt[1];var ue=le.split("_");B=2<=ue.length&&ue[1]=="type"?B+(le+"="+gt+"&"):B+(le+"=redacted&")}}else B=null;else B=N;return"XMLHTTP REQ ("+w+") [attempt "+x+"]: "+f+`
`+_+`
`+B})}function o_(a,f,_,w,x,N,B){a.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+x+"]: "+f+`
`+_+`
`+N+" "+B})}function br(a,f,_,w){a.info(function(){return"XMLHTTP TEXT ("+f+"): "+l_(a,_)+(w?" "+w:"")})}function a_(a,f){a.info(function(){return"TIMEOUT: "+f})}ai.prototype.info=function(){};function l_(a,f){if(!a.g)return f;if(!f)return null;try{var _=JSON.parse(f);if(_){for(a=0;a<_.length;a++)if(Array.isArray(_[a])){var w=_[a];if(!(2>w.length)){var x=w[1];if(Array.isArray(x)&&!(1>x.length)){var N=x[0];if(N!="noop"&&N!="stop"&&N!="close")for(var B=1;B<x.length;B++)x[B]=""}}}}return So(_)}catch{return f}}var ds={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},au={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xo;function _s(){}y(_s,Do),_s.prototype.g=function(){return new XMLHttpRequest},_s.prototype.i=function(){return{}},xo=new _s;function Dn(a,f,_,w){this.j=a,this.i=f,this.l=_,this.R=w||1,this.U=new ri(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lu}function lu(){this.i=null,this.g="",this.h=!1}var uu={},Oo={};function No(a,f,_){a.L=1,a.v=ys(pn(f)),a.m=_,a.P=!0,cu(a,null)}function cu(a,f){a.F=Date.now(),ms(a),a.A=pn(a.v);var _=a.A,w=a.R;Array.isArray(w)||(w=[String(w)]),Au(_.i,"t",w),a.C=0,_=a.j.J,a.h=new lu,a.g=zu(a.j,_?f:null,!a.m),0<a.O&&(a.M=new n_(m(a.Y,a,a.g),a.O)),f=a.U,_=a.g,w=a.ca;var x="readystatechange";Array.isArray(x)||(x&&(Zl[0]=x.toString()),x=Zl);for(var N=0;N<x.length;N++){var B=nt(_,x[N],w||f.handleEvent,!1,f.h||f);if(!B)break;f.g[B.key]=B}f=a.H?E(a.H):{},a.m?(a.u||(a.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,f)):(a.u="GET",a.g.ea(a.A,a.u,null,f)),si(),s_(a.i,a.u,a.A,a.l,a.R,a.m)}Dn.prototype.ca=function(a){a=a.target;const f=this.M;f&&gn(a)==3?f.j():this.Y(a)},Dn.prototype.Y=function(a){try{if(a==this.g)t:{const ue=gn(this.g);var f=this.g.Ba();const Cr=this.g.Z();if(!(3>ue)&&(ue!=3||this.g&&(this.h.h||this.g.oa()||Vu(this.g)))){this.J||ue!=4||f==7||(f==8||0>=Cr?si(3):si(2)),Mo(this);var _=this.g.Z();this.X=_;e:if(hu(this)){var w=Vu(this.g);a="";var x=w.length,N=gn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yn(this),li(this);var B="";break e}this.h.i=new l.TextDecoder}for(f=0;f<x;f++)this.h.h=!0,a+=this.h.i.decode(w[f],{stream:!(N&&f==x-1)});w.length=0,this.h.g+=a,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=_==200,o_(this.i,this.u,this.A,this.l,this.R,ue,_),this.o){if(this.T&&!this.K){e:{if(this.g){var Rt,re=this.g;if((Rt=re.g?re.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(Rt)){var gt=Rt;break e}}gt=null}if(_=gt)br(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fo(this,_);else{this.o=!1,this.s=3,ve(12),Yn(this),li(this);break t}}if(this.P){_=!0;let en;for(;!this.J&&this.C<B.length;)if(en=u_(this,B),en==Oo){ue==4&&(this.s=4,ve(14),_=!1),br(this.i,this.l,null,"[Incomplete Response]");break}else if(en==uu){this.s=4,ve(15),br(this.i,this.l,B,"[Invalid Chunk]"),_=!1;break}else br(this.i,this.l,en,null),Fo(this,en);if(hu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ue!=4||B.length!=0||this.h.h||(this.s=1,ve(16),_=!1),this.o=this.o&&_,!_)br(this.i,this.l,B,"[Invalid Chunked Response]"),Yn(this),li(this);else if(0<B.length&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.ba&&!le.M&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),jo(le),le.M=!0,ve(11))}}else br(this.i,this.l,B,null),Fo(this,B);ue==4&&Yn(this),this.o&&!this.J&&(ue==4?Lu(this.j,this):(this.o=!1,ms(this)))}else R_(this.g),_==400&&0<B.indexOf("Unknown SID")?(this.s=3,ve(12)):(this.s=0,ve(13)),Yn(this),li(this)}}}catch{}finally{}};function hu(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function u_(a,f){var _=a.C,w=f.indexOf(`
`,_);return w==-1?Oo:(_=Number(f.substring(_,w)),isNaN(_)?uu:(w+=1,w+_>f.length?Oo:(f=f.slice(w,w+_),a.C=w+_,f)))}Dn.prototype.cancel=function(){this.J=!0,Yn(this)};function ms(a){a.S=Date.now()+a.I,fu(a,a.I)}function fu(a,f){if(a.B!=null)throw Error("WatchDog timer not null");a.B=oi(m(a.ba,a),f)}function Mo(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Dn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(a_(this.i,this.A),this.L!=2&&(si(),ve(17)),Yn(this),this.s=2,li(this)):fu(this,this.S-a)};function li(a){a.j.G==0||a.J||Lu(a.j,a)}function Yn(a){Mo(a);var f=a.M;f&&typeof f.ma=="function"&&f.ma(),a.M=null,tu(a.U),a.g&&(f=a.g,a.g=null,f.abort(),f.ma())}function Fo(a,f){try{var _=a.j;if(_.G!=0&&(_.g==a||Lo(_.h,a))){if(!a.K&&Lo(_.h,a)&&_.G==3){try{var w=_.Da.g.parse(f)}catch{w=null}if(Array.isArray(w)&&w.length==3){var x=w;if(x[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<a.F)Is(_),Es(_);else break t;zo(_),ve(18)}}else _.za=x[1],0<_.za-_.T&&37500>x[2]&&_.F&&_.v==0&&!_.C&&(_.C=oi(m(_.Za,_),6e3));if(1>=mu(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Zn(_,11)}else if((a.K||_.g==a)&&Is(_),!b(f))for(x=_.Da.g.parse(f),f=0;f<x.length;f++){let gt=x[f];if(_.T=gt[0],gt=gt[1],_.G==2)if(gt[0]=="c"){_.K=gt[1],_.ia=gt[2];const le=gt[3];le!=null&&(_.la=le,_.j.info("VER="+_.la));const ue=gt[4];ue!=null&&(_.Aa=ue,_.j.info("SVER="+_.Aa));const Cr=gt[5];Cr!=null&&typeof Cr=="number"&&0<Cr&&(w=1.5*Cr,_.L=w,_.j.info("backChannelRequestTimeoutMs_="+w)),w=_;const en=a.g;if(en){const bs=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bs){var N=w.h;N.g||bs.indexOf("spdy")==-1&&bs.indexOf("quic")==-1&&bs.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&($o(N,N.h),N.h=null))}if(w.D){const qo=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;qo&&(w.ya=qo,Dt(w.I,w.D,qo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-a.F,_.j.info("Handshake RTT: "+_.R+"ms")),w=_;var B=a;if(w.qa=Uu(w,w.J?w.ia:null,w.W),B.K){pu(w.h,B);var Rt=B,re=w.L;re&&(Rt.I=re),Rt.B&&(Mo(Rt),ms(Rt)),w.g=B}else Mu(w);0<_.i.length&&ws(_)}else gt[0]!="stop"&&gt[0]!="close"||Zn(_,7);else _.G==3&&(gt[0]=="stop"||gt[0]=="close"?gt[0]=="stop"?Zn(_,7):Uo(_):gt[0]!="noop"&&_.l&&_.l.ta(gt),_.v=0)}}si(4)}catch{}}var c_=class{constructor(a,f){this.g=a,this.map=f}};function du(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _u(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function mu(a){return a.h?1:a.g?a.g.size:0}function Lo(a,f){return a.h?a.h==f:a.g?a.g.has(f):!1}function $o(a,f){a.g?a.g.add(f):a.h=f}function pu(a,f){a.h&&a.h==f?a.h=null:a.g&&a.g.has(f)&&a.g.delete(f)}du.prototype.cancel=function(){if(this.i=gu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function gu(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let f=a.i;for(const _ of a.g.values())f=f.concat(_.D);return f}return p(a.i)}function h_(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var f=[],_=a.length,w=0;w<_;w++)f.push(a[w]);return f}f=[],_=0;for(w in a)f[_++]=a[w];return f}function f_(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var f=[];a=a.length;for(var _=0;_<a;_++)f.push(_);return f}f=[],_=0;for(const w in a)f[_++]=w;return f}}}function yu(a,f){if(a.forEach&&typeof a.forEach=="function")a.forEach(f,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,f,void 0);else for(var _=f_(a),w=h_(a),x=w.length,N=0;N<x;N++)f.call(void 0,w[N],_&&_[N],a)}var vu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function d_(a,f){if(a){a=a.split("&");for(var _=0;_<a.length;_++){var w=a[_].indexOf("="),x=null;if(0<=w){var N=a[_].substring(0,w);x=a[_].substring(w+1)}else N=a[_];f(N,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function Jn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Jn){this.h=a.h,ps(this,a.j),this.o=a.o,this.g=a.g,gs(this,a.s),this.l=a.l;var f=a.i,_=new hi;_.i=f.i,f.g&&(_.g=new Map(f.g),_.h=f.h),Tu(this,_),this.m=a.m}else a&&(f=String(a).match(vu))?(this.h=!1,ps(this,f[1]||"",!0),this.o=ui(f[2]||""),this.g=ui(f[3]||"",!0),gs(this,f[4]),this.l=ui(f[5]||"",!0),Tu(this,f[6]||"",!0),this.m=ui(f[7]||"")):(this.h=!1,this.i=new hi(null,this.h))}Jn.prototype.toString=function(){var a=[],f=this.j;f&&a.push(ci(f,Eu,!0),":");var _=this.g;return(_||f=="file")&&(a.push("//"),(f=this.o)&&a.push(ci(f,Eu,!0),"@"),a.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&a.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&a.push("/"),a.push(ci(_,_.charAt(0)=="/"?p_:m_,!0))),(_=this.i.toString())&&a.push("?",_),(_=this.m)&&a.push("#",ci(_,y_)),a.join("")};function pn(a){return new Jn(a)}function ps(a,f,_){a.j=_?ui(f,!0):f,a.j&&(a.j=a.j.replace(/:$/,""))}function gs(a,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);a.s=f}else a.s=null}function Tu(a,f,_){f instanceof hi?(a.i=f,v_(a.i,a.h)):(_||(f=ci(f,g_)),a.i=new hi(f,a.h))}function Dt(a,f,_){a.i.set(f,_)}function ys(a){return Dt(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ui(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ci(a,f,_){return typeof a=="string"?(a=encodeURI(a).replace(f,__),_&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function __(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Eu=/[#\/\?@]/g,m_=/[#\?:]/g,p_=/[#\?]/g,g_=/[#\?@]/g,y_=/#/g;function hi(a,f){this.h=this.g=null,this.i=a||null,this.j=!!f}function Vn(a){a.g||(a.g=new Map,a.h=0,a.i&&d_(a.i,function(f,_){a.add(decodeURIComponent(f.replace(/\+/g," ")),_)}))}i=hi.prototype,i.add=function(a,f){Vn(this),this.i=null,a=Rr(this,a);var _=this.g.get(a);return _||this.g.set(a,_=[]),_.push(f),this.h+=1,this};function wu(a,f){Vn(a),f=Rr(a,f),a.g.has(f)&&(a.i=null,a.h-=a.g.get(f).length,a.g.delete(f))}function Iu(a,f){return Vn(a),f=Rr(a,f),a.g.has(f)}i.forEach=function(a,f){Vn(this),this.g.forEach(function(_,w){_.forEach(function(x){a.call(f,x,w,this)},this)},this)},i.na=function(){Vn(this);const a=Array.from(this.g.values()),f=Array.from(this.g.keys()),_=[];for(let w=0;w<f.length;w++){const x=a[w];for(let N=0;N<x.length;N++)_.push(f[w])}return _},i.V=function(a){Vn(this);let f=[];if(typeof a=="string")Iu(this,a)&&(f=f.concat(this.g.get(Rr(this,a))));else{a=Array.from(this.g.values());for(let _=0;_<a.length;_++)f=f.concat(a[_])}return f},i.set=function(a,f){return Vn(this),this.i=null,a=Rr(this,a),Iu(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[f]),this.h+=1,this},i.get=function(a,f){return a?(a=this.V(a),0<a.length?String(a[0]):f):f};function Au(a,f,_){wu(a,f),0<_.length&&(a.i=null,a.g.set(Rr(a,f),p(_)),a.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],f=Array.from(this.g.keys());for(var _=0;_<f.length;_++){var w=f[_];const N=encodeURIComponent(String(w)),B=this.V(w);for(w=0;w<B.length;w++){var x=N;B[w]!==""&&(x+="="+encodeURIComponent(String(B[w]))),a.push(x)}}return this.i=a.join("&")};function Rr(a,f){return f=String(f),a.j&&(f=f.toLowerCase()),f}function v_(a,f){f&&!a.j&&(Vn(a),a.i=null,a.g.forEach(function(_,w){var x=w.toLowerCase();w!=x&&(wu(this,w),Au(this,x,_))},a)),a.j=f}function T_(a,f){const _=new ai;if(l.Image){const w=new Image;w.onload=g(kn,_,"TestLoadImage: loaded",!0,f,w),w.onerror=g(kn,_,"TestLoadImage: error",!1,f,w),w.onabort=g(kn,_,"TestLoadImage: abort",!1,f,w),w.ontimeout=g(kn,_,"TestLoadImage: timeout",!1,f,w),l.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=a}else f(!1)}function E_(a,f){const _=new ai,w=new AbortController,x=setTimeout(()=>{w.abort(),kn(_,"TestPingServer: timeout",!1,f)},1e4);fetch(a,{signal:w.signal}).then(N=>{clearTimeout(x),N.ok?kn(_,"TestPingServer: ok",!0,f):kn(_,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(x),kn(_,"TestPingServer: error",!1,f)})}function kn(a,f,_,w,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),w(_)}catch{}}function w_(){this.g=new i_}function I_(a,f,_){const w=_||"";try{yu(a,function(x,N){let B=x;c(x)&&(B=So(x)),f.push(w+N+"="+encodeURIComponent(B))})}catch(x){throw f.push(w+"type="+encodeURIComponent("_badmap")),x}}function fi(a){this.l=a.Ub||null,this.j=a.eb||!1}y(fi,Do),fi.prototype.g=function(){return new vs(this.l,this.j)},fi.prototype.i=function(a){return function(){return a}}({});function vs(a,f){Gt.call(this),this.D=a,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(vs,Gt),i=vs.prototype,i.open=function(a,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=f,this.readyState=1,_i(this)},i.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(f.body=a),(this.D||l).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,di(this)),this.readyState=0},i.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,_i(this)),this.g&&(this.readyState=3,_i(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bu(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function bu(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}i.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var f=a.value?a.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!a.done}))&&(this.response=this.responseText+=f)}a.done?di(this):_i(this),this.readyState==3&&bu(this)}},i.Ra=function(a){this.g&&(this.response=this.responseText=a,di(this))},i.Qa=function(a){this.g&&(this.response=a,di(this))},i.ga=function(){this.g&&di(this)};function di(a){a.readyState=4,a.l=null,a.j=null,a.v=null,_i(a)}i.setRequestHeader=function(a,f){this.u.append(a,f)},i.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],f=this.h.entries();for(var _=f.next();!_.done;)_=_.value,a.push(_[0]+": "+_[1]),_=f.next();return a.join(`\r
`)};function _i(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(vs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Ru(a){let f="";return O(a,function(_,w){f+=w,f+=":",f+=_,f+=`\r
`}),f}function Bo(a,f,_){t:{for(w in _){var w=!1;break t}w=!0}w||(_=Ru(_),typeof a=="string"?_!=null&&encodeURIComponent(String(_)):Dt(a,f,_))}function Bt(a){Gt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Bt,Gt);var A_=/^https?$/i,b_=["POST","PUT"];i=Bt.prototype,i.Ha=function(a){this.J=a},i.ea=function(a,f,_,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);f=f?f.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xo.g(),this.v=this.o?eu(this.o):eu(xo),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(a),!0),this.B=!1}catch(N){Pu(this,N);return}if(a=_||"",_=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var x in w)_.set(x,w[x]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const N of w.keys())_.set(N,w.get(N));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(_.keys()).find(N=>N.toLowerCase()=="content-type"),x=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(b_,f,void 0))||w||x||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,B]of _)this.g.setRequestHeader(N,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Du(this),this.u=!0,this.g.send(a),this.u=!1}catch(N){Pu(this,N)}};function Pu(a,f){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=f,a.m=5,Cu(a),Ts(a)}function Cu(a){a.A||(a.A=!0,Ht(a,"complete"),Ht(a,"error"))}i.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Ht(this,"complete"),Ht(this,"abort"),Ts(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ts(this,!0)),Bt.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Su(this):this.bb())},i.bb=function(){Su(this)};function Su(a){if(a.h&&typeof o<"u"&&(!a.v[1]||gn(a)!=4||a.Z()!=2)){if(a.u&&gn(a)==4)Yl(a.Ea,0,a);else if(Ht(a,"readystatechange"),gn(a)==4){a.h=!1;try{const B=a.Z();t:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break t;default:f=!1}var _;if(!(_=f)){var w;if(w=B===0){var x=String(a.D).match(vu)[1]||null;!x&&l.self&&l.self.location&&(x=l.self.location.protocol.slice(0,-1)),w=!A_.test(x?x.toLowerCase():"")}_=w}if(_)Ht(a,"complete"),Ht(a,"success");else{a.m=6;try{var N=2<gn(a)?a.g.statusText:""}catch{N=""}a.l=N+" ["+a.Z()+"]",Cu(a)}}finally{Ts(a)}}}}function Ts(a,f){if(a.g){Du(a);const _=a.g,w=a.v[0]?()=>{}:null;a.g=null,a.v=null,f||Ht(a,"ready");try{_.onreadystatechange=w}catch{}}}function Du(a){a.I&&(l.clearTimeout(a.I),a.I=null)}i.isActive=function(){return!!this.g};function gn(a){return a.g?a.g.readyState:0}i.Z=function(){try{return 2<gn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(a){if(this.g){var f=this.g.responseText;return a&&f.indexOf(a)==0&&(f=f.substring(a.length)),r_(f)}};function Vu(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function R_(a){const f={};a=(a.g&&2<=gn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<a.length;w++){if(b(a[w]))continue;var _=P(a[w]);const x=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const N=f[x]||[];f[x]=N,N.push(_)}I(f,function(w){return w.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function mi(a,f,_){return _&&_.internalChannelParams&&_.internalChannelParams[a]||f}function ku(a){this.Aa=0,this.i=[],this.j=new ai,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=mi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=mi("baseRetryDelayMs",5e3,a),this.cb=mi("retryDelaySeedMs",1e4,a),this.Wa=mi("forwardChannelMaxRetries",2,a),this.wa=mi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new du(a&&a.concurrentRequestLimit),this.Da=new w_,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=ku.prototype,i.la=8,i.G=1,i.connect=function(a,f,_,w){ve(0),this.W=a,this.H=f||{},_&&w!==void 0&&(this.H.OSID=_,this.H.OAID=w),this.F=this.X,this.I=Uu(this,null,this.W),ws(this)};function Uo(a){if(xu(a),a.G==3){var f=a.U++,_=pn(a.I);if(Dt(_,"SID",a.K),Dt(_,"RID",f),Dt(_,"TYPE","terminate"),pi(a,_),f=new Dn(a,a.j,f),f.L=2,f.v=ys(pn(_)),_=!1,l.navigator&&l.navigator.sendBeacon)try{_=l.navigator.sendBeacon(f.v.toString(),"")}catch{}!_&&l.Image&&(new Image().src=f.v,_=!0),_||(f.g=zu(f.j,null),f.g.ea(f.v)),f.F=Date.now(),ms(f)}Bu(a)}function Es(a){a.g&&(jo(a),a.g.cancel(),a.g=null)}function xu(a){Es(a),a.u&&(l.clearTimeout(a.u),a.u=null),Is(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function ws(a){if(!_u(a.h)&&!a.s){a.s=!0;var f=a.Ga;at||zt(),dt||(at(),dt=!0),xt.add(f,a),a.B=0}}function P_(a,f){return mu(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=f.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=oi(m(a.Ga,a,f),$u(a,a.B)),a.B++,!0)}i.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const x=new Dn(this,this.j,a);let N=this.o;if(this.S&&(N?(N=E(N),R(N,this.S)):N=this.S),this.m!==null||this.O||(x.H=N,N=null),this.P)t:{for(var f=0,_=0;_<this.i.length;_++){e:{var w=this.i[_];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break e}w=void 0}if(w===void 0)break;if(f+=w,4096<f){f=_;break t}if(f===4096||_===this.i.length-1){f=_+1;break t}}f=1e3}else f=1e3;f=Nu(this,x,f),_=pn(this.I),Dt(_,"RID",a),Dt(_,"CVER",22),this.D&&Dt(_,"X-HTTP-Session-Id",this.D),pi(this,_),N&&(this.O?f="headers="+encodeURIComponent(String(Ru(N)))+"&"+f:this.m&&Bo(_,this.m,N)),$o(this.h,x),this.Ua&&Dt(_,"TYPE","init"),this.P?(Dt(_,"$req",f),Dt(_,"SID","null"),x.T=!0,No(x,_,null)):No(x,_,f),this.G=2}}else this.G==3&&(a?Ou(this,a):this.i.length==0||_u(this.h)||Ou(this))};function Ou(a,f){var _;f?_=f.l:_=a.U++;const w=pn(a.I);Dt(w,"SID",a.K),Dt(w,"RID",_),Dt(w,"AID",a.T),pi(a,w),a.m&&a.o&&Bo(w,a.m,a.o),_=new Dn(a,a.j,_,a.B+1),a.m===null&&(_.H=a.o),f&&(a.i=f.D.concat(a.i)),f=Nu(a,_,1e3),_.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),$o(a.h,_),No(_,w,f)}function pi(a,f){a.H&&O(a.H,function(_,w){Dt(f,w,_)}),a.l&&yu({},function(_,w){Dt(f,w,_)})}function Nu(a,f,_){_=Math.min(a.i.length,_);var w=a.l?m(a.l.Na,a.l,a):null;t:{var x=a.i;let N=-1;for(;;){const B=["count="+_];N==-1?0<_?(N=x[0].g,B.push("ofs="+N)):N=0:B.push("ofs="+N);let Rt=!0;for(let re=0;re<_;re++){let gt=x[re].g;const le=x[re].map;if(gt-=N,0>gt)N=Math.max(0,x[re].g-100),Rt=!1;else try{I_(le,B,"req"+gt+"_")}catch{w&&w(le)}}if(Rt){w=B.join("&");break t}}}return a=a.i.splice(0,_),f.D=a,w}function Mu(a){if(!a.g&&!a.u){a.Y=1;var f=a.Fa;at||zt(),dt||(at(),dt=!0),xt.add(f,a),a.v=0}}function zo(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=oi(m(a.Fa,a),$u(a,a.v)),a.v++,!0)}i.Fa=function(){if(this.u=null,Fu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=oi(m(this.ab,this),a)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ve(10),Es(this),Fu(this))};function jo(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Fu(a){a.g=new Dn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var f=pn(a.qa);Dt(f,"RID","rpc"),Dt(f,"SID",a.K),Dt(f,"AID",a.T),Dt(f,"CI",a.F?"0":"1"),!a.F&&a.ja&&Dt(f,"TO",a.ja),Dt(f,"TYPE","xmlhttp"),pi(a,f),a.m&&a.o&&Bo(f,a.m,a.o),a.L&&(a.g.I=a.L);var _=a.g;a=a.ia,_.L=1,_.v=ys(pn(f)),_.m=null,_.P=!0,cu(_,a)}i.Za=function(){this.C!=null&&(this.C=null,Es(this),zo(this),ve(19))};function Is(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Lu(a,f){var _=null;if(a.g==f){Is(a),jo(a),a.g=null;var w=2}else if(Lo(a.h,f))_=f.D,pu(a.h,f),w=1;else return;if(a.G!=0){if(f.o)if(w==1){_=f.m?f.m.length:0,f=Date.now()-f.F;var x=a.B;w=fs(),Ht(w,new ou(w,_)),ws(a)}else Mu(a);else if(x=f.s,x==3||x==0&&0<f.X||!(w==1&&P_(a,f)||w==2&&zo(a)))switch(_&&0<_.length&&(f=a.h,f.i=f.i.concat(_)),x){case 1:Zn(a,5);break;case 4:Zn(a,10);break;case 3:Zn(a,6);break;default:Zn(a,2)}}}function $u(a,f){let _=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(_*=2),_*f}function Zn(a,f){if(a.j.info("Error code "+f),f==2){var _=m(a.fb,a),w=a.Xa;const x=!w;w=new Jn(w||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ps(w,"https"),ys(w),x?T_(w.toString(),_):E_(w.toString(),_)}else ve(2);a.G=0,a.l&&a.l.sa(f),Bu(a),xu(a)}i.fb=function(a){a?(this.j.info("Successfully pinged google.com"),ve(2)):(this.j.info("Failed to ping google.com"),ve(1))};function Bu(a){if(a.G=0,a.ka=[],a.l){const f=gu(a.h);(f.length!=0||a.i.length!=0)&&(T(a.ka,f),T(a.ka,a.i),a.h.i.length=0,p(a.i),a.i.length=0),a.l.ra()}}function Uu(a,f,_){var w=_ instanceof Jn?pn(_):new Jn(_);if(w.g!="")f&&(w.g=f+"."+w.g),gs(w,w.s);else{var x=l.location;w=x.protocol,f=f?f+"."+x.hostname:x.hostname,x=+x.port;var N=new Jn(null);w&&ps(N,w),f&&(N.g=f),x&&gs(N,x),_&&(N.l=_),w=N}return _=a.D,f=a.ya,_&&f&&Dt(w,_,f),Dt(w,"VER",a.la),pi(a,w),w}function zu(a,f,_){if(f&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=a.Ca&&!a.pa?new Bt(new fi({eb:_})):new Bt(a.pa),f.Ha(a.J),f}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function ju(){}i=ju.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function As(){}As.prototype.g=function(a,f){return new Ne(a,f)};function Ne(a,f){Gt.call(this),this.g=new ku(f),this.l=a,this.h=f&&f.messageUrlParams||null,a=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(a?a["X-WebChannel-Content-Type"]=f.messageContentType:a={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(a?a["X-WebChannel-Client-Profile"]=f.va:a={"X-WebChannel-Client-Profile":f.va}),this.g.S=a,(a=f&&f.Sb)&&!b(a)&&(this.g.m=a),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!b(f)&&(this.g.D=f,a=this.h,a!==null&&f in a&&(a=this.h,f in a&&delete a[f])),this.j=new Pr(this)}y(Ne,Gt),Ne.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ne.prototype.close=function(){Uo(this.g)},Ne.prototype.o=function(a){var f=this.g;if(typeof a=="string"){var _={};_.__data__=a,a=_}else this.u&&(_={},_.__data__=So(a),a=_);f.i.push(new c_(f.Ya++,a)),f.G==3&&ws(f)},Ne.prototype.N=function(){this.g.l=null,delete this.j,Uo(this.g),delete this.g,Ne.aa.N.call(this)};function qu(a){Vo.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var f=a.__sm__;if(f){t:{for(const _ in f){a=_;break t}a=void 0}(this.i=a)&&(a=this.i,f=f!==null&&a in f?f[a]:void 0),this.data=f}else this.data=a}y(qu,Vo);function Gu(){ko.call(this),this.status=1}y(Gu,ko);function Pr(a){this.g=a}y(Pr,ju),Pr.prototype.ua=function(){Ht(this.g,"a")},Pr.prototype.ta=function(a){Ht(this.g,new qu(a))},Pr.prototype.sa=function(a){Ht(this.g,new Gu)},Pr.prototype.ra=function(){Ht(this.g,"b")},As.prototype.createWebChannel=As.prototype.g,Ne.prototype.send=Ne.prototype.o,Ne.prototype.open=Ne.prototype.m,Ne.prototype.close=Ne.prototype.close,Ff=function(){return new As},Mf=function(){return fs()},Nf=Xn,xa={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ds.NO_ERROR=0,ds.TIMEOUT=8,ds.HTTP_ERROR=6,Os=ds,au.COMPLETE="complete",Of=au,nu.EventType=ii,ii.OPEN="a",ii.CLOSE="b",ii.ERROR="c",ii.MESSAGE="d",Gt.prototype.listen=Gt.prototype.K,Ei=nu,xf=fi,Bt.prototype.listenOnce=Bt.prototype.L,Bt.prototype.getLastError=Bt.prototype.Ka,Bt.prototype.getLastErrorCode=Bt.prototype.Ba,Bt.prototype.getStatus=Bt.prototype.Z,Bt.prototype.getResponseJson=Bt.prototype.Oa,Bt.prototype.getResponseText=Bt.prototype.oa,Bt.prototype.send=Bt.prototype.ea,Bt.prototype.setWithCredentials=Bt.prototype.Ha,kf=Bt}).apply(typeof Ps<"u"?Ps:typeof self<"u"?self:typeof window<"u"?window:{});const Sc="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}he.UNAUTHENTICATED=new he(null),he.GOOGLE_CREDENTIALS=new he("google-credentials-uid"),he.FIRST_PARTY=new he("first-party-uid"),he.MOCK_USER=new he("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ti="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr=new bf("@firebase/firestore");function yi(){return pr.logLevel}function W(i,...t){if(pr.logLevel<=pt.DEBUG){const e=t.map(ml);pr.debug(`Firestore (${ti}): ${i}`,...e)}}function Rn(i,...t){if(pr.logLevel<=pt.ERROR){const e=t.map(ml);pr.error(`Firestore (${ti}): ${i}`,...e)}}function Gr(i,...t){if(pr.logLevel<=pt.WARN){const e=t.map(ml);pr.warn(`Firestore (${ti}): ${i}`,...e)}}function ml(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(i="Unexpected state"){const t=`FIRESTORE (${ti}) INTERNAL ASSERTION FAILED: `+i;throw Rn(t),new Error(t)}function St(i,t){i||it()}function ct(i,t){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends Zr{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class oy{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(he.UNAUTHENTICATED))}shutdown(){}}class ay{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class ly{constructor(t){this.t=t,this.currentUser=he.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const r=u=>this.i!==n?(n=this.i,e(u)):Promise.resolve();let s=new En;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new En,t.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new En)}},0),o()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(n=>this.i!==t?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(St(typeof n.accessToken=="string"),new Lf(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return St(t===null||typeof t=="string"),new he(t)}}class uy{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=he.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class cy{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new uy(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(he.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hy{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fy{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};const r=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(St(typeof e.token=="string"),this.R=e.token,new hy(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(i){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(i);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let n=0;n<i;n++)e[n]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const r=dy(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<e&&(n+=t.charAt(r[s]%t.length))}return n}}function wt(i,t){return i<t?-1:i>t?1:0}function Hr(i,t,e){return i.length===t.length&&i.every((n,r)=>e(n,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new J(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new J(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new J(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new J(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Jt.fromMillis(Date.now())}static fromDate(t){return Jt.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Jt(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?wt(this.nanoseconds,t.nanoseconds):wt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(t){this.timestamp=t}static fromTimestamp(t){return new ot(t)}static min(){return new ot(new Jt(0,0))}static max(){return new ot(new Jt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(t,e,n){e===void 0?e=0:e>t.length&&it(),n===void 0?n=t.length-e:n>t.length-e&&it(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return ji.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof ji?t.forEach(n=>{e.push(n)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.get(r),o=e.get(r);if(s<o)return-1;if(s>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class kt extends ji{construct(t,e,n){return new kt(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new J(L.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter(r=>r.length>0))}return new kt(e)}static emptyPath(){return new kt([])}}const _y=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class oe extends ji{construct(t,e,n){return new oe(t,e,n)}static isValidIdentifier(t){return _y.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),oe.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new oe(["__name__"])}static fromServerFormat(t){const e=[];let n="",r=0;const s=()=>{if(n.length===0)throw new J(L.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let o=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new J(L.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new J(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=u,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(n+=l,r++):(s(),r++)}if(s(),o)throw new J(L.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new oe(e)}static emptyPath(){return new oe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(t){this.path=t}static fromPath(t){return new et(kt.fromString(t))}static fromName(t){return new et(kt.fromString(t).popFirst(5))}static empty(){return new et(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&kt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return kt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new et(new kt(t.slice()))}}function my(i,t){const e=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,r=ot.fromTimestamp(n===1e9?new Jt(e+1,0):new Jt(e,n));return new qn(r,et.empty(),t)}function py(i){return new qn(i.readTime,i.key,-1)}class qn{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new qn(ot.min(),et.empty(),-1)}static max(){return new qn(ot.max(),et.empty(),-1)}}function gy(i,t){let e=i.readTime.compareTo(t.readTime);return e!==0?e:(e=et.comparator(i.documentKey,t.documentKey),e!==0?e:wt(i.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vy{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ns(i){if(i.code!==L.FAILED_PRECONDITION||i.message!==yy)throw i;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new $((n,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(n,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof $?e:$.resolve(e)}catch(e){return $.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):$.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):$.reject(e)}static resolve(t){return new $((e,n)=>{e(t)})}static reject(t){return new $((e,n)=>{n(t)})}static waitFor(t){return new $((e,n)=>{let r=0,s=0,o=!1;t.forEach(l=>{++r,l.next(()=>{++s,o&&s===r&&e()},u=>n(u))}),o=!0,s===r&&e()})}static or(t){let e=$.resolve(!1);for(const n of t)e=e.next(r=>r?$.resolve(r):n());return e}static forEach(t,e){const n=[];return t.forEach((r,s)=>{n.push(e.call(this,r,s))}),this.waitFor(n)}static mapArray(t,e){return new $((n,r)=>{const s=t.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const c=u;e(t[c]).next(h=>{o[c]=h,++l,l===s&&n(o)},h=>r(h))}})}static doWhile(t,e){return new $((n,r)=>{const s=()=>{t()===!0?e().next(()=>{s()},r):n()};s()})}}function Ty(i){const t=i.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function rs(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=n=>this.ie(n),this.se=n=>e.writeSequenceNumber(n))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}pl.oe=-1;function mo(i){return i==null}function Zs(i){return i===0&&1/i==-1/0}function Ey(i){return typeof i=="number"&&Number.isInteger(i)&&!Zs(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(i){let t=0;for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t++;return t}function Er(i,t){for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t(e,i[e])}function Bf(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(t,e){this.comparator=t,this.root=e||ie.EMPTY}insert(t,e){return new $t(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ie.BLACK,null,null))}remove(t){return new $t(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ie.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(n===0)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,n)=>(t(e,n),!1))}toString(){const t=[];return this.inorderTraversal((e,n)=>(t.push(`${e}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Cs(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Cs(this.root,t,this.comparator,!1)}getReverseIterator(){return new Cs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Cs(this.root,t,this.comparator,!0)}}class Cs{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?n(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ie{constructor(t,e,n,r,s){this.key=t,this.value=e,this.color=n??ie.RED,this.left=r??ie.EMPTY,this.right=s??ie.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,s){return new ie(t??this.key,e??this.value,n??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const s=n(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,n),null):s===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ie.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return ie.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ie.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ie.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const t=this.left.check();if(t!==this.right.check())throw it();return t+(this.isRed()?0:1)}}ie.EMPTY=null,ie.RED=!0,ie.BLACK=!1;ie.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(t,e,n,r,s){return this}insert(t,e,n){return new ie(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t){this.comparator=t,this.data=new $t(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,n)=>(t(e),!1))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Vc(this.data.getIterator())}getIteratorFrom(t){return new Vc(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(n=>{e=e.add(n)}),e}isEqual(t){if(!(t instanceof ae)||this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=n.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new ae(this.comparator);return e.data=t,e}}class Vc{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(t){this.fields=t,t.sort(oe.comparator)}static empty(){return new $e([])}unionWith(t){let e=new ae(oe.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new $e(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Hr(this.fields,t.fields,(e,n)=>e.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Uf("Invalid base64 string: "+s):s}}(t);return new ge(e)}static fromUint8Array(t){const e=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new ge(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return wt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ge.EMPTY_BYTE_STRING=new ge("");const wy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gn(i){if(St(!!i),typeof i=="string"){let t=0;const e=wy.exec(i);if(St(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Qt(i.seconds),nanos:Qt(i.nanos)}}function Qt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function gr(i){return typeof i=="string"?ge.fromBase64String(i):ge.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(i){var t,e;return((e=(((t=i==null?void 0:i.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function yl(i){const t=i.mapValue.fields.__previous_value__;return gl(t)?yl(t):t}function qi(i){const t=Gn(i.mapValue.fields.__local_write_time__.timestampValue);return new Jt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(t,e,n,r,s,o,l,u,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}class Gi{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Gi("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Gi&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function yr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?gl(i)?4:Ay(i)?9007199254740991:10:it()}function _n(i,t){if(i===t)return!0;const e=yr(i);if(e!==yr(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return qi(i).isEqual(qi(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Gn(r.timestampValue),l=Gn(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(i,t);case 5:return i.stringValue===t.stringValue;case 6:return function(r,s){return gr(r.bytesValue).isEqual(gr(s.bytesValue))}(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return function(r,s){return Qt(r.geoPointValue.latitude)===Qt(s.geoPointValue.latitude)&&Qt(r.geoPointValue.longitude)===Qt(s.geoPointValue.longitude)}(i,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Qt(r.integerValue)===Qt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Qt(r.doubleValue),l=Qt(s.doubleValue);return o===l?Zs(o)===Zs(l):isNaN(o)&&isNaN(l)}return!1}(i,t);case 9:return Hr(i.arrayValue.values||[],t.arrayValue.values||[],_n);case 10:return function(r,s){const o=r.mapValue.fields||{},l=s.mapValue.fields||{};if(Dc(o)!==Dc(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!_n(o[u],l[u])))return!1;return!0}(i,t);default:return it()}}function Hi(i,t){return(i.values||[]).find(e=>_n(e,t))!==void 0}function Kr(i,t){if(i===t)return 0;const e=yr(i),n=yr(t);if(e!==n)return wt(e,n);switch(e){case 0:case 9007199254740991:return 0;case 1:return wt(i.booleanValue,t.booleanValue);case 2:return function(s,o){const l=Qt(s.integerValue||s.doubleValue),u=Qt(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(i,t);case 3:return kc(i.timestampValue,t.timestampValue);case 4:return kc(qi(i),qi(t));case 5:return wt(i.stringValue,t.stringValue);case 6:return function(s,o){const l=gr(s),u=gr(o);return l.compareTo(u)}(i.bytesValue,t.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const h=wt(l[c],u[c]);if(h!==0)return h}return wt(l.length,u.length)}(i.referenceValue,t.referenceValue);case 8:return function(s,o){const l=wt(Qt(s.latitude),Qt(o.latitude));return l!==0?l:wt(Qt(s.longitude),Qt(o.longitude))}(i.geoPointValue,t.geoPointValue);case 9:return function(s,o){const l=s.values||[],u=o.values||[];for(let c=0;c<l.length&&c<u.length;++c){const h=Kr(l[c],u[c]);if(h)return h}return wt(l.length,u.length)}(i.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===Ss.mapValue&&o===Ss.mapValue)return 0;if(s===Ss.mapValue)return 1;if(o===Ss.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let d=0;d<u.length&&d<h.length;++d){const m=wt(u[d],h[d]);if(m!==0)return m;const g=Kr(l[u[d]],c[h[d]]);if(g!==0)return g}return wt(u.length,h.length)}(i.mapValue,t.mapValue);default:throw it()}}function kc(i,t){if(typeof i=="string"&&typeof t=="string"&&i.length===t.length)return wt(i,t);const e=Gn(i),n=Gn(t),r=wt(e.seconds,n.seconds);return r!==0?r:wt(e.nanos,n.nanos)}function Wr(i){return Oa(i)}function Oa(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(e){const n=Gn(e);return`time(${n.seconds},${n.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(e){return gr(e).toBase64()}(i.bytesValue):"referenceValue"in i?function(e){return et.fromName(e).toString()}(i.referenceValue):"geoPointValue"in i?function(e){return`geo(${e.latitude},${e.longitude})`}(i.geoPointValue):"arrayValue"in i?function(e){let n="[",r=!0;for(const s of e.values||[])r?r=!1:n+=",",n+=Oa(s);return n+"]"}(i.arrayValue):"mapValue"in i?function(e){const n=Object.keys(e.fields||{}).sort();let r="{",s=!0;for(const o of n)s?s=!1:r+=",",r+=`${o}:${Oa(e.fields[o])}`;return r+"}"}(i.mapValue):it()}function Na(i){return!!i&&"integerValue"in i}function vl(i){return!!i&&"arrayValue"in i}function xc(i){return!!i&&"nullValue"in i}function Oc(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Ns(i){return!!i&&"mapValue"in i}function Ci(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const t={mapValue:{fields:{}}};return Er(i.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Ci(n)),t}if(i.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(i.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Ci(i.arrayValue.values[e]);return t}return Object.assign({},i)}function Ay(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(t){this.value=t}static empty(){return new be({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Ns(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ci(e)}setAll(t){let e=oe.emptyPath(),n={},r=[];t.forEach((o,l)=>{if(!e.isImmediateParentOf(l)){const u=this.getFieldsMap(e);this.applyChanges(u,n,r),n={},r=[],e=l.popLast()}o?n[l.lastSegment()]=Ci(o):r.push(l.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,n,r)}delete(t){const e=this.field(t.popLast());Ns(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return _n(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];Ns(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){Er(e,(r,s)=>t[r]=s);for(const r of n)delete t[r]}clone(){return new be(Ci(this.value))}}function zf(i){const t=[];return Er(i.fields,(e,n)=>{const r=new oe([e]);if(Ns(n)){const s=zf(n.mapValue).fields;if(s.length===0)t.push(r);else for(const o of s)t.push(r.child(o))}else t.push(r)}),new $e(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(t,e,n,r,s,o,l){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(t){return new fe(t,0,ot.min(),ot.min(),ot.min(),be.empty(),0)}static newFoundDocument(t,e,n,r){return new fe(t,1,e,ot.min(),n,r,0)}static newNoDocument(t,e){return new fe(t,2,e,ot.min(),ot.min(),be.empty(),0)}static newUnknownDocument(t,e){return new fe(t,3,e,ot.min(),ot.min(),be.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=be.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=be.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ot.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof fe&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new fe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(t,e){this.position=t,this.inclusive=e}}function Nc(i,t,e){let n=0;for(let r=0;r<i.position.length;r++){const s=t[r],o=i.position[r];if(s.field.isKeyField()?n=et.comparator(et.fromName(o.referenceValue),e.key):n=Kr(o,e.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function Mc(i,t){if(i===null)return t===null;if(t===null||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let e=0;e<i.position.length;e++)if(!_n(i.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(t,e="asc"){this.field=t,this.dir=e}}function by(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{}class Yt extends jf{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,n):new Py(t,e,n):e==="array-contains"?new Dy(t,n):e==="in"?new Vy(t,n):e==="not-in"?new ky(t,n):e==="array-contains-any"?new xy(t,n):new Yt(t,e,n)}static createKeyFieldInFilter(t,e,n){return e==="in"?new Cy(t,n):new Sy(t,n)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(Kr(e,this.value)):e!==null&&yr(this.value)===yr(e)&&this.matchesComparison(Kr(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return it()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mn extends jf{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new mn(t,e)}matches(t){return qf(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function qf(i){return i.op==="and"}function Gf(i){return Ry(i)&&qf(i)}function Ry(i){for(const t of i.filters)if(t instanceof mn)return!1;return!0}function Ma(i){if(i instanceof Yt)return i.field.canonicalString()+i.op.toString()+Wr(i.value);if(Gf(i))return i.filters.map(t=>Ma(t)).join(",");{const t=i.filters.map(e=>Ma(e)).join(",");return`${i.op}(${t})`}}function Hf(i,t){return i instanceof Yt?function(n,r){return r instanceof Yt&&n.op===r.op&&n.field.isEqual(r.field)&&_n(n.value,r.value)}(i,t):i instanceof mn?function(n,r){return r instanceof mn&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((s,o,l)=>s&&Hf(o,r.filters[l]),!0):!1}(i,t):void it()}function Kf(i){return i instanceof Yt?function(e){return`${e.field.canonicalString()} ${e.op} ${Wr(e.value)}`}(i):i instanceof mn?function(e){return e.op.toString()+" {"+e.getFilters().map(Kf).join(" ,")+"}"}(i):"Filter"}class Py extends Yt{constructor(t,e,n){super(t,e,n),this.key=et.fromName(n.referenceValue)}matches(t){const e=et.comparator(t.key,this.key);return this.matchesComparison(e)}}class Cy extends Yt{constructor(t,e){super(t,"in",e),this.keys=Wf("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class Sy extends Yt{constructor(t,e){super(t,"not-in",e),this.keys=Wf("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Wf(i,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(n=>et.fromName(n.referenceValue))}class Dy extends Yt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return vl(e)&&Hi(e.arrayValue,this.value)}}class Vy extends Yt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Hi(this.value.arrayValue,e)}}class ky extends Yt{constructor(t,e){super(t,"not-in",e)}matches(t){if(Hi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!Hi(this.value.arrayValue,e)}}class xy extends Yt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!vl(e)||!e.arrayValue.values)&&e.arrayValue.values.some(n=>Hi(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(t,e=null,n=[],r=[],s=null,o=null,l=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function Fc(i,t=null,e=[],n=[],r=null,s=null,o=null){return new Oy(i,t,e,n,r,s,o)}function Tl(i){const t=ct(i);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(n=>Ma(n)).join(","),e+="|ob:",e+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),mo(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>Wr(n)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>Wr(n)).join(",")),t.ue=e}return t.ue}function El(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<i.orderBy.length;e++)if(!by(i.orderBy[e],t.orderBy[e]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let e=0;e<i.filters.length;e++)if(!Hf(i.filters[e],t.filters[e]))return!1;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!Mc(i.startAt,t.startAt)&&Mc(i.endAt,t.endAt)}function Fa(i){return et.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(t,e=null,n=[],r=[],s=null,o="F",l=null,u=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Ny(i,t,e,n,r,s,o,l){return new po(i,t,e,n,r,s,o,l)}function go(i){return new po(i)}function Lc(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function My(i){return i.collectionGroup!==null}function Si(i){const t=ct(i);if(t.ce===null){t.ce=[];const e=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ae(oe.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.ce.push(new eo(s,n))}),e.has(oe.keyField().canonicalString())||t.ce.push(new eo(oe.keyField(),n))}return t.ce}function cn(i){const t=ct(i);return t.le||(t.le=Fy(t,Si(i))),t.le}function Fy(i,t){if(i.limitType==="F")return Fc(i.path,i.collectionGroup,t,i.filters,i.limit,i.startAt,i.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new eo(r.field,s)});const e=i.endAt?new to(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new to(i.startAt.position,i.startAt.inclusive):null;return Fc(i.path,i.collectionGroup,t,i.filters,i.limit,e,n)}}function La(i,t,e){return new po(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,e,i.startAt,i.endAt)}function yo(i,t){return El(cn(i),cn(t))&&i.limitType===t.limitType}function Qf(i){return`${Tl(cn(i))}|lt:${i.limitType}`}function Dr(i){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>Kf(r)).join(", ")}]`),mo(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Wr(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Wr(r)).join(",")),`Target(${n})`}(cn(i))}; limitType=${i.limitType})`}function vo(i,t){return t.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):et.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(i,t)&&function(n,r){for(const s of Si(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(i,t)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(i,t)&&function(n,r){return!(n.startAt&&!function(o,l,u){const c=Nc(o,l,u);return o.inclusive?c<=0:c<0}(n.startAt,Si(n),r)||n.endAt&&!function(o,l,u){const c=Nc(o,l,u);return o.inclusive?c>=0:c>0}(n.endAt,Si(n),r))}(i,t)}function Ly(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Xf(i){return(t,e)=>{let n=!1;for(const r of Si(i)){const s=$y(r,t,e);if(s!==0)return s;n=n||r.field.isKeyField()}return 0}}function $y(i,t,e){const n=i.field.isKeyField()?et.comparator(t.key,e.key):function(s,o,l){const u=o.data.field(s),c=l.data.field(s);return u!==null&&c!==null?Kr(u,c):it()}(i.field,t,e);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return it()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(n!==void 0){for(const[r,s]of n)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return this.inner[n]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return n.length===1?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Er(this.inner,(e,n)=>{for(const[r,s]of n)t(r,s)})}isEmpty(){return Bf(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By=new $t(et.comparator);function Pn(){return By}const Yf=new $t(et.comparator);function wi(...i){let t=Yf;for(const e of i)t=t.insert(e.key,e);return t}function Jf(i){let t=Yf;return i.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function sr(){return Di()}function Zf(){return Di()}function Di(){return new ei(i=>i.toString(),(i,t)=>i.isEqual(t))}const Uy=new $t(et.comparator),zy=new ae(et.comparator);function ft(...i){let t=zy;for(const e of i)t=t.add(e);return t}const jy=new ae(wt);function qy(){return jy}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(i,t){if(i.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zs(t)?"-0":t}}function ed(i){return{integerValue:""+i}}function Gy(i,t){return Ey(t)?ed(t):td(i,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(){this._=void 0}}function Hy(i,t,e){return i instanceof no?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&gl(s)&&(s=yl(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(e,t):i instanceof Ki?rd(i,t):i instanceof Wi?id(i,t):function(r,s){const o=nd(r,s),l=$c(o)+$c(r.Pe);return Na(o)&&Na(r.Pe)?ed(l):td(r.serializer,l)}(i,t)}function Ky(i,t,e){return i instanceof Ki?rd(i,t):i instanceof Wi?id(i,t):e}function nd(i,t){return i instanceof ro?function(n){return Na(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}class no extends To{}class Ki extends To{constructor(t){super(),this.elements=t}}function rd(i,t){const e=sd(t);for(const n of i.elements)e.some(r=>_n(r,n))||e.push(n);return{arrayValue:{values:e}}}class Wi extends To{constructor(t){super(),this.elements=t}}function id(i,t){let e=sd(t);for(const n of i.elements)e=e.filter(r=>!_n(r,n));return{arrayValue:{values:e}}}class ro extends To{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function $c(i){return Qt(i.integerValue||i.doubleValue)}function sd(i){return vl(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function Wy(i,t){return i.field.isEqual(t.field)&&function(n,r){return n instanceof Ki&&r instanceof Ki||n instanceof Wi&&r instanceof Wi?Hr(n.elements,r.elements,_n):n instanceof ro&&r instanceof ro?_n(n.Pe,r.Pe):n instanceof no&&r instanceof no}(i.transform,t.transform)}class Qy{constructor(t,e){this.version=t,this.transformResults=e}}class Ue{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ue}static exists(t){return new Ue(void 0,t)}static updateTime(t){return new Ue(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Ms(i,t){return i.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(i.updateTime):i.exists===void 0||i.exists===t.isFoundDocument()}class Eo{}function od(i,t){if(!i.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return i.isNoDocument()?new wl(i.key,Ue.none()):new is(i.key,i.data,Ue.none());{const e=i.data,n=be.empty();let r=new ae(oe.comparator);for(let s of t.fields)if(!r.has(s)){let o=e.field(s);o===null&&s.length>1&&(s=s.popLast(),o=e.field(s)),o===null?n.delete(s):n.set(s,o),r=r.add(s)}return new Qn(i.key,n,new $e(r.toArray()),Ue.none())}}function Xy(i,t,e){i instanceof is?function(r,s,o){const l=r.value.clone(),u=Uc(r.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(i,t,e):i instanceof Qn?function(r,s,o){if(!Ms(r.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Uc(r.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(ad(r)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(i,t,e):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,e)}function Vi(i,t,e,n){return i instanceof is?function(s,o,l,u){if(!Ms(s.precondition,o))return l;const c=s.value.clone(),h=zc(s.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(i,t,e,n):i instanceof Qn?function(s,o,l,u){if(!Ms(s.precondition,o))return l;const c=zc(s.fieldTransforms,u,o),h=o.data;return h.setAll(ad(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(i,t,e,n):function(s,o,l){return Ms(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(i,t,e)}function Yy(i,t){let e=null;for(const n of i.fieldTransforms){const r=t.data.field(n.field),s=nd(n.transform,r||null);s!=null&&(e===null&&(e=be.empty()),e.set(n.field,s))}return e||null}function Bc(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Hr(n,r,(s,o)=>Wy(s,o))}(i.fieldTransforms,t.fieldTransforms)&&(i.type===0?i.value.isEqual(t.value):i.type!==1||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask))}class is extends Eo{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Qn extends Eo{constructor(t,e,n,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ad(i){const t=new Map;return i.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const n=i.data.field(e);t.set(e,n)}}),t}function Uc(i,t,e){const n=new Map;St(i.length===e.length);for(let r=0;r<e.length;r++){const s=i[r],o=s.transform,l=t.data.field(s.field);n.set(s.field,Ky(o,l,e[r]))}return n}function zc(i,t,e){const n=new Map;for(const r of i){const s=r.transform,o=e.data.field(r.field);n.set(r.field,Hy(s,o,t))}return n}class wl extends Eo{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Jy extends Eo{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&Xy(s,t,n[r])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Vi(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Vi(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=Zf();return this.mutations.forEach(r=>{const s=t.get(r.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=e.has(r.key)?null:l;const u=od(o,l);u!==null&&n.set(r.key,u),o.isValidDocument()||o.convertToNoDocument(ot.min())}),n}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),ft())}isEqual(t){return this.batchId===t.batchId&&Hr(this.mutations,t.mutations,(e,n)=>Bc(e,n))&&Hr(this.baseMutations,t.baseMutations,(e,n)=>Bc(e,n))}}class Il{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){St(t.mutations.length===n.length);let r=function(){return Uy}();const s=t.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,n[o].version);return new Il(t,e,n,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt,mt;function n0(i){switch(i){default:return it();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function ld(i){if(i===void 0)return Rn("GRPC error has no .code"),L.UNKNOWN;switch(i){case Kt.OK:return L.OK;case Kt.CANCELLED:return L.CANCELLED;case Kt.UNKNOWN:return L.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return L.INTERNAL;case Kt.UNAVAILABLE:return L.UNAVAILABLE;case Kt.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Kt.NOT_FOUND:return L.NOT_FOUND;case Kt.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Kt.ABORTED:return L.ABORTED;case Kt.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Kt.DATA_LOSS:return L.DATA_LOSS;default:return it()}}(mt=Kt||(Kt={}))[mt.OK=0]="OK",mt[mt.CANCELLED=1]="CANCELLED",mt[mt.UNKNOWN=2]="UNKNOWN",mt[mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mt[mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mt[mt.NOT_FOUND=5]="NOT_FOUND",mt[mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",mt[mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",mt[mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",mt[mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mt[mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mt[mt.ABORTED=10]="ABORTED",mt[mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",mt[mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",mt[mt.INTERNAL=13]="INTERNAL",mt[mt.UNAVAILABLE=14]="UNAVAILABLE",mt[mt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=new hr([4294967295,4294967295],0);function jc(i){const t=r0().encode(i),e=new Vf;return e.update(t),new Uint8Array(e.digest())}function qc(i){const t=new DataView(i.buffer),e=t.getUint32(0,!0),n=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new hr([e,n],0),new hr([r,s],0)]}class Al{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new Ii(`Invalid padding: ${e}`);if(n<0)throw new Ii(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new Ii(`Invalid hash count: ${n}`);if(t.length===0&&e!==0)throw new Ii(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=hr.fromNumber(this.Ie)}Ee(t,e,n){let r=t.add(e.multiply(hr.fromNumber(n)));return r.compare(i0)===1&&(r=new hr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const e=jc(t),[n,r]=qc(e);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,r,s);if(!this.de(o))return!1}return!0}static create(t,e,n){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new Al(s,r,e);return n.forEach(l=>o.insert(l)),o}insert(t){if(this.Ie===0)return;const e=jc(t),[n,r]=qc(e);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,r,s);this.Ae(o)}}Ae(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class Ii extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(t,e,n,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const r=new Map;return r.set(t,ss.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new wo(ot.min(),r,new $t(wt),Pn(),ft())}}class ss{constructor(t,e,n,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new ss(n,e,ft(),ft(),ft())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(t,e,n,r){this.Re=t,this.removedTargetIds=e,this.key=n,this.Ve=r}}class ud{constructor(t,e){this.targetId=t,this.me=e}}class cd{constructor(t,e,n=ge.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class Gc{constructor(){this.fe=0,this.ge=Kc(),this.pe=ge.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=ft(),e=ft(),n=ft();return this.ge.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:it()}}),new ss(this.pe,this.ye,t,e,n)}ve(){this.we=!1,this.ge=Kc()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,St(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class s0{constructor(t){this.Le=t,this.Be=new Map,this.ke=Pn(),this.qe=Hc(),this.Qe=new $t(wt)}Ke(t){for(const e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(const e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{const n=this.Ge(e);switch(t.state){case 0:this.ze(e)&&n.De(t.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(t.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(n.Ne(),n.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),n.De(t.resumeToken));break;default:it()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((n,r)=>{this.ze(r)&&e(r)})}He(t){const e=t.targetId,n=t.me.count,r=this.Je(e);if(r){const s=r.target;if(Fa(s))if(n===0){const o=new et(s.path);this.Ue(e,o,fe.newNoDocument(o,ot.min()))}else St(n===1);else{const o=this.Ye(e);if(o!==n){const l=this.Ze(t),u=l?this.Xe(l,t,o):1;if(u!==0){this.je(e);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,c)}}}}}Ze(t){const e=t.me.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=e;let o,l;try{o=gr(n).toUint8Array()}catch(u){if(u instanceof Uf)return Gr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Al(o,r,s)}catch(u){return Gr(u instanceof Ii?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(t,e,n){return e.me.count===n-this.nt(t,e.targetId)?0:2}nt(t,e){const n=this.Le.getRemoteKeysForTarget(e);let r=0;return n.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.Ue(e,s,null),r++)}),r}rt(t){const e=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&Fa(l.target)){const u=new et(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,fe.newNoDocument(u,t))}s.be&&(e.set(o,s.Ce()),s.ve())}});let n=ft();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const r=new wo(t,e,this.Qe,this.ke,n);return this.ke=Pn(),this.qe=Hc(),this.Qe=new $t(wt),r}$e(t,e){if(!this.ze(t))return;const n=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,n),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,n){if(!this.ze(t))return;const r=this.Ge(t);this.it(t,e)?r.Fe(e,1):r.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),n&&(this.ke=this.ke.insert(e,n))}removeTarget(t){this.Be.delete(t)}Ye(t){const e=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new Gc,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new ae(wt),this.qe=this.qe.insert(t,e)),e}ze(t){const e=this.Je(t)!==null;return e||W("WatchChangeAggregator","Detected inactive target",t),e}Je(t){const e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Gc),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function Hc(){return new $t(et.comparator)}function Kc(){return new $t(et.comparator)}const o0={asc:"ASCENDING",desc:"DESCENDING"},a0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},l0={and:"AND",or:"OR"};class u0{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function $a(i,t){return i.useProto3Json||mo(t)?t:{value:t}}function io(i,t){return i.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function hd(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function c0(i,t){return io(i,t.toTimestamp())}function hn(i){return St(!!i),ot.fromTimestamp(function(e){const n=Gn(e);return new Jt(n.seconds,n.nanos)}(i))}function bl(i,t){return Ba(i,t).canonicalString()}function Ba(i,t){const e=function(r){return new kt(["projects",r.projectId,"databases",r.database])}(i).child("documents");return t===void 0?e:e.child(t)}function fd(i){const t=kt.fromString(i);return St(gd(t)),t}function Ua(i,t){return bl(i.databaseId,t.path)}function oa(i,t){const e=fd(t);if(e.get(1)!==i.databaseId.projectId)throw new J(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+i.databaseId.projectId);if(e.get(3)!==i.databaseId.database)throw new J(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+i.databaseId.database);return new et(_d(e))}function dd(i,t){return bl(i.databaseId,t)}function h0(i){const t=fd(i);return t.length===4?kt.emptyPath():_d(t)}function za(i){return new kt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function _d(i){return St(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function Wc(i,t,e){return{name:Ua(i,t),fields:e.value.mapValue.fields}}function f0(i,t){let e;if("targetChange"in t){t.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:it()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(St(h===void 0||typeof h=="string"),ge.fromBase64String(h||"")):(St(h===void 0||h instanceof Buffer||h instanceof Uint8Array),ge.fromUint8Array(h||new Uint8Array))}(i,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(c){const h=c.code===void 0?L.UNKNOWN:ld(c.code);return new J(h,c.message||"")}(o);e=new cd(n,r,s,l||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const r=oa(i,n.document.name),s=hn(n.document.updateTime),o=n.document.createTime?hn(n.document.createTime):ot.min(),l=new be({mapValue:{fields:n.document.fields}}),u=fe.newFoundDocument(r,s,o,l),c=n.targetIds||[],h=n.removedTargetIds||[];e=new Fs(c,h,u.key,u)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const r=oa(i,n.document),s=n.readTime?hn(n.readTime):ot.min(),o=fe.newNoDocument(r,s),l=n.removedTargetIds||[];e=new Fs([],l,o.key,o)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const r=oa(i,n.document),s=n.removedTargetIds||[];e=new Fs([],s,r,null)}else{if(!("filter"in t))return it();{t.filter;const n=t.filter;n.targetId;const{count:r=0,unchangedNames:s}=n,o=new e0(r,s),l=n.targetId;e=new ud(l,o)}}return e}function d0(i,t){let e;if(t instanceof is)e={update:Wc(i,t.key,t.value)};else if(t instanceof wl)e={delete:Ua(i,t.key)};else if(t instanceof Qn)e={update:Wc(i,t.key,t.data),updateMask:w0(t.fieldMask)};else{if(!(t instanceof Jy))return it();e={verify:Ua(i,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(n=>function(s,o){const l=o.transform;if(l instanceof no)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ki)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Wi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ro)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw it()}(0,n))),t.precondition.isNone||(e.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:c0(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:it()}(i,t.precondition)),e}function _0(i,t){return i&&i.length>0?(St(t!==void 0),i.map(e=>function(r,s){let o=r.updateTime?hn(r.updateTime):hn(s);return o.isEqual(ot.min())&&(o=hn(s)),new Qy(o,r.transformResults||[])}(e,t))):[]}function m0(i,t){return{documents:[dd(i,t.path)]}}function p0(i,t){const e={structuredQuery:{}},n=t.path;let r;t.collectionGroup!==null?(r=n,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=n.popLast(),e.structuredQuery.from=[{collectionId:n.lastSegment()}]),e.parent=dd(i,r);const s=function(c){if(c.length!==0)return pd(mn.create(c,"and"))}(t.filters);s&&(e.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:Vr(m.field),direction:v0(m.dir)}}(h))}(t.orderBy);o&&(e.structuredQuery.orderBy=o);const l=$a(i,t.limit);return l!==null&&(e.structuredQuery.limit=l),t.startAt&&(e.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{_t:e,parent:r}}function g0(i){let t=h0(i.parent);const e=i.structuredQuery,n=e.from?e.from.length:0;let r=null;if(n>0){St(n===1);const h=e.from[0];h.allDescendants?r=h.collectionId:t=t.child(h.collectionId)}let s=[];e.where&&(s=function(d){const m=md(d);return m instanceof mn&&Gf(m)?m.getFilters():[m]}(e.where));let o=[];e.orderBy&&(o=function(d){return d.map(m=>function(y){return new eo(kr(y.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(m))}(e.orderBy));let l=null;e.limit&&(l=function(d){let m;return m=typeof d=="object"?d.value:d,mo(m)?null:m}(e.limit));let u=null;e.startAt&&(u=function(d){const m=!!d.before,g=d.values||[];return new to(g,m)}(e.startAt));let c=null;return e.endAt&&(c=function(d){const m=!d.before,g=d.values||[];return new to(g,m)}(e.endAt)),Ny(t,r,o,s,l,"F",u,c)}function y0(i,t){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return it()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function md(i){return i.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=kr(e.unaryFilter.field);return Yt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=kr(e.unaryFilter.field);return Yt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=kr(e.unaryFilter.field);return Yt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=kr(e.unaryFilter.field);return Yt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return it()}}(i):i.fieldFilter!==void 0?function(e){return Yt.create(kr(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(e.fieldFilter.op),e.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(e){return mn.create(e.compositeFilter.filters.map(n=>md(n)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return it()}}(e.compositeFilter.op))}(i):it()}function v0(i){return o0[i]}function T0(i){return a0[i]}function E0(i){return l0[i]}function Vr(i){return{fieldPath:i.canonicalString()}}function kr(i){return oe.fromServerFormat(i.fieldPath)}function pd(i){return i instanceof Yt?function(e){if(e.op==="=="){if(Oc(e.value))return{unaryFilter:{field:Vr(e.field),op:"IS_NAN"}};if(xc(e.value))return{unaryFilter:{field:Vr(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Oc(e.value))return{unaryFilter:{field:Vr(e.field),op:"IS_NOT_NAN"}};if(xc(e.value))return{unaryFilter:{field:Vr(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vr(e.field),op:T0(e.op),value:e.value}}}(i):i instanceof mn?function(e){const n=e.getFilters().map(r=>pd(r));return n.length===1?n[0]:{compositeFilter:{op:E0(e.op),filters:n}}}(i):it()}function w0(i){const t=[];return i.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function gd(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(t,e,n,r,s=ot.min(),o=ot.min(),l=ge.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new Mn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Mn(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Mn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Mn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(t){this.ct=t}}function A0(i){const t=g0({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?La(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(){this._n=new R0}addToCollectionParentIndex(t,e){return this._n.add(e),$.resolve()}getCollectionParents(t,e){return $.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return $.resolve()}deleteFieldIndex(t,e){return $.resolve()}deleteAllFieldIndexes(t){return $.resolve()}createTargetIndexes(t,e){return $.resolve()}getDocumentsMatchingTarget(t,e){return $.resolve(null)}getIndexType(t,e){return $.resolve(0)}getFieldIndexes(t,e){return $.resolve([])}getNextCollectionGroupToUpdate(t){return $.resolve(null)}getMinOffset(t,e){return $.resolve(qn.min())}getMinOffsetFromCollectionGroup(t,e){return $.resolve(qn.min())}updateCollectionGroup(t,e,n){return $.resolve()}updateIndexEntries(t,e){return $.resolve()}}class R0{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new ae(kt.comparator),s=!r.has(n);return this.index[e]=r.add(n),s}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new ae(kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new Qr(0)}static Ln(){return new Qr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(){this.changes=new ei(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,fe.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return n!==void 0?$.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(t,e,n,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(n=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(n!==null&&Vi(n.mutation,r,$e.empty(),Jt.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(n=>this.getLocalViewOfDocuments(t,n,ft()).next(()=>n))}getLocalViewOfDocuments(t,e,n=ft()){const r=sr();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,n).next(s=>{let o=wi();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){const n=sr();return this.populateOverlays(t,n,e).next(()=>this.computeViews(t,e,n,ft()))}populateOverlays(t,e,n){const r=[];return n.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,l)=>{e.set(o,l)})})}computeViews(t,e,n,r){let s=Pn();const o=Di(),l=function(){return Di()}();return e.forEach((u,c)=>{const h=n.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof Qn)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Vi(h.mutation,c,h.mutation.getFieldMask(),Jt.now())):o.set(c.key,$e.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((c,h)=>o.set(c,h)),e.forEach((c,h)=>{var d;return l.set(c,new C0(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),l))}recalculateAndSaveOverlays(t,e){const n=Di();let r=new $t((o,l)=>o-l),s=ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=e.get(u);if(c===null)return;let h=n.get(u)||$e.empty();h=l.applyToLocalView(c,h),n.set(u,h);const d=(r.get(l.batchId)||ft()).add(u);r=r.insert(l.batchId,d)})}).next(()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,h=u.value,d=Zf();h.forEach(m=>{if(!s.has(m)){const g=od(e.get(m),n.get(m));g!==null&&d.set(m,g),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,d))}return $.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,e,n,r){return function(o){return et.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):My(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,r):this.getDocumentsMatchingCollectionQuery(t,e,n,r)}getNextDocuments(t,e,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-s.size):$.resolve(sr());let l=-1,u=s;return o.next(c=>$.forEach(c,(h,d)=>(l<d.largestBatchId&&(l=d.largestBatchId),s.get(h)?$.resolve():this.remoteDocumentCache.getEntry(t,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(t,c,s)).next(()=>this.computeViews(t,u,c,ft())).next(h=>({batchId:l,changes:Jf(h)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new et(e)).next(n=>{let r=wi();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,n,r){const s=e.collectionGroup;let o=wi();return this.indexManager.getCollectionParents(t,s).next(l=>$.forEach(l,u=>{const c=function(d,m){return new po(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(e,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,c,n,r).next(h=>{h.forEach((d,m)=>{o=o.insert(d,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,s,r))).next(o=>{s.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,fe.newInvalidDocument(h)))});let l=wi();return o.forEach((u,c)=>{const h=s.get(u);h!==void 0&&Vi(h.mutation,c,$e.empty(),Jt.now()),vo(e,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return $.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:hn(r.createTime)}}(e)),$.resolve()}getNamedQuery(t,e){return $.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,function(r){return{name:r.name,query:A0(r.bundledQuery),readTime:hn(r.readTime)}}(e)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(){this.overlays=new $t(et.comparator),this.hr=new Map}getOverlay(t,e){return $.resolve(this.overlays.get(e))}getOverlays(t,e){const n=sr();return $.forEach(e,r=>this.getOverlay(t,r).next(s=>{s!==null&&n.set(r,s)})).next(()=>n)}saveOverlays(t,e,n){return n.forEach((r,s)=>{this.ht(t,e,s)}),$.resolve()}removeOverlaysForBatchId(t,e,n){const r=this.hr.get(n);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(n)),$.resolve()}getOverlaysForCollection(t,e,n){const r=sr(),s=e.length+1,o=new et(e.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!e.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>n&&r.set(u.getKey(),u)}return $.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let s=new $t((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===e&&c.largestBatchId>n){let h=s.get(c.largestBatchId);h===null&&(h=sr(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const l=sr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>l.set(c,h)),!(l.size()>=r)););return $.resolve(l)}ht(t,e,n){const r=this.overlays.get(n.key);if(r!==null){const o=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new t0(e,n));let s=this.hr.get(e);s===void 0&&(s=ft(),this.hr.set(e,s)),this.hr.set(e,s.add(n.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(){this.Pr=new ae(te.Ir),this.Tr=new ae(te.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){const n=new te(t,e);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(t,e){t.forEach(n=>this.addReference(n,e))}removeReference(t,e){this.Ar(new te(t,e))}Rr(t,e){t.forEach(n=>this.removeReference(n,e))}Vr(t){const e=new et(new kt([])),n=new te(e,t),r=new te(e,t+1),s=[];return this.Tr.forEachInRange([n,r],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const e=new et(new kt([])),n=new te(e,t),r=new te(e,t+1);let s=ft();return this.Tr.forEachInRange([n,r],o=>{s=s.add(o.key)}),s}containsKey(t){const e=new te(t,0),n=this.Pr.firstAfterOrEqual(e);return n!==null&&t.isEqual(n.key)}}class te{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return et.comparator(t.key,e.key)||wt(t.pr,e.pr)}static Er(t,e){return wt(t.pr,e.pr)||et.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new ae(te.Ir)}checkEmpty(t){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,n,r){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Zy(s,e,n,r);this.mutationQueue.push(o);for(const l of r)this.wr=this.wr.add(new te(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return $.resolve(o)}lookupMutationBatch(t,e){return $.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=this.br(n),s=r<0?0:r;return $.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new te(e,0),r=new te(e,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([n,r],o=>{const l=this.Sr(o.pr);s.push(l)}),$.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new ae(wt);return e.forEach(r=>{const s=new te(r,0),o=new te(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],l=>{n=n.add(l.pr)})}),$.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let s=n;et.isDocumentKey(s)||(s=s.child(""));const o=new te(new et(s),0);let l=new ae(wt);return this.wr.forEachWhile(u=>{const c=u.key.path;return!!n.isPrefixOf(c)&&(c.length===r&&(l=l.add(u.pr)),!0)},o),$.resolve(this.Dr(l))}Dr(t){const e=[];return t.forEach(n=>{const r=this.Sr(n);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){St(this.Cr(e.batchId,"removed")===0),this.mutationQueue.shift();let n=this.wr;return $.forEach(e.mutations,r=>{const s=new te(r.key,e.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.wr=n})}Mn(t){}containsKey(t,e){const n=new te(e,0),r=this.wr.firstAfterOrEqual(n);return $.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,$.resolve()}Cr(t,e){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(t){this.vr=t,this.docs=function(){return new $t(et.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,r=this.docs.get(n),s=r?r.size:0,o=this.vr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return $.resolve(n?n.document.mutableCopy():fe.newInvalidDocument(e))}getEntries(t,e){let n=Pn();return e.forEach(r=>{const s=this.docs.get(r);n=n.insert(r,s?s.document.mutableCopy():fe.newInvalidDocument(r))}),$.resolve(n)}getDocumentsMatchingQuery(t,e,n,r){let s=Pn();const o=e.path,l=new et(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||gy(py(h),n)<=0||(r.has(h.key)||vo(e,h))&&(s=s.insert(h.key,h.mutableCopy()))}return $.resolve(s)}getAllFromCollectionGroup(t,e,n,r){it()}Fr(t,e){return $.forEach(this.docs,n=>e(n))}newChangeBuffer(t){return new O0(this)}getSize(t){return $.resolve(this.size)}}class O0 extends P0{constructor(t){super(),this.ar=t}applyChanges(t){const e=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?e.push(this.ar.addEntry(t,r)):this.ar.removeEntry(n)}),$.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(t){this.persistence=t,this.Mr=new ei(e=>Tl(e),El),this.lastRemoteSnapshotVersion=ot.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Rl,this.targetCount=0,this.Lr=Qr.Nn()}forEachTarget(t,e){return this.Mr.forEach((n,r)=>e(r)),$.resolve()}getLastRemoteSnapshotVersion(t){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return $.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Or&&(this.Or=e),$.resolve()}qn(t){this.Mr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Lr=new Qr(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,$.resolve()}updateTargetData(t,e){return this.qn(e),$.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,$.resolve()}removeTargets(t,e,n){let r=0;const s=[];return this.Mr.forEach((o,l)=>{l.sequenceNumber<=e&&n.get(l.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),$.waitFor(s).next(()=>r)}getTargetCount(t){return $.resolve(this.targetCount)}getTargetData(t,e){const n=this.Mr.get(e)||null;return $.resolve(n)}addMatchingKeys(t,e,n){return this.Nr.dr(e,n),$.resolve()}removeMatchingKeys(t,e,n){this.Nr.Rr(e,n);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),$.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),$.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Nr.gr(e);return $.resolve(n)}containsKey(t,e){return $.resolve(this.Nr.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(t,e){this.Br={},this.overlays={},this.kr=new pl(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new N0(this),this.indexManager=new b0,this.remoteDocumentCache=function(r){return new x0(r)}(n=>this.referenceDelegate.Kr(n)),this.serializer=new I0(e),this.$r=new D0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new V0,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Br[t.toKey()];return n||(n=new k0(e,this.referenceDelegate),this.Br[t.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,n){W("MemoryPersistence","Starting transaction:",t);const r=new F0(this.kr.next());return this.referenceDelegate.Ur(),n(r).next(s=>this.referenceDelegate.Wr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gr(t,e){return $.or(Object.values(this.Br).map(n=>()=>n.containsKey(t,e)))}}class F0 extends vy{constructor(t){super(),this.currentSequenceNumber=t}}class Pl{constructor(t){this.persistence=t,this.zr=new Rl,this.jr=null}static Hr(t){return new Pl(t)}get Jr(){if(this.jr)return this.jr;throw it()}addReference(t,e,n){return this.zr.addReference(n,e),this.Jr.delete(n.toString()),$.resolve()}removeReference(t,e,n){return this.zr.removeReference(n,e),this.Jr.add(n.toString()),$.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),$.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach(r=>this.Jr.add(r.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Jr.add(s.toString()))}).next(()=>n.removeTargetData(t,e))}Ur(){this.jr=new Set}Wr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Jr,n=>{const r=et.fromPath(n);return this.Yr(t,r).next(s=>{s||e.removeEntry(r,ot.min())})}).next(()=>(this.jr=null,e.apply(t)))}updateLimboDocument(t,e){return this.Yr(t,e).next(n=>{n?this.Jr.delete(e.toString()):this.Jr.add(e.toString())})}Kr(t){return 0}Yr(t,e){return $.or([()=>$.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.qi=n,this.Qi=r}static Ki(t,e){let n=ft(),r=ft();for(const s of e.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Cl(t,e.fromCache,n,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return jp()?8:Ty(Up())>0?6:4}()}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,n,r){const s={result:null};return this.ji(t,e).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,e,r,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new L0;return this.Ji(t,e,o).next(l=>{if(s.result=l,this.Ui)return this.Yi(t,e,o,l.size)})}).next(()=>s.result)}Yi(t,e,n,r){return n.documentReadCount<this.Wi?(yi()<=pt.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Dr(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),$.resolve()):(yi()<=pt.DEBUG&&W("QueryEngine","Query:",Dr(e),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(yi()<=pt.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Dr(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,cn(e))):$.resolve())}ji(t,e){if(Lc(e))return $.resolve(null);let n=cn(e);return this.indexManager.getIndexType(t,n).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=La(e,null,"F"),n=cn(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{const o=ft(...s);return this.zi.getDocuments(t,o).next(l=>this.indexManager.getMinOffset(t,n).next(u=>{const c=this.Zi(e,l);return this.Xi(e,c,o,u.readTime)?this.ji(t,La(e,null,"F")):this.es(t,c,e,u)}))})))}Hi(t,e,n,r){return Lc(e)||r.isEqual(ot.min())?$.resolve(null):this.zi.getDocuments(t,n).next(s=>{const o=this.Zi(e,s);return this.Xi(e,o,n,r)?$.resolve(null):(yi()<=pt.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Dr(e)),this.es(t,o,e,my(r,-1)).next(l=>l))})}Zi(t,e){let n=new ae(Xf(t));return e.forEach((r,s)=>{vo(t,s)&&(n=n.add(s))}),n}Xi(t,e,n,r){if(t.limit===null)return!1;if(n.size!==e.size)return!0;const s=t.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ji(t,e,n){return yi()<=pt.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Dr(e)),this.zi.getDocumentsMatchingQuery(t,e,qn.min(),n)}es(t,e,n,r){return this.zi.getDocumentsMatchingQuery(t,n,r).next(s=>(e.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(t,e,n,r){this.persistence=t,this.ts=e,this.serializer=r,this.ns=new $t(wt),this.rs=new ei(s=>Tl(s),El),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(n)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new S0(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ns))}}function U0(i,t,e,n){return new B0(i,t,e,n)}async function yd(i,t){const e=ct(i);return await e.persistence.runTransaction("Handle user change","readonly",n=>{let r;return e.mutationQueue.getAllMutationBatches(n).next(s=>(r=s,e._s(t),e.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],l=[];let u=ft();for(const c of r){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of s){l.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return e.localDocuments.getDocuments(n,u).next(c=>({us:c,removedBatchIds:o,addedBatchIds:l}))})})}function z0(i,t){const e=ct(i);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const r=t.batch.keys(),s=e.os.newChangeBuffer({trackRemovals:!0});return function(l,u,c,h){const d=c.batch,m=d.keys();let g=$.resolve();return m.forEach(y=>{g=g.next(()=>h.getEntry(u,y)).next(p=>{const T=c.docVersions.get(y);St(T!==null),p.version.compareTo(T)<0&&(d.applyToRemoteDocument(p,c),p.isValidDocument()&&(p.setReadTime(c.commitVersion),h.addEntry(p)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(u,d))}(e,n,t,s).next(()=>s.apply(n)).next(()=>e.mutationQueue.performConsistencyCheck(n)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(n,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let u=ft();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(t))).next(()=>e.localDocuments.getDocuments(n,r))})}function vd(i){const t=ct(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Qr.getLastRemoteSnapshotVersion(e))}function j0(i,t){const e=ct(i),n=t.snapshotVersion;let r=e.ns;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=e.os.newChangeBuffer({trackRemovals:!0});r=e.ns;const l=[];t.targetChanges.forEach((h,d)=>{const m=r.get(d);if(!m)return;l.push(e.Qr.removeMatchingKeys(s,h.removedDocuments,d).next(()=>e.Qr.addMatchingKeys(s,h.addedDocuments,d)));let g=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(d)!==null?g=g.withResumeToken(ge.EMPTY_BYTE_STRING,ot.min()).withLastLimboFreeSnapshotVersion(ot.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,n)),r=r.insert(d,g),function(p,T,C){return p.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(m,g,h)&&l.push(e.Qr.updateTargetData(s,g))});let u=Pn(),c=ft();if(t.documentUpdates.forEach(h=>{t.resolvedLimboDocuments.has(h)&&l.push(e.persistence.referenceDelegate.updateLimboDocument(s,h))}),l.push(q0(s,o,t.documentUpdates).next(h=>{u=h.cs,c=h.ls})),!n.isEqual(ot.min())){const h=e.Qr.getLastRemoteSnapshotVersion(s).next(d=>e.Qr.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(h)}return $.waitFor(l).next(()=>o.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(e.ns=r,s))}function q0(i,t,e){let n=ft(),r=ft();return e.forEach(s=>n=n.add(s)),t.getEntries(i,n).next(s=>{let o=Pn();return e.forEach((l,u)=>{const c=s.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(ot.min())?(t.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(u),o=o.insert(l,u)):W("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{cs:o,ls:r}})}function G0(i,t){const e=ct(i);return e.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function H0(i,t){const e=ct(i);return e.persistence.runTransaction("Allocate target","readwrite",n=>{let r;return e.Qr.getTargetData(n,t).next(s=>s?(r=s,$.resolve(r)):e.Qr.allocateTargetId(n).next(o=>(r=new Mn(t,o,"TargetPurposeListen",n.currentSequenceNumber),e.Qr.addTargetData(n,r).next(()=>r))))}).then(n=>{const r=e.ns.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.ns=e.ns.insert(n.targetId,n),e.rs.set(t,n.targetId)),n})}async function ja(i,t,e){const n=ct(i),r=n.ns.get(t),s=e?"readwrite":"readwrite-primary";try{e||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!rs(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}n.ns=n.ns.remove(t),n.rs.delete(r.target)}function Qc(i,t,e){const n=ct(i);let r=ot.min(),s=ft();return n.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const d=ct(u),m=d.rs.get(h);return m!==void 0?$.resolve(d.ns.get(m)):d.Qr.getTargetData(c,h)}(n,o,cn(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,n.Qr.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>n.ts.getDocumentsMatchingQuery(o,t,e?r:ot.min(),e?s:ft())).next(l=>(K0(n,Ly(t),l),{documents:l,hs:s})))}function K0(i,t,e){let n=i.ss.get(t)||ot.min();e.forEach((r,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),i.ss.set(t,n)}class Xc{constructor(){this.activeTargetIds=qy()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class W0{constructor(){this.no=new Xc,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,n){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Xc,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ds=null;function aa(){return Ds===null?Ds=function(){return 268435456+Math.round(2147483648*Math.random())}():Ds++,"0x"+Ds.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce="WebChannelConnection";class J0 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=n+"://"+e.host,this.So=`projects/${r}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Do(){return!1}Co(e,n,r,s,o){const l=aa(),u=this.vo(e,n.toUriEncodedString());W("RestConnection",`Sending RPC '${e}' ${l}:`,u,r);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(e,u,c,r).then(h=>(W("RestConnection",`Received RPC '${e}' ${l}: `,h),h),h=>{throw Gr("RestConnection",`RPC '${e}' ${l} failed with error: `,h,"url: ",u,"request:",r),h})}xo(e,n,r,s,o,l){return this.Co(e,n,r,s,o)}Fo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ti}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}vo(e,n){const r=X0[e];return`${this.wo}/v1/${n}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,e,n,r){const s=aa();return new Promise((o,l)=>{const u=new kf;u.setWithCredentials(!0),u.listenOnce(Of.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Os.NO_ERROR:const h=u.getResponseJson();W(ce,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(h)),o(h);break;case Os.TIMEOUT:W(ce,`RPC '${t}' ${s} timed out`),l(new J(L.DEADLINE_EXCEEDED,"Request time out"));break;case Os.HTTP_ERROR:const d=u.getStatus();if(W(ce,`RPC '${t}' ${s} failed with status:`,d,"response text:",u.getResponseText()),d>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const y=function(T){const C=T.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(C)>=0?C:L.UNKNOWN}(g.status);l(new J(y,g.message))}else l(new J(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new J(L.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{W(ce,`RPC '${t}' ${s} completed.`)}});const c=JSON.stringify(r);W(ce,`RPC '${t}' ${s} sending request:`,r),u.send(e,"POST",c,n,15)})}Oo(t,e,n){const r=aa(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Ff(),l=Mf(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new xf({})),this.Fo(u.initMessageHeaders,e,n),u.encodeInitMessageHeaders=!0;const h=s.join("");W(ce,`Creating RPC '${t}' stream ${r}: ${h}`,u);const d=o.createWebChannel(h,u);let m=!1,g=!1;const y=new Y0({lo:T=>{g?W(ce,`Not sending because RPC '${t}' stream ${r} is closed:`,T):(m||(W(ce,`Opening RPC '${t}' stream ${r} transport.`),d.open(),m=!0),W(ce,`RPC '${t}' stream ${r} sending:`,T),d.send(T))},ho:()=>d.close()}),p=(T,C,b)=>{T.listen(C,D=>{try{b(D)}catch(V){setTimeout(()=>{throw V},0)}})};return p(d,Ei.EventType.OPEN,()=>{g||(W(ce,`RPC '${t}' stream ${r} transport opened.`),y.mo())}),p(d,Ei.EventType.CLOSE,()=>{g||(g=!0,W(ce,`RPC '${t}' stream ${r} transport closed`),y.po())}),p(d,Ei.EventType.ERROR,T=>{g||(g=!0,Gr(ce,`RPC '${t}' stream ${r} transport errored:`,T),y.po(new J(L.UNAVAILABLE,"The operation could not be completed")))}),p(d,Ei.EventType.MESSAGE,T=>{var C;if(!g){const b=T.data[0];St(!!b);const D=b,V=D.error||((C=D[0])===null||C===void 0?void 0:C.error);if(V){W(ce,`RPC '${t}' stream ${r} received error:`,V);const k=V.status;let O=function(v){const R=Kt[v];if(R!==void 0)return ld(R)}(k),I=V.message;O===void 0&&(O=L.INTERNAL,I="Unknown error status: "+k+" with message "+V.message),g=!0,y.po(new J(O,I)),d.close()}else W(ce,`RPC '${t}' stream ${r} received:`,b),y.yo(b)}}),p(l,Nf.STAT_EVENT,T=>{T.stat===xa.PROXY?W(ce,`RPC '${t}' stream ${r} detected buffering proxy`):T.stat===xa.NOPROXY&&W(ce,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{y.fo()},0),y}}function la(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(i){return new u0(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(t,e,n=1e3,r=1.5,s=6e4){this.oi=t,this.timerId=e,this.No=n,this.Lo=r,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const e=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),r=Math.max(0,e-n);r>0&&W("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ed{constructor(t,e,n,r,s,o,l,u){this.oi=t,this.Go=n,this.zo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Td(t,e)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,e){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():e&&e.code===L.RESOURCE_EXHAUSTED?(Rn(e.toString()),Rn("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):e&&e.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(e)}__(){}auth(){this.state=1;const t=this.a_(this.jo),e=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,r])=>{this.jo===e&&this.u_(n,r)},n=>{t(()=>{const r=new J(L.UNKNOWN,"Fetching auth token failed: "+n.message);return this.c_(r)})})}u_(t,e){const n=this.a_(this.jo);this.stream=this.l_(t,e),this.stream.Po(()=>{n(()=>this.listener.Po())}),this.stream.To(()=>{n(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{n(()=>this.c_(r))}),this.stream.onMessage(r=>{n(()=>this.onMessage(r))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return W("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return e=>{this.oi.enqueueAndForget(()=>this.jo===t?e():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Z0 extends Ed{constructor(t,e,n,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,o),this.serializer=s}l_(t,e){return this.connection.Oo("Listen",t,e)}onMessage(t){this.Yo.reset();const e=f0(this.serializer,t),n=function(s){if(!("targetChange"in s))return ot.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ot.min():o.readTime?hn(o.readTime):ot.min()}(t);return this.listener.h_(e,n)}P_(t){const e={};e.database=za(this.serializer),e.addTarget=function(s,o){let l;const u=o.target;if(l=Fa(u)?{documents:m0(s,u)}:{query:p0(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=hd(s,o.resumeToken);const c=$a(s,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(ot.min())>0){l.readTime=io(s,o.snapshotVersion.toTimestamp());const c=$a(s,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,t);const n=y0(this.serializer,t);n&&(e.labels=n),this.i_(e)}I_(t){const e={};e.database=za(this.serializer),e.removeTarget=t,this.i_(e)}}class tv extends Ed{constructor(t,e,n,r,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,e){return this.connection.Oo("Write",t,e)}onMessage(t){if(St(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const e=_0(t.writeResults,t.commitTime),n=hn(t.commitTime);return this.listener.A_(n,e)}return St(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=za(this.serializer),this.i_(t)}d_(t){const e={streamToken:this.lastStreamToken,writes:t.map(n=>d0(this.serializer,n))};this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev extends class{}{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new J(L.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,e,n,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,Ba(e,n),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(L.UNKNOWN,s.toString())})}xo(t,e,n,r,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.xo(t,Ba(e,n),r,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(L.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class nv{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Rn(e),this.y_=!1):W("OnlineStateTracker",e)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(t,e,n,r,s){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{n.enqueueAndForget(async()=>{wr(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=ct(u);c.M_.add(4),await os(c),c.N_.set("Unknown"),c.M_.delete(4),await Ao(c)}(this))})}),this.N_=new nv(n,r)}}async function Ao(i){if(wr(i))for(const t of i.x_)await t(!0)}async function os(i){for(const t of i.x_)await t(!1)}function wd(i,t){const e=ct(i);e.F_.has(t.targetId)||(e.F_.set(t.targetId,t),kl(e)?Vl(e):ni(e).Xo()&&Dl(e,t))}function Sl(i,t){const e=ct(i),n=ni(e);e.F_.delete(t),n.Xo()&&Id(e,t),e.F_.size===0&&(n.Xo()?n.n_():wr(e)&&e.N_.set("Unknown"))}function Dl(i,t){if(i.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ot.min())>0){const e=i.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}ni(i).P_(t)}function Id(i,t){i.L_.xe(t),ni(i).I_(t)}function Vl(i){i.L_=new s0({getRemoteKeysForTarget:t=>i.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>i.F_.get(t)||null,tt:()=>i.datastore.serializer.databaseId}),ni(i).start(),i.N_.w_()}function kl(i){return wr(i)&&!ni(i).Zo()&&i.F_.size>0}function wr(i){return ct(i).M_.size===0}function Ad(i){i.L_=void 0}async function iv(i){i.N_.set("Online")}async function sv(i){i.F_.forEach((t,e)=>{Dl(i,t)})}async function ov(i,t){Ad(i),kl(i)?(i.N_.D_(t),Vl(i)):i.N_.set("Unknown")}async function av(i,t,e){if(i.N_.set("Online"),t instanceof cd&&t.state===2&&t.cause)try{await async function(r,s){const o=s.cause;for(const l of s.targetIds)r.F_.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.F_.delete(l),r.L_.removeTarget(l))}(i,t)}catch(n){W("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await so(i,n)}else if(t instanceof Fs?i.L_.Ke(t):t instanceof ud?i.L_.He(t):i.L_.We(t),!e.isEqual(ot.min()))try{const n=await vd(i.localStore);e.compareTo(n)>=0&&await function(s,o){const l=s.L_.rt(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.F_.get(c);h&&s.F_.set(c,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const h=s.F_.get(u);if(!h)return;s.F_.set(u,h.withResumeToken(ge.EMPTY_BYTE_STRING,h.snapshotVersion)),Id(s,u);const d=new Mn(h.target,u,c,h.sequenceNumber);Dl(s,d)}),s.remoteSyncer.applyRemoteEvent(l)}(i,e)}catch(n){W("RemoteStore","Failed to raise snapshot:",n),await so(i,n)}}async function so(i,t,e){if(!rs(t))throw t;i.M_.add(1),await os(i),i.N_.set("Offline"),e||(e=()=>vd(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await e(),i.M_.delete(1),await Ao(i)})}function bd(i,t){return t().catch(e=>so(i,e,t))}async function bo(i){const t=ct(i),e=Hn(t);let n=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;lv(t);)try{const r=await G0(t.localStore,n);if(r===null){t.v_.length===0&&e.n_();break}n=r.batchId,uv(t,r)}catch(r){await so(t,r)}Rd(t)&&Pd(t)}function lv(i){return wr(i)&&i.v_.length<10}function uv(i,t){i.v_.push(t);const e=Hn(i);e.Xo()&&e.E_&&e.d_(t.mutations)}function Rd(i){return wr(i)&&!Hn(i).Zo()&&i.v_.length>0}function Pd(i){Hn(i).start()}async function cv(i){Hn(i).V_()}async function hv(i){const t=Hn(i);for(const e of i.v_)t.d_(e.mutations)}async function fv(i,t,e){const n=i.v_.shift(),r=Il.from(n,t,e);await bd(i,()=>i.remoteSyncer.applySuccessfulWrite(r)),await bo(i)}async function dv(i,t){t&&Hn(i).E_&&await async function(n,r){if(function(o){return n0(o)&&o!==L.ABORTED}(r.code)){const s=n.v_.shift();Hn(n).t_(),await bd(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await bo(n)}}(i,t),Rd(i)&&Pd(i)}async function Jc(i,t){const e=ct(i);e.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const n=wr(e);e.M_.add(3),await os(e),n&&e.N_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.M_.delete(3),await Ao(e)}async function _v(i,t){const e=ct(i);t?(e.M_.delete(2),await Ao(e)):t||(e.M_.add(2),await os(e),e.N_.set("Unknown"))}function ni(i){return i.B_||(i.B_=function(e,n,r){const s=ct(e);return s.f_(),new Z0(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{Po:iv.bind(null,i),To:sv.bind(null,i),Ao:ov.bind(null,i),h_:av.bind(null,i)}),i.x_.push(async t=>{t?(i.B_.t_(),kl(i)?Vl(i):i.N_.set("Unknown")):(await i.B_.stop(),Ad(i))})),i.B_}function Hn(i){return i.k_||(i.k_=function(e,n,r){const s=ct(e);return s.f_(),new tv(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{Po:()=>Promise.resolve(),To:cv.bind(null,i),Ao:dv.bind(null,i),R_:hv.bind(null,i),A_:fv.bind(null,i)}),i.x_.push(async t=>{t?(i.k_.t_(),await bo(i)):(await i.k_.stop(),i.v_.length>0&&(W("RemoteStore",`Stopping write stream with ${i.v_.length} pending writes`),i.v_=[]))})),i.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(t,e,n,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new En,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,r,s){const o=Date.now()+n,l=new xl(t,e,o,r,s);return l.start(n),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(L.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ol(i,t){if(Rn("AsyncQueue",`${t}: ${i}`),rs(i))return new J(L.UNAVAILABLE,`${t}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(t){this.comparator=t?(e,n)=>t(e,n)||et.comparator(e.key,n.key):(e,n)=>et.comparator(e.key,n.key),this.keyedMap=wi(),this.sortedSet=new $t(this.comparator)}static emptySet(t){return new $r(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,n)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof $r)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=n.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const n=new $r;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(){this.q_=new $t(et.comparator)}track(t){const e=t.doc.key,n=this.q_.get(e);n?t.type!==0&&n.type===3?this.q_=this.q_.insert(e,t):t.type===3&&n.type!==1?this.q_=this.q_.insert(e,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.q_=this.q_.insert(e,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.q_=this.q_.remove(e):t.type===1&&n.type===2?this.q_=this.q_.insert(e,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):it():this.q_=this.q_.insert(e,t)}Q_(){const t=[];return this.q_.inorderTraversal((e,n)=>{t.push(n)}),t}}class Xr{constructor(t,e,n,r,s,o,l,u,c){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(t,e,n,r,s){const o=[];return e.forEach(l=>{o.push({type:0,doc:l})}),new Xr(t,e,$r.emptySet(e),o,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&yo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class pv{constructor(){this.queries=new ei(t=>Qf(t),yo),this.onlineState="Unknown",this.z_=new Set}}async function Nl(i,t){const e=ct(i);let n=3;const r=t.query;let s=e.queries.get(r);s?!s.W_()&&t.G_()&&(n=2):(s=new mv,n=t.G_()?0:1);try{switch(n){case 0:s.K_=await e.onListen(r,!0);break;case 1:s.K_=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(o){const l=Ol(o,`Initialization of query '${Dr(t.query)}' failed`);return void t.onError(l)}e.queries.set(r,s),s.U_.push(t),t.j_(e.onlineState),s.K_&&t.H_(s.K_)&&Fl(e)}async function Ml(i,t){const e=ct(i),n=t.query;let r=3;const s=e.queries.get(n);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?r=t.G_()?0:1:!s.W_()&&t.G_()&&(r=2))}switch(r){case 0:return e.queries.delete(n),e.onUnlisten(n,!0);case 1:return e.queries.delete(n),e.onUnlisten(n,!1);case 2:return e.onLastRemoteStoreUnlisten(n);default:return}}function gv(i,t){const e=ct(i);let n=!1;for(const r of t){const s=r.query,o=e.queries.get(s);if(o){for(const l of o.U_)l.H_(r)&&(n=!0);o.K_=r}}n&&Fl(e)}function yv(i,t,e){const n=ct(i),r=n.queries.get(t);if(r)for(const s of r.U_)s.onError(e);n.queries.delete(t)}function Fl(i){i.z_.forEach(t=>{t.next()})}var qa,th;(th=qa||(qa={})).J_="default",th.Cache="cache";class Ll{constructor(t,e,n){this.query=t,this.Y_=e,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(t){if(!this.options.includeMetadataChanges){const n=[];for(const r of t.docChanges)r.type!==3&&n.push(r);t=new Xr(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),e=!0):this.ta(t,this.onlineState)&&(this.na(t),e=!0),this.X_=t,e}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let e=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),e=!0),e}ta(t,e){if(!t.fromCache||!this.G_())return!0;const n=e!=="Offline";return(!this.options.ra||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const e=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}na(t){t=Xr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==qa.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(t){this.key=t}}class Sd{constructor(t){this.key=t}}class vv{constructor(t,e){this.query=t,this.la=e,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=ft(),this.mutatedKeys=ft(),this.Ia=Xf(t),this.Ta=new $r(this.Ia)}get Ea(){return this.la}da(t,e){const n=e?e.Aa:new Zc,r=e?e.Ta:this.Ta;let s=e?e.mutatedKeys:this.mutatedKeys,o=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((h,d)=>{const m=r.get(h),g=vo(this.query,d)?d:null,y=!!m&&this.mutatedKeys.has(m.key),p=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let T=!1;m&&g?m.data.isEqual(g.data)?y!==p&&(n.track({type:3,doc:g}),T=!0):this.Ra(m,g)||(n.track({type:2,doc:g}),T=!0,(u&&this.Ia(g,u)>0||c&&this.Ia(g,c)<0)&&(l=!0)):!m&&g?(n.track({type:0,doc:g}),T=!0):m&&!g&&(n.track({type:1,doc:m}),T=!0,(u||c)&&(l=!0)),T&&(g?(o=o.add(g),s=p?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),n.track({type:1,doc:h})}return{Ta:o,Aa:n,Xi:l,mutatedKeys:s}}Ra(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,r){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((h,d)=>function(g,y){const p=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return p(g)-p(y)}(h.type,d.type)||this.Ia(h.doc,d.doc)),this.Va(n),r=r!=null&&r;const l=e&&!r?this.ma():[],u=this.Pa.size===0&&this.current&&!r?1:0,c=u!==this.ha;return this.ha=u,o.length!==0||c?{snapshot:new Xr(this.query,t.Ta,s,o,t.mutatedKeys,u===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:l}:{fa:l}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Zc,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(e=>this.la=this.la.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.la=this.la.delete(e)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=ft(),this.Ta.forEach(n=>{this.ga(n.key)&&(this.Pa=this.Pa.add(n.key))});const e=[];return t.forEach(n=>{this.Pa.has(n)||e.push(new Sd(n))}),this.Pa.forEach(n=>{t.has(n)||e.push(new Cd(n))}),e}pa(t){this.la=t.hs,this.Pa=ft();const e=this.da(t.documents);return this.applyChanges(e,!0)}ya(){return Xr.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class Tv{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Ev{constructor(t){this.key=t,this.wa=!1}}class wv{constructor(t,e,n,r,s,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new ei(l=>Qf(l),yo),this.Da=new Map,this.Ca=new Set,this.va=new $t(et.comparator),this.Fa=new Map,this.Ma=new Rl,this.xa={},this.Oa=new Map,this.Na=Qr.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function Iv(i,t,e=!0){const n=Nd(i);let r;const s=n.ba.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ya()):r=await Dd(n,t,e,!0),r}async function Av(i,t){const e=Nd(i);await Dd(e,t,!0,!1)}async function Dd(i,t,e,n){const r=await H0(i.localStore,cn(t)),s=r.targetId,o=e?i.sharedClientState.addLocalQueryTarget(s):"not-current";let l;return n&&(l=await bv(i,t,s,o==="current",r.resumeToken)),i.isPrimaryClient&&e&&wd(i.remoteStore,r),l}async function bv(i,t,e,n,r){i.Ba=(d,m,g)=>async function(p,T,C,b){let D=T.view.da(C);D.Xi&&(D=await Qc(p.localStore,T.query,!1).then(({documents:I})=>T.view.da(I,D)));const V=b&&b.targetChanges.get(T.targetId),k=b&&b.targetMismatches.get(T.targetId)!=null,O=T.view.applyChanges(D,p.isPrimaryClient,V,k);return nh(p,T.targetId,O.fa),O.snapshot}(i,d,m,g);const s=await Qc(i.localStore,t,!0),o=new vv(t,s.hs),l=o.da(s.documents),u=ss.createSynthesizedTargetChangeForCurrentChange(e,n&&i.onlineState!=="Offline",r),c=o.applyChanges(l,i.isPrimaryClient,u);nh(i,e,c.fa);const h=new Tv(t,e,o);return i.ba.set(t,h),i.Da.has(e)?i.Da.get(e).push(t):i.Da.set(e,[t]),c.snapshot}async function Rv(i,t,e){const n=ct(i),r=n.ba.get(t),s=n.Da.get(r.targetId);if(s.length>1)return n.Da.set(r.targetId,s.filter(o=>!yo(o,t))),void n.ba.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await ja(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),e&&Sl(n.remoteStore,r.targetId),Ga(n,r.targetId)}).catch(ns)):(Ga(n,r.targetId),await ja(n.localStore,r.targetId,!0))}async function Pv(i,t){const e=ct(i),n=e.ba.get(t),r=e.Da.get(n.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(n.targetId),Sl(e.remoteStore,n.targetId))}async function Cv(i,t,e){const n=Nv(i);try{const r=await function(o,l){const u=ct(o),c=Jt.now(),h=l.reduce((g,y)=>g.add(y.key),ft());let d,m;return u.persistence.runTransaction("Locally write mutations","readwrite",g=>{let y=Pn(),p=ft();return u.os.getEntries(g,h).next(T=>{y=T,y.forEach((C,b)=>{b.isValidDocument()||(p=p.add(C))})}).next(()=>u.localDocuments.getOverlayedDocuments(g,y)).next(T=>{d=T;const C=[];for(const b of l){const D=Yy(b,d.get(b.key).overlayedDocument);D!=null&&C.push(new Qn(b.key,D,zf(D.value.mapValue),Ue.exists(!0)))}return u.mutationQueue.addMutationBatch(g,c,C,l)}).next(T=>{m=T;const C=T.applyToLocalDocumentSet(d,p);return u.documentOverlayCache.saveOverlays(g,T.batchId,C)})}).then(()=>({batchId:m.batchId,changes:Jf(d)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(r.batchId),function(o,l,u){let c=o.xa[o.currentUser.toKey()];c||(c=new $t(wt)),c=c.insert(l,u),o.xa[o.currentUser.toKey()]=c}(n,r.batchId,e),await as(n,r.changes),await bo(n.remoteStore)}catch(r){const s=Ol(r,"Failed to persist write");e.reject(s)}}async function Vd(i,t){const e=ct(i);try{const n=await j0(e.localStore,t);t.targetChanges.forEach((r,s)=>{const o=e.Fa.get(s);o&&(St(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.wa=!0:r.modifiedDocuments.size>0?St(o.wa):r.removedDocuments.size>0&&(St(o.wa),o.wa=!1))}),await as(e,n,t)}catch(n){await ns(n)}}function eh(i,t,e){const n=ct(i);if(n.isPrimaryClient&&e===0||!n.isPrimaryClient&&e===1){const r=[];n.ba.forEach((s,o)=>{const l=o.view.j_(t);l.snapshot&&r.push(l.snapshot)}),function(o,l){const u=ct(o);u.onlineState=l;let c=!1;u.queries.forEach((h,d)=>{for(const m of d.U_)m.j_(l)&&(c=!0)}),c&&Fl(u)}(n.eventManager,t),r.length&&n.Sa.h_(r),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function Sv(i,t,e){const n=ct(i);n.sharedClientState.updateQueryState(t,"rejected",e);const r=n.Fa.get(t),s=r&&r.key;if(s){let o=new $t(et.comparator);o=o.insert(s,fe.newNoDocument(s,ot.min()));const l=ft().add(s),u=new wo(ot.min(),new Map,new $t(wt),o,l);await Vd(n,u),n.va=n.va.remove(s),n.Fa.delete(t),$l(n)}else await ja(n.localStore,t,!1).then(()=>Ga(n,t,e)).catch(ns)}async function Dv(i,t){const e=ct(i),n=t.batch.batchId;try{const r=await z0(e.localStore,t);xd(e,n,null),kd(e,n),e.sharedClientState.updateMutationState(n,"acknowledged"),await as(e,r)}catch(r){await ns(r)}}async function Vv(i,t,e){const n=ct(i);try{const r=await function(o,l){const u=ct(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,l).next(d=>(St(d!==null),h=d.keys(),u.mutationQueue.removeMutationBatch(c,d))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(n.localStore,t);xd(n,t,e),kd(n,t),n.sharedClientState.updateMutationState(t,"rejected",e),await as(n,r)}catch(r){await ns(r)}}function kd(i,t){(i.Oa.get(t)||[]).forEach(e=>{e.resolve()}),i.Oa.delete(t)}function xd(i,t,e){const n=ct(i);let r=n.xa[n.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),n.xa[n.currentUser.toKey()]=r}}function Ga(i,t,e=null){i.sharedClientState.removeLocalQueryTarget(t);for(const n of i.Da.get(t))i.ba.delete(n),e&&i.Sa.ka(n,e);i.Da.delete(t),i.isPrimaryClient&&i.Ma.Vr(t).forEach(n=>{i.Ma.containsKey(n)||Od(i,n)})}function Od(i,t){i.Ca.delete(t.path.canonicalString());const e=i.va.get(t);e!==null&&(Sl(i.remoteStore,e),i.va=i.va.remove(t),i.Fa.delete(e),$l(i))}function nh(i,t,e){for(const n of e)n instanceof Cd?(i.Ma.addReference(n.key,t),kv(i,n)):n instanceof Sd?(W("SyncEngine","Document no longer in limbo: "+n.key),i.Ma.removeReference(n.key,t),i.Ma.containsKey(n.key)||Od(i,n.key)):it()}function kv(i,t){const e=t.key,n=e.path.canonicalString();i.va.get(e)||i.Ca.has(n)||(W("SyncEngine","New document in limbo: "+e),i.Ca.add(n),$l(i))}function $l(i){for(;i.Ca.size>0&&i.va.size<i.maxConcurrentLimboResolutions;){const t=i.Ca.values().next().value;i.Ca.delete(t);const e=new et(kt.fromString(t)),n=i.Na.next();i.Fa.set(n,new Ev(e)),i.va=i.va.insert(e,n),wd(i.remoteStore,new Mn(cn(go(e.path)),n,"TargetPurposeLimboResolution",pl.oe))}}async function as(i,t,e){const n=ct(i),r=[],s=[],o=[];n.ba.isEmpty()||(n.ba.forEach((l,u)=>{o.push(n.Ba(u,t,e).then(c=>{if((c||e)&&n.isPrimaryClient){const h=c&&!c.fromCache;n.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(c){r.push(c);const h=Cl.Ki(u.targetId,c);s.push(h)}}))}),await Promise.all(o),n.Sa.h_(r),await async function(u,c){const h=ct(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>$.forEach(c,m=>$.forEach(m.qi,g=>h.persistence.referenceDelegate.addReference(d,m.targetId,g)).next(()=>$.forEach(m.Qi,g=>h.persistence.referenceDelegate.removeReference(d,m.targetId,g)))))}catch(d){if(!rs(d))throw d;W("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const m=d.targetId;if(!d.fromCache){const g=h.ns.get(m),y=g.snapshotVersion,p=g.withLastLimboFreeSnapshotVersion(y);h.ns=h.ns.insert(m,p)}}}(n.localStore,s))}async function xv(i,t){const e=ct(i);if(!e.currentUser.isEqual(t)){W("SyncEngine","User change. New user:",t.toKey());const n=await yd(e.localStore,t);e.currentUser=t,function(s,o){s.Oa.forEach(l=>{l.forEach(u=>{u.reject(new J(L.CANCELLED,o))})}),s.Oa.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await as(e,n.us)}}function Ov(i,t){const e=ct(i),n=e.Fa.get(t);if(n&&n.wa)return ft().add(n.key);{let r=ft();const s=e.Da.get(t);if(!s)return r;for(const o of s){const l=e.ba.get(o);r=r.unionWith(l.view.Ea)}return r}}function Nd(i){const t=ct(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=Vd.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ov.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Sv.bind(null,t),t.Sa.h_=gv.bind(null,t.eventManager),t.Sa.ka=yv.bind(null,t.eventManager),t}function Nv(i){const t=ct(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Dv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Vv.bind(null,t),t}class rh{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=Io(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return U0(this.persistence,new $0,t.initialUser,this.serializer)}createPersistence(t){return new M0(Pl.Hr,this.serializer)}createSharedClientState(t){return new W0}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Mv{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>eh(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=xv.bind(null,this.syncEngine),await _v(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new pv}()}createDatastore(t){const e=Io(t.databaseInfo.databaseId),n=function(s){return new J0(s)}(t.databaseInfo);return function(s,o,l,u){return new ev(s,o,l,u)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(n,r,s,o,l){return new rv(n,r,s,o,l)}(this.localStore,this.datastore,t.asyncQueue,e=>eh(this.syncEngine,e,0),function(){return Yc.D()?new Yc:new Q0}())}createSyncEngine(t,e){return function(r,s,o,l,u,c,h){const d=new wv(r,s,o,l,u,c);return h&&(d.La=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t;await async function(n){const r=ct(n);W("RemoteStore","RemoteStore shutting down."),r.M_.add(5),await os(r),r.O_.shutdown(),r.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Rn("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(t,e,n,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=he.UNAUTHENTICATED,this.clientId=$f.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async s=>{W("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(n,s=>(W("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new J(L.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new En;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=Ol(e,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function ua(i,t){i.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const e=i.configuration;await t.initialize(e);let n=e.initialUser;i.setCredentialChangeListener(async r=>{n.isEqual(r)||(await yd(t.localStore,r),n=r)}),t.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=t}async function ih(i,t){i.asyncQueue.verifyOperationInProgress();const e=await $v(i);W("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(e,i.configuration),i.setCredentialChangeListener(n=>Jc(t.remoteStore,n)),i.setAppCheckTokenChangeListener((n,r)=>Jc(t.remoteStore,r)),i._onlineComponents=t}function Lv(i){return i.name==="FirebaseError"?i.code===L.FAILED_PRECONDITION||i.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}async function $v(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await ua(i,i._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!Lv(e))throw e;Gr("Error using user provided cache. Falling back to memory cache: "+e),await ua(i,new rh)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await ua(i,new rh);return i._offlineComponents}async function Md(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await ih(i,i._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await ih(i,new Mv))),i._onlineComponents}function Bv(i){return Md(i).then(t=>t.syncEngine)}async function oo(i){const t=await Md(i),e=t.eventManager;return e.onListen=Iv.bind(null,t.syncEngine),e.onUnlisten=Rv.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=Av.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=Pv.bind(null,t.syncEngine),e}function Uv(i,t,e={}){const n=new En;return i.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const h=new Bl({next:m=>{o.enqueueAndForget(()=>Ml(s,d));const g=m.docs.has(l);!g&&m.fromCache?c.reject(new J(L.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&u&&u.source==="server"?c.reject(new J(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),d=new Ll(go(l.path),h,{includeMetadataChanges:!0,ra:!0});return Nl(s,d)}(await oo(i),i.asyncQueue,t,e,n)),n.promise}function zv(i,t,e={}){const n=new En;return i.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const h=new Bl({next:m=>{o.enqueueAndForget(()=>Ml(s,d)),m.fromCache&&u.source==="server"?c.reject(new J(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),d=new Ll(l,h,{includeMetadataChanges:!0,ra:!0});return Nl(s,d)}(await oo(i),i.asyncQueue,t,e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(i){const t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(i,t,e){if(!e)throw new J(L.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function jv(i,t,e,n){if(t===!0&&n===!0)throw new J(L.INVALID_ARGUMENT,`${i} and ${e} cannot be used together.`)}function oh(i){if(!et.isDocumentKey(i))throw new J(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function ah(i){if(et.isDocumentKey(i))throw new J(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Ul(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":it()}function ze(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new J(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Ul(i);throw new J(L.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(t){var e,n;if(t.host===void 0){if(t.ssl!==void 0)throw new J(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new J(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}jv("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Fd((n=t.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new J(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new J(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new J(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,r){return n.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Ro{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lh({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new J(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new J(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lh(t),t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new oy;switch(n.type){case"firstParty":return new cy(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new J(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=sh.get(e);n&&(W("ComponentProvider","Removing Datastore"),sh.delete(e),n.terminate())}(this),Promise.resolve()}}function qv(i,t,e,n={}){var r;const s=(i=ze(i,Ro))._getSettings(),o=`${t}:${e}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Gr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),n.mockUserToken){let l,u;if(typeof n.mockUserToken=="string")l=n.mockUserToken,u=he.MOCK_USER;else{l=Bp(n.mockUserToken,(r=i._app)===null||r===void 0?void 0:r.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new J(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new he(c)}i._authCredentials=new ay(new Lf(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new ls(this.firestore,t,this._query)}}class Ee{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Un(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ee(this.firestore,t,this._key)}}class Un extends ls{constructor(t,e,n){super(t,e,go(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ee(this.firestore,null,new et(t))}withConverter(t){return new Un(this.firestore,t,this._path)}}function Qi(i,t,...e){if(i=rn(i),Ld("collection","path",t),i instanceof Ro){const n=kt.fromString(t,...e);return ah(n),new Un(i,null,n)}{if(!(i instanceof Ee||i instanceof Un))throw new J(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(kt.fromString(t,...e));return ah(n),new Un(i.firestore,null,n)}}function Ha(i,t,...e){if(i=rn(i),arguments.length===1&&(t=$f.newId()),Ld("doc","path",t),i instanceof Ro){const n=kt.fromString(t,...e);return oh(n),new Ee(i,null,new et(n))}{if(!(i instanceof Ee||i instanceof Un))throw new J(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(kt.fromString(t,...e));return oh(n),new Ee(i.firestore,i instanceof Un?i.converter:null,new et(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Td(this,"async_queue_retry"),this.hu=()=>{const e=la();e&&W("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};const t=la();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const e=la();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const e=new En;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!rs(t))throw t;W("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const e=this.iu.then(()=>(this.uu=!0,t().catch(n=>{this.au=n,this.uu=!1;const r=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(n);throw Rn("INTERNAL UNHANDLED ERROR: ",r),n}).then(n=>(this.uu=!1,n))));return this.iu=e,e}enqueueAfterDelay(t,e,n){this.Pu(),this.lu.indexOf(t)>-1&&(e=0);const r=xl.createAndSchedule(this,t,e,n,s=>this.Eu(s));return this._u.push(r),r}Pu(){this.au&&it()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const e of this._u)if(e.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((e,n)=>e.targetTimeMs-n.targetTimeMs);for(const e of this._u)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const e=this._u.indexOf(t);this._u.splice(e,1)}}function uh(i){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const s of n)if(s in r&&typeof r[s]=="function")return!0;return!1}(i,["next","error","complete"])}class Kn extends Ro{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=function(){return new Gv}(),this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||$d(this),this._firestoreClient.terminate()}}function Hv(i,t){const e=typeof i=="object"?i:Wg(),n=typeof i=="string"?i:"(default)",r=qg(e,"firestore").getImmediate({identifier:n});if(!r._initialized){const s=Lp("firestore");s&&qv(r,...s)}return r}function us(i){return i._firestoreClient||$d(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function $d(i){var t,e,n;const r=i._freezeSettings(),s=function(l,u,c,h){return new Iy(l,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Fd(h.experimentalLongPollingOptions),h.useFetchStreams)}(i._databaseId,((t=i._app)===null||t===void 0?void 0:t.options.appId)||"",i._persistenceKey,r);i._firestoreClient=new Fv(i._authCredentials,i._appCheckCredentials,i._queue,s),!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((n=r.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Yr(ge.fromBase64String(t))}catch(e){throw new J(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Yr(ge.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new J(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new J(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new J(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return wt(this._lat,t._lat)||wt(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv=/^__.*__$/;class Wv{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return this.fieldMask!==null?new Qn(t,this.data,this.fieldMask,e,this.fieldTransforms):new is(t,this.data,e,this.fieldTransforms)}}class Bd{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new Qn(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Ud(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class ql{constructor(t,e,n,r,s,o){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=r,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new ql(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var e;const n=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.gu({path:n,yu:!1});return r.wu(t),r}Su(t){var e;const n=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return ao(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(Ud(this.fu)&&Kv.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class Qv{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Io(t)}Fu(t,e,n,r=!1){return new ql({fu:t,methodName:e,vu:n,path:oe.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gl(i){const t=i._freezeSettings(),e=Io(i._databaseId);return new Qv(i._databaseId,!!t.ignoreUndefinedProperties,e)}function zd(i,t,e,n,r,s={}){const o=i.Fu(s.merge||s.mergeFields?2:0,t,e,r);Hl("Data must be an object, but it was:",o,n);const l=Gd(n,o);let u,c;if(s.merge)u=new $e(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const m=Ka(t,d,e);if(!o.contains(m))throw new J(L.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Kd(h,m)||h.push(m)}u=new $e(h),c=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=o.fieldTransforms;return new Wv(new be(l),u,c)}class Po extends zl{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Po}}function jd(i,t,e,n){const r=i.Fu(1,t,e);Hl("Data must be an object, but it was:",r,n);const s=[],o=be.empty();Er(n,(u,c)=>{const h=Kl(t,u,e);c=rn(c);const d=r.Su(h);if(c instanceof Po)s.push(h);else{const m=Co(c,d);m!=null&&(s.push(h),o.set(h,m))}});const l=new $e(s);return new Bd(o,l,r.fieldTransforms)}function qd(i,t,e,n,r,s){const o=i.Fu(1,t,e),l=[Ka(t,n,e)],u=[r];if(s.length%2!=0)throw new J(L.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)l.push(Ka(t,s[m])),u.push(s[m+1]);const c=[],h=be.empty();for(let m=l.length-1;m>=0;--m)if(!Kd(c,l[m])){const g=l[m];let y=u[m];y=rn(y);const p=o.Su(g);if(y instanceof Po)c.push(g);else{const T=Co(y,p);T!=null&&(c.push(g),h.set(g,T))}}const d=new $e(c);return new Bd(h,d,o.fieldTransforms)}function Co(i,t){if(Hd(i=rn(i)))return Hl("Unsupported field value:",t,i),Gd(i,t);if(i instanceof zl)return function(n,r){if(!Ud(r.fu))throw r.Du(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(n,r){const s=[];let o=0;for(const l of n){let u=Co(l,r.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(i,t)}return function(n,r){if((n=rn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Gy(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Jt.fromDate(n);return{timestampValue:io(r.serializer,s)}}if(n instanceof Jt){const s=new Jt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:io(r.serializer,s)}}if(n instanceof jl)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Yr)return{bytesValue:hd(r.serializer,n._byteString)};if(n instanceof Ee){const s=r.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw r.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:bl(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Du(`Unsupported field value: ${Ul(n)}`)}(i,t)}function Gd(i,t){const e={};return Bf(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Er(i,(n,r)=>{const s=Co(r,t.pu(n));s!=null&&(e[n]=s)}),{mapValue:{fields:e}}}function Hd(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Jt||i instanceof jl||i instanceof Yr||i instanceof Ee||i instanceof zl)}function Hl(i,t,e){if(!Hd(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){const n=Ul(e);throw n==="an object"?t.Du(i+" a custom object"):t.Du(i+" "+n)}}function Ka(i,t,e){if((t=rn(t))instanceof cs)return t._internalPath;if(typeof t=="string")return Kl(i,t);throw ao("Field path arguments must be of type string or ",i,!1,void 0,e)}const Xv=new RegExp("[~\\*/\\[\\]]");function Kl(i,t,e){if(t.search(Xv)>=0)throw ao(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,e);try{return new cs(...t.split("."))._internalPath}catch{throw ao(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,e)}}function ao(i,t,e,n,r){const s=n&&!n.isEmpty(),o=r!==void 0;let l=`Function ${t}() called with invalid data`;e&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${n}`),o&&(u+=` in document ${r}`),u+=")"),new J(L.INVALID_ARGUMENT,l+i+u)}function Kd(i,t){return i.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(t,e,n,r,s){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ee(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Yv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Qd("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class Yv extends Wd{data(){return super.data()}}function Qd(i,t){return typeof t=="string"?Kl(i,t):t instanceof cs?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new J(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jv{convertValue(t,e="none"){switch(yr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Qt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(gr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw it()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return Er(t,(r,s)=>{n[r]=this.convertValue(s,e)}),n}convertGeoPoint(t){return new jl(Qt(t.latitude),Qt(t.longitude))}convertArray(t,e){return(t.values||[]).map(n=>this.convertValue(n,e))}convertServerTimestamp(t,e){switch(e){case"previous":const n=yl(t);return n==null?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(qi(t));default:return null}}convertTimestamp(t){const e=Gn(t);return new Jt(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=kt.fromString(t);St(gd(n));const r=new Gi(n.get(1),n.get(3)),s=new et(n.popFirst(5));return r.isEqual(e)||Rn(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yd(i,t,e){let n;return n=i?e&&(e.merge||e.mergeFields)?i.toFirestore(t,e):i.toFirestore(t):t,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Jd extends Wd{constructor(t,e,n,r,s,o){super(t,e,n,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Ls(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Qd("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class Ls extends Jd{data(t={}){return super.data(t)}}class Zd{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Ai(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(n=>{t.call(e,new Ls(this._firestore,this._userDataWriter,n.key,n,new Ai(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new J(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>{const u=new Ls(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Ai(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Ls(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Ai(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:Zv(l.type),doc:u,oldIndex:c,newIndex:h}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Zv(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(i){i=ze(i,Ee);const t=ze(i.firestore,Kn);return Uv(us(t),i._key).then(e=>e_(t,i,e))}class Wl extends Jv{constructor(t){super(),this.firestore=t}convertBytes(t){return new Yr(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ee(this.firestore,null,e)}}function Ql(i){i=ze(i,ls);const t=ze(i.firestore,Kn),e=us(t),n=new Wl(t);return Xd(i._query),zv(e,i._query).then(r=>new Zd(t,n,i,r))}function eT(i,t,e){i=ze(i,Ee);const n=ze(i.firestore,Kn),r=Yd(i.converter,t,e);return Xl(n,[zd(Gl(n),"setDoc",i._key,r,i.converter!==null,e).toMutation(i._key,Ue.none())])}function t_(i,t,e,...n){i=ze(i,Ee);const r=ze(i.firestore,Kn),s=Gl(r);let o;return o=typeof(t=rn(t))=="string"||t instanceof cs?qd(s,"updateDoc",i._key,t,e,n):jd(s,"updateDoc",i._key,t),Xl(r,[o.toMutation(i._key,Ue.exists(!0))])}function Wa(i,...t){var e,n,r;i=rn(i);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||uh(t[o])||(s=t[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(uh(t[o])){const d=t[o];t[o]=(e=d.next)===null||e===void 0?void 0:e.bind(d),t[o+1]=(n=d.error)===null||n===void 0?void 0:n.bind(d),t[o+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let u,c,h;if(i instanceof Ee)c=ze(i.firestore,Kn),h=go(i._key.path),u={next:d=>{t[o]&&t[o](e_(c,i,d))},error:t[o+1],complete:t[o+2]};else{const d=ze(i,ls);c=ze(d.firestore,Kn),h=d._query;const m=new Wl(c);u={next:g=>{t[o]&&t[o](new Zd(c,m,d,g))},error:t[o+1],complete:t[o+2]},Xd(i._query)}return function(m,g,y,p){const T=new Bl(p),C=new Ll(g,T,y);return m.asyncQueue.enqueueAndForget(async()=>Nl(await oo(m),C)),()=>{T.$a(),m.asyncQueue.enqueueAndForget(async()=>Ml(await oo(m),C))}}(us(c),h,l,u)}function Xl(i,t){return function(n,r){const s=new En;return n.asyncQueue.enqueueAndForget(async()=>Cv(await Bv(n),r,s)),s.promise}(us(i),t)}function e_(i,t,e){const n=e.docs.get(t._key),r=new Wl(i);return new Jd(i,r,t._key,n,new Ai(e.hasPendingWrites,e.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Gl(t)}set(t,e,n){this._verifyNotCommitted();const r=ca(t,this._firestore),s=Yd(r.converter,e,n),o=zd(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,n);return this._mutations.push(o.toMutation(r._key,Ue.none())),this}update(t,e,n,...r){this._verifyNotCommitted();const s=ca(t,this._firestore);let o;return o=typeof(e=rn(e))=="string"||e instanceof cs?qd(this._dataReader,"WriteBatch.update",s._key,e,n,r):jd(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Ue.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=ca(t,this._firestore);return this._mutations=this._mutations.concat(new wl(e._key,Ue.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new J(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ca(i,t){if((i=rn(i)).firestore!==t)throw new J(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(i){return us(i=ze(i,Kn)),new nT(i,t=>Xl(i,t))}(function(t,e=!0){(function(r){ti=r})(Kg),Js(new Ui("firestore",(n,{instanceIdentifier:r,options:s})=>{const o=n.getProvider("app").getImmediate(),l=new Kn(new ly(n.getProvider("auth-internal")),new fy(n.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new J(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gi(c.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Lr(Sc,"4.6.3",t),Lr(Sc,"4.6.3","esm2017")})();const iT={apiKey:"AIzaSyDrTR0lVaKeBrqIlhJiwst2-KsEwBtE538",authDomain:"bob-game-90e47.firebaseapp.com",projectId:"bob-game-90e47",storageBucket:"bob-game-90e47.appspot.com",messagingSenderId:"880391810715",appId:"1:880391810715:web:f537e6f4c16b7412e7a03e",measurementId:"G-FL5LYSNQ76"},sT=Cf(iT),Tn=Hv(sT);function ch(i){let t,e,n="Welkom bij de BOB-Game!",r,s,o=`Hier zul je op basis van je eigen aangewezen rol meedenken over een probleem en samen met je
				medespelers tot een besluit komen over welke maatregelen genomen moeten worden.`,l,u,c,h,d,m;return c=new pe({props:{theme:"green",$$slots:{default:[oT]},$$scope:{ctx:i}}}),c.$on("click",i[2]),d=new pe({props:{$$slots:{default:[aT]},$$scope:{ctx:i}}}),d.$on("click",i[3]),{c(){t=U("div"),e=U("h1"),e.textContent=n,r=Q(),s=U("p"),s.textContent=o,l=Q(),u=U("div"),yt(c.$$.fragment),h=Q(),yt(d.$$.fragment),this.h()},l(g){t=z(g,"DIV",{class:!0});var y=Y(t);e=z(y,"H1",{class:!0,"data-svelte-h":!0}),se(e)!=="svelte-1og3j6q"&&(e.textContent=n),r=X(y),s=z(y,"P",{class:!0,"data-svelte-h":!0}),se(s)!=="svelte-1g8jkii"&&(s.textContent=o),l=X(y),u=z(y,"DIV",{class:!0});var p=Y(u);vt(c.$$.fragment,p),h=X(p),vt(d.$$.fragment,p),p.forEach(M),y.forEach(M),this.h()},h(){G(e,"class","font-bold text-xl mb-2"),G(s,"class","mb-4"),G(u,"class","flex gap-x-2 justify-center"),G(t,"class","text-center")},m(g,y){q(g,t,y),F(t,e),F(t,r),F(t,s),F(t,l),F(t,u),Tt(c,u,null),F(u,h),Tt(d,u,null),m=!0},p(g,y){const p={};y&64&&(p.$$scope={dirty:y,ctx:g}),c.$set(p);const T={};y&64&&(T.$$scope={dirty:y,ctx:g}),d.$set(T)},i(g){m||(K(c.$$.fragment,g),K(d.$$.fragment,g),m=!0)},o(g){Z(c.$$.fragment,g),Z(d.$$.fragment,g),m=!1},d(g){g&&M(t),Et(c),Et(d)}}}function oT(i){let t;return{c(){t=lt("Start")},l(e){t=ut(e,"Start")},m(e,n){q(e,t,n)},d(e){e&&M(t)}}}function aT(i){let t;return{c(){t=lt("Instellingen")},l(e){t=ut(e,"Instellingen")},m(e,n){q(e,t,n)},d(e){e&&M(t)}}}function hh(i){let t,e,n="Instellingen",r,s,o,l,u,c,h,d;return o=new pe({props:{$$slots:{default:[lT]},$$scope:{ctx:i}}}),o.$on("click",i[1]),u=new pe({props:{$$slots:{default:[uT]},$$scope:{ctx:i}}}),u.$on("click",i[4]),h=new pe({props:{theme:"red",$$slots:{default:[cT]},$$scope:{ctx:i}}}),h.$on("click",i[5]),{c(){t=U("div"),e=U("p"),e.textContent=n,r=Q(),s=U("div"),yt(o.$$.fragment),l=Q(),yt(u.$$.fragment),c=Q(),yt(h.$$.fragment),this.h()},l(m){t=z(m,"DIV",{class:!0});var g=Y(t);e=z(g,"P",{class:!0,"data-svelte-h":!0}),se(e)!=="svelte-1qfzwmq"&&(e.textContent=n),r=X(g),s=z(g,"DIV",{class:!0});var y=Y(s);vt(o.$$.fragment,y),l=X(y),vt(u.$$.fragment,y),c=X(y),vt(h.$$.fragment,y),y.forEach(M),g.forEach(M),this.h()},h(){G(e,"class","font-bold text-xl mb-4"),G(s,"class","flex gap-x-2 justify-center"),G(t,"class","text-center")},m(m,g){q(m,t,g),F(t,e),F(t,r),F(t,s),Tt(o,s,null),F(s,l),Tt(u,s,null),F(s,c),Tt(h,s,null),d=!0},p(m,g){const y={};g&64&&(y.$$scope={dirty:g,ctx:m}),o.$set(y);const p={};g&64&&(p.$$scope={dirty:g,ctx:m}),u.$set(p);const T={};g&64&&(T.$$scope={dirty:g,ctx:m}),h.$set(T)},i(m){d||(K(o.$$.fragment,m),K(u.$$.fragment,m),K(h.$$.fragment,m),d=!0)},o(m){Z(o.$$.fragment,m),Z(u.$$.fragment,m),Z(h.$$.fragment,m),d=!1},d(m){m&&M(t),Et(o),Et(u),Et(h)}}}function lT(i){let t;return{c(){t=lt("Reset sliders")},l(e){t=ut(e,"Reset sliders")},m(e,n){q(e,t,n)},d(e){e&&M(t)}}}function uT(i){let t;return{c(){t=lt("Wijzig brondata (.csv)")},l(e){t=ut(e,"Wijzig brondata (.csv)")},m(e,n){q(e,t,n)},d(e){e&&M(t)}}}function cT(i){let t;return{c(){t=lt("Terug")},l(e){t=ut(e,"Terug")},m(e,n){q(e,t,n)},d(e){e&&M(t)}}}function hT(i){let t,e,n,r,s,o,l=!i[0]&&ch(i),u=i[0]&&hh(i);return{c(){t=U("img"),n=Q(),l&&l.c(),r=Q(),u&&u.c(),s=Ve(),this.h()},l(c){t=z(c,"IMG",{src:!0,alt:!0,class:!0}),n=X(c),l&&l.l(c),r=X(c),u&&u.l(c),s=Ve(),this.h()},h(){V_(t.src,e=Cp)||G(t,"src",e),G(t,"alt","Logo van de BOB-Game"),G(t,"class","w-48")},m(c,h){q(c,t,h),q(c,n,h),l&&l.m(c,h),q(c,r,h),u&&u.m(c,h),q(c,s,h),o=!0},p(c,h){c[0]?l&&(wn(),Z(l,1,1,()=>{l=null}),In()):l?(l.p(c,h),h&1&&K(l,1)):(l=ch(c),l.c(),K(l,1),l.m(r.parentNode,r)),c[0]?u?(u.p(c,h),h&1&&K(u,1)):(u=hh(c),u.c(),K(u,1),u.m(s.parentNode,s)):u&&(wn(),Z(u,1,1,()=>{u=null}),In())},i(c){o||(K(l),K(u),o=!0)},o(c){Z(l),Z(u),o=!1},d(c){c&&(M(t),M(n),M(r),M(s)),l&&l.d(c),u&&u.d(c)}}}function fT(i){let t,e;return t=new Jr({props:{class:"gap-y-4 lg:w-[540px] items-center",$$slots:{default:[hT]},$$scope:{ctx:i}}}),{c(){yt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,r){Tt(t,n,r),e=!0},p(n,[r]){const s={};r&65&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(K(t.$$.fragment,n),e=!0)},o(n){Z(t.$$.fragment,n),e=!1},d(n){Et(t,n)}}}function dT(i,t,e){let n=!1;return[n,async()=>{const c=Qi(Tn,"stakeholders"),h=await Ql(c);let d=[];const m=h.docs[0].data().values.length;for(let g=0;g<m;g++)d.push(0);for(const g of h.docs)await t_(g.ref,{values:d});alert("Alle sliders zijn gereset!")},()=>nn.set(1),()=>e(0,n=!n),()=>nn.set(5),()=>e(0,n=!n)]}class _T extends qe{constructor(t){super(),Ge(this,t,dT,fT,xe,{})}}const fh=vr([]);function dh(i,t,e){const n=i.slice();return n[15]=t[e],n[17]=e,n}function _h(i){let t,e;return t=new Jr({props:{class:"lg:w-4/5",$$slots:{default:[gT]},$$scope:{ctx:i}}}),{c(){yt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,r){Tt(t,n,r),e=!0},p(n,r){const s={};r&262271&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(K(t.$$.fragment,n),e=!0)},o(n){Z(t.$$.fragment,n),e=!1},d(n){Et(t,n)}}}function mh(i){let t,e,n=i[15].naam.charAt(0).toUpperCase()+i[15].naam.slice(1)+"",r,s,o,l,u,c,h,d=xi(i[2].values[i[17]],i[15])+"",m,g,y,p=Bs(i[2].values[i[17]],i[15]).toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"",T,C,b,D=Us(i[2].values[i[17]],i[15])+"",V,k,O;function I(...E){return i[11](i[17],...E)}return{c(){t=U("tr"),e=U("td"),r=lt(n),s=Q(),o=U("td"),l=U("input"),c=Q(),h=U("td"),m=lt(d),g=Q(),y=U("td"),T=lt(p),C=Q(),b=U("td"),V=lt(D),this.h()},l(E){t=z(E,"TR",{});var v=Y(t);e=z(v,"TD",{class:!0});var R=Y(e);r=ut(R,n),R.forEach(M),s=X(v),o=z(v,"TD",{class:!0});var P=Y(o);l=z(P,"INPUT",{type:!0,min:!0,max:!0,class:!0}),P.forEach(M),c=X(v),h=z(v,"TD",{class:!0});var S=Y(h);m=ut(S,d),S.forEach(M),g=X(v),y=z(v,"TD",{class:!0});var A=Y(y);T=ut(A,p),A.forEach(M),C=X(v),b=z(v,"TD",{});var st=Y(b);V=ut(st,D),st.forEach(M),v.forEach(M),this.h()},h(){G(e,"class","pr-4"),G(l,"type","range"),l.value=u=i[2].values[i[17]],G(l,"min","0"),G(l,"max","10"),G(l,"class","slider accent-blue-500 align-middle appearance-none w-full cursor-pointer h-1 bg-red-500"),G(o,"class","pr-4"),G(h,"class","pr-4"),G(y,"class","pr-4")},m(E,v){q(E,t,v),F(t,e),F(e,r),F(t,s),F(t,o),F(o,l),F(t,c),F(t,h),F(h,m),F(t,g),F(t,y),F(y,T),F(t,C),F(t,b),F(b,V),k||(O=uo(l,"input",I),k=!0)},p(E,v){i=E,v&8&&n!==(n=i[15].naam.charAt(0).toUpperCase()+i[15].naam.slice(1)+"")&&Ft(r,n),v&4&&u!==(u=i[2].values[i[17]])&&(l.value=u),v&12&&d!==(d=xi(i[2].values[i[17]],i[15])+"")&&Ft(m,d),v&12&&p!==(p=Bs(i[2].values[i[17]],i[15]).toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"")&&Ft(T,p),v&12&&D!==(D=Us(i[2].values[i[17]],i[15])+"")&&Ft(V,D)},d(E){E&&M(t),k=!1,O()}}}function mT(i){let t;return{c(){t=lt("Terug")},l(e){t=ut(e,"Terug")},m(e,n){q(e,t,n)},d(e){e&&M(t)}}}function pT(i){let t;return{c(){t=lt("Klaar")},l(e){t=ut(e,"Klaar")},m(e,n){q(e,t,n)},d(e){e&&M(t)}}}function gT(i){let t,e,n=i[2].id+"",r,s,o,l,u='<tr><th class="pr-4">Maatregel</th> <th class="pr-4">Schaal</th> <th class="pr-4">Geholpen mensen</th> <th class="pr-4">Kosten</th> <th>Vrijwilligers</th></tr>',c,h,d,m,g,y="Totaal",p,T,C,b,D,V,k,O=i[0].toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"",I,E,v,R,P,S,A,st,rt,ht,at,dt=i[5].toFixed(0)+"",xt,zt,j,H,tt=i[4].toFixed(0)+"",It,Ot,Nt,ye,tn,we,Xt,He,Oe,Zt,sn=fn(i[3]),jt=[];for(let nt=0;nt<sn.length;nt+=1)jt[nt]=mh(dh(i,sn,nt));return Xt=new pe({props:{theme:"red",$$slots:{default:[mT]},$$scope:{ctx:i}}}),Xt.$on("click",i[12]),Oe=new pe({props:{$$slots:{default:[pT]},$$scope:{ctx:i}}}),Oe.$on("click",i[13]),{c(){t=U("div"),e=lt("Team "),r=lt(n),s=Q(),o=U("table"),l=U("thead"),l.innerHTML=u,c=Q(),h=U("tbody");for(let nt=0;nt<jt.length;nt+=1)jt[nt].c();d=Q(),m=U("tr"),g=U("td"),g.textContent=y,p=Q(),T=U("td"),C=Q(),b=U("td"),D=lt(i[1]),V=Q(),k=U("td"),I=lt(O),E=Q(),v=U("td"),R=lt(i[6]),P=Q(),S=U("tr"),A=U("td"),st=Q(),rt=U("td"),ht=Q(),at=U("td"),xt=lt(dt),zt=lt("% van het doel"),j=Q(),H=U("td"),It=lt(tt),Ot=lt("% van het budget"),Nt=Q(),ye=U("td"),tn=Q(),we=U("div"),yt(Xt.$$.fragment),He=Q(),yt(Oe.$$.fragment),this.h()},l(nt){t=z(nt,"DIV",{class:!0});var At=Y(t);e=ut(At,"Team "),r=ut(At,n),At.forEach(M),s=X(nt),o=z(nt,"TABLE",{class:!0});var Ie=Y(o);l=z(Ie,"THEAD",{"data-svelte-h":!0}),se(l)!=="svelte-18lvh91"&&(l.innerHTML=u),c=X(Ie),h=z(Ie,"TBODY",{});var Ke=Y(h);for(let Sn=0;Sn<jt.length;Sn+=1)jt[Sn].l(Ke);d=X(Ke),m=z(Ke,"TR",{class:!0});var bt=Y(m);g=z(bt,"TD",{class:!0,"data-svelte-h":!0}),se(g)!=="svelte-tvdvct"&&(g.textContent=y),p=X(bt),T=z(bt,"TD",{class:!0}),Y(T).forEach(M),C=X(bt),b=z(bt,"TD",{class:!0});var Cn=Y(b);D=ut(Cn,i[1]),Cn.forEach(M),V=X(bt),k=z(bt,"TD",{class:!0});var hs=Y(k);I=ut(hs,O),hs.forEach(M),E=X(bt),v=z(bt,"TD",{});var Ir=Y(v);R=ut(Ir,i[6]),Ir.forEach(M),bt.forEach(M),P=X(Ke),S=z(Ke,"TR",{});var Ae=Y(S);A=z(Ae,"TD",{class:!0}),Y(A).forEach(M),st=X(Ae),rt=z(Ae,"TD",{class:!0}),Y(rt).forEach(M),ht=X(Ae),at=z(Ae,"TD",{class:!0});var Ar=Y(at);xt=ut(Ar,dt),zt=ut(Ar,"% van het doel"),Ar.forEach(M),j=X(Ae),H=z(Ae,"TD",{class:!0});var Gt=Y(H);It=ut(Gt,tt),Ot=ut(Gt,"% van het budget"),Gt.forEach(M),Nt=X(Ae),ye=z(Ae,"TD",{}),Y(ye).forEach(M),Ae.forEach(M),Ke.forEach(M),Ie.forEach(M),tn=X(nt),we=z(nt,"DIV",{class:!0});var Ht=Y(we);vt(Xt.$$.fragment,Ht),He=X(Ht),vt(Oe.$$.fragment,Ht),Ht.forEach(M),this.h()},h(){G(t,"class","font-bold text-2xl mb-4"),G(g,"class","pr-4"),G(T,"class","pr-4"),G(b,"class","pr-4"),G(k,"class","pr-4"),G(m,"class","font-bold border-t-2 border-black"),G(A,"class","pr-4"),G(rt,"class","pr-4"),G(at,"class","pr-4"),Xe(at,"bg-red-300",i[5]<100),Xe(at,"bg-green-300",i[5]>=100),G(H,"class","pr-4"),Xe(H,"bg-red-300",i[4]>100),Xe(H,"bg-green-300",i[4]<=100),G(o,"class","text-left mb-2"),G(we,"class","flex gap-x-2")},m(nt,At){q(nt,t,At),F(t,e),F(t,r),q(nt,s,At),q(nt,o,At),F(o,l),F(o,c),F(o,h);for(let Ie=0;Ie<jt.length;Ie+=1)jt[Ie]&&jt[Ie].m(h,null);F(h,d),F(h,m),F(m,g),F(m,p),F(m,T),F(m,C),F(m,b),F(b,D),F(m,V),F(m,k),F(k,I),F(m,E),F(m,v),F(v,R),F(h,P),F(h,S),F(S,A),F(S,st),F(S,rt),F(S,ht),F(S,at),F(at,xt),F(at,zt),F(S,j),F(S,H),F(H,It),F(H,Ot),F(S,Nt),F(S,ye),q(nt,tn,At),q(nt,we,At),Tt(Xt,we,null),F(we,He),Tt(Oe,we,null),Zt=!0},p(nt,At){if((!Zt||At&4)&&n!==(n=nt[2].id+"")&&Ft(r,n),At&140){sn=fn(nt[3]);let bt;for(bt=0;bt<sn.length;bt+=1){const Cn=dh(nt,sn,bt);jt[bt]?jt[bt].p(Cn,At):(jt[bt]=mh(Cn),jt[bt].c(),jt[bt].m(h,d))}for(;bt<jt.length;bt+=1)jt[bt].d(1);jt.length=sn.length}(!Zt||At&2)&&Ft(D,nt[1]),(!Zt||At&1)&&O!==(O=nt[0].toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"")&&Ft(I,O),(!Zt||At&64)&&Ft(R,nt[6]),(!Zt||At&32)&&dt!==(dt=nt[5].toFixed(0)+"")&&Ft(xt,dt),(!Zt||At&32)&&Xe(at,"bg-red-300",nt[5]<100),(!Zt||At&32)&&Xe(at,"bg-green-300",nt[5]>=100),(!Zt||At&16)&&tt!==(tt=nt[4].toFixed(0)+"")&&Ft(It,tt),(!Zt||At&16)&&Xe(H,"bg-red-300",nt[4]>100),(!Zt||At&16)&&Xe(H,"bg-green-300",nt[4]<=100);const Ie={};At&262144&&(Ie.$$scope={dirty:At,ctx:nt}),Xt.$set(Ie);const Ke={};At&262144&&(Ke.$$scope={dirty:At,ctx:nt}),Oe.$set(Ke)},i(nt){Zt||(K(Xt.$$.fragment,nt),K(Oe.$$.fragment,nt),Zt=!0)},o(nt){Z(Xt.$$.fragment,nt),Z(Oe.$$.fragment,nt),Zt=!1},d(nt){nt&&(M(t),M(s),M(o),M(tn),M(we)),ts(jt,nt),Et(Xt),Et(Oe)}}}function yT(i){let t,e,n=i[2]&&_h(i);return{c(){n&&n.c(),t=Ve()},l(r){n&&n.l(r),t=Ve()},m(r,s){n&&n.m(r,s),q(r,t,s),e=!0},p(r,[s]){r[2]?n?(n.p(r,s),s&4&&K(n,1)):(n=_h(r),n.c(),K(n,1),n.m(t.parentNode,t)):n&&(wn(),Z(n,1,1,()=>{n=null}),In())},i(r){e||(K(n),e=!0)},o(r){Z(n),e=!1},d(r){r&&M(t),n&&n.d(r)}}}function vT(i,t,e){let n,r,s,o,l,u,c,h,d,m;Re(i,fh,b=>e(8,c=b)),Re(i,zs,b=>e(3,h=b)),Re(i,Qa,b=>e(9,d=b)),Re(i,fr,b=>e(10,m=b)),lo(()=>{const b=Qi(Tn,"maatregelen"),D=Qi(Tn,"doelen");Wa(b,V=>{zs.set(V.docs.map(k=>({id:k.id,...k.data()})))}),Wa(D,V=>{fh.set(V.docs.map(k=>({doel:Number(k.data().doel),budget:Number(k.data().budget),...k.data()})))})});const g=(b,D)=>{const V=b.target;e(2,n.values[D]=V.valueAsNumber,n),y()},y=async()=>{try{const b=n.id,D=Ha(Tn,"stakeholders",b);(await tT(D)).exists()?await t_(D,{values:n.values}):await eT(D,{values:n.values}),console.log("Document successfully updated!")}catch(b){console.error("Error updating document: ",b)}},p=(b,D)=>g(D,b),T=()=>{nn.set(2)},C=()=>{nn.set(4)};return i.$$.update=()=>{var b,D;i.$$.dirty&1536&&e(2,n=m.find(V=>V.id===(d==null?void 0:d.id))),i.$$.dirty&12&&e(1,r=h.reduce((V,k,O)=>{var I;return V+xi(((I=n==null?void 0:n.values)==null?void 0:I[O])??0,k)},0)),i.$$.dirty&12&&e(0,s=h.reduce((V,k,O)=>{var I;return V+Bs(((I=n==null?void 0:n.values)==null?void 0:I[O])??0,k)},0)),i.$$.dirty&12&&e(6,o=h.reduce((V,k,O)=>{var I;return V+Us(((I=n==null?void 0:n.values)==null?void 0:I[O])??0,k)},0)),i.$$.dirty&258&&e(5,l=r/((b=c[0])==null?void 0:b.doel)*100),i.$$.dirty&257&&e(4,u=s/((D=c[0])==null?void 0:D.budget)*100)},[s,r,n,h,u,l,o,g,c,d,m,p,T,C]}class TT extends qe{constructor(t){super(),Ge(this,t,vT,yT,xe,{})}}function ph(i){let t,e;return t=new Jr({props:{class:"lg:w-[540px]",$$slots:{default:[IT]},$$scope:{ctx:i}}}),{c(){yt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,r){Tt(t,n,r),e=!0},p(n,r){const s={};r&9&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(K(t.$$.fragment,n),e=!0)},o(n){Z(t.$$.fragment,n),e=!1},d(n){Et(t,n)}}}function ET(i){let t;return{c(){t=lt("Terug")},l(e){t=ut(e,"Terug")},m(e,n){q(e,t,n)},d(e){e&&M(t)}}}function wT(i){let t;return{c(){t=lt("Volgende")},l(e){t=ut(e,"Volgende")},m(e,n){q(e,t,n)},d(e){e&&M(t)}}}function IT(i){let t,e=i[0].id+"",n,r,s,o=i[0].description+"",l,u,c,h,d,m,g;return h=new pe({props:{theme:"red",$$slots:{default:[ET]},$$scope:{ctx:i}}}),h.$on("click",i[1]),m=new pe({props:{$$slots:{default:[wT]},$$scope:{ctx:i}}}),m.$on("click",i[2]),{c(){t=U("h2"),n=lt(e),r=Q(),s=U("p"),l=lt(o),u=Q(),c=U("div"),yt(h.$$.fragment),d=Q(),yt(m.$$.fragment),this.h()},l(y){t=z(y,"H2",{class:!0});var p=Y(t);n=ut(p,e),p.forEach(M),r=X(y),s=z(y,"P",{class:!0});var T=Y(s);l=ut(T,o),T.forEach(M),u=X(y),c=z(y,"DIV",{class:!0});var C=Y(c);vt(h.$$.fragment,C),d=X(C),vt(m.$$.fragment,C),C.forEach(M),this.h()},h(){G(t,"class","font-bold text-xl mb-2"),G(s,"class","mb-4"),G(c,"class","flex gap-x-2")},m(y,p){q(y,t,p),F(t,n),q(y,r,p),q(y,s,p),F(s,l),q(y,u,p),q(y,c,p),Tt(h,c,null),F(c,d),Tt(m,c,null),g=!0},p(y,p){(!g||p&1)&&e!==(e=y[0].id+"")&&Ft(n,e),(!g||p&1)&&o!==(o=y[0].description+"")&&Ft(l,o);const T={};p&8&&(T.$$scope={dirty:p,ctx:y}),h.$set(T);const C={};p&8&&(C.$$scope={dirty:p,ctx:y}),m.$set(C)},i(y){g||(K(h.$$.fragment,y),K(m.$$.fragment,y),g=!0)},o(y){Z(h.$$.fragment,y),Z(m.$$.fragment,y),g=!1},d(y){y&&(M(t),M(r),M(s),M(u),M(c)),Et(h),Et(m)}}}function AT(i){let t,e,n=i[0]&&ph(i);return{c(){n&&n.c(),t=Ve()},l(r){n&&n.l(r),t=Ve()},m(r,s){n&&n.m(r,s),q(r,t,s),e=!0},p(r,[s]){r[0]?n?(n.p(r,s),s&1&&K(n,1)):(n=ph(r),n.c(),K(n,1),n.m(t.parentNode,t)):n&&(wn(),Z(n,1,1,()=>{n=null}),In())},i(r){e||(K(n),e=!0)},o(r){Z(n),e=!1},d(r){r&&M(t),n&&n.d(r)}}}function bT(i,t,e){let n;return Re(i,Qa,o=>e(0,n=o)),[n,()=>{nn.set(1)},()=>{nn.set(3)}]}class RT extends qe{constructor(t){super(),Ge(this,t,bT,AT,xe,{})}}function PT(i){let t,e='<svg aria-hidden="true" class="w-8 h-8 text-blue-500 animate-spin fill-white" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z" fill="currentColor"></path><path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z" fill="currentFill"></path></svg> <span class="sr-only">Loading...</span>';return{c(){t=U("div"),t.innerHTML=e,this.h()},l(n){t=z(n,"DIV",{role:!0,"data-svelte-h":!0}),se(t)!=="svelte-108fe9f"&&(t.innerHTML=e),this.h()},h(){G(t,"role","status")},m(n,r){q(n,t,r)},p:or,i:or,o:or,d(n){n&&M(t)}}}class CT extends qe{constructor(t){super(),Ge(this,t,null,PT,xe,{})}}function gh(i,t,e){const n=i.slice();return n[5]=t[e],n}function ST(i){let t,e;return t=new CT({}),{c(){yt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,r){Tt(t,n,r),e=!0},i(n){e||(K(t.$$.fragment,n),e=!0)},o(n){Z(t.$$.fragment,n),e=!1},d(n){Et(t,n)}}}function DT(i){let t,e="Er is iets misgegaan bij het ophalen van de data.";return{c(){t=U("p"),t.textContent=e,this.h()},l(n){t=z(n,"P",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-11wisfj"&&(t.textContent=e),this.h()},h(){G(t,"class","text-red-500")},m(n,r){q(n,t,r)},i:or,o:or,d(n){n&&M(t)}}}function VT(i){let t=i[5].id+"",e,n;return{c(){e=lt(t),n=Q()},l(r){e=ut(r,t),n=X(r)},m(r,s){q(r,e,s),q(r,n,s)},p(r,s){s&2&&t!==(t=r[5].id+"")&&Ft(e,t)},d(r){r&&(M(e),M(n))}}}function yh(i){let t,e;function n(){return i[3](i[5])}return t=new pe({props:{$$slots:{default:[VT]},$$scope:{ctx:i}}}),t.$on("click",n),{c(){yt(t.$$.fragment)},l(r){vt(t.$$.fragment,r)},m(r,s){Tt(t,r,s),e=!0},p(r,s){i=r;const o={};s&258&&(o.$$scope={dirty:s,ctx:i}),t.$set(o)},i(r){e||(K(t.$$.fragment,r),e=!0)},o(r){Z(t.$$.fragment,r),e=!1},d(r){Et(t,r)}}}function kT(i){let t;return{c(){t=lt("Terug")},l(e){t=ut(e,"Terug")},m(e,n){q(e,t,n)},d(e){e&&M(t)}}}function xT(i){let t,e="Selecteer de rol die je vertegenwoordigd",n,r,s,o,l,u,c,h,d;const m=[DT,ST],g=[];function y(b,D){return b[0]?0:b[1].length===0?1:-1}~(s=y(i))&&(o=g[s]=m[s](i));let p=fn(i[1]),T=[];for(let b=0;b<p.length;b+=1)T[b]=yh(gh(i,p,b));const C=b=>Z(T[b],1,1,()=>{T[b]=null});return h=new pe({props:{theme:"red",$$slots:{default:[kT]},$$scope:{ctx:i}}}),h.$on("click",i[4]),{c(){t=U("div"),t.textContent=e,n=Q(),r=U("div"),o&&o.c(),l=Q();for(let b=0;b<T.length;b+=1)T[b].c();u=Q(),c=U("div"),yt(h.$$.fragment),this.h()},l(b){t=z(b,"DIV",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-1jx8mvq"&&(t.textContent=e),n=X(b),r=z(b,"DIV",{class:!0});var D=Y(r);o&&o.l(D),l=X(D);for(let k=0;k<T.length;k+=1)T[k].l(D);D.forEach(M),u=X(b),c=z(b,"DIV",{});var V=Y(c);vt(h.$$.fragment,V),V.forEach(M),this.h()},h(){G(t,"class","font-bold text-xl mb-4"),G(r,"class","flex gap-x-2 mb-2")},m(b,D){q(b,t,D),q(b,n,D),q(b,r,D),~s&&g[s].m(r,null),F(r,l);for(let V=0;V<T.length;V+=1)T[V]&&T[V].m(r,null);q(b,u,D),q(b,c,D),Tt(h,c,null),d=!0},p(b,D){let V=s;if(s=y(b),s!==V&&(o&&(wn(),Z(g[V],1,1,()=>{g[V]=null}),In()),~s?(o=g[s],o||(o=g[s]=m[s](b),o.c()),K(o,1),o.m(r,l)):o=null),D&2){p=fn(b[1]);let O;for(O=0;O<p.length;O+=1){const I=gh(b,p,O);T[O]?(T[O].p(I,D),K(T[O],1)):(T[O]=yh(I),T[O].c(),K(T[O],1),T[O].m(r,null))}for(wn(),O=p.length;O<T.length;O+=1)C(O);In()}const k={};D&256&&(k.$$scope={dirty:D,ctx:b}),h.$set(k)},i(b){if(!d){K(o);for(let D=0;D<p.length;D+=1)K(T[D]);K(h.$$.fragment,b),d=!0}},o(b){Z(o),T=T.filter(Boolean);for(let D=0;D<T.length;D+=1)Z(T[D]);Z(h.$$.fragment,b),d=!1},d(b){b&&(M(t),M(n),M(r),M(u),M(c)),~s&&g[s].d(),ts(T,b),Et(h)}}}function OT(i){let t,e;return t=new Jr({props:{$$slots:{default:[xT]},$$scope:{ctx:i}}}),{c(){yt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,r){Tt(t,n,r),e=!0},p(n,[r]){const s={};r&259&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(K(t.$$.fragment,n),e=!0)},o(n){Z(t.$$.fragment,n),e=!1},d(n){Et(t,n)}}}const NT=5e3;function MT(i,t,e){let n,r;Re(i,fr,u=>e(1,r=u));const s=vr(!1);return Re(i,s,u=>e(0,n=u)),lo(()=>{const u=setTimeout(()=>{s.set(!0)},NT),c=fr.subscribe(h=>{h.length>0&&clearTimeout(u)});return()=>{clearTimeout(u),c()}}),[n,r,s,u=>{Qa.set(u),nn.set(2)},()=>{nn.set(0)}]}class FT extends qe{constructor(t){super(),Ge(this,t,MT,OT,xe,{})}}function vh(i){let t,e="Geselecteerd Bestand:",n,r,s=i[0].name+"",o;return{c(){t=U("p"),t.textContent=e,n=Q(),r=U("pre"),o=lt(s),this.h()},l(l){t=z(l,"P",{class:!0,"data-svelte-h":!0}),se(t)!=="svelte-zs65m6"&&(t.textContent=e),n=X(l),r=z(l,"PRE",{class:!0});var u=Y(r);o=ut(u,s),u.forEach(M),this.h()},h(){G(t,"class","font-bold text-center"),G(r,"class","text-center")},m(l,u){q(l,t,u),q(l,n,u),q(l,r,u),F(r,o)},p(l,u){u&1&&s!==(s=l[0].name+"")&&Ft(o,s)},d(l){l&&(M(t),M(n),M(r))}}}function LT(i){let t;return{c(){t=lt("Upload")},l(e){t=ut(e,"Upload")},m(e,n){q(e,t,n)},d(e){e&&M(t)}}}function $T(i){let t;return{c(){t=lt("Terug")},l(e){t=ut(e,"Terug")},m(e,n){q(e,t,n)},d(e){e&&M(t)}}}function BT(i){let t,e,n,r="Selecteer een bestand",s,o,l,u,c,h,d,m,g=i[0]&&vh(i);return l=new pe({props:{class:"my-2",$$slots:{default:[LT]},$$scope:{ctx:i}}}),l.$on("click",i[3]),c=new pe({props:{theme:"red",class:"my-2",$$slots:{default:[$T]},$$scope:{ctx:i}}}),c.$on("click",i[5]),{c(){t=U("input"),e=Q(),n=U("label"),n.textContent=r,s=Q(),g&&g.c(),o=Q(),yt(l.$$.fragment),u=Q(),yt(c.$$.fragment),this.h()},l(y){t=z(y,"INPUT",{id:!0,class:!0,type:!0,accept:!0}),e=X(y),n=z(y,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),se(n)!=="svelte-1b0h7i7"&&(n.textContent=r),s=X(y),g&&g.l(y),o=X(y),vt(l.$$.fragment,y),u=X(y),vt(c.$$.fragment,y),this.h()},h(){G(t,"id","file-upload"),G(t,"class","hidden"),G(t,"type","file"),G(t,"accept","text/csv"),G(n,"for","file-upload"),G(n,"class","my-2 bg-blue-500 text-white px-5 rounded-md py-3 cursor-pointer")},m(y,p){q(y,t,p),i[4](t),q(y,e,p),q(y,n,p),q(y,s,p),g&&g.m(y,p),q(y,o,p),Tt(l,y,p),q(y,u,p),Tt(c,y,p),h=!0,d||(m=uo(t,"change",i[2]),d=!0)},p(y,p){y[0]?g?g.p(y,p):(g=vh(y),g.c(),g.m(o.parentNode,o)):g&&(g.d(1),g=null);const T={};p&2048&&(T.$$scope={dirty:p,ctx:y}),l.$set(T);const C={};p&2048&&(C.$$scope={dirty:p,ctx:y}),c.$set(C)},i(y){h||(K(l.$$.fragment,y),K(c.$$.fragment,y),h=!0)},o(y){Z(l.$$.fragment,y),Z(c.$$.fragment,y),h=!1},d(y){y&&(M(t),M(e),M(n),M(s),M(o),M(u)),i[4](null),g&&g.d(y),Et(l,y),Et(c,y),d=!1,m()}}}function UT(i){let t,e;return t=new Jr({props:{$$slots:{default:[BT]},$$scope:{ctx:i}}}),{c(){yt(t.$$.fragment)},l(n){vt(t.$$.fragment,n)},m(n,r){Tt(t,n,r),e=!0},p(n,[r]){const s={};r&2051&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(K(t.$$.fragment,n),e=!0)},o(n){Z(t.$$.fragment,n),e=!1},d(n){Et(t,n)}}}function zT(i,t,e){let n=null,r,s=[],o=null,l=null;function u(y){var V,k;const p=y.target,T=(V=p.files)==null?void 0:V[0];if(!T)return;const C=(k=T.name.split(".").pop())==null?void 0:k.toLowerCase(),b=T.type;if(!["text/csv","application/vnd.ms-excel"].includes(b)||C!=="csv"){alert("Ongeldig of niet-ondersteund bestandstype. Upload een CSV-bestand."),p.value="";return}e(0,n=T)}function c(){if(!n){alert("Selecteer een bestand.");return}h(),alert("Upload successvol."),e(1,r.value="",r),e(0,n=null)}function h(){const y=new FileReader;y.onload=function(p){var T;try{const b=((T=p.target)==null?void 0:T.result).split("\r").filter(O=>O.trim()!=="");if(b.length<2){alert("CSV bevat geen data.");return}const D=b[0].split(";"),V=D.indexOf("naam"),k=D.indexOf("maximaal");if(V===-1||k===-1){alert("CSV-bestand bevat niet de vereiste headers.");return}s=[],o=null,l=null;for(let O=1;O<b.length;O++){const I=b[O].split(";").map(E=>E.trim().replace("/r",""));if(I[V])if(I[V].includes("budget"))o={maximaal:I[k]};else if(I[V].includes("doel"))l={maximaal:I[k]};else{const E={};for(let v=0;v<D.length;v++)E[D[v]]=I[v];s.push(E)}}}catch(C){alert("Er is een fout opgetreden tijdens het verwerken van het bestand."),console.error(C)}},y.onerror=function(){alert("Er is een fout opgetreden tijdens het lezen van het bestand.")},y.onloadend=function(){d()},n&&y.readAsText(n)}const d=async()=>{try{const y=s.map(b=>b.id),p=await Ql(Qi(Tn,"maatregelen")),T=rT(Tn);p.docs.forEach(b=>{y.includes(b.id)||T.delete(b.ref)}),s.forEach(b=>{const D=Ha(Tn,"maatregelen",b.id);T.set(D,b,{merge:!0})});const C=Ha(Tn,"doelen","taalgroeiers");o&&T.set(C,{budget:o.maximaal},{merge:!0}),l&&T.set(C,{doel:l.maximaal},{merge:!0}),await T.commit(),console.log("Firestore updated successfully.")}catch(y){alert("Er is een fout opgetreden bij het opslaan van het bestand in Firestore."),console.error(y)}};function m(y){ki[y?"unshift":"push"](()=>{r=y,e(1,r)})}return[n,r,u,c,m,()=>nn.set(0)]}class jT extends qe{constructor(t){super(),Ge(this,t,zT,UT,xe,{})}}function qT(i){let t,e,n,r,s,o,l,u,c,h,d,m,g,y,p,T,C,b,D;return n=new _T({}),o=new FT({}),c=new RT({}),m=new TT({}),p=new Pp({}),b=new jT({}),{c(){t=U("div"),e=U("div"),yt(n.$$.fragment),r=Q(),s=U("div"),yt(o.$$.fragment),l=Q(),u=U("div"),yt(c.$$.fragment),h=Q(),d=U("div"),yt(m.$$.fragment),g=Q(),y=U("div"),yt(p.$$.fragment),T=Q(),C=U("div"),yt(b.$$.fragment),this.h()},l(V){t=z(V,"DIV",{class:!0});var k=Y(t);e=z(k,"DIV",{class:!0});var O=Y(e);vt(n.$$.fragment,O),O.forEach(M),r=X(k),s=z(k,"DIV",{class:!0});var I=Y(s);vt(o.$$.fragment,I),I.forEach(M),l=X(k),u=z(k,"DIV",{class:!0});var E=Y(u);vt(c.$$.fragment,E),E.forEach(M),h=X(k),d=z(k,"DIV",{class:!0});var v=Y(d);vt(m.$$.fragment,v),v.forEach(M),g=X(k),y=z(k,"DIV",{class:!0});var R=Y(y);vt(p.$$.fragment,R),R.forEach(M),T=X(k),C=z(k,"DIV",{class:!0});var P=Y(C);vt(b.$$.fragment,P),P.forEach(M),k.forEach(M),this.h()},h(){G(e,"class","h-screen flex justify-center items-center w-screen"),G(s,"class","h-screen flex justify-center items-center w-screen"),G(u,"class","h-screen flex justify-center items-center w-screen"),G(d,"class","h-screen flex justify-center items-center w-screen"),G(y,"class","h-screen flex justify-center items-center w-screen"),G(C,"class","h-screen flex justify-center items-center w-screen"),G(t,"class","module-page flex svelte-r0zrw9")},m(V,k){q(V,t,k),F(t,e),Tt(n,e,null),F(t,r),F(t,s),Tt(o,s,null),F(t,l),F(t,u),Tt(c,u,null),F(t,h),F(t,d),Tt(m,d,null),F(t,g),F(t,y),Tt(p,y,null),F(t,T),F(t,C),Tt(b,C,null),i[2](t),D=!0},p:or,i(V){D||(K(n.$$.fragment,V),K(o.$$.fragment,V),K(c.$$.fragment,V),K(m.$$.fragment,V),K(p.$$.fragment,V),K(b.$$.fragment,V),D=!0)},o(V){Z(n.$$.fragment,V),Z(o.$$.fragment,V),Z(c.$$.fragment,V),Z(m.$$.fragment,V),Z(p.$$.fragment,V),Z(b.$$.fragment,V),D=!1},d(V){V&&M(t),Et(n),Et(o),Et(c),Et(m),Et(p),Et(b),i[2](null)}}}function GT(i,t,e){let n;Re(i,nn,h=>e(1,n=h));const r=Qi(Tn,"stakeholders");let s;const o=h=>{const d=-100/s.children.length*h;_o.to(s,{xPercent:d,duration:1,ease:"power2.inOut"})},l=async()=>{try{const d=(await Ql(r)).docs.map(m=>({id:m.id,values:m.data().values,description:m.data().description}));fr.set(d)}catch(h){console.error("Error fetching document: ",h)}},u=()=>Wa(r,h=>{const d=h.docs.map(m=>({id:m.id,values:m.data().values,description:m.data().description}));fr.set(d)},h=>{console.log(`Encountered error: ${h}`)});lo(()=>{l(),u()});function c(h){ki[h?"unshift":"push"](()=>{s=h,e(0,s)})}return i.$$.update=()=>{i.$$.dirty&3&&s&&o(n)},[s,n,c]}class JT extends qe{constructor(t){super(),Ge(this,t,GT,qT,xe,{})}}export{JT as component};
