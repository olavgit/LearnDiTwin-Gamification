import{s as j,n as E,r as q,b as J}from"../chunks/scheduler.CIES8I8f.js";import{S as L,i as R,e as g,s as k,c as h,a as V,k as N,f as O,d as b,l as d,g as T,h as m,m as P,t as z,b as G,j as M}from"../chunks/index.C4cVm8Zc.js";function B(f){let t,r="Geselecteerd Bestand:",o,i,l=f[0].name+"",u;return{c(){t=g("p"),t.textContent=r,o=k(),i=g("pre"),u=z(l)},l(s){t=h(s,"P",{"data-svelte-h":!0}),N(t)!=="svelte-1mifa5z"&&(t.textContent=r),o=O(s),i=h(s,"PRE",{});var n=V(i);u=G(n,l),n.forEach(b)},m(s,n){T(s,t,n),T(s,o,n),T(s,i,n),m(i,u)},p(s,n){n&1&&l!==(l=s[0].name+"")&&M(u,l)},d(s){s&&(b(t),b(o),b(i))}}}function D(f){let t,r,o="Selecteer een bestand",i,l,u,s,n,x="Upload",_,C,e=f[0]&&B(f);return{c(){t=g("main"),r=g("label"),r.textContent=o,i=k(),l=g("input"),u=k(),e&&e.c(),s=k(),n=g("button"),n.textContent=x,this.h()},l(c){t=h(c,"MAIN",{class:!0});var a=V(t);r=h(a,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),N(r)!=="svelte-154sk7c"&&(r.textContent=o),i=O(a),l=h(a,"INPUT",{id:!0,class:!0,type:!0,accept:!0}),u=O(a),e&&e.l(a),s=O(a),n=h(a,"BUTTON",{class:!0,"data-svelte-h":!0}),N(n)!=="svelte-1skw0ft"&&(n.textContent=x),a.forEach(b),this.h()},h(){d(r,"for","file-upload"),d(r,"class","upload-label svelte-167ag8o"),d(l,"id","file-upload"),d(l,"class","file-upload svelte-167ag8o"),d(l,"type","file"),d(l,"accept","text/csv"),d(n,"class","upload-button svelte-167ag8o"),d(t,"class","svelte-167ag8o")},m(c,a){T(c,t,a),m(t,r),m(t,i),m(t,l),f[4](l),m(t,u),e&&e.m(t,null),m(t,s),m(t,n),_||(C=[P(l,"change",f[2]),P(n,"click",f[3])],_=!0)},p(c,[a]){c[0]?e?e.p(c,a):(e=B(c),e.c(),e.m(t,s)):e&&(e.d(1),e=null)},i:E,o:E,d(c){c&&b(t),f[4](null),e&&e.d(),_=!1,q(C)}}}function H(f,t,r){let o=null,i,l=[],u=null;function s(e){var p;const c=e.target,a=(p=c.files)==null?void 0:p[0];if(!a)return;if(a.type!=="text/csv"){alert("Ongeldig of niet-ondersteund bestandstype. Upload een CSV-bestand."),c.value="";return}r(0,o=a)}function n(){if(!o){alert("Selecteer een bestand.");return}x(),alert("Upload successvol."),r(1,i.value="",i),r(0,o=null)}function x(){const e=new FileReader;e.onload=function(c){var a;try{const p=((a=c.target)==null?void 0:a.result).split(`
`).filter(v=>v.trim()!=="");if(p.length<2){alert("CSV bevat geen data.");return}const y=p[0].split(";"),F=y.indexOf("naam"),U=y.indexOf("maximaal");if(F===-1||U===-1){alert("CSV file does not contain required headers.");return}l=[],u=null;for(let v=1;v<p.length;v++){const S=p[v].split(";");if(S[F])if(S[F].includes("budget"))u={maximaal:S[U]};else{const w={};for(let I=0;I<y.length;I++)w[y[I]]=S[I];l.push(w)}}}catch(A){alert("An error occurred while processing the file."),console.error(A)}},e.onerror=function(){alert("An error occurred while reading the file.")},e.onloadend=function(){_()},o&&e.readAsText(o)}function _(){localStorage.setItem("maatregelen",JSON.stringify(l)),localStorage.setItem("budget",JSON.stringify(u))}function C(e){J[e?"unshift":"push"](()=>{i=e,r(1,i)})}return[o,i,s,n,C]}class W extends L{constructor(t){super(),R(this,t,H,D,j,{})}}export{W as component};
