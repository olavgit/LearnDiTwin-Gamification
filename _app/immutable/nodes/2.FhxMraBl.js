import{s as Ge,o as lo,x as S_,e as ki,a as Xi,u as Yi,g as Ji,b as Zi,y as qu,z as ca,A as C_,B as yh,c as rn,n as vh}from"../chunks/scheduler.DeX6eaLU.js";import{S as Qe,i as Xe,o as Re,g as H,z as uo,r as lr,n as it,p as ur,m as J,d as M,e as z,s as tt,c as q,a as Y,f as et,l as K,q as Ue,A as Cn,H as D_,B as V_,C as Gu,v as It,w as At,x as bt,y as Rt,t as nt,D as cn,b as rt,h as F,j as Lt,E as xi}from"../chunks/index.Bq639ZhC.js";import{w as Yr}from"../chunks/index.B9vAY_CB.js";function sn(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function k_(i,t){const e={},n={},r={$$scope:1};let s=i.length;for(;s--;){const o=i[s],l=t[s];if(l){for(const u in o)u in l||(n[u]=1);for(const u in l)r[u]||(e[u]=l[u],r[u]=1);i[s]=l}else for(const u in o)r[u]=1}for(const o in n)o in e||(e[o]=void 0);return e}const Fr=Yr([]),Qa=Yr(null),Ke=Yr(0);function Oi(i,t){return i*t.minimaal*t.effectPerWeek*t.rondesPerJaar}function Us(i,t){return Oi(i,t)*t.kostenPerPersoonPerDrieMaanden}function Bs(i,t){if(i===0)return 0;{const e=Number(t.minimaal)+(i-1)*(Number(t.maximaal)-Number(t.minimaal))/9;return Math.round(e)}}const ha=Yr([]),x_=i=>i.replace(/-_$/g,"").replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z])([A-Z])(?=[a-z])/g,"$1-$2").toLowerCase(),O_=(i,t)=>{const n=i.getBoundingClientRect().width+2,r=window.getComputedStyle(i),s=parseInt(r.getPropertyValue("padding-left"),10),o=parseInt(r.getPropertyValue("padding-right"),10),l=s+o,u=n-l;return Math.round(Math.min(t,u||t))},N_=(i,t=null,e)=>{const n=i.getBoundingClientRect(),r=window.innerWidth||document.documentElement.clientWidth,s=window.innerHeight||document.documentElement.clientHeight;let o=n.bottom>0&&n.top<s&&n.right>0&&n.left<r;if(t){const l=t.getBoundingClientRect();return e==="top"||e==="bottom"?o=l.bottom+l.height<s&&l.top<s:o=l.right+l.width<r&&l.left<r,o}return o},qo=(i,t,e,n)=>{if(!i||!t)return n;const r=t.getBoundingClientRect(),s=i.getBoundingClientRect(),o=window.getComputedStyle(i).position;window.getComputedStyle(i);let l=0,u=0,c=0,h=0,_=0,m=i;for(;m&&m!==document.body;){const p=window.getComputedStyle(m),w=p.position,V=m.getBoundingClientRect();w==="fixed"?(c+=V.top+window.scrollY,_+=V.left+window.scrollX):w==="sticky"?(h+=V.top,_+=V.left+window.scrollX):(w==="absolute"||w==="relative")&&(w==="absolute"&&(l-=parseFloat(p.top)||0,u-=parseFloat(p.left)||0),w==="relative"&&(l-=m.offsetTop,u-=m.offsetLeft,e==="bottom"&&(l+=s.height),e==="right"&&(u-=s.width),o==="absolute"&&e==="right"&&(u+=s.width)));const S=p.transform;if(S&&S!=="none"){const D=new DOMMatrix(S);w==="relative"||w==="absolute"?(l-=D.m42,u-=D.m41):(l-=m.offsetTop+D.m42,u-=m.offsetLeft+D.m41)}m=m.parentElement}let g=s.top+l+h-c,E=s.left+u-_;switch(e){case"top":n.top=g,n.left=E+s.width/2;break;case"bottom":n.top=g-r.height,n.left=E+s.width/2;break;case"left":n.left=E,n.top=g+s.height/2;break;case"right":n.left=E+s.width-r.width,n.top=g+s.height/2;break}return n.top+=window.scrollY,n.left+=window.scrollX,n},M_={left:"right",right:"left",top:"bottom",bottom:"top"};function F_(i){let t;const e=i[22].default,n=Xi(e,i,i[21],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),t=!0},p(r,s){n&&n.p&&(!t||s[0]&2097152)&&Yi(n,e,r,r[21],t?Zi(e,r[21],s,null):Ji(r[21]),null)},i(r){t||(J(n,r),t=!0)},o(r){it(n,r),t=!1},d(r){n&&n.d(r)}}}function L_(i){let t,e,n,r,s;const o=i[22].default,l=Xi(o,i,i[21],null);let u=!i[12]&&Hu(i);return{c(){t=z("span"),l&&l.c(),e=tt(),n=z("div"),u&&u.c(),this.h()},l(c){t=q(c,"SPAN",{class:!0});var h=Y(t);l&&l.l(h),h.forEach(M),e=et(c),n=q(c,"DIV",{class:!0,style:!0});var _=Y(n);u&&u.l(_),_.forEach(M),this.h()},h(){K(t,"class","tooltip-container"),K(n,"class",r="tooltip animation-"+i[9]+" "+i[0]+" "+i[4]+" svelte-1xktviv"),Ue(n,"bottom","auto"),Ue(n,"right","auto"),Ue(n,"left",i[11].left+"px"),Ue(n,"min-width",i[8]+"px"),Ue(n,"max-width",i[3]+"px"),Ue(n,"text-align",i[2]),Ue(n,"top",i[11].top+"px"),Cn(n,"arrowless",!i[5]),Cn(n,"show",i[10])},m(c,h){H(c,t,h),l&&l.m(t,null),i[23](t),H(c,e,h),H(c,n,h),u&&u.m(n,null),i[24](n),s=!0},p(c,h){l&&l.p&&(!s||h[0]&2097152)&&Yi(l,o,c,c[21],s?Zi(o,c[21],h,null):Ji(c[21]),null),c[12]?u&&(u.d(1),u=null):u?u.p(c,h):(u=Hu(c),u.c(),u.m(n,null)),(!s||h[0]&529&&r!==(r="tooltip animation-"+c[9]+" "+c[0]+" "+c[4]+" svelte-1xktviv"))&&K(n,"class",r),(!s||h[0]&2048)&&Ue(n,"left",c[11].left+"px"),(!s||h[0]&256)&&Ue(n,"min-width",c[8]+"px"),(!s||h[0]&8)&&Ue(n,"max-width",c[3]+"px"),(!s||h[0]&4)&&Ue(n,"text-align",c[2]),(!s||h[0]&2048)&&Ue(n,"top",c[11].top+"px"),(!s||h[0]&561)&&Cn(n,"arrowless",!c[5]),(!s||h[0]&1553)&&Cn(n,"show",c[10])},i(c){s||(J(l,c),s=!0)},o(c){it(l,c),s=!1},d(c){c&&(M(t),M(e),M(n)),l&&l.d(c),i[23](null),u&&u.d(),i[24](null)}}}function Hu(i){let t,e;return{c(){t=new D_(!1),e=Re(),this.h()},l(n){t=V_(n,!1),e=Re(),this.h()},h(){t.a=e},m(n,r){t.m(i[1],n,r),H(n,e,r)},p(n,r){r[0]&2&&t.p(n[1])},d(n){n&&(M(e),t.d())}}}function $_(i){let t,e,n,r,s,o;const l=[L_,F_],u=[];function c(h,_){return h[1]?0:1}return t=c(i),e=u[t]=l[t](i),{c(){e.c(),n=Re()},l(h){e.l(h),n=Re()},m(h,_){u[t].m(h,_),H(h,n,_),r=!0,s||(o=uo(window,"resize",i[13]),s=!0)},p(h,_){let m=t;t=c(h),t===m?u[t].p(h,_):(lr(),it(u[m],1,1,()=>{u[m]=null}),ur(),e=u[t],e?e.p(h,_):(e=u[t]=l[t](h),e.c()),J(e,1),e.m(n.parentNode,n))},i(h){r||(J(e),r=!0)},o(h){it(e),r=!1},d(h){h&&M(n),u[t].d(h),s=!1,o()}}}function U_(i,t,e){let n,{$$slots:r={},$$scope:s}=t,{action:o="hover"}=t,{content:l=""}=t,{align:u="left"}=t,{position:c="top"}=t,{maxWidth:h=200}=t,{style:_=null}=t,{theme:m=""}=t,{animation:g=""}=t,{hideOnClickOutside:E=!1}=t,{delay:p=200}=t,{arrow:w=!0}=t,{autoPosition:V=!1}=t,{show:S=!1}=t,D=null,C=null,k=0,O=null,I=c,v=null,y=null,b=!1,R={bottom:0,top:0,right:0,left:0};const P=({target:U})=>{E&&D!==U&&C!==U&&!(D!=null&&D.parentNode.contains(U))&&!(C!=null&&C.contains(U))&&ot()},A=()=>{b?ot():Q()},Q=()=>{const U=g?p:0;V&&!N_(D,C,c)&&e(0,c=M_[c]),e(11,R=qo(D,C,c,R)),g&&e(9,v=g),y=setTimeout(()=>e(10,b=!0),U)},ot=()=>{e(10,b=!1),e(0,c=I),e(9,v=null),y&&(clearTimeout(y),y=null)},X=()=>{D!==null&&(ct(),o==="click"&&(D.addEventListener("click",A),E&&document.addEventListener("click",P,{passive:!0,capture:!0})),o==="hover"&&(D.addEventListener("mouseenter",Q),D.addEventListener("mouseleave",ot)))},ct=()=>{E&&document.removeEventListener("click",P),D!==null&&(D.removeEventListener("click",A),D.removeEventListener("mouseenter",Q),D.removeEventListener("mouseleave",ot))};lo(()=>{if(X(),qo(),C!==null&&(n&&!O&&(O=new l.component({target:C,props:l.props})),e(8,k=O_(C,h)),_&&typeof _=="object"))for(let U in _){const ht=x_(U),vt=_[U];C.style.setProperty(`--tooltip-${ht}`,vt)}}),S_(()=>{O&&(O.$destroy(),O=null),ct()});const j=()=>{b&&e(11,R=qo(D,C,c,R))};function ut(U){ki[U?"unshift":"push"](()=>{D=U,e(7,D)})}function dt(U){ki[U?"unshift":"push"](()=>{C=U,e(6,C)})}return i.$$set=U=>{"action"in U&&e(14,o=U.action),"content"in U&&e(1,l=U.content),"align"in U&&e(2,u=U.align),"position"in U&&e(0,c=U.position),"maxWidth"in U&&e(3,h=U.maxWidth),"style"in U&&e(15,_=U.style),"theme"in U&&e(4,m=U.theme),"animation"in U&&e(16,g=U.animation),"hideOnClickOutside"in U&&e(17,E=U.hideOnClickOutside),"delay"in U&&e(18,p=U.delay),"arrow"in U&&e(5,w=U.arrow),"autoPosition"in U&&e(19,V=U.autoPosition),"show"in U&&e(20,S=U.show),"$$scope"in U&&e(21,s=U.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&2&&e(12,n=typeof l=="object"),i.$$.dirty[0]&16384&&X(),i.$$.dirty[0]&1048640&&setTimeout(C&&S?Q:ot,0)},[c,l,u,h,m,w,C,D,k,v,b,R,n,j,o,_,g,E,p,V,S,s,r,ut,dt]}class B_ extends Qe{constructor(t){super(),Xe(this,t,U_,$_,Ge,{action:14,content:1,align:2,position:0,maxWidth:3,style:15,theme:4,animation:16,hideOnClickOutside:17,delay:18,arrow:5,autoPosition:19,show:20},null,[-1,-1])}}function j_(i){let t,e;const n=i[1].default,r=Xi(n,i,i[0],null);return{c(){t=z("div"),r&&r.c(),this.h()},l(s){t=q(s,"DIV",{class:!0});var o=Y(t);r&&r.l(o),o.forEach(M),this.h()},h(){K(t,"class","p-14 bg-white shadow-lg flex flex-col")},m(s,o){H(s,t,o),r&&r.m(t,null),e=!0},p(s,[o]){r&&r.p&&(!e||o&1)&&Yi(r,n,s,s[0],e?Zi(n,s[0],o,null):Ji(s[0]),null)},i(s){e||(J(r,s),e=!0)},o(s){it(r,s),e=!1},d(s){s&&M(t),r&&r.d(s)}}}function z_(i,t,e){let{$$slots:n={},$$scope:r}=t;return i.$$set=s=>{"$$scope"in s&&e(0,r=s.$$scope)},[r,n]}class ts extends Qe{constructor(t){super(),Xe(this,t,z_,j_,Ge,{})}}function q_(i){return i.filter(Boolean).join(" ")}function Go(i){let t,e,n,r,s;const o=i[6].default,l=Xi(o,i,i[5],null);let u=[{class:e="button-base "+i[3]},{href:i[1]},{target:i[2]},{role:"button"},{tabindex:"0"},i[4]],c={};for(let h=0;h<u.length;h+=1)c=ca(c,u[h]);return{c(){t=z(i[1]?"a":"button"),l&&l.c(),this.h()},l(h){t=q(h,((i[1]?"a":"button")||"null").toUpperCase(),{class:!0,href:!0,target:!0,role:!0,tabindex:!0});var _=Y(t);l&&l.l(_),_.forEach(M),this.h()},h(){Gu(i[1]?"a":"button")(t,c)},m(h,_){H(h,t,_),l&&l.m(t,null),i[8](t),n=!0,r||(s=uo(t,"click",i[7]),r=!0)},p(h,_){l&&l.p&&(!n||_&32)&&Yi(l,o,h,h[5],n?Zi(o,h[5],_,null):Ji(h[5]),null),Gu(h[1]?"a":"button")(t,c=k_(u,[(!n||_&8&&e!==(e="button-base "+h[3]))&&{class:e},(!n||_&2)&&{href:h[1]},(!n||_&4)&&{target:h[2]},{role:"button"},{tabindex:"0"},_&16&&h[4]]))},i(h){n||(J(l,h),n=!0)},o(h){it(l,h),n=!1},d(h){h&&M(t),l&&l.d(h),i[8](null),r=!1,s()}}}function G_(i){let t=i[1]?"a":"button",e,n,r=(i[1]?"a":"button")&&Go(i);return{c(){r&&r.c(),e=Re()},l(s){r&&r.l(s),e=Re()},m(s,o){r&&r.m(s,o),H(s,e,o),n=!0},p(s,[o]){s[1],t?Ge(t,s[1]?"a":"button")?(r.d(1),r=Go(s),t=s[1]?"a":"button",r.c(),r.m(e.parentNode,e)):r.p(s,o):(r=Go(s),t=s[1]?"a":"button",r.c(),r.m(e.parentNode,e))},i(s){n||(J(r,s),n=!0)},o(s){it(r,s),n=!1},d(s){s&&M(e),r&&r.d(s)}}}function H_(i,t,e){const n=["el","href","target","class"];let r=qu(t,n),{$$slots:s={},$$scope:o}=t,{el:l=void 0}=t,{href:u=void 0}=t,{target:c=void 0}=t,{class:h=""}=t;function _(g){yh.call(this,i,g)}function m(g){ki[g?"unshift":"push"](()=>{l=g,e(0,l)})}return i.$$set=g=>{t=ca(ca({},t),C_(g)),e(4,r=qu(t,n)),"el"in g&&e(0,l=g.el),"href"in g&&e(1,u=g.href),"target"in g&&e(2,c=g.target),"class"in g&&e(3,h=g.class),"$$scope"in g&&e(5,o=g.$$scope)},[l,u,c,h,r,o,s,_,m]}class K_ extends Qe{constructor(t){super(),Xe(this,t,H_,G_,Ge,{el:0,href:1,target:2,class:3})}}function W_(i){let t;const e=i[5].default,n=Xi(e,i,i[7],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),t=!0},p(r,s){n&&n.p&&(!t||s&128)&&Yi(n,e,r,r[7],t?Zi(e,r[7],s,null):Ji(r[7]),null)},i(r){t||(J(n,r),t=!0)},o(r){it(n,r),t=!1},d(r){n&&n.d(r)}}}function Q_(i){let t,e;return t=new K_({props:{class:"button-main px-5 rounded-md py-3 "+i[2],href:i[0],target:i[1],$$slots:{default:[W_]},$$scope:{ctx:i}}}),t.$on("click",i[6]),{c(){It(t.$$.fragment)},l(n){At(t.$$.fragment,n)},m(n,r){bt(t,n,r),e=!0},p(n,[r]){const s={};r&4&&(s.class="button-main px-5 rounded-md py-3 "+n[2]),r&1&&(s.href=n[0]),r&2&&(s.target=n[1]),r&128&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(J(t.$$.fragment,n),e=!0)},o(n){it(t.$$.fragment,n),e=!1},d(n){Rt(t,n)}}}function X_(i,t,e){let n,{$$slots:r={},$$scope:s}=t,{theme:o="blue"}=t,{href:l=void 0}=t,{target:u=void 0}=t,{class:c=""}=t;function h(_){yh.call(this,i,_)}return i.$$set=_=>{"theme"in _&&e(3,o=_.theme),"href"in _&&e(0,l=_.href),"target"in _&&e(1,u=_.target),"class"in _&&e(4,c=_.class),"$$scope"in _&&e(7,s=_.$$scope)},i.$$.update=()=>{i.$$.dirty&24&&e(2,n=q_([o==="blue"&&"bg-blue-500 text-white",o==="red"&&"bg-red-500 text-white",c]))},[l,u,n,o,c,r,h,s]}class Ee extends Qe{constructor(t){super(),Xe(this,t,X_,Q_,Ge,{theme:3,href:0,target:1,class:4})}}function Ku(i,t,e){const n=i.slice();return n[13]=t[e],n}function Wu(i,t,e){const n=i.slice();return n[16]=t[e],n[18]=e,n}function Qu(i,t,e){const n=i.slice();return n[19]=t[e],n[18]=e,n}function Xu(i){let t,e,n=i[0][i[18]].naam.charAt(0).toUpperCase()+i[0][i[18]].naam.slice(1)+"",r,s,o=i[19].toFixed(2)+"",l;return{c(){t=z("div"),e=z("span"),r=nt(n),s=nt(`\r
                        heeft een gemiddelde schaal van `),l=nt(o)},l(u){t=q(u,"DIV",{});var c=Y(t);e=q(c,"SPAN",{});var h=Y(e);r=rt(h,n),s=rt(h,`\r
                        heeft een gemiddelde schaal van `),l=rt(h,o),h.forEach(M),c.forEach(M)},m(u,c){H(u,t,c),F(t,e),F(e,r),F(e,s),F(e,l)},p(u,c){c&1&&n!==(n=u[0][u[18]].naam.charAt(0).toUpperCase()+u[0][u[18]].naam.slice(1)+"")&&Lt(r,n),c&2&&o!==(o=u[19].toFixed(2)+"")&&Lt(l,o)},d(u){u&&M(t)}}}function Y_(i){let t;return{c(){t=nt("Terug")},l(e){t=rt(e,"Terug")},m(e,n){H(e,t,n)},d(e){e&&M(t)}}}function Yu(i){let t,e=sn(i[13].values),n=[];for(let r=0;r<e.length;r+=1)n[r]=Ju(Wu(i,e,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();t=Re()},l(r){for(let s=0;s<n.length;s+=1)n[s].l(r);t=Re()},m(r,s){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(r,s);H(r,t,s)},p(r,s){if(s&33){e=sn(r[13].values);let o;for(o=0;o<e.length;o+=1){const l=Wu(r,e,o);n[o]?n[o].p(l,s):(n[o]=Ju(l),n[o].c(),n[o].m(t.parentNode,t))}for(;o<n.length;o+=1)n[o].d(1);n.length=e.length}},d(r){r&&M(t),xi(n,r)}}}function Ju(i){let t,e=i[0][i[18]].naam.charAt(0).toUpperCase()+i[0][i[18]].naam.slice(1)+"",n,r,s=i[16]+"",o;return{c(){t=z("p"),n=nt(e),r=nt(`\r
                                : `),o=nt(s)},l(l){t=q(l,"P",{});var u=Y(t);n=rt(u,e),r=rt(u,`\r
                                : `),o=rt(u,s),u.forEach(M)},m(l,u){H(l,t,u),F(t,n),F(t,r),F(t,o)},p(l,u){u&1&&e!==(e=l[0][l[18]].naam.charAt(0).toUpperCase()+l[0][l[18]].naam.slice(1)+"")&&Lt(n,e),u&32&&s!==(s=l[16]+"")&&Lt(o,s)},d(l){l&&M(t)}}}function J_(i){let t,e="Sentiment:";return{c(){t=z("u"),t.textContent=e},l(n){t=q(n,"U",{"data-svelte-h":!0}),cn(t)!=="svelte-1epx1kf"&&(t.textContent=e)},m(n,r){H(n,t,r)},p:vh,d(n){n&&M(t)}}}function Z_(i){let t;return{c(){t=nt(":)")},l(e){t=rt(e,":)")},m(e,n){H(e,t,n)},d(e){e&&M(t)}}}function tm(i){let t;return{c(){t=nt(":|")},l(e){t=rt(e,":|")},m(e,n){H(e,t,n)},d(e){e&&M(t)}}}function em(i){let t;return{c(){t=nt(":(")},l(e){t=rt(e,":(")},m(e,n){H(e,t,n)},d(e){e&&M(t)}}}function Zu(i){let t,e,n,r,s=i[13].id+"",o,l,u,c,h,_,m,g,E,p,w=i[0].length&&Yu(i);h=new B_({props:{content:"In hoeverre de keuze van de vertegenwoordiger uitwijkt van het gemiddelde.",action:"click",$$slots:{default:[J_]},$$scope:{ctx:i}}});function V(C,k){return k&32&&(m=null),k&32&&(g=null),m==null&&(m=C[6](C[13])>Rs||C[6](C[13])<-Rs),m?em:(g==null&&(g=C[6](C[13])===Rs||C[6](C[13])===-Rs),g?tm:Z_)}let S=V(i,-1),D=S(i);return{c(){t=z("div"),e=z("p"),n=nt("Team "),r=z("b"),o=nt(s),l=nt(" heeft het volgende gestemd:"),u=tt(),w&&w.c(),c=tt(),It(h.$$.fragment),_=tt(),D.c(),E=tt(),this.h()},l(C){t=q(C,"DIV",{class:!0});var k=Y(t);e=q(k,"P",{class:!0});var O=Y(e);n=rt(O,"Team "),r=q(O,"B",{});var I=Y(r);o=rt(I,s),I.forEach(M),l=rt(O," heeft het volgende gestemd:"),O.forEach(M),u=et(k),w&&w.l(k),c=et(k),At(h.$$.fragment,k),_=et(k),D.l(k),E=et(k),k.forEach(M),this.h()},h(){K(e,"class","border-y-2 px-2"),K(t,"class","border-2 rounded")},m(C,k){H(C,t,k),F(t,e),F(e,n),F(e,r),F(r,o),F(e,l),F(t,u),w&&w.m(t,null),F(t,c),bt(h,t,null),F(t,_),D.m(t,null),F(t,E),p=!0},p(C,k){(!p||k&32)&&s!==(s=C[13].id+"")&&Lt(o,s),C[0].length?w?w.p(C,k):(w=Yu(C),w.c(),w.m(t,c)):w&&(w.d(1),w=null);const O={};k&2097152&&(O.$$scope={dirty:k,ctx:C}),h.$set(O),S!==(S=V(C,k))&&(D.d(1),D=S(C),D&&(D.c(),D.m(t,E)))},i(C){p||(J(h.$$.fragment,C),p=!0)},o(C){it(h.$$.fragment,C),p=!1},d(C){C&&M(t),w&&w.d(),Rt(h),D.d()}}}function nm(i){let t,e,n,r="Resultaat",s,o,l,u,c,h,_,m,g,E=i[3].toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"",p,w,V,S,D,C,k,O,I,v,y,b,R="",P,A=sn(i[1]),Q=[];for(let j=0;j<A.length;j+=1)Q[j]=Xu(Qu(i,A,j));O=new Ee({props:{theme:"red",$$slots:{default:[Y_]},$$scope:{ctx:i}}}),O.$on("click",i[8]);let ot=sn(i[5]),X=[];for(let j=0;j<ot.length;j+=1)X[j]=Zu(Ku(i,ot,j));const ct=j=>it(X[j],1,1,()=>{X[j]=null});return{c(){t=z("div"),e=z("div"),n=z("div"),n.textContent=r,s=tt();for(let j=0;j<Q.length;j+=1)Q[j].c();o=tt(),l=z("div"),u=z("p"),c=nt("Geholpen mensen per jaar: "),h=nt(i[2]),_=tt(),m=z("p"),g=nt("Kosten per jaar: "),p=nt(E),w=tt(),V=z("p"),S=nt("Aantal vrijwilligers per jaar: "),D=nt(i[4]),C=tt(),k=z("div"),It(O.$$.fragment),I=tt(),v=z("div");for(let j=0;j<X.length;j+=1)X[j].c();y=tt(),b=z("div"),b.innerHTML=R,this.h()},l(j){t=q(j,"DIV",{class:!0});var ut=Y(t);e=q(ut,"DIV",{class:!0});var dt=Y(e);n=q(dt,"DIV",{class:!0,"data-svelte-h":!0}),cn(n)!=="svelte-17bvcbp"&&(n.textContent=r),s=et(dt);for(let Yt=0;Yt<Q.length;Yt+=1)Q[Yt].l(dt);o=et(dt),l=q(dt,"DIV",{class:!0});var U=Y(l);u=q(U,"P",{});var ht=Y(u);c=rt(ht,"Geholpen mensen per jaar: "),h=rt(ht,i[2]),ht.forEach(M),_=et(U),m=q(U,"P",{});var vt=Y(m);g=rt(vt,"Kosten per jaar: "),p=rt(vt,E),vt.forEach(M),w=et(U),V=q(U,"P",{});var jt=Y(V);S=rt(jt,"Aantal vrijwilligers per jaar: "),D=rt(jt,i[4]),jt.forEach(M),U.forEach(M),C=et(dt),k=q(dt,"DIV",{});var zt=Y(k);At(O.$$.fragment,zt),zt.forEach(M),dt.forEach(M),I=et(ut),v=q(ut,"DIV",{class:!0});var An=Y(v);for(let Yt=0;Yt<X.length;Yt+=1)X[Yt].l(An);An.forEach(M),y=et(ut),b=q(ut,"DIV",{class:!0,"data-svelte-h":!0}),cn(b)!=="svelte-4rp8dz"&&(b.innerHTML=R),ut.forEach(M),this.h()},h(){K(n,"class","font-bold text-2xl mb-4"),K(l,"class","py-2"),K(e,"class","border-2 rounded p-2"),K(v,"class","grid grid-cols-2 justify-between"),K(b,"class","example"),K(t,"class","flex flex-row m")},m(j,ut){H(j,t,ut),F(t,e),F(e,n),F(e,s);for(let dt=0;dt<Q.length;dt+=1)Q[dt]&&Q[dt].m(e,null);F(e,o),F(e,l),F(l,u),F(u,c),F(u,h),F(l,_),F(l,m),F(m,g),F(m,p),F(l,w),F(l,V),F(V,S),F(V,D),F(e,C),F(e,k),bt(O,k,null),F(t,I),F(t,v);for(let dt=0;dt<X.length;dt+=1)X[dt]&&X[dt].m(v,null);F(t,y),F(t,b),P=!0},p(j,ut){if(ut&3){A=sn(j[1]);let U;for(U=0;U<A.length;U+=1){const ht=Qu(j,A,U);Q[U]?Q[U].p(ht,ut):(Q[U]=Xu(ht),Q[U].c(),Q[U].m(e,o))}for(;U<Q.length;U+=1)Q[U].d(1);Q.length=A.length}(!P||ut&4)&&Lt(h,j[2]),(!P||ut&8)&&E!==(E=j[3].toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"")&&Lt(p,E),(!P||ut&16)&&Lt(D,j[4]);const dt={};if(ut&2097152&&(dt.$$scope={dirty:ut,ctx:j}),O.$set(dt),ut&97){ot=sn(j[5]);let U;for(U=0;U<ot.length;U+=1){const ht=Ku(j,ot,U);X[U]?(X[U].p(ht,ut),J(X[U],1)):(X[U]=Zu(ht),X[U].c(),J(X[U],1),X[U].m(v,null))}for(lr(),U=ot.length;U<X.length;U+=1)ct(U);ur()}},i(j){if(!P){J(O.$$.fragment,j);for(let ut=0;ut<ot.length;ut+=1)J(X[ut]);P=!0}},o(j){it(O.$$.fragment,j),X=X.filter(Boolean);for(let ut=0;ut<X.length;ut+=1)it(X[ut]);P=!1},d(j){j&&M(t),xi(Q,j),Rt(O),xi(X,j)}}}function rm(i){let t,e;return t=new ts({props:{$$slots:{default:[nm]},$$scope:{ctx:i}}}),{c(){It(t.$$.fragment)},l(n){At(t.$$.fragment,n)},m(n,r){bt(t,n,r),e=!0},p(n,[r]){const s={};r&2097215&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(J(t.$$.fragment,n),e=!0)},o(n){it(t.$$.fragment,n),e=!1},d(n){Rt(t,n)}}}const Rs=1;function im(i,t,e){let n,r;rn(i,Fr,p=>e(7,n=p)),rn(i,ha,p=>e(0,r=p));let s=[],o=0,l=0,u=0,c=[];setTimeout(()=>{},5e3);const h=()=>{let p=[],w=n.length;n.forEach(V=>{V.values.forEach((S,D)=>{p[D]||(p[D]=0),p[D]+=S})}),e(1,s=p.map(V=>V/w))},_=()=>{e(2,o=r.reduce((p,w,V)=>p+Oi(s[V]??0,w),0)),e(3,l=r.reduce((p,w,V)=>p+Us(s[V]??0,w),0)),e(4,u=r.reduce((p,w,V)=>p+Bs(s[V]??0,w),0))},m=()=>{e(5,c=[]),n.forEach(p=>{c.push(p)})},g=p=>{const w=[];for(let D=0;D<s.length;D++){const C=s[D]-p.values[D];w.push(C)}return w.reduce((D,C)=>D+C,0)/w.length},E=()=>{Ke.set(0)};return i.$$.update=()=>{i.$$.dirty&129&&r.length&&n.length&&(h(),_(),m())},[r,s,o,l,u,c,g,n,E]}class sm extends Qe{constructor(t){super(),Xe(this,t,im,rm,Ge,{})}}var tc={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th=function(i){const t=[];let e=0;for(let n=0;n<i.length;n++){let r=i.charCodeAt(n);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(i.charCodeAt(++n)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},om=function(i){const t=[];let e=0,n=0;for(;e<i.length;){const r=i[e++];if(r<128)t[n++]=String.fromCharCode(r);else if(r>191&&r<224){const s=i[e++];t[n++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=i[e++],o=i[e++],l=i[e++],u=((r&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;t[n++]=String.fromCharCode(55296+(u>>10)),t[n++]=String.fromCharCode(56320+(u&1023))}else{const s=i[e++],o=i[e++];t[n++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},Eh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<i.length;r+=3){const s=i[r],o=r+1<i.length,l=o?i[r+1]:0,u=r+2<i.length,c=u?i[r+2]:0,h=s>>2,_=(s&3)<<4|l>>4;let m=(l&15)<<2|c>>6,g=c&63;u||(g=64,o||(m=64)),n.push(e[h],e[_],e[m],e[g])}return n.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(Th(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):om(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<i.length;){const s=e[i.charAt(r++)],l=r<i.length?e[i.charAt(r)]:0;++r;const c=r<i.length?e[i.charAt(r)]:64;++r;const _=r<i.length?e[i.charAt(r)]:64;if(++r,s==null||l==null||c==null||_==null)throw new am;const m=s<<2|l>>4;if(n.push(m),c!==64){const g=l<<4&240|c>>2;if(n.push(g),_!==64){const E=c<<6&192|_;n.push(E)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class am extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lm=function(i){const t=Th(i);return Eh.encodeByteArray(t,!0)},js=function(i){return lm(i).replace(/\./g,"")},um=function(i){try{return Eh.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hm=()=>cm().__FIREBASE_DEFAULTS__,fm=()=>{if(typeof process>"u"||typeof tc>"u")return;const i=tc.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},dm=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&um(i[1]);return t&&JSON.parse(t)},Xa=()=>{try{return hm()||fm()||dm()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},_m=i=>{var t,e;return(e=(t=Xa())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[i]},mm=i=>{const t=_m(i);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),n]:[t.substring(0,e),n]},wh=()=>{var i;return(i=Xa())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},n=t||"demo-project",r=i.iat||0,s=i.sub||i.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},i);return[js(JSON.stringify(e)),js(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ym(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vm(){var i;const t=(i=Xa())===null||i===void 0?void 0:i.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Tm(){return!vm()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Em(){try{return typeof indexedDB=="object"}catch{return!1}}function wm(){return new Promise((i,t)=>{try{let e=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(n),i(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im="FirebaseError";class Jr extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name=Im,Object.setPrototypeOf(this,Jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ih.prototype.create)}}class Ih{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?Am(s,n):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new Jr(r,l,n)}}function Am(i,t){return i.replace(bm,(e,n)=>{const r=t[n];return r!=null?String(r):`<${n}?>`})}const bm=/\{\$([^}]+)}/g;function fa(i,t){if(i===t)return!0;const e=Object.keys(i),n=Object.keys(t);for(const r of e){if(!n.includes(r))return!1;const s=i[r],o=t[r];if(ec(s)&&ec(o)){if(!fa(s,o))return!1}else if(s!==o)return!1}for(const r of n)if(!e.includes(r))return!1;return!0}function ec(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(i){return i&&i._delegate?i._delegate:i}class Ni{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const n=new pm;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Sm(t))try{this.getOrInitializeService({instanceIdentifier:Zn})}catch{}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const s=this.getOrInitializeService({instanceIdentifier:r});n.resolve(s)}catch{}}}}clearInstance(t=Zn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Zn){return this.instances.has(t)}getOptions(t=Zn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&o.resolve(r)}return r}onInit(t,e){var n;const r=this.normalizeInstanceIdentifier(e),s=(n=this.onInitCallbacks.get(r))!==null&&n!==void 0?n:new Set;s.add(t),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Pm(t),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Zn){return this.component?this.component.multipleInstances?t:Zn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Pm(i){return i===Zn?void 0:i}function Sm(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new Rm(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(gt||(gt={}));const Dm={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},Vm=gt.INFO,km={[gt.DEBUG]:"log",[gt.VERBOSE]:"log",[gt.INFO]:"info",[gt.WARN]:"warn",[gt.ERROR]:"error"},xm=(i,t,...e)=>{if(t<i.logLevel)return;const n=new Date().toISOString(),r=km[t];if(r)console[r](`[${n}]  ${i.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Ah{constructor(t){this.name=t,this._logLevel=Vm,this._logHandler=xm,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in gt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Dm[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,gt.DEBUG,...t),this._logHandler(this,gt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,gt.VERBOSE,...t),this._logHandler(this,gt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,gt.INFO,...t),this._logHandler(this,gt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,gt.WARN,...t),this._logHandler(this,gt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,gt.ERROR,...t),this._logHandler(this,gt.ERROR,...t)}}const Om=(i,t)=>t.some(e=>i instanceof e);let nc,rc;function Nm(){return nc||(nc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Mm(){return rc||(rc=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const bh=new WeakMap,da=new WeakMap,Rh=new WeakMap,Ho=new WeakMap,Ya=new WeakMap;function Fm(i){const t=new Promise((e,n)=>{const r=()=>{i.removeEventListener("success",s),i.removeEventListener("error",o)},s=()=>{e(On(i.result)),r()},o=()=>{n(i.error),r()};i.addEventListener("success",s),i.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&bh.set(e,i)}).catch(()=>{}),Ya.set(t,i),t}function Lm(i){if(da.has(i))return;const t=new Promise((e,n)=>{const r=()=>{i.removeEventListener("complete",s),i.removeEventListener("error",o),i.removeEventListener("abort",o)},s=()=>{e(),r()},o=()=>{n(i.error||new DOMException("AbortError","AbortError")),r()};i.addEventListener("complete",s),i.addEventListener("error",o),i.addEventListener("abort",o)});da.set(i,t)}let _a={get(i,t,e){if(i instanceof IDBTransaction){if(t==="done")return da.get(i);if(t==="objectStoreNames")return i.objectStoreNames||Rh.get(i);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return On(i[t])},set(i,t,e){return i[t]=e,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function $m(i){_a=i(_a)}function Um(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const n=i.call(Ko(this),t,...e);return Rh.set(n,t.sort?t.sort():[t]),On(n)}:Mm().includes(i)?function(...t){return i.apply(Ko(this),t),On(bh.get(this))}:function(...t){return On(i.apply(Ko(this),t))}}function Bm(i){return typeof i=="function"?Um(i):(i instanceof IDBTransaction&&Lm(i),Om(i,Nm())?new Proxy(i,_a):i)}function On(i){if(i instanceof IDBRequest)return Fm(i);if(Ho.has(i))return Ho.get(i);const t=Bm(i);return t!==i&&(Ho.set(i,t),Ya.set(t,i)),t}const Ko=i=>Ya.get(i);function jm(i,t,{blocked:e,upgrade:n,blocking:r,terminated:s}={}){const o=indexedDB.open(i,t),l=On(o);return n&&o.addEventListener("upgradeneeded",u=>{n(On(o.result),u.oldVersion,u.newVersion,On(o.transaction),u)}),e&&o.addEventListener("blocked",u=>e(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const zm=["get","getKey","getAll","getAllKeys","count"],qm=["put","add","delete","clear"],Wo=new Map;function ic(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(Wo.get(t))return Wo.get(t);const e=t.replace(/FromIndex$/,""),n=t!==e,r=qm.includes(e);if(!(e in(n?IDBIndex:IDBObjectStore).prototype)||!(r||zm.includes(e)))return;const s=async function(o,...l){const u=this.transaction(o,r?"readwrite":"readonly");let c=u.store;return n&&(c=c.index(l.shift())),(await Promise.all([c[e](...l),r&&u.done]))[0]};return Wo.set(t,s),s}$m(i=>({...i,get:(t,e,n)=>ic(t,e)||i.get(t,e,n),has:(t,e)=>!!ic(t,e)||i.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(Hm(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function Hm(i){const t=i.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ma="@firebase/app",sc="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr=new Ah("@firebase/app"),Km="@firebase/app-compat",Wm="@firebase/analytics-compat",Qm="@firebase/analytics",Xm="@firebase/app-check-compat",Ym="@firebase/app-check",Jm="@firebase/auth",Zm="@firebase/auth-compat",tp="@firebase/database",ep="@firebase/database-compat",np="@firebase/functions",rp="@firebase/functions-compat",ip="@firebase/installations",sp="@firebase/installations-compat",op="@firebase/messaging",ap="@firebase/messaging-compat",lp="@firebase/performance",up="@firebase/performance-compat",cp="@firebase/remote-config",hp="@firebase/remote-config-compat",fp="@firebase/storage",dp="@firebase/storage-compat",_p="@firebase/firestore",mp="@firebase/vertexai-preview",pp="@firebase/firestore-compat",gp="firebase",yp="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="[DEFAULT]",vp={[ma]:"fire-core",[Km]:"fire-core-compat",[Qm]:"fire-analytics",[Wm]:"fire-analytics-compat",[Ym]:"fire-app-check",[Xm]:"fire-app-check-compat",[Jm]:"fire-auth",[Zm]:"fire-auth-compat",[tp]:"fire-rtdb",[ep]:"fire-rtdb-compat",[np]:"fire-fn",[rp]:"fire-fn-compat",[ip]:"fire-iid",[sp]:"fire-iid-compat",[op]:"fire-fcm",[ap]:"fire-fcm-compat",[lp]:"fire-perf",[up]:"fire-perf-compat",[cp]:"fire-rc",[hp]:"fire-rc-compat",[fp]:"fire-gcs",[dp]:"fire-gcs-compat",[_p]:"fire-fst",[pp]:"fire-fst-compat",[mp]:"fire-vertex","fire-js":"fire-js",[gp]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=new Map,Tp=new Map,ga=new Map;function oc(i,t){try{i.container.addComponent(t)}catch(e){cr.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,e)}}function qs(i){const t=i.name;if(ga.has(t))return cr.debug(`There were multiple attempts to register component ${t}.`),!1;ga.set(t,i);for(const e of zs.values())oc(e,i);for(const e of Tp.values())oc(e,i);return!0}function Ep(i,t){const e=i.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),i.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Nn=new Ih("app","Firebase",wp);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ni("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Nn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap=yp;function Ph(i,t={}){let e=i;typeof t!="object"&&(t={name:t});const n=Object.assign({name:pa,automaticDataCollectionEnabled:!1},t),r=n.name;if(typeof r!="string"||!r)throw Nn.create("bad-app-name",{appName:String(r)});if(e||(e=wh()),!e)throw Nn.create("no-options");const s=zs.get(r);if(s){if(fa(e,s.options)&&fa(n,s.config))return s;throw Nn.create("duplicate-app",{appName:r})}const o=new Cm(r);for(const u of ga.values())o.addComponent(u);const l=new Ip(e,n,o);return zs.set(r,l),l}function bp(i=pa){const t=zs.get(i);if(!t&&i===pa&&wh())return Ph();if(!t)throw Nn.create("no-app",{appName:i});return t}function kr(i,t,e){var n;let r=(n=vp[i])!==null&&n!==void 0?n:i;e&&(r+=`-${e}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const l=[`Unable to register library "${r}" with version "${t}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),cr.warn(l.join(" "));return}qs(new Ni(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="firebase-heartbeat-database",Pp=1,Mi="firebase-heartbeat-store";let Qo=null;function Sh(){return Qo||(Qo=jm(Rp,Pp,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(Mi)}catch(e){console.warn(e)}}}}).catch(i=>{throw Nn.create("idb-open",{originalErrorMessage:i.message})})),Qo}async function Sp(i){try{const e=(await Sh()).transaction(Mi),n=await e.objectStore(Mi).get(Ch(i));return await e.done,n}catch(t){if(t instanceof Jr)cr.warn(t.message);else{const e=Nn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});cr.warn(e.message)}}}async function ac(i,t){try{const n=(await Sh()).transaction(Mi,"readwrite");await n.objectStore(Mi).put(t,Ch(i)),await n.done}catch(e){if(e instanceof Jr)cr.warn(e.message);else{const n=Nn.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});cr.warn(n.message)}}}function Ch(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cp=1024,Dp=30*24*60*60*1e3;class Vp{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new xp(e),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,e;const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=lc();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=Dp}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=lc(),{heartbeatsToSend:n,unsentEntries:r}=kp(this._heartbeatsCache.heartbeats),s=js(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function lc(){return new Date().toISOString().substring(0,10)}function kp(i,t=Cp){const e=[];let n=i.slice();for(const r of i){const s=e.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),uc(e)>t){s.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),uc(e)>t){e.pop();break}n=n.slice(1)}return{heartbeatsToSend:e,unsentEntries:n}}class xp{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Em()?wm().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await Sp(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return ac(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return ac(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function uc(i){return js(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(i){qs(new Ni("platform-logger",t=>new Gm(t),"PRIVATE")),qs(new Ni("heartbeat",t=>new Vp(t),"PRIVATE")),kr(ma,sc,i),kr(ma,sc,"esm2017"),kr("fire-js","")}Op("");var cc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rr,Dh;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,v){function y(){}y.prototype=v.prototype,I.D=v.prototype,I.prototype=new y,I.prototype.constructor=I,I.C=function(b,R,P){for(var A=Array(arguments.length-2),Q=2;Q<arguments.length;Q++)A[Q-2]=arguments[Q];return v.prototype[R].apply(b,A)}}function e(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,e),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,v,y){y||(y=0);var b=Array(16);if(typeof v=="string")for(var R=0;16>R;++R)b[R]=v.charCodeAt(y++)|v.charCodeAt(y++)<<8|v.charCodeAt(y++)<<16|v.charCodeAt(y++)<<24;else for(R=0;16>R;++R)b[R]=v[y++]|v[y++]<<8|v[y++]<<16|v[y++]<<24;v=I.g[0],y=I.g[1],R=I.g[2];var P=I.g[3],A=v+(P^y&(R^P))+b[0]+3614090360&4294967295;v=y+(A<<7&4294967295|A>>>25),A=P+(R^v&(y^R))+b[1]+3905402710&4294967295,P=v+(A<<12&4294967295|A>>>20),A=R+(y^P&(v^y))+b[2]+606105819&4294967295,R=P+(A<<17&4294967295|A>>>15),A=y+(v^R&(P^v))+b[3]+3250441966&4294967295,y=R+(A<<22&4294967295|A>>>10),A=v+(P^y&(R^P))+b[4]+4118548399&4294967295,v=y+(A<<7&4294967295|A>>>25),A=P+(R^v&(y^R))+b[5]+1200080426&4294967295,P=v+(A<<12&4294967295|A>>>20),A=R+(y^P&(v^y))+b[6]+2821735955&4294967295,R=P+(A<<17&4294967295|A>>>15),A=y+(v^R&(P^v))+b[7]+4249261313&4294967295,y=R+(A<<22&4294967295|A>>>10),A=v+(P^y&(R^P))+b[8]+1770035416&4294967295,v=y+(A<<7&4294967295|A>>>25),A=P+(R^v&(y^R))+b[9]+2336552879&4294967295,P=v+(A<<12&4294967295|A>>>20),A=R+(y^P&(v^y))+b[10]+4294925233&4294967295,R=P+(A<<17&4294967295|A>>>15),A=y+(v^R&(P^v))+b[11]+2304563134&4294967295,y=R+(A<<22&4294967295|A>>>10),A=v+(P^y&(R^P))+b[12]+1804603682&4294967295,v=y+(A<<7&4294967295|A>>>25),A=P+(R^v&(y^R))+b[13]+4254626195&4294967295,P=v+(A<<12&4294967295|A>>>20),A=R+(y^P&(v^y))+b[14]+2792965006&4294967295,R=P+(A<<17&4294967295|A>>>15),A=y+(v^R&(P^v))+b[15]+1236535329&4294967295,y=R+(A<<22&4294967295|A>>>10),A=v+(R^P&(y^R))+b[1]+4129170786&4294967295,v=y+(A<<5&4294967295|A>>>27),A=P+(y^R&(v^y))+b[6]+3225465664&4294967295,P=v+(A<<9&4294967295|A>>>23),A=R+(v^y&(P^v))+b[11]+643717713&4294967295,R=P+(A<<14&4294967295|A>>>18),A=y+(P^v&(R^P))+b[0]+3921069994&4294967295,y=R+(A<<20&4294967295|A>>>12),A=v+(R^P&(y^R))+b[5]+3593408605&4294967295,v=y+(A<<5&4294967295|A>>>27),A=P+(y^R&(v^y))+b[10]+38016083&4294967295,P=v+(A<<9&4294967295|A>>>23),A=R+(v^y&(P^v))+b[15]+3634488961&4294967295,R=P+(A<<14&4294967295|A>>>18),A=y+(P^v&(R^P))+b[4]+3889429448&4294967295,y=R+(A<<20&4294967295|A>>>12),A=v+(R^P&(y^R))+b[9]+568446438&4294967295,v=y+(A<<5&4294967295|A>>>27),A=P+(y^R&(v^y))+b[14]+3275163606&4294967295,P=v+(A<<9&4294967295|A>>>23),A=R+(v^y&(P^v))+b[3]+4107603335&4294967295,R=P+(A<<14&4294967295|A>>>18),A=y+(P^v&(R^P))+b[8]+1163531501&4294967295,y=R+(A<<20&4294967295|A>>>12),A=v+(R^P&(y^R))+b[13]+2850285829&4294967295,v=y+(A<<5&4294967295|A>>>27),A=P+(y^R&(v^y))+b[2]+4243563512&4294967295,P=v+(A<<9&4294967295|A>>>23),A=R+(v^y&(P^v))+b[7]+1735328473&4294967295,R=P+(A<<14&4294967295|A>>>18),A=y+(P^v&(R^P))+b[12]+2368359562&4294967295,y=R+(A<<20&4294967295|A>>>12),A=v+(y^R^P)+b[5]+4294588738&4294967295,v=y+(A<<4&4294967295|A>>>28),A=P+(v^y^R)+b[8]+2272392833&4294967295,P=v+(A<<11&4294967295|A>>>21),A=R+(P^v^y)+b[11]+1839030562&4294967295,R=P+(A<<16&4294967295|A>>>16),A=y+(R^P^v)+b[14]+4259657740&4294967295,y=R+(A<<23&4294967295|A>>>9),A=v+(y^R^P)+b[1]+2763975236&4294967295,v=y+(A<<4&4294967295|A>>>28),A=P+(v^y^R)+b[4]+1272893353&4294967295,P=v+(A<<11&4294967295|A>>>21),A=R+(P^v^y)+b[7]+4139469664&4294967295,R=P+(A<<16&4294967295|A>>>16),A=y+(R^P^v)+b[10]+3200236656&4294967295,y=R+(A<<23&4294967295|A>>>9),A=v+(y^R^P)+b[13]+681279174&4294967295,v=y+(A<<4&4294967295|A>>>28),A=P+(v^y^R)+b[0]+3936430074&4294967295,P=v+(A<<11&4294967295|A>>>21),A=R+(P^v^y)+b[3]+3572445317&4294967295,R=P+(A<<16&4294967295|A>>>16),A=y+(R^P^v)+b[6]+76029189&4294967295,y=R+(A<<23&4294967295|A>>>9),A=v+(y^R^P)+b[9]+3654602809&4294967295,v=y+(A<<4&4294967295|A>>>28),A=P+(v^y^R)+b[12]+3873151461&4294967295,P=v+(A<<11&4294967295|A>>>21),A=R+(P^v^y)+b[15]+530742520&4294967295,R=P+(A<<16&4294967295|A>>>16),A=y+(R^P^v)+b[2]+3299628645&4294967295,y=R+(A<<23&4294967295|A>>>9),A=v+(R^(y|~P))+b[0]+4096336452&4294967295,v=y+(A<<6&4294967295|A>>>26),A=P+(y^(v|~R))+b[7]+1126891415&4294967295,P=v+(A<<10&4294967295|A>>>22),A=R+(v^(P|~y))+b[14]+2878612391&4294967295,R=P+(A<<15&4294967295|A>>>17),A=y+(P^(R|~v))+b[5]+4237533241&4294967295,y=R+(A<<21&4294967295|A>>>11),A=v+(R^(y|~P))+b[12]+1700485571&4294967295,v=y+(A<<6&4294967295|A>>>26),A=P+(y^(v|~R))+b[3]+2399980690&4294967295,P=v+(A<<10&4294967295|A>>>22),A=R+(v^(P|~y))+b[10]+4293915773&4294967295,R=P+(A<<15&4294967295|A>>>17),A=y+(P^(R|~v))+b[1]+2240044497&4294967295,y=R+(A<<21&4294967295|A>>>11),A=v+(R^(y|~P))+b[8]+1873313359&4294967295,v=y+(A<<6&4294967295|A>>>26),A=P+(y^(v|~R))+b[15]+4264355552&4294967295,P=v+(A<<10&4294967295|A>>>22),A=R+(v^(P|~y))+b[6]+2734768916&4294967295,R=P+(A<<15&4294967295|A>>>17),A=y+(P^(R|~v))+b[13]+1309151649&4294967295,y=R+(A<<21&4294967295|A>>>11),A=v+(R^(y|~P))+b[4]+4149444226&4294967295,v=y+(A<<6&4294967295|A>>>26),A=P+(y^(v|~R))+b[11]+3174756917&4294967295,P=v+(A<<10&4294967295|A>>>22),A=R+(v^(P|~y))+b[2]+718787259&4294967295,R=P+(A<<15&4294967295|A>>>17),A=y+(P^(R|~v))+b[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(R+(A<<21&4294967295|A>>>11))&4294967295,I.g[2]=I.g[2]+R&4294967295,I.g[3]=I.g[3]+P&4294967295}n.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var y=v-this.blockSize,b=this.B,R=this.h,P=0;P<v;){if(R==0)for(;P<=y;)r(this,I,P),P+=this.blockSize;if(typeof I=="string"){for(;P<v;)if(b[R++]=I.charCodeAt(P++),R==this.blockSize){r(this,b),R=0;break}}else for(;P<v;)if(b[R++]=I[P++],R==this.blockSize){r(this,b),R=0;break}}this.h=R,this.o+=v},n.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var y=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=y&255,y/=256;for(this.u(I),I=Array(16),v=y=0;4>v;++v)for(var b=0;32>b;b+=8)I[y++]=this.g[v]>>>b&255;return I};function s(I,v){var y=l;return Object.prototype.hasOwnProperty.call(y,I)?y[I]:y[I]=v(I)}function o(I,v){this.h=v;for(var y=[],b=!0,R=I.length-1;0<=R;R--){var P=I[R]|0;b&&P==v||(y[R]=P,b=!1)}this.g=y}var l={};function u(I){return-128<=I&&128>I?s(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return _;if(0>I)return w(c(-I));for(var v=[],y=1,b=0;I>=y;b++)v[b]=I/y|0,y*=4294967296;return new o(v,0)}function h(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return w(h(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=c(Math.pow(v,8)),b=_,R=0;R<I.length;R+=8){var P=Math.min(8,I.length-R),A=parseInt(I.substring(R,R+P),v);8>P?(P=c(Math.pow(v,P)),b=b.j(P).add(c(A))):(b=b.j(y),b=b.add(c(A)))}return b}var _=u(0),m=u(1),g=u(16777216);i=o.prototype,i.m=function(){if(p(this))return-w(this).m();for(var I=0,v=1,y=0;y<this.g.length;y++){var b=this.i(y);I+=(0<=b?b:4294967296+b)*v,v*=4294967296}return I},i.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(E(this))return"0";if(p(this))return"-"+w(this).toString(I);for(var v=c(Math.pow(I,6)),y=this,b="";;){var R=C(y,v).g;y=V(y,R.j(v));var P=((0<y.g.length?y.g[0]:y.h)>>>0).toString(I);if(y=R,E(y))return P+b;for(;6>P.length;)P="0"+P;b=P+b}},i.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function E(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function p(I){return I.h==-1}i.l=function(I){return I=V(this,I),p(I)?-1:E(I)?0:1};function w(I){for(var v=I.g.length,y=[],b=0;b<v;b++)y[b]=~I.g[b];return new o(y,~I.h).add(m)}i.abs=function(){return p(this)?w(this):this},i.add=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],b=0,R=0;R<=v;R++){var P=b+(this.i(R)&65535)+(I.i(R)&65535),A=(P>>>16)+(this.i(R)>>>16)+(I.i(R)>>>16);b=A>>>16,P&=65535,A&=65535,y[R]=A<<16|P}return new o(y,y[y.length-1]&-2147483648?-1:0)};function V(I,v){return I.add(w(v))}i.j=function(I){if(E(this)||E(I))return _;if(p(this))return p(I)?w(this).j(w(I)):w(w(this).j(I));if(p(I))return w(this.j(w(I)));if(0>this.l(g)&&0>I.l(g))return c(this.m()*I.m());for(var v=this.g.length+I.g.length,y=[],b=0;b<2*v;b++)y[b]=0;for(b=0;b<this.g.length;b++)for(var R=0;R<I.g.length;R++){var P=this.i(b)>>>16,A=this.i(b)&65535,Q=I.i(R)>>>16,ot=I.i(R)&65535;y[2*b+2*R]+=A*ot,S(y,2*b+2*R),y[2*b+2*R+1]+=P*ot,S(y,2*b+2*R+1),y[2*b+2*R+1]+=A*Q,S(y,2*b+2*R+1),y[2*b+2*R+2]+=P*Q,S(y,2*b+2*R+2)}for(b=0;b<v;b++)y[b]=y[2*b+1]<<16|y[2*b];for(b=v;b<2*v;b++)y[b]=0;return new o(y,0)};function S(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function D(I,v){this.g=I,this.h=v}function C(I,v){if(E(v))throw Error("division by zero");if(E(I))return new D(_,_);if(p(I))return v=C(w(I),v),new D(w(v.g),w(v.h));if(p(v))return v=C(I,w(v)),new D(w(v.g),v.h);if(30<I.g.length){if(p(I)||p(v))throw Error("slowDivide_ only works with positive integers.");for(var y=m,b=v;0>=b.l(I);)y=k(y),b=k(b);var R=O(y,1),P=O(b,1);for(b=O(b,2),y=O(y,2);!E(b);){var A=P.add(b);0>=A.l(I)&&(R=R.add(y),P=A),b=O(b,1),y=O(y,1)}return v=V(I,R.j(v)),new D(R,v)}for(R=_;0<=I.l(v);){for(y=Math.max(1,Math.floor(I.m()/v.m())),b=Math.ceil(Math.log(y)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),P=c(y),A=P.j(v);p(A)||0<A.l(I);)y-=b,P=c(y),A=P.j(v);E(P)&&(P=m),R=R.add(P),I=V(I,A)}return new D(R,I)}i.A=function(I){return C(this,I).h},i.and=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],b=0;b<v;b++)y[b]=this.i(b)&I.i(b);return new o(y,this.h&I.h)},i.or=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],b=0;b<v;b++)y[b]=this.i(b)|I.i(b);return new o(y,this.h|I.h)},i.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),y=[],b=0;b<v;b++)y[b]=this.i(b)^I.i(b);return new o(y,this.h^I.h)};function k(I){for(var v=I.g.length+1,y=[],b=0;b<v;b++)y[b]=I.i(b)<<1|I.i(b-1)>>>31;return new o(y,I.h)}function O(I,v){var y=v>>5;v%=32;for(var b=I.g.length-y,R=[],P=0;P<b;P++)R[P]=0<v?I.i(P+y)>>>v|I.i(P+y+1)<<32-v:I.i(P+y);return new o(R,I.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,Dh=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,rr=o}).apply(typeof cc<"u"?cc:typeof self<"u"?self:typeof window<"u"?window:{});var Ps=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vh,kh,vi,xh,ks,ya,Oh,Nh,Mh;(function(){var i,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,f,d){return a==Array.prototype||a==Object.prototype||(a[f]=d.value),a};function e(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ps=="object"&&Ps];for(var f=0;f<a.length;++f){var d=a[f];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var n=e(this);function r(a,f){if(f)t:{var d=n;a=a.split(".");for(var T=0;T<a.length-1;T++){var x=a[T];if(!(x in d))break t;d=d[x]}a=a[a.length-1],T=d[a],f=f(T),f!=T&&f!=null&&t(d,a,{configurable:!0,writable:!0,value:f})}}function s(a,f){a instanceof String&&(a+="");var d=0,T=!1,x={next:function(){if(!T&&d<a.length){var N=d++;return{value:f(N,a[N]),done:!1}}return T=!0,{done:!0,value:void 0}}};return x[Symbol.iterator]=function(){return x},x}r("Array.prototype.values",function(a){return a||function(){return s(this,function(f,d){return d})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var f=typeof a;return f=f!="object"?f:a?Array.isArray(a)?"array":f:"null",f=="array"||f=="object"&&typeof a.length=="number"}function c(a){var f=typeof a;return f=="object"&&a!=null||f=="function"}function h(a,f,d){return a.call.apply(a.bind,arguments)}function _(a,f,d){if(!a)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(x,T),a.apply(f,x)}}return function(){return a.apply(f,arguments)}}function m(a,f,d){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:_,m.apply(null,arguments)}function g(a,f){var d=Array.prototype.slice.call(arguments,1);return function(){var T=d.slice();return T.push.apply(T,arguments),a.apply(this,T)}}function E(a,f){function d(){}d.prototype=f.prototype,a.aa=f.prototype,a.prototype=new d,a.prototype.constructor=a,a.Qb=function(T,x,N){for(var B=Array(arguments.length-2),Et=2;Et<arguments.length;Et++)B[Et-2]=arguments[Et];return f.prototype[x].apply(T,B)}}function p(a){const f=a.length;if(0<f){const d=Array(f);for(let T=0;T<f;T++)d[T]=a[T];return d}return[]}function w(a,f){for(let d=1;d<arguments.length;d++){const T=arguments[d];if(u(T)){const x=a.length||0,N=T.length||0;a.length=x+N;for(let B=0;B<N;B++)a[x+B]=T[B]}else a.push(T)}}class V{constructor(f,d){this.i=f,this.j=d,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function S(a){return/^[\s\xa0]*$/.test(a)}function D(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function C(a){return C[" "](a),a}C[" "]=function(){};var k=D().indexOf("Gecko")!=-1&&!(D().toLowerCase().indexOf("webkit")!=-1&&D().indexOf("Edge")==-1)&&!(D().indexOf("Trident")!=-1||D().indexOf("MSIE")!=-1)&&D().indexOf("Edge")==-1;function O(a,f,d){for(const T in a)f.call(d,a[T],T,a)}function I(a,f){for(const d in a)f.call(void 0,a[d],d,a)}function v(a){const f={};for(const d in a)f[d]=a[d];return f}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(a,f){let d,T;for(let x=1;x<arguments.length;x++){T=arguments[x];for(d in T)a[d]=T[d];for(let N=0;N<y.length;N++)d=y[N],Object.prototype.hasOwnProperty.call(T,d)&&(a[d]=T[d])}}function R(a){var f=1;a=a.split(":");const d=[];for(;0<f&&a.length;)d.push(a.shift()),f--;return a.length&&d.push(a.join(":")),d}function P(a){l.setTimeout(()=>{throw a},0)}function A(){var a=ut;let f=null;return a.g&&(f=a.g,a.g=a.g.next,a.g||(a.h=null),f.next=null),f}class Q{constructor(){this.h=this.g=null}add(f,d){const T=ot.get();T.set(f,d),this.h?this.h.next=T:this.g=T,this.h=T}}var ot=new V(()=>new X,a=>a.reset());class X{constructor(){this.next=this.g=this.h=null}set(f,d){this.h=f,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let ct,j=!1,ut=new Q,dt=()=>{const a=l.Promise.resolve(void 0);ct=()=>{a.then(U)}};var U=()=>{for(var a;a=A();){try{a.h.call(a.g)}catch(d){P(d)}var f=ot;f.j(a),100>f.h&&(f.h++,a.next=f.g,f.g=a)}j=!1};function ht(){this.s=this.s,this.C=this.C}ht.prototype.s=!1,ht.prototype.ma=function(){this.s||(this.s=!0,this.N())},ht.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function vt(a,f){this.type=a,this.g=this.target=f,this.defaultPrevented=!1}vt.prototype.h=function(){this.defaultPrevented=!0};var jt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const d=()=>{};l.addEventListener("test",d,f),l.removeEventListener("test",d,f)}catch{}return a}();function zt(a,f){if(vt.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var d=this.type=a.type,T=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=f,f=a.relatedTarget){if(k){t:{try{C(f.nodeName);var x=!0;break t}catch{}x=!1}x||(f=null)}}else d=="mouseover"?f=a.fromElement:d=="mouseout"&&(f=a.toElement);this.relatedTarget=f,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:An[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&zt.aa.h.call(this)}}E(zt,vt);var An={2:"touch",3:"pen",4:"mouse"};zt.prototype.h=function(){zt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Yt="closure_listenable_"+(1e6*Math.random()|0),ni=0;function Ye(a,f,d,T,x){this.listener=a,this.proxy=null,this.src=f,this.type=d,this.capture=!!T,this.ha=x,this.key=++ni,this.da=this.fa=!1}function ve(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function bn(a){this.src=a,this.g={},this.h=0}bn.prototype.add=function(a,f,d,T,x){var N=a.toString();a=this.g[N],a||(a=this.g[N]=[],this.h++);var B=se(a,f,T,x);return-1<B?(f=a[B],d||(f.fa=!1)):(f=new Ye(f,this.src,N,!!T,x),f.fa=d,a.push(f)),f};function Se(a,f){var d=f.type;if(d in a.g){var T=a.g[d],x=Array.prototype.indexOf.call(T,f,void 0),N;(N=0<=x)&&Array.prototype.splice.call(T,x,1),N&&(ve(f),a.g[d].length==0&&(delete a.g[d],a.h--))}}function se(a,f,d,T){for(var x=0;x<a.length;++x){var N=a[x];if(!N.da&&N.listener==f&&N.capture==!!d&&N.ha==T)return x}return-1}var Je="closure_lm_"+(1e6*Math.random()|0),Ut={};function ft(a,f,d,T,x){if(Array.isArray(f)){for(var N=0;N<f.length;N++)ft(a,f[N],d,T,x);return null}return d=Ce(d),a&&a[Yt]?a.K(f,d,c(T)?!!T.capture:!!T,x):Ct(a,f,d,!1,T,x)}function Ct(a,f,d,T,x,N){if(!f)throw Error("Invalid event type");var B=c(x)?!!x.capture:!!x,Et=vr(a);if(Et||(a[Je]=Et=new bn(a)),d=Et.add(f,d,T,B,N),d.proxy)return d;if(T=$e(),d.proxy=T,T.src=a,T.listener=d,a.addEventListener)jt||(x=B),x===void 0&&(x=!1),a.addEventListener(f.toString(),T,x);else if(a.attachEvent)a.attachEvent(oe(f.toString()),T);else if(a.addListener&&a.removeListener)a.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return d}function $e(){function a(d){return f.call(a.src,a.listener,d)}const f=hs;return a}function Ze(a,f,d,T,x){if(Array.isArray(f))for(var N=0;N<f.length;N++)Ze(a,f[N],d,T,x);else T=c(T)?!!T.capture:!!T,d=Ce(d),a&&a[Yt]?(a=a.i,f=String(f).toString(),f in a.g&&(N=a.g[f],d=se(N,d,T,x),-1<d&&(ve(N[d]),Array.prototype.splice.call(N,d,1),N.length==0&&(delete a.g[f],a.h--)))):a&&(a=vr(a))&&(f=a.g[f.toString()],a=-1,f&&(a=se(f,d,T,x)),(d=-1<a?f[a]:null)&&xt(d))}function xt(a){if(typeof a!="number"&&a&&!a.da){var f=a.src;if(f&&f[Yt])Se(f.i,a);else{var d=a.type,T=a.proxy;f.removeEventListener?f.removeEventListener(d,T,a.capture):f.detachEvent?f.detachEvent(oe(d),T):f.addListener&&f.removeListener&&f.removeListener(T),(d=vr(f))?(Se(d,a),d.h==0&&(d.src=null,f[Je]=null)):ve(a)}}}function oe(a){return a in Ut?Ut[a]:Ut[a]="on"+a}function hs(a,f){if(a.da)a=!0;else{f=new zt(f,this);var d=a.listener,T=a.ha||a.src;a.fa&&xt(a),a=d.call(T,f)}return a}function vr(a){return a=a[Je],a instanceof bn?a:null}var Tr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ce(a){return typeof a=="function"?a:(a[Tr]||(a[Tr]=function(f){return a.handleEvent(f)}),a[Tr])}function qt(){ht.call(this),this.i=new bn(this),this.M=this,this.F=null}E(qt,ht),qt.prototype[Yt]=!0,qt.prototype.removeEventListener=function(a,f,d,T){Ze(this,a,f,d,T)};function Wt(a,f){var d,T=a.F;if(T)for(d=[];T;T=T.F)d.push(T);if(a=a.M,T=f.type||f,typeof f=="string")f=new vt(f,a);else if(f instanceof vt)f.target=f.target||a;else{var x=f;f=new vt(T,a),b(f,x)}if(x=!0,d)for(var N=d.length-1;0<=N;N--){var B=f.g=d[N];x=_n(B,T,!0,f)&&x}if(B=f.g=a,x=_n(B,T,!0,f)&&x,x=_n(B,T,!1,f)&&x,d)for(N=0;N<d.length;N++)B=f.g=d[N],x=_n(B,T,!1,f)&&x}qt.prototype.N=function(){if(qt.aa.N.call(this),this.i){var a=this.i,f;for(f in a.g){for(var d=a.g[f],T=0;T<d.length;T++)ve(d[T]);delete a.g[f],a.h--}}this.F=null},qt.prototype.K=function(a,f,d,T){return this.i.add(String(a),f,!1,d,T)},qt.prototype.L=function(a,f,d,T){return this.i.add(String(a),f,!0,d,T)};function _n(a,f,d,T){if(f=a.i.g[String(f)],!f)return!0;f=f.concat();for(var x=!0,N=0;N<f.length;++N){var B=f[N];if(B&&!B.da&&B.capture==d){var Et=B.listener,ee=B.ha||B.src;B.fa&&Se(a.i,B),x=Et.call(ee,T)!==!1&&x}}return x&&!T.defaultPrevented}function Er(a,f,d){if(typeof a=="function")d&&(a=m(a,d));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:l.setTimeout(a,f||0)}function Xl(a){a.g=Er(()=>{a.g=null,a.i&&(a.i=!1,Xl(a))},a.l);const f=a.h;a.h=null,a.m.apply(null,f)}class n_ extends ht{constructor(f,d){super(),this.m=f,this.l=d,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Xl(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ri(a){ht.call(this),this.h=a,this.g={}}E(ri,ht);var Yl=[];function Jl(a){O(a.g,function(f,d){this.g.hasOwnProperty(d)&&xt(f)},a),a.g={}}ri.prototype.N=function(){ri.aa.N.call(this),Jl(this)},ri.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var So=l.JSON.stringify,r_=l.JSON.parse,i_=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Co(){}Co.prototype.h=null;function Zl(a){return a.h||(a.h=a.i())}function tu(){}var ii={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Do(){vt.call(this,"d")}E(Do,vt);function Vo(){vt.call(this,"c")}E(Vo,vt);var Kn={},eu=null;function fs(){return eu=eu||new qt}Kn.La="serverreachability";function nu(a){vt.call(this,Kn.La,a)}E(nu,vt);function si(a){const f=fs();Wt(f,new nu(f))}Kn.STAT_EVENT="statevent";function ru(a,f){vt.call(this,Kn.STAT_EVENT,a),this.stat=f}E(ru,vt);function pe(a){const f=fs();Wt(f,new ru(f,a))}Kn.Ma="timingevent";function iu(a,f){vt.call(this,Kn.Ma,a),this.size=f}E(iu,vt);function oi(a,f){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},f)}function ai(){this.g=!0}ai.prototype.xa=function(){this.g=!1};function s_(a,f,d,T,x,N){a.info(function(){if(a.g)if(N)for(var B="",Et=N.split("&"),ee=0;ee<Et.length;ee++){var yt=Et[ee].split("=");if(1<yt.length){var ae=yt[0];yt=yt[1];var le=ae.split("_");B=2<=le.length&&le[1]=="type"?B+(ae+"="+yt+"&"):B+(ae+"=redacted&")}}else B=null;else B=N;return"XMLHTTP REQ ("+T+") [attempt "+x+"]: "+f+`
`+d+`
`+B})}function o_(a,f,d,T,x,N,B){a.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+x+"]: "+f+`
`+d+`
`+N+" "+B})}function wr(a,f,d,T){a.info(function(){return"XMLHTTP TEXT ("+f+"): "+l_(a,d)+(T?" "+T:"")})}function a_(a,f){a.info(function(){return"TIMEOUT: "+f})}ai.prototype.info=function(){};function l_(a,f){if(!a.g)return f;if(!f)return null;try{var d=JSON.parse(f);if(d){for(a=0;a<d.length;a++)if(Array.isArray(d[a])){var T=d[a];if(!(2>T.length)){var x=T[1];if(Array.isArray(x)&&!(1>x.length)){var N=x[0];if(N!="noop"&&N!="stop"&&N!="close")for(var B=1;B<x.length;B++)x[B]=""}}}}return So(d)}catch{return f}}var ds={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},su={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ko;function _s(){}E(_s,Co),_s.prototype.g=function(){return new XMLHttpRequest},_s.prototype.i=function(){return{}},ko=new _s;function Rn(a,f,d,T){this.j=a,this.i=f,this.l=d,this.R=T||1,this.U=new ri(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ou}function ou(){this.i=null,this.g="",this.h=!1}var au={},xo={};function Oo(a,f,d){a.L=1,a.v=ys(mn(f)),a.m=d,a.P=!0,lu(a,null)}function lu(a,f){a.F=Date.now(),ms(a),a.A=mn(a.v);var d=a.A,T=a.R;Array.isArray(T)||(T=[String(T)]),wu(d.i,"t",T),a.C=0,d=a.j.J,a.h=new ou,a.g=Uu(a.j,d?f:null,!a.m),0<a.O&&(a.M=new n_(m(a.Y,a,a.g),a.O)),f=a.U,d=a.g,T=a.ca;var x="readystatechange";Array.isArray(x)||(x&&(Yl[0]=x.toString()),x=Yl);for(var N=0;N<x.length;N++){var B=ft(d,x[N],T||f.handleEvent,!1,f.h||f);if(!B)break;f.g[B.key]=B}f=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,f)):(a.u="GET",a.g.ea(a.A,a.u,null,f)),si(),s_(a.i,a.u,a.A,a.l,a.R,a.m)}Rn.prototype.ca=function(a){a=a.target;const f=this.M;f&&pn(a)==3?f.j():this.Y(a)},Rn.prototype.Y=function(a){try{if(a==this.g)t:{const le=pn(this.g);var f=this.g.Ba();const br=this.g.Z();if(!(3>le)&&(le!=3||this.g&&(this.h.h||this.g.oa()||Cu(this.g)))){this.J||le!=4||f==7||(f==8||0>=br?si(3):si(2)),No(this);var d=this.g.Z();this.X=d;e:if(uu(this)){var T=Cu(this.g);a="";var x=T.length,N=pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Wn(this),li(this);var B="";break e}this.h.i=new l.TextDecoder}for(f=0;f<x;f++)this.h.h=!0,a+=this.h.i.decode(T[f],{stream:!(N&&f==x-1)});T.length=0,this.h.g+=a,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=d==200,o_(this.i,this.u,this.A,this.l,this.R,le,d),this.o){if(this.T&&!this.K){e:{if(this.g){var Et,ee=this.g;if((Et=ee.g?ee.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(Et)){var yt=Et;break e}}yt=null}if(d=yt)wr(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mo(this,d);else{this.o=!1,this.s=3,pe(12),Wn(this),li(this);break t}}if(this.P){d=!0;let He;for(;!this.J&&this.C<B.length;)if(He=u_(this,B),He==xo){le==4&&(this.s=4,pe(14),d=!1),wr(this.i,this.l,null,"[Incomplete Response]");break}else if(He==au){this.s=4,pe(15),wr(this.i,this.l,B,"[Invalid Chunk]"),d=!1;break}else wr(this.i,this.l,He,null),Mo(this,He);if(uu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),le!=4||B.length!=0||this.h.h||(this.s=1,pe(16),d=!1),this.o=this.o&&d,!d)wr(this.i,this.l,B,"[Invalid Chunked Response]"),Wn(this),li(this);else if(0<B.length&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.ba&&!ae.M&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),jo(ae),ae.M=!0,pe(11))}}else wr(this.i,this.l,B,null),Mo(this,B);le==4&&Wn(this),this.o&&!this.J&&(le==4?Mu(this.j,this):(this.o=!1,ms(this)))}else R_(this.g),d==400&&0<B.indexOf("Unknown SID")?(this.s=3,pe(12)):(this.s=0,pe(13)),Wn(this),li(this)}}}catch{}finally{}};function uu(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function u_(a,f){var d=a.C,T=f.indexOf(`
`,d);return T==-1?xo:(d=Number(f.substring(d,T)),isNaN(d)?au:(T+=1,T+d>f.length?xo:(f=f.slice(T,T+d),a.C=T+d,f)))}Rn.prototype.cancel=function(){this.J=!0,Wn(this)};function ms(a){a.S=Date.now()+a.I,cu(a,a.I)}function cu(a,f){if(a.B!=null)throw Error("WatchDog timer not null");a.B=oi(m(a.ba,a),f)}function No(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Rn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(a_(this.i,this.A),this.L!=2&&(si(),pe(17)),Wn(this),this.s=2,li(this)):cu(this,this.S-a)};function li(a){a.j.G==0||a.J||Mu(a.j,a)}function Wn(a){No(a);var f=a.M;f&&typeof f.ma=="function"&&f.ma(),a.M=null,Jl(a.U),a.g&&(f=a.g,a.g=null,f.abort(),f.ma())}function Mo(a,f){try{var d=a.j;if(d.G!=0&&(d.g==a||Fo(d.h,a))){if(!a.K&&Fo(d.h,a)&&d.G==3){try{var T=d.Da.g.parse(f)}catch{T=null}if(Array.isArray(T)&&T.length==3){var x=T;if(x[0]==0){t:if(!d.u){if(d.g)if(d.g.F+3e3<a.F)Is(d),Es(d);else break t;Bo(d),pe(18)}}else d.za=x[1],0<d.za-d.T&&37500>x[2]&&d.F&&d.v==0&&!d.C&&(d.C=oi(m(d.Za,d),6e3));if(1>=du(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else Xn(d,11)}else if((a.K||d.g==a)&&Is(d),!S(f))for(x=d.Da.g.parse(f),f=0;f<x.length;f++){let yt=x[f];if(d.T=yt[0],yt=yt[1],d.G==2)if(yt[0]=="c"){d.K=yt[1],d.ia=yt[2];const ae=yt[3];ae!=null&&(d.la=ae,d.j.info("VER="+d.la));const le=yt[4];le!=null&&(d.Aa=le,d.j.info("SVER="+d.Aa));const br=yt[5];br!=null&&typeof br=="number"&&0<br&&(T=1.5*br,d.L=T,d.j.info("backChannelRequestTimeoutMs_="+T)),T=d;const He=a.g;if(He){const bs=He.g?He.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bs){var N=T.h;N.g||bs.indexOf("spdy")==-1&&bs.indexOf("quic")==-1&&bs.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(Lo(N,N.h),N.h=null))}if(T.D){const zo=He.g?He.g.getResponseHeader("X-HTTP-Session-Id"):null;zo&&(T.ya=zo,Dt(T.I,T.D,zo))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-a.F,d.j.info("Handshake RTT: "+d.R+"ms")),T=d;var B=a;if(T.qa=$u(T,T.J?T.ia:null,T.W),B.K){_u(T.h,B);var Et=B,ee=T.L;ee&&(Et.I=ee),Et.B&&(No(Et),ms(Et)),T.g=B}else Ou(T);0<d.i.length&&ws(d)}else yt[0]!="stop"&&yt[0]!="close"||Xn(d,7);else d.G==3&&(yt[0]=="stop"||yt[0]=="close"?yt[0]=="stop"?Xn(d,7):Uo(d):yt[0]!="noop"&&d.l&&d.l.ta(yt),d.v=0)}}si(4)}catch{}}var c_=class{constructor(a,f){this.g=a,this.map=f}};function hu(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fu(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function du(a){return a.h?1:a.g?a.g.size:0}function Fo(a,f){return a.h?a.h==f:a.g?a.g.has(f):!1}function Lo(a,f){a.g?a.g.add(f):a.h=f}function _u(a,f){a.h&&a.h==f?a.h=null:a.g&&a.g.has(f)&&a.g.delete(f)}hu.prototype.cancel=function(){if(this.i=mu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function mu(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let f=a.i;for(const d of a.g.values())f=f.concat(d.D);return f}return p(a.i)}function h_(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var f=[],d=a.length,T=0;T<d;T++)f.push(a[T]);return f}f=[],d=0;for(T in a)f[d++]=a[T];return f}function f_(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var f=[];a=a.length;for(var d=0;d<a;d++)f.push(d);return f}f=[],d=0;for(const T in a)f[d++]=T;return f}}}function pu(a,f){if(a.forEach&&typeof a.forEach=="function")a.forEach(f,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,f,void 0);else for(var d=f_(a),T=h_(a),x=T.length,N=0;N<x;N++)f.call(void 0,T[N],d&&d[N],a)}var gu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function d_(a,f){if(a){a=a.split("&");for(var d=0;d<a.length;d++){var T=a[d].indexOf("="),x=null;if(0<=T){var N=a[d].substring(0,T);x=a[d].substring(T+1)}else N=a[d];f(N,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function Qn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Qn){this.h=a.h,ps(this,a.j),this.o=a.o,this.g=a.g,gs(this,a.s),this.l=a.l;var f=a.i,d=new hi;d.i=f.i,f.g&&(d.g=new Map(f.g),d.h=f.h),yu(this,d),this.m=a.m}else a&&(f=String(a).match(gu))?(this.h=!1,ps(this,f[1]||"",!0),this.o=ui(f[2]||""),this.g=ui(f[3]||"",!0),gs(this,f[4]),this.l=ui(f[5]||"",!0),yu(this,f[6]||"",!0),this.m=ui(f[7]||"")):(this.h=!1,this.i=new hi(null,this.h))}Qn.prototype.toString=function(){var a=[],f=this.j;f&&a.push(ci(f,vu,!0),":");var d=this.g;return(d||f=="file")&&(a.push("//"),(f=this.o)&&a.push(ci(f,vu,!0),"@"),a.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&a.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&a.push("/"),a.push(ci(d,d.charAt(0)=="/"?p_:m_,!0))),(d=this.i.toString())&&a.push("?",d),(d=this.m)&&a.push("#",ci(d,y_)),a.join("")};function mn(a){return new Qn(a)}function ps(a,f,d){a.j=d?ui(f,!0):f,a.j&&(a.j=a.j.replace(/:$/,""))}function gs(a,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);a.s=f}else a.s=null}function yu(a,f,d){f instanceof hi?(a.i=f,v_(a.i,a.h)):(d||(f=ci(f,g_)),a.i=new hi(f,a.h))}function Dt(a,f,d){a.i.set(f,d)}function ys(a){return Dt(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ui(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ci(a,f,d){return typeof a=="string"?(a=encodeURI(a).replace(f,__),d&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function __(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var vu=/[#\/\?@]/g,m_=/[#\?:]/g,p_=/[#\?]/g,g_=/[#\?@]/g,y_=/#/g;function hi(a,f){this.h=this.g=null,this.i=a||null,this.j=!!f}function Pn(a){a.g||(a.g=new Map,a.h=0,a.i&&d_(a.i,function(f,d){a.add(decodeURIComponent(f.replace(/\+/g," ")),d)}))}i=hi.prototype,i.add=function(a,f){Pn(this),this.i=null,a=Ir(this,a);var d=this.g.get(a);return d||this.g.set(a,d=[]),d.push(f),this.h+=1,this};function Tu(a,f){Pn(a),f=Ir(a,f),a.g.has(f)&&(a.i=null,a.h-=a.g.get(f).length,a.g.delete(f))}function Eu(a,f){return Pn(a),f=Ir(a,f),a.g.has(f)}i.forEach=function(a,f){Pn(this),this.g.forEach(function(d,T){d.forEach(function(x){a.call(f,x,T,this)},this)},this)},i.na=function(){Pn(this);const a=Array.from(this.g.values()),f=Array.from(this.g.keys()),d=[];for(let T=0;T<f.length;T++){const x=a[T];for(let N=0;N<x.length;N++)d.push(f[T])}return d},i.V=function(a){Pn(this);let f=[];if(typeof a=="string")Eu(this,a)&&(f=f.concat(this.g.get(Ir(this,a))));else{a=Array.from(this.g.values());for(let d=0;d<a.length;d++)f=f.concat(a[d])}return f},i.set=function(a,f){return Pn(this),this.i=null,a=Ir(this,a),Eu(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[f]),this.h+=1,this},i.get=function(a,f){return a?(a=this.V(a),0<a.length?String(a[0]):f):f};function wu(a,f,d){Tu(a,f),0<d.length&&(a.i=null,a.g.set(Ir(a,f),p(d)),a.h+=d.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],f=Array.from(this.g.keys());for(var d=0;d<f.length;d++){var T=f[d];const N=encodeURIComponent(String(T)),B=this.V(T);for(T=0;T<B.length;T++){var x=N;B[T]!==""&&(x+="="+encodeURIComponent(String(B[T]))),a.push(x)}}return this.i=a.join("&")};function Ir(a,f){return f=String(f),a.j&&(f=f.toLowerCase()),f}function v_(a,f){f&&!a.j&&(Pn(a),a.i=null,a.g.forEach(function(d,T){var x=T.toLowerCase();T!=x&&(Tu(this,T),wu(this,x,d))},a)),a.j=f}function T_(a,f){const d=new ai;if(l.Image){const T=new Image;T.onload=g(Sn,d,"TestLoadImage: loaded",!0,f,T),T.onerror=g(Sn,d,"TestLoadImage: error",!1,f,T),T.onabort=g(Sn,d,"TestLoadImage: abort",!1,f,T),T.ontimeout=g(Sn,d,"TestLoadImage: timeout",!1,f,T),l.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=a}else f(!1)}function E_(a,f){const d=new ai,T=new AbortController,x=setTimeout(()=>{T.abort(),Sn(d,"TestPingServer: timeout",!1,f)},1e4);fetch(a,{signal:T.signal}).then(N=>{clearTimeout(x),N.ok?Sn(d,"TestPingServer: ok",!0,f):Sn(d,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(x),Sn(d,"TestPingServer: error",!1,f)})}function Sn(a,f,d,T,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),T(d)}catch{}}function w_(){this.g=new i_}function I_(a,f,d){const T=d||"";try{pu(a,function(x,N){let B=x;c(x)&&(B=So(x)),f.push(T+N+"="+encodeURIComponent(B))})}catch(x){throw f.push(T+"type="+encodeURIComponent("_badmap")),x}}function fi(a){this.l=a.Ub||null,this.j=a.eb||!1}E(fi,Co),fi.prototype.g=function(){return new vs(this.l,this.j)},fi.prototype.i=function(a){return function(){return a}}({});function vs(a,f){qt.call(this),this.D=a,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(vs,qt),i=vs.prototype,i.open=function(a,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=f,this.readyState=1,_i(this)},i.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(f.body=a),(this.D||l).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,di(this)),this.readyState=0},i.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,_i(this)),this.g&&(this.readyState=3,_i(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Iu(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Iu(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}i.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var f=a.value?a.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!a.done}))&&(this.response=this.responseText+=f)}a.done?di(this):_i(this),this.readyState==3&&Iu(this)}},i.Ra=function(a){this.g&&(this.response=this.responseText=a,di(this))},i.Qa=function(a){this.g&&(this.response=a,di(this))},i.ga=function(){this.g&&di(this)};function di(a){a.readyState=4,a.l=null,a.j=null,a.v=null,_i(a)}i.setRequestHeader=function(a,f){this.u.append(a,f)},i.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],f=this.h.entries();for(var d=f.next();!d.done;)d=d.value,a.push(d[0]+": "+d[1]),d=f.next();return a.join(`\r
`)};function _i(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(vs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Au(a){let f="";return O(a,function(d,T){f+=T,f+=":",f+=d,f+=`\r
`}),f}function $o(a,f,d){t:{for(T in d){var T=!1;break t}T=!0}T||(d=Au(d),typeof a=="string"?d!=null&&encodeURIComponent(String(d)):Dt(a,f,d))}function Ft(a){qt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Ft,qt);var A_=/^https?$/i,b_=["POST","PUT"];i=Ft.prototype,i.Ha=function(a){this.J=a},i.ea=function(a,f,d,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);f=f?f.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ko.g(),this.v=this.o?Zl(this.o):Zl(ko),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(a),!0),this.B=!1}catch(N){bu(this,N);return}if(a=d||"",d=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var x in T)d.set(x,T[x]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const N of T.keys())d.set(N,T.get(N));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(d.keys()).find(N=>N.toLowerCase()=="content-type"),x=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(b_,f,void 0))||T||x||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,B]of d)this.g.setRequestHeader(N,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Su(this),this.u=!0,this.g.send(a),this.u=!1}catch(N){bu(this,N)}};function bu(a,f){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=f,a.m=5,Ru(a),Ts(a)}function Ru(a){a.A||(a.A=!0,Wt(a,"complete"),Wt(a,"error"))}i.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Wt(this,"complete"),Wt(this,"abort"),Ts(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ts(this,!0)),Ft.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Pu(this):this.bb())},i.bb=function(){Pu(this)};function Pu(a){if(a.h&&typeof o<"u"&&(!a.v[1]||pn(a)!=4||a.Z()!=2)){if(a.u&&pn(a)==4)Er(a.Ea,0,a);else if(Wt(a,"readystatechange"),pn(a)==4){a.h=!1;try{const B=a.Z();t:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break t;default:f=!1}var d;if(!(d=f)){var T;if(T=B===0){var x=String(a.D).match(gu)[1]||null;!x&&l.self&&l.self.location&&(x=l.self.location.protocol.slice(0,-1)),T=!A_.test(x?x.toLowerCase():"")}d=T}if(d)Wt(a,"complete"),Wt(a,"success");else{a.m=6;try{var N=2<pn(a)?a.g.statusText:""}catch{N=""}a.l=N+" ["+a.Z()+"]",Ru(a)}}finally{Ts(a)}}}}function Ts(a,f){if(a.g){Su(a);const d=a.g,T=a.v[0]?()=>{}:null;a.g=null,a.v=null,f||Wt(a,"ready");try{d.onreadystatechange=T}catch{}}}function Su(a){a.I&&(l.clearTimeout(a.I),a.I=null)}i.isActive=function(){return!!this.g};function pn(a){return a.g?a.g.readyState:0}i.Z=function(){try{return 2<pn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(a){if(this.g){var f=this.g.responseText;return a&&f.indexOf(a)==0&&(f=f.substring(a.length)),r_(f)}};function Cu(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function R_(a){const f={};a=(a.g&&2<=pn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<a.length;T++){if(S(a[T]))continue;var d=R(a[T]);const x=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();const N=f[x]||[];f[x]=N,N.push(d)}I(f,function(T){return T.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function mi(a,f,d){return d&&d.internalChannelParams&&d.internalChannelParams[a]||f}function Du(a){this.Aa=0,this.i=[],this.j=new ai,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=mi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=mi("baseRetryDelayMs",5e3,a),this.cb=mi("retryDelaySeedMs",1e4,a),this.Wa=mi("forwardChannelMaxRetries",2,a),this.wa=mi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new hu(a&&a.concurrentRequestLimit),this.Da=new w_,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Du.prototype,i.la=8,i.G=1,i.connect=function(a,f,d,T){pe(0),this.W=a,this.H=f||{},d&&T!==void 0&&(this.H.OSID=d,this.H.OAID=T),this.F=this.X,this.I=$u(this,null,this.W),ws(this)};function Uo(a){if(Vu(a),a.G==3){var f=a.U++,d=mn(a.I);if(Dt(d,"SID",a.K),Dt(d,"RID",f),Dt(d,"TYPE","terminate"),pi(a,d),f=new Rn(a,a.j,f),f.L=2,f.v=ys(mn(d)),d=!1,l.navigator&&l.navigator.sendBeacon)try{d=l.navigator.sendBeacon(f.v.toString(),"")}catch{}!d&&l.Image&&(new Image().src=f.v,d=!0),d||(f.g=Uu(f.j,null),f.g.ea(f.v)),f.F=Date.now(),ms(f)}Lu(a)}function Es(a){a.g&&(jo(a),a.g.cancel(),a.g=null)}function Vu(a){Es(a),a.u&&(l.clearTimeout(a.u),a.u=null),Is(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function ws(a){if(!fu(a.h)&&!a.s){a.s=!0;var f=a.Ga;ct||dt(),j||(ct(),j=!0),ut.add(f,a),a.B=0}}function P_(a,f){return du(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=f.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=oi(m(a.Ga,a,f),Fu(a,a.B)),a.B++,!0)}i.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const x=new Rn(this,this.j,a);let N=this.o;if(this.S&&(N?(N=v(N),b(N,this.S)):N=this.S),this.m!==null||this.O||(x.H=N,N=null),this.P)t:{for(var f=0,d=0;d<this.i.length;d++){e:{var T=this.i[d];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break e}T=void 0}if(T===void 0)break;if(f+=T,4096<f){f=d;break t}if(f===4096||d===this.i.length-1){f=d+1;break t}}f=1e3}else f=1e3;f=xu(this,x,f),d=mn(this.I),Dt(d,"RID",a),Dt(d,"CVER",22),this.D&&Dt(d,"X-HTTP-Session-Id",this.D),pi(this,d),N&&(this.O?f="headers="+encodeURIComponent(String(Au(N)))+"&"+f:this.m&&$o(d,this.m,N)),Lo(this.h,x),this.Ua&&Dt(d,"TYPE","init"),this.P?(Dt(d,"$req",f),Dt(d,"SID","null"),x.T=!0,Oo(x,d,null)):Oo(x,d,f),this.G=2}}else this.G==3&&(a?ku(this,a):this.i.length==0||fu(this.h)||ku(this))};function ku(a,f){var d;f?d=f.l:d=a.U++;const T=mn(a.I);Dt(T,"SID",a.K),Dt(T,"RID",d),Dt(T,"AID",a.T),pi(a,T),a.m&&a.o&&$o(T,a.m,a.o),d=new Rn(a,a.j,d,a.B+1),a.m===null&&(d.H=a.o),f&&(a.i=f.D.concat(a.i)),f=xu(a,d,1e3),d.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Lo(a.h,d),Oo(d,T,f)}function pi(a,f){a.H&&O(a.H,function(d,T){Dt(f,T,d)}),a.l&&pu({},function(d,T){Dt(f,T,d)})}function xu(a,f,d){d=Math.min(a.i.length,d);var T=a.l?m(a.l.Na,a.l,a):null;t:{var x=a.i;let N=-1;for(;;){const B=["count="+d];N==-1?0<d?(N=x[0].g,B.push("ofs="+N)):N=0:B.push("ofs="+N);let Et=!0;for(let ee=0;ee<d;ee++){let yt=x[ee].g;const ae=x[ee].map;if(yt-=N,0>yt)N=Math.max(0,x[ee].g-100),Et=!1;else try{I_(ae,B,"req"+yt+"_")}catch{T&&T(ae)}}if(Et){T=B.join("&");break t}}}return a=a.i.splice(0,d),f.D=a,T}function Ou(a){if(!a.g&&!a.u){a.Y=1;var f=a.Fa;ct||dt(),j||(ct(),j=!0),ut.add(f,a),a.v=0}}function Bo(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=oi(m(a.Fa,a),Fu(a,a.v)),a.v++,!0)}i.Fa=function(){if(this.u=null,Nu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=oi(m(this.ab,this),a)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pe(10),Es(this),Nu(this))};function jo(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Nu(a){a.g=new Rn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var f=mn(a.qa);Dt(f,"RID","rpc"),Dt(f,"SID",a.K),Dt(f,"AID",a.T),Dt(f,"CI",a.F?"0":"1"),!a.F&&a.ja&&Dt(f,"TO",a.ja),Dt(f,"TYPE","xmlhttp"),pi(a,f),a.m&&a.o&&$o(f,a.m,a.o),a.L&&(a.g.I=a.L);var d=a.g;a=a.ia,d.L=1,d.v=ys(mn(f)),d.m=null,d.P=!0,lu(d,a)}i.Za=function(){this.C!=null&&(this.C=null,Es(this),Bo(this),pe(19))};function Is(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Mu(a,f){var d=null;if(a.g==f){Is(a),jo(a),a.g=null;var T=2}else if(Fo(a.h,f))d=f.D,_u(a.h,f),T=1;else return;if(a.G!=0){if(f.o)if(T==1){d=f.m?f.m.length:0,f=Date.now()-f.F;var x=a.B;T=fs(),Wt(T,new iu(T,d)),ws(a)}else Ou(a);else if(x=f.s,x==3||x==0&&0<f.X||!(T==1&&P_(a,f)||T==2&&Bo(a)))switch(d&&0<d.length&&(f=a.h,f.i=f.i.concat(d)),x){case 1:Xn(a,5);break;case 4:Xn(a,10);break;case 3:Xn(a,6);break;default:Xn(a,2)}}}function Fu(a,f){let d=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(d*=2),d*f}function Xn(a,f){if(a.j.info("Error code "+f),f==2){var d=m(a.fb,a),T=a.Xa;const x=!T;T=new Qn(T||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ps(T,"https"),ys(T),x?T_(T.toString(),d):E_(T.toString(),d)}else pe(2);a.G=0,a.l&&a.l.sa(f),Lu(a),Vu(a)}i.fb=function(a){a?(this.j.info("Successfully pinged google.com"),pe(2)):(this.j.info("Failed to ping google.com"),pe(1))};function Lu(a){if(a.G=0,a.ka=[],a.l){const f=mu(a.h);(f.length!=0||a.i.length!=0)&&(w(a.ka,f),w(a.ka,a.i),a.h.i.length=0,p(a.i),a.i.length=0),a.l.ra()}}function $u(a,f,d){var T=d instanceof Qn?mn(d):new Qn(d);if(T.g!="")f&&(T.g=f+"."+T.g),gs(T,T.s);else{var x=l.location;T=x.protocol,f=f?f+"."+x.hostname:x.hostname,x=+x.port;var N=new Qn(null);T&&ps(N,T),f&&(N.g=f),x&&gs(N,x),d&&(N.l=d),T=N}return d=a.D,f=a.ya,d&&f&&Dt(T,d,f),Dt(T,"VER",a.la),pi(a,T),T}function Uu(a,f,d){if(f&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=a.Ca&&!a.pa?new Ft(new fi({eb:d})):new Ft(a.pa),f.Ha(a.J),f}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Bu(){}i=Bu.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function As(){}As.prototype.g=function(a,f){return new De(a,f)};function De(a,f){qt.call(this),this.g=new Du(f),this.l=a,this.h=f&&f.messageUrlParams||null,a=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(a?a["X-WebChannel-Content-Type"]=f.messageContentType:a={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(a?a["X-WebChannel-Client-Profile"]=f.va:a={"X-WebChannel-Client-Profile":f.va}),this.g.S=a,(a=f&&f.Sb)&&!S(a)&&(this.g.m=a),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!S(f)&&(this.g.D=f,a=this.h,a!==null&&f in a&&(a=this.h,f in a&&delete a[f])),this.j=new Ar(this)}E(De,qt),De.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},De.prototype.close=function(){Uo(this.g)},De.prototype.o=function(a){var f=this.g;if(typeof a=="string"){var d={};d.__data__=a,a=d}else this.u&&(d={},d.__data__=So(a),a=d);f.i.push(new c_(f.Ya++,a)),f.G==3&&ws(f)},De.prototype.N=function(){this.g.l=null,delete this.j,Uo(this.g),delete this.g,De.aa.N.call(this)};function ju(a){Do.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var f=a.__sm__;if(f){t:{for(const d in f){a=d;break t}a=void 0}(this.i=a)&&(a=this.i,f=f!==null&&a in f?f[a]:void 0),this.data=f}else this.data=a}E(ju,Do);function zu(){Vo.call(this),this.status=1}E(zu,Vo);function Ar(a){this.g=a}E(Ar,Bu),Ar.prototype.ua=function(){Wt(this.g,"a")},Ar.prototype.ta=function(a){Wt(this.g,new ju(a))},Ar.prototype.sa=function(a){Wt(this.g,new zu)},Ar.prototype.ra=function(){Wt(this.g,"b")},As.prototype.createWebChannel=As.prototype.g,De.prototype.send=De.prototype.o,De.prototype.open=De.prototype.m,De.prototype.close=De.prototype.close,Mh=function(){return new As},Nh=function(){return fs()},Oh=Kn,ya={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ds.NO_ERROR=0,ds.TIMEOUT=8,ds.HTTP_ERROR=6,ks=ds,su.COMPLETE="complete",xh=su,tu.EventType=ii,ii.OPEN="a",ii.CLOSE="b",ii.ERROR="c",ii.MESSAGE="d",qt.prototype.listen=qt.prototype.K,vi=tu,kh=fi,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,Vh=Ft}).apply(typeof Ps<"u"?Ps:typeof self<"u"?self:typeof window<"u"?window:{});const hc="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ce.UNAUTHENTICATED=new ce(null),ce.GOOGLE_CREDENTIALS=new ce("google-credentials-uid"),ce.FIRST_PARTY=new ce("first-party-uid"),ce.MOCK_USER=new ce("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zr="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr=new Ah("@firebase/firestore");function gi(){return hr.logLevel}function G(i,...t){if(hr.logLevel<=gt.DEBUG){const e=t.map(Ja);hr.debug(`Firestore (${Zr}): ${i}`,...e)}}function Tn(i,...t){if(hr.logLevel<=gt.ERROR){const e=t.map(Ja);hr.error(`Firestore (${Zr}): ${i}`,...e)}}function Lr(i,...t){if(hr.logLevel<=gt.WARN){const e=t.map(Ja);hr.warn(`Firestore (${Zr}): ${i}`,...e)}}function Ja(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(i="Unexpected state"){const t=`FIRESTORE (${Zr}) INTERNAL ASSERTION FAILED: `+i;throw Tn(t),new Error(t)}function St(i,t){i||st()}function lt(i,t){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends Jr{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Np{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(ce.UNAUTHENTICATED))}shutdown(){}}class Mp{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class Fp{constructor(t){this.t=t,this.currentUser=ce.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const r=u=>this.i!==n?(n=this.i,e(u)):Promise.resolve();let s=new vn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new vn,t.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new vn)}},0),o()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(n=>this.i!==t?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(St(typeof n.accessToken=="string"),new Fh(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return St(t===null||typeof t=="string"),new ce(t)}}class Lp{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=ce.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class $p{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new Lp(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(ce.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Up{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Bp{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=s=>{s.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};const r=s=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(St(typeof e.token=="string"),this.R=e.token,new Up(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(i){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(i);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let n=0;n<i;n++)e[n]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const r=jp(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<e&&(n+=t.charAt(r[s]%t.length))}return n}}function Tt(i,t){return i<t?-1:i>t?1:0}function $r(i,t,e){return i.length===t.length&&i.every((n,r)=>e(n,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new W(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new W(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new W(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new W(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Xt.fromMillis(Date.now())}static fromDate(t){return Xt.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Xt(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Tt(this.nanoseconds,t.nanoseconds):Tt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(t){this.timestamp=t}static fromTimestamp(t){return new at(t)}static min(){return new at(new Xt(0,0))}static max(){return new at(new Xt(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(t,e,n){e===void 0?e=0:e>t.length&&st(),n===void 0?n=t.length-e:n>t.length-e&&st(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return Fi.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Fi?t.forEach(n=>{e.push(n)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.get(r),o=e.get(r);if(s<o)return-1;if(s>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Vt extends Fi{construct(t,e,n){return new Vt(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new W(L.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter(r=>r.length>0))}return new Vt(e)}static emptyPath(){return new Vt([])}}const zp=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class re extends Fi{construct(t,e,n){return new re(t,e,n)}static isValidIdentifier(t){return zp.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),re.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new re(["__name__"])}static fromServerFormat(t){const e=[];let n="",r=0;const s=()=>{if(n.length===0)throw new W(L.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let o=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new W(L.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new W(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=u,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(n+=l,r++):(s(),r++)}if(s(),o)throw new W(L.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new re(e)}static emptyPath(){return new re([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(t){this.path=t}static fromPath(t){return new Z(Vt.fromString(t))}static fromName(t){return new Z(Vt.fromString(t).popFirst(5))}static empty(){return new Z(Vt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Vt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Vt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Z(new Vt(t.slice()))}}function qp(i,t){const e=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,r=at.fromTimestamp(n===1e9?new Xt(e+1,0):new Xt(e,n));return new $n(r,Z.empty(),t)}function Gp(i){return new $n(i.readTime,i.key,-1)}class $n{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new $n(at.min(),Z.empty(),-1)}static max(){return new $n(at.max(),Z.empty(),-1)}}function Hp(i,t){let e=i.readTime.compareTo(t.readTime);return e!==0?e:(e=Z.comparator(i.documentKey,t.documentKey),e!==0?e:Tt(i.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Wp{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function es(i){if(i.code!==L.FAILED_PRECONDITION||i.message!==Kp)throw i;G("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new $((n,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(n,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof $?e:$.resolve(e)}catch(e){return $.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):$.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):$.reject(e)}static resolve(t){return new $((e,n)=>{e(t)})}static reject(t){return new $((e,n)=>{n(t)})}static waitFor(t){return new $((e,n)=>{let r=0,s=0,o=!1;t.forEach(l=>{++r,l.next(()=>{++s,o&&s===r&&e()},u=>n(u))}),o=!0,s===r&&e()})}static or(t){let e=$.resolve(!1);for(const n of t)e=e.next(r=>r?$.resolve(r):n());return e}static forEach(t,e){const n=[];return t.forEach((r,s)=>{n.push(e.call(this,r,s))}),this.waitFor(n)}static mapArray(t,e){return new $((n,r)=>{const s=t.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const c=u;e(t[c]).next(h=>{o[c]=h,++l,l===s&&n(o)},h=>r(h))}})}static doWhile(t,e){return new $((n,r)=>{const s=()=>{t()===!0?e().next(()=>{s()},r):n()};s()})}}function Qp(i){const t=i.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function ns(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=n=>this.ie(n),this.se=n=>e.writeSequenceNumber(n))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}Za.oe=-1;function co(i){return i==null}function Gs(i){return i===0&&1/i==-1/0}function Xp(i){return typeof i=="number"&&Number.isInteger(i)&&!Gs(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(i){let t=0;for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t++;return t}function pr(i,t){for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t(e,i[e])}function $h(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(t,e){this.comparator=t,this.root=e||ne.EMPTY}insert(t,e){return new Mt(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ne.BLACK,null,null))}remove(t){return new Mt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ne.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(n===0)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,n)=>(t(e,n),!1))}toString(){const t=[];return this.inorderTraversal((e,n)=>(t.push(`${e}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Ss(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Ss(this.root,t,this.comparator,!1)}getReverseIterator(){return new Ss(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Ss(this.root,t,this.comparator,!0)}}class Ss{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?n(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ne{constructor(t,e,n,r,s){this.key=t,this.value=e,this.color=n??ne.RED,this.left=r??ne.EMPTY,this.right=s??ne.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,s){return new ne(t??this.key,e??this.value,n??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const s=n(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,n),null):s===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ne.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return ne.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ne.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ne.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const t=this.left.check();if(t!==this.right.check())throw st();return t+(this.isRed()?0:1)}}ne.EMPTY=null,ne.RED=!0,ne.BLACK=!1;ne.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(t,e,n,r,s){return this}insert(t,e,n){return new ne(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(t){this.comparator=t,this.data=new Mt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,n)=>(t(e),!1))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new dc(this.data.getIterator())}getIteratorFrom(t){return new dc(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(n=>{e=e.add(n)}),e}isEqual(t){if(!(t instanceof ie)||this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=n.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new ie(this.comparator);return e.data=t,e}}class dc{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(t){this.fields=t,t.sort(re.comparator)}static empty(){return new xe([])}unionWith(t){let e=new ie(re.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new xe(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return $r(this.fields,t.fields,(e,n)=>e.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Uh("Invalid base64 string: "+s):s}}(t);return new me(e)}static fromUint8Array(t){const e=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new me(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Tt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}me.EMPTY_BYTE_STRING=new me("");const Yp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Un(i){if(St(!!i),typeof i=="string"){let t=0;const e=Yp.exec(i);if(St(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Ht(i.seconds),nanos:Ht(i.nanos)}}function Ht(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function fr(i){return typeof i=="string"?me.fromBase64String(i):me.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(i){var t,e;return((e=(((t=i==null?void 0:i.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function el(i){const t=i.mapValue.fields.__previous_value__;return tl(t)?el(t):t}function Li(i){const t=Un(i.mapValue.fields.__local_write_time__.timestampValue);return new Xt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(t,e,n,r,s,o,l,u,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}class $i{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new $i("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof $i&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function dr(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?tl(i)?4:Zp(i)?9007199254740991:10:st()}function hn(i,t){if(i===t)return!0;const e=dr(i);if(e!==dr(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return Li(i).isEqual(Li(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Un(r.timestampValue),l=Un(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(i,t);case 5:return i.stringValue===t.stringValue;case 6:return function(r,s){return fr(r.bytesValue).isEqual(fr(s.bytesValue))}(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return function(r,s){return Ht(r.geoPointValue.latitude)===Ht(s.geoPointValue.latitude)&&Ht(r.geoPointValue.longitude)===Ht(s.geoPointValue.longitude)}(i,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ht(r.integerValue)===Ht(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Ht(r.doubleValue),l=Ht(s.doubleValue);return o===l?Gs(o)===Gs(l):isNaN(o)&&isNaN(l)}return!1}(i,t);case 9:return $r(i.arrayValue.values||[],t.arrayValue.values||[],hn);case 10:return function(r,s){const o=r.mapValue.fields||{},l=s.mapValue.fields||{};if(fc(o)!==fc(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!hn(o[u],l[u])))return!1;return!0}(i,t);default:return st()}}function Ui(i,t){return(i.values||[]).find(e=>hn(e,t))!==void 0}function Ur(i,t){if(i===t)return 0;const e=dr(i),n=dr(t);if(e!==n)return Tt(e,n);switch(e){case 0:case 9007199254740991:return 0;case 1:return Tt(i.booleanValue,t.booleanValue);case 2:return function(s,o){const l=Ht(s.integerValue||s.doubleValue),u=Ht(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(i,t);case 3:return _c(i.timestampValue,t.timestampValue);case 4:return _c(Li(i),Li(t));case 5:return Tt(i.stringValue,t.stringValue);case 6:return function(s,o){const l=fr(s),u=fr(o);return l.compareTo(u)}(i.bytesValue,t.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const h=Tt(l[c],u[c]);if(h!==0)return h}return Tt(l.length,u.length)}(i.referenceValue,t.referenceValue);case 8:return function(s,o){const l=Tt(Ht(s.latitude),Ht(o.latitude));return l!==0?l:Tt(Ht(s.longitude),Ht(o.longitude))}(i.geoPointValue,t.geoPointValue);case 9:return function(s,o){const l=s.values||[],u=o.values||[];for(let c=0;c<l.length&&c<u.length;++c){const h=Ur(l[c],u[c]);if(h)return h}return Tt(l.length,u.length)}(i.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===Cs.mapValue&&o===Cs.mapValue)return 0;if(s===Cs.mapValue)return 1;if(o===Cs.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let _=0;_<u.length&&_<h.length;++_){const m=Tt(u[_],h[_]);if(m!==0)return m;const g=Ur(l[u[_]],c[h[_]]);if(g!==0)return g}return Tt(u.length,h.length)}(i.mapValue,t.mapValue);default:throw st()}}function _c(i,t){if(typeof i=="string"&&typeof t=="string"&&i.length===t.length)return Tt(i,t);const e=Un(i),n=Un(t),r=Tt(e.seconds,n.seconds);return r!==0?r:Tt(e.nanos,n.nanos)}function Br(i){return va(i)}function va(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(e){const n=Un(e);return`time(${n.seconds},${n.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(e){return fr(e).toBase64()}(i.bytesValue):"referenceValue"in i?function(e){return Z.fromName(e).toString()}(i.referenceValue):"geoPointValue"in i?function(e){return`geo(${e.latitude},${e.longitude})`}(i.geoPointValue):"arrayValue"in i?function(e){let n="[",r=!0;for(const s of e.values||[])r?r=!1:n+=",",n+=va(s);return n+"]"}(i.arrayValue):"mapValue"in i?function(e){const n=Object.keys(e.fields||{}).sort();let r="{",s=!0;for(const o of n)s?s=!1:r+=",",r+=`${o}:${va(e.fields[o])}`;return r+"}"}(i.mapValue):st()}function Ta(i){return!!i&&"integerValue"in i}function nl(i){return!!i&&"arrayValue"in i}function mc(i){return!!i&&"nullValue"in i}function pc(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function xs(i){return!!i&&"mapValue"in i}function bi(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const t={mapValue:{fields:{}}};return pr(i.mapValue.fields,(e,n)=>t.mapValue.fields[e]=bi(n)),t}if(i.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(i.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=bi(i.arrayValue.values[e]);return t}return Object.assign({},i)}function Zp(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(t){this.value=t}static empty(){return new Te({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!xs(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=bi(e)}setAll(t){let e=re.emptyPath(),n={},r=[];t.forEach((o,l)=>{if(!e.isImmediateParentOf(l)){const u=this.getFieldsMap(e);this.applyChanges(u,n,r),n={},r=[],e=l.popLast()}o?n[l.lastSegment()]=bi(o):r.push(l.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,n,r)}delete(t){const e=this.field(t.popLast());xs(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return hn(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];xs(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){pr(e,(r,s)=>t[r]=s);for(const r of n)delete t[r]}clone(){return new Te(bi(this.value))}}function Bh(i){const t=[];return pr(i.fields,(e,n)=>{const r=new re([e]);if(xs(n)){const s=Bh(n.mapValue).fields;if(s.length===0)t.push(r);else for(const o of s)t.push(r.child(o))}else t.push(r)}),new xe(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(t,e,n,r,s,o,l){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(t){return new he(t,0,at.min(),at.min(),at.min(),Te.empty(),0)}static newFoundDocument(t,e,n,r){return new he(t,1,e,at.min(),n,r,0)}static newNoDocument(t,e){return new he(t,2,e,at.min(),at.min(),Te.empty(),0)}static newUnknownDocument(t,e){return new he(t,3,e,at.min(),at.min(),Te.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(at.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Te.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Te.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=at.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof he&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new he(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(t,e){this.position=t,this.inclusive=e}}function gc(i,t,e){let n=0;for(let r=0;r<i.position.length;r++){const s=t[r],o=i.position[r];if(s.field.isKeyField()?n=Z.comparator(Z.fromName(o.referenceValue),e.key):n=Ur(o,e.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function yc(i,t){if(i===null)return t===null;if(t===null||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let e=0;e<i.position.length;e++)if(!hn(i.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(t,e="asc"){this.field=t,this.dir=e}}function tg(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{}class Qt extends jh{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,n):new ng(t,e,n):e==="array-contains"?new sg(t,n):e==="in"?new og(t,n):e==="not-in"?new ag(t,n):e==="array-contains-any"?new lg(t,n):new Qt(t,e,n)}static createKeyFieldInFilter(t,e,n){return e==="in"?new rg(t,n):new ig(t,n)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(Ur(e,this.value)):e!==null&&dr(this.value)===dr(e)&&this.matchesComparison(Ur(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return st()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fn extends jh{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new fn(t,e)}matches(t){return zh(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function zh(i){return i.op==="and"}function qh(i){return eg(i)&&zh(i)}function eg(i){for(const t of i.filters)if(t instanceof fn)return!1;return!0}function Ea(i){if(i instanceof Qt)return i.field.canonicalString()+i.op.toString()+Br(i.value);if(qh(i))return i.filters.map(t=>Ea(t)).join(",");{const t=i.filters.map(e=>Ea(e)).join(",");return`${i.op}(${t})`}}function Gh(i,t){return i instanceof Qt?function(n,r){return r instanceof Qt&&n.op===r.op&&n.field.isEqual(r.field)&&hn(n.value,r.value)}(i,t):i instanceof fn?function(n,r){return r instanceof fn&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((s,o,l)=>s&&Gh(o,r.filters[l]),!0):!1}(i,t):void st()}function Hh(i){return i instanceof Qt?function(e){return`${e.field.canonicalString()} ${e.op} ${Br(e.value)}`}(i):i instanceof fn?function(e){return e.op.toString()+" {"+e.getFilters().map(Hh).join(" ,")+"}"}(i):"Filter"}class ng extends Qt{constructor(t,e,n){super(t,e,n),this.key=Z.fromName(n.referenceValue)}matches(t){const e=Z.comparator(t.key,this.key);return this.matchesComparison(e)}}class rg extends Qt{constructor(t,e){super(t,"in",e),this.keys=Kh("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class ig extends Qt{constructor(t,e){super(t,"not-in",e),this.keys=Kh("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Kh(i,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(n=>Z.fromName(n.referenceValue))}class sg extends Qt{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return nl(e)&&Ui(e.arrayValue,this.value)}}class og extends Qt{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Ui(this.value.arrayValue,e)}}class ag extends Qt{constructor(t,e){super(t,"not-in",e)}matches(t){if(Ui(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!Ui(this.value.arrayValue,e)}}class lg extends Qt{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!nl(e)||!e.arrayValue.values)&&e.arrayValue.values.some(n=>Ui(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(t,e=null,n=[],r=[],s=null,o=null,l=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function vc(i,t=null,e=[],n=[],r=null,s=null,o=null){return new ug(i,t,e,n,r,s,o)}function rl(i){const t=lt(i);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(n=>Ea(n)).join(","),e+="|ob:",e+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),co(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>Br(n)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>Br(n)).join(",")),t.ue=e}return t.ue}function il(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<i.orderBy.length;e++)if(!tg(i.orderBy[e],t.orderBy[e]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let e=0;e<i.filters.length;e++)if(!Gh(i.filters[e],t.filters[e]))return!1;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!yc(i.startAt,t.startAt)&&yc(i.endAt,t.endAt)}function wa(i){return Z.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(t,e=null,n=[],r=[],s=null,o="F",l=null,u=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function cg(i,t,e,n,r,s,o,l){return new ho(i,t,e,n,r,s,o,l)}function fo(i){return new ho(i)}function Tc(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function hg(i){return i.collectionGroup!==null}function Ri(i){const t=lt(i);if(t.ce===null){t.ce=[];const e=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ie(re.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.ce.push(new Ks(s,n))}),e.has(re.keyField().canonicalString())||t.ce.push(new Ks(re.keyField(),n))}return t.ce}function an(i){const t=lt(i);return t.le||(t.le=fg(t,Ri(i))),t.le}function fg(i,t){if(i.limitType==="F")return vc(i.path,i.collectionGroup,t,i.filters,i.limit,i.startAt,i.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Ks(r.field,s)});const e=i.endAt?new Hs(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new Hs(i.startAt.position,i.startAt.inclusive):null;return vc(i.path,i.collectionGroup,t,i.filters,i.limit,e,n)}}function Ia(i,t,e){return new ho(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,e,i.startAt,i.endAt)}function _o(i,t){return il(an(i),an(t))&&i.limitType===t.limitType}function Wh(i){return`${rl(an(i))}|lt:${i.limitType}`}function Pr(i){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>Hh(r)).join(", ")}]`),co(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Br(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Br(r)).join(",")),`Target(${n})`}(an(i))}; limitType=${i.limitType})`}function mo(i,t){return t.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):Z.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(i,t)&&function(n,r){for(const s of Ri(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(i,t)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(i,t)&&function(n,r){return!(n.startAt&&!function(o,l,u){const c=gc(o,l,u);return o.inclusive?c<=0:c<0}(n.startAt,Ri(n),r)||n.endAt&&!function(o,l,u){const c=gc(o,l,u);return o.inclusive?c>=0:c>0}(n.endAt,Ri(n),r))}(i,t)}function dg(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Qh(i){return(t,e)=>{let n=!1;for(const r of Ri(i)){const s=_g(r,t,e);if(s!==0)return s;n=n||r.field.isKeyField()}return 0}}function _g(i,t,e){const n=i.field.isKeyField()?Z.comparator(t.key,e.key):function(s,o,l){const u=o.data.field(s),c=l.data.field(s);return u!==null&&c!==null?Ur(u,c):st()}(i.field,t,e);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return st()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(n!==void 0){for(const[r,s]of n)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return this.inner[n]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return n.length===1?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){pr(this.inner,(e,n)=>{for(const[r,s]of n)t(r,s)})}isEmpty(){return $h(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg=new Mt(Z.comparator);function En(){return mg}const Xh=new Mt(Z.comparator);function Ti(...i){let t=Xh;for(const e of i)t=t.insert(e.key,e);return t}function Yh(i){let t=Xh;return i.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function er(){return Pi()}function Jh(){return Pi()}function Pi(){return new ti(i=>i.toString(),(i,t)=>i.isEqual(t))}const pg=new Mt(Z.comparator),gg=new ie(Z.comparator);function _t(...i){let t=gg;for(const e of i)t=t.add(e);return t}const yg=new ie(Tt);function vg(){return yg}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(i,t){if(i.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gs(t)?"-0":t}}function tf(i){return{integerValue:""+i}}function Tg(i,t){return Xp(t)?tf(t):Zh(i,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(){this._=void 0}}function Eg(i,t,e){return i instanceof Ws?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&tl(s)&&(s=el(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(e,t):i instanceof Bi?nf(i,t):i instanceof ji?rf(i,t):function(r,s){const o=ef(r,s),l=Ec(o)+Ec(r.Pe);return Ta(o)&&Ta(r.Pe)?tf(l):Zh(r.serializer,l)}(i,t)}function wg(i,t,e){return i instanceof Bi?nf(i,t):i instanceof ji?rf(i,t):e}function ef(i,t){return i instanceof Qs?function(n){return Ta(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}class Ws extends po{}class Bi extends po{constructor(t){super(),this.elements=t}}function nf(i,t){const e=sf(t);for(const n of i.elements)e.some(r=>hn(r,n))||e.push(n);return{arrayValue:{values:e}}}class ji extends po{constructor(t){super(),this.elements=t}}function rf(i,t){let e=sf(t);for(const n of i.elements)e=e.filter(r=>!hn(r,n));return{arrayValue:{values:e}}}class Qs extends po{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function Ec(i){return Ht(i.integerValue||i.doubleValue)}function sf(i){return nl(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function Ig(i,t){return i.field.isEqual(t.field)&&function(n,r){return n instanceof Bi&&r instanceof Bi||n instanceof ji&&r instanceof ji?$r(n.elements,r.elements,hn):n instanceof Qs&&r instanceof Qs?hn(n.Pe,r.Pe):n instanceof Ws&&r instanceof Ws}(i.transform,t.transform)}class Ag{constructor(t,e){this.version=t,this.transformResults=e}}class Ne{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new Ne}static exists(t){return new Ne(void 0,t)}static updateTime(t){return new Ne(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Os(i,t){return i.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(i.updateTime):i.exists===void 0||i.exists===t.isFoundDocument()}class go{}function of(i,t){if(!i.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return i.isNoDocument()?new sl(i.key,Ne.none()):new rs(i.key,i.data,Ne.none());{const e=i.data,n=Te.empty();let r=new ie(re.comparator);for(let s of t.fields)if(!r.has(s)){let o=e.field(s);o===null&&s.length>1&&(s=s.popLast(),o=e.field(s)),o===null?n.delete(s):n.set(s,o),r=r.add(s)}return new Gn(i.key,n,new xe(r.toArray()),Ne.none())}}function bg(i,t,e){i instanceof rs?function(r,s,o){const l=r.value.clone(),u=Ic(r.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(i,t,e):i instanceof Gn?function(r,s,o){if(!Os(r.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Ic(r.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(af(r)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(i,t,e):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,e)}function Si(i,t,e,n){return i instanceof rs?function(s,o,l,u){if(!Os(s.precondition,o))return l;const c=s.value.clone(),h=Ac(s.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(i,t,e,n):i instanceof Gn?function(s,o,l,u){if(!Os(s.precondition,o))return l;const c=Ac(s.fieldTransforms,u,o),h=o.data;return h.setAll(af(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(_=>_.field))}(i,t,e,n):function(s,o,l){return Os(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(i,t,e)}function Rg(i,t){let e=null;for(const n of i.fieldTransforms){const r=t.data.field(n.field),s=ef(n.transform,r||null);s!=null&&(e===null&&(e=Te.empty()),e.set(n.field,s))}return e||null}function wc(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&$r(n,r,(s,o)=>Ig(s,o))}(i.fieldTransforms,t.fieldTransforms)&&(i.type===0?i.value.isEqual(t.value):i.type!==1||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask))}class rs extends go{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Gn extends go{constructor(t,e,n,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function af(i){const t=new Map;return i.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const n=i.data.field(e);t.set(e,n)}}),t}function Ic(i,t,e){const n=new Map;St(i.length===e.length);for(let r=0;r<e.length;r++){const s=i[r],o=s.transform,l=t.data.field(s.field);n.set(s.field,wg(o,l,e[r]))}return n}function Ac(i,t,e){const n=new Map;for(const r of i){const s=r.transform,o=e.data.field(r.field);n.set(r.field,Eg(s,o,t))}return n}class sl extends go{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Pg extends go{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&bg(s,t,n[r])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Si(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Si(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=Jh();return this.mutations.forEach(r=>{const s=t.get(r.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=e.has(r.key)?null:l;const u=of(o,l);u!==null&&n.set(r.key,u),o.isValidDocument()||o.convertToNoDocument(at.min())}),n}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),_t())}isEqual(t){return this.batchId===t.batchId&&$r(this.mutations,t.mutations,(e,n)=>wc(e,n))&&$r(this.baseMutations,t.baseMutations,(e,n)=>wc(e,n))}}class ol{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){St(t.mutations.length===n.length);let r=function(){return pg}();const s=t.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,n[o].version);return new ol(t,e,n,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt,pt;function Vg(i){switch(i){default:return st();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function lf(i){if(i===void 0)return Tn("GRPC error has no .code"),L.UNKNOWN;switch(i){case Gt.OK:return L.OK;case Gt.CANCELLED:return L.CANCELLED;case Gt.UNKNOWN:return L.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return L.INTERNAL;case Gt.UNAVAILABLE:return L.UNAVAILABLE;case Gt.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Gt.NOT_FOUND:return L.NOT_FOUND;case Gt.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Gt.ABORTED:return L.ABORTED;case Gt.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Gt.DATA_LOSS:return L.DATA_LOSS;default:return st()}}(pt=Gt||(Gt={}))[pt.OK=0]="OK",pt[pt.CANCELLED=1]="CANCELLED",pt[pt.UNKNOWN=2]="UNKNOWN",pt[pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pt[pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pt[pt.NOT_FOUND=5]="NOT_FOUND",pt[pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",pt[pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",pt[pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",pt[pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pt[pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pt[pt.ABORTED=10]="ABORTED",pt[pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",pt[pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",pt[pt.INTERNAL=13]="INTERNAL",pt[pt.UNAVAILABLE=14]="UNAVAILABLE",pt[pt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg=new rr([4294967295,4294967295],0);function bc(i){const t=kg().encode(i),e=new Dh;return e.update(t),new Uint8Array(e.digest())}function Rc(i){const t=new DataView(i.buffer),e=t.getUint32(0,!0),n=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new rr([e,n],0),new rr([r,s],0)]}class al{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new Ei(`Invalid padding: ${e}`);if(n<0)throw new Ei(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new Ei(`Invalid hash count: ${n}`);if(t.length===0&&e!==0)throw new Ei(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=rr.fromNumber(this.Ie)}Ee(t,e,n){let r=t.add(e.multiply(rr.fromNumber(n)));return r.compare(xg)===1&&(r=new rr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const e=bc(t),[n,r]=Rc(e);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,r,s);if(!this.de(o))return!1}return!0}static create(t,e,n){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new al(s,r,e);return n.forEach(l=>o.insert(l)),o}insert(t){if(this.Ie===0)return;const e=bc(t),[n,r]=Rc(e);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,r,s);this.Ae(o)}}Ae(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class Ei extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(t,e,n,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const r=new Map;return r.set(t,is.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new yo(at.min(),r,new Mt(Tt),En(),_t())}}class is{constructor(t,e,n,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new is(n,e,_t(),_t(),_t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(t,e,n,r){this.Re=t,this.removedTargetIds=e,this.key=n,this.Ve=r}}class uf{constructor(t,e){this.targetId=t,this.me=e}}class cf{constructor(t,e,n=me.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class Pc{constructor(){this.fe=0,this.ge=Cc(),this.pe=me.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=_t(),e=_t(),n=_t();return this.ge.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:st()}}),new is(this.pe,this.ye,t,e,n)}ve(){this.we=!1,this.ge=Cc()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,St(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Og{constructor(t){this.Le=t,this.Be=new Map,this.ke=En(),this.qe=Sc(),this.Qe=new Mt(Tt)}Ke(t){for(const e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(const e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{const n=this.Ge(e);switch(t.state){case 0:this.ze(e)&&n.De(t.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(t.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(n.Ne(),n.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),n.De(t.resumeToken));break;default:st()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((n,r)=>{this.ze(r)&&e(r)})}He(t){const e=t.targetId,n=t.me.count,r=this.Je(e);if(r){const s=r.target;if(wa(s))if(n===0){const o=new Z(s.path);this.Ue(e,o,he.newNoDocument(o,at.min()))}else St(n===1);else{const o=this.Ye(e);if(o!==n){const l=this.Ze(t),u=l?this.Xe(l,t,o):1;if(u!==0){this.je(e);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,c)}}}}}Ze(t){const e=t.me.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=e;let o,l;try{o=fr(n).toUint8Array()}catch(u){if(u instanceof Uh)return Lr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new al(o,r,s)}catch(u){return Lr(u instanceof Ei?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(t,e,n){return e.me.count===n-this.nt(t,e.targetId)?0:2}nt(t,e){const n=this.Le.getRemoteKeysForTarget(e);let r=0;return n.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.Ue(e,s,null),r++)}),r}rt(t){const e=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&wa(l.target)){const u=new Z(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,he.newNoDocument(u,t))}s.be&&(e.set(o,s.Ce()),s.ve())}});let n=_t();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const r=new yo(t,e,this.Qe,this.ke,n);return this.ke=En(),this.qe=Sc(),this.Qe=new Mt(Tt),r}$e(t,e){if(!this.ze(t))return;const n=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,n),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,n){if(!this.ze(t))return;const r=this.Ge(t);this.it(t,e)?r.Fe(e,1):r.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),n&&(this.ke=this.ke.insert(e,n))}removeTarget(t){this.Be.delete(t)}Ye(t){const e=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new Pc,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new ie(Tt),this.qe=this.qe.insert(t,e)),e}ze(t){const e=this.Je(t)!==null;return e||G("WatchChangeAggregator","Detected inactive target",t),e}Je(t){const e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Pc),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function Sc(){return new Mt(Z.comparator)}function Cc(){return new Mt(Z.comparator)}const Ng={asc:"ASCENDING",desc:"DESCENDING"},Mg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Fg={and:"AND",or:"OR"};class Lg{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Aa(i,t){return i.useProto3Json||co(t)?t:{value:t}}function Xs(i,t){return i.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function hf(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function $g(i,t){return Xs(i,t.toTimestamp())}function ln(i){return St(!!i),at.fromTimestamp(function(e){const n=Un(e);return new Xt(n.seconds,n.nanos)}(i))}function ll(i,t){return ba(i,t).canonicalString()}function ba(i,t){const e=function(r){return new Vt(["projects",r.projectId,"databases",r.database])}(i).child("documents");return t===void 0?e:e.child(t)}function ff(i){const t=Vt.fromString(i);return St(gf(t)),t}function Ra(i,t){return ll(i.databaseId,t.path)}function Xo(i,t){const e=ff(t);if(e.get(1)!==i.databaseId.projectId)throw new W(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+i.databaseId.projectId);if(e.get(3)!==i.databaseId.database)throw new W(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+i.databaseId.database);return new Z(_f(e))}function df(i,t){return ll(i.databaseId,t)}function Ug(i){const t=ff(i);return t.length===4?Vt.emptyPath():_f(t)}function Pa(i){return new Vt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function _f(i){return St(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function Dc(i,t,e){return{name:Ra(i,t),fields:e.value.mapValue.fields}}function Bg(i,t){let e;if("targetChange"in t){t.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:st()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(St(h===void 0||typeof h=="string"),me.fromBase64String(h||"")):(St(h===void 0||h instanceof Buffer||h instanceof Uint8Array),me.fromUint8Array(h||new Uint8Array))}(i,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(c){const h=c.code===void 0?L.UNKNOWN:lf(c.code);return new W(h,c.message||"")}(o);e=new cf(n,r,s,l||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const r=Xo(i,n.document.name),s=ln(n.document.updateTime),o=n.document.createTime?ln(n.document.createTime):at.min(),l=new Te({mapValue:{fields:n.document.fields}}),u=he.newFoundDocument(r,s,o,l),c=n.targetIds||[],h=n.removedTargetIds||[];e=new Ns(c,h,u.key,u)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const r=Xo(i,n.document),s=n.readTime?ln(n.readTime):at.min(),o=he.newNoDocument(r,s),l=n.removedTargetIds||[];e=new Ns([],l,o.key,o)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const r=Xo(i,n.document),s=n.removedTargetIds||[];e=new Ns([],s,r,null)}else{if(!("filter"in t))return st();{t.filter;const n=t.filter;n.targetId;const{count:r=0,unchangedNames:s}=n,o=new Dg(r,s),l=n.targetId;e=new uf(l,o)}}return e}function jg(i,t){let e;if(t instanceof rs)e={update:Dc(i,t.key,t.value)};else if(t instanceof sl)e={delete:Ra(i,t.key)};else if(t instanceof Gn)e={update:Dc(i,t.key,t.data),updateMask:Yg(t.fieldMask)};else{if(!(t instanceof Pg))return st();e={verify:Ra(i,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(n=>function(s,o){const l=o.transform;if(l instanceof Ws)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Bi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ji)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Qs)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw st()}(0,n))),t.precondition.isNone||(e.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:$g(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:st()}(i,t.precondition)),e}function zg(i,t){return i&&i.length>0?(St(t!==void 0),i.map(e=>function(r,s){let o=r.updateTime?ln(r.updateTime):ln(s);return o.isEqual(at.min())&&(o=ln(s)),new Ag(o,r.transformResults||[])}(e,t))):[]}function qg(i,t){return{documents:[df(i,t.path)]}}function Gg(i,t){const e={structuredQuery:{}},n=t.path;let r;t.collectionGroup!==null?(r=n,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=n.popLast(),e.structuredQuery.from=[{collectionId:n.lastSegment()}]),e.parent=df(i,r);const s=function(c){if(c.length!==0)return pf(fn.create(c,"and"))}(t.filters);s&&(e.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:Sr(m.field),direction:Wg(m.dir)}}(h))}(t.orderBy);o&&(e.structuredQuery.orderBy=o);const l=Aa(i,t.limit);return l!==null&&(e.structuredQuery.limit=l),t.startAt&&(e.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{_t:e,parent:r}}function Hg(i){let t=Ug(i.parent);const e=i.structuredQuery,n=e.from?e.from.length:0;let r=null;if(n>0){St(n===1);const h=e.from[0];h.allDescendants?r=h.collectionId:t=t.child(h.collectionId)}let s=[];e.where&&(s=function(_){const m=mf(_);return m instanceof fn&&qh(m)?m.getFilters():[m]}(e.where));let o=[];e.orderBy&&(o=function(_){return _.map(m=>function(E){return new Ks(Cr(E.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(m))}(e.orderBy));let l=null;e.limit&&(l=function(_){let m;return m=typeof _=="object"?_.value:_,co(m)?null:m}(e.limit));let u=null;e.startAt&&(u=function(_){const m=!!_.before,g=_.values||[];return new Hs(g,m)}(e.startAt));let c=null;return e.endAt&&(c=function(_){const m=!_.before,g=_.values||[];return new Hs(g,m)}(e.endAt)),cg(t,r,o,s,l,"F",u,c)}function Kg(i,t){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return st()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function mf(i){return i.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Cr(e.unaryFilter.field);return Qt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Cr(e.unaryFilter.field);return Qt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Cr(e.unaryFilter.field);return Qt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Cr(e.unaryFilter.field);return Qt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return st()}}(i):i.fieldFilter!==void 0?function(e){return Qt.create(Cr(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(e.fieldFilter.op),e.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(e){return fn.create(e.compositeFilter.filters.map(n=>mf(n)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return st()}}(e.compositeFilter.op))}(i):st()}function Wg(i){return Ng[i]}function Qg(i){return Mg[i]}function Xg(i){return Fg[i]}function Sr(i){return{fieldPath:i.canonicalString()}}function Cr(i){return re.fromServerFormat(i.fieldPath)}function pf(i){return i instanceof Qt?function(e){if(e.op==="=="){if(pc(e.value))return{unaryFilter:{field:Sr(e.field),op:"IS_NAN"}};if(mc(e.value))return{unaryFilter:{field:Sr(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(pc(e.value))return{unaryFilter:{field:Sr(e.field),op:"IS_NOT_NAN"}};if(mc(e.value))return{unaryFilter:{field:Sr(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sr(e.field),op:Qg(e.op),value:e.value}}}(i):i instanceof fn?function(e){const n=e.getFilters().map(r=>pf(r));return n.length===1?n[0]:{compositeFilter:{op:Xg(e.op),filters:n}}}(i):st()}function Yg(i){const t=[];return i.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function gf(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(t,e,n,r,s=at.min(),o=at.min(),l=me.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new Dn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Dn(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Dn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Dn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(t){this.ct=t}}function Zg(i){const t=Hg({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Ia(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(){this._n=new ey}addToCollectionParentIndex(t,e){return this._n.add(e),$.resolve()}getCollectionParents(t,e){return $.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return $.resolve()}deleteFieldIndex(t,e){return $.resolve()}deleteAllFieldIndexes(t){return $.resolve()}createTargetIndexes(t,e){return $.resolve()}getDocumentsMatchingTarget(t,e){return $.resolve(null)}getIndexType(t,e){return $.resolve(0)}getFieldIndexes(t,e){return $.resolve([])}getNextCollectionGroupToUpdate(t){return $.resolve(null)}getMinOffset(t,e){return $.resolve($n.min())}getMinOffsetFromCollectionGroup(t,e){return $.resolve($n.min())}updateCollectionGroup(t,e,n){return $.resolve()}updateIndexEntries(t,e){return $.resolve()}}class ey{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new ie(Vt.comparator),s=!r.has(n);return this.index[e]=r.add(n),s}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new ie(Vt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new jr(0)}static Ln(){return new jr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(){this.changes=new ti(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,he.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return n!==void 0?$.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(t,e,n,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(n=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(n!==null&&Si(n.mutation,r,xe.empty(),Xt.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(n=>this.getLocalViewOfDocuments(t,n,_t()).next(()=>n))}getLocalViewOfDocuments(t,e,n=_t()){const r=er();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,n).next(s=>{let o=Ti();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){const n=er();return this.populateOverlays(t,n,e).next(()=>this.computeViews(t,e,n,_t()))}populateOverlays(t,e,n){const r=[];return n.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,l)=>{e.set(o,l)})})}computeViews(t,e,n,r){let s=En();const o=Pi(),l=function(){return Pi()}();return e.forEach((u,c)=>{const h=n.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof Gn)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Si(h.mutation,c,h.mutation.getFieldMask(),Xt.now())):o.set(c.key,xe.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((c,h)=>o.set(c,h)),e.forEach((c,h)=>{var _;return l.set(c,new ry(h,(_=o.get(c))!==null&&_!==void 0?_:null))}),l))}recalculateAndSaveOverlays(t,e){const n=Pi();let r=new Mt((o,l)=>o-l),s=_t();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=e.get(u);if(c===null)return;let h=n.get(u)||xe.empty();h=l.applyToLocalView(c,h),n.set(u,h);const _=(r.get(l.batchId)||_t()).add(u);r=r.insert(l.batchId,_)})}).next(()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,h=u.value,_=Jh();h.forEach(m=>{if(!s.has(m)){const g=of(e.get(m),n.get(m));g!==null&&_.set(m,g),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,_))}return $.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,e,n,r){return function(o){return Z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):hg(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,r):this.getDocumentsMatchingCollectionQuery(t,e,n,r)}getNextDocuments(t,e,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-s.size):$.resolve(er());let l=-1,u=s;return o.next(c=>$.forEach(c,(h,_)=>(l<_.largestBatchId&&(l=_.largestBatchId),s.get(h)?$.resolve():this.remoteDocumentCache.getEntry(t,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(t,c,s)).next(()=>this.computeViews(t,u,c,_t())).next(h=>({batchId:l,changes:Yh(h)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Z(e)).next(n=>{let r=Ti();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,n,r){const s=e.collectionGroup;let o=Ti();return this.indexManager.getCollectionParents(t,s).next(l=>$.forEach(l,u=>{const c=function(_,m){return new ho(m,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(e,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,c,n,r).next(h=>{h.forEach((_,m)=>{o=o.insert(_,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,s,r))).next(o=>{s.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,he.newInvalidDocument(h)))});let l=Ti();return o.forEach((u,c)=>{const h=s.get(u);h!==void 0&&Si(h.mutation,c,xe.empty(),Xt.now()),mo(e,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return $.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:ln(r.createTime)}}(e)),$.resolve()}getNamedQuery(t,e){return $.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,function(r){return{name:r.name,query:Zg(r.bundledQuery),readTime:ln(r.readTime)}}(e)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(){this.overlays=new Mt(Z.comparator),this.hr=new Map}getOverlay(t,e){return $.resolve(this.overlays.get(e))}getOverlays(t,e){const n=er();return $.forEach(e,r=>this.getOverlay(t,r).next(s=>{s!==null&&n.set(r,s)})).next(()=>n)}saveOverlays(t,e,n){return n.forEach((r,s)=>{this.ht(t,e,s)}),$.resolve()}removeOverlaysForBatchId(t,e,n){const r=this.hr.get(n);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(n)),$.resolve()}getOverlaysForCollection(t,e,n){const r=er(),s=e.length+1,o=new Z(e.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!e.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>n&&r.set(u.getKey(),u)}return $.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let s=new Mt((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===e&&c.largestBatchId>n){let h=s.get(c.largestBatchId);h===null&&(h=er(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const l=er(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>l.set(c,h)),!(l.size()>=r)););return $.resolve(l)}ht(t,e,n){const r=this.overlays.get(n.key);if(r!==null){const o=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new Cg(e,n));let s=this.hr.get(e);s===void 0&&(s=_t(),this.hr.set(e,s)),this.hr.set(e,s.add(n.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(){this.Pr=new ie(Jt.Ir),this.Tr=new ie(Jt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){const n=new Jt(t,e);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(t,e){t.forEach(n=>this.addReference(n,e))}removeReference(t,e){this.Ar(new Jt(t,e))}Rr(t,e){t.forEach(n=>this.removeReference(n,e))}Vr(t){const e=new Z(new Vt([])),n=new Jt(e,t),r=new Jt(e,t+1),s=[];return this.Tr.forEachInRange([n,r],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const e=new Z(new Vt([])),n=new Jt(e,t),r=new Jt(e,t+1);let s=_t();return this.Tr.forEachInRange([n,r],o=>{s=s.add(o.key)}),s}containsKey(t){const e=new Jt(t,0),n=this.Pr.firstAfterOrEqual(e);return n!==null&&t.isEqual(n.key)}}class Jt{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return Z.comparator(t.key,e.key)||Tt(t.pr,e.pr)}static Er(t,e){return Tt(t.pr,e.pr)||Z.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new ie(Jt.Ir)}checkEmpty(t){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,n,r){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Sg(s,e,n,r);this.mutationQueue.push(o);for(const l of r)this.wr=this.wr.add(new Jt(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return $.resolve(o)}lookupMutationBatch(t,e){return $.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=this.br(n),s=r<0?0:r;return $.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new Jt(e,0),r=new Jt(e,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([n,r],o=>{const l=this.Sr(o.pr);s.push(l)}),$.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new ie(Tt);return e.forEach(r=>{const s=new Jt(r,0),o=new Jt(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],l=>{n=n.add(l.pr)})}),$.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let s=n;Z.isDocumentKey(s)||(s=s.child(""));const o=new Jt(new Z(s),0);let l=new ie(Tt);return this.wr.forEachWhile(u=>{const c=u.key.path;return!!n.isPrefixOf(c)&&(c.length===r&&(l=l.add(u.pr)),!0)},o),$.resolve(this.Dr(l))}Dr(t){const e=[];return t.forEach(n=>{const r=this.Sr(n);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){St(this.Cr(e.batchId,"removed")===0),this.mutationQueue.shift();let n=this.wr;return $.forEach(e.mutations,r=>{const s=new Jt(r.key,e.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.wr=n})}Mn(t){}containsKey(t,e){const n=new Jt(e,0),r=this.wr.firstAfterOrEqual(n);return $.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,$.resolve()}Cr(t,e){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(t){this.vr=t,this.docs=function(){return new Mt(Z.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,r=this.docs.get(n),s=r?r.size:0,o=this.vr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return $.resolve(n?n.document.mutableCopy():he.newInvalidDocument(e))}getEntries(t,e){let n=En();return e.forEach(r=>{const s=this.docs.get(r);n=n.insert(r,s?s.document.mutableCopy():he.newInvalidDocument(r))}),$.resolve(n)}getDocumentsMatchingQuery(t,e,n,r){let s=En();const o=e.path,l=new Z(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Hp(Gp(h),n)<=0||(r.has(h.key)||mo(e,h))&&(s=s.insert(h.key,h.mutableCopy()))}return $.resolve(s)}getAllFromCollectionGroup(t,e,n,r){st()}Fr(t,e){return $.forEach(this.docs,n=>e(n))}newChangeBuffer(t){return new uy(this)}getSize(t){return $.resolve(this.size)}}class uy extends ny{constructor(t){super(),this.ar=t}applyChanges(t){const e=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?e.push(this.ar.addEntry(t,r)):this.ar.removeEntry(n)}),$.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(t){this.persistence=t,this.Mr=new ti(e=>rl(e),il),this.lastRemoteSnapshotVersion=at.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ul,this.targetCount=0,this.Lr=jr.Nn()}forEachTarget(t,e){return this.Mr.forEach((n,r)=>e(r)),$.resolve()}getLastRemoteSnapshotVersion(t){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return $.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Or&&(this.Or=e),$.resolve()}qn(t){this.Mr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Lr=new jr(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,$.resolve()}updateTargetData(t,e){return this.qn(e),$.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,$.resolve()}removeTargets(t,e,n){let r=0;const s=[];return this.Mr.forEach((o,l)=>{l.sequenceNumber<=e&&n.get(l.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),$.waitFor(s).next(()=>r)}getTargetCount(t){return $.resolve(this.targetCount)}getTargetData(t,e){const n=this.Mr.get(e)||null;return $.resolve(n)}addMatchingKeys(t,e,n){return this.Nr.dr(e,n),$.resolve()}removeMatchingKeys(t,e,n){this.Nr.Rr(e,n);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),$.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),$.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Nr.gr(e);return $.resolve(n)}containsKey(t,e){return $.resolve(this.Nr.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(t,e){this.Br={},this.overlays={},this.kr=new Za(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new cy(this),this.indexManager=new ty,this.remoteDocumentCache=function(r){return new ly(r)}(n=>this.referenceDelegate.Kr(n)),this.serializer=new Jg(e),this.$r=new sy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new oy,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Br[t.toKey()];return n||(n=new ay(e,this.referenceDelegate),this.Br[t.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,n){G("MemoryPersistence","Starting transaction:",t);const r=new fy(this.kr.next());return this.referenceDelegate.Ur(),n(r).next(s=>this.referenceDelegate.Wr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gr(t,e){return $.or(Object.values(this.Br).map(n=>()=>n.containsKey(t,e)))}}class fy extends Wp{constructor(t){super(),this.currentSequenceNumber=t}}class cl{constructor(t){this.persistence=t,this.zr=new ul,this.jr=null}static Hr(t){return new cl(t)}get Jr(){if(this.jr)return this.jr;throw st()}addReference(t,e,n){return this.zr.addReference(n,e),this.Jr.delete(n.toString()),$.resolve()}removeReference(t,e,n){return this.zr.removeReference(n,e),this.Jr.add(n.toString()),$.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),$.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach(r=>this.Jr.add(r.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Jr.add(s.toString()))}).next(()=>n.removeTargetData(t,e))}Ur(){this.jr=new Set}Wr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Jr,n=>{const r=Z.fromPath(n);return this.Yr(t,r).next(s=>{s||e.removeEntry(r,at.min())})}).next(()=>(this.jr=null,e.apply(t)))}updateLimboDocument(t,e){return this.Yr(t,e).next(n=>{n?this.Jr.delete(e.toString()):this.Jr.add(e.toString())})}Kr(t){return 0}Yr(t,e){return $.or([()=>$.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.qi=n,this.Qi=r}static Ki(t,e){let n=_t(),r=_t();for(const s of e.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new hl(t,e.fromCache,n,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Tm()?8:Qp(ym())>0?6:4}()}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,n,r){const s={result:null};return this.ji(t,e).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,e,r,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new dy;return this.Ji(t,e,o).next(l=>{if(s.result=l,this.Ui)return this.Yi(t,e,o,l.size)})}).next(()=>s.result)}Yi(t,e,n,r){return n.documentReadCount<this.Wi?(gi()<=gt.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Pr(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),$.resolve()):(gi()<=gt.DEBUG&&G("QueryEngine","Query:",Pr(e),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(gi()<=gt.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Pr(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,an(e))):$.resolve())}ji(t,e){if(Tc(e))return $.resolve(null);let n=an(e);return this.indexManager.getIndexType(t,n).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=Ia(e,null,"F"),n=an(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{const o=_t(...s);return this.zi.getDocuments(t,o).next(l=>this.indexManager.getMinOffset(t,n).next(u=>{const c=this.Zi(e,l);return this.Xi(e,c,o,u.readTime)?this.ji(t,Ia(e,null,"F")):this.es(t,c,e,u)}))})))}Hi(t,e,n,r){return Tc(e)||r.isEqual(at.min())?$.resolve(null):this.zi.getDocuments(t,n).next(s=>{const o=this.Zi(e,s);return this.Xi(e,o,n,r)?$.resolve(null):(gi()<=gt.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Pr(e)),this.es(t,o,e,qp(r,-1)).next(l=>l))})}Zi(t,e){let n=new ie(Qh(t));return e.forEach((r,s)=>{mo(t,s)&&(n=n.add(s))}),n}Xi(t,e,n,r){if(t.limit===null)return!1;if(n.size!==e.size)return!0;const s=t.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ji(t,e,n){return gi()<=gt.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Pr(e)),this.zi.getDocumentsMatchingQuery(t,e,$n.min(),n)}es(t,e,n,r){return this.zi.getDocumentsMatchingQuery(t,n,r).next(s=>(e.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(t,e,n,r){this.persistence=t,this.ts=e,this.serializer=r,this.ns=new Mt(Tt),this.rs=new ti(s=>rl(s),il),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(n)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new iy(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ns))}}function py(i,t,e,n){return new my(i,t,e,n)}async function yf(i,t){const e=lt(i);return await e.persistence.runTransaction("Handle user change","readonly",n=>{let r;return e.mutationQueue.getAllMutationBatches(n).next(s=>(r=s,e._s(t),e.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],l=[];let u=_t();for(const c of r){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of s){l.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return e.localDocuments.getDocuments(n,u).next(c=>({us:c,removedBatchIds:o,addedBatchIds:l}))})})}function gy(i,t){const e=lt(i);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const r=t.batch.keys(),s=e.os.newChangeBuffer({trackRemovals:!0});return function(l,u,c,h){const _=c.batch,m=_.keys();let g=$.resolve();return m.forEach(E=>{g=g.next(()=>h.getEntry(u,E)).next(p=>{const w=c.docVersions.get(E);St(w!==null),p.version.compareTo(w)<0&&(_.applyToRemoteDocument(p,c),p.isValidDocument()&&(p.setReadTime(c.commitVersion),h.addEntry(p)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(u,_))}(e,n,t,s).next(()=>s.apply(n)).next(()=>e.mutationQueue.performConsistencyCheck(n)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(n,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let u=_t();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(t))).next(()=>e.localDocuments.getDocuments(n,r))})}function vf(i){const t=lt(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Qr.getLastRemoteSnapshotVersion(e))}function yy(i,t){const e=lt(i),n=t.snapshotVersion;let r=e.ns;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=e.os.newChangeBuffer({trackRemovals:!0});r=e.ns;const l=[];t.targetChanges.forEach((h,_)=>{const m=r.get(_);if(!m)return;l.push(e.Qr.removeMatchingKeys(s,h.removedDocuments,_).next(()=>e.Qr.addMatchingKeys(s,h.addedDocuments,_)));let g=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(_)!==null?g=g.withResumeToken(me.EMPTY_BYTE_STRING,at.min()).withLastLimboFreeSnapshotVersion(at.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,n)),r=r.insert(_,g),function(p,w,V){return p.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(m,g,h)&&l.push(e.Qr.updateTargetData(s,g))});let u=En(),c=_t();if(t.documentUpdates.forEach(h=>{t.resolvedLimboDocuments.has(h)&&l.push(e.persistence.referenceDelegate.updateLimboDocument(s,h))}),l.push(vy(s,o,t.documentUpdates).next(h=>{u=h.cs,c=h.ls})),!n.isEqual(at.min())){const h=e.Qr.getLastRemoteSnapshotVersion(s).next(_=>e.Qr.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(h)}return $.waitFor(l).next(()=>o.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(e.ns=r,s))}function vy(i,t,e){let n=_t(),r=_t();return e.forEach(s=>n=n.add(s)),t.getEntries(i,n).next(s=>{let o=En();return e.forEach((l,u)=>{const c=s.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(at.min())?(t.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(u),o=o.insert(l,u)):G("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{cs:o,ls:r}})}function Ty(i,t){const e=lt(i);return e.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function Ey(i,t){const e=lt(i);return e.persistence.runTransaction("Allocate target","readwrite",n=>{let r;return e.Qr.getTargetData(n,t).next(s=>s?(r=s,$.resolve(r)):e.Qr.allocateTargetId(n).next(o=>(r=new Dn(t,o,"TargetPurposeListen",n.currentSequenceNumber),e.Qr.addTargetData(n,r).next(()=>r))))}).then(n=>{const r=e.ns.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.ns=e.ns.insert(n.targetId,n),e.rs.set(t,n.targetId)),n})}async function Sa(i,t,e){const n=lt(i),r=n.ns.get(t),s=e?"readwrite":"readwrite-primary";try{e||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!ns(o))throw o;G("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}n.ns=n.ns.remove(t),n.rs.delete(r.target)}function Vc(i,t,e){const n=lt(i);let r=at.min(),s=_t();return n.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const _=lt(u),m=_.rs.get(h);return m!==void 0?$.resolve(_.ns.get(m)):_.Qr.getTargetData(c,h)}(n,o,an(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,n.Qr.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>n.ts.getDocumentsMatchingQuery(o,t,e?r:at.min(),e?s:_t())).next(l=>(wy(n,dg(t),l),{documents:l,hs:s})))}function wy(i,t,e){let n=i.ss.get(t)||at.min();e.forEach((r,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),i.ss.set(t,n)}class kc{constructor(){this.activeTargetIds=vg()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Iy{constructor(){this.no=new kc,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,n){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new kc,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ds=null;function Yo(){return Ds===null?Ds=function(){return 268435456+Math.round(2147483648*Math.random())}():Ds++,"0x"+Ds.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue="WebChannelConnection";class Py extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=n+"://"+e.host,this.So=`projects/${r}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Do(){return!1}Co(e,n,r,s,o){const l=Yo(),u=this.vo(e,n.toUriEncodedString());G("RestConnection",`Sending RPC '${e}' ${l}:`,u,r);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(e,u,c,r).then(h=>(G("RestConnection",`Received RPC '${e}' ${l}: `,h),h),h=>{throw Lr("RestConnection",`RPC '${e}' ${l} failed with error: `,h,"url: ",u,"request:",r),h})}xo(e,n,r,s,o,l){return this.Co(e,n,r,s,o)}Fo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zr}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}vo(e,n){const r=by[e];return`${this.wo}/v1/${n}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,e,n,r){const s=Yo();return new Promise((o,l)=>{const u=new Vh;u.setWithCredentials(!0),u.listenOnce(xh.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ks.NO_ERROR:const h=u.getResponseJson();G(ue,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(h)),o(h);break;case ks.TIMEOUT:G(ue,`RPC '${t}' ${s} timed out`),l(new W(L.DEADLINE_EXCEEDED,"Request time out"));break;case ks.HTTP_ERROR:const _=u.getStatus();if(G(ue,`RPC '${t}' ${s} failed with status:`,_,"response text:",u.getResponseText()),_>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const E=function(w){const V=w.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(V)>=0?V:L.UNKNOWN}(g.status);l(new W(E,g.message))}else l(new W(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new W(L.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{G(ue,`RPC '${t}' ${s} completed.`)}});const c=JSON.stringify(r);G(ue,`RPC '${t}' ${s} sending request:`,r),u.send(e,"POST",c,n,15)})}Oo(t,e,n){const r=Yo(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Mh(),l=Nh(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new kh({})),this.Fo(u.initMessageHeaders,e,n),u.encodeInitMessageHeaders=!0;const h=s.join("");G(ue,`Creating RPC '${t}' stream ${r}: ${h}`,u);const _=o.createWebChannel(h,u);let m=!1,g=!1;const E=new Ry({lo:w=>{g?G(ue,`Not sending because RPC '${t}' stream ${r} is closed:`,w):(m||(G(ue,`Opening RPC '${t}' stream ${r} transport.`),_.open(),m=!0),G(ue,`RPC '${t}' stream ${r} sending:`,w),_.send(w))},ho:()=>_.close()}),p=(w,V,S)=>{w.listen(V,D=>{try{S(D)}catch(C){setTimeout(()=>{throw C},0)}})};return p(_,vi.EventType.OPEN,()=>{g||(G(ue,`RPC '${t}' stream ${r} transport opened.`),E.mo())}),p(_,vi.EventType.CLOSE,()=>{g||(g=!0,G(ue,`RPC '${t}' stream ${r} transport closed`),E.po())}),p(_,vi.EventType.ERROR,w=>{g||(g=!0,Lr(ue,`RPC '${t}' stream ${r} transport errored:`,w),E.po(new W(L.UNAVAILABLE,"The operation could not be completed")))}),p(_,vi.EventType.MESSAGE,w=>{var V;if(!g){const S=w.data[0];St(!!S);const D=S,C=D.error||((V=D[0])===null||V===void 0?void 0:V.error);if(C){G(ue,`RPC '${t}' stream ${r} received error:`,C);const k=C.status;let O=function(y){const b=Gt[y];if(b!==void 0)return lf(b)}(k),I=C.message;O===void 0&&(O=L.INTERNAL,I="Unknown error status: "+k+" with message "+C.message),g=!0,E.po(new W(O,I)),_.close()}else G(ue,`RPC '${t}' stream ${r} received:`,S),E.yo(S)}}),p(l,Oh.STAT_EVENT,w=>{w.stat===ya.PROXY?G(ue,`RPC '${t}' stream ${r} detected buffering proxy`):w.stat===ya.NOPROXY&&G(ue,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{E.fo()},0),E}}function Jo(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(i){return new Lg(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(t,e,n=1e3,r=1.5,s=6e4){this.oi=t,this.timerId=e,this.No=n,this.Lo=r,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const e=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),r=Math.max(0,e-n);r>0&&G("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(t,e,n,r,s,o,l,u){this.oi=t,this.Go=n,this.zo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Tf(t,e)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,e){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():e&&e.code===L.RESOURCE_EXHAUSTED?(Tn(e.toString()),Tn("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):e&&e.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(e)}__(){}auth(){this.state=1;const t=this.a_(this.jo),e=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,r])=>{this.jo===e&&this.u_(n,r)},n=>{t(()=>{const r=new W(L.UNKNOWN,"Fetching auth token failed: "+n.message);return this.c_(r)})})}u_(t,e){const n=this.a_(this.jo);this.stream=this.l_(t,e),this.stream.Po(()=>{n(()=>this.listener.Po())}),this.stream.To(()=>{n(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{n(()=>this.c_(r))}),this.stream.onMessage(r=>{n(()=>this.onMessage(r))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return G("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return e=>{this.oi.enqueueAndForget(()=>this.jo===t?e():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Sy extends Ef{constructor(t,e,n,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,o),this.serializer=s}l_(t,e){return this.connection.Oo("Listen",t,e)}onMessage(t){this.Yo.reset();const e=Bg(this.serializer,t),n=function(s){if(!("targetChange"in s))return at.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?at.min():o.readTime?ln(o.readTime):at.min()}(t);return this.listener.h_(e,n)}P_(t){const e={};e.database=Pa(this.serializer),e.addTarget=function(s,o){let l;const u=o.target;if(l=wa(u)?{documents:qg(s,u)}:{query:Gg(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=hf(s,o.resumeToken);const c=Aa(s,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(at.min())>0){l.readTime=Xs(s,o.snapshotVersion.toTimestamp());const c=Aa(s,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,t);const n=Kg(this.serializer,t);n&&(e.labels=n),this.i_(e)}I_(t){const e={};e.database=Pa(this.serializer),e.removeTarget=t,this.i_(e)}}class Cy extends Ef{constructor(t,e,n,r,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,e){return this.connection.Oo("Write",t,e)}onMessage(t){if(St(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const e=zg(t.writeResults,t.commitTime),n=ln(t.commitTime);return this.listener.A_(n,e)}return St(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=Pa(this.serializer),this.i_(t)}d_(t){const e={streamToken:this.lastStreamToken,writes:t.map(n=>jg(this.serializer,n))};this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy extends class{}{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new W(L.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,e,n,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,ba(e,n),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(L.UNKNOWN,s.toString())})}xo(t,e,n,r,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.xo(t,ba(e,n),r,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(L.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class Vy{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Tn(e),this.y_=!1):G("OnlineStateTracker",e)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(t,e,n,r,s){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{n.enqueueAndForget(async()=>{gr(this)&&(G("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=lt(u);c.M_.add(4),await ss(c),c.N_.set("Unknown"),c.M_.delete(4),await To(c)}(this))})}),this.N_=new Vy(n,r)}}async function To(i){if(gr(i))for(const t of i.x_)await t(!0)}async function ss(i){for(const t of i.x_)await t(!1)}function wf(i,t){const e=lt(i);e.F_.has(t.targetId)||(e.F_.set(t.targetId,t),ml(e)?_l(e):ei(e).Xo()&&dl(e,t))}function fl(i,t){const e=lt(i),n=ei(e);e.F_.delete(t),n.Xo()&&If(e,t),e.F_.size===0&&(n.Xo()?n.n_():gr(e)&&e.N_.set("Unknown"))}function dl(i,t){if(i.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(at.min())>0){const e=i.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}ei(i).P_(t)}function If(i,t){i.L_.xe(t),ei(i).I_(t)}function _l(i){i.L_=new Og({getRemoteKeysForTarget:t=>i.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>i.F_.get(t)||null,tt:()=>i.datastore.serializer.databaseId}),ei(i).start(),i.N_.w_()}function ml(i){return gr(i)&&!ei(i).Zo()&&i.F_.size>0}function gr(i){return lt(i).M_.size===0}function Af(i){i.L_=void 0}async function xy(i){i.N_.set("Online")}async function Oy(i){i.F_.forEach((t,e)=>{dl(i,t)})}async function Ny(i,t){Af(i),ml(i)?(i.N_.D_(t),_l(i)):i.N_.set("Unknown")}async function My(i,t,e){if(i.N_.set("Online"),t instanceof cf&&t.state===2&&t.cause)try{await async function(r,s){const o=s.cause;for(const l of s.targetIds)r.F_.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.F_.delete(l),r.L_.removeTarget(l))}(i,t)}catch(n){G("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Ys(i,n)}else if(t instanceof Ns?i.L_.Ke(t):t instanceof uf?i.L_.He(t):i.L_.We(t),!e.isEqual(at.min()))try{const n=await vf(i.localStore);e.compareTo(n)>=0&&await function(s,o){const l=s.L_.rt(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.F_.get(c);h&&s.F_.set(c,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const h=s.F_.get(u);if(!h)return;s.F_.set(u,h.withResumeToken(me.EMPTY_BYTE_STRING,h.snapshotVersion)),If(s,u);const _=new Dn(h.target,u,c,h.sequenceNumber);dl(s,_)}),s.remoteSyncer.applyRemoteEvent(l)}(i,e)}catch(n){G("RemoteStore","Failed to raise snapshot:",n),await Ys(i,n)}}async function Ys(i,t,e){if(!ns(t))throw t;i.M_.add(1),await ss(i),i.N_.set("Offline"),e||(e=()=>vf(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{G("RemoteStore","Retrying IndexedDB access"),await e(),i.M_.delete(1),await To(i)})}function bf(i,t){return t().catch(e=>Ys(i,e,t))}async function Eo(i){const t=lt(i),e=Bn(t);let n=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;Fy(t);)try{const r=await Ty(t.localStore,n);if(r===null){t.v_.length===0&&e.n_();break}n=r.batchId,Ly(t,r)}catch(r){await Ys(t,r)}Rf(t)&&Pf(t)}function Fy(i){return gr(i)&&i.v_.length<10}function Ly(i,t){i.v_.push(t);const e=Bn(i);e.Xo()&&e.E_&&e.d_(t.mutations)}function Rf(i){return gr(i)&&!Bn(i).Zo()&&i.v_.length>0}function Pf(i){Bn(i).start()}async function $y(i){Bn(i).V_()}async function Uy(i){const t=Bn(i);for(const e of i.v_)t.d_(e.mutations)}async function By(i,t,e){const n=i.v_.shift(),r=ol.from(n,t,e);await bf(i,()=>i.remoteSyncer.applySuccessfulWrite(r)),await Eo(i)}async function jy(i,t){t&&Bn(i).E_&&await async function(n,r){if(function(o){return Vg(o)&&o!==L.ABORTED}(r.code)){const s=n.v_.shift();Bn(n).t_(),await bf(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Eo(n)}}(i,t),Rf(i)&&Pf(i)}async function Oc(i,t){const e=lt(i);e.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");const n=gr(e);e.M_.add(3),await ss(e),n&&e.N_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.M_.delete(3),await To(e)}async function zy(i,t){const e=lt(i);t?(e.M_.delete(2),await To(e)):t||(e.M_.add(2),await ss(e),e.N_.set("Unknown"))}function ei(i){return i.B_||(i.B_=function(e,n,r){const s=lt(e);return s.f_(),new Sy(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{Po:xy.bind(null,i),To:Oy.bind(null,i),Ao:Ny.bind(null,i),h_:My.bind(null,i)}),i.x_.push(async t=>{t?(i.B_.t_(),ml(i)?_l(i):i.N_.set("Unknown")):(await i.B_.stop(),Af(i))})),i.B_}function Bn(i){return i.k_||(i.k_=function(e,n,r){const s=lt(e);return s.f_(),new Cy(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{Po:()=>Promise.resolve(),To:$y.bind(null,i),Ao:jy.bind(null,i),R_:Uy.bind(null,i),A_:By.bind(null,i)}),i.x_.push(async t=>{t?(i.k_.t_(),await Eo(i)):(await i.k_.stop(),i.v_.length>0&&(G("RemoteStore",`Stopping write stream with ${i.v_.length} pending writes`),i.v_=[]))})),i.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(t,e,n,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new vn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,r,s){const o=Date.now()+n,l=new pl(t,e,o,r,s);return l.start(n),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(L.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function gl(i,t){if(Tn("AsyncQueue",`${t}: ${i}`),ns(i))return new W(L.UNAVAILABLE,`${t}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(t){this.comparator=t?(e,n)=>t(e,n)||Z.comparator(e.key,n.key):(e,n)=>Z.comparator(e.key,n.key),this.keyedMap=Ti(),this.sortedSet=new Mt(this.comparator)}static emptySet(t){return new xr(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,n)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof xr)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=n.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const n=new xr;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(){this.q_=new Mt(Z.comparator)}track(t){const e=t.doc.key,n=this.q_.get(e);n?t.type!==0&&n.type===3?this.q_=this.q_.insert(e,t):t.type===3&&n.type!==1?this.q_=this.q_.insert(e,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.q_=this.q_.insert(e,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.q_=this.q_.remove(e):t.type===1&&n.type===2?this.q_=this.q_.insert(e,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):st():this.q_=this.q_.insert(e,t)}Q_(){const t=[];return this.q_.inorderTraversal((e,n)=>{t.push(n)}),t}}class zr{constructor(t,e,n,r,s,o,l,u,c){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(t,e,n,r,s){const o=[];return e.forEach(l=>{o.push({type:0,doc:l})}),new zr(t,e,xr.emptySet(e),o,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&_o(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class Gy{constructor(){this.queries=new ti(t=>Wh(t),_o),this.onlineState="Unknown",this.z_=new Set}}async function yl(i,t){const e=lt(i);let n=3;const r=t.query;let s=e.queries.get(r);s?!s.W_()&&t.G_()&&(n=2):(s=new qy,n=t.G_()?0:1);try{switch(n){case 0:s.K_=await e.onListen(r,!0);break;case 1:s.K_=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(o){const l=gl(o,`Initialization of query '${Pr(t.query)}' failed`);return void t.onError(l)}e.queries.set(r,s),s.U_.push(t),t.j_(e.onlineState),s.K_&&t.H_(s.K_)&&Tl(e)}async function vl(i,t){const e=lt(i),n=t.query;let r=3;const s=e.queries.get(n);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?r=t.G_()?0:1:!s.W_()&&t.G_()&&(r=2))}switch(r){case 0:return e.queries.delete(n),e.onUnlisten(n,!0);case 1:return e.queries.delete(n),e.onUnlisten(n,!1);case 2:return e.onLastRemoteStoreUnlisten(n);default:return}}function Hy(i,t){const e=lt(i);let n=!1;for(const r of t){const s=r.query,o=e.queries.get(s);if(o){for(const l of o.U_)l.H_(r)&&(n=!0);o.K_=r}}n&&Tl(e)}function Ky(i,t,e){const n=lt(i),r=n.queries.get(t);if(r)for(const s of r.U_)s.onError(e);n.queries.delete(t)}function Tl(i){i.z_.forEach(t=>{t.next()})}var Ca,Mc;(Mc=Ca||(Ca={})).J_="default",Mc.Cache="cache";class El{constructor(t,e,n){this.query=t,this.Y_=e,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(t){if(!this.options.includeMetadataChanges){const n=[];for(const r of t.docChanges)r.type!==3&&n.push(r);t=new zr(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),e=!0):this.ta(t,this.onlineState)&&(this.na(t),e=!0),this.X_=t,e}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let e=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),e=!0),e}ta(t,e){if(!t.fromCache||!this.G_())return!0;const n=e!=="Offline";return(!this.options.ra||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const e=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}na(t){t=zr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==Ca.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(t){this.key=t}}class Cf{constructor(t){this.key=t}}class Wy{constructor(t,e){this.query=t,this.la=e,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=_t(),this.mutatedKeys=_t(),this.Ia=Qh(t),this.Ta=new xr(this.Ia)}get Ea(){return this.la}da(t,e){const n=e?e.Aa:new Nc,r=e?e.Ta:this.Ta;let s=e?e.mutatedKeys:this.mutatedKeys,o=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((h,_)=>{const m=r.get(h),g=mo(this.query,_)?_:null,E=!!m&&this.mutatedKeys.has(m.key),p=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let w=!1;m&&g?m.data.isEqual(g.data)?E!==p&&(n.track({type:3,doc:g}),w=!0):this.Ra(m,g)||(n.track({type:2,doc:g}),w=!0,(u&&this.Ia(g,u)>0||c&&this.Ia(g,c)<0)&&(l=!0)):!m&&g?(n.track({type:0,doc:g}),w=!0):m&&!g&&(n.track({type:1,doc:m}),w=!0,(u||c)&&(l=!0)),w&&(g?(o=o.add(g),s=p?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),n.track({type:1,doc:h})}return{Ta:o,Aa:n,Xi:l,mutatedKeys:s}}Ra(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,r){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((h,_)=>function(g,E){const p=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return p(g)-p(E)}(h.type,_.type)||this.Ia(h.doc,_.doc)),this.Va(n),r=r!=null&&r;const l=e&&!r?this.ma():[],u=this.Pa.size===0&&this.current&&!r?1:0,c=u!==this.ha;return this.ha=u,o.length!==0||c?{snapshot:new zr(this.query,t.Ta,s,o,t.mutatedKeys,u===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:l}:{fa:l}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Nc,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(e=>this.la=this.la.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.la=this.la.delete(e)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=_t(),this.Ta.forEach(n=>{this.ga(n.key)&&(this.Pa=this.Pa.add(n.key))});const e=[];return t.forEach(n=>{this.Pa.has(n)||e.push(new Cf(n))}),this.Pa.forEach(n=>{t.has(n)||e.push(new Sf(n))}),e}pa(t){this.la=t.hs,this.Pa=_t();const e=this.da(t.documents);return this.applyChanges(e,!0)}ya(){return zr.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class Qy{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class Xy{constructor(t){this.key=t,this.wa=!1}}class Yy{constructor(t,e,n,r,s,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new ti(l=>Wh(l),_o),this.Da=new Map,this.Ca=new Set,this.va=new Mt(Z.comparator),this.Fa=new Map,this.Ma=new ul,this.xa={},this.Oa=new Map,this.Na=jr.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function Jy(i,t,e=!0){const n=Nf(i);let r;const s=n.ba.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ya()):r=await Df(n,t,e,!0),r}async function Zy(i,t){const e=Nf(i);await Df(e,t,!0,!1)}async function Df(i,t,e,n){const r=await Ey(i.localStore,an(t)),s=r.targetId,o=e?i.sharedClientState.addLocalQueryTarget(s):"not-current";let l;return n&&(l=await t0(i,t,s,o==="current",r.resumeToken)),i.isPrimaryClient&&e&&wf(i.remoteStore,r),l}async function t0(i,t,e,n,r){i.Ba=(_,m,g)=>async function(p,w,V,S){let D=w.view.da(V);D.Xi&&(D=await Vc(p.localStore,w.query,!1).then(({documents:I})=>w.view.da(I,D)));const C=S&&S.targetChanges.get(w.targetId),k=S&&S.targetMismatches.get(w.targetId)!=null,O=w.view.applyChanges(D,p.isPrimaryClient,C,k);return Lc(p,w.targetId,O.fa),O.snapshot}(i,_,m,g);const s=await Vc(i.localStore,t,!0),o=new Wy(t,s.hs),l=o.da(s.documents),u=is.createSynthesizedTargetChangeForCurrentChange(e,n&&i.onlineState!=="Offline",r),c=o.applyChanges(l,i.isPrimaryClient,u);Lc(i,e,c.fa);const h=new Qy(t,e,o);return i.ba.set(t,h),i.Da.has(e)?i.Da.get(e).push(t):i.Da.set(e,[t]),c.snapshot}async function e0(i,t,e){const n=lt(i),r=n.ba.get(t),s=n.Da.get(r.targetId);if(s.length>1)return n.Da.set(r.targetId,s.filter(o=>!_o(o,t))),void n.ba.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Sa(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),e&&fl(n.remoteStore,r.targetId),Da(n,r.targetId)}).catch(es)):(Da(n,r.targetId),await Sa(n.localStore,r.targetId,!0))}async function n0(i,t){const e=lt(i),n=e.ba.get(t),r=e.Da.get(n.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(n.targetId),fl(e.remoteStore,n.targetId))}async function r0(i,t,e){const n=c0(i);try{const r=await function(o,l){const u=lt(o),c=Xt.now(),h=l.reduce((g,E)=>g.add(E.key),_t());let _,m;return u.persistence.runTransaction("Locally write mutations","readwrite",g=>{let E=En(),p=_t();return u.os.getEntries(g,h).next(w=>{E=w,E.forEach((V,S)=>{S.isValidDocument()||(p=p.add(V))})}).next(()=>u.localDocuments.getOverlayedDocuments(g,E)).next(w=>{_=w;const V=[];for(const S of l){const D=Rg(S,_.get(S.key).overlayedDocument);D!=null&&V.push(new Gn(S.key,D,Bh(D.value.mapValue),Ne.exists(!0)))}return u.mutationQueue.addMutationBatch(g,c,V,l)}).next(w=>{m=w;const V=w.applyToLocalDocumentSet(_,p);return u.documentOverlayCache.saveOverlays(g,w.batchId,V)})}).then(()=>({batchId:m.batchId,changes:Yh(_)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(r.batchId),function(o,l,u){let c=o.xa[o.currentUser.toKey()];c||(c=new Mt(Tt)),c=c.insert(l,u),o.xa[o.currentUser.toKey()]=c}(n,r.batchId,e),await os(n,r.changes),await Eo(n.remoteStore)}catch(r){const s=gl(r,"Failed to persist write");e.reject(s)}}async function Vf(i,t){const e=lt(i);try{const n=await yy(e.localStore,t);t.targetChanges.forEach((r,s)=>{const o=e.Fa.get(s);o&&(St(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.wa=!0:r.modifiedDocuments.size>0?St(o.wa):r.removedDocuments.size>0&&(St(o.wa),o.wa=!1))}),await os(e,n,t)}catch(n){await es(n)}}function Fc(i,t,e){const n=lt(i);if(n.isPrimaryClient&&e===0||!n.isPrimaryClient&&e===1){const r=[];n.ba.forEach((s,o)=>{const l=o.view.j_(t);l.snapshot&&r.push(l.snapshot)}),function(o,l){const u=lt(o);u.onlineState=l;let c=!1;u.queries.forEach((h,_)=>{for(const m of _.U_)m.j_(l)&&(c=!0)}),c&&Tl(u)}(n.eventManager,t),r.length&&n.Sa.h_(r),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function i0(i,t,e){const n=lt(i);n.sharedClientState.updateQueryState(t,"rejected",e);const r=n.Fa.get(t),s=r&&r.key;if(s){let o=new Mt(Z.comparator);o=o.insert(s,he.newNoDocument(s,at.min()));const l=_t().add(s),u=new yo(at.min(),new Map,new Mt(Tt),o,l);await Vf(n,u),n.va=n.va.remove(s),n.Fa.delete(t),wl(n)}else await Sa(n.localStore,t,!1).then(()=>Da(n,t,e)).catch(es)}async function s0(i,t){const e=lt(i),n=t.batch.batchId;try{const r=await gy(e.localStore,t);xf(e,n,null),kf(e,n),e.sharedClientState.updateMutationState(n,"acknowledged"),await os(e,r)}catch(r){await es(r)}}async function o0(i,t,e){const n=lt(i);try{const r=await function(o,l){const u=lt(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,l).next(_=>(St(_!==null),h=_.keys(),u.mutationQueue.removeMutationBatch(c,_))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(n.localStore,t);xf(n,t,e),kf(n,t),n.sharedClientState.updateMutationState(t,"rejected",e),await os(n,r)}catch(r){await es(r)}}function kf(i,t){(i.Oa.get(t)||[]).forEach(e=>{e.resolve()}),i.Oa.delete(t)}function xf(i,t,e){const n=lt(i);let r=n.xa[n.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),n.xa[n.currentUser.toKey()]=r}}function Da(i,t,e=null){i.sharedClientState.removeLocalQueryTarget(t);for(const n of i.Da.get(t))i.ba.delete(n),e&&i.Sa.ka(n,e);i.Da.delete(t),i.isPrimaryClient&&i.Ma.Vr(t).forEach(n=>{i.Ma.containsKey(n)||Of(i,n)})}function Of(i,t){i.Ca.delete(t.path.canonicalString());const e=i.va.get(t);e!==null&&(fl(i.remoteStore,e),i.va=i.va.remove(t),i.Fa.delete(e),wl(i))}function Lc(i,t,e){for(const n of e)n instanceof Sf?(i.Ma.addReference(n.key,t),a0(i,n)):n instanceof Cf?(G("SyncEngine","Document no longer in limbo: "+n.key),i.Ma.removeReference(n.key,t),i.Ma.containsKey(n.key)||Of(i,n.key)):st()}function a0(i,t){const e=t.key,n=e.path.canonicalString();i.va.get(e)||i.Ca.has(n)||(G("SyncEngine","New document in limbo: "+e),i.Ca.add(n),wl(i))}function wl(i){for(;i.Ca.size>0&&i.va.size<i.maxConcurrentLimboResolutions;){const t=i.Ca.values().next().value;i.Ca.delete(t);const e=new Z(Vt.fromString(t)),n=i.Na.next();i.Fa.set(n,new Xy(e)),i.va=i.va.insert(e,n),wf(i.remoteStore,new Dn(an(fo(e.path)),n,"TargetPurposeLimboResolution",Za.oe))}}async function os(i,t,e){const n=lt(i),r=[],s=[],o=[];n.ba.isEmpty()||(n.ba.forEach((l,u)=>{o.push(n.Ba(u,t,e).then(c=>{if((c||e)&&n.isPrimaryClient){const h=c&&!c.fromCache;n.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(c){r.push(c);const h=hl.Ki(u.targetId,c);s.push(h)}}))}),await Promise.all(o),n.Sa.h_(r),await async function(u,c){const h=lt(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>$.forEach(c,m=>$.forEach(m.qi,g=>h.persistence.referenceDelegate.addReference(_,m.targetId,g)).next(()=>$.forEach(m.Qi,g=>h.persistence.referenceDelegate.removeReference(_,m.targetId,g)))))}catch(_){if(!ns(_))throw _;G("LocalStore","Failed to update sequence numbers: "+_)}for(const _ of c){const m=_.targetId;if(!_.fromCache){const g=h.ns.get(m),E=g.snapshotVersion,p=g.withLastLimboFreeSnapshotVersion(E);h.ns=h.ns.insert(m,p)}}}(n.localStore,s))}async function l0(i,t){const e=lt(i);if(!e.currentUser.isEqual(t)){G("SyncEngine","User change. New user:",t.toKey());const n=await yf(e.localStore,t);e.currentUser=t,function(s,o){s.Oa.forEach(l=>{l.forEach(u=>{u.reject(new W(L.CANCELLED,o))})}),s.Oa.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await os(e,n.us)}}function u0(i,t){const e=lt(i),n=e.Fa.get(t);if(n&&n.wa)return _t().add(n.key);{let r=_t();const s=e.Da.get(t);if(!s)return r;for(const o of s){const l=e.ba.get(o);r=r.unionWith(l.view.Ea)}return r}}function Nf(i){const t=lt(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=Vf.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=u0.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=i0.bind(null,t),t.Sa.h_=Hy.bind(null,t.eventManager),t.Sa.ka=Ky.bind(null,t.eventManager),t}function c0(i){const t=lt(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=s0.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=o0.bind(null,t),t}class $c{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=vo(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return py(this.persistence,new _y,t.initialUser,this.serializer)}createPersistence(t){return new hy(cl.Hr,this.serializer)}createSharedClientState(t){return new Iy}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class h0{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Fc(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=l0.bind(null,this.syncEngine),await zy(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Gy}()}createDatastore(t){const e=vo(t.databaseInfo.databaseId),n=function(s){return new Py(s)}(t.databaseInfo);return function(s,o,l,u){return new Dy(s,o,l,u)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(n,r,s,o,l){return new ky(n,r,s,o,l)}(this.localStore,this.datastore,t.asyncQueue,e=>Fc(this.syncEngine,e,0),function(){return xc.D()?new xc:new Ay}())}createSyncEngine(t,e){return function(r,s,o,l,u,c,h){const _=new Yy(r,s,o,l,u,c);return h&&(_.La=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t;await async function(n){const r=lt(n);G("RemoteStore","RemoteStore shutting down."),r.M_.add(5),await ss(r),r.O_.shutdown(),r.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Tn("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(t,e,n,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=ce.UNAUTHENTICATED,this.clientId=Lh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async s=>{G("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(n,s=>(G("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new W(L.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new vn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=gl(e,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function Zo(i,t){i.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");const e=i.configuration;await t.initialize(e);let n=e.initialUser;i.setCredentialChangeListener(async r=>{n.isEqual(r)||(await yf(t.localStore,r),n=r)}),t.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=t}async function Uc(i,t){i.asyncQueue.verifyOperationInProgress();const e=await _0(i);G("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(e,i.configuration),i.setCredentialChangeListener(n=>Oc(t.remoteStore,n)),i.setAppCheckTokenChangeListener((n,r)=>Oc(t.remoteStore,r)),i._onlineComponents=t}function d0(i){return i.name==="FirebaseError"?i.code===L.FAILED_PRECONDITION||i.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}async function _0(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{await Zo(i,i._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!d0(e))throw e;Lr("Error using user provided cache. Falling back to memory cache: "+e),await Zo(i,new $c)}}else G("FirestoreClient","Using default OfflineComponentProvider"),await Zo(i,new $c);return i._offlineComponents}async function Mf(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),await Uc(i,i._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),await Uc(i,new h0))),i._onlineComponents}function m0(i){return Mf(i).then(t=>t.syncEngine)}async function Js(i){const t=await Mf(i),e=t.eventManager;return e.onListen=Jy.bind(null,t.syncEngine),e.onUnlisten=e0.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=Zy.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=n0.bind(null,t.syncEngine),e}function p0(i,t,e={}){const n=new vn;return i.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const h=new Il({next:m=>{o.enqueueAndForget(()=>vl(s,_));const g=m.docs.has(l);!g&&m.fromCache?c.reject(new W(L.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&u&&u.source==="server"?c.reject(new W(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),_=new El(fo(l.path),h,{includeMetadataChanges:!0,ra:!0});return yl(s,_)}(await Js(i),i.asyncQueue,t,e,n)),n.promise}function g0(i,t,e={}){const n=new vn;return i.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const h=new Il({next:m=>{o.enqueueAndForget(()=>vl(s,_)),m.fromCache&&u.source==="server"?c.reject(new W(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),_=new El(l,h,{includeMetadataChanges:!0,ra:!0});return yl(s,_)}(await Js(i),i.asyncQueue,t,e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(i){const t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bc=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(i,t,e){if(!e)throw new W(L.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function y0(i,t,e,n){if(t===!0&&n===!0)throw new W(L.INVALID_ARGUMENT,`${i} and ${e} cannot be used together.`)}function jc(i){if(!Z.isDocumentKey(i))throw new W(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function zc(i){if(Z.isDocumentKey(i))throw new W(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Al(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":st()}function Me(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new W(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Al(i);throw new W(L.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(t){var e,n;if(t.host===void 0){if(t.ssl!==void 0)throw new W(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new W(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}y0("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ff((n=t.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new W(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new W(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new W(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,r){return n.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class wo{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new W(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new W(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qc(t),t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Np;switch(n.type){case"firstParty":return new $p(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new W(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Bc.get(e);n&&(G("ComponentProvider","Removing Datastore"),Bc.delete(e),n.terminate())}(this),Promise.resolve()}}function v0(i,t,e,n={}){var r;const s=(i=Me(i,wo))._getSettings(),o=`${t}:${e}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Lr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),n.mockUserToken){let l,u;if(typeof n.mockUserToken=="string")l=n.mockUserToken,u=ce.MOCK_USER;else{l=gm(n.mockUserToken,(r=i._app)===null||r===void 0?void 0:r.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new W(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ce(c)}i._authCredentials=new Mp(new Fh(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new as(this.firestore,t,this._query)}}class ye{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Mn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ye(this.firestore,t,this._key)}}class Mn extends as{constructor(t,e,n){super(t,e,fo(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ye(this.firestore,null,new Z(t))}withConverter(t){return new Mn(this.firestore,t,this._path)}}function qr(i,t,...e){if(i=We(i),Lf("collection","path",t),i instanceof wo){const n=Vt.fromString(t,...e);return zc(n),new Mn(i,null,n)}{if(!(i instanceof ye||i instanceof Mn))throw new W(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Vt.fromString(t,...e));return zc(n),new Mn(i.firestore,null,n)}}function Va(i,t,...e){if(i=We(i),arguments.length===1&&(t=Lh.newId()),Lf("doc","path",t),i instanceof wo){const n=Vt.fromString(t,...e);return jc(n),new ye(i,null,new Z(n))}{if(!(i instanceof ye||i instanceof Mn))throw new W(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Vt.fromString(t,...e));return jc(n),new ye(i.firestore,i instanceof Mn?i.converter:null,new Z(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Tf(this,"async_queue_retry"),this.hu=()=>{const e=Jo();e&&G("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};const t=Jo();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const e=Jo();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const e=new vn;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!ns(t))throw t;G("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const e=this.iu.then(()=>(this.uu=!0,t().catch(n=>{this.au=n,this.uu=!1;const r=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(n);throw Tn("INTERNAL UNHANDLED ERROR: ",r),n}).then(n=>(this.uu=!1,n))));return this.iu=e,e}enqueueAfterDelay(t,e,n){this.Pu(),this.lu.indexOf(t)>-1&&(e=0);const r=pl.createAndSchedule(this,t,e,n,s=>this.Eu(s));return this._u.push(r),r}Pu(){this.au&&st()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const e of this._u)if(e.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((e,n)=>e.targetTimeMs-n.targetTimeMs);for(const e of this._u)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const e=this._u.indexOf(t);this._u.splice(e,1)}}function Gc(i){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const s of n)if(s in r&&typeof r[s]=="function")return!0;return!1}(i,["next","error","complete"])}class jn extends wo{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=function(){return new T0}(),this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||$f(this),this._firestoreClient.terminate()}}function E0(i,t){const e=typeof i=="object"?i:bp(),n=typeof i=="string"?i:"(default)",r=Ep(e,"firestore").getImmediate({identifier:n});if(!r._initialized){const s=mm("firestore");s&&v0(r,...s)}return r}function ls(i){return i._firestoreClient||$f(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function $f(i){var t,e,n;const r=i._freezeSettings(),s=function(l,u,c,h){return new Jp(l,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Ff(h.experimentalLongPollingOptions),h.useFetchStreams)}(i._databaseId,((t=i._app)===null||t===void 0?void 0:t.options.appId)||"",i._persistenceKey,r);i._firestoreClient=new f0(i._authCredentials,i._appCheckCredentials,i._queue,s),!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((n=r.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Gr(me.fromBase64String(t))}catch(e){throw new W(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Gr(me.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new W(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new re(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new W(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new W(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Tt(this._lat,t._lat)||Tt(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0=/^__.*__$/;class I0{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return this.fieldMask!==null?new Gn(t,this.data,this.fieldMask,e,this.fieldTransforms):new rs(t,this.data,e,this.fieldTransforms)}}class Uf{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new Gn(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function Bf(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class Pl{constructor(t,e,n,r,s,o){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=r,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new Pl(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var e;const n=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.gu({path:n,yu:!1});return r.wu(t),r}Su(t){var e;const n=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return Zs(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(Bf(this.fu)&&w0.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class A0{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||vo(t)}Fu(t,e,n,r=!1){return new Pl({fu:t,methodName:e,vu:n,path:re.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sl(i){const t=i._freezeSettings(),e=vo(i._databaseId);return new A0(i._databaseId,!!t.ignoreUndefinedProperties,e)}function jf(i,t,e,n,r,s={}){const o=i.Fu(s.merge||s.mergeFields?2:0,t,e,r);Cl("Data must be an object, but it was:",o,n);const l=Gf(n,o);let u,c;if(s.merge)u=new xe(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const _ of s.mergeFields){const m=ka(t,_,e);if(!o.contains(m))throw new W(L.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Kf(h,m)||h.push(m)}u=new xe(h),c=o.fieldTransforms.filter(_=>u.covers(_.field))}else u=null,c=o.fieldTransforms;return new I0(new Te(l),u,c)}class Io extends bl{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Io}}function zf(i,t,e,n){const r=i.Fu(1,t,e);Cl("Data must be an object, but it was:",r,n);const s=[],o=Te.empty();pr(n,(u,c)=>{const h=Dl(t,u,e);c=We(c);const _=r.Su(h);if(c instanceof Io)s.push(h);else{const m=Ao(c,_);m!=null&&(s.push(h),o.set(h,m))}});const l=new xe(s);return new Uf(o,l,r.fieldTransforms)}function qf(i,t,e,n,r,s){const o=i.Fu(1,t,e),l=[ka(t,n,e)],u=[r];if(s.length%2!=0)throw new W(L.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)l.push(ka(t,s[m])),u.push(s[m+1]);const c=[],h=Te.empty();for(let m=l.length-1;m>=0;--m)if(!Kf(c,l[m])){const g=l[m];let E=u[m];E=We(E);const p=o.Su(g);if(E instanceof Io)c.push(g);else{const w=Ao(E,p);w!=null&&(c.push(g),h.set(g,w))}}const _=new xe(c);return new Uf(h,_,o.fieldTransforms)}function Ao(i,t){if(Hf(i=We(i)))return Cl("Unsupported field value:",t,i),Gf(i,t);if(i instanceof bl)return function(n,r){if(!Bf(r.fu))throw r.Du(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(n,r){const s=[];let o=0;for(const l of n){let u=Ao(l,r.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(i,t)}return function(n,r){if((n=We(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Tg(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Xt.fromDate(n);return{timestampValue:Xs(r.serializer,s)}}if(n instanceof Xt){const s=new Xt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Xs(r.serializer,s)}}if(n instanceof Rl)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Gr)return{bytesValue:hf(r.serializer,n._byteString)};if(n instanceof ye){const s=r.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw r.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ll(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Du(`Unsupported field value: ${Al(n)}`)}(i,t)}function Gf(i,t){const e={};return $h(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):pr(i,(n,r)=>{const s=Ao(r,t.pu(n));s!=null&&(e[n]=s)}),{mapValue:{fields:e}}}function Hf(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Xt||i instanceof Rl||i instanceof Gr||i instanceof ye||i instanceof bl)}function Cl(i,t,e){if(!Hf(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){const n=Al(e);throw n==="an object"?t.Du(i+" a custom object"):t.Du(i+" "+n)}}function ka(i,t,e){if((t=We(t))instanceof us)return t._internalPath;if(typeof t=="string")return Dl(i,t);throw Zs("Field path arguments must be of type string or ",i,!1,void 0,e)}const b0=new RegExp("[~\\*/\\[\\]]");function Dl(i,t,e){if(t.search(b0)>=0)throw Zs(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,e);try{return new us(...t.split("."))._internalPath}catch{throw Zs(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,e)}}function Zs(i,t,e,n,r){const s=n&&!n.isEmpty(),o=r!==void 0;let l=`Function ${t}() called with invalid data`;e&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${n}`),o&&(u+=` in document ${r}`),u+=")"),new W(L.INVALID_ARGUMENT,l+i+u)}function Kf(i,t){return i.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(t,e,n,r,s){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ye(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new R0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Qf("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class R0 extends Wf{data(){return super.data()}}function Qf(i,t){return typeof t=="string"?Dl(i,t):t instanceof us?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new W(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class P0{convertValue(t,e="none"){switch(dr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ht(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(fr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw st()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return pr(t,(r,s)=>{n[r]=this.convertValue(s,e)}),n}convertGeoPoint(t){return new Rl(Ht(t.latitude),Ht(t.longitude))}convertArray(t,e){return(t.values||[]).map(n=>this.convertValue(n,e))}convertServerTimestamp(t,e){switch(e){case"previous":const n=el(t);return n==null?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Li(t));default:return null}}convertTimestamp(t){const e=Un(t);return new Xt(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=Vt.fromString(t);St(gf(n));const r=new $i(n.get(1),n.get(3)),s=new Z(n.popFirst(5));return r.isEqual(e)||Tn(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(i,t,e){let n;return n=i?e&&(e.merge||e.mergeFields)?i.toFirestore(t,e):i.toFirestore(t):t,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Jf extends Wf{constructor(t,e,n,r,s,o){super(t,e,n,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Ms(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Qf("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class Ms extends Jf{data(t={}){return super.data(t)}}class Zf{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new wi(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(n=>{t.call(e,new Ms(this._firestore,this._userDataWriter,n.key,n,new wi(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new W(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>{const u=new Ms(r._firestore,r._userDataWriter,l.doc.key,l.doc,new wi(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Ms(r._firestore,r._userDataWriter,l.doc.key,l.doc,new wi(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:S0(l.type),doc:u,oldIndex:c,newIndex:h}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function S0(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(i){i=Me(i,ye);const t=Me(i.firestore,jn);return p0(ls(t),i._key).then(e=>ed(t,i,e))}class Vl extends P0{constructor(t){super(),this.firestore=t}convertBytes(t){return new Gr(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new ye(this.firestore,null,e)}}function to(i){i=Me(i,as);const t=Me(i.firestore,jn),e=ls(t),n=new Vl(t);return Xf(i._query),g0(e,i._query).then(r=>new Zf(t,n,i,r))}function D0(i,t,e){i=Me(i,ye);const n=Me(i.firestore,jn),r=Yf(i.converter,t,e);return kl(n,[jf(Sl(n),"setDoc",i._key,r,i.converter!==null,e).toMutation(i._key,Ne.none())])}function td(i,t,e,...n){i=Me(i,ye);const r=Me(i.firestore,jn),s=Sl(r);let o;return o=typeof(t=We(t))=="string"||t instanceof us?qf(s,"updateDoc",i._key,t,e,n):zf(s,"updateDoc",i._key,t),kl(r,[o.toMutation(i._key,Ne.exists(!0))])}function xa(i,...t){var e,n,r;i=We(i);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||Gc(t[o])||(s=t[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Gc(t[o])){const _=t[o];t[o]=(e=_.next)===null||e===void 0?void 0:e.bind(_),t[o+1]=(n=_.error)===null||n===void 0?void 0:n.bind(_),t[o+2]=(r=_.complete)===null||r===void 0?void 0:r.bind(_)}let u,c,h;if(i instanceof ye)c=Me(i.firestore,jn),h=fo(i._key.path),u={next:_=>{t[o]&&t[o](ed(c,i,_))},error:t[o+1],complete:t[o+2]};else{const _=Me(i,as);c=Me(_.firestore,jn),h=_._query;const m=new Vl(c);u={next:g=>{t[o]&&t[o](new Zf(c,m,_,g))},error:t[o+1],complete:t[o+2]},Xf(i._query)}return function(m,g,E,p){const w=new Il(p),V=new El(g,w,E);return m.asyncQueue.enqueueAndForget(async()=>yl(await Js(m),V)),()=>{w.$a(),m.asyncQueue.enqueueAndForget(async()=>vl(await Js(m),V))}}(ls(c),h,l,u)}function kl(i,t){return function(n,r){const s=new vn;return n.asyncQueue.enqueueAndForget(async()=>r0(await m0(n),r,s)),s.promise}(ls(i),t)}function ed(i,t,e){const n=e.docs.get(t._key),r=new Vl(i);return new Jf(i,r,t._key,n,new wi(e.hasPendingWrites,e.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Sl(t)}set(t,e,n){this._verifyNotCommitted();const r=ta(t,this._firestore),s=Yf(r.converter,e,n),o=jf(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,n);return this._mutations.push(o.toMutation(r._key,Ne.none())),this}update(t,e,n,...r){this._verifyNotCommitted();const s=ta(t,this._firestore);let o;return o=typeof(e=We(e))=="string"||e instanceof us?qf(this._dataReader,"WriteBatch.update",s._key,e,n,r):zf(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Ne.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=ta(t,this._firestore);return this._mutations=this._mutations.concat(new sl(e._key,Ne.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new W(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ta(i,t){if((i=We(i)).firestore!==t)throw new W(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(i){return ls(i=Me(i,jn)),new V0(i,t=>kl(i,t))}(function(t,e=!0){(function(r){Zr=r})(Ap),qs(new Ni("firestore",(n,{instanceIdentifier:r,options:s})=>{const o=n.getProvider("app").getImmediate(),l=new jn(new Fp(n.getProvider("auth-internal")),new Bp(n.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new W(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $i(c.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),kr(hc,"4.6.3",t),kr(hc,"4.6.3","esm2017")})();var x0="firebase",O0="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kr(x0,O0,"app");const N0={apiKey:"AIzaSyDrTR0lVaKeBrqIlhJiwst2-KsEwBtE538",authDomain:"bob-game-90e47.firebaseapp.com",projectId:"bob-game-90e47",storageBucket:"bob-game-90e47.appspot.com",messagingSenderId:"880391810715",appId:"1:880391810715:web:f537e6f4c16b7412e7a03e",measurementId:"G-FL5LYSNQ76"},M0=Ph(N0),en=E0(M0);function Hc(i){let t,e,n,r,s;return e=new Ee({props:{$$slots:{default:[F0]},$$scope:{ctx:i}}}),e.$on("click",i[2]),r=new Ee({props:{$$slots:{default:[L0]},$$scope:{ctx:i}}}),r.$on("click",i[3]),{c(){t=z("div"),It(e.$$.fragment),n=tt(),It(r.$$.fragment)},l(o){t=q(o,"DIV",{});var l=Y(t);At(e.$$.fragment,l),n=et(l),At(r.$$.fragment,l),l.forEach(M)},m(o,l){H(o,t,l),bt(e,t,null),F(t,n),bt(r,t,null),s=!0},p(o,l){const u={};l&64&&(u.$$scope={dirty:l,ctx:o}),e.$set(u);const c={};l&64&&(c.$$scope={dirty:l,ctx:o}),r.$set(c)},i(o){s||(J(e.$$.fragment,o),J(r.$$.fragment,o),s=!0)},o(o){it(e.$$.fragment,o),it(r.$$.fragment,o),s=!1},d(o){o&&M(t),Rt(e),Rt(r)}}}function F0(i){let t;return{c(){t=nt("Start")},l(e){t=rt(e,"Start")},m(e,n){H(e,t,n)},d(e){e&&M(t)}}}function L0(i){let t;return{c(){t=nt("Instellingen")},l(e){t=rt(e,"Instellingen")},m(e,n){H(e,t,n)},d(e){e&&M(t)}}}function Kc(i){let t,e,n,r,s,o,l;return e=new Ee({props:{$$slots:{default:[$0]},$$scope:{ctx:i}}}),e.$on("click",i[1]),r=new Ee({props:{$$slots:{default:[U0]},$$scope:{ctx:i}}}),r.$on("click",i[4]),o=new Ee({props:{theme:"red",$$slots:{default:[B0]},$$scope:{ctx:i}}}),o.$on("click",i[5]),{c(){t=z("div"),It(e.$$.fragment),n=tt(),It(r.$$.fragment),s=tt(),It(o.$$.fragment)},l(u){t=q(u,"DIV",{});var c=Y(t);At(e.$$.fragment,c),n=et(c),At(r.$$.fragment,c),s=et(c),At(o.$$.fragment,c),c.forEach(M)},m(u,c){H(u,t,c),bt(e,t,null),F(t,n),bt(r,t,null),F(t,s),bt(o,t,null),l=!0},p(u,c){const h={};c&64&&(h.$$scope={dirty:c,ctx:u}),e.$set(h);const _={};c&64&&(_.$$scope={dirty:c,ctx:u}),r.$set(_);const m={};c&64&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){l||(J(e.$$.fragment,u),J(r.$$.fragment,u),J(o.$$.fragment,u),l=!0)},o(u){it(e.$$.fragment,u),it(r.$$.fragment,u),it(o.$$.fragment,u),l=!1},d(u){u&&M(t),Rt(e),Rt(r),Rt(o)}}}function $0(i){let t;return{c(){t=nt("Reset Schalen")},l(e){t=rt(e,"Reset Schalen")},m(e,n){H(e,t,n)},d(e){e&&M(t)}}}function U0(i){let t;return{c(){t=nt("Upload CSV")},l(e){t=rt(e,"Upload CSV")},m(e,n){H(e,t,n)},d(e){e&&M(t)}}}function B0(i){let t;return{c(){t=nt("Terug")},l(e){t=rt(e,"Terug")},m(e,n){H(e,t,n)},d(e){e&&M(t)}}}function j0(i){let t,e,n,r=!i[0]&&Hc(i),s=i[0]&&Kc(i);return{c(){r&&r.c(),t=tt(),s&&s.c(),e=Re()},l(o){r&&r.l(o),t=et(o),s&&s.l(o),e=Re()},m(o,l){r&&r.m(o,l),H(o,t,l),s&&s.m(o,l),H(o,e,l),n=!0},p(o,l){o[0]?r&&(lr(),it(r,1,1,()=>{r=null}),ur()):r?(r.p(o,l),l&1&&J(r,1)):(r=Hc(o),r.c(),J(r,1),r.m(t.parentNode,t)),o[0]?s?(s.p(o,l),l&1&&J(s,1)):(s=Kc(o),s.c(),J(s,1),s.m(e.parentNode,e)):s&&(lr(),it(s,1,1,()=>{s=null}),ur())},i(o){n||(J(r),J(s),n=!0)},o(o){it(r),it(s),n=!1},d(o){o&&(M(t),M(e)),r&&r.d(o),s&&s.d(o)}}}function z0(i){let t,e;return t=new ts({props:{$$slots:{default:[j0]},$$scope:{ctx:i}}}),{c(){It(t.$$.fragment)},l(n){At(t.$$.fragment,n)},m(n,r){bt(t,n,r),e=!0},p(n,[r]){const s={};r&65&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(J(t.$$.fragment,n),e=!0)},o(n){it(t.$$.fragment,n),e=!1},d(n){Rt(t,n)}}}function q0(i,t,e){let n=!1;return[n,async()=>{const c=qr(en,"stakeholders"),h=await to(c);let _=[];const m=h.docs[0].data().values.length;for(let g=0;g<m;g++)_.push(0);console.log();for(const g of h.docs)await td(g.ref,{values:_});alert("Alle schalen staan weer op 0!")},()=>Ke.set(1),()=>e(0,n=!n),()=>Ke.set(5),()=>e(0,n=!n)]}class G0 extends Qe{constructor(t){super(),Xe(this,t,q0,z0,Ge,{})}}const Wc=Yr([]);function Qc(i,t,e){const n=i.slice();return n[15]=t[e],n[17]=e,n}function Xc(i){let t,e,n=i[2].id+"",r,s,o,l,u='<tr><th class="px-2">Naam</th> <th class="px-2">Schaal</th> <th class="px-2">Geholpen mensen</th> <th class="px-2">Kosten</th> <th class="px-2">Vrijwilligers</th></tr>',c,h,_,m,g,E="Totaal",p,w,V,S,D,C,k,O=i[0].toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"",I,v,y,b,R,P,A,Q,ot,X,ct,j=i[5].toFixed(0)+"",ut,dt,U,ht,vt=i[4].toFixed(0)+"",jt,zt,An,Yt,ni,Ye,ve,bn,Se,se,Je=sn(i[3]),Ut=[];for(let ft=0;ft<Je.length;ft+=1)Ut[ft]=Yc(Qc(i,Je,ft));return ve=new Ee({props:{theme:"red",$$slots:{default:[H0]},$$scope:{ctx:i}}}),ve.$on("click",i[12]),Se=new Ee({props:{$$slots:{default:[K0]},$$scope:{ctx:i}}}),Se.$on("click",i[13]),{c(){t=z("div"),e=z("div"),r=nt(n),s=tt(),o=z("table"),l=z("thead"),l.innerHTML=u,c=tt(),h=z("tbody");for(let ft=0;ft<Ut.length;ft+=1)Ut[ft].c();_=tt(),m=z("tr"),g=z("td"),g.textContent=E,p=tt(),w=z("td"),V=tt(),S=z("td"),D=nt(i[1]),C=tt(),k=z("td"),I=nt(O),v=tt(),y=z("td"),b=nt(i[6]),R=tt(),P=z("tr"),A=z("td"),Q=tt(),ot=z("td"),X=tt(),ct=z("td"),ut=nt(j),dt=nt("% van het doel"),U=tt(),ht=z("td"),jt=nt(vt),zt=nt("% van het budget"),An=tt(),Yt=z("td"),ni=tt(),Ye=z("div"),It(ve.$$.fragment),bn=tt(),It(Se.$$.fragment),this.h()},l(ft){t=q(ft,"DIV",{class:!0});var Ct=Y(t);e=q(Ct,"DIV",{class:!0});var $e=Y(e);r=rt($e,n),$e.forEach(M),s=et(Ct),o=q(Ct,"TABLE",{class:!0});var Ze=Y(o);l=q(Ze,"THEAD",{"data-svelte-h":!0}),cn(l)!=="svelte-1wftw8g"&&(l.innerHTML=u),c=et(Ze),h=q(Ze,"TBODY",{});var xt=Y(h);for(let Er=0;Er<Ut.length;Er+=1)Ut[Er].l(xt);_=et(xt),m=q(xt,"TR",{class:!0});var oe=Y(m);g=q(oe,"TD",{class:!0,"data-svelte-h":!0}),cn(g)!=="svelte-iomj7a"&&(g.textContent=E),p=et(oe),w=q(oe,"TD",{class:!0}),Y(w).forEach(M),V=et(oe),S=q(oe,"TD",{class:!0});var hs=Y(S);D=rt(hs,i[1]),hs.forEach(M),C=et(oe),k=q(oe,"TD",{class:!0});var vr=Y(k);I=rt(vr,O),vr.forEach(M),v=et(oe),y=q(oe,"TD",{class:!0});var Tr=Y(y);b=rt(Tr,i[6]),Tr.forEach(M),oe.forEach(M),R=et(xt),P=q(xt,"TR",{});var Ce=Y(P);A=q(Ce,"TD",{class:!0}),Y(A).forEach(M),Q=et(Ce),ot=q(Ce,"TD",{class:!0}),Y(ot).forEach(M),X=et(Ce),ct=q(Ce,"TD",{class:!0});var qt=Y(ct);ut=rt(qt,j),dt=rt(qt,"% van het doel"),qt.forEach(M),U=et(Ce),ht=q(Ce,"TD",{class:!0});var Wt=Y(ht);jt=rt(Wt,vt),zt=rt(Wt,"% van het budget"),Wt.forEach(M),An=et(Ce),Yt=q(Ce,"TD",{class:!0}),Y(Yt).forEach(M),Ce.forEach(M),xt.forEach(M),Ze.forEach(M),ni=et(Ct),Ye=q(Ct,"DIV",{class:!0});var _n=Y(Ye);At(ve.$$.fragment,_n),bn=et(_n),At(Se.$$.fragment,_n),_n.forEach(M),Ct.forEach(M),this.h()},h(){K(e,"class","font-bold text-2xl mb-4"),K(g,"class","px-2 py-1"),K(w,"class","px-2 py-1"),K(S,"class","px-2 py-1"),K(k,"class","px-2 py-1"),K(y,"class","px-2 py-1"),K(m,"class","font-bold border-t-2 border-black"),K(A,"class","px-2 py-1"),K(ot,"class","px-2 py-1"),K(ct,"class","px-2 py-1"),Cn(ct,"bg-green-300",i[5]>=100),K(ht,"class","px-2 py-1"),Cn(ht,"bg-red-300",i[4]>100),K(Yt,"class","px-2 py-1"),K(o,"class","text-left"),K(Ye,"class","flex gap-x-2"),K(t,"class","p-10 bg-yellow-100 shadow-lg flex flex-col")},m(ft,Ct){H(ft,t,Ct),F(t,e),F(e,r),F(t,s),F(t,o),F(o,l),F(o,c),F(o,h);for(let $e=0;$e<Ut.length;$e+=1)Ut[$e]&&Ut[$e].m(h,null);F(h,_),F(h,m),F(m,g),F(m,p),F(m,w),F(m,V),F(m,S),F(S,D),F(m,C),F(m,k),F(k,I),F(m,v),F(m,y),F(y,b),F(h,R),F(h,P),F(P,A),F(P,Q),F(P,ot),F(P,X),F(P,ct),F(ct,ut),F(ct,dt),F(P,U),F(P,ht),F(ht,jt),F(ht,zt),F(P,An),F(P,Yt),F(t,ni),F(t,Ye),bt(ve,Ye,null),F(Ye,bn),bt(Se,Ye,null),se=!0},p(ft,Ct){if((!se||Ct&4)&&n!==(n=ft[2].id+"")&&Lt(r,n),Ct&140){Je=sn(ft[3]);let xt;for(xt=0;xt<Je.length;xt+=1){const oe=Qc(ft,Je,xt);Ut[xt]?Ut[xt].p(oe,Ct):(Ut[xt]=Yc(oe),Ut[xt].c(),Ut[xt].m(h,_))}for(;xt<Ut.length;xt+=1)Ut[xt].d(1);Ut.length=Je.length}(!se||Ct&2)&&Lt(D,ft[1]),(!se||Ct&1)&&O!==(O=ft[0].toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"")&&Lt(I,O),(!se||Ct&64)&&Lt(b,ft[6]),(!se||Ct&32)&&j!==(j=ft[5].toFixed(0)+"")&&Lt(ut,j),(!se||Ct&32)&&Cn(ct,"bg-green-300",ft[5]>=100),(!se||Ct&16)&&vt!==(vt=ft[4].toFixed(0)+"")&&Lt(jt,vt),(!se||Ct&16)&&Cn(ht,"bg-red-300",ft[4]>100);const $e={};Ct&262144&&($e.$$scope={dirty:Ct,ctx:ft}),ve.$set($e);const Ze={};Ct&262144&&(Ze.$$scope={dirty:Ct,ctx:ft}),Se.$set(Ze)},i(ft){se||(J(ve.$$.fragment,ft),J(Se.$$.fragment,ft),se=!0)},o(ft){it(ve.$$.fragment,ft),it(Se.$$.fragment,ft),se=!1},d(ft){ft&&M(t),xi(Ut,ft),Rt(ve),Rt(Se)}}}function Yc(i){let t,e,n=i[15].naam.charAt(0).toUpperCase()+i[15].naam.slice(1)+"",r,s,o,l,u,c,h,_=Oi(i[2].values[i[17]],i[15])+"",m,g,E,p=Us(i[2].values[i[17]],i[15]).toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"",w,V,S,D=Bs(i[2].values[i[17]],i[15])+"",C,k,O;function I(...v){return i[11](i[17],...v)}return{c(){t=z("tr"),e=z("td"),r=nt(n),s=tt(),o=z("td"),l=z("input"),c=tt(),h=z("td"),m=nt(_),g=tt(),E=z("td"),w=nt(p),V=tt(),S=z("td"),C=nt(D),this.h()},l(v){t=q(v,"TR",{});var y=Y(t);e=q(y,"TD",{class:!0});var b=Y(e);r=rt(b,n),b.forEach(M),s=et(y),o=q(y,"TD",{class:!0});var R=Y(o);l=q(R,"INPUT",{type:!0,min:!0,max:!0,class:!0}),R.forEach(M),c=et(y),h=q(y,"TD",{class:!0});var P=Y(h);m=rt(P,_),P.forEach(M),g=et(y),E=q(y,"TD",{class:!0});var A=Y(E);w=rt(A,p),A.forEach(M),V=et(y),S=q(y,"TD",{class:!0});var Q=Y(S);C=rt(Q,D),Q.forEach(M),y.forEach(M),this.h()},h(){K(e,"class","px-2"),K(l,"type","range"),l.value=u=i[2].values[i[17]],K(l,"min","0"),K(l,"max","10"),K(l,"class","slider accent-blue-500 align-middle appearance-none w-full cursor-pointer h-1 bg-red-500"),K(o,"class","px-2"),K(h,"class","px-2"),K(E,"class","px-2"),K(S,"class","px-2")},m(v,y){H(v,t,y),F(t,e),F(e,r),F(t,s),F(t,o),F(o,l),F(t,c),F(t,h),F(h,m),F(t,g),F(t,E),F(E,w),F(t,V),F(t,S),F(S,C),k||(O=uo(l,"input",I),k=!0)},p(v,y){i=v,y&8&&n!==(n=i[15].naam.charAt(0).toUpperCase()+i[15].naam.slice(1)+"")&&Lt(r,n),y&4&&u!==(u=i[2].values[i[17]])&&(l.value=u),y&12&&_!==(_=Oi(i[2].values[i[17]],i[15])+"")&&Lt(m,_),y&12&&p!==(p=Us(i[2].values[i[17]],i[15]).toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"")&&Lt(w,p),y&12&&D!==(D=Bs(i[2].values[i[17]],i[15])+"")&&Lt(C,D)},d(v){v&&M(t),k=!1,O()}}}function H0(i){let t;return{c(){t=nt("Terug")},l(e){t=rt(e,"Terug")},m(e,n){H(e,t,n)},d(e){e&&M(t)}}}function K0(i){let t;return{c(){t=nt("Klaar")},l(e){t=rt(e,"Klaar")},m(e,n){H(e,t,n)},d(e){e&&M(t)}}}function W0(i){let t,e,n=i[2]&&Xc(i);return{c(){n&&n.c(),t=Re()},l(r){n&&n.l(r),t=Re()},m(r,s){n&&n.m(r,s),H(r,t,s),e=!0},p(r,[s]){r[2]?n?(n.p(r,s),s&4&&J(n,1)):(n=Xc(r),n.c(),J(n,1),n.m(t.parentNode,t)):n&&(lr(),it(n,1,1,()=>{n=null}),ur())},i(r){e||(J(n),e=!0)},o(r){it(n),e=!1},d(r){r&&M(t),n&&n.d(r)}}}function Q0(i,t,e){let n,r,s,o,l,u,c,h,_,m;rn(i,Wc,S=>e(8,c=S)),rn(i,ha,S=>e(3,h=S)),rn(i,Qa,S=>e(9,_=S)),rn(i,Fr,S=>e(10,m=S)),lo(()=>{const S=qr(en,"maatregelen"),D=qr(en,"doelen");xa(S,C=>{ha.set(C.docs.map(k=>({id:k.id,...k.data()})))}),xa(D,C=>{Wc.set(C.docs.map(k=>({doel:Number(k.data().doel),budget:Number(k.data().budget),...k.data()})))})});const g=(S,D)=>{const C=S.target;e(2,n.values[D]=C.valueAsNumber,n),E()},E=async()=>{try{const S=n.id,D=Va(en,"stakeholders",S);(await C0(D)).exists()?await td(D,{values:n.values}):await D0(D,{values:n.values}),console.log("Document successfully updated!")}catch(S){console.error("Error updating document: ",S)}},p=(S,D)=>g(D,S),w=()=>{Ke.set(2)},V=()=>{Ke.set(4)};return i.$$.update=()=>{var S,D;i.$$.dirty&1536&&e(2,n=m.find(C=>C.id===(_==null?void 0:_.id))),i.$$.dirty&12&&e(1,r=h.reduce((C,k,O)=>{var I;return C+Oi(((I=n==null?void 0:n.values)==null?void 0:I[O])??0,k)},0)),i.$$.dirty&12&&e(0,s=h.reduce((C,k,O)=>{var I;return C+Us(((I=n==null?void 0:n.values)==null?void 0:I[O])??0,k)},0)),i.$$.dirty&12&&e(6,o=h.reduce((C,k,O)=>{var I;return C+Bs(((I=n==null?void 0:n.values)==null?void 0:I[O])??0,k)},0)),i.$$.dirty&258&&e(5,l=r/((S=c[0])==null?void 0:S.doel)*100),i.$$.dirty&257&&e(4,u=s/((D=c[0])==null?void 0:D.budget)*100)},[s,r,n,h,u,l,o,g,c,_,m,p,w,V]}class X0 extends Qe{constructor(t){super(),Xe(this,t,Q0,W0,Ge,{})}}function Jc(i){let t,e;return t=new ts({props:{$$slots:{default:[Z0]},$$scope:{ctx:i}}}),{c(){It(t.$$.fragment)},l(n){At(t.$$.fragment,n)},m(n,r){bt(t,n,r),e=!0},p(n,r){const s={};r&9&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(J(t.$$.fragment,n),e=!0)},o(n){it(t.$$.fragment,n),e=!1},d(n){Rt(t,n)}}}function Y0(i){let t;return{c(){t=nt("Terug")},l(e){t=rt(e,"Terug")},m(e,n){H(e,t,n)},d(e){e&&M(t)}}}function J0(i){let t;return{c(){t=nt("Klaar")},l(e){t=rt(e,"Klaar")},m(e,n){H(e,t,n)},d(e){e&&M(t)}}}function Z0(i){let t,e=i[0].id+"",n,r,s,o=i[0].description+"",l,u,c,h,_,m,g;return h=new Ee({props:{theme:"red",$$slots:{default:[Y0]},$$scope:{ctx:i}}}),h.$on("click",i[1]),m=new Ee({props:{$$slots:{default:[J0]},$$scope:{ctx:i}}}),m.$on("click",i[2]),{c(){t=z("h2"),n=nt(e),r=tt(),s=z("p"),l=nt(o),u=tt(),c=z("div"),It(h.$$.fragment),_=tt(),It(m.$$.fragment),this.h()},l(E){t=q(E,"H2",{class:!0});var p=Y(t);n=rt(p,e),p.forEach(M),r=et(E),s=q(E,"P",{class:!0});var w=Y(s);l=rt(w,o),w.forEach(M),u=et(E),c=q(E,"DIV",{class:!0});var V=Y(c);At(h.$$.fragment,V),_=et(V),At(m.$$.fragment,V),V.forEach(M),this.h()},h(){K(t,"class","font-bold text-2xl"),K(s,"class","lg:max-w-[400px]"),K(c,"class","flex gap-x-2")},m(E,p){H(E,t,p),F(t,n),H(E,r,p),H(E,s,p),F(s,l),H(E,u,p),H(E,c,p),bt(h,c,null),F(c,_),bt(m,c,null),g=!0},p(E,p){(!g||p&1)&&e!==(e=E[0].id+"")&&Lt(n,e),(!g||p&1)&&o!==(o=E[0].description+"")&&Lt(l,o);const w={};p&8&&(w.$$scope={dirty:p,ctx:E}),h.$set(w);const V={};p&8&&(V.$$scope={dirty:p,ctx:E}),m.$set(V)},i(E){g||(J(h.$$.fragment,E),J(m.$$.fragment,E),g=!0)},o(E){it(h.$$.fragment,E),it(m.$$.fragment,E),g=!1},d(E){E&&(M(t),M(r),M(s),M(u),M(c)),Rt(h),Rt(m)}}}function tv(i){let t,e,n=i[0]&&Jc(i);return{c(){n&&n.c(),t=Re()},l(r){n&&n.l(r),t=Re()},m(r,s){n&&n.m(r,s),H(r,t,s),e=!0},p(r,[s]){r[0]?n?(n.p(r,s),s&1&&J(n,1)):(n=Jc(r),n.c(),J(n,1),n.m(t.parentNode,t)):n&&(lr(),it(n,1,1,()=>{n=null}),ur())},i(r){e||(J(n),e=!0)},o(r){it(n),e=!1},d(r){r&&M(t),n&&n.d(r)}}}function ev(i,t,e){let n;return rn(i,Qa,o=>e(0,n=o)),[n,()=>{Ke.set(1)},()=>{Ke.set(3)}]}class nv extends Qe{constructor(t){super(),Xe(this,t,ev,tv,Ge,{})}}function Zc(i,t,e){const n=i.slice();return n[5]=t[e],n}function rv(i){let t,e='<svg aria-hidden="true" class="w-8 h-8 text-blue-500 animate-spin fill-white" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z" fill="currentColor"></path><path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z" fill="currentFill"></path></svg> <span class="sr-only">Loading...</span>';return{c(){t=z("div"),t.innerHTML=e,this.h()},l(n){t=q(n,"DIV",{role:!0,"data-svelte-h":!0}),cn(t)!=="svelte-1enh005"&&(t.innerHTML=e),this.h()},h(){K(t,"role","status")},m(n,r){H(n,t,r)},d(n){n&&M(t)}}}function iv(i){let t,e='Er is iets misgegaan bij het ophalen van de data. <a class="text-blue-500 underline" href="/upload">upload een excel bestand</a> en probeer het opnieuw.';return{c(){t=z("div"),t.innerHTML=e,this.h()},l(n){t=q(n,"DIV",{class:!0,"data-svelte-h":!0}),cn(t)!=="svelte-1s9ns9h"&&(t.innerHTML=e),this.h()},h(){K(t,"class","text-red-500")},m(n,r){H(n,t,r)},d(n){n&&M(t)}}}function sv(i){let t=i[5].id+"",e;return{c(){e=nt(t)},l(n){e=rt(n,t)},m(n,r){H(n,e,r)},p(n,r){r&2&&t!==(t=n[5].id+"")&&Lt(e,t)},d(n){n&&M(e)}}}function th(i){let t,e;function n(){return i[3](i[5])}return t=new Ee({props:{$$slots:{default:[sv]},$$scope:{ctx:i}}}),t.$on("click",n),{c(){It(t.$$.fragment)},l(r){At(t.$$.fragment,r)},m(r,s){bt(t,r,s),e=!0},p(r,s){i=r;const o={};s&258&&(o.$$scope={dirty:s,ctx:i}),t.$set(o)},i(r){e||(J(t.$$.fragment,r),e=!0)},o(r){it(t.$$.fragment,r),e=!1},d(r){Rt(t,r)}}}function ov(i){let t;return{c(){t=nt("Terug")},l(e){t=rt(e,"Terug")},m(e,n){H(e,t,n)},d(e){e&&M(t)}}}function av(i){let t,e="Kies je doelgroep om te vertegenwoordigen",n,r,s,o,l,u;function c(p,w){if(p[0])return iv;if(p[1].length===0)return rv}let h=c(i),_=h&&h(i),m=sn(i[1]),g=[];for(let p=0;p<m.length;p+=1)g[p]=th(Zc(i,m,p));const E=p=>it(g[p],1,1,()=>{g[p]=null});return l=new Ee({props:{theme:"red",$$slots:{default:[ov]},$$scope:{ctx:i}}}),l.$on("click",i[4]),{c(){t=z("div"),t.textContent=e,n=tt(),r=z("div"),_&&_.c(),s=tt();for(let p=0;p<g.length;p+=1)g[p].c();o=tt(),It(l.$$.fragment),this.h()},l(p){t=q(p,"DIV",{class:!0,"data-svelte-h":!0}),cn(t)!=="svelte-a914y3"&&(t.textContent=e),n=et(p),r=q(p,"DIV",{class:!0});var w=Y(r);_&&_.l(w),s=et(w);for(let V=0;V<g.length;V+=1)g[V].l(w);o=et(w),At(l.$$.fragment,w),w.forEach(M),this.h()},h(){K(t,"class","font-bold text-2xl mb-4"),K(r,"class","flex gap-x-2")},m(p,w){H(p,t,w),H(p,n,w),H(p,r,w),_&&_.m(r,null),F(r,s);for(let V=0;V<g.length;V+=1)g[V]&&g[V].m(r,null);F(r,o),bt(l,r,null),u=!0},p(p,w){if(h!==(h=c(p))&&(_&&_.d(1),_=h&&h(p),_&&(_.c(),_.m(r,s))),w&2){m=sn(p[1]);let S;for(S=0;S<m.length;S+=1){const D=Zc(p,m,S);g[S]?(g[S].p(D,w),J(g[S],1)):(g[S]=th(D),g[S].c(),J(g[S],1),g[S].m(r,o))}for(lr(),S=m.length;S<g.length;S+=1)E(S);ur()}const V={};w&256&&(V.$$scope={dirty:w,ctx:p}),l.$set(V)},i(p){if(!u){for(let w=0;w<m.length;w+=1)J(g[w]);J(l.$$.fragment,p),u=!0}},o(p){g=g.filter(Boolean);for(let w=0;w<g.length;w+=1)it(g[w]);it(l.$$.fragment,p),u=!1},d(p){p&&(M(t),M(n),M(r)),_&&_.d(),xi(g,p),Rt(l)}}}function lv(i){let t,e;return t=new ts({props:{$$slots:{default:[av]},$$scope:{ctx:i}}}),{c(){It(t.$$.fragment)},l(n){At(t.$$.fragment,n)},m(n,r){bt(t,n,r),e=!0},p(n,[r]){const s={};r&259&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(J(t.$$.fragment,n),e=!0)},o(n){it(t.$$.fragment,n),e=!1},d(n){Rt(t,n)}}}const uv=5e3;function cv(i,t,e){let n,r;rn(i,Fr,u=>e(1,r=u));const s=Yr(!1);return rn(i,s,u=>e(0,n=u)),lo(()=>{const u=setTimeout(()=>{s.set(!0)},uv),c=Fr.subscribe(h=>{h.length>0&&clearTimeout(u)});return()=>{clearTimeout(u),c()}}),[n,r,s,u=>{Qa.set(u),Ke.set(2)},()=>{Ke.set(0)}]}class hv extends Qe{constructor(t){super(),Xe(this,t,cv,lv,Ge,{})}}function gn(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function nd(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.__proto__=t}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Fe={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Hr={duration:.5,overwrite:!1,delay:0},xl,de,kt,je=1e8,Pt=1/je,Oa=Math.PI*2,fv=Oa/4,dv=0,rd=Math.sqrt,_v=Math.cos,mv=Math.sin,te=function(t){return typeof t=="string"},$t=function(t){return typeof t=="function"},wn=function(t){return typeof t=="number"},Ol=function(t){return typeof t>"u"},dn=function(t){return typeof t=="object"},we=function(t){return t!==!1},Nl=function(){return typeof window<"u"},Vs=function(t){return $t(t)||te(t)},id=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},_e=Array.isArray,Na=/(?:-?\.?\d|\.)+/gi,sd=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Dr=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,ea=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,od=/[+-]=-?[.\d]+/,ad=/[^,'"\[\]\s]+/gi,pv=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Ot,tn,Ma,Ml,Le={},eo={},ld,ud=function(t){return(eo=_r(t,Le))&&Pe},Fl=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},zi=function(t,e){return!e&&console.warn(t)},cd=function(t,e){return t&&(Le[t]=e)&&eo&&(eo[t]=e)||Le},qi=function(){return 0},gv={suppressEvents:!0,isStart:!0,kill:!1},Fs={suppressEvents:!0,kill:!1},yv={suppressEvents:!0},Ll={},Fn=[],Fa={},hd,Ve={},na={},eh=30,Ls=[],$l="",Ul=function(t){var e=t[0],n,r;if(dn(e)||$t(e)||(t=[t]),!(n=(e._gsap||{}).harness)){for(r=Ls.length;r--&&!Ls[r].targetTest(e););n=Ls[r]}for(r=t.length;r--;)t[r]&&(t[r]._gsap||(t[r]._gsap=new Nd(t[r],n)))||t.splice(r,1);return t},ir=function(t){return t._gsap||Ul(ze(t))[0]._gsap},fd=function(t,e,n){return(n=t[e])&&$t(n)?t[e]():Ol(n)&&t.getAttribute&&t.getAttribute(e)||n},Ie=function(t,e){return(t=t.split(",")).forEach(e)||t},Bt=function(t){return Math.round(t*1e5)/1e5||0},Zt=function(t){return Math.round(t*1e7)/1e7||0},Or=function(t,e){var n=e.charAt(0),r=parseFloat(e.substr(2));return t=parseFloat(t),n==="+"?t+r:n==="-"?t-r:n==="*"?t*r:t/r},vv=function(t,e){for(var n=e.length,r=0;t.indexOf(e[r])<0&&++r<n;);return r<n},no=function(){var t=Fn.length,e=Fn.slice(0),n,r;for(Fa={},Fn.length=0,n=0;n<t;n++)r=e[n],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},dd=function(t,e,n,r){Fn.length&&!de&&no(),t.render(e,n,de&&e<0&&(t._initted||t._startAt)),Fn.length&&!de&&no()},_d=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(ad).length<2?e:te(t)?t.trim():t},md=function(t){return t},qe=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},Tv=function(t){return function(e,n){for(var r in n)r in e||r==="duration"&&t||r==="ease"||(e[r]=n[r])}},_r=function(t,e){for(var n in e)t[n]=e[n];return t},nh=function i(t,e){for(var n in e)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(t[n]=dn(e[n])?i(t[n]||(t[n]={}),e[n]):e[n]);return t},ro=function(t,e){var n={},r;for(r in t)r in e||(n[r]=t[r]);return n},Ci=function(t){var e=t.parent||Ot,n=t.keyframes?Tv(_e(t.keyframes)):qe;if(we(t.inherit))for(;e;)n(t,e.vars.defaults),e=e.parent||e._dp;return t},Ev=function(t,e){for(var n=t.length,r=n===e.length;r&&n--&&t[n]===e[n];);return n<0},pd=function(t,e,n,r,s){var o=t[r],l;if(s)for(l=e[s];o&&o[s]>l;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[r]=e,e._prev=o,e.parent=e._dp=t,e},bo=function(t,e,n,r){n===void 0&&(n="_first"),r===void 0&&(r="_last");var s=e._prev,o=e._next;s?s._next=o:t[n]===e&&(t[n]=o),o?o._prev=s:t[r]===e&&(t[r]=s),e._next=e._prev=e.parent=null},zn=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},sr=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},wv=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},La=function(t,e,n,r){return t._startAt&&(de?t._startAt.revert(Fs):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,r))},Iv=function i(t){return!t||t._ts&&i(t.parent)},rh=function(t){return t._repeat?Kr(t._tTime,t=t.duration()+t._rDelay)*t:0},Kr=function(t,e){var n=Math.floor(t/=e);return t&&n===t?n-1:n},io=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Ro=function(t){return t._end=Zt(t._start+(t._tDur/Math.abs(t._ts||t._rts||Pt)||0))},Po=function(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=Zt(n._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Ro(t),n._dirty||sr(n,t)),t},gd=function(t,e){var n;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(n=io(t.rawTime(),e),(!e._dur||cs(0,e.totalDuration(),n)-e._tTime>Pt)&&e.render(n,!0)),sr(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-Pt}},nn=function(t,e,n,r){return e.parent&&zn(e),e._start=Zt((wn(n)?n:n||t!==Ot?Be(t,n,e):t._time)+e._delay),e._end=Zt(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),pd(t,e,"_first","_last",t._sort?"_start":0),$a(e)||(t._recent=e),r||gd(t,e),t._ts<0&&Po(t,t._tTime),t},yd=function(t,e){return(Le.ScrollTrigger||Fl("scrollTrigger",e))&&Le.ScrollTrigger.create(e,t)},vd=function(t,e,n,r,s){if(jl(t,e,s),!t._initted)return 1;if(!n&&t._pt&&!de&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&hd!==ke.frame)return Fn.push(t),t._lazy=[s,r],1},Av=function i(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||i(e))},$a=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},bv=function(t,e,n,r){var s=t.ratio,o=e<0||!e&&(!t._start&&Av(t)&&!(!t._initted&&$a(t))||(t._ts<0||t._dp._ts<0)&&!$a(t))?0:1,l=t._rDelay,u=0,c,h,_;if(l&&t._repeat&&(u=cs(0,t._tDur,e),h=Kr(u,l),t._yoyo&&h&1&&(o=1-o),h!==Kr(t._tTime,l)&&(s=1-o,t.vars.repeatRefresh&&t._initted&&t.invalidate())),o!==s||de||r||t._zTime===Pt||!e&&t._zTime){if(!t._initted&&vd(t,e,r,n,u))return;for(_=t._zTime,t._zTime=e||(n?Pt:0),n||(n=e&&!_),t.ratio=o,t._from&&(o=1-o),t._time=0,t._tTime=u,c=t._pt;c;)c.r(o,c.d),c=c._next;e<0&&La(t,e,n,!0),t._onUpdate&&!n&&Oe(t,"onUpdate"),u&&t._repeat&&!n&&t.parent&&Oe(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===o&&(o&&zn(t,1),!n&&!de&&(Oe(t,o?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},Rv=function(t,e,n){var r;if(n>e)for(r=t._first;r&&r._start<=n;){if(r.data==="isPause"&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=n;){if(r.data==="isPause"&&r._start<e)return r;r=r._prev}},Wr=function(t,e,n,r){var s=t._repeat,o=Zt(e)||0,l=t._tTime/t._tDur;return l&&!r&&(t._time*=o/t._dur),t._dur=o,t._tDur=s?s<0?1e10:Zt(o*(s+1)+t._rDelay*s):o,l>0&&!r&&Po(t,t._tTime=t._tDur*l),t.parent&&Ro(t),n||sr(t.parent,t),t},ih=function(t){return t instanceof ge?sr(t):Wr(t,t._dur)},Pv={_start:0,endTime:qi,totalDuration:qi},Be=function i(t,e,n){var r=t.labels,s=t._recent||Pv,o=t.duration()>=je?s.endTime(!1):t._dur,l,u,c;return te(e)&&(isNaN(e)||e in r)?(u=e.charAt(0),c=e.substr(-1)==="%",l=e.indexOf("="),u==="<"||u===">"?(l>=0&&(e=e.replace(/=/,"")),(u==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(e.substr(1))||0)*(c?(l<0?s:n).totalDuration()/100:1)):l<0?(e in r||(r[e]=o),r[e]):(u=parseFloat(e.charAt(l-1)+e.substr(l+1)),c&&n&&(u=u/100*(_e(n)?n[0]:n).totalDuration()),l>1?i(t,e.substr(0,l-1),n)+u:o+u)):e==null?o:+e},Di=function(t,e,n){var r=wn(e[1]),s=(r?2:1)+(t<2?0:1),o=e[s],l,u;if(r&&(o.duration=e[1]),o.parent=n,t){for(l=o,u=n;u&&!("immediateRender"in l);)l=u.vars.defaults||{},u=we(u.vars.inherit)&&u.parent;o.immediateRender=we(l.immediateRender),t<2?o.runBackwards=1:o.startAt=e[s-1]}return new Kt(e[0],o,e[s+1])},Hn=function(t,e){return t||t===0?e(t):e},cs=function(t,e,n){return n<t?t:n>e?e:n},fe=function(t,e){return!te(t)||!(e=pv.exec(t))?"":e[1]},Sv=function(t,e,n){return Hn(n,function(r){return cs(t,e,r)})},Ua=[].slice,Td=function(t,e){return t&&dn(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&dn(t[0]))&&!t.nodeType&&t!==tn},Cv=function(t,e,n){return n===void 0&&(n=[]),t.forEach(function(r){var s;return te(r)&&!e||Td(r,1)?(s=n).push.apply(s,ze(r)):n.push(r)})||n},ze=function(t,e,n){return kt&&!e&&kt.selector?kt.selector(t):te(t)&&!n&&(Ma||!Qr())?Ua.call((e||Ml).querySelectorAll(t),0):_e(t)?Cv(t,n):Td(t)?Ua.call(t,0):t?[t]:[]},Ba=function(t){return t=ze(t)[0]||zi("Invalid scope")||{},function(e){var n=t.current||t.nativeElement||t;return ze(e,n.querySelectorAll?n:n===t?zi("Invalid scope")||Ml.createElement("div"):t)}},Ed=function(t){return t.sort(function(){return .5-Math.random()})},wd=function(t){if($t(t))return t;var e=dn(t)?t:{each:t},n=or(e.ease),r=e.from||0,s=parseFloat(e.base)||0,o={},l=r>0&&r<1,u=isNaN(r)||l,c=e.axis,h=r,_=r;return te(r)?h=_={center:.5,edges:.5,end:1}[r]||0:!l&&u&&(h=r[0],_=r[1]),function(m,g,E){var p=(E||e).length,w=o[p],V,S,D,C,k,O,I,v,y;if(!w){if(y=e.grid==="auto"?0:(e.grid||[1,je])[1],!y){for(I=-je;I<(I=E[y++].getBoundingClientRect().left)&&y<p;);y<p&&y--}for(w=o[p]=[],V=u?Math.min(y,p)*h-.5:r%y,S=y===je?0:u?p*_/y-.5:r/y|0,I=0,v=je,O=0;O<p;O++)D=O%y-V,C=S-(O/y|0),w[O]=k=c?Math.abs(c==="y"?C:D):rd(D*D+C*C),k>I&&(I=k),k<v&&(v=k);r==="random"&&Ed(w),w.max=I-v,w.min=v,w.v=p=(parseFloat(e.amount)||parseFloat(e.each)*(y>p?p-1:c?c==="y"?p/y:y:Math.max(y,p/y))||0)*(r==="edges"?-1:1),w.b=p<0?s-p:s,w.u=fe(e.amount||e.each)||0,n=n&&p<0?kd(n):n}return p=(w[m]-w.min)/w.max||0,Zt(w.b+(n?n(p):p)*w.v)+w.u}},ja=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(n){var r=Zt(Math.round(parseFloat(n)/t)*t*e);return(r-r%1)/e+(wn(n)?0:fe(n))}},Id=function(t,e){var n=_e(t),r,s;return!n&&dn(t)&&(r=n=t.radius||je,t.values?(t=ze(t.values),(s=!wn(t[0]))&&(r*=r)):t=ja(t.increment)),Hn(e,n?$t(t)?function(o){return s=t(o),Math.abs(s-o)<=r?s:o}:function(o){for(var l=parseFloat(s?o.x:o),u=parseFloat(s?o.y:0),c=je,h=0,_=t.length,m,g;_--;)s?(m=t[_].x-l,g=t[_].y-u,m=m*m+g*g):m=Math.abs(t[_]-l),m<c&&(c=m,h=_);return h=!r||c<=r?t[h]:o,s||h===o||wn(o)?h:h+fe(o)}:ja(t))},Ad=function(t,e,n,r){return Hn(_e(t)?!e:n===!0?!!(n=0):!r,function(){return _e(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+n*.99))/n)*n*r)/r})},Dv=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return e.reduce(function(s,o){return o(s)},r)}},Vv=function(t,e){return function(n){return t(parseFloat(n))+(e||fe(n))}},kv=function(t,e,n){return Rd(t,e,0,1,n)},bd=function(t,e,n){return Hn(n,function(r){return t[~~e(r)]})},xv=function i(t,e,n){var r=e-t;return _e(t)?bd(t,i(0,t.length),e):Hn(n,function(s){return(r+(s-t)%r)%r+t})},Ov=function i(t,e,n){var r=e-t,s=r*2;return _e(t)?bd(t,i(0,t.length-1),e):Hn(n,function(o){return o=(s+(o-t)%s)%s||0,t+(o>r?s-o:o)})},Gi=function(t){for(var e=0,n="",r,s,o,l;~(r=t.indexOf("random(",e));)o=t.indexOf(")",r),l=t.charAt(r+7)==="[",s=t.substr(r+7,o-r-7).match(l?ad:Na),n+=t.substr(e,r-e)+Ad(l?s:+s[0],l?0:+s[1],+s[2]||1e-5),e=o+1;return n+t.substr(e,t.length-e)},Rd=function(t,e,n,r,s){var o=e-t,l=r-n;return Hn(s,function(u){return n+((u-t)/o*l||0)})},Nv=function i(t,e,n,r){var s=isNaN(t+e)?0:function(g){return(1-g)*t+g*e};if(!s){var o=te(t),l={},u,c,h,_,m;if(n===!0&&(r=1)&&(n=null),o)t={p:t},e={p:e};else if(_e(t)&&!_e(e)){for(h=[],_=t.length,m=_-2,c=1;c<_;c++)h.push(i(t[c-1],t[c]));_--,s=function(E){E*=_;var p=Math.min(m,~~E);return h[p](E-p)},n=e}else r||(t=_r(_e(t)?[]:{},t));if(!h){for(u in e)Bl.call(l,t,u,"get",e[u]);s=function(E){return Gl(E,l)||(o?t.p:t)}}}return Hn(n,s)},sh=function(t,e,n){var r=t.labels,s=je,o,l,u;for(o in r)l=r[o]-e,l<0==!!n&&l&&s>(l=Math.abs(l))&&(u=o,s=l);return u},Oe=function(t,e,n){var r=t.vars,s=r[e],o=kt,l=t._ctx,u,c,h;if(s)return u=r[e+"Params"],c=r.callbackScope||t,n&&Fn.length&&no(),l&&(kt=l),h=u?s.apply(c,u):s.call(c),kt=o,h},Ii=function(t){return zn(t),t.scrollTrigger&&t.scrollTrigger.kill(!!de),t.progress()<1&&Oe(t,"onInterrupt"),t},Vr,Pd=[],Sd=function(t){if(t)if(t=!t.name&&t.default||t,Nl()||t.headless){var e=t.name,n=$t(t),r=e&&!n&&t.init?function(){this._props=[]}:t,s={init:qi,render:Gl,add:Bl,kill:Yv,modifier:Xv,rawVars:0},o={targetTest:0,get:0,getSetter:ql,aliases:{},register:0};if(Qr(),t!==r){if(Ve[e])return;qe(r,qe(ro(t,s),o)),_r(r.prototype,_r(s,ro(t,o))),Ve[r.prop=e]=r,t.targetTest&&(Ls.push(r),Ll[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}cd(e,r),t.register&&t.register(Pe,r,Ae)}else Pd.push(t)},wt=255,Ai={aqua:[0,wt,wt],lime:[0,wt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,wt],navy:[0,0,128],white:[wt,wt,wt],olive:[128,128,0],yellow:[wt,wt,0],orange:[wt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[wt,0,0],pink:[wt,192,203],cyan:[0,wt,wt],transparent:[wt,wt,wt,0]},ra=function(t,e,n){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(n-e)*t*6:t<.5?n:t*3<2?e+(n-e)*(2/3-t)*6:e)*wt+.5|0},Cd=function(t,e,n){var r=t?wn(t)?[t>>16,t>>8&wt,t&wt]:0:Ai.black,s,o,l,u,c,h,_,m,g,E;if(!r){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Ai[t])r=Ai[t];else if(t.charAt(0)==="#"){if(t.length<6&&(s=t.charAt(1),o=t.charAt(2),l=t.charAt(3),t="#"+s+s+o+o+l+l+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return r=parseInt(t.substr(1,6),16),[r>>16,r>>8&wt,r&wt,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),r=[t>>16,t>>8&wt,t&wt]}else if(t.substr(0,3)==="hsl"){if(r=E=t.match(Na),!e)u=+r[0]%360/360,c=+r[1]/100,h=+r[2]/100,o=h<=.5?h*(c+1):h+c-h*c,s=h*2-o,r.length>3&&(r[3]*=1),r[0]=ra(u+1/3,s,o),r[1]=ra(u,s,o),r[2]=ra(u-1/3,s,o);else if(~t.indexOf("="))return r=t.match(sd),n&&r.length<4&&(r[3]=1),r}else r=t.match(Na)||Ai.transparent;r=r.map(Number)}return e&&!E&&(s=r[0]/wt,o=r[1]/wt,l=r[2]/wt,_=Math.max(s,o,l),m=Math.min(s,o,l),h=(_+m)/2,_===m?u=c=0:(g=_-m,c=h>.5?g/(2-_-m):g/(_+m),u=_===s?(o-l)/g+(o<l?6:0):_===o?(l-s)/g+2:(s-o)/g+4,u*=60),r[0]=~~(u+.5),r[1]=~~(c*100+.5),r[2]=~~(h*100+.5)),n&&r.length<4&&(r[3]=1),r},Dd=function(t){var e=[],n=[],r=-1;return t.split(Ln).forEach(function(s){var o=s.match(Dr)||[];e.push.apply(e,o),n.push(r+=o.length+1)}),e.c=n,e},oh=function(t,e,n){var r="",s=(t+r).match(Ln),o=e?"hsla(":"rgba(",l=0,u,c,h,_;if(!s)return t;if(s=s.map(function(m){return(m=Cd(m,e,1))&&o+(e?m[0]+","+m[1]+"%,"+m[2]+"%,"+m[3]:m.join(","))+")"}),n&&(h=Dd(t),u=n.c,u.join(r)!==h.c.join(r)))for(c=t.replace(Ln,"1").split(Dr),_=c.length-1;l<_;l++)r+=c[l]+(~u.indexOf(l)?s.shift()||o+"0,0,0,0)":(h.length?h:s.length?s:n).shift());if(!c)for(c=t.split(Ln),_=c.length-1;l<_;l++)r+=c[l]+s[l];return r+c[_]},Ln=function(){var i="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Ai)i+="|"+t+"\\b";return new RegExp(i+")","gi")}(),Mv=/hsl[a]?\(/,Vd=function(t){var e=t.join(" "),n;if(Ln.lastIndex=0,Ln.test(e))return n=Mv.test(e),t[1]=oh(t[1],n),t[0]=oh(t[0],n,Dd(t[1])),!0},Hi,ke=function(){var i=Date.now,t=500,e=33,n=i(),r=n,s=1e3/240,o=s,l=[],u,c,h,_,m,g,E=function p(w){var V=i()-r,S=w===!0,D,C,k,O;if((V>t||V<0)&&(n+=V-e),r+=V,k=r-n,D=k-o,(D>0||S)&&(O=++_.frame,m=k-_.time*1e3,_.time=k=k/1e3,o+=D+(D>=s?4:s-D),C=1),S||(u=c(p)),C)for(g=0;g<l.length;g++)l[g](k,m,O,w)};return _={time:0,frame:0,tick:function(){E(!0)},deltaRatio:function(w){return m/(1e3/(w||60))},wake:function(){ld&&(!Ma&&Nl()&&(tn=Ma=window,Ml=tn.document||{},Le.gsap=Pe,(tn.gsapVersions||(tn.gsapVersions=[])).push(Pe.version),ud(eo||tn.GreenSockGlobals||!tn.gsap&&tn||{}),Pd.forEach(Sd)),h=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&_.sleep(),c=h||function(w){return setTimeout(w,o-_.time*1e3+1|0)},Hi=1,E(2))},sleep:function(){(h?cancelAnimationFrame:clearTimeout)(u),Hi=0,c=qi},lagSmoothing:function(w,V){t=w||1/0,e=Math.min(V||33,t)},fps:function(w){s=1e3/(w||240),o=_.time*1e3+s},add:function(w,V,S){var D=V?function(C,k,O,I){w(C,k,O,I),_.remove(D)}:w;return _.remove(w),l[S?"unshift":"push"](D),Qr(),D},remove:function(w,V){~(V=l.indexOf(w))&&l.splice(V,1)&&g>=V&&g--},_listeners:l},_}(),Qr=function(){return!Hi&&ke.wake()},mt={},Fv=/^[\d.\-M][\d.\-,\s]/,Lv=/["']/g,$v=function(t){for(var e={},n=t.substr(1,t.length-3).split(":"),r=n[0],s=1,o=n.length,l,u,c;s<o;s++)u=n[s],l=s!==o-1?u.lastIndexOf(","):u.length,c=u.substr(0,l),e[r]=isNaN(c)?c.replace(Lv,"").trim():+c,r=u.substr(l+1).trim();return e},Uv=function(t){var e=t.indexOf("(")+1,n=t.indexOf(")"),r=t.indexOf("(",e);return t.substring(e,~r&&r<n?t.indexOf(")",n+1):n)},Bv=function(t){var e=(t+"").split("("),n=mt[e[0]];return n&&e.length>1&&n.config?n.config.apply(null,~t.indexOf("{")?[$v(e[1])]:Uv(t).split(",").map(_d)):mt._CE&&Fv.test(t)?mt._CE("",t):n},kd=function(t){return function(e){return 1-t(1-e)}},xd=function i(t,e){for(var n=t._first,r;n;)n instanceof ge?i(n,e):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==e&&(n.timeline?i(n.timeline,e):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=e)),n=n._next},or=function(t,e){return t&&($t(t)?t:mt[t]||Bv(t))||e},yr=function(t,e,n,r){n===void 0&&(n=function(u){return 1-e(1-u)}),r===void 0&&(r=function(u){return u<.5?e(u*2)/2:1-e((1-u)*2)/2});var s={easeIn:e,easeOut:n,easeInOut:r},o;return Ie(t,function(l){mt[l]=Le[l]=s,mt[o=l.toLowerCase()]=n;for(var u in s)mt[o+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=mt[l+"."+u]=s[u]}),s},Od=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},ia=function i(t,e,n){var r=e>=1?e:1,s=(n||(t?.3:.45))/(e<1?e:1),o=s/Oa*(Math.asin(1/r)||0),l=function(h){return h===1?1:r*Math.pow(2,-10*h)*mv((h-o)*s)+1},u=t==="out"?l:t==="in"?function(c){return 1-l(1-c)}:Od(l);return s=Oa/s,u.config=function(c,h){return i(t,c,h)},u},sa=function i(t,e){e===void 0&&(e=1.70158);var n=function(o){return o?--o*o*((e+1)*o+e)+1:0},r=t==="out"?n:t==="in"?function(s){return 1-n(1-s)}:Od(n);return r.config=function(s){return i(t,s)},r};Ie("Linear,Quad,Cubic,Quart,Quint,Strong",function(i,t){var e=t<5?t+1:t;yr(i+",Power"+(e-1),t?function(n){return Math.pow(n,e)}:function(n){return n},function(n){return 1-Math.pow(1-n,e)},function(n){return n<.5?Math.pow(n*2,e)/2:1-Math.pow((1-n)*2,e)/2})});mt.Linear.easeNone=mt.none=mt.Linear.easeIn;yr("Elastic",ia("in"),ia("out"),ia());(function(i,t){var e=1/t,n=2*e,r=2.5*e,s=function(l){return l<e?i*l*l:l<n?i*Math.pow(l-1.5/t,2)+.75:l<r?i*(l-=2.25/t)*l+.9375:i*Math.pow(l-2.625/t,2)+.984375};yr("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);yr("Expo",function(i){return i?Math.pow(2,10*(i-1)):0});yr("Circ",function(i){return-(rd(1-i*i)-1)});yr("Sine",function(i){return i===1?1:-_v(i*fv)+1});yr("Back",sa("in"),sa("out"),sa());mt.SteppedEase=mt.steps=Le.SteppedEase={config:function(t,e){t===void 0&&(t=1);var n=1/t,r=t+(e?0:1),s=e?1:0,o=1-Pt;return function(l){return((r*cs(0,o,l)|0)+s)*n}}};Hr.ease=mt["quad.out"];Ie("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(i){return $l+=i+","+i+"Params,"});var Nd=function(t,e){this.id=dv++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:fd,this.set=e?e.getSetter:ql},Ki=function(){function i(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Wr(this,+e.duration,1,1),this.data=e.data,kt&&(this._ctx=kt,kt.data.push(this)),Hi||ke.wake()}var t=i.prototype;return t.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},t.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},t.totalDuration=function(n){return arguments.length?(this._dirty=0,Wr(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(n,r){if(Qr(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(Po(this,n),!s._dp||s.parent||gd(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&nn(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Pt||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),dd(this,n,r)),this},t.time=function(n,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+rh(this))%(this._dur+this._rDelay)||(n?this._dur:0),r):this._time},t.totalProgress=function(n,r){return arguments.length?this.totalTime(this.totalDuration()*n,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},t.progress=function(n,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+rh(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(n,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,r):this._repeat?Kr(this._tTime,s)+1:1},t.timeScale=function(n,r){if(!arguments.length)return this._rts===-Pt?0:this._rts;if(this._rts===n)return this;var s=this.parent&&this._ts?io(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-Pt?0:this._rts,this.totalTime(cs(-Math.abs(this._delay),this._tDur,s),r!==!1),Ro(this),wv(this)},t.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Qr(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Pt&&(this._tTime-=Pt)))),this):this._ps},t.startTime=function(n){if(arguments.length){this._start=n;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&nn(r,this,n-this._delay),this}return this._start},t.endTime=function(n){return this._start+(we(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(n){var r=this.parent||this._dp;return r?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?io(r.rawTime(n),this):this._tTime:this._tTime},t.revert=function(n){n===void 0&&(n=yv);var r=de;return de=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),de=r,this},t.globalTime=function(n){for(var r=this,s=arguments.length?n:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(n):s},t.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,ih(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(n){if(arguments.length){var r=this._time;return this._rDelay=n,ih(this),r?this.time(r):this}return this._rDelay},t.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},t.seek=function(n,r){return this.totalTime(Be(this,n),we(r))},t.restart=function(n,r){return this.play().totalTime(n?-this._delay:0,we(r))},t.play=function(n,r){return n!=null&&this.seek(n,r),this.reversed(!1).paused(!1)},t.reverse=function(n,r){return n!=null&&this.seek(n||this.totalDuration(),r),this.reversed(!0).paused(!1)},t.pause=function(n,r){return n!=null&&this.seek(n,r),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-Pt:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-Pt,this},t.isActive=function(){var n=this.parent||this._dp,r=this._start,s;return!!(!n||this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=r&&s<this.endTime(!0)-Pt)},t.eventCallback=function(n,r,s){var o=this.vars;return arguments.length>1?(r?(o[n]=r,s&&(o[n+"Params"]=s),n==="onUpdate"&&(this._onUpdate=r)):delete o[n],this):o[n]},t.then=function(n){var r=this;return new Promise(function(s){var o=$t(n)?n:md,l=function(){var c=r.then;r.then=null,$t(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=c),s(o),r.then=c};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?l():r._prom=l})},t.kill=function(){Ii(this)},i}();qe(Ki.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Pt,_prom:0,_ps:!1,_rts:1});var ge=function(i){nd(t,i);function t(n,r){var s;return n===void 0&&(n={}),s=i.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=we(n.sortChildren),Ot&&nn(n.parent||Ot,gn(s),r),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&yd(gn(s),n.scrollTrigger),s}var e=t.prototype;return e.to=function(r,s,o){return Di(0,arguments,this),this},e.from=function(r,s,o){return Di(1,arguments,this),this},e.fromTo=function(r,s,o,l){return Di(2,arguments,this),this},e.set=function(r,s,o){return s.duration=0,s.parent=this,Ci(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Kt(r,s,Be(this,o),1),this},e.call=function(r,s,o){return nn(this,Kt.delayedCall(0,r,s),o)},e.staggerTo=function(r,s,o,l,u,c,h){return o.duration=s,o.stagger=o.stagger||l,o.onComplete=c,o.onCompleteParams=h,o.parent=this,new Kt(r,o,Be(this,u)),this},e.staggerFrom=function(r,s,o,l,u,c,h){return o.runBackwards=1,Ci(o).immediateRender=we(o.immediateRender),this.staggerTo(r,s,o,l,u,c,h)},e.staggerFromTo=function(r,s,o,l,u,c,h,_){return l.startAt=o,Ci(l).immediateRender=we(l.immediateRender),this.staggerTo(r,s,l,u,c,h,_)},e.render=function(r,s,o){var l=this._time,u=this._dirty?this.totalDuration():this._tDur,c=this._dur,h=r<=0?0:Zt(r),_=this._zTime<0!=r<0&&(this._initted||!c),m,g,E,p,w,V,S,D,C,k,O,I;if(this!==Ot&&h>u&&r>=0&&(h=u),h!==this._tTime||o||_){if(l!==this._time&&c&&(h+=this._time-l,r+=this._time-l),m=h,C=this._start,D=this._ts,V=!D,_&&(c||(l=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(O=this._yoyo,w=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(w*100+r,s,o);if(m=Zt(h%w),h===u?(p=this._repeat,m=c):(p=~~(h/w),p&&p===h/w&&(m=c,p--),m>c&&(m=c)),k=Kr(this._tTime,w),!l&&this._tTime&&k!==p&&this._tTime-k*w-this._dur<=0&&(k=p),O&&p&1&&(m=c-m,I=1),p!==k&&!this._lock){var v=O&&k&1,y=v===(O&&p&1);if(p<k&&(v=!v),l=v?0:h%c?c:h,this._lock=1,this.render(l||(I?0:Zt(p*w)),s,!c)._lock=0,this._tTime=h,!s&&this.parent&&Oe(this,"onRepeat"),this.vars.repeatRefresh&&!I&&(this.invalidate()._lock=1),l&&l!==this._time||V!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,u=this._tDur,y&&(this._lock=2,l=v?c:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!I&&this.invalidate()),this._lock=0,!this._ts&&!V)return this;xd(this,I)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(S=Rv(this,Zt(l),Zt(m)),S&&(h-=m-(m=S._start))),this._tTime=h,this._time=m,this._act=!D,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,l=0),!l&&m&&!s&&!p&&(Oe(this,"onStart"),this._tTime!==h))return this;if(m>=l&&r>=0)for(g=this._first;g;){if(E=g._next,(g._act||m>=g._start)&&g._ts&&S!==g){if(g.parent!==this)return this.render(r,s,o);if(g.render(g._ts>0?(m-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(m-g._start)*g._ts,s,o),m!==this._time||!this._ts&&!V){S=0,E&&(h+=this._zTime=-Pt);break}}g=E}else{g=this._last;for(var b=r<0?r:m;g;){if(E=g._prev,(g._act||b<=g._end)&&g._ts&&S!==g){if(g.parent!==this)return this.render(r,s,o);if(g.render(g._ts>0?(b-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(b-g._start)*g._ts,s,o||de&&(g._initted||g._startAt)),m!==this._time||!this._ts&&!V){S=0,E&&(h+=this._zTime=b?-Pt:Pt);break}}g=E}}if(S&&!s&&(this.pause(),S.render(m>=l?0:-Pt)._zTime=m>=l?1:-1,this._ts))return this._start=C,Ro(this),this.render(r,s,o);this._onUpdate&&!s&&Oe(this,"onUpdate",!0),(h===u&&this._tTime>=this.totalDuration()||!h&&l)&&(C===this._start||Math.abs(D)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(h===u&&this._ts>0||!h&&this._ts<0)&&zn(this,1),!s&&!(r<0&&!l)&&(h||l||!u)&&(Oe(this,h===u&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(h<u&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(r,s){var o=this;if(wn(s)||(s=Be(this,s,r)),!(r instanceof Ki)){if(_e(r))return r.forEach(function(l){return o.add(l,s)}),this;if(te(r))return this.addLabel(r,s);if($t(r))r=Kt.delayedCall(0,r);else return this}return this!==r?nn(this,r,s):this},e.getChildren=function(r,s,o,l){r===void 0&&(r=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),l===void 0&&(l=-je);for(var u=[],c=this._first;c;)c._start>=l&&(c instanceof Kt?s&&u.push(c):(o&&u.push(c),r&&u.push.apply(u,c.getChildren(!0,s,o)))),c=c._next;return u},e.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},e.remove=function(r){return te(r)?this.removeLabel(r):$t(r)?this.killTweensOf(r):(bo(this,r),r===this._recent&&(this._recent=this._last),sr(this))},e.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Zt(ke.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),i.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},e.addLabel=function(r,s){return this.labels[r]=Be(this,s),this},e.removeLabel=function(r){return delete this.labels[r],this},e.addPause=function(r,s,o){var l=Kt.delayedCall(0,s||qi,o);return l.data="isPause",this._hasPause=1,nn(this,l,Be(this,r))},e.removePause=function(r){var s=this._first;for(r=Be(this,r);s;)s._start===r&&s.data==="isPause"&&zn(s),s=s._next},e.killTweensOf=function(r,s,o){for(var l=this.getTweensOf(r,o),u=l.length;u--;)Vn!==l[u]&&l[u].kill(r,s);return this},e.getTweensOf=function(r,s){for(var o=[],l=ze(r),u=this._first,c=wn(s),h;u;)u instanceof Kt?vv(u._targets,l)&&(c?(!Vn||u._initted&&u._ts)&&u.globalTime(0)<=s&&u.globalTime(u.totalDuration())>s:!s||u.isActive())&&o.push(u):(h=u.getTweensOf(l,s)).length&&o.push.apply(o,h),u=u._next;return o},e.tweenTo=function(r,s){s=s||{};var o=this,l=Be(o,r),u=s,c=u.startAt,h=u.onStart,_=u.onStartParams,m=u.immediateRender,g,E=Kt.to(o,qe({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:s.duration||Math.abs((l-(c&&"time"in c?c.time:o._time))/o.timeScale())||Pt,onStart:function(){if(o.pause(),!g){var w=s.duration||Math.abs((l-(c&&"time"in c?c.time:o._time))/o.timeScale());E._dur!==w&&Wr(E,w,0,1).render(E._time,!0,!0),g=1}h&&h.apply(E,_||[])}},s));return m?E.render(0):E},e.tweenFromTo=function(r,s,o){return this.tweenTo(s,qe({startAt:{time:Be(this,r)}},o))},e.recent=function(){return this._recent},e.nextLabel=function(r){return r===void 0&&(r=this._time),sh(this,Be(this,r))},e.previousLabel=function(r){return r===void 0&&(r=this._time),sh(this,Be(this,r),1)},e.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Pt)},e.shiftChildren=function(r,s,o){o===void 0&&(o=0);for(var l=this._first,u=this.labels,c;l;)l._start>=o&&(l._start+=r,l._end+=r),l=l._next;if(s)for(c in u)u[c]>=o&&(u[c]+=r);return sr(this)},e.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return i.prototype.invalidate.call(this,r)},e.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),sr(this)},e.totalDuration=function(r){var s=0,o=this,l=o._last,u=je,c,h,_;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(_=o.parent;l;)c=l._prev,l._dirty&&l.totalDuration(),h=l._start,h>u&&o._sort&&l._ts&&!o._lock?(o._lock=1,nn(o,l,h-l._delay,1)._lock=0):u=h,h<0&&l._ts&&(s-=h,(!_&&!o._dp||_&&_.smoothChildTiming)&&(o._start+=h/o._ts,o._time-=h,o._tTime-=h),o.shiftChildren(-h,!1,-1/0),u=0),l._end>s&&l._ts&&(s=l._end),l=c;Wr(o,o===Ot&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(r){if(Ot._ts&&(dd(Ot,io(r,Ot)),hd=ke.frame),ke.frame>=eh){eh+=Fe.autoSleep||120;var s=Ot._first;if((!s||!s._ts)&&Fe.autoSleep&&ke._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||ke.sleep()}}},t}(Ki);qe(ge.prototype,{_lock:0,_hasPause:0,_forcing:0});var jv=function(t,e,n,r,s,o,l){var u=new Ae(this._pt,t,e,0,1,Bd,null,s),c=0,h=0,_,m,g,E,p,w,V,S;for(u.b=n,u.e=r,n+="",r+="",(V=~r.indexOf("random("))&&(r=Gi(r)),o&&(S=[n,r],o(S,t,e),n=S[0],r=S[1]),m=n.match(ea)||[];_=ea.exec(r);)E=_[0],p=r.substring(c,_.index),g?g=(g+1)%5:p.substr(-5)==="rgba("&&(g=1),E!==m[h++]&&(w=parseFloat(m[h-1])||0,u._pt={_next:u._pt,p:p||h===1?p:",",s:w,c:E.charAt(1)==="="?Or(w,E)-w:parseFloat(E)-w,m:g&&g<4?Math.round:0},c=ea.lastIndex);return u.c=c<r.length?r.substring(c,r.length):"",u.fp=l,(od.test(r)||V)&&(u.e=0),this._pt=u,u},Bl=function(t,e,n,r,s,o,l,u,c,h){$t(r)&&(r=r(s||0,t,o));var _=t[e],m=n!=="get"?n:$t(_)?c?t[e.indexOf("set")||!$t(t["get"+e.substr(3)])?e:"get"+e.substr(3)](c):t[e]():_,g=$t(_)?c?Kv:$d:zl,E;if(te(r)&&(~r.indexOf("random(")&&(r=Gi(r)),r.charAt(1)==="="&&(E=Or(m,r)+(fe(m)||0),(E||E===0)&&(r=E))),!h||m!==r||za)return!isNaN(m*r)&&r!==""?(E=new Ae(this._pt,t,e,+m||0,r-(m||0),typeof _=="boolean"?Qv:Ud,0,g),c&&(E.fp=c),l&&E.modifier(l,this,t),this._pt=E):(!_&&!(e in t)&&Fl(e,r),jv.call(this,t,e,m,r,g,u||Fe.stringFilter,c))},zv=function(t,e,n,r,s){if($t(t)&&(t=Vi(t,s,e,n,r)),!dn(t)||t.style&&t.nodeType||_e(t)||id(t))return te(t)?Vi(t,s,e,n,r):t;var o={},l;for(l in t)o[l]=Vi(t[l],s,e,n,r);return o},Md=function(t,e,n,r,s,o){var l,u,c,h;if(Ve[t]&&(l=new Ve[t]).init(s,l.rawVars?e[t]:zv(e[t],r,s,o,n),n,r,o)!==!1&&(n._pt=u=new Ae(n._pt,s,t,0,1,l.render,l,0,l.priority),n!==Vr))for(c=n._ptLookup[n._targets.indexOf(s)],h=l._props.length;h--;)c[l._props[h]]=u;return l},Vn,za,jl=function i(t,e,n){var r=t.vars,s=r.ease,o=r.startAt,l=r.immediateRender,u=r.lazy,c=r.onUpdate,h=r.runBackwards,_=r.yoyoEase,m=r.keyframes,g=r.autoRevert,E=t._dur,p=t._startAt,w=t._targets,V=t.parent,S=V&&V.data==="nested"?V.vars.targets:w,D=t._overwrite==="auto"&&!xl,C=t.timeline,k,O,I,v,y,b,R,P,A,Q,ot,X,ct;if(C&&(!m||!s)&&(s="none"),t._ease=or(s,Hr.ease),t._yEase=_?kd(or(_===!0?s:_,Hr.ease)):0,_&&t._yoyo&&!t._repeat&&(_=t._yEase,t._yEase=t._ease,t._ease=_),t._from=!C&&!!r.runBackwards,!C||m&&!r.stagger){if(P=w[0]?ir(w[0]).harness:0,X=P&&r[P.prop],k=ro(r,Ll),p&&(p._zTime<0&&p.progress(1),e<0&&h&&l&&!g?p.render(-1,!0):p.revert(h&&E?Fs:gv),p._lazy=0),o){if(zn(t._startAt=Kt.set(w,qe({data:"isStart",overwrite:!1,parent:V,immediateRender:!0,lazy:!p&&we(u),startAt:null,delay:0,onUpdate:c&&function(){return Oe(t,"onUpdate")},stagger:0},o))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(de||!l&&!g)&&t._startAt.revert(Fs),l&&E&&e<=0&&n<=0){e&&(t._zTime=e);return}}else if(h&&E&&!p){if(e&&(l=!1),I=qe({overwrite:!1,data:"isFromStart",lazy:l&&!p&&we(u),immediateRender:l,stagger:0,parent:V},k),X&&(I[P.prop]=X),zn(t._startAt=Kt.set(w,I)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(de?t._startAt.revert(Fs):t._startAt.render(-1,!0)),t._zTime=e,!l)i(t._startAt,Pt,Pt);else if(!e)return}for(t._pt=t._ptCache=0,u=E&&we(u)||u&&!E,O=0;O<w.length;O++){if(y=w[O],R=y._gsap||Ul(w)[O]._gsap,t._ptLookup[O]=Q={},Fa[R.id]&&Fn.length&&no(),ot=S===w?O:S.indexOf(y),P&&(A=new P).init(y,X||k,t,ot,S)!==!1&&(t._pt=v=new Ae(t._pt,y,A.name,0,1,A.render,A,0,A.priority),A._props.forEach(function(j){Q[j]=v}),A.priority&&(b=1)),!P||X)for(I in k)Ve[I]&&(A=Md(I,k,t,ot,y,S))?A.priority&&(b=1):Q[I]=v=Bl.call(t,y,I,"get",k[I],ot,S,0,r.stringFilter);t._op&&t._op[O]&&t.kill(y,t._op[O]),D&&t._pt&&(Vn=t,Ot.killTweensOf(y,Q,t.globalTime(e)),ct=!t.parent,Vn=0),t._pt&&u&&(Fa[R.id]=1)}b&&jd(t),t._onInit&&t._onInit(t)}t._onUpdate=c,t._initted=(!t._op||t._pt)&&!ct,m&&e<=0&&C.render(je,!0,!0)},qv=function(t,e,n,r,s,o,l,u){var c=(t._pt&&t._ptCache||(t._ptCache={}))[e],h,_,m,g;if(!c)for(c=t._ptCache[e]=[],m=t._ptLookup,g=t._targets.length;g--;){if(h=m[g][e],h&&h.d&&h.d._pt)for(h=h.d._pt;h&&h.p!==e&&h.fp!==e;)h=h._next;if(!h)return za=1,t.vars[e]="+=0",jl(t,l),za=0,u?zi(e+" not eligible for reset"):1;c.push(h)}for(g=c.length;g--;)_=c[g],h=_._pt||_,h.s=(r||r===0)&&!s?r:h.s+(r||0)+o*h.c,h.c=n-h.s,_.e&&(_.e=Bt(n)+fe(_.e)),_.b&&(_.b=h.s+fe(_.b))},Gv=function(t,e){var n=t[0]?ir(t[0]).harness:0,r=n&&n.aliases,s,o,l,u;if(!r)return e;s=_r({},e);for(o in r)if(o in s)for(u=r[o].split(","),l=u.length;l--;)s[u[l]]=s[o];return s},Hv=function(t,e,n,r){var s=e.ease||r||"power1.inOut",o,l;if(_e(e))l=n[t]||(n[t]=[]),e.forEach(function(u,c){return l.push({t:c/(e.length-1)*100,v:u,e:s})});else for(o in e)l=n[o]||(n[o]=[]),o==="ease"||l.push({t:parseFloat(t),v:e[o],e:s})},Vi=function(t,e,n,r,s){return $t(t)?t.call(e,n,r,s):te(t)&&~t.indexOf("random(")?Gi(t):t},Fd=$l+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Ld={};Ie(Fd+",id,stagger,delay,duration,paused,scrollTrigger",function(i){return Ld[i]=1});var Kt=function(i){nd(t,i);function t(n,r,s,o){var l;typeof r=="number"&&(s.duration=r,r=s,s=null),l=i.call(this,o?r:Ci(r))||this;var u=l.vars,c=u.duration,h=u.delay,_=u.immediateRender,m=u.stagger,g=u.overwrite,E=u.keyframes,p=u.defaults,w=u.scrollTrigger,V=u.yoyoEase,S=r.parent||Ot,D=(_e(n)||id(n)?wn(n[0]):"length"in r)?[n]:ze(n),C,k,O,I,v,y,b,R;if(l._targets=D.length?Ul(D):zi("GSAP target "+n+" not found. https://gsap.com",!Fe.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=g,E||m||Vs(c)||Vs(h)){if(r=l.vars,C=l.timeline=new ge({data:"nested",defaults:p||{},targets:S&&S.data==="nested"?S.vars.targets:D}),C.kill(),C.parent=C._dp=gn(l),C._start=0,m||Vs(c)||Vs(h)){if(I=D.length,b=m&&wd(m),dn(m))for(v in m)~Fd.indexOf(v)&&(R||(R={}),R[v]=m[v]);for(k=0;k<I;k++)O=ro(r,Ld),O.stagger=0,V&&(O.yoyoEase=V),R&&_r(O,R),y=D[k],O.duration=+Vi(c,gn(l),k,y,D),O.delay=(+Vi(h,gn(l),k,y,D)||0)-l._delay,!m&&I===1&&O.delay&&(l._delay=h=O.delay,l._start+=h,O.delay=0),C.to(y,O,b?b(k,y,D):0),C._ease=mt.none;C.duration()?c=h=0:l.timeline=0}else if(E){Ci(qe(C.vars.defaults,{ease:"none"})),C._ease=or(E.ease||r.ease||"none");var P=0,A,Q,ot;if(_e(E))E.forEach(function(X){return C.to(D,X,">")}),C.duration();else{O={};for(v in E)v==="ease"||v==="easeEach"||Hv(v,E[v],O,E.easeEach);for(v in O)for(A=O[v].sort(function(X,ct){return X.t-ct.t}),P=0,k=0;k<A.length;k++)Q=A[k],ot={ease:Q.e,duration:(Q.t-(k?A[k-1].t:0))/100*c},ot[v]=Q.v,C.to(D,ot,P),P+=ot.duration;C.duration()<c&&C.to({},{duration:c-C.duration()})}}c||l.duration(c=C.duration())}else l.timeline=0;return g===!0&&!xl&&(Vn=gn(l),Ot.killTweensOf(D),Vn=0),nn(S,gn(l),s),r.reversed&&l.reverse(),r.paused&&l.paused(!0),(_||!c&&!E&&l._start===Zt(S._time)&&we(_)&&Iv(gn(l))&&S.data!=="nested")&&(l._tTime=-Pt,l.render(Math.max(0,-h)||0)),w&&yd(gn(l),w),l}var e=t.prototype;return e.render=function(r,s,o){var l=this._time,u=this._tDur,c=this._dur,h=r<0,_=r>u-Pt&&!h?u:r<Pt?0:r,m,g,E,p,w,V,S,D,C;if(!c)bv(this,r,s,o);else if(_!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==h){if(m=_,D=this.timeline,this._repeat){if(p=c+this._rDelay,this._repeat<-1&&h)return this.totalTime(p*100+r,s,o);if(m=Zt(_%p),_===u?(E=this._repeat,m=c):(E=~~(_/p),E&&E===Zt(_/p)&&(m=c,E--),m>c&&(m=c)),V=this._yoyo&&E&1,V&&(C=this._yEase,m=c-m),w=Kr(this._tTime,p),m===l&&!o&&this._initted&&E===w)return this._tTime=_,this;E!==w&&(D&&this._yEase&&xd(D,V),this.vars.repeatRefresh&&!V&&!this._lock&&this._time!==p&&this._initted&&(this._lock=o=1,this.render(Zt(p*E),!0).invalidate()._lock=0))}if(!this._initted){if(vd(this,h?r:m,o,s,_))return this._tTime=0,this;if(l!==this._time&&!(o&&this.vars.repeatRefresh&&E!==w))return this;if(c!==this._dur)return this.render(r,s,o)}if(this._tTime=_,this._time=m,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=S=(C||this._ease)(m/c),this._from&&(this.ratio=S=1-S),m&&!l&&!s&&!E&&(Oe(this,"onStart"),this._tTime!==_))return this;for(g=this._pt;g;)g.r(S,g.d),g=g._next;D&&D.render(r<0?r:D._dur*D._ease(m/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(h&&La(this,r,s,o),Oe(this,"onUpdate")),this._repeat&&E!==w&&this.vars.onRepeat&&!s&&this.parent&&Oe(this,"onRepeat"),(_===this._tDur||!_)&&this._tTime===_&&(h&&!this._onUpdate&&La(this,r,!0,!0),(r||!c)&&(_===this._tDur&&this._ts>0||!_&&this._ts<0)&&zn(this,1),!s&&!(h&&!l)&&(_||l||V)&&(Oe(this,_===u?"onComplete":"onReverseComplete",!0),this._prom&&!(_<u&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),i.prototype.invalidate.call(this,r)},e.resetTo=function(r,s,o,l,u){Hi||ke.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),h;return this._initted||jl(this,c),h=this._ease(c/this._dur),qv(this,r,s,o,l,h,c,u)?this.resetTo(r,s,o,l,1):(Po(this,0),this.parent||pd(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Ii(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,Vn&&Vn.vars.overwrite!==!0)._first||Ii(this),this.parent&&o!==this.timeline.totalDuration()&&Wr(this,this._dur*this.timeline._tDur/o,0,1),this}var l=this._targets,u=r?ze(r):l,c=this._ptLookup,h=this._pt,_,m,g,E,p,w,V;if((!s||s==="all")&&Ev(l,u))return s==="all"&&(this._pt=0),Ii(this);for(_=this._op=this._op||[],s!=="all"&&(te(s)&&(p={},Ie(s,function(S){return p[S]=1}),s=p),s=Gv(l,s)),V=l.length;V--;)if(~u.indexOf(l[V])){m=c[V],s==="all"?(_[V]=s,E=m,g={}):(g=_[V]=_[V]||{},E=s);for(p in E)w=m&&m[p],w&&((!("kill"in w.d)||w.d.kill(p)===!0)&&bo(this,w,"_pt"),delete m[p]),g!=="all"&&(g[p]=1)}return this._initted&&!this._pt&&h&&Ii(this),this},t.to=function(r,s){return new t(r,s,arguments[2])},t.from=function(r,s){return Di(1,arguments)},t.delayedCall=function(r,s,o,l){return new t(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:l})},t.fromTo=function(r,s,o){return Di(2,arguments)},t.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new t(r,s)},t.killTweensOf=function(r,s,o){return Ot.killTweensOf(r,s,o)},t}(Ki);qe(Kt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Ie("staggerTo,staggerFrom,staggerFromTo",function(i){Kt[i]=function(){var t=new ge,e=Ua.call(arguments,0);return e.splice(i==="staggerFromTo"?5:4,0,0),t[i].apply(t,e)}});var zl=function(t,e,n){return t[e]=n},$d=function(t,e,n){return t[e](n)},Kv=function(t,e,n,r){return t[e](r.fp,n)},Wv=function(t,e,n){return t.setAttribute(e,n)},ql=function(t,e){return $t(t[e])?$d:Ol(t[e])&&t.setAttribute?Wv:zl},Ud=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},Qv=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},Bd=function(t,e){var n=e._pt,r="";if(!t&&e.b)r=e.b;else if(t===1&&e.e)r=e.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*t):Math.round((n.s+n.c*t)*1e4)/1e4)+r,n=n._next;r+=e.c}e.set(e.t,e.p,r,e)},Gl=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},Xv=function(t,e,n,r){for(var s=this._pt,o;s;)o=s._next,s.p===r&&s.modifier(t,e,n),s=o},Yv=function(t){for(var e=this._pt,n,r;e;)r=e._next,e.p===t&&!e.op||e.op===t?bo(this,e,"_pt"):e.dep||(n=1),e=r;return!n},Jv=function(t,e,n,r){r.mSet(t,e,r.m.call(r.tween,n,r.mt),r)},jd=function(t){for(var e=t._pt,n,r,s,o;e;){for(n=e._next,r=s;r&&r.pr>e.pr;)r=r._next;(e._prev=r?r._prev:o)?e._prev._next=e:s=e,(e._next=r)?r._prev=e:o=e,e=n}t._pt=s},Ae=function(){function i(e,n,r,s,o,l,u,c,h){this.t=n,this.s=s,this.c=o,this.p=r,this.r=l||Ud,this.d=u||this,this.set=c||zl,this.pr=h||0,this._next=e,e&&(e._prev=this)}var t=i.prototype;return t.modifier=function(n,r,s){this.mSet=this.mSet||this.set,this.set=Jv,this.m=n,this.mt=s,this.tween=r},i}();Ie($l+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(i){return Ll[i]=1});Le.TweenMax=Le.TweenLite=Kt;Le.TimelineLite=Le.TimelineMax=ge;Ot=new ge({sortChildren:!1,defaults:Hr,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Fe.stringFilter=Vd;var ar=[],$s={},Zv=[],ah=0,tT=0,oa=function(t){return($s[t]||Zv).map(function(e){return e()})},qa=function(){var t=Date.now(),e=[];t-ah>2&&(oa("matchMediaInit"),ar.forEach(function(n){var r=n.queries,s=n.conditions,o,l,u,c;for(l in r)o=tn.matchMedia(r[l]).matches,o&&(u=1),o!==s[l]&&(s[l]=o,c=1);c&&(n.revert(),u&&e.push(n))}),oa("matchMediaRevert"),e.forEach(function(n){return n.onMatch(n,function(r){return n.add(null,r)})}),ah=t,oa("matchMedia"))},zd=function(){function i(e,n){this.selector=n&&Ba(n),this.data=[],this._r=[],this.isReverted=!1,this.id=tT++,e&&this.add(e)}var t=i.prototype;return t.add=function(n,r,s){$t(n)&&(s=r,r=n,n=$t);var o=this,l=function(){var c=kt,h=o.selector,_;return c&&c!==o&&c.data.push(o),s&&(o.selector=Ba(s)),kt=o,_=r.apply(o,arguments),$t(_)&&o._r.push(_),kt=c,o.selector=h,o.isReverted=!1,_};return o.last=l,n===$t?l(o,function(u){return o.add(null,u)}):n?o[n]=l:l},t.ignore=function(n){var r=kt;kt=null,n(this),kt=r},t.getTweens=function(){var n=[];return this.data.forEach(function(r){return r instanceof i?n.push.apply(n,r.getTweens()):r instanceof Kt&&!(r.parent&&r.parent.data==="nested")&&n.push(r)}),n},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(n,r){var s=this;if(n?function(){for(var l=s.getTweens(),u=s.data.length,c;u--;)c=s.data[u],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(h){return l.splice(l.indexOf(h),1)}));for(l.map(function(h){return{g:h._dur||h._delay||h._sat&&!h._sat.vars.immediateRender?h.globalTime(0):-1/0,t:h}}).sort(function(h,_){return _.g-h.g||-1/0}).forEach(function(h){return h.t.revert(n)}),u=s.data.length;u--;)c=s.data[u],c instanceof ge?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Kt)&&c.revert&&c.revert(n);s._r.forEach(function(h){return h(n,s)}),s.isReverted=!0}():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),r)for(var o=ar.length;o--;)ar[o].id===this.id&&ar.splice(o,1)},t.revert=function(n){this.kill(n||{})},i}(),eT=function(){function i(e){this.contexts=[],this.scope=e,kt&&kt.data.push(this)}var t=i.prototype;return t.add=function(n,r,s){dn(n)||(n={matches:n});var o=new zd(0,s||this.scope),l=o.conditions={},u,c,h;kt&&!o.selector&&(o.selector=kt.selector),this.contexts.push(o),r=o.add("onMatch",r),o.queries=n;for(c in n)c==="all"?h=1:(u=tn.matchMedia(n[c]),u&&(ar.indexOf(o)<0&&ar.push(o),(l[c]=u.matches)&&(h=1),u.addListener?u.addListener(qa):u.addEventListener("change",qa)));return h&&r(o,function(_){return o.add(null,_)}),this},t.revert=function(n){this.kill(n||{})},t.kill=function(n){this.contexts.forEach(function(r){return r.kill(n,!0)})},i}(),so={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(function(r){return Sd(r)})},timeline:function(t){return new ge(t)},getTweensOf:function(t,e){return Ot.getTweensOf(t,e)},getProperty:function(t,e,n,r){te(t)&&(t=ze(t)[0]);var s=ir(t||{}).get,o=n?md:_d;return n==="native"&&(n=""),t&&(e?o((Ve[e]&&Ve[e].get||s)(t,e,n,r)):function(l,u,c){return o((Ve[l]&&Ve[l].get||s)(t,l,u,c))})},quickSetter:function(t,e,n){if(t=ze(t),t.length>1){var r=t.map(function(h){return Pe.quickSetter(h,e,n)}),s=r.length;return function(h){for(var _=s;_--;)r[_](h)}}t=t[0]||{};var o=Ve[e],l=ir(t),u=l.harness&&(l.harness.aliases||{})[e]||e,c=o?function(h){var _=new o;Vr._pt=0,_.init(t,n?h+n:h,Vr,0,[t]),_.render(1,_),Vr._pt&&Gl(1,Vr)}:l.set(t,u);return o?c:function(h){return c(t,u,n?h+n:h,l,1)}},quickTo:function(t,e,n){var r,s=Pe.to(t,_r((r={},r[e]="+=0.1",r.paused=!0,r),n||{})),o=function(u,c,h){return s.resetTo(e,u,c,h)};return o.tween=s,o},isTweening:function(t){return Ot.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=or(t.ease,Hr.ease)),nh(Hr,t||{})},config:function(t){return nh(Fe,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,r=t.plugins,s=t.defaults,o=t.extendTimeline;(r||"").split(",").forEach(function(l){return l&&!Ve[l]&&!Le[l]&&zi(e+" effect requires "+l+" plugin.")}),na[e]=function(l,u,c){return n(ze(l),qe(u||{},s),c)},o&&(ge.prototype[e]=function(l,u,c){return this.add(na[e](l,dn(u)?u:(c=u)&&{},this),c)})},registerEase:function(t,e){mt[t]=or(e)},parseEase:function(t,e){return arguments.length?or(t,e):mt},getById:function(t){return Ot.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var n=new ge(t),r,s;for(n.smoothChildTiming=we(t.smoothChildTiming),Ot.remove(n),n._dp=0,n._time=n._tTime=Ot._time,r=Ot._first;r;)s=r._next,(e||!(!r._dur&&r instanceof Kt&&r.vars.onComplete===r._targets[0]))&&nn(n,r,r._start-r._delay),r=s;return nn(Ot,n,0),n},context:function(t,e){return t?new zd(t,e):kt},matchMedia:function(t){return new eT(t)},matchMediaRefresh:function(){return ar.forEach(function(t){var e=t.conditions,n,r;for(r in e)e[r]&&(e[r]=!1,n=1);n&&t.revert()})||qa()},addEventListener:function(t,e){var n=$s[t]||($s[t]=[]);~n.indexOf(e)||n.push(e)},removeEventListener:function(t,e){var n=$s[t],r=n&&n.indexOf(e);r>=0&&n.splice(r,1)},utils:{wrap:xv,wrapYoyo:Ov,distribute:wd,random:Ad,snap:Id,normalize:kv,getUnit:fe,clamp:Sv,splitColor:Cd,toArray:ze,selector:Ba,mapRange:Rd,pipe:Dv,unitize:Vv,interpolate:Nv,shuffle:Ed},install:ud,effects:na,ticker:ke,updateRoot:ge.updateRoot,plugins:Ve,globalTimeline:Ot,core:{PropTween:Ae,globals:cd,Tween:Kt,Timeline:ge,Animation:Ki,getCache:ir,_removeLinkedListItem:bo,reverting:function(){return de},context:function(t){return t&&kt&&(kt.data.push(t),t._ctx=kt),kt},suppressOverwrites:function(t){return xl=t}}};Ie("to,from,fromTo,delayedCall,set,killTweensOf",function(i){return so[i]=Kt[i]});ke.add(ge.updateRoot);Vr=so.to({},{duration:0});var nT=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},rT=function(t,e){var n=t._targets,r,s,o;for(r in e)for(s=n.length;s--;)o=t._ptLookup[s][r],o&&(o=o.d)&&(o._pt&&(o=nT(o,r)),o&&o.modifier&&o.modifier(e[r],t,n[s],r))},aa=function(t,e){return{name:t,rawVars:1,init:function(r,s,o){o._onInit=function(l){var u,c;if(te(s)&&(u={},Ie(s,function(h){return u[h]=1}),s=u),e){u={};for(c in s)u[c]=e(s[c]);s=u}rT(l,s)}}}},Pe=so.registerPlugin({name:"attr",init:function(t,e,n,r,s){var o,l,u;this.tween=n;for(o in e)u=t.getAttribute(o)||"",l=this.add(t,"setAttribute",(u||0)+"",e[o],r,s,0,0,o),l.op=o,l.b=u,this._props.push(o)},render:function(t,e){for(var n=e._pt;n;)de?n.set(n.t,n.p,n.b,n):n.r(t,n.d),n=n._next}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n],0,0,0,0,0,1)}},aa("roundProps",ja),aa("modifiers"),aa("snap",Id))||so;Kt.version=ge.version=Pe.version="3.12.5";ld=1;Nl()&&Qr();mt.Power0;mt.Power1;mt.Power2;mt.Power3;mt.Power4;mt.Linear;mt.Quad;mt.Cubic;mt.Quart;mt.Quint;mt.Strong;mt.Elastic;mt.Back;mt.SteppedEase;mt.Bounce;mt.Sine;mt.Expo;mt.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var lh,kn,Nr,Hl,nr,uh,Kl,iT=function(){return typeof window<"u"},In={},tr=180/Math.PI,Mr=Math.PI/180,Rr=Math.atan2,ch=1e8,Wl=/([A-Z])/g,sT=/(left|right|width|margin|padding|x)/i,oT=/[\s,\(]\S/,on={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Ga=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},aT=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},lT=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},uT=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},qd=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},Gd=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},cT=function(t,e,n){return t.style[e]=n},hT=function(t,e,n){return t.style.setProperty(e,n)},fT=function(t,e,n){return t._gsap[e]=n},dT=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},_T=function(t,e,n,r,s){var o=t._gsap;o.scaleX=o.scaleY=n,o.renderTransform(s,o)},mT=function(t,e,n,r,s){var o=t._gsap;o[e]=n,o.renderTransform(s,o)},Nt="transform",be=Nt+"Origin",pT=function i(t,e){var n=this,r=this.target,s=r.style,o=r._gsap;if(t in In&&s){if(this.tfm=this.tfm||{},t!=="transform")t=on[t]||t,~t.indexOf(",")?t.split(",").forEach(function(l){return n.tfm[l]=yn(r,l)}):this.tfm[t]=o.x?o[t]:yn(r,t),t===be&&(this.tfm.zOrigin=o.zOrigin);else return on.transform.split(",").forEach(function(l){return i.call(n,l,e)});if(this.props.indexOf(Nt)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(be,e,"")),t=Nt}(s||e)&&this.props.push(t,e,s[t])},Hd=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},gT=function(){var t=this.props,e=this.target,n=e.style,r=e._gsap,s,o;for(s=0;s<t.length;s+=3)t[s+1]?e[t[s]]=t[s+2]:t[s+2]?n[t[s]]=t[s+2]:n.removeProperty(t[s].substr(0,2)==="--"?t[s]:t[s].replace(Wl,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),s=Kl(),(!s||!s.isStart)&&!n[Nt]&&(Hd(n),r.zOrigin&&n[be]&&(n[be]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},Kd=function(t,e){var n={target:t,props:[],revert:gT,save:pT};return t._gsap||Pe.core.getCache(t),e&&e.split(",").forEach(function(r){return n.save(r)}),n},Wd,Ha=function(t,e){var n=kn.createElementNS?kn.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):kn.createElement(t);return n&&n.style?n:kn.createElement(t)},un=function i(t,e,n){var r=getComputedStyle(t);return r[e]||r.getPropertyValue(e.replace(Wl,"-$1").toLowerCase())||r.getPropertyValue(e)||!n&&i(t,Xr(e)||e,1)||""},hh="O,Moz,ms,Ms,Webkit".split(","),Xr=function(t,e,n){var r=e||nr,s=r.style,o=5;if(t in s&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);o--&&!(hh[o]+t in s););return o<0?null:(o===3?"ms":o>=0?hh[o]:"")+t},Ka=function(){iT()&&window.document&&(lh=window,kn=lh.document,Nr=kn.documentElement,nr=Ha("div")||{style:{}},Ha("div"),Nt=Xr(Nt),be=Nt+"Origin",nr.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Wd=!!Xr("perspective"),Kl=Pe.core.reverting,Hl=1)},la=function i(t){var e=Ha("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,s=this.style.cssText,o;if(Nr.appendChild(e),e.appendChild(this),this.style.display="block",t)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=i}catch{}else this._gsapBBox&&(o=this._gsapBBox());return n&&(r?n.insertBefore(this,r):n.appendChild(this)),Nr.removeChild(e),this.style.cssText=s,o},fh=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},Qd=function(t){var e;try{e=t.getBBox()}catch{e=la.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===la||(e=la.call(t,!0)),e&&!e.width&&!e.x&&!e.y?{x:+fh(t,["x","cx","x1"])||0,y:+fh(t,["y","cy","y1"])||0,width:0,height:0}:e},Xd=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&Qd(t))},mr=function(t,e){if(e){var n=t.style,r;e in In&&e!==be&&(e=Nt),n.removeProperty?(r=e.substr(0,2),(r==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),n.removeProperty(r==="--"?e:e.replace(Wl,"-$1").toLowerCase())):n.removeAttribute(e)}},xn=function(t,e,n,r,s,o){var l=new Ae(t._pt,e,n,0,1,o?Gd:qd);return t._pt=l,l.b=r,l.e=s,t._props.push(n),l},dh={deg:1,rad:1,turn:1},yT={grid:1,flex:1},qn=function i(t,e,n,r){var s=parseFloat(n)||0,o=(n+"").trim().substr((s+"").length)||"px",l=nr.style,u=sT.test(e),c=t.tagName.toLowerCase()==="svg",h=(c?"client":"offset")+(u?"Width":"Height"),_=100,m=r==="px",g=r==="%",E,p,w,V;if(r===o||!s||dh[r]||dh[o])return s;if(o!=="px"&&!m&&(s=i(t,e,n,"px")),V=t.getCTM&&Xd(t),(g||o==="%")&&(In[e]||~e.indexOf("adius")))return E=V?t.getBBox()[u?"width":"height"]:t[h],Bt(g?s/E*_:s/100*E);if(l[u?"width":"height"]=_+(m?o:r),p=~e.indexOf("adius")||r==="em"&&t.appendChild&&!c?t:t.parentNode,V&&(p=(t.ownerSVGElement||{}).parentNode),(!p||p===kn||!p.appendChild)&&(p=kn.body),w=p._gsap,w&&g&&w.width&&u&&w.time===ke.time&&!w.uncache)return Bt(s/w.width*_);if(g&&(e==="height"||e==="width")){var S=t.style[e];t.style[e]=_+r,E=t[h],S?t.style[e]=S:mr(t,e)}else(g||o==="%")&&!yT[un(p,"display")]&&(l.position=un(t,"position")),p===t&&(l.position="static"),p.appendChild(nr),E=nr[h],p.removeChild(nr),l.position="absolute";return u&&g&&(w=ir(p),w.time=ke.time,w.width=p[h]),Bt(m?E*s/_:E&&s?_/E*s:0)},yn=function(t,e,n,r){var s;return Hl||Ka(),e in on&&e!=="transform"&&(e=on[e],~e.indexOf(",")&&(e=e.split(",")[0])),In[e]&&e!=="transform"?(s=Qi(t,r),s=e!=="transformOrigin"?s[e]:s.svg?s.origin:ao(un(t,be))+" "+s.zOrigin+"px"):(s=t.style[e],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=oo[e]&&oo[e](t,e,n)||un(t,e)||fd(t,e)||(e==="opacity"?1:0))),n&&!~(s+"").trim().indexOf(" ")?qn(t,e,s,n)+n:s},vT=function(t,e,n,r){if(!n||n==="none"){var s=Xr(e,t,1),o=s&&un(t,s,1);o&&o!==n?(e=s,n=o):e==="borderColor"&&(n=un(t,"borderTopColor"))}var l=new Ae(this._pt,t.style,e,0,1,Bd),u=0,c=0,h,_,m,g,E,p,w,V,S,D,C,k;if(l.b=n,l.e=r,n+="",r+="",r==="auto"&&(p=t.style[e],t.style[e]=r,r=un(t,e)||r,p?t.style[e]=p:mr(t,e)),h=[n,r],Vd(h),n=h[0],r=h[1],m=n.match(Dr)||[],k=r.match(Dr)||[],k.length){for(;_=Dr.exec(r);)w=_[0],S=r.substring(u,_.index),E?E=(E+1)%5:(S.substr(-5)==="rgba("||S.substr(-5)==="hsla(")&&(E=1),w!==(p=m[c++]||"")&&(g=parseFloat(p)||0,C=p.substr((g+"").length),w.charAt(1)==="="&&(w=Or(g,w)+C),V=parseFloat(w),D=w.substr((V+"").length),u=Dr.lastIndex-D.length,D||(D=D||Fe.units[e]||C,u===r.length&&(r+=D,l.e+=D)),C!==D&&(g=qn(t,e,p,D)||0),l._pt={_next:l._pt,p:S||c===1?S:",",s:g,c:V-g,m:E&&E<4||e==="zIndex"?Math.round:0});l.c=u<r.length?r.substring(u,r.length):""}else l.r=e==="display"&&r==="none"?Gd:qd;return od.test(r)&&(l.e=0),this._pt=l,l},_h={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},TT=function(t){var e=t.split(" "),n=e[0],r=e[1]||"50%";return(n==="top"||n==="bottom"||r==="left"||r==="right")&&(t=n,n=r,r=t),e[0]=_h[n]||n,e[1]=_h[r]||r,e.join(" ")},ET=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n=e.t,r=n.style,s=e.u,o=n._gsap,l,u,c;if(s==="all"||s===!0)r.cssText="",u=1;else for(s=s.split(","),c=s.length;--c>-1;)l=s[c],In[l]&&(u=1,l=l==="transformOrigin"?be:Nt),mr(n,l);u&&(mr(n,Nt),o&&(o.svg&&n.removeAttribute("transform"),Qi(n,1),o.uncache=1,Hd(r)))}},oo={clearProps:function(t,e,n,r,s){if(s.data!=="isFromStart"){var o=t._pt=new Ae(t._pt,e,n,0,0,ET);return o.u=r,o.pr=-10,o.tween=s,t._props.push(n),1}}},Wi=[1,0,0,1,0,0],Yd={},Jd=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},mh=function(t){var e=un(t,Nt);return Jd(e)?Wi:e.substr(7).match(sd).map(Bt)},Ql=function(t,e){var n=t._gsap||ir(t),r=t.style,s=mh(t),o,l,u,c;return n.svg&&t.getAttribute("transform")?(u=t.transform.baseVal.consolidate().matrix,s=[u.a,u.b,u.c,u.d,u.e,u.f],s.join(",")==="1,0,0,1,0,0"?Wi:s):(s===Wi&&!t.offsetParent&&t!==Nr&&!n.svg&&(u=r.display,r.display="block",o=t.parentNode,(!o||!t.offsetParent)&&(c=1,l=t.nextElementSibling,Nr.appendChild(t)),s=mh(t),u?r.display=u:mr(t,"display"),c&&(l?o.insertBefore(t,l):o?o.appendChild(t):Nr.removeChild(t))),e&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},Wa=function(t,e,n,r,s,o){var l=t._gsap,u=s||Ql(t,!0),c=l.xOrigin||0,h=l.yOrigin||0,_=l.xOffset||0,m=l.yOffset||0,g=u[0],E=u[1],p=u[2],w=u[3],V=u[4],S=u[5],D=e.split(" "),C=parseFloat(D[0])||0,k=parseFloat(D[1])||0,O,I,v,y;n?u!==Wi&&(I=g*w-E*p)&&(v=C*(w/I)+k*(-p/I)+(p*S-w*V)/I,y=C*(-E/I)+k*(g/I)-(g*S-E*V)/I,C=v,k=y):(O=Qd(t),C=O.x+(~D[0].indexOf("%")?C/100*O.width:C),k=O.y+(~(D[1]||D[0]).indexOf("%")?k/100*O.height:k)),r||r!==!1&&l.smooth?(V=C-c,S=k-h,l.xOffset=_+(V*g+S*p)-V,l.yOffset=m+(V*E+S*w)-S):l.xOffset=l.yOffset=0,l.xOrigin=C,l.yOrigin=k,l.smooth=!!r,l.origin=e,l.originIsAbsolute=!!n,t.style[be]="0px 0px",o&&(xn(o,l,"xOrigin",c,C),xn(o,l,"yOrigin",h,k),xn(o,l,"xOffset",_,l.xOffset),xn(o,l,"yOffset",m,l.yOffset)),t.setAttribute("data-svg-origin",C+" "+k)},Qi=function(t,e){var n=t._gsap||new Nd(t);if("x"in n&&!e&&!n.uncache)return n;var r=t.style,s=n.scaleX<0,o="px",l="deg",u=getComputedStyle(t),c=un(t,be)||"0",h,_,m,g,E,p,w,V,S,D,C,k,O,I,v,y,b,R,P,A,Q,ot,X,ct,j,ut,dt,U,ht,vt,jt,zt;return h=_=m=p=w=V=S=D=C=0,g=E=1,n.svg=!!(t.getCTM&&Xd(t)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(r[Nt]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[Nt]!=="none"?u[Nt]:"")),r.scale=r.rotate=r.translate="none"),I=Ql(t,n.svg),n.svg&&(n.uncache?(j=t.getBBox(),c=n.xOrigin-j.x+"px "+(n.yOrigin-j.y)+"px",ct=""):ct=!e&&t.getAttribute("data-svg-origin"),Wa(t,ct||c,!!ct||n.originIsAbsolute,n.smooth!==!1,I)),k=n.xOrigin||0,O=n.yOrigin||0,I!==Wi&&(R=I[0],P=I[1],A=I[2],Q=I[3],h=ot=I[4],_=X=I[5],I.length===6?(g=Math.sqrt(R*R+P*P),E=Math.sqrt(Q*Q+A*A),p=R||P?Rr(P,R)*tr:0,S=A||Q?Rr(A,Q)*tr+p:0,S&&(E*=Math.abs(Math.cos(S*Mr))),n.svg&&(h-=k-(k*R+O*A),_-=O-(k*P+O*Q))):(zt=I[6],vt=I[7],dt=I[8],U=I[9],ht=I[10],jt=I[11],h=I[12],_=I[13],m=I[14],v=Rr(zt,ht),w=v*tr,v&&(y=Math.cos(-v),b=Math.sin(-v),ct=ot*y+dt*b,j=X*y+U*b,ut=zt*y+ht*b,dt=ot*-b+dt*y,U=X*-b+U*y,ht=zt*-b+ht*y,jt=vt*-b+jt*y,ot=ct,X=j,zt=ut),v=Rr(-A,ht),V=v*tr,v&&(y=Math.cos(-v),b=Math.sin(-v),ct=R*y-dt*b,j=P*y-U*b,ut=A*y-ht*b,jt=Q*b+jt*y,R=ct,P=j,A=ut),v=Rr(P,R),p=v*tr,v&&(y=Math.cos(v),b=Math.sin(v),ct=R*y+P*b,j=ot*y+X*b,P=P*y-R*b,X=X*y-ot*b,R=ct,ot=j),w&&Math.abs(w)+Math.abs(p)>359.9&&(w=p=0,V=180-V),g=Bt(Math.sqrt(R*R+P*P+A*A)),E=Bt(Math.sqrt(X*X+zt*zt)),v=Rr(ot,X),S=Math.abs(v)>2e-4?v*tr:0,C=jt?1/(jt<0?-jt:jt):0),n.svg&&(ct=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!Jd(un(t,Nt)),ct&&t.setAttribute("transform",ct))),Math.abs(S)>90&&Math.abs(S)<270&&(s?(g*=-1,S+=p<=0?180:-180,p+=p<=0?180:-180):(E*=-1,S+=S<=0?180:-180)),e=e||n.uncache,n.x=h-((n.xPercent=h&&(!e&&n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-h)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+o,n.y=_-((n.yPercent=_&&(!e&&n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-_)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+o,n.z=m+o,n.scaleX=Bt(g),n.scaleY=Bt(E),n.rotation=Bt(p)+l,n.rotationX=Bt(w)+l,n.rotationY=Bt(V)+l,n.skewX=S+l,n.skewY=D+l,n.transformPerspective=C+o,(n.zOrigin=parseFloat(c.split(" ")[2])||!e&&n.zOrigin||0)&&(r[be]=ao(c)),n.xOffset=n.yOffset=0,n.force3D=Fe.force3D,n.renderTransform=n.svg?IT:Wd?Zd:wT,n.uncache=0,n},ao=function(t){return(t=t.split(" "))[0]+" "+t[1]},ua=function(t,e,n){var r=fe(e);return Bt(parseFloat(e)+parseFloat(qn(t,"x",n+"px",r)))+r},wT=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Zd(t,e)},Yn="0deg",yi="0px",Jn=") ",Zd=function(t,e){var n=e||this,r=n.xPercent,s=n.yPercent,o=n.x,l=n.y,u=n.z,c=n.rotation,h=n.rotationY,_=n.rotationX,m=n.skewX,g=n.skewY,E=n.scaleX,p=n.scaleY,w=n.transformPerspective,V=n.force3D,S=n.target,D=n.zOrigin,C="",k=V==="auto"&&t&&t!==1||V===!0;if(D&&(_!==Yn||h!==Yn)){var O=parseFloat(h)*Mr,I=Math.sin(O),v=Math.cos(O),y;O=parseFloat(_)*Mr,y=Math.cos(O),o=ua(S,o,I*y*-D),l=ua(S,l,-Math.sin(O)*-D),u=ua(S,u,v*y*-D+D)}w!==yi&&(C+="perspective("+w+Jn),(r||s)&&(C+="translate("+r+"%, "+s+"%) "),(k||o!==yi||l!==yi||u!==yi)&&(C+=u!==yi||k?"translate3d("+o+", "+l+", "+u+") ":"translate("+o+", "+l+Jn),c!==Yn&&(C+="rotate("+c+Jn),h!==Yn&&(C+="rotateY("+h+Jn),_!==Yn&&(C+="rotateX("+_+Jn),(m!==Yn||g!==Yn)&&(C+="skew("+m+", "+g+Jn),(E!==1||p!==1)&&(C+="scale("+E+", "+p+Jn),S.style[Nt]=C||"translate(0, 0)"},IT=function(t,e){var n=e||this,r=n.xPercent,s=n.yPercent,o=n.x,l=n.y,u=n.rotation,c=n.skewX,h=n.skewY,_=n.scaleX,m=n.scaleY,g=n.target,E=n.xOrigin,p=n.yOrigin,w=n.xOffset,V=n.yOffset,S=n.forceCSS,D=parseFloat(o),C=parseFloat(l),k,O,I,v,y;u=parseFloat(u),c=parseFloat(c),h=parseFloat(h),h&&(h=parseFloat(h),c+=h,u+=h),u||c?(u*=Mr,c*=Mr,k=Math.cos(u)*_,O=Math.sin(u)*_,I=Math.sin(u-c)*-m,v=Math.cos(u-c)*m,c&&(h*=Mr,y=Math.tan(c-h),y=Math.sqrt(1+y*y),I*=y,v*=y,h&&(y=Math.tan(h),y=Math.sqrt(1+y*y),k*=y,O*=y)),k=Bt(k),O=Bt(O),I=Bt(I),v=Bt(v)):(k=_,v=m,O=I=0),(D&&!~(o+"").indexOf("px")||C&&!~(l+"").indexOf("px"))&&(D=qn(g,"x",o,"px"),C=qn(g,"y",l,"px")),(E||p||w||V)&&(D=Bt(D+E-(E*k+p*I)+w),C=Bt(C+p-(E*O+p*v)+V)),(r||s)&&(y=g.getBBox(),D=Bt(D+r/100*y.width),C=Bt(C+s/100*y.height)),y="matrix("+k+","+O+","+I+","+v+","+D+","+C+")",g.setAttribute("transform",y),S&&(g.style[Nt]=y)},AT=function(t,e,n,r,s){var o=360,l=te(s),u=parseFloat(s)*(l&&~s.indexOf("rad")?tr:1),c=u-r,h=r+c+"deg",_,m;return l&&(_=s.split("_")[1],_==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),_==="cw"&&c<0?c=(c+o*ch)%o-~~(c/o)*o:_==="ccw"&&c>0&&(c=(c-o*ch)%o-~~(c/o)*o)),t._pt=m=new Ae(t._pt,e,n,r,c,aT),m.e=h,m.u="deg",t._props.push(n),m},ph=function(t,e){for(var n in e)t[n]=e[n];return t},bT=function(t,e,n){var r=ph({},n._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=n.style,l,u,c,h,_,m,g,E;r.svg?(c=n.getAttribute("transform"),n.setAttribute("transform",""),o[Nt]=e,l=Qi(n,1),mr(n,Nt),n.setAttribute("transform",c)):(c=getComputedStyle(n)[Nt],o[Nt]=e,l=Qi(n,1),o[Nt]=c);for(u in In)c=r[u],h=l[u],c!==h&&s.indexOf(u)<0&&(g=fe(c),E=fe(h),_=g!==E?qn(n,u,c,E):parseFloat(c),m=parseFloat(h),t._pt=new Ae(t._pt,l,u,_,m-_,Ga),t._pt.u=E||0,t._props.push(u));ph(l,r)};Ie("padding,margin,Width,Radius",function(i,t){var e="Top",n="Right",r="Bottom",s="Left",o=(t<3?[e,n,r,s]:[e+s,e+n,r+n,r+s]).map(function(l){return t<2?i+l:"border"+l+i});oo[t>1?"border"+i:i]=function(l,u,c,h,_){var m,g;if(arguments.length<4)return m=o.map(function(E){return yn(l,E,c)}),g=m.join(" "),g.split(m[0]).length===5?m[0]:g;m=(h+"").split(" "),g={},o.forEach(function(E,p){return g[E]=m[p]=m[p]||m[(p-1)/2|0]}),l.init(u,g,_)}});var t_={name:"css",register:Ka,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,r,s){var o=this._props,l=t.style,u=n.vars.startAt,c,h,_,m,g,E,p,w,V,S,D,C,k,O,I,v;Hl||Ka(),this.styles=this.styles||Kd(t),v=this.styles.props,this.tween=n;for(p in e)if(p!=="autoRound"&&(h=e[p],!(Ve[p]&&Md(p,e,n,r,t,s)))){if(g=typeof h,E=oo[p],g==="function"&&(h=h.call(n,r,t,s),g=typeof h),g==="string"&&~h.indexOf("random(")&&(h=Gi(h)),E)E(this,t,p,h,n)&&(I=1);else if(p.substr(0,2)==="--")c=(getComputedStyle(t).getPropertyValue(p)+"").trim(),h+="",Ln.lastIndex=0,Ln.test(c)||(w=fe(c),V=fe(h)),V?w!==V&&(c=qn(t,p,c,V)+V):w&&(h+=w),this.add(l,"setProperty",c,h,r,s,0,0,p),o.push(p),v.push(p,0,l[p]);else if(g!=="undefined"){if(u&&p in u?(c=typeof u[p]=="function"?u[p].call(n,r,t,s):u[p],te(c)&&~c.indexOf("random(")&&(c=Gi(c)),fe(c+"")||c==="auto"||(c+=Fe.units[p]||fe(yn(t,p))||""),(c+"").charAt(1)==="="&&(c=yn(t,p))):c=yn(t,p),m=parseFloat(c),S=g==="string"&&h.charAt(1)==="="&&h.substr(0,2),S&&(h=h.substr(2)),_=parseFloat(h),p in on&&(p==="autoAlpha"&&(m===1&&yn(t,"visibility")==="hidden"&&_&&(m=0),v.push("visibility",0,l.visibility),xn(this,l,"visibility",m?"inherit":"hidden",_?"inherit":"hidden",!_)),p!=="scale"&&p!=="transform"&&(p=on[p],~p.indexOf(",")&&(p=p.split(",")[0]))),D=p in In,D){if(this.styles.save(p),C||(k=t._gsap,k.renderTransform&&!e.parseTransform||Qi(t,e.parseTransform),O=e.smoothOrigin!==!1&&k.smooth,C=this._pt=new Ae(this._pt,l,Nt,0,1,k.renderTransform,k,0,-1),C.dep=1),p==="scale")this._pt=new Ae(this._pt,k,"scaleY",k.scaleY,(S?Or(k.scaleY,S+_):_)-k.scaleY||0,Ga),this._pt.u=0,o.push("scaleY",p),p+="X";else if(p==="transformOrigin"){v.push(be,0,l[be]),h=TT(h),k.svg?Wa(t,h,0,O,0,this):(V=parseFloat(h.split(" ")[2])||0,V!==k.zOrigin&&xn(this,k,"zOrigin",k.zOrigin,V),xn(this,l,p,ao(c),ao(h)));continue}else if(p==="svgOrigin"){Wa(t,h,1,O,0,this);continue}else if(p in Yd){AT(this,k,p,m,S?Or(m,S+h):h);continue}else if(p==="smoothOrigin"){xn(this,k,"smooth",k.smooth,h);continue}else if(p==="force3D"){k[p]=h;continue}else if(p==="transform"){bT(this,h,t);continue}}else p in l||(p=Xr(p)||p);if(D||(_||_===0)&&(m||m===0)&&!oT.test(h)&&p in l)w=(c+"").substr((m+"").length),_||(_=0),V=fe(h)||(p in Fe.units?Fe.units[p]:w),w!==V&&(m=qn(t,p,c,V)),this._pt=new Ae(this._pt,D?k:l,p,m,(S?Or(m,S+_):_)-m,!D&&(V==="px"||p==="zIndex")&&e.autoRound!==!1?uT:Ga),this._pt.u=V||0,w!==V&&V!=="%"&&(this._pt.b=c,this._pt.r=lT);else if(p in l)vT.call(this,t,p,c,S?S+h:h);else if(p in t)this.add(t,p,c||t[p],S?S+h:h,r,s);else if(p!=="parseTransform"){Fl(p,h);continue}D||(p in l?v.push(p,0,l[p]):v.push(p,1,c||t[p])),o.push(p)}}I&&jd(this)},render:function(t,e){if(e.tween._time||!Kl())for(var n=e._pt;n;)n.r(t,n.d),n=n._next;else e.styles.revert()},get:yn,aliases:on,getSetter:function(t,e,n){var r=on[e];return r&&r.indexOf(",")<0&&(e=r),e in In&&e!==be&&(t._gsap.x||yn(t,"x"))?n&&uh===n?e==="scale"?dT:fT:(uh=n||{})&&(e==="scale"?_T:mT):t.style&&!Ol(t.style[e])?cT:~e.indexOf("-")?hT:ql(t,e)},core:{_removeProperty:mr,_getMatrix:Ql}};Pe.utils.checkPrefix=Xr;Pe.core.getStyleSaver=Kd;(function(i,t,e,n){var r=Ie(i+","+t+","+e,function(s){In[s]=1});Ie(t,function(s){Fe.units[s]="deg",Yd[s]=1}),on[r[13]]=i+","+t,Ie(n,function(s){var o=s.split(":");on[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Ie("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(i){Fe.units[i]="px"});Pe.registerPlugin(t_);var e_=Pe.registerPlugin(t_)||Pe;e_.core.Tween;function gh(i){let t,e="Geselecteerd Bestand:",n,r,s=i[0].name+"",o;return{c(){t=z("p"),t.textContent=e,n=tt(),r=z("pre"),o=nt(s),this.h()},l(l){t=q(l,"P",{class:!0,"data-svelte-h":!0}),cn(t)!=="svelte-zs65m6"&&(t.textContent=e),n=et(l),r=q(l,"PRE",{class:!0});var u=Y(r);o=rt(u,s),u.forEach(M),this.h()},h(){K(t,"class","font-bold text-center"),K(r,"class","text-center")},m(l,u){H(l,t,u),H(l,n,u),H(l,r,u),F(r,o)},p(l,u){u&1&&s!==(s=l[0].name+"")&&Lt(o,s)},d(l){l&&(M(t),M(n),M(r))}}}function RT(i){let t;return{c(){t=nt("Upload")},l(e){t=rt(e,"Upload")},m(e,n){H(e,t,n)},d(e){e&&M(t)}}}function PT(i){let t;return{c(){t=nt("Terug")},l(e){t=rt(e,"Terug")},m(e,n){H(e,t,n)},d(e){e&&M(t)}}}function ST(i){let t,e,n,r="Selecteer een bestand",s,o,l,u,c,h,_,m,g=i[0]&&gh(i);return l=new Ee({props:{class:"my-2",$$slots:{default:[RT]},$$scope:{ctx:i}}}),l.$on("click",i[3]),c=new Ee({props:{theme:"red",class:"my-2",$$slots:{default:[PT]},$$scope:{ctx:i}}}),c.$on("click",i[5]),{c(){t=z("input"),e=tt(),n=z("label"),n.textContent=r,s=tt(),g&&g.c(),o=tt(),It(l.$$.fragment),u=tt(),It(c.$$.fragment),this.h()},l(E){t=q(E,"INPUT",{id:!0,class:!0,type:!0,accept:!0}),e=et(E),n=q(E,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),cn(n)!=="svelte-1fxuazo"&&(n.textContent=r),s=et(E),g&&g.l(E),o=et(E),At(l.$$.fragment,E),u=et(E),At(c.$$.fragment,E),this.h()},h(){K(t,"id","file-upload"),K(t,"class","hidden"),K(t,"type","file"),K(t,"accept","text/csv"),K(n,"for","file-upload"),K(n,"class","my-2 bg-blue-500 text-white px-5 rounded-md py-3 cursor-pointer")},m(E,p){H(E,t,p),i[4](t),H(E,e,p),H(E,n,p),H(E,s,p),g&&g.m(E,p),H(E,o,p),bt(l,E,p),H(E,u,p),bt(c,E,p),h=!0,_||(m=uo(t,"change",i[2]),_=!0)},p(E,p){E[0]?g?g.p(E,p):(g=gh(E),g.c(),g.m(o.parentNode,o)):g&&(g.d(1),g=null);const w={};p&2048&&(w.$$scope={dirty:p,ctx:E}),l.$set(w);const V={};p&2048&&(V.$$scope={dirty:p,ctx:E}),c.$set(V)},i(E){h||(J(l.$$.fragment,E),J(c.$$.fragment,E),h=!0)},o(E){it(l.$$.fragment,E),it(c.$$.fragment,E),h=!1},d(E){E&&(M(t),M(e),M(n),M(s),M(o),M(u)),i[4](null),g&&g.d(E),Rt(l,E),Rt(c,E),_=!1,m()}}}function CT(i){let t,e;return t=new ts({props:{$$slots:{default:[ST]},$$scope:{ctx:i}}}),{c(){It(t.$$.fragment)},l(n){At(t.$$.fragment,n)},m(n,r){bt(t,n,r),e=!0},p(n,[r]){const s={};r&2051&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(J(t.$$.fragment,n),e=!0)},o(n){it(t.$$.fragment,n),e=!1},d(n){Rt(t,n)}}}function DT(i,t,e){let n=null,r,s=[],o=null,l=null;function u(E){var C,k;const p=E.target,w=(C=p.files)==null?void 0:C[0];if(!w)return;const V=(k=w.name.split(".").pop())==null?void 0:k.toLowerCase(),S=w.type;if(!["text/csv","application/vnd.ms-excel"].includes(S)||V!=="csv"){alert("Ongeldig of niet-ondersteund bestandstype. Upload een CSV-bestand."),p.value="";return}e(0,n=w)}function c(){if(!n){alert("Selecteer een bestand.");return}h(),alert("Upload successvol."),e(1,r.value="",r),e(0,n=null)}function h(){const E=new FileReader;E.onload=function(p){var w;try{const S=((w=p.target)==null?void 0:w.result).split("\r").filter(O=>O.trim()!=="");if(S.length<2){alert("CSV bevat geen data.");return}const D=S[0].split(";"),C=D.indexOf("naam"),k=D.indexOf("maximaal");if(C===-1||k===-1){alert("CSV-bestand bevat niet de vereiste headers.");return}s=[],o=null,l=null;for(let O=1;O<S.length;O++){const I=S[O].split(";").map(v=>v.trim().replace("/r",""));if(I[C])if(I[C].includes("budget"))o={maximaal:I[k]};else if(I[C].includes("doel"))l={maximaal:I[k]};else{const v={};for(let y=0;y<D.length;y++)v[D[y]]=I[y];s.push(v)}}}catch(V){alert("Er is een fout opgetreden tijdens het verwerken van het bestand."),console.error(V)}},E.onerror=function(){alert("Er is een fout opgetreden tijdens het lezen van het bestand.")},E.onloadend=function(){_()},n&&E.readAsText(n)}const _=async()=>{try{const E=s.map(D=>D.id),p=await to(qr(en,"maatregelen")),w=await to(qr(en,"doelen")),V=k0(en);p.docs.forEach(D=>{E.includes(D.id)||V.delete(D.ref)}),s.forEach(D=>{const C=Va(en,"maatregelen",D.id);V.set(C,D,{merge:!0})});const S=Va(en,"doelen","taalgroeiers");o&&V.set(S,{budget:o.maximaal},{merge:!0}),l&&V.set(S,{doel:l.maximaal},{merge:!0}),await V.commit(),console.log("Firestore updated successfully.")}catch(E){alert("Er is een fout opgetreden bij het opslaan van het bestand in Firestore."),console.error(E)}};function m(E){ki[E?"unshift":"push"](()=>{r=E,e(1,r)})}return[n,r,u,c,m,()=>Ke.set(0)]}class VT extends Qe{constructor(t){super(),Xe(this,t,DT,CT,Ge,{})}}function kT(i){let t,e,n,r,s,o,l,u,c,h,_,m,g,E,p,w,V,S,D;return n=new G0({}),o=new hv({}),c=new nv({}),m=new X0({}),p=new sm({}),S=new VT({}),{c(){t=z("div"),e=z("div"),It(n.$$.fragment),r=tt(),s=z("div"),It(o.$$.fragment),l=tt(),u=z("div"),It(c.$$.fragment),h=tt(),_=z("div"),It(m.$$.fragment),g=tt(),E=z("div"),It(p.$$.fragment),w=tt(),V=z("div"),It(S.$$.fragment),this.h()},l(C){t=q(C,"DIV",{class:!0});var k=Y(t);e=q(k,"DIV",{class:!0});var O=Y(e);At(n.$$.fragment,O),O.forEach(M),r=et(k),s=q(k,"DIV",{class:!0});var I=Y(s);At(o.$$.fragment,I),I.forEach(M),l=et(k),u=q(k,"DIV",{class:!0});var v=Y(u);At(c.$$.fragment,v),v.forEach(M),h=et(k),_=q(k,"DIV",{class:!0});var y=Y(_);At(m.$$.fragment,y),y.forEach(M),g=et(k),E=q(k,"DIV",{class:!0});var b=Y(E);At(p.$$.fragment,b),b.forEach(M),w=et(k),V=q(k,"DIV",{class:!0});var R=Y(V);At(S.$$.fragment,R),R.forEach(M),k.forEach(M),this.h()},h(){K(e,"class","h-screen flex justify-center items-center w-screen"),K(s,"class","h-screen flex justify-center items-center w-screen"),K(u,"class","h-screen flex justify-center items-center w-screen"),K(_,"class","h-screen flex justify-center items-center w-screen"),K(E,"class","h-screen flex justify-center items-center w-screen"),K(V,"class","h-screen flex justify-center items-center w-screen"),K(t,"class","module-page flex svelte-atttuc")},m(C,k){H(C,t,k),F(t,e),bt(n,e,null),F(t,r),F(t,s),bt(o,s,null),F(t,l),F(t,u),bt(c,u,null),F(t,h),F(t,_),bt(m,_,null),F(t,g),F(t,E),bt(p,E,null),F(t,w),F(t,V),bt(S,V,null),i[2](t),D=!0},p:vh,i(C){D||(J(n.$$.fragment,C),J(o.$$.fragment,C),J(c.$$.fragment,C),J(m.$$.fragment,C),J(p.$$.fragment,C),J(S.$$.fragment,C),D=!0)},o(C){it(n.$$.fragment,C),it(o.$$.fragment,C),it(c.$$.fragment,C),it(m.$$.fragment,C),it(p.$$.fragment,C),it(S.$$.fragment,C),D=!1},d(C){C&&M(t),Rt(n),Rt(o),Rt(c),Rt(m),Rt(p),Rt(S),i[2](null)}}}function xT(i,t,e){let n;rn(i,Ke,h=>e(1,n=h));const r=qr(en,"stakeholders");let s;const o=h=>{const _=-100/s.children.length*h;e_.to(s,{xPercent:_,duration:1,ease:"power2.inOut"})},l=async()=>{try{const _=(await to(r)).docs.map(m=>({id:m.id,values:m.data().values,description:m.data().description}));Fr.set(_)}catch(h){console.error("Error fetching document: ",h)}},u=()=>xa(r,h=>{const _=h.docs.map(m=>({id:m.id,values:m.data().values,description:m.data().description}));Fr.set(_)},h=>{console.log(`Encountered error: ${h}`)});lo(()=>{l(),u()});function c(h){ki[h?"unshift":"push"](()=>{s=h,e(0,s)})}return i.$$.update=()=>{i.$$.dirty&3&&s&&o(n)},[s,n,c]}class UT extends Qe{constructor(t){super(),Xe(this,t,xT,kT,Ge,{})}}export{UT as component};
