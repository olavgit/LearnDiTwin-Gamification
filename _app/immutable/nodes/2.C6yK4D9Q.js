import{s as Le,o as _o,y as C_,e as Li,a as ns,u as rs,g as is,b as ss,z as Wu,A as pa,B as D_,C as wh,f as k_,c as ke,n as fr,D as V_}from"../chunks/scheduler.Depnz_9n.js";import{S as Qe,i as Xe,o as Ne,g as z,z as mo,r as Sn,n as J,p as Cn,m as Q,d as M,e as B,s as K,c as U,a as H,f as W,l as G,q as tn,A as ye,H as x_,B as O_,C as Qu,v as pt,w as gt,x as yt,y as vt,t as Z,b as tt,h as F,D as M_,E as N_,F as os,j as Bt,G as nn}from"../chunks/index.D002IE6L.js";import{w as br}from"../chunks/index.CfksRUY7.js";function yn(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function F_(i,t){const e={},n={},r={$$scope:1};let s=i.length;for(;s--;){const o=i[s],l=t[s];if(l){for(const u in o)u in l||(n[u]=1);for(const u in l)r[u]||(e[u]=l[u],r[u]=1);i[s]=l}else for(const u in o)r[u]=1}for(const o in n)o in e||(e[o]=void 0);return e}const yr=br([]),tl=br(null),un=br(0),qs=br(!1),Dn={start_titel:"Welkom bij de BOB-Game! Het spel voor het oplossen van maatschappelijke thema's",start_beschrijving:'Hier zul je op basis van je eigen aangewezen rol meedenken over een maatschappelijk probleem. In deze versie van het spel staat het thema "Laaggeletterdheid" of "Taalgroei" in de gemeente Nieuwegein centraal. Door achterstand bij lezen en rekenen onstaan veel problemen zoals armoede, eenzaamheid en lage gezondheid. Welke mix van maatregelen kan dit oplossen? Er zijn vier betrokken partijen: gemeente, vrijwilligers, taalgroeiers en de bibliotheek. Je wordt gevraagd een van de vier partijen te vertegenwoordigen bij het kiezen van een mix van maatregelen. Daarna ga je met de andere partijen in overleg.',keuze_titel:"Welke partij ga jij of je team vertegenwoordigen",keuze_beschrijving:'Kies de rol die je gaat vertegenwoordigen in de BOB-Game. BOB staat in dit geval voor "Beeldvorming, Opinie en Besluit". Dit zijn de vier stappen die jullie gaan doorlopen in dit spel',stakeholder_beschrijving:'Alle partijen kunnen kiezen uit het, op een schaal van 0 (niet) tot 10 (maximaal), inzetten van onderstaande vijf maatregelen. Aan elke maatregel zijn kosten verbonden, vereisen de inzet van een aantal vrijwilligers en leveren een resultaat op. Het doel is om 5000 mensen te helpen in een jaar tijd, met een jaarbudget van maximaal 2 miljoen euro. In de "Totaal" regel zie je de baten en kosten van je keuzes direct terug. Kies de maatregelen die vanuit jouw rol het beste zijn. Tav de maatregelen: "De taalbrigade" is een lesprogramma met vrijwilligers in kleine groepen, "Online" is een online lesprogramma voor thuis, "Groepsbijeenkomsten" zijn klassikale lessen bij de bibliotheek, "Camouflage lessen" zijn kooklessen, naailessen e.d. waarbij taal en rekenen op indirecte manier verbeterd wordt, en "Bijles" zijn 1 op 1 bijlessen van vrijwilligers.',resultaat_titel:"Resultaat",resultaat_beschrijving:"Hieronder zie je de keuzes van de vier partijen, opgeteld en gedeeld door vier, zodat je kunt vergelijken wat de voorkeur van jou partij is ten opzichte van het gemiddeld van alle partijen",resultaat_per_team_titel:"Resultaten per team",resultaat_per_team_beschrijving:`Hieronder zie je wat de vier partijen hebben ingevuld. Daarbij zie je ook het "Sentiment". De sentiment score geeft aan in welke mate de teamscore afwijkt van het gemiddelde. Bij een score van 0 wijkt de teamscore heel veel af van het gemiddelde, en zijn de teamleden bedroefd. Bij een score van 10 is de teamscore exact gelijk aan het gemiddelde, en zijn de teamleden blij. Het doel is mede om er voor te zorgen dat het sentiment van alle teams boven de 8 komt. Dus probeer, door met andere teams te overleggen, de inzet van maatregelen minder verschillend te maken, zodat het sentiment, en daarmee het draagvlak, voor alle teams verbeterd! En dat dan ook nog eens binnen budget, en met voldoende effect. Dat is de uitdaging voor alle maatschappelijke thema's`};function $i(i,t){return i*t.minimaal*t.effectPerWeek*t.rondesPerJaar}function Gs(i,t){return $i(i,t)*t.kostenPerPersoonPerDrieMaanden}function Hs(i,t){if(i===0)return 0;{const e=Number(t.minimaal)+(i-1)*(Number(t.maximaal)-Number(t.minimaal))/9;return Math.round(e)}}const Ks=br([]),L_=i=>i.replace(/-_$/g,"").replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z])([A-Z])(?=[a-z])/g,"$1-$2").toLowerCase(),$_=(i,t)=>{const n=i.getBoundingClientRect().width+2,r=window.getComputedStyle(i),s=parseInt(r.getPropertyValue("padding-left"),10),o=parseInt(r.getPropertyValue("padding-right"),10),l=s+o,u=n-l;return Math.round(Math.min(t,u||t))},B_=(i,t=null,e)=>{const n=i.getBoundingClientRect(),r=window.innerWidth||document.documentElement.clientWidth,s=window.innerHeight||document.documentElement.clientHeight;let o=n.bottom>0&&n.top<s&&n.right>0&&n.left<r;if(t){const l=t.getBoundingClientRect();return e==="top"||e==="bottom"?o=l.bottom+l.height<s&&l.top<s:o=l.right+l.width<r&&l.left<r,o}return o},Xo=(i,t,e,n)=>{if(!i||!t)return n;const r=t.getBoundingClientRect(),s=i.getBoundingClientRect(),o=window.getComputedStyle(i).position;window.getComputedStyle(i);let l=0,u=0,c=0,h=0,d=0,m=i;for(;m&&m!==document.body;){const p=window.getComputedStyle(m),E=p.position,b=m.getBoundingClientRect();E==="fixed"?(c+=b.top+window.scrollY,d+=b.left+window.scrollX):E==="sticky"?(h+=b.top,d+=b.left+window.scrollX):(E==="absolute"||E==="relative")&&(E==="absolute"&&(l-=parseFloat(p.top)||0,u-=parseFloat(p.left)||0),E==="relative"&&(l-=m.offsetTop,u-=m.offsetLeft,e==="bottom"&&(l+=s.height),e==="right"&&(u-=s.width),o==="absolute"&&e==="right"&&(u+=s.width)));const S=p.transform;if(S&&S!=="none"){const C=new DOMMatrix(S);E==="relative"||E==="absolute"?(l-=C.m42,u-=C.m41):(l-=m.offsetTop+C.m42,u-=m.offsetLeft+C.m41)}m=m.parentElement}let g=s.top+l+h-c,v=s.left+u-d;switch(e){case"top":n.top=g,n.left=v+s.width/2;break;case"bottom":n.top=g-r.height,n.left=v+s.width/2;break;case"left":n.left=v,n.top=g+s.height/2;break;case"right":n.left=v+s.width-r.width,n.top=g+s.height/2;break}return n.top+=window.scrollY,n.left+=window.scrollX,n},U_={left:"right",right:"left",top:"bottom",bottom:"top"};function j_(i){let t;const e=i[22].default,n=ns(e,i,i[21],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),t=!0},p(r,s){n&&n.p&&(!t||s[0]&2097152)&&rs(n,e,r,r[21],t?ss(e,r[21],s,null):is(r[21]),null)},i(r){t||(Q(n,r),t=!0)},o(r){J(n,r),t=!1},d(r){n&&n.d(r)}}}function z_(i){let t,e,n,r,s;const o=i[22].default,l=ns(o,i,i[21],null);let u=!i[12]&&Xu(i);return{c(){t=B("span"),l&&l.c(),e=K(),n=B("div"),u&&u.c(),this.h()},l(c){t=U(c,"SPAN",{class:!0});var h=H(t);l&&l.l(h),h.forEach(M),e=W(c),n=U(c,"DIV",{class:!0,style:!0});var d=H(n);u&&u.l(d),d.forEach(M),this.h()},h(){G(t,"class","tooltip-container"),G(n,"class",r="tooltip animation-"+i[9]+" "+i[0]+" "+i[4]+" svelte-1xktviv"),tn(n,"bottom","auto"),tn(n,"right","auto"),tn(n,"left",i[11].left+"px"),tn(n,"min-width",i[8]+"px"),tn(n,"max-width",i[3]+"px"),tn(n,"text-align",i[2]),tn(n,"top",i[11].top+"px"),ye(n,"arrowless",!i[5]),ye(n,"show",i[10])},m(c,h){z(c,t,h),l&&l.m(t,null),i[23](t),z(c,e,h),z(c,n,h),u&&u.m(n,null),i[24](n),s=!0},p(c,h){l&&l.p&&(!s||h[0]&2097152)&&rs(l,o,c,c[21],s?ss(o,c[21],h,null):is(c[21]),null),c[12]?u&&(u.d(1),u=null):u?u.p(c,h):(u=Xu(c),u.c(),u.m(n,null)),(!s||h[0]&529&&r!==(r="tooltip animation-"+c[9]+" "+c[0]+" "+c[4]+" svelte-1xktviv"))&&G(n,"class",r),(!s||h[0]&2048)&&tn(n,"left",c[11].left+"px"),(!s||h[0]&256)&&tn(n,"min-width",c[8]+"px"),(!s||h[0]&8)&&tn(n,"max-width",c[3]+"px"),(!s||h[0]&4)&&tn(n,"text-align",c[2]),(!s||h[0]&2048)&&tn(n,"top",c[11].top+"px"),(!s||h[0]&561)&&ye(n,"arrowless",!c[5]),(!s||h[0]&1553)&&ye(n,"show",c[10])},i(c){s||(Q(l,c),s=!0)},o(c){J(l,c),s=!1},d(c){c&&(M(t),M(e),M(n)),l&&l.d(c),i[23](null),u&&u.d(),i[24](null)}}}function Xu(i){let t,e;return{c(){t=new x_(!1),e=Ne(),this.h()},l(n){t=O_(n,!1),e=Ne(),this.h()},h(){t.a=e},m(n,r){t.m(i[1],n,r),z(n,e,r)},p(n,r){r[0]&2&&t.p(n[1])},d(n){n&&(M(e),t.d())}}}function q_(i){let t,e,n,r,s,o;const l=[z_,j_],u=[];function c(h,d){return h[1]?0:1}return t=c(i),e=u[t]=l[t](i),{c(){e.c(),n=Ne()},l(h){e.l(h),n=Ne()},m(h,d){u[t].m(h,d),z(h,n,d),r=!0,s||(o=mo(window,"resize",i[13]),s=!0)},p(h,d){let m=t;t=c(h),t===m?u[t].p(h,d):(Sn(),J(u[m],1,1,()=>{u[m]=null}),Cn(),e=u[t],e?e.p(h,d):(e=u[t]=l[t](h),e.c()),Q(e,1),e.m(n.parentNode,n))},i(h){r||(Q(e),r=!0)},o(h){J(e),r=!1},d(h){h&&M(n),u[t].d(h),s=!1,o()}}}function G_(i,t,e){let n,{$$slots:r={},$$scope:s}=t,{action:o="hover"}=t,{content:l=""}=t,{align:u="left"}=t,{position:c="top"}=t,{maxWidth:h=200}=t,{style:d=null}=t,{theme:m=""}=t,{animation:g=""}=t,{hideOnClickOutside:v=!1}=t,{delay:p=200}=t,{arrow:E=!0}=t,{autoPosition:b=!1}=t,{show:S=!1}=t,C=null,D=null,V=0,O=null,w=c,y=null,T=null,R=!1,P={bottom:0,top:0,right:0,left:0};const k=({target:q})=>{v&&C!==q&&D!==q&&!(C!=null&&C.parentNode.contains(q))&&!(D!=null&&D.contains(q))&&ct()},A=()=>{R?ct():it()},it=()=>{const q=g?p:0;b&&!B_(C,D,c)&&e(0,c=U_[c]),e(11,P=Xo(C,D,c,P)),g&&e(9,y=g),T=setTimeout(()=>e(10,R=!0),q)},ct=()=>{e(10,R=!1),e(0,c=w),e(9,y=null),T&&(clearTimeout(T),T=null)},at=()=>{C!==null&&(ut(),o==="click"&&(C.addEventListener("click",A),v&&document.addEventListener("click",k,{passive:!0,capture:!0})),o==="hover"&&(C.addEventListener("mouseenter",it),C.addEventListener("mouseleave",ct)))},ut=()=>{v&&document.removeEventListener("click",k),C!==null&&(C.removeEventListener("click",A),C.removeEventListener("mouseenter",it),C.removeEventListener("mouseleave",ct))};_o(()=>{if(at(),Xo(),D!==null&&(n&&!O&&(O=new l.component({target:D,props:l.props})),e(8,V=$_(D,h)),d&&typeof d=="object"))for(let q in d){const bt=L_(q),ht=d[q];D.style.setProperty(`--tooltip-${bt}`,ht)}}),C_(()=>{O&&(O.$destroy(),O=null),ut()});const At=()=>{R&&e(11,P=Xo(C,D,c,P))};function Ht(q){Li[q?"unshift":"push"](()=>{C=q,e(7,C)})}function xt(q){Li[q?"unshift":"push"](()=>{D=q,e(6,D)})}return i.$$set=q=>{"action"in q&&e(14,o=q.action),"content"in q&&e(1,l=q.content),"align"in q&&e(2,u=q.align),"position"in q&&e(0,c=q.position),"maxWidth"in q&&e(3,h=q.maxWidth),"style"in q&&e(15,d=q.style),"theme"in q&&e(4,m=q.theme),"animation"in q&&e(16,g=q.animation),"hideOnClickOutside"in q&&e(17,v=q.hideOnClickOutside),"delay"in q&&e(18,p=q.delay),"arrow"in q&&e(5,E=q.arrow),"autoPosition"in q&&e(19,b=q.autoPosition),"show"in q&&e(20,S=q.show),"$$scope"in q&&e(21,s=q.$$scope)},i.$$.update=()=>{i.$$.dirty[0]&2&&e(12,n=typeof l=="object"),i.$$.dirty[0]&16384&&at(),i.$$.dirty[0]&1048640&&setTimeout(D&&S?it:ct,0)},[c,l,u,h,m,E,D,C,V,y,R,P,n,At,o,d,g,v,p,b,S,s,r,Ht,xt]}class H_ extends Qe{constructor(t){super(),Xe(this,t,G_,q_,Le,{action:14,content:1,align:2,position:0,maxWidth:3,style:15,theme:4,animation:16,hideOnClickOutside:17,delay:18,arrow:5,autoPosition:19,show:20},null,[-1,-1])}}function An(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Ih(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.__proto__=t}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Ge={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Hr={duration:.5,overwrite:!1,delay:0},el,we,Mt,rn=1e8,Dt=1/rn,ga=Math.PI*2,K_=ga/4,W_=0,Ah=Math.sqrt,Q_=Math.cos,X_=Math.sin,oe=function(t){return typeof t=="string"},Gt=function(t){return typeof t=="function"},kn=function(t){return typeof t=="number"},nl=function(t){return typeof t>"u"},vn=function(t){return typeof t=="object"},Ve=function(t){return t!==!1},rl=function(){return typeof window<"u"},ks=function(t){return Gt(t)||oe(t)},bh=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Ie=Array.isArray,ya=/(?:-?\.?\d|\.)+/gi,Rh=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,$r=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Yo=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Ph=/[+-]=-?[.\d]+/,Sh=/[^,'"\[\]\s]+/gi,Y_=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,$t,fn,va,il,We={},Ws={},Ch,Dh=function(t){return(Ws=vr(t,We))&&Fe},sl=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},Bi=function(t,e){return!e&&console.warn(t)},kh=function(t,e){return t&&(We[t]=e)&&Ws&&(Ws[t]=e)||We},Ui=function(){return 0},J_={suppressEvents:!0,isStart:!0,kill:!1},Ns={suppressEvents:!0,kill:!1},Z_={suppressEvents:!0},ol={},jn=[],Ta={},Vh,Ue={},Jo={},Yu=30,Fs=[],al="",ll=function(t){var e=t[0],n,r;if(vn(e)||Gt(e)||(t=[t]),!(n=(e._gsap||{}).harness)){for(r=Fs.length;r--&&!Fs[r].targetTest(e););n=Fs[r]}for(r=t.length;r--;)t[r]&&(t[r]._gsap||(t[r]._gsap=new nf(t[r],n)))||t.splice(r,1);return t},dr=function(t){return t._gsap||ll(sn(t))[0]._gsap},xh=function(t,e,n){return(n=t[e])&&Gt(n)?t[e]():nl(n)&&t.getAttribute&&t.getAttribute(e)||n},xe=function(t,e){return(t=t.split(",")).forEach(e)||t},Wt=function(t){return Math.round(t*1e5)/1e5||0},se=function(t){return Math.round(t*1e7)/1e7||0},Ur=function(t,e){var n=e.charAt(0),r=parseFloat(e.substr(2));return t=parseFloat(t),n==="+"?t+r:n==="-"?t-r:n==="*"?t*r:t/r},tm=function(t,e){for(var n=e.length,r=0;t.indexOf(e[r])<0&&++r<n;);return r<n},Qs=function(){var t=jn.length,e=jn.slice(0),n,r;for(Ta={},jn.length=0,n=0;n<t;n++)r=e[n],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},Oh=function(t,e,n,r){jn.length&&!we&&Qs(),t.render(e,n,we&&e<0&&(t._initted||t._startAt)),jn.length&&!we&&Qs()},Mh=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(Sh).length<2?e:oe(t)?t.trim():t},Nh=function(t){return t},on=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},em=function(t){return function(e,n){for(var r in n)r in e||r==="duration"&&t||r==="ease"||(e[r]=n[r])}},vr=function(t,e){for(var n in e)t[n]=e[n];return t},Ju=function i(t,e){for(var n in e)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(t[n]=vn(e[n])?i(t[n]||(t[n]={}),e[n]):e[n]);return t},Xs=function(t,e){var n={},r;for(r in t)r in e||(n[r]=t[r]);return n},ki=function(t){var e=t.parent||$t,n=t.keyframes?em(Ie(t.keyframes)):on;if(Ve(t.inherit))for(;e;)n(t,e.vars.defaults),e=e.parent||e._dp;return t},nm=function(t,e){for(var n=t.length,r=n===e.length;r&&n--&&t[n]===e[n];);return n<0},Fh=function(t,e,n,r,s){var o=t[r],l;if(s)for(l=e[s];o&&o[s]>l;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[r]=e,e._prev=o,e.parent=e._dp=t,e},po=function(t,e,n,r){n===void 0&&(n="_first"),r===void 0&&(r="_last");var s=e._prev,o=e._next;s?s._next=o:t[n]===e&&(t[n]=o),o?o._prev=s:t[r]===e&&(t[r]=s),e._next=e._prev=e.parent=null},Kn=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},_r=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var n=t;n;)n._dirty=1,n=n.parent;return t},rm=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},Ea=function(t,e,n,r){return t._startAt&&(we?t._startAt.revert(Ns):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,r))},im=function i(t){return!t||t._ts&&i(t.parent)},Zu=function(t){return t._repeat?Kr(t._tTime,t=t.duration()+t._rDelay)*t:0},Kr=function(t,e){var n=Math.floor(t/=e);return t&&n===t?n-1:n},Ys=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},go=function(t){return t._end=se(t._start+(t._tDur/Math.abs(t._ts||t._rts||Dt)||0))},yo=function(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=se(n._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),go(t),n._dirty||_r(n,t)),t},Lh=function(t,e){var n;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(n=Ys(t.rawTime(),e),(!e._dur||as(0,e.totalDuration(),n)-e._tTime>Dt)&&e.render(n,!0)),_r(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-Dt}},dn=function(t,e,n,r){return e.parent&&Kn(e),e._start=se((kn(n)?n:n||t!==$t?en(t,n,e):t._time)+e._delay),e._end=se(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),Fh(t,e,"_first","_last",t._sort?"_start":0),wa(e)||(t._recent=e),r||Lh(t,e),t._ts<0&&yo(t,t._tTime),t},$h=function(t,e){return(We.ScrollTrigger||sl("scrollTrigger",e))&&We.ScrollTrigger.create(e,t)},Bh=function(t,e,n,r,s){if(cl(t,e,s),!t._initted)return 1;if(!n&&t._pt&&!we&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&Vh!==je.frame)return jn.push(t),t._lazy=[s,r],1},sm=function i(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||i(e))},wa=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},om=function(t,e,n,r){var s=t.ratio,o=e<0||!e&&(!t._start&&sm(t)&&!(!t._initted&&wa(t))||(t._ts<0||t._dp._ts<0)&&!wa(t))?0:1,l=t._rDelay,u=0,c,h,d;if(l&&t._repeat&&(u=as(0,t._tDur,e),h=Kr(u,l),t._yoyo&&h&1&&(o=1-o),h!==Kr(t._tTime,l)&&(s=1-o,t.vars.repeatRefresh&&t._initted&&t.invalidate())),o!==s||we||r||t._zTime===Dt||!e&&t._zTime){if(!t._initted&&Bh(t,e,r,n,u))return;for(d=t._zTime,t._zTime=e||(n?Dt:0),n||(n=e&&!d),t.ratio=o,t._from&&(o=1-o),t._time=0,t._tTime=u,c=t._pt;c;)c.r(o,c.d),c=c._next;e<0&&Ea(t,e,n,!0),t._onUpdate&&!n&&ze(t,"onUpdate"),u&&t._repeat&&!n&&t.parent&&ze(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===o&&(o&&Kn(t,1),!n&&!we&&(ze(t,o?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},am=function(t,e,n){var r;if(n>e)for(r=t._first;r&&r._start<=n;){if(r.data==="isPause"&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=n;){if(r.data==="isPause"&&r._start<e)return r;r=r._prev}},Wr=function(t,e,n,r){var s=t._repeat,o=se(e)||0,l=t._tTime/t._tDur;return l&&!r&&(t._time*=o/t._dur),t._dur=o,t._tDur=s?s<0?1e10:se(o*(s+1)+t._rDelay*s):o,l>0&&!r&&yo(t,t._tTime=t._tDur*l),t.parent&&go(t),n||_r(t.parent,t),t},tc=function(t){return t instanceof Pe?_r(t):Wr(t,t._dur)},lm={_start:0,endTime:Ui,totalDuration:Ui},en=function i(t,e,n){var r=t.labels,s=t._recent||lm,o=t.duration()>=rn?s.endTime(!1):t._dur,l,u,c;return oe(e)&&(isNaN(e)||e in r)?(u=e.charAt(0),c=e.substr(-1)==="%",l=e.indexOf("="),u==="<"||u===">"?(l>=0&&(e=e.replace(/=/,"")),(u==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(e.substr(1))||0)*(c?(l<0?s:n).totalDuration()/100:1)):l<0?(e in r||(r[e]=o),r[e]):(u=parseFloat(e.charAt(l-1)+e.substr(l+1)),c&&n&&(u=u/100*(Ie(n)?n[0]:n).totalDuration()),l>1?i(t,e.substr(0,l-1),n)+u:o+u)):e==null?o:+e},Vi=function(t,e,n){var r=kn(e[1]),s=(r?2:1)+(t<2?0:1),o=e[s],l,u;if(r&&(o.duration=e[1]),o.parent=n,t){for(l=o,u=n;u&&!("immediateRender"in l);)l=u.vars.defaults||{},u=Ve(u.vars.inherit)&&u.parent;o.immediateRender=Ve(l.immediateRender),t<2?o.runBackwards=1:o.startAt=e[s-1]}return new Yt(e[0],o,e[s+1])},Zn=function(t,e){return t||t===0?e(t):e},as=function(t,e,n){return n<t?t:n>e?e:n},Ee=function(t,e){return!oe(t)||!(e=Y_.exec(t))?"":e[1]},um=function(t,e,n){return Zn(n,function(r){return as(t,e,r)})},Ia=[].slice,Uh=function(t,e){return t&&vn(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&vn(t[0]))&&!t.nodeType&&t!==fn},cm=function(t,e,n){return n===void 0&&(n=[]),t.forEach(function(r){var s;return oe(r)&&!e||Uh(r,1)?(s=n).push.apply(s,sn(r)):n.push(r)})||n},sn=function(t,e,n){return Mt&&!e&&Mt.selector?Mt.selector(t):oe(t)&&!n&&(va||!Qr())?Ia.call((e||il).querySelectorAll(t),0):Ie(t)?cm(t,n):Uh(t)?Ia.call(t,0):t?[t]:[]},Aa=function(t){return t=sn(t)[0]||Bi("Invalid scope")||{},function(e){var n=t.current||t.nativeElement||t;return sn(e,n.querySelectorAll?n:n===t?Bi("Invalid scope")||il.createElement("div"):t)}},jh=function(t){return t.sort(function(){return .5-Math.random()})},zh=function(t){if(Gt(t))return t;var e=vn(t)?t:{each:t},n=mr(e.ease),r=e.from||0,s=parseFloat(e.base)||0,o={},l=r>0&&r<1,u=isNaN(r)||l,c=e.axis,h=r,d=r;return oe(r)?h=d={center:.5,edges:.5,end:1}[r]||0:!l&&u&&(h=r[0],d=r[1]),function(m,g,v){var p=(v||e).length,E=o[p],b,S,C,D,V,O,w,y,T;if(!E){if(T=e.grid==="auto"?0:(e.grid||[1,rn])[1],!T){for(w=-rn;w<(w=v[T++].getBoundingClientRect().left)&&T<p;);T<p&&T--}for(E=o[p]=[],b=u?Math.min(T,p)*h-.5:r%T,S=T===rn?0:u?p*d/T-.5:r/T|0,w=0,y=rn,O=0;O<p;O++)C=O%T-b,D=S-(O/T|0),E[O]=V=c?Math.abs(c==="y"?D:C):Ah(C*C+D*D),V>w&&(w=V),V<y&&(y=V);r==="random"&&jh(E),E.max=w-y,E.min=y,E.v=p=(parseFloat(e.amount)||parseFloat(e.each)*(T>p?p-1:c?c==="y"?p/T:T:Math.max(T,p/T))||0)*(r==="edges"?-1:1),E.b=p<0?s-p:s,E.u=Ee(e.amount||e.each)||0,n=n&&p<0?Zh(n):n}return p=(E[m]-E.min)/E.max||0,se(E.b+(n?n(p):p)*E.v)+E.u}},ba=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(n){var r=se(Math.round(parseFloat(n)/t)*t*e);return(r-r%1)/e+(kn(n)?0:Ee(n))}},qh=function(t,e){var n=Ie(t),r,s;return!n&&vn(t)&&(r=n=t.radius||rn,t.values?(t=sn(t.values),(s=!kn(t[0]))&&(r*=r)):t=ba(t.increment)),Zn(e,n?Gt(t)?function(o){return s=t(o),Math.abs(s-o)<=r?s:o}:function(o){for(var l=parseFloat(s?o.x:o),u=parseFloat(s?o.y:0),c=rn,h=0,d=t.length,m,g;d--;)s?(m=t[d].x-l,g=t[d].y-u,m=m*m+g*g):m=Math.abs(t[d]-l),m<c&&(c=m,h=d);return h=!r||c<=r?t[h]:o,s||h===o||kn(o)?h:h+Ee(o)}:ba(t))},Gh=function(t,e,n,r){return Zn(Ie(t)?!e:n===!0?!!(n=0):!r,function(){return Ie(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+n*.99))/n)*n*r)/r})},hm=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return e.reduce(function(s,o){return o(s)},r)}},fm=function(t,e){return function(n){return t(parseFloat(n))+(e||Ee(n))}},dm=function(t,e,n){return Kh(t,e,0,1,n)},Hh=function(t,e,n){return Zn(n,function(r){return t[~~e(r)]})},_m=function i(t,e,n){var r=e-t;return Ie(t)?Hh(t,i(0,t.length),e):Zn(n,function(s){return(r+(s-t)%r)%r+t})},mm=function i(t,e,n){var r=e-t,s=r*2;return Ie(t)?Hh(t,i(0,t.length-1),e):Zn(n,function(o){return o=(s+(o-t)%s)%s||0,t+(o>r?s-o:o)})},ji=function(t){for(var e=0,n="",r,s,o,l;~(r=t.indexOf("random(",e));)o=t.indexOf(")",r),l=t.charAt(r+7)==="[",s=t.substr(r+7,o-r-7).match(l?Sh:ya),n+=t.substr(e,r-e)+Gh(l?s:+s[0],l?0:+s[1],+s[2]||1e-5),e=o+1;return n+t.substr(e,t.length-e)},Kh=function(t,e,n,r,s){var o=e-t,l=r-n;return Zn(s,function(u){return n+((u-t)/o*l||0)})},pm=function i(t,e,n,r){var s=isNaN(t+e)?0:function(g){return(1-g)*t+g*e};if(!s){var o=oe(t),l={},u,c,h,d,m;if(n===!0&&(r=1)&&(n=null),o)t={p:t},e={p:e};else if(Ie(t)&&!Ie(e)){for(h=[],d=t.length,m=d-2,c=1;c<d;c++)h.push(i(t[c-1],t[c]));d--,s=function(v){v*=d;var p=Math.min(m,~~v);return h[p](v-p)},n=e}else r||(t=vr(Ie(t)?[]:{},t));if(!h){for(u in e)ul.call(l,t,u,"get",e[u]);s=function(v){return dl(v,l)||(o?t.p:t)}}}return Zn(n,s)},ec=function(t,e,n){var r=t.labels,s=rn,o,l,u;for(o in r)l=r[o]-e,l<0==!!n&&l&&s>(l=Math.abs(l))&&(u=o,s=l);return u},ze=function(t,e,n){var r=t.vars,s=r[e],o=Mt,l=t._ctx,u,c,h;if(s)return u=r[e+"Params"],c=r.callbackScope||t,n&&jn.length&&Qs(),l&&(Mt=l),h=u?s.apply(c,u):s.call(c),Mt=o,h},bi=function(t){return Kn(t),t.scrollTrigger&&t.scrollTrigger.kill(!!we),t.progress()<1&&ze(t,"onInterrupt"),t},Br,Wh=[],Qh=function(t){if(t)if(t=!t.name&&t.default||t,rl()||t.headless){var e=t.name,n=Gt(t),r=e&&!n&&t.init?function(){this._props=[]}:t,s={init:Ui,render:dl,add:ul,kill:Vm,modifier:km,rawVars:0},o={targetTest:0,get:0,getSetter:fl,aliases:{},register:0};if(Qr(),t!==r){if(Ue[e])return;on(r,on(Xs(t,s),o)),vr(r.prototype,vr(s,Xs(t,o))),Ue[r.prop=e]=r,t.targetTest&&(Fs.push(r),ol[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}kh(e,r),t.register&&t.register(Fe,r,Oe)}else Wh.push(t)},Ct=255,Ri={aqua:[0,Ct,Ct],lime:[0,Ct,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ct],navy:[0,0,128],white:[Ct,Ct,Ct],olive:[128,128,0],yellow:[Ct,Ct,0],orange:[Ct,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ct,0,0],pink:[Ct,192,203],cyan:[0,Ct,Ct],transparent:[Ct,Ct,Ct,0]},Zo=function(t,e,n){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(n-e)*t*6:t<.5?n:t*3<2?e+(n-e)*(2/3-t)*6:e)*Ct+.5|0},Xh=function(t,e,n){var r=t?kn(t)?[t>>16,t>>8&Ct,t&Ct]:0:Ri.black,s,o,l,u,c,h,d,m,g,v;if(!r){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Ri[t])r=Ri[t];else if(t.charAt(0)==="#"){if(t.length<6&&(s=t.charAt(1),o=t.charAt(2),l=t.charAt(3),t="#"+s+s+o+o+l+l+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return r=parseInt(t.substr(1,6),16),[r>>16,r>>8&Ct,r&Ct,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),r=[t>>16,t>>8&Ct,t&Ct]}else if(t.substr(0,3)==="hsl"){if(r=v=t.match(ya),!e)u=+r[0]%360/360,c=+r[1]/100,h=+r[2]/100,o=h<=.5?h*(c+1):h+c-h*c,s=h*2-o,r.length>3&&(r[3]*=1),r[0]=Zo(u+1/3,s,o),r[1]=Zo(u,s,o),r[2]=Zo(u-1/3,s,o);else if(~t.indexOf("="))return r=t.match(Rh),n&&r.length<4&&(r[3]=1),r}else r=t.match(ya)||Ri.transparent;r=r.map(Number)}return e&&!v&&(s=r[0]/Ct,o=r[1]/Ct,l=r[2]/Ct,d=Math.max(s,o,l),m=Math.min(s,o,l),h=(d+m)/2,d===m?u=c=0:(g=d-m,c=h>.5?g/(2-d-m):g/(d+m),u=d===s?(o-l)/g+(o<l?6:0):d===o?(l-s)/g+2:(s-o)/g+4,u*=60),r[0]=~~(u+.5),r[1]=~~(c*100+.5),r[2]=~~(h*100+.5)),n&&r.length<4&&(r[3]=1),r},Yh=function(t){var e=[],n=[],r=-1;return t.split(zn).forEach(function(s){var o=s.match($r)||[];e.push.apply(e,o),n.push(r+=o.length+1)}),e.c=n,e},nc=function(t,e,n){var r="",s=(t+r).match(zn),o=e?"hsla(":"rgba(",l=0,u,c,h,d;if(!s)return t;if(s=s.map(function(m){return(m=Xh(m,e,1))&&o+(e?m[0]+","+m[1]+"%,"+m[2]+"%,"+m[3]:m.join(","))+")"}),n&&(h=Yh(t),u=n.c,u.join(r)!==h.c.join(r)))for(c=t.replace(zn,"1").split($r),d=c.length-1;l<d;l++)r+=c[l]+(~u.indexOf(l)?s.shift()||o+"0,0,0,0)":(h.length?h:s.length?s:n).shift());if(!c)for(c=t.split(zn),d=c.length-1;l<d;l++)r+=c[l]+s[l];return r+c[d]},zn=function(){var i="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Ri)i+="|"+t+"\\b";return new RegExp(i+")","gi")}(),gm=/hsl[a]?\(/,Jh=function(t){var e=t.join(" "),n;if(zn.lastIndex=0,zn.test(e))return n=gm.test(e),t[1]=nc(t[1],n),t[0]=nc(t[0],n,Yh(t[1])),!0},zi,je=function(){var i=Date.now,t=500,e=33,n=i(),r=n,s=1e3/240,o=s,l=[],u,c,h,d,m,g,v=function p(E){var b=i()-r,S=E===!0,C,D,V,O;if((b>t||b<0)&&(n+=b-e),r+=b,V=r-n,C=V-o,(C>0||S)&&(O=++d.frame,m=V-d.time*1e3,d.time=V=V/1e3,o+=C+(C>=s?4:s-C),D=1),S||(u=c(p)),D)for(g=0;g<l.length;g++)l[g](V,m,O,E)};return d={time:0,frame:0,tick:function(){v(!0)},deltaRatio:function(E){return m/(1e3/(E||60))},wake:function(){Ch&&(!va&&rl()&&(fn=va=window,il=fn.document||{},We.gsap=Fe,(fn.gsapVersions||(fn.gsapVersions=[])).push(Fe.version),Dh(Ws||fn.GreenSockGlobals||!fn.gsap&&fn||{}),Wh.forEach(Qh)),h=typeof requestAnimationFrame<"u"&&requestAnimationFrame,u&&d.sleep(),c=h||function(E){return setTimeout(E,o-d.time*1e3+1|0)},zi=1,v(2))},sleep:function(){(h?cancelAnimationFrame:clearTimeout)(u),zi=0,c=Ui},lagSmoothing:function(E,b){t=E||1/0,e=Math.min(b||33,t)},fps:function(E){s=1e3/(E||240),o=d.time*1e3+s},add:function(E,b,S){var C=b?function(D,V,O,w){E(D,V,O,w),d.remove(C)}:E;return d.remove(E),l[S?"unshift":"push"](C),Qr(),C},remove:function(E,b){~(b=l.indexOf(E))&&l.splice(b,1)&&g>=b&&g--},_listeners:l},d}(),Qr=function(){return!zi&&je.wake()},dt={},ym=/^[\d.\-M][\d.\-,\s]/,vm=/["']/g,Tm=function(t){for(var e={},n=t.substr(1,t.length-3).split(":"),r=n[0],s=1,o=n.length,l,u,c;s<o;s++)u=n[s],l=s!==o-1?u.lastIndexOf(","):u.length,c=u.substr(0,l),e[r]=isNaN(c)?c.replace(vm,"").trim():+c,r=u.substr(l+1).trim();return e},Em=function(t){var e=t.indexOf("(")+1,n=t.indexOf(")"),r=t.indexOf("(",e);return t.substring(e,~r&&r<n?t.indexOf(")",n+1):n)},wm=function(t){var e=(t+"").split("("),n=dt[e[0]];return n&&e.length>1&&n.config?n.config.apply(null,~t.indexOf("{")?[Tm(e[1])]:Em(t).split(",").map(Mh)):dt._CE&&ym.test(t)?dt._CE("",t):n},Zh=function(t){return function(e){return 1-t(1-e)}},tf=function i(t,e){for(var n=t._first,r;n;)n instanceof Pe?i(n,e):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==e&&(n.timeline?i(n.timeline,e):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=e)),n=n._next},mr=function(t,e){return t&&(Gt(t)?t:dt[t]||wm(t))||e},Rr=function(t,e,n,r){n===void 0&&(n=function(u){return 1-e(1-u)}),r===void 0&&(r=function(u){return u<.5?e(u*2)/2:1-e((1-u)*2)/2});var s={easeIn:e,easeOut:n,easeInOut:r},o;return xe(t,function(l){dt[l]=We[l]=s,dt[o=l.toLowerCase()]=n;for(var u in s)dt[o+(u==="easeIn"?".in":u==="easeOut"?".out":".inOut")]=dt[l+"."+u]=s[u]}),s},ef=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},ta=function i(t,e,n){var r=e>=1?e:1,s=(n||(t?.3:.45))/(e<1?e:1),o=s/ga*(Math.asin(1/r)||0),l=function(h){return h===1?1:r*Math.pow(2,-10*h)*X_((h-o)*s)+1},u=t==="out"?l:t==="in"?function(c){return 1-l(1-c)}:ef(l);return s=ga/s,u.config=function(c,h){return i(t,c,h)},u},ea=function i(t,e){e===void 0&&(e=1.70158);var n=function(o){return o?--o*o*((e+1)*o+e)+1:0},r=t==="out"?n:t==="in"?function(s){return 1-n(1-s)}:ef(n);return r.config=function(s){return i(t,s)},r};xe("Linear,Quad,Cubic,Quart,Quint,Strong",function(i,t){var e=t<5?t+1:t;Rr(i+",Power"+(e-1),t?function(n){return Math.pow(n,e)}:function(n){return n},function(n){return 1-Math.pow(1-n,e)},function(n){return n<.5?Math.pow(n*2,e)/2:1-Math.pow((1-n)*2,e)/2})});dt.Linear.easeNone=dt.none=dt.Linear.easeIn;Rr("Elastic",ta("in"),ta("out"),ta());(function(i,t){var e=1/t,n=2*e,r=2.5*e,s=function(l){return l<e?i*l*l:l<n?i*Math.pow(l-1.5/t,2)+.75:l<r?i*(l-=2.25/t)*l+.9375:i*Math.pow(l-2.625/t,2)+.984375};Rr("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);Rr("Expo",function(i){return i?Math.pow(2,10*(i-1)):0});Rr("Circ",function(i){return-(Ah(1-i*i)-1)});Rr("Sine",function(i){return i===1?1:-Q_(i*K_)+1});Rr("Back",ea("in"),ea("out"),ea());dt.SteppedEase=dt.steps=We.SteppedEase={config:function(t,e){t===void 0&&(t=1);var n=1/t,r=t+(e?0:1),s=e?1:0,o=1-Dt;return function(l){return((r*as(0,o,l)|0)+s)*n}}};Hr.ease=dt["quad.out"];xe("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(i){return al+=i+","+i+"Params,"});var nf=function(t,e){this.id=W_++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:xh,this.set=e?e.getSetter:fl},qi=function(){function i(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Wr(this,+e.duration,1,1),this.data=e.data,Mt&&(this._ctx=Mt,Mt.data.push(this)),zi||je.wake()}var t=i.prototype;return t.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},t.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},t.totalDuration=function(n){return arguments.length?(this._dirty=0,Wr(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(n,r){if(Qr(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(yo(this,n),!s._dp||s.parent||Lh(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&dn(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Dt||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),Oh(this,n,r)),this},t.time=function(n,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+Zu(this))%(this._dur+this._rDelay)||(n?this._dur:0),r):this._time},t.totalProgress=function(n,r){return arguments.length?this.totalTime(this.totalDuration()*n,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},t.progress=function(n,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+Zu(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(n,r){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*s,r):this._repeat?Kr(this._tTime,s)+1:1},t.timeScale=function(n,r){if(!arguments.length)return this._rts===-Dt?0:this._rts;if(this._rts===n)return this;var s=this.parent&&this._ts?Ys(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-Dt?0:this._rts,this.totalTime(as(-Math.abs(this._delay),this._tDur,s),r!==!1),go(this),rm(this)},t.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Qr(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Dt&&(this._tTime-=Dt)))),this):this._ps},t.startTime=function(n){if(arguments.length){this._start=n;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&dn(r,this,n-this._delay),this}return this._start},t.endTime=function(n){return this._start+(Ve(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(n){var r=this.parent||this._dp;return r?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Ys(r.rawTime(n),this):this._tTime:this._tTime},t.revert=function(n){n===void 0&&(n=Z_);var r=we;return we=n,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),we=r,this},t.globalTime=function(n){for(var r=this,s=arguments.length?n:r.rawTime();r;)s=r._start+s/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(n):s},t.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,tc(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(n){if(arguments.length){var r=this._time;return this._rDelay=n,tc(this),r?this.time(r):this}return this._rDelay},t.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},t.seek=function(n,r){return this.totalTime(en(this,n),Ve(r))},t.restart=function(n,r){return this.play().totalTime(n?-this._delay:0,Ve(r))},t.play=function(n,r){return n!=null&&this.seek(n,r),this.reversed(!1).paused(!1)},t.reverse=function(n,r){return n!=null&&this.seek(n||this.totalDuration(),r),this.reversed(!0).paused(!1)},t.pause=function(n,r){return n!=null&&this.seek(n,r),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-Dt:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-Dt,this},t.isActive=function(){var n=this.parent||this._dp,r=this._start,s;return!!(!n||this._ts&&this._initted&&n.isActive()&&(s=n.rawTime(!0))>=r&&s<this.endTime(!0)-Dt)},t.eventCallback=function(n,r,s){var o=this.vars;return arguments.length>1?(r?(o[n]=r,s&&(o[n+"Params"]=s),n==="onUpdate"&&(this._onUpdate=r)):delete o[n],this):o[n]},t.then=function(n){var r=this;return new Promise(function(s){var o=Gt(n)?n:Nh,l=function(){var c=r.then;r.then=null,Gt(o)&&(o=o(r))&&(o.then||o===r)&&(r.then=c),s(o),r.then=c};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?l():r._prom=l})},t.kill=function(){bi(this)},i}();on(qi.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Dt,_prom:0,_ps:!1,_rts:1});var Pe=function(i){Ih(t,i);function t(n,r){var s;return n===void 0&&(n={}),s=i.call(this,n)||this,s.labels={},s.smoothChildTiming=!!n.smoothChildTiming,s.autoRemoveChildren=!!n.autoRemoveChildren,s._sort=Ve(n.sortChildren),$t&&dn(n.parent||$t,An(s),r),n.reversed&&s.reverse(),n.paused&&s.paused(!0),n.scrollTrigger&&$h(An(s),n.scrollTrigger),s}var e=t.prototype;return e.to=function(r,s,o){return Vi(0,arguments,this),this},e.from=function(r,s,o){return Vi(1,arguments,this),this},e.fromTo=function(r,s,o,l){return Vi(2,arguments,this),this},e.set=function(r,s,o){return s.duration=0,s.parent=this,ki(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new Yt(r,s,en(this,o),1),this},e.call=function(r,s,o){return dn(this,Yt.delayedCall(0,r,s),o)},e.staggerTo=function(r,s,o,l,u,c,h){return o.duration=s,o.stagger=o.stagger||l,o.onComplete=c,o.onCompleteParams=h,o.parent=this,new Yt(r,o,en(this,u)),this},e.staggerFrom=function(r,s,o,l,u,c,h){return o.runBackwards=1,ki(o).immediateRender=Ve(o.immediateRender),this.staggerTo(r,s,o,l,u,c,h)},e.staggerFromTo=function(r,s,o,l,u,c,h,d){return l.startAt=o,ki(l).immediateRender=Ve(l.immediateRender),this.staggerTo(r,s,l,u,c,h,d)},e.render=function(r,s,o){var l=this._time,u=this._dirty?this.totalDuration():this._tDur,c=this._dur,h=r<=0?0:se(r),d=this._zTime<0!=r<0&&(this._initted||!c),m,g,v,p,E,b,S,C,D,V,O,w;if(this!==$t&&h>u&&r>=0&&(h=u),h!==this._tTime||o||d){if(l!==this._time&&c&&(h+=this._time-l,r+=this._time-l),m=h,D=this._start,C=this._ts,b=!C,d&&(c||(l=this._zTime),(r||!s)&&(this._zTime=r)),this._repeat){if(O=this._yoyo,E=c+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(E*100+r,s,o);if(m=se(h%E),h===u?(p=this._repeat,m=c):(p=~~(h/E),p&&p===h/E&&(m=c,p--),m>c&&(m=c)),V=Kr(this._tTime,E),!l&&this._tTime&&V!==p&&this._tTime-V*E-this._dur<=0&&(V=p),O&&p&1&&(m=c-m,w=1),p!==V&&!this._lock){var y=O&&V&1,T=y===(O&&p&1);if(p<V&&(y=!y),l=y?0:h%c?c:h,this._lock=1,this.render(l||(w?0:se(p*E)),s,!c)._lock=0,this._tTime=h,!s&&this.parent&&ze(this,"onRepeat"),this.vars.repeatRefresh&&!w&&(this.invalidate()._lock=1),l&&l!==this._time||b!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(c=this._dur,u=this._tDur,T&&(this._lock=2,l=y?c:-1e-4,this.render(l,!0),this.vars.repeatRefresh&&!w&&this.invalidate()),this._lock=0,!this._ts&&!b)return this;tf(this,w)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(S=am(this,se(l),se(m)),S&&(h-=m-(m=S._start))),this._tTime=h,this._time=m,this._act=!C,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,l=0),!l&&m&&!s&&!p&&(ze(this,"onStart"),this._tTime!==h))return this;if(m>=l&&r>=0)for(g=this._first;g;){if(v=g._next,(g._act||m>=g._start)&&g._ts&&S!==g){if(g.parent!==this)return this.render(r,s,o);if(g.render(g._ts>0?(m-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(m-g._start)*g._ts,s,o),m!==this._time||!this._ts&&!b){S=0,v&&(h+=this._zTime=-Dt);break}}g=v}else{g=this._last;for(var R=r<0?r:m;g;){if(v=g._prev,(g._act||R<=g._end)&&g._ts&&S!==g){if(g.parent!==this)return this.render(r,s,o);if(g.render(g._ts>0?(R-g._start)*g._ts:(g._dirty?g.totalDuration():g._tDur)+(R-g._start)*g._ts,s,o||we&&(g._initted||g._startAt)),m!==this._time||!this._ts&&!b){S=0,v&&(h+=this._zTime=R?-Dt:Dt);break}}g=v}}if(S&&!s&&(this.pause(),S.render(m>=l?0:-Dt)._zTime=m>=l?1:-1,this._ts))return this._start=D,go(this),this.render(r,s,o);this._onUpdate&&!s&&ze(this,"onUpdate",!0),(h===u&&this._tTime>=this.totalDuration()||!h&&l)&&(D===this._start||Math.abs(C)!==Math.abs(this._ts))&&(this._lock||((r||!c)&&(h===u&&this._ts>0||!h&&this._ts<0)&&Kn(this,1),!s&&!(r<0&&!l)&&(h||l||!u)&&(ze(this,h===u&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(h<u&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(r,s){var o=this;if(kn(s)||(s=en(this,s,r)),!(r instanceof qi)){if(Ie(r))return r.forEach(function(l){return o.add(l,s)}),this;if(oe(r))return this.addLabel(r,s);if(Gt(r))r=Yt.delayedCall(0,r);else return this}return this!==r?dn(this,r,s):this},e.getChildren=function(r,s,o,l){r===void 0&&(r=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),l===void 0&&(l=-rn);for(var u=[],c=this._first;c;)c._start>=l&&(c instanceof Yt?s&&u.push(c):(o&&u.push(c),r&&u.push.apply(u,c.getChildren(!0,s,o)))),c=c._next;return u},e.getById=function(r){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===r)return s[o]},e.remove=function(r){return oe(r)?this.removeLabel(r):Gt(r)?this.killTweensOf(r):(po(this,r),r===this._recent&&(this._recent=this._last),_r(this))},e.totalTime=function(r,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=se(je.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),i.prototype.totalTime.call(this,r,s),this._forcing=0,this):this._tTime},e.addLabel=function(r,s){return this.labels[r]=en(this,s),this},e.removeLabel=function(r){return delete this.labels[r],this},e.addPause=function(r,s,o){var l=Yt.delayedCall(0,s||Ui,o);return l.data="isPause",this._hasPause=1,dn(this,l,en(this,r))},e.removePause=function(r){var s=this._first;for(r=en(this,r);s;)s._start===r&&s.data==="isPause"&&Kn(s),s=s._next},e.killTweensOf=function(r,s,o){for(var l=this.getTweensOf(r,o),u=l.length;u--;)Ln!==l[u]&&l[u].kill(r,s);return this},e.getTweensOf=function(r,s){for(var o=[],l=sn(r),u=this._first,c=kn(s),h;u;)u instanceof Yt?tm(u._targets,l)&&(c?(!Ln||u._initted&&u._ts)&&u.globalTime(0)<=s&&u.globalTime(u.totalDuration())>s:!s||u.isActive())&&o.push(u):(h=u.getTweensOf(l,s)).length&&o.push.apply(o,h),u=u._next;return o},e.tweenTo=function(r,s){s=s||{};var o=this,l=en(o,r),u=s,c=u.startAt,h=u.onStart,d=u.onStartParams,m=u.immediateRender,g,v=Yt.to(o,on({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:l,overwrite:"auto",duration:s.duration||Math.abs((l-(c&&"time"in c?c.time:o._time))/o.timeScale())||Dt,onStart:function(){if(o.pause(),!g){var E=s.duration||Math.abs((l-(c&&"time"in c?c.time:o._time))/o.timeScale());v._dur!==E&&Wr(v,E,0,1).render(v._time,!0,!0),g=1}h&&h.apply(v,d||[])}},s));return m?v.render(0):v},e.tweenFromTo=function(r,s,o){return this.tweenTo(s,on({startAt:{time:en(this,r)}},o))},e.recent=function(){return this._recent},e.nextLabel=function(r){return r===void 0&&(r=this._time),ec(this,en(this,r))},e.previousLabel=function(r){return r===void 0&&(r=this._time),ec(this,en(this,r),1)},e.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Dt)},e.shiftChildren=function(r,s,o){o===void 0&&(o=0);for(var l=this._first,u=this.labels,c;l;)l._start>=o&&(l._start+=r,l._end+=r),l=l._next;if(s)for(c in u)u[c]>=o&&(u[c]+=r);return _r(this)},e.invalidate=function(r){var s=this._first;for(this._lock=0;s;)s.invalidate(r),s=s._next;return i.prototype.invalidate.call(this,r)},e.clear=function(r){r===void 0&&(r=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),_r(this)},e.totalDuration=function(r){var s=0,o=this,l=o._last,u=rn,c,h,d;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-r:r));if(o._dirty){for(d=o.parent;l;)c=l._prev,l._dirty&&l.totalDuration(),h=l._start,h>u&&o._sort&&l._ts&&!o._lock?(o._lock=1,dn(o,l,h-l._delay,1)._lock=0):u=h,h<0&&l._ts&&(s-=h,(!d&&!o._dp||d&&d.smoothChildTiming)&&(o._start+=h/o._ts,o._time-=h,o._tTime-=h),o.shiftChildren(-h,!1,-1/0),u=0),l._end>s&&l._ts&&(s=l._end),l=c;Wr(o,o===$t&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(r){if($t._ts&&(Oh($t,Ys(r,$t)),Vh=je.frame),je.frame>=Yu){Yu+=Ge.autoSleep||120;var s=$t._first;if((!s||!s._ts)&&Ge.autoSleep&&je._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||je.sleep()}}},t}(qi);on(Pe.prototype,{_lock:0,_hasPause:0,_forcing:0});var Im=function(t,e,n,r,s,o,l){var u=new Oe(this._pt,t,e,0,1,uf,null,s),c=0,h=0,d,m,g,v,p,E,b,S;for(u.b=n,u.e=r,n+="",r+="",(b=~r.indexOf("random("))&&(r=ji(r)),o&&(S=[n,r],o(S,t,e),n=S[0],r=S[1]),m=n.match(Yo)||[];d=Yo.exec(r);)v=d[0],p=r.substring(c,d.index),g?g=(g+1)%5:p.substr(-5)==="rgba("&&(g=1),v!==m[h++]&&(E=parseFloat(m[h-1])||0,u._pt={_next:u._pt,p:p||h===1?p:",",s:E,c:v.charAt(1)==="="?Ur(E,v)-E:parseFloat(v)-E,m:g&&g<4?Math.round:0},c=Yo.lastIndex);return u.c=c<r.length?r.substring(c,r.length):"",u.fp=l,(Ph.test(r)||b)&&(u.e=0),this._pt=u,u},ul=function(t,e,n,r,s,o,l,u,c,h){Gt(r)&&(r=r(s||0,t,o));var d=t[e],m=n!=="get"?n:Gt(d)?c?t[e.indexOf("set")||!Gt(t["get"+e.substr(3)])?e:"get"+e.substr(3)](c):t[e]():d,g=Gt(d)?c?Sm:af:hl,v;if(oe(r)&&(~r.indexOf("random(")&&(r=ji(r)),r.charAt(1)==="="&&(v=Ur(m,r)+(Ee(m)||0),(v||v===0)&&(r=v))),!h||m!==r||Ra)return!isNaN(m*r)&&r!==""?(v=new Oe(this._pt,t,e,+m||0,r-(m||0),typeof d=="boolean"?Dm:lf,0,g),c&&(v.fp=c),l&&v.modifier(l,this,t),this._pt=v):(!d&&!(e in t)&&sl(e,r),Im.call(this,t,e,m,r,g,u||Ge.stringFilter,c))},Am=function(t,e,n,r,s){if(Gt(t)&&(t=xi(t,s,e,n,r)),!vn(t)||t.style&&t.nodeType||Ie(t)||bh(t))return oe(t)?xi(t,s,e,n,r):t;var o={},l;for(l in t)o[l]=xi(t[l],s,e,n,r);return o},rf=function(t,e,n,r,s,o){var l,u,c,h;if(Ue[t]&&(l=new Ue[t]).init(s,l.rawVars?e[t]:Am(e[t],r,s,o,n),n,r,o)!==!1&&(n._pt=u=new Oe(n._pt,s,t,0,1,l.render,l,0,l.priority),n!==Br))for(c=n._ptLookup[n._targets.indexOf(s)],h=l._props.length;h--;)c[l._props[h]]=u;return l},Ln,Ra,cl=function i(t,e,n){var r=t.vars,s=r.ease,o=r.startAt,l=r.immediateRender,u=r.lazy,c=r.onUpdate,h=r.runBackwards,d=r.yoyoEase,m=r.keyframes,g=r.autoRevert,v=t._dur,p=t._startAt,E=t._targets,b=t.parent,S=b&&b.data==="nested"?b.vars.targets:E,C=t._overwrite==="auto"&&!el,D=t.timeline,V,O,w,y,T,R,P,k,A,it,ct,at,ut;if(D&&(!m||!s)&&(s="none"),t._ease=mr(s,Hr.ease),t._yEase=d?Zh(mr(d===!0?s:d,Hr.ease)):0,d&&t._yoyo&&!t._repeat&&(d=t._yEase,t._yEase=t._ease,t._ease=d),t._from=!D&&!!r.runBackwards,!D||m&&!r.stagger){if(k=E[0]?dr(E[0]).harness:0,at=k&&r[k.prop],V=Xs(r,ol),p&&(p._zTime<0&&p.progress(1),e<0&&h&&l&&!g?p.render(-1,!0):p.revert(h&&v?Ns:J_),p._lazy=0),o){if(Kn(t._startAt=Yt.set(E,on({data:"isStart",overwrite:!1,parent:b,immediateRender:!0,lazy:!p&&Ve(u),startAt:null,delay:0,onUpdate:c&&function(){return ze(t,"onUpdate")},stagger:0},o))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(we||!l&&!g)&&t._startAt.revert(Ns),l&&v&&e<=0&&n<=0){e&&(t._zTime=e);return}}else if(h&&v&&!p){if(e&&(l=!1),w=on({overwrite:!1,data:"isFromStart",lazy:l&&!p&&Ve(u),immediateRender:l,stagger:0,parent:b},V),at&&(w[k.prop]=at),Kn(t._startAt=Yt.set(E,w)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(we?t._startAt.revert(Ns):t._startAt.render(-1,!0)),t._zTime=e,!l)i(t._startAt,Dt,Dt);else if(!e)return}for(t._pt=t._ptCache=0,u=v&&Ve(u)||u&&!v,O=0;O<E.length;O++){if(T=E[O],P=T._gsap||ll(E)[O]._gsap,t._ptLookup[O]=it={},Ta[P.id]&&jn.length&&Qs(),ct=S===E?O:S.indexOf(T),k&&(A=new k).init(T,at||V,t,ct,S)!==!1&&(t._pt=y=new Oe(t._pt,T,A.name,0,1,A.render,A,0,A.priority),A._props.forEach(function(At){it[At]=y}),A.priority&&(R=1)),!k||at)for(w in V)Ue[w]&&(A=rf(w,V,t,ct,T,S))?A.priority&&(R=1):it[w]=y=ul.call(t,T,w,"get",V[w],ct,S,0,r.stringFilter);t._op&&t._op[O]&&t.kill(T,t._op[O]),C&&t._pt&&(Ln=t,$t.killTweensOf(T,it,t.globalTime(e)),ut=!t.parent,Ln=0),t._pt&&u&&(Ta[P.id]=1)}R&&cf(t),t._onInit&&t._onInit(t)}t._onUpdate=c,t._initted=(!t._op||t._pt)&&!ut,m&&e<=0&&D.render(rn,!0,!0)},bm=function(t,e,n,r,s,o,l,u){var c=(t._pt&&t._ptCache||(t._ptCache={}))[e],h,d,m,g;if(!c)for(c=t._ptCache[e]=[],m=t._ptLookup,g=t._targets.length;g--;){if(h=m[g][e],h&&h.d&&h.d._pt)for(h=h.d._pt;h&&h.p!==e&&h.fp!==e;)h=h._next;if(!h)return Ra=1,t.vars[e]="+=0",cl(t,l),Ra=0,u?Bi(e+" not eligible for reset"):1;c.push(h)}for(g=c.length;g--;)d=c[g],h=d._pt||d,h.s=(r||r===0)&&!s?r:h.s+(r||0)+o*h.c,h.c=n-h.s,d.e&&(d.e=Wt(n)+Ee(d.e)),d.b&&(d.b=h.s+Ee(d.b))},Rm=function(t,e){var n=t[0]?dr(t[0]).harness:0,r=n&&n.aliases,s,o,l,u;if(!r)return e;s=vr({},e);for(o in r)if(o in s)for(u=r[o].split(","),l=u.length;l--;)s[u[l]]=s[o];return s},Pm=function(t,e,n,r){var s=e.ease||r||"power1.inOut",o,l;if(Ie(e))l=n[t]||(n[t]=[]),e.forEach(function(u,c){return l.push({t:c/(e.length-1)*100,v:u,e:s})});else for(o in e)l=n[o]||(n[o]=[]),o==="ease"||l.push({t:parseFloat(t),v:e[o],e:s})},xi=function(t,e,n,r,s){return Gt(t)?t.call(e,n,r,s):oe(t)&&~t.indexOf("random(")?ji(t):t},sf=al+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",of={};xe(sf+",id,stagger,delay,duration,paused,scrollTrigger",function(i){return of[i]=1});var Yt=function(i){Ih(t,i);function t(n,r,s,o){var l;typeof r=="number"&&(s.duration=r,r=s,s=null),l=i.call(this,o?r:ki(r))||this;var u=l.vars,c=u.duration,h=u.delay,d=u.immediateRender,m=u.stagger,g=u.overwrite,v=u.keyframes,p=u.defaults,E=u.scrollTrigger,b=u.yoyoEase,S=r.parent||$t,C=(Ie(n)||bh(n)?kn(n[0]):"length"in r)?[n]:sn(n),D,V,O,w,y,T,R,P;if(l._targets=C.length?ll(C):Bi("GSAP target "+n+" not found. https://gsap.com",!Ge.nullTargetWarn)||[],l._ptLookup=[],l._overwrite=g,v||m||ks(c)||ks(h)){if(r=l.vars,D=l.timeline=new Pe({data:"nested",defaults:p||{},targets:S&&S.data==="nested"?S.vars.targets:C}),D.kill(),D.parent=D._dp=An(l),D._start=0,m||ks(c)||ks(h)){if(w=C.length,R=m&&zh(m),vn(m))for(y in m)~sf.indexOf(y)&&(P||(P={}),P[y]=m[y]);for(V=0;V<w;V++)O=Xs(r,of),O.stagger=0,b&&(O.yoyoEase=b),P&&vr(O,P),T=C[V],O.duration=+xi(c,An(l),V,T,C),O.delay=(+xi(h,An(l),V,T,C)||0)-l._delay,!m&&w===1&&O.delay&&(l._delay=h=O.delay,l._start+=h,O.delay=0),D.to(T,O,R?R(V,T,C):0),D._ease=dt.none;D.duration()?c=h=0:l.timeline=0}else if(v){ki(on(D.vars.defaults,{ease:"none"})),D._ease=mr(v.ease||r.ease||"none");var k=0,A,it,ct;if(Ie(v))v.forEach(function(at){return D.to(C,at,">")}),D.duration();else{O={};for(y in v)y==="ease"||y==="easeEach"||Pm(y,v[y],O,v.easeEach);for(y in O)for(A=O[y].sort(function(at,ut){return at.t-ut.t}),k=0,V=0;V<A.length;V++)it=A[V],ct={ease:it.e,duration:(it.t-(V?A[V-1].t:0))/100*c},ct[y]=it.v,D.to(C,ct,k),k+=ct.duration;D.duration()<c&&D.to({},{duration:c-D.duration()})}}c||l.duration(c=D.duration())}else l.timeline=0;return g===!0&&!el&&(Ln=An(l),$t.killTweensOf(C),Ln=0),dn(S,An(l),s),r.reversed&&l.reverse(),r.paused&&l.paused(!0),(d||!c&&!v&&l._start===se(S._time)&&Ve(d)&&im(An(l))&&S.data!=="nested")&&(l._tTime=-Dt,l.render(Math.max(0,-h)||0)),E&&$h(An(l),E),l}var e=t.prototype;return e.render=function(r,s,o){var l=this._time,u=this._tDur,c=this._dur,h=r<0,d=r>u-Dt&&!h?u:r<Dt?0:r,m,g,v,p,E,b,S,C,D;if(!c)om(this,r,s,o);else if(d!==this._tTime||!r||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==h){if(m=d,C=this.timeline,this._repeat){if(p=c+this._rDelay,this._repeat<-1&&h)return this.totalTime(p*100+r,s,o);if(m=se(d%p),d===u?(v=this._repeat,m=c):(v=~~(d/p),v&&v===se(d/p)&&(m=c,v--),m>c&&(m=c)),b=this._yoyo&&v&1,b&&(D=this._yEase,m=c-m),E=Kr(this._tTime,p),m===l&&!o&&this._initted&&v===E)return this._tTime=d,this;v!==E&&(C&&this._yEase&&tf(C,b),this.vars.repeatRefresh&&!b&&!this._lock&&this._time!==p&&this._initted&&(this._lock=o=1,this.render(se(p*v),!0).invalidate()._lock=0))}if(!this._initted){if(Bh(this,h?r:m,o,s,d))return this._tTime=0,this;if(l!==this._time&&!(o&&this.vars.repeatRefresh&&v!==E))return this;if(c!==this._dur)return this.render(r,s,o)}if(this._tTime=d,this._time=m,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=S=(D||this._ease)(m/c),this._from&&(this.ratio=S=1-S),m&&!l&&!s&&!v&&(ze(this,"onStart"),this._tTime!==d))return this;for(g=this._pt;g;)g.r(S,g.d),g=g._next;C&&C.render(r<0?r:C._dur*C._ease(m/this._dur),s,o)||this._startAt&&(this._zTime=r),this._onUpdate&&!s&&(h&&Ea(this,r,s,o),ze(this,"onUpdate")),this._repeat&&v!==E&&this.vars.onRepeat&&!s&&this.parent&&ze(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(h&&!this._onUpdate&&Ea(this,r,!0,!0),(r||!c)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&Kn(this,1),!s&&!(h&&!l)&&(d||l||b)&&(ze(this,d===u?"onComplete":"onReverseComplete",!0),this._prom&&!(d<u&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),i.prototype.invalidate.call(this,r)},e.resetTo=function(r,s,o,l,u){zi||je.wake(),this._ts||this.play();var c=Math.min(this._dur,(this._dp._time-this._start)*this._ts),h;return this._initted||cl(this,c),h=this._ease(c/this._dur),bm(this,r,s,o,l,h,c,u)?this.resetTo(r,s,o,l,1):(yo(this,0),this.parent||Fh(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(r,s){if(s===void 0&&(s="all"),!r&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?bi(this):this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(r,s,Ln&&Ln.vars.overwrite!==!0)._first||bi(this),this.parent&&o!==this.timeline.totalDuration()&&Wr(this,this._dur*this.timeline._tDur/o,0,1),this}var l=this._targets,u=r?sn(r):l,c=this._ptLookup,h=this._pt,d,m,g,v,p,E,b;if((!s||s==="all")&&nm(l,u))return s==="all"&&(this._pt=0),bi(this);for(d=this._op=this._op||[],s!=="all"&&(oe(s)&&(p={},xe(s,function(S){return p[S]=1}),s=p),s=Rm(l,s)),b=l.length;b--;)if(~u.indexOf(l[b])){m=c[b],s==="all"?(d[b]=s,v=m,g={}):(g=d[b]=d[b]||{},v=s);for(p in v)E=m&&m[p],E&&((!("kill"in E.d)||E.d.kill(p)===!0)&&po(this,E,"_pt"),delete m[p]),g!=="all"&&(g[p]=1)}return this._initted&&!this._pt&&h&&bi(this),this},t.to=function(r,s){return new t(r,s,arguments[2])},t.from=function(r,s){return Vi(1,arguments)},t.delayedCall=function(r,s,o,l){return new t(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:l})},t.fromTo=function(r,s,o){return Vi(2,arguments)},t.set=function(r,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new t(r,s)},t.killTweensOf=function(r,s,o){return $t.killTweensOf(r,s,o)},t}(qi);on(Yt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});xe("staggerTo,staggerFrom,staggerFromTo",function(i){Yt[i]=function(){var t=new Pe,e=Ia.call(arguments,0);return e.splice(i==="staggerFromTo"?5:4,0,0),t[i].apply(t,e)}});var hl=function(t,e,n){return t[e]=n},af=function(t,e,n){return t[e](n)},Sm=function(t,e,n,r){return t[e](r.fp,n)},Cm=function(t,e,n){return t.setAttribute(e,n)},fl=function(t,e){return Gt(t[e])?af:nl(t[e])&&t.setAttribute?Cm:hl},lf=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},Dm=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},uf=function(t,e){var n=e._pt,r="";if(!t&&e.b)r=e.b;else if(t===1&&e.e)r=e.e;else{for(;n;)r=n.p+(n.m?n.m(n.s+n.c*t):Math.round((n.s+n.c*t)*1e4)/1e4)+r,n=n._next;r+=e.c}e.set(e.t,e.p,r,e)},dl=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},km=function(t,e,n,r){for(var s=this._pt,o;s;)o=s._next,s.p===r&&s.modifier(t,e,n),s=o},Vm=function(t){for(var e=this._pt,n,r;e;)r=e._next,e.p===t&&!e.op||e.op===t?po(this,e,"_pt"):e.dep||(n=1),e=r;return!n},xm=function(t,e,n,r){r.mSet(t,e,r.m.call(r.tween,n,r.mt),r)},cf=function(t){for(var e=t._pt,n,r,s,o;e;){for(n=e._next,r=s;r&&r.pr>e.pr;)r=r._next;(e._prev=r?r._prev:o)?e._prev._next=e:s=e,(e._next=r)?r._prev=e:o=e,e=n}t._pt=s},Oe=function(){function i(e,n,r,s,o,l,u,c,h){this.t=n,this.s=s,this.c=o,this.p=r,this.r=l||lf,this.d=u||this,this.set=c||hl,this.pr=h||0,this._next=e,e&&(e._prev=this)}var t=i.prototype;return t.modifier=function(n,r,s){this.mSet=this.mSet||this.set,this.set=xm,this.m=n,this.mt=s,this.tween=r},i}();xe(al+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(i){return ol[i]=1});We.TweenMax=We.TweenLite=Yt;We.TimelineLite=We.TimelineMax=Pe;$t=new Pe({sortChildren:!1,defaults:Hr,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Ge.stringFilter=Jh;var pr=[],Ls={},Om=[],rc=0,Mm=0,na=function(t){return(Ls[t]||Om).map(function(e){return e()})},Pa=function(){var t=Date.now(),e=[];t-rc>2&&(na("matchMediaInit"),pr.forEach(function(n){var r=n.queries,s=n.conditions,o,l,u,c;for(l in r)o=fn.matchMedia(r[l]).matches,o&&(u=1),o!==s[l]&&(s[l]=o,c=1);c&&(n.revert(),u&&e.push(n))}),na("matchMediaRevert"),e.forEach(function(n){return n.onMatch(n,function(r){return n.add(null,r)})}),rc=t,na("matchMedia"))},hf=function(){function i(e,n){this.selector=n&&Aa(n),this.data=[],this._r=[],this.isReverted=!1,this.id=Mm++,e&&this.add(e)}var t=i.prototype;return t.add=function(n,r,s){Gt(n)&&(s=r,r=n,n=Gt);var o=this,l=function(){var c=Mt,h=o.selector,d;return c&&c!==o&&c.data.push(o),s&&(o.selector=Aa(s)),Mt=o,d=r.apply(o,arguments),Gt(d)&&o._r.push(d),Mt=c,o.selector=h,o.isReverted=!1,d};return o.last=l,n===Gt?l(o,function(u){return o.add(null,u)}):n?o[n]=l:l},t.ignore=function(n){var r=Mt;Mt=null,n(this),Mt=r},t.getTweens=function(){var n=[];return this.data.forEach(function(r){return r instanceof i?n.push.apply(n,r.getTweens()):r instanceof Yt&&!(r.parent&&r.parent.data==="nested")&&n.push(r)}),n},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(n,r){var s=this;if(n?function(){for(var l=s.getTweens(),u=s.data.length,c;u--;)c=s.data[u],c.data==="isFlip"&&(c.revert(),c.getChildren(!0,!0,!1).forEach(function(h){return l.splice(l.indexOf(h),1)}));for(l.map(function(h){return{g:h._dur||h._delay||h._sat&&!h._sat.vars.immediateRender?h.globalTime(0):-1/0,t:h}}).sort(function(h,d){return d.g-h.g||-1/0}).forEach(function(h){return h.t.revert(n)}),u=s.data.length;u--;)c=s.data[u],c instanceof Pe?c.data!=="nested"&&(c.scrollTrigger&&c.scrollTrigger.revert(),c.kill()):!(c instanceof Yt)&&c.revert&&c.revert(n);s._r.forEach(function(h){return h(n,s)}),s.isReverted=!0}():this.data.forEach(function(l){return l.kill&&l.kill()}),this.clear(),r)for(var o=pr.length;o--;)pr[o].id===this.id&&pr.splice(o,1)},t.revert=function(n){this.kill(n||{})},i}(),Nm=function(){function i(e){this.contexts=[],this.scope=e,Mt&&Mt.data.push(this)}var t=i.prototype;return t.add=function(n,r,s){vn(n)||(n={matches:n});var o=new hf(0,s||this.scope),l=o.conditions={},u,c,h;Mt&&!o.selector&&(o.selector=Mt.selector),this.contexts.push(o),r=o.add("onMatch",r),o.queries=n;for(c in n)c==="all"?h=1:(u=fn.matchMedia(n[c]),u&&(pr.indexOf(o)<0&&pr.push(o),(l[c]=u.matches)&&(h=1),u.addListener?u.addListener(Pa):u.addEventListener("change",Pa)));return h&&r(o,function(d){return o.add(null,d)}),this},t.revert=function(n){this.kill(n||{})},t.kill=function(n){this.contexts.forEach(function(r){return r.kill(n,!0)})},i}(),Js={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(function(r){return Qh(r)})},timeline:function(t){return new Pe(t)},getTweensOf:function(t,e){return $t.getTweensOf(t,e)},getProperty:function(t,e,n,r){oe(t)&&(t=sn(t)[0]);var s=dr(t||{}).get,o=n?Nh:Mh;return n==="native"&&(n=""),t&&(e?o((Ue[e]&&Ue[e].get||s)(t,e,n,r)):function(l,u,c){return o((Ue[l]&&Ue[l].get||s)(t,l,u,c))})},quickSetter:function(t,e,n){if(t=sn(t),t.length>1){var r=t.map(function(h){return Fe.quickSetter(h,e,n)}),s=r.length;return function(h){for(var d=s;d--;)r[d](h)}}t=t[0]||{};var o=Ue[e],l=dr(t),u=l.harness&&(l.harness.aliases||{})[e]||e,c=o?function(h){var d=new o;Br._pt=0,d.init(t,n?h+n:h,Br,0,[t]),d.render(1,d),Br._pt&&dl(1,Br)}:l.set(t,u);return o?c:function(h){return c(t,u,n?h+n:h,l,1)}},quickTo:function(t,e,n){var r,s=Fe.to(t,vr((r={},r[e]="+=0.1",r.paused=!0,r),n||{})),o=function(u,c,h){return s.resetTo(e,u,c,h)};return o.tween=s,o},isTweening:function(t){return $t.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=mr(t.ease,Hr.ease)),Ju(Hr,t||{})},config:function(t){return Ju(Ge,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,r=t.plugins,s=t.defaults,o=t.extendTimeline;(r||"").split(",").forEach(function(l){return l&&!Ue[l]&&!We[l]&&Bi(e+" effect requires "+l+" plugin.")}),Jo[e]=function(l,u,c){return n(sn(l),on(u||{},s),c)},o&&(Pe.prototype[e]=function(l,u,c){return this.add(Jo[e](l,vn(u)?u:(c=u)&&{},this),c)})},registerEase:function(t,e){dt[t]=mr(e)},parseEase:function(t,e){return arguments.length?mr(t,e):dt},getById:function(t){return $t.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var n=new Pe(t),r,s;for(n.smoothChildTiming=Ve(t.smoothChildTiming),$t.remove(n),n._dp=0,n._time=n._tTime=$t._time,r=$t._first;r;)s=r._next,(e||!(!r._dur&&r instanceof Yt&&r.vars.onComplete===r._targets[0]))&&dn(n,r,r._start-r._delay),r=s;return dn($t,n,0),n},context:function(t,e){return t?new hf(t,e):Mt},matchMedia:function(t){return new Nm(t)},matchMediaRefresh:function(){return pr.forEach(function(t){var e=t.conditions,n,r;for(r in e)e[r]&&(e[r]=!1,n=1);n&&t.revert()})||Pa()},addEventListener:function(t,e){var n=Ls[t]||(Ls[t]=[]);~n.indexOf(e)||n.push(e)},removeEventListener:function(t,e){var n=Ls[t],r=n&&n.indexOf(e);r>=0&&n.splice(r,1)},utils:{wrap:_m,wrapYoyo:mm,distribute:zh,random:Gh,snap:qh,normalize:dm,getUnit:Ee,clamp:um,splitColor:Xh,toArray:sn,selector:Aa,mapRange:Kh,pipe:hm,unitize:fm,interpolate:pm,shuffle:jh},install:Dh,effects:Jo,ticker:je,updateRoot:Pe.updateRoot,plugins:Ue,globalTimeline:$t,core:{PropTween:Oe,globals:kh,Tween:Yt,Timeline:Pe,Animation:qi,getCache:dr,_removeLinkedListItem:po,reverting:function(){return we},context:function(t){return t&&Mt&&(Mt.data.push(t),t._ctx=Mt),Mt},suppressOverwrites:function(t){return el=t}}};xe("to,from,fromTo,delayedCall,set,killTweensOf",function(i){return Js[i]=Yt[i]});je.add(Pe.updateRoot);Br=Js.to({},{duration:0});var Fm=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},Lm=function(t,e){var n=t._targets,r,s,o;for(r in e)for(s=n.length;s--;)o=t._ptLookup[s][r],o&&(o=o.d)&&(o._pt&&(o=Fm(o,r)),o&&o.modifier&&o.modifier(e[r],t,n[s],r))},ra=function(t,e){return{name:t,rawVars:1,init:function(r,s,o){o._onInit=function(l){var u,c;if(oe(s)&&(u={},xe(s,function(h){return u[h]=1}),s=u),e){u={};for(c in s)u[c]=e(s[c]);s=u}Lm(l,s)}}}},Fe=Js.registerPlugin({name:"attr",init:function(t,e,n,r,s){var o,l,u;this.tween=n;for(o in e)u=t.getAttribute(o)||"",l=this.add(t,"setAttribute",(u||0)+"",e[o],r,s,0,0,o),l.op=o,l.b=u,this._props.push(o)},render:function(t,e){for(var n=e._pt;n;)we?n.set(n.t,n.p,n.b,n):n.r(t,n.d),n=n._next}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n],0,0,0,0,0,1)}},ra("roundProps",ba),ra("modifiers"),ra("snap",qh))||Js;Yt.version=Pe.version=Fe.version="3.12.5";Ch=1;rl()&&Qr();dt.Power0;dt.Power1;dt.Power2;dt.Power3;dt.Power4;dt.Linear;dt.Quad;dt.Cubic;dt.Quart;dt.Quint;dt.Strong;dt.Elastic;dt.Back;dt.SteppedEase;dt.Bounce;dt.Sine;dt.Expo;dt.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var ic,$n,jr,_l,cr,sc,ml,$m=function(){return typeof window<"u"},Vn={},lr=180/Math.PI,zr=Math.PI/180,Mr=Math.atan2,oc=1e8,pl=/([A-Z])/g,Bm=/(left|right|width|margin|padding|x)/i,Um=/[\s,\(]\S/,_n={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Sa=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},jm=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},zm=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},qm=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},ff=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},df=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},Gm=function(t,e,n){return t.style[e]=n},Hm=function(t,e,n){return t.style.setProperty(e,n)},Km=function(t,e,n){return t._gsap[e]=n},Wm=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},Qm=function(t,e,n,r,s){var o=t._gsap;o.scaleX=o.scaleY=n,o.renderTransform(s,o)},Xm=function(t,e,n,r,s){var o=t._gsap;o[e]=n,o.renderTransform(s,o)},Ut="transform",Me=Ut+"Origin",Ym=function i(t,e){var n=this,r=this.target,s=r.style,o=r._gsap;if(t in Vn&&s){if(this.tfm=this.tfm||{},t!=="transform")t=_n[t]||t,~t.indexOf(",")?t.split(",").forEach(function(l){return n.tfm[l]=bn(r,l)}):this.tfm[t]=o.x?o[t]:bn(r,t),t===Me&&(this.tfm.zOrigin=o.zOrigin);else return _n.transform.split(",").forEach(function(l){return i.call(n,l,e)});if(this.props.indexOf(Ut)>=0)return;o.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(Me,e,"")),t=Ut}(s||e)&&this.props.push(t,e,s[t])},_f=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},Jm=function(){var t=this.props,e=this.target,n=e.style,r=e._gsap,s,o;for(s=0;s<t.length;s+=3)t[s+1]?e[t[s]]=t[s+2]:t[s+2]?n[t[s]]=t[s+2]:n.removeProperty(t[s].substr(0,2)==="--"?t[s]:t[s].replace(pl,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)r[o]=this.tfm[o];r.svg&&(r.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),s=ml(),(!s||!s.isStart)&&!n[Ut]&&(_f(n),r.zOrigin&&n[Me]&&(n[Me]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},mf=function(t,e){var n={target:t,props:[],revert:Jm,save:Ym};return t._gsap||Fe.core.getCache(t),e&&e.split(",").forEach(function(r){return n.save(r)}),n},pf,Ca=function(t,e){var n=$n.createElementNS?$n.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):$n.createElement(t);return n&&n.style?n:$n.createElement(t)},mn=function i(t,e,n){var r=getComputedStyle(t);return r[e]||r.getPropertyValue(e.replace(pl,"-$1").toLowerCase())||r.getPropertyValue(e)||!n&&i(t,Xr(e)||e,1)||""},ac="O,Moz,ms,Ms,Webkit".split(","),Xr=function(t,e,n){var r=e||cr,s=r.style,o=5;if(t in s&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);o--&&!(ac[o]+t in s););return o<0?null:(o===3?"ms":o>=0?ac[o]:"")+t},Da=function(){$m()&&window.document&&(ic=window,$n=ic.document,jr=$n.documentElement,cr=Ca("div")||{style:{}},Ca("div"),Ut=Xr(Ut),Me=Ut+"Origin",cr.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",pf=!!Xr("perspective"),ml=Fe.core.reverting,_l=1)},ia=function i(t){var e=Ca("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,r=this.nextSibling,s=this.style.cssText,o;if(jr.appendChild(e),e.appendChild(this),this.style.display="block",t)try{o=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=i}catch{}else this._gsapBBox&&(o=this._gsapBBox());return n&&(r?n.insertBefore(this,r):n.appendChild(this)),jr.removeChild(e),this.style.cssText=s,o},lc=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},gf=function(t){var e;try{e=t.getBBox()}catch{e=ia.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===ia||(e=ia.call(t,!0)),e&&!e.width&&!e.x&&!e.y?{x:+lc(t,["x","cx","x1"])||0,y:+lc(t,["y","cy","y1"])||0,width:0,height:0}:e},yf=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&gf(t))},Tr=function(t,e){if(e){var n=t.style,r;e in Vn&&e!==Me&&(e=Ut),n.removeProperty?(r=e.substr(0,2),(r==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),n.removeProperty(r==="--"?e:e.replace(pl,"-$1").toLowerCase())):n.removeAttribute(e)}},Bn=function(t,e,n,r,s,o){var l=new Oe(t._pt,e,n,0,1,o?df:ff);return t._pt=l,l.b=r,l.e=s,t._props.push(n),l},uc={deg:1,rad:1,turn:1},Zm={grid:1,flex:1},Wn=function i(t,e,n,r){var s=parseFloat(n)||0,o=(n+"").trim().substr((s+"").length)||"px",l=cr.style,u=Bm.test(e),c=t.tagName.toLowerCase()==="svg",h=(c?"client":"offset")+(u?"Width":"Height"),d=100,m=r==="px",g=r==="%",v,p,E,b;if(r===o||!s||uc[r]||uc[o])return s;if(o!=="px"&&!m&&(s=i(t,e,n,"px")),b=t.getCTM&&yf(t),(g||o==="%")&&(Vn[e]||~e.indexOf("adius")))return v=b?t.getBBox()[u?"width":"height"]:t[h],Wt(g?s/v*d:s/100*v);if(l[u?"width":"height"]=d+(m?o:r),p=~e.indexOf("adius")||r==="em"&&t.appendChild&&!c?t:t.parentNode,b&&(p=(t.ownerSVGElement||{}).parentNode),(!p||p===$n||!p.appendChild)&&(p=$n.body),E=p._gsap,E&&g&&E.width&&u&&E.time===je.time&&!E.uncache)return Wt(s/E.width*d);if(g&&(e==="height"||e==="width")){var S=t.style[e];t.style[e]=d+r,v=t[h],S?t.style[e]=S:Tr(t,e)}else(g||o==="%")&&!Zm[mn(p,"display")]&&(l.position=mn(t,"position")),p===t&&(l.position="static"),p.appendChild(cr),v=cr[h],p.removeChild(cr),l.position="absolute";return u&&g&&(E=dr(p),E.time=je.time,E.width=p[h]),Wt(m?v*s/d:v&&s?d/v*s:0)},bn=function(t,e,n,r){var s;return _l||Da(),e in _n&&e!=="transform"&&(e=_n[e],~e.indexOf(",")&&(e=e.split(",")[0])),Vn[e]&&e!=="transform"?(s=Hi(t,r),s=e!=="transformOrigin"?s[e]:s.svg?s.origin:to(mn(t,Me))+" "+s.zOrigin+"px"):(s=t.style[e],(!s||s==="auto"||r||~(s+"").indexOf("calc("))&&(s=Zs[e]&&Zs[e](t,e,n)||mn(t,e)||xh(t,e)||(e==="opacity"?1:0))),n&&!~(s+"").trim().indexOf(" ")?Wn(t,e,s,n)+n:s},tp=function(t,e,n,r){if(!n||n==="none"){var s=Xr(e,t,1),o=s&&mn(t,s,1);o&&o!==n?(e=s,n=o):e==="borderColor"&&(n=mn(t,"borderTopColor"))}var l=new Oe(this._pt,t.style,e,0,1,uf),u=0,c=0,h,d,m,g,v,p,E,b,S,C,D,V;if(l.b=n,l.e=r,n+="",r+="",r==="auto"&&(p=t.style[e],t.style[e]=r,r=mn(t,e)||r,p?t.style[e]=p:Tr(t,e)),h=[n,r],Jh(h),n=h[0],r=h[1],m=n.match($r)||[],V=r.match($r)||[],V.length){for(;d=$r.exec(r);)E=d[0],S=r.substring(u,d.index),v?v=(v+1)%5:(S.substr(-5)==="rgba("||S.substr(-5)==="hsla(")&&(v=1),E!==(p=m[c++]||"")&&(g=parseFloat(p)||0,D=p.substr((g+"").length),E.charAt(1)==="="&&(E=Ur(g,E)+D),b=parseFloat(E),C=E.substr((b+"").length),u=$r.lastIndex-C.length,C||(C=C||Ge.units[e]||D,u===r.length&&(r+=C,l.e+=C)),D!==C&&(g=Wn(t,e,p,C)||0),l._pt={_next:l._pt,p:S||c===1?S:",",s:g,c:b-g,m:v&&v<4||e==="zIndex"?Math.round:0});l.c=u<r.length?r.substring(u,r.length):""}else l.r=e==="display"&&r==="none"?df:ff;return Ph.test(r)&&(l.e=0),this._pt=l,l},cc={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},ep=function(t){var e=t.split(" "),n=e[0],r=e[1]||"50%";return(n==="top"||n==="bottom"||r==="left"||r==="right")&&(t=n,n=r,r=t),e[0]=cc[n]||n,e[1]=cc[r]||r,e.join(" ")},np=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n=e.t,r=n.style,s=e.u,o=n._gsap,l,u,c;if(s==="all"||s===!0)r.cssText="",u=1;else for(s=s.split(","),c=s.length;--c>-1;)l=s[c],Vn[l]&&(u=1,l=l==="transformOrigin"?Me:Ut),Tr(n,l);u&&(Tr(n,Ut),o&&(o.svg&&n.removeAttribute("transform"),Hi(n,1),o.uncache=1,_f(r)))}},Zs={clearProps:function(t,e,n,r,s){if(s.data!=="isFromStart"){var o=t._pt=new Oe(t._pt,e,n,0,0,np);return o.u=r,o.pr=-10,o.tween=s,t._props.push(n),1}}},Gi=[1,0,0,1,0,0],vf={},Tf=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},hc=function(t){var e=mn(t,Ut);return Tf(e)?Gi:e.substr(7).match(Rh).map(Wt)},gl=function(t,e){var n=t._gsap||dr(t),r=t.style,s=hc(t),o,l,u,c;return n.svg&&t.getAttribute("transform")?(u=t.transform.baseVal.consolidate().matrix,s=[u.a,u.b,u.c,u.d,u.e,u.f],s.join(",")==="1,0,0,1,0,0"?Gi:s):(s===Gi&&!t.offsetParent&&t!==jr&&!n.svg&&(u=r.display,r.display="block",o=t.parentNode,(!o||!t.offsetParent)&&(c=1,l=t.nextElementSibling,jr.appendChild(t)),s=hc(t),u?r.display=u:Tr(t,"display"),c&&(l?o.insertBefore(t,l):o?o.appendChild(t):jr.removeChild(t))),e&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},ka=function(t,e,n,r,s,o){var l=t._gsap,u=s||gl(t,!0),c=l.xOrigin||0,h=l.yOrigin||0,d=l.xOffset||0,m=l.yOffset||0,g=u[0],v=u[1],p=u[2],E=u[3],b=u[4],S=u[5],C=e.split(" "),D=parseFloat(C[0])||0,V=parseFloat(C[1])||0,O,w,y,T;n?u!==Gi&&(w=g*E-v*p)&&(y=D*(E/w)+V*(-p/w)+(p*S-E*b)/w,T=D*(-v/w)+V*(g/w)-(g*S-v*b)/w,D=y,V=T):(O=gf(t),D=O.x+(~C[0].indexOf("%")?D/100*O.width:D),V=O.y+(~(C[1]||C[0]).indexOf("%")?V/100*O.height:V)),r||r!==!1&&l.smooth?(b=D-c,S=V-h,l.xOffset=d+(b*g+S*p)-b,l.yOffset=m+(b*v+S*E)-S):l.xOffset=l.yOffset=0,l.xOrigin=D,l.yOrigin=V,l.smooth=!!r,l.origin=e,l.originIsAbsolute=!!n,t.style[Me]="0px 0px",o&&(Bn(o,l,"xOrigin",c,D),Bn(o,l,"yOrigin",h,V),Bn(o,l,"xOffset",d,l.xOffset),Bn(o,l,"yOffset",m,l.yOffset)),t.setAttribute("data-svg-origin",D+" "+V)},Hi=function(t,e){var n=t._gsap||new nf(t);if("x"in n&&!e&&!n.uncache)return n;var r=t.style,s=n.scaleX<0,o="px",l="deg",u=getComputedStyle(t),c=mn(t,Me)||"0",h,d,m,g,v,p,E,b,S,C,D,V,O,w,y,T,R,P,k,A,it,ct,at,ut,At,Ht,xt,q,bt,ht,Ft,Ot;return h=d=m=p=E=b=S=C=D=0,g=v=1,n.svg=!!(t.getCTM&&yf(t)),u.translate&&((u.translate!=="none"||u.scale!=="none"||u.rotate!=="none")&&(r[Ut]=(u.translate!=="none"?"translate3d("+(u.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(u.rotate!=="none"?"rotate("+u.rotate+") ":"")+(u.scale!=="none"?"scale("+u.scale.split(" ").join(",")+") ":"")+(u[Ut]!=="none"?u[Ut]:"")),r.scale=r.rotate=r.translate="none"),w=gl(t,n.svg),n.svg&&(n.uncache?(At=t.getBBox(),c=n.xOrigin-At.x+"px "+(n.yOrigin-At.y)+"px",ut=""):ut=!e&&t.getAttribute("data-svg-origin"),ka(t,ut||c,!!ut||n.originIsAbsolute,n.smooth!==!1,w)),V=n.xOrigin||0,O=n.yOrigin||0,w!==Gi&&(P=w[0],k=w[1],A=w[2],it=w[3],h=ct=w[4],d=at=w[5],w.length===6?(g=Math.sqrt(P*P+k*k),v=Math.sqrt(it*it+A*A),p=P||k?Mr(k,P)*lr:0,S=A||it?Mr(A,it)*lr+p:0,S&&(v*=Math.abs(Math.cos(S*zr))),n.svg&&(h-=V-(V*P+O*A),d-=O-(V*k+O*it))):(Ot=w[6],ht=w[7],xt=w[8],q=w[9],bt=w[10],Ft=w[11],h=w[12],d=w[13],m=w[14],y=Mr(Ot,bt),E=y*lr,y&&(T=Math.cos(-y),R=Math.sin(-y),ut=ct*T+xt*R,At=at*T+q*R,Ht=Ot*T+bt*R,xt=ct*-R+xt*T,q=at*-R+q*T,bt=Ot*-R+bt*T,Ft=ht*-R+Ft*T,ct=ut,at=At,Ot=Ht),y=Mr(-A,bt),b=y*lr,y&&(T=Math.cos(-y),R=Math.sin(-y),ut=P*T-xt*R,At=k*T-q*R,Ht=A*T-bt*R,Ft=it*R+Ft*T,P=ut,k=At,A=Ht),y=Mr(k,P),p=y*lr,y&&(T=Math.cos(y),R=Math.sin(y),ut=P*T+k*R,At=ct*T+at*R,k=k*T-P*R,at=at*T-ct*R,P=ut,ct=At),E&&Math.abs(E)+Math.abs(p)>359.9&&(E=p=0,b=180-b),g=Wt(Math.sqrt(P*P+k*k+A*A)),v=Wt(Math.sqrt(at*at+Ot*Ot)),y=Mr(ct,at),S=Math.abs(y)>2e-4?y*lr:0,D=Ft?1/(Ft<0?-Ft:Ft):0),n.svg&&(ut=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!Tf(mn(t,Ut)),ut&&t.setAttribute("transform",ut))),Math.abs(S)>90&&Math.abs(S)<270&&(s?(g*=-1,S+=p<=0?180:-180,p+=p<=0?180:-180):(v*=-1,S+=S<=0?180:-180)),e=e||n.uncache,n.x=h-((n.xPercent=h&&(!e&&n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-h)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+o,n.y=d-((n.yPercent=d&&(!e&&n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-d)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+o,n.z=m+o,n.scaleX=Wt(g),n.scaleY=Wt(v),n.rotation=Wt(p)+l,n.rotationX=Wt(E)+l,n.rotationY=Wt(b)+l,n.skewX=S+l,n.skewY=C+l,n.transformPerspective=D+o,(n.zOrigin=parseFloat(c.split(" ")[2])||!e&&n.zOrigin||0)&&(r[Me]=to(c)),n.xOffset=n.yOffset=0,n.force3D=Ge.force3D,n.renderTransform=n.svg?ip:pf?Ef:rp,n.uncache=0,n},to=function(t){return(t=t.split(" "))[0]+" "+t[1]},sa=function(t,e,n){var r=Ee(e);return Wt(parseFloat(e)+parseFloat(Wn(t,"x",n+"px",r)))+r},rp=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Ef(t,e)},or="0deg",Ii="0px",ar=") ",Ef=function(t,e){var n=e||this,r=n.xPercent,s=n.yPercent,o=n.x,l=n.y,u=n.z,c=n.rotation,h=n.rotationY,d=n.rotationX,m=n.skewX,g=n.skewY,v=n.scaleX,p=n.scaleY,E=n.transformPerspective,b=n.force3D,S=n.target,C=n.zOrigin,D="",V=b==="auto"&&t&&t!==1||b===!0;if(C&&(d!==or||h!==or)){var O=parseFloat(h)*zr,w=Math.sin(O),y=Math.cos(O),T;O=parseFloat(d)*zr,T=Math.cos(O),o=sa(S,o,w*T*-C),l=sa(S,l,-Math.sin(O)*-C),u=sa(S,u,y*T*-C+C)}E!==Ii&&(D+="perspective("+E+ar),(r||s)&&(D+="translate("+r+"%, "+s+"%) "),(V||o!==Ii||l!==Ii||u!==Ii)&&(D+=u!==Ii||V?"translate3d("+o+", "+l+", "+u+") ":"translate("+o+", "+l+ar),c!==or&&(D+="rotate("+c+ar),h!==or&&(D+="rotateY("+h+ar),d!==or&&(D+="rotateX("+d+ar),(m!==or||g!==or)&&(D+="skew("+m+", "+g+ar),(v!==1||p!==1)&&(D+="scale("+v+", "+p+ar),S.style[Ut]=D||"translate(0, 0)"},ip=function(t,e){var n=e||this,r=n.xPercent,s=n.yPercent,o=n.x,l=n.y,u=n.rotation,c=n.skewX,h=n.skewY,d=n.scaleX,m=n.scaleY,g=n.target,v=n.xOrigin,p=n.yOrigin,E=n.xOffset,b=n.yOffset,S=n.forceCSS,C=parseFloat(o),D=parseFloat(l),V,O,w,y,T;u=parseFloat(u),c=parseFloat(c),h=parseFloat(h),h&&(h=parseFloat(h),c+=h,u+=h),u||c?(u*=zr,c*=zr,V=Math.cos(u)*d,O=Math.sin(u)*d,w=Math.sin(u-c)*-m,y=Math.cos(u-c)*m,c&&(h*=zr,T=Math.tan(c-h),T=Math.sqrt(1+T*T),w*=T,y*=T,h&&(T=Math.tan(h),T=Math.sqrt(1+T*T),V*=T,O*=T)),V=Wt(V),O=Wt(O),w=Wt(w),y=Wt(y)):(V=d,y=m,O=w=0),(C&&!~(o+"").indexOf("px")||D&&!~(l+"").indexOf("px"))&&(C=Wn(g,"x",o,"px"),D=Wn(g,"y",l,"px")),(v||p||E||b)&&(C=Wt(C+v-(v*V+p*w)+E),D=Wt(D+p-(v*O+p*y)+b)),(r||s)&&(T=g.getBBox(),C=Wt(C+r/100*T.width),D=Wt(D+s/100*T.height)),T="matrix("+V+","+O+","+w+","+y+","+C+","+D+")",g.setAttribute("transform",T),S&&(g.style[Ut]=T)},sp=function(t,e,n,r,s){var o=360,l=oe(s),u=parseFloat(s)*(l&&~s.indexOf("rad")?lr:1),c=u-r,h=r+c+"deg",d,m;return l&&(d=s.split("_")[1],d==="short"&&(c%=o,c!==c%(o/2)&&(c+=c<0?o:-o)),d==="cw"&&c<0?c=(c+o*oc)%o-~~(c/o)*o:d==="ccw"&&c>0&&(c=(c-o*oc)%o-~~(c/o)*o)),t._pt=m=new Oe(t._pt,e,n,r,c,jm),m.e=h,m.u="deg",t._props.push(n),m},fc=function(t,e){for(var n in e)t[n]=e[n];return t},op=function(t,e,n){var r=fc({},n._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=n.style,l,u,c,h,d,m,g,v;r.svg?(c=n.getAttribute("transform"),n.setAttribute("transform",""),o[Ut]=e,l=Hi(n,1),Tr(n,Ut),n.setAttribute("transform",c)):(c=getComputedStyle(n)[Ut],o[Ut]=e,l=Hi(n,1),o[Ut]=c);for(u in Vn)c=r[u],h=l[u],c!==h&&s.indexOf(u)<0&&(g=Ee(c),v=Ee(h),d=g!==v?Wn(n,u,c,v):parseFloat(c),m=parseFloat(h),t._pt=new Oe(t._pt,l,u,d,m-d,Sa),t._pt.u=v||0,t._props.push(u));fc(l,r)};xe("padding,margin,Width,Radius",function(i,t){var e="Top",n="Right",r="Bottom",s="Left",o=(t<3?[e,n,r,s]:[e+s,e+n,r+n,r+s]).map(function(l){return t<2?i+l:"border"+l+i});Zs[t>1?"border"+i:i]=function(l,u,c,h,d){var m,g;if(arguments.length<4)return m=o.map(function(v){return bn(l,v,c)}),g=m.join(" "),g.split(m[0]).length===5?m[0]:g;m=(h+"").split(" "),g={},o.forEach(function(v,p){return g[v]=m[p]=m[p]||m[(p-1)/2|0]}),l.init(u,g,d)}});var wf={name:"css",register:Da,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,r,s){var o=this._props,l=t.style,u=n.vars.startAt,c,h,d,m,g,v,p,E,b,S,C,D,V,O,w,y;_l||Da(),this.styles=this.styles||mf(t),y=this.styles.props,this.tween=n;for(p in e)if(p!=="autoRound"&&(h=e[p],!(Ue[p]&&rf(p,e,n,r,t,s)))){if(g=typeof h,v=Zs[p],g==="function"&&(h=h.call(n,r,t,s),g=typeof h),g==="string"&&~h.indexOf("random(")&&(h=ji(h)),v)v(this,t,p,h,n)&&(w=1);else if(p.substr(0,2)==="--")c=(getComputedStyle(t).getPropertyValue(p)+"").trim(),h+="",zn.lastIndex=0,zn.test(c)||(E=Ee(c),b=Ee(h)),b?E!==b&&(c=Wn(t,p,c,b)+b):E&&(h+=E),this.add(l,"setProperty",c,h,r,s,0,0,p),o.push(p),y.push(p,0,l[p]);else if(g!=="undefined"){if(u&&p in u?(c=typeof u[p]=="function"?u[p].call(n,r,t,s):u[p],oe(c)&&~c.indexOf("random(")&&(c=ji(c)),Ee(c+"")||c==="auto"||(c+=Ge.units[p]||Ee(bn(t,p))||""),(c+"").charAt(1)==="="&&(c=bn(t,p))):c=bn(t,p),m=parseFloat(c),S=g==="string"&&h.charAt(1)==="="&&h.substr(0,2),S&&(h=h.substr(2)),d=parseFloat(h),p in _n&&(p==="autoAlpha"&&(m===1&&bn(t,"visibility")==="hidden"&&d&&(m=0),y.push("visibility",0,l.visibility),Bn(this,l,"visibility",m?"inherit":"hidden",d?"inherit":"hidden",!d)),p!=="scale"&&p!=="transform"&&(p=_n[p],~p.indexOf(",")&&(p=p.split(",")[0]))),C=p in Vn,C){if(this.styles.save(p),D||(V=t._gsap,V.renderTransform&&!e.parseTransform||Hi(t,e.parseTransform),O=e.smoothOrigin!==!1&&V.smooth,D=this._pt=new Oe(this._pt,l,Ut,0,1,V.renderTransform,V,0,-1),D.dep=1),p==="scale")this._pt=new Oe(this._pt,V,"scaleY",V.scaleY,(S?Ur(V.scaleY,S+d):d)-V.scaleY||0,Sa),this._pt.u=0,o.push("scaleY",p),p+="X";else if(p==="transformOrigin"){y.push(Me,0,l[Me]),h=ep(h),V.svg?ka(t,h,0,O,0,this):(b=parseFloat(h.split(" ")[2])||0,b!==V.zOrigin&&Bn(this,V,"zOrigin",V.zOrigin,b),Bn(this,l,p,to(c),to(h)));continue}else if(p==="svgOrigin"){ka(t,h,1,O,0,this);continue}else if(p in vf){sp(this,V,p,m,S?Ur(m,S+h):h);continue}else if(p==="smoothOrigin"){Bn(this,V,"smooth",V.smooth,h);continue}else if(p==="force3D"){V[p]=h;continue}else if(p==="transform"){op(this,h,t);continue}}else p in l||(p=Xr(p)||p);if(C||(d||d===0)&&(m||m===0)&&!Um.test(h)&&p in l)E=(c+"").substr((m+"").length),d||(d=0),b=Ee(h)||(p in Ge.units?Ge.units[p]:E),E!==b&&(m=Wn(t,p,c,b)),this._pt=new Oe(this._pt,C?V:l,p,m,(S?Ur(m,S+d):d)-m,!C&&(b==="px"||p==="zIndex")&&e.autoRound!==!1?qm:Sa),this._pt.u=b||0,E!==b&&b!=="%"&&(this._pt.b=c,this._pt.r=zm);else if(p in l)tp.call(this,t,p,c,S?S+h:h);else if(p in t)this.add(t,p,c||t[p],S?S+h:h,r,s);else if(p!=="parseTransform"){sl(p,h);continue}C||(p in l?y.push(p,0,l[p]):y.push(p,1,c||t[p])),o.push(p)}}w&&cf(this)},render:function(t,e){if(e.tween._time||!ml())for(var n=e._pt;n;)n.r(t,n.d),n=n._next;else e.styles.revert()},get:bn,aliases:_n,getSetter:function(t,e,n){var r=_n[e];return r&&r.indexOf(",")<0&&(e=r),e in Vn&&e!==Me&&(t._gsap.x||bn(t,"x"))?n&&sc===n?e==="scale"?Wm:Km:(sc=n||{})&&(e==="scale"?Qm:Xm):t.style&&!nl(t.style[e])?Gm:~e.indexOf("-")?Hm:fl(t,e)},core:{_removeProperty:Tr,_getMatrix:gl}};Fe.utils.checkPrefix=Xr;Fe.core.getStyleSaver=mf;(function(i,t,e,n){var r=xe(i+","+t+","+e,function(s){Vn[s]=1});xe(t,function(s){Ge.units[s]="deg",vf[s]=1}),_n[r[13]]=i+","+t,xe(n,function(s){var o=s.split(":");_n[o[1]]=r[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");xe("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(i){Ge.units[i]="px"});Fe.registerPlugin(wf);var vo=Fe.registerPlugin(wf)||Fe;vo.core.Tween;function ap(i){return i.filter(Boolean).join(" ")}function oa(i){let t,e,n,r,s;const o=i[6].default,l=ns(o,i,i[5],null);let u=[{class:e="button-base "+i[3]},{href:i[1]},{target:i[2]},{role:"button"},{tabindex:"0"},i[4]],c={};for(let h=0;h<u.length;h+=1)c=pa(c,u[h]);return{c(){t=B(i[1]?"a":"button"),l&&l.c(),this.h()},l(h){t=U(h,((i[1]?"a":"button")||"null").toUpperCase(),{class:!0,href:!0,target:!0,role:!0,tabindex:!0});var d=H(t);l&&l.l(d),d.forEach(M),this.h()},h(){Qu(i[1]?"a":"button")(t,c)},m(h,d){z(h,t,d),l&&l.m(t,null),i[8](t),n=!0,r||(s=mo(t,"click",i[7]),r=!0)},p(h,d){l&&l.p&&(!n||d&32)&&rs(l,o,h,h[5],n?ss(o,h[5],d,null):is(h[5]),null),Qu(h[1]?"a":"button")(t,c=F_(u,[(!n||d&8&&e!==(e="button-base "+h[3]))&&{class:e},(!n||d&2)&&{href:h[1]},(!n||d&4)&&{target:h[2]},{role:"button"},{tabindex:"0"},d&16&&h[4]]))},i(h){n||(Q(l,h),n=!0)},o(h){J(l,h),n=!1},d(h){h&&M(t),l&&l.d(h),i[8](null),r=!1,s()}}}function lp(i){let t=i[1]?"a":"button",e,n,r=(i[1]?"a":"button")&&oa(i);return{c(){r&&r.c(),e=Ne()},l(s){r&&r.l(s),e=Ne()},m(s,o){r&&r.m(s,o),z(s,e,o),n=!0},p(s,[o]){s[1],t?Le(t,s[1]?"a":"button")?(r.d(1),r=oa(s),t=s[1]?"a":"button",r.c(),r.m(e.parentNode,e)):r.p(s,o):(r=oa(s),t=s[1]?"a":"button",r.c(),r.m(e.parentNode,e))},i(s){n||(Q(r,s),n=!0)},o(s){J(r,s),n=!1},d(s){s&&M(e),r&&r.d(s)}}}function up(i,t,e){const n=["el","href","target","class"];let r=Wu(t,n),{$$slots:s={},$$scope:o}=t,{el:l=void 0}=t,{href:u=void 0}=t,{target:c=void 0}=t,{class:h=""}=t;function d(g){wh.call(this,i,g)}function m(g){Li[g?"unshift":"push"](()=>{l=g,e(0,l)})}return i.$$set=g=>{t=pa(pa({},t),D_(g)),e(4,r=Wu(t,n)),"el"in g&&e(0,l=g.el),"href"in g&&e(1,u=g.href),"target"in g&&e(2,c=g.target),"class"in g&&e(3,h=g.class),"$$scope"in g&&e(5,o=g.$$scope)},[l,u,c,h,r,o,s,d,m]}class cp extends Qe{constructor(t){super(),Xe(this,t,up,lp,Le,{el:0,href:1,target:2,class:3})}}function hp(i){let t;const e=i[5].default,n=ns(e,i,i[7],null);return{c(){n&&n.c()},l(r){n&&n.l(r)},m(r,s){n&&n.m(r,s),t=!0},p(r,s){n&&n.p&&(!t||s&128)&&rs(n,e,r,r[7],t?ss(e,r[7],s,null):is(r[7]),null)},i(r){t||(Q(n,r),t=!0)},o(r){J(n,r),t=!1},d(r){n&&n.d(r)}}}function fp(i){let t,e;return t=new cp({props:{class:"button-main px-5 transition-colors duration-300 ease-in-out rounded-md py-3 "+i[2],href:i[0],target:i[1],$$slots:{default:[hp]},$$scope:{ctx:i}}}),t.$on("click",i[6]),{c(){pt(t.$$.fragment)},l(n){gt(t.$$.fragment,n)},m(n,r){yt(t,n,r),e=!0},p(n,[r]){const s={};r&4&&(s.class="button-main px-5 transition-colors duration-300 ease-in-out rounded-md py-3 "+n[2]),r&1&&(s.href=n[0]),r&2&&(s.target=n[1]),r&128&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(Q(t.$$.fragment,n),e=!0)},o(n){J(t.$$.fragment,n),e=!1},d(n){vt(t,n)}}}function dp(i,t,e){let n,{$$slots:r={},$$scope:s}=t,{theme:o="blue"}=t,{href:l=void 0}=t,{target:u=void 0}=t,{class:c=""}=t;function h(d){wh.call(this,i,d)}return i.$$set=d=>{"theme"in d&&e(3,o=d.theme),"href"in d&&e(0,l=d.href),"target"in d&&e(1,u=d.target),"class"in d&&e(4,c=d.class),"$$scope"in d&&e(7,s=d.$$scope)},i.$$.update=()=>{i.$$.dirty&24&&e(2,n=ap([o==="blue"&&"bg-blue-500 hover:bg-blue-600 text-white",o==="red"&&"bg-red-500 hover:bg-red-600 text-white",o==="green"&&"bg-green-500 hover:bg-green-600 text-white",c]))},[l,u,n,o,c,r,h,s]}class ce extends Qe{constructor(t){super(),Xe(this,t,dp,fp,Le,{theme:3,href:0,target:1,class:4})}}function dc(i,t,e){const n=i.slice();return n[6]=t[e],n}function _c(i,t,e){const n=i.slice();return n[9]=t[e],n[11]=e,n}function mc(i){let t,e=i[1][i[11]].naam+"",n,r,s=i[9]+"",o;return{c(){t=B("p"),n=Z(e),r=Z(": "),o=Z(s),this.h()},l(l){t=U(l,"P",{class:!0});var u=H(t);n=tt(u,e),r=tt(u,": "),o=tt(u,s),u.forEach(M),this.h()},h(){G(t,"class","capitalize")},m(l,u){z(l,t,u),F(t,n),F(t,r),F(t,o)},p(l,u){u&2&&e!==(e=l[1][l[11]].naam+"")&&Bt(n,e),u&1&&s!==(s=l[9]+"")&&Bt(o,s)},d(l){l&&M(t)}}}function _p(i){let t,e="Sentiment:";return{c(){t=B("u"),t.textContent=e},l(n){t=U(n,"U",{"data-svelte-h":!0}),nn(t)!=="svelte-1epx1kf"&&(t.textContent=e)},m(n,r){z(n,t,r)},p:fr,d(n){n&&M(t)}}}function pc(i){let t,e,n=i[6].id+"",r,s,o,l,u,c,h=i[3](i[6].values).toFixed(2)+"",d,m,g,v=yn(i[6].values),p=[];for(let E=0;E<v.length;E+=1)p[E]=mc(_c(i,v,E));return u=new H_({props:{content:"Het sentiment geeft aan hoe een vertegenwoordiger zich voelt over de gemaakte keuzes. ",action:"click",$$slots:{default:[_p]},$$scope:{ctx:i}}}),{c(){t=B("div"),e=B("p"),r=Z(n),s=K();for(let E=0;E<p.length;E+=1)p[E].c();o=K(),l=B("p"),pt(u.$$.fragment),c=K(),d=Z(h),m=K(),this.h()},l(E){t=U(E,"DIV",{class:!0});var b=H(t);e=U(b,"P",{class:!0});var S=H(e);r=tt(S,n),S.forEach(M),s=W(b);for(let D=0;D<p.length;D+=1)p[D].l(b);o=W(b),l=U(b,"P",{});var C=H(l);gt(u.$$.fragment,C),c=W(C),d=tt(C,h),C.forEach(M),m=W(b),b.forEach(M),this.h()},h(){G(e,"class","font-bold"),ye(l,"bg-red-300",i[3](i[6].values)<8),ye(l,"bg-green-300",i[3](i[6].values)>=8),G(t,"class","bg-yellow-50")},m(E,b){z(E,t,b),F(t,e),F(e,r),F(t,s);for(let S=0;S<p.length;S+=1)p[S]&&p[S].m(t,null);F(t,o),F(t,l),yt(u,l,null),F(l,c),F(l,d),F(t,m),g=!0},p(E,b){if((!g||b&1)&&n!==(n=E[6].id+"")&&Bt(r,n),b&3){v=yn(E[6].values);let C;for(C=0;C<v.length;C+=1){const D=_c(E,v,C);p[C]?p[C].p(D,b):(p[C]=mc(D),p[C].c(),p[C].m(t,o))}for(;C<p.length;C+=1)p[C].d(1);p.length=v.length}const S={};b&4096&&(S.$$scope={dirty:b,ctx:E}),u.$set(S),(!g||b&1)&&h!==(h=E[3](E[6].values).toFixed(2)+"")&&Bt(d,h),(!g||b&9)&&ye(l,"bg-red-300",E[3](E[6].values)<8),(!g||b&9)&&ye(l,"bg-green-300",E[3](E[6].values)>=8)},i(E){g||(Q(u.$$.fragment,E),g=!0)},o(E){J(u.$$.fragment,E),g=!1},d(E){E&&M(t),os(p,E),vt(u)}}}function mp(i){let t;return{c(){t=Z("Sluit")},l(e){t=tt(e,"Sluit")},m(e,n){z(e,t,n)},d(e){e&&M(t)}}}function pp(i){let t,e,n=Dn.resultaat_per_team_titel+"",r,s,o,l=Dn.resultaat_per_team_beschrijving+"",u,c,h,d,m,g,v,p,E=yn(i[0]),b=[];for(let C=0;C<E.length;C+=1)b[C]=pc(dc(i,E,C));const S=C=>J(b[C],1,1,()=>{b[C]=null});return m=new ce({props:{theme:"red",$$slots:{default:[mp]},$$scope:{ctx:i}}}),m.$on("click",i[5]),{c(){t=B("div"),e=B("p"),r=Z(n),s=K(),o=B("p"),u=Z(l),c=K(),h=B("div");for(let C=0;C<b.length;C+=1)b[C].c();d=K(),pt(m.$$.fragment),this.h()},l(C){t=U(C,"DIV",{class:!0});var D=H(t);e=U(D,"P",{class:!0});var V=H(e);r=tt(V,n),V.forEach(M),s=W(D),o=U(D,"P",{class:!0});var O=H(o);u=tt(O,l),O.forEach(M),c=W(D),h=U(D,"DIV",{class:!0});var w=H(h);for(let y=0;y<b.length;y+=1)b[y].l(w);w.forEach(M),d=W(D),gt(m.$$.fragment,D),D.forEach(M),this.h()},h(){G(e,"class","font-bold text-xl"),G(o,"class","mb-6"),G(h,"class","grid grid-cols-2 gap-4 mb-4"),G(t,"class","p-14 bg-white shadow-lg items-center absolute flex flex-col w-full max-w-[50vw] overflow-x-auto break-words")},m(C,D){z(C,t,D),F(t,e),F(e,r),F(t,s),F(t,o),F(o,u),F(t,c),F(t,h);for(let V=0;V<b.length;V+=1)b[V]&&b[V].m(h,null);F(t,d),yt(m,t,null),p=!0},p(C,[D]){if(D&11){E=yn(C[0]);let O;for(O=0;O<E.length;O+=1){const w=dc(C,E,O);b[O]?(b[O].p(w,D),Q(b[O],1)):(b[O]=pc(w),b[O].c(),Q(b[O],1),b[O].m(h,null))}for(Sn(),O=E.length;O<b.length;O+=1)S(O);Cn()}const V={};D&4096&&(V.$$scope={dirty:D,ctx:C}),m.$set(V)},i(C){if(!p){for(let D=0;D<E.length;D+=1)Q(b[D]);Q(m.$$.fragment,C),C&&k_(()=>{p&&(v&&v.end(1),g=M_(t,gp,{}),g.start())}),p=!0}},o(C){b=b.filter(Boolean);for(let D=0;D<b.length;D+=1)J(b[D]);J(m.$$.fragment,C),g&&g.invalidate(),C&&(v=N_(t,yp,{})),p=!1},d(C){C&&M(t),os(b,C),vt(m),C&&v&&v.end()}}}function gp(i){let t=vo.timeline().fromTo(i,{yPercent:200},{yPercent:0,duration:.48,ease:"power1.inOut"});return{duration:t.totalDuration()*1e3,tick:e=>{t.progress(e)}}}function yp(i){let t=vo.timeline().fromTo(i,{yPercent:0},{yPercent:-200,duration:.48,ease:"power2.inOut"});return{duration:t.totalDuration()*1e3,tick:e=>{t.progress(1-e)}}}function vp(i,t,e){let n,r,s;ke(i,yr,c=>e(0,n=c)),ke(i,Ks,c=>e(1,r=c)),ke(i,qs,c=>e(2,s=c));let{averages:o=[]}=t;const l=c=>{const h=[];for(let p=0;p<o.length;p++){const E=Math.abs(o[p]-c[p]);h.push(E)}let v=10-h.reduce((p,E)=>p+E,0)/h.length/10*9;return v=Math.max(1,Math.min(v,10)),v},u=()=>qs.set(!s);return i.$$set=c=>{"averages"in c&&e(4,o=c.averages)},[n,r,s,l,o,u]}class Tp extends Qe{constructor(t){super(),Xe(this,t,vp,pp,Le,{averages:4})}}function Ep(i){let t,e,n;const r=i[2].default,s=ns(r,i,i[1],null);return{c(){t=B("div"),s&&s.c(),this.h()},l(o){t=U(o,"DIV",{class:!0});var l=H(t);s&&s.l(l),l.forEach(M),this.h()},h(){G(t,"class",e="p-14 bg-white shadow-lg flex flex-col "+i[0])},m(o,l){z(o,t,l),s&&s.m(t,null),n=!0},p(o,[l]){s&&s.p&&(!n||l&2)&&rs(s,r,o,o[1],n?ss(r,o[1],l,null):is(o[1]),null),(!n||l&1&&e!==(e="p-14 bg-white shadow-lg flex flex-col "+o[0]))&&G(t,"class",e)},i(o){n||(Q(s,o),n=!0)},o(o){J(s,o),n=!1},d(o){o&&M(t),s&&s.d(o)}}}function wp(i,t,e){let{$$slots:n={},$$scope:r}=t,{class:s=""}=t;return i.$$set=o=>{"class"in o&&e(0,s=o.class),"$$scope"in o&&e(1,r=o.$$scope)},[s,r,n]}class ii extends Qe{constructor(t){super(),Xe(this,t,wp,Ep,Le,{class:0})}}function gc(i,t,e){const n=i.slice();return n[13]=t[e],n[15]=e,n}function yc(i){let t,e,n,r=i[0][i[15]].naam+"",s,o,l,u=i[13].toFixed(2)+"",c;return{c(){t=B("tr"),e=B("td"),n=Z("Gemiddelde inzet "),s=Z(r),o=K(),l=B("td"),c=Z(u),this.h()},l(h){t=U(h,"TR",{});var d=H(t);e=U(d,"TD",{class:!0});var m=H(e);n=tt(m,"Gemiddelde inzet "),s=tt(m,r),m.forEach(M),o=W(d),l=U(d,"TD",{});var g=H(l);c=tt(g,u),g.forEach(M),d.forEach(M),this.h()},h(){G(e,"class","pr-4")},m(h,d){z(h,t,d),F(t,e),F(e,n),F(e,s),F(t,o),F(t,l),F(l,c)},p(h,d){d&1&&r!==(r=h[0][h[15]].naam+"")&&Bt(s,r),d&2&&u!==(u=h[13].toFixed(2)+"")&&Bt(c,u)},d(h){h&&M(t)}}}function Ip(i){let t;return{c(){t=Z("Terug")},l(e){t=tt(e,"Terug")},m(e,n){z(e,t,n)},d(e){e&&M(t)}}}function Ap(i){let t;return{c(){t=Z("Resultaten per team")},l(e){t=tt(e,"Resultaten per team")},m(e,n){z(e,t,n)},d(e){e&&M(t)}}}function bp(i){let t,e=Dn.resultaat_titel+"",n,r,s,o=Dn.resultaat_beschrijving+"",l,u,c,h,d='<td class="font-bold pr-4">Maatregel</td> <td class="font-bold">Schaal</td>',m,g,v,p,E="Geholpen mensen per jaar",b,S,C,D,V,O,w="Kosten per jaar",y,T,R=i[3].toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"",P,k,A,it,ct="Aantal vrijwilligers per jaar",at,ut,At,Ht,xt,q,bt,ht,Ft,Ot=yn(i[1]),Et=[];for(let et=0;et<Ot.length;et+=1)Et[et]=yc(gc(i,Ot,et));return q=new ce({props:{theme:"red",$$slots:{default:[Ip]},$$scope:{ctx:i}}}),q.$on("click",i[7]),ht=new ce({props:{$$slots:{default:[Ap]},$$scope:{ctx:i}}}),ht.$on("click",i[8]),{c(){t=B("div"),n=Z(e),r=K(),s=B("p"),l=Z(o),u=K(),c=B("table"),h=B("tr"),h.innerHTML=d,m=K();for(let et=0;et<Et.length;et+=1)Et[et].c();g=K(),v=B("tr"),p=B("td"),p.textContent=E,b=K(),S=B("td"),C=Z(i[2]),D=K(),V=B("tr"),O=B("td"),O.textContent=w,y=K(),T=B("td"),P=Z(R),k=K(),A=B("tr"),it=B("td"),it.textContent=ct,at=K(),ut=B("td"),At=Z(i[4]),Ht=K(),xt=B("div"),pt(q.$$.fragment),bt=K(),pt(ht.$$.fragment),this.h()},l(et){t=U(et,"DIV",{class:!0});var Rt=H(t);n=tt(Rt,e),Rt.forEach(M),r=W(et),s=U(et,"P",{class:!0});var fe=H(s);l=tt(fe,o),fe.forEach(M),u=W(et),c=U(et,"TABLE",{class:!0});var zt=H(c);h=U(zt,"TR",{"data-svelte-h":!0}),nn(h)!=="svelte-2gnwuf"&&(h.innerHTML=d),m=W(zt);for(let Je=0;Je<Et.length;Je+=1)Et[Je].l(zt);g=W(zt),v=U(zt,"TR",{});var Pt=H(v);p=U(Pt,"TD",{class:!0,"data-svelte-h":!0}),nn(p)!=="svelte-51zn7d"&&(p.textContent=E),b=W(Pt),S=U(Pt,"TD",{});var Ce=H(S);C=tt(Ce,i[2]),Ce.forEach(M),Pt.forEach(M),D=W(zt),V=U(zt,"TR",{});var ne=H(V);O=U(ne,"TD",{class:!0,"data-svelte-h":!0}),nn(O)!=="svelte-tchboe"&&(O.textContent=w),y=W(ne),T=U(ne,"TD",{});var de=H(T);P=tt(de,R),de.forEach(M),ne.forEach(M),k=W(zt),A=U(zt,"TR",{});var Ye=H(A);it=U(Ye,"TD",{class:!0,"data-svelte-h":!0}),nn(it)!=="svelte-22n87w"&&(it.textContent=ct),at=W(Ye),ut=U(Ye,"TD",{});var be=H(ut);At=tt(be,i[4]),be.forEach(M),Ye.forEach(M),zt.forEach(M),Ht=W(et),xt=U(et,"DIV",{class:!0});var Kt=H(xt);gt(q.$$.fragment,Kt),bt=W(Kt),gt(ht.$$.fragment,Kt),Kt.forEach(M),this.h()},h(){G(t,"class","font-bold text-2xl"),G(s,"class","mb-6"),G(p,"class","font-bold"),G(O,"class","font-bold pr-4"),G(it,"class","font-bold pr-4"),G(c,"class","mb-4"),G(xt,"class","flex gap-x-2 justify-center")},m(et,Rt){z(et,t,Rt),F(t,n),z(et,r,Rt),z(et,s,Rt),F(s,l),z(et,u,Rt),z(et,c,Rt),F(c,h),F(c,m);for(let fe=0;fe<Et.length;fe+=1)Et[fe]&&Et[fe].m(c,null);F(c,g),F(c,v),F(v,p),F(v,b),F(v,S),F(S,C),F(c,D),F(c,V),F(V,O),F(V,y),F(V,T),F(T,P),F(c,k),F(c,A),F(A,it),F(A,at),F(A,ut),F(ut,At),z(et,Ht,Rt),z(et,xt,Rt),yt(q,xt,null),F(xt,bt),yt(ht,xt,null),Ft=!0},p(et,Rt){if(Rt&3){Ot=yn(et[1]);let Pt;for(Pt=0;Pt<Ot.length;Pt+=1){const Ce=gc(et,Ot,Pt);Et[Pt]?Et[Pt].p(Ce,Rt):(Et[Pt]=yc(Ce),Et[Pt].c(),Et[Pt].m(c,g))}for(;Pt<Et.length;Pt+=1)Et[Pt].d(1);Et.length=Ot.length}(!Ft||Rt&4)&&Bt(C,et[2]),(!Ft||Rt&8)&&R!==(R=et[3].toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"")&&Bt(P,R),(!Ft||Rt&16)&&Bt(At,et[4]);const fe={};Rt&65536&&(fe.$$scope={dirty:Rt,ctx:et}),q.$set(fe);const zt={};Rt&65536&&(zt.$$scope={dirty:Rt,ctx:et}),ht.$set(zt)},i(et){Ft||(Q(q.$$.fragment,et),Q(ht.$$.fragment,et),Ft=!0)},o(et){J(q.$$.fragment,et),J(ht.$$.fragment,et),Ft=!1},d(et){et&&(M(t),M(r),M(s),M(u),M(c),M(Ht),M(xt)),os(Et,et),vt(q),vt(ht)}}}function vc(i){let t,e;return t=new Tp({props:{averages:i[1]}}),{c(){pt(t.$$.fragment)},l(n){gt(t.$$.fragment,n)},m(n,r){yt(t,n,r),e=!0},p(n,r){const s={};r&2&&(s.averages=n[1]),t.$set(s)},i(n){e||(Q(t.$$.fragment,n),e=!0)},o(n){J(t.$$.fragment,n),e=!1},d(n){vt(t,n)}}}function Rp(i){let t,e,n,r;t=new ii({props:{class:"items-start",$$slots:{default:[bp]},$$scope:{ctx:i}}});let s=i[5]&&vc(i);return{c(){pt(t.$$.fragment),e=K(),s&&s.c(),n=Ne()},l(o){gt(t.$$.fragment,o),e=W(o),s&&s.l(o),n=Ne()},m(o,l){yt(t,o,l),z(o,e,l),s&&s.m(o,l),z(o,n,l),r=!0},p(o,[l]){const u={};l&65599&&(u.$$scope={dirty:l,ctx:o}),t.$set(u),o[5]?s?(s.p(o,l),l&32&&Q(s,1)):(s=vc(o),s.c(),Q(s,1),s.m(n.parentNode,n)):s&&(Sn(),J(s,1,1,()=>{s=null}),Cn())},i(o){r||(Q(t.$$.fragment,o),Q(s),r=!0)},o(o){J(t.$$.fragment,o),J(s),r=!1},d(o){o&&(M(e),M(n)),vt(t,o),s&&s.d(o)}}}function Pp(i,t,e){let n,r,s;ke(i,yr,E=>e(6,n=E)),ke(i,Ks,E=>e(0,r=E)),ke(i,qs,E=>e(5,s=E));let o=[],l=0,u=0,c=0,h=[];const d=()=>{let E=[],b=n.length;n.forEach(S=>{S.values.forEach((C,D)=>{E[D]||(E[D]=0),E[D]+=C})}),e(1,o=E.map(S=>S/b))},m=()=>{e(2,l=r.reduce((E,b,S)=>E+$i(o[S]??0,b),0)),e(3,u=r.reduce((E,b,S)=>E+Gs(o[S]??0,b),0)),e(4,c=r.reduce((E,b,S)=>E+Hs(o[S]??0,b),0))},g=()=>{h=[],n.forEach(E=>{h.push(E)})},v=()=>{un.set(3)},p=()=>qs.set(!s);return i.$$.update=()=>{i.$$.dirty&65&&r.length&&n.length&&(d(),m(),g())},[r,o,l,u,c,s,n,v,p]}class Sp extends Qe{constructor(t){super(),Xe(this,t,Pp,Rp,Le,{})}}const Cp=""+new URL("../assets/bob-logo.ugDKnZ_j.png",import.meta.url).href;var Tc={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If=function(i){const t=[];let e=0;for(let n=0;n<i.length;n++){let r=i.charCodeAt(n);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&n+1<i.length&&(i.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(i.charCodeAt(++n)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},Dp=function(i){const t=[];let e=0,n=0;for(;e<i.length;){const r=i[e++];if(r<128)t[n++]=String.fromCharCode(r);else if(r>191&&r<224){const s=i[e++];t[n++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=i[e++],o=i[e++],l=i[e++],u=((r&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;t[n++]=String.fromCharCode(55296+(u>>10)),t[n++]=String.fromCharCode(56320+(u&1023))}else{const s=i[e++],o=i[e++];t[n++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},Af={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<i.length;r+=3){const s=i[r],o=r+1<i.length,l=o?i[r+1]:0,u=r+2<i.length,c=u?i[r+2]:0,h=s>>2,d=(s&3)<<4|l>>4;let m=(l&15)<<2|c>>6,g=c&63;u||(g=64,o||(m=64)),n.push(e[h],e[d],e[m],e[g])}return n.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(If(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):Dp(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const e=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<i.length;){const s=e[i.charAt(r++)],l=r<i.length?e[i.charAt(r)]:0;++r;const c=r<i.length?e[i.charAt(r)]:64;++r;const d=r<i.length?e[i.charAt(r)]:64;if(++r,s==null||l==null||c==null||d==null)throw new kp;const m=s<<2|l>>4;if(n.push(m),c!==64){const g=l<<4&240|c>>2;if(n.push(g),d!==64){const v=c<<6&192|d;n.push(v)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class kp extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Vp=function(i){const t=If(i);return Af.encodeByteArray(t,!0)},eo=function(i){return Vp(i).replace(/\./g,"")},xp=function(i){try{return Af.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=()=>Op().__FIREBASE_DEFAULTS__,Np=()=>{if(typeof process>"u"||typeof Tc>"u")return;const i=Tc.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Fp=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&xp(i[1]);return t&&JSON.parse(t)},yl=()=>{try{return Mp()||Np()||Fp()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Lp=i=>{var t,e;return(e=(t=yl())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[i]},$p=i=>{const t=Lp(i);if(!t)return;const e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),n]:[t.substring(0,e),n]},bf=()=>{var i;return(i=yl())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const e={alg:"none",type:"JWT"},n=t||"demo-project",r=i.iat||0,s=i.sub||i.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},i);return[eo(JSON.stringify(e)),eo(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zp(){var i;const t=(i=yl())===null||i===void 0?void 0:i.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qp(){return!zp()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Gp(){try{return typeof indexedDB=="object"}catch{return!1}}function Hp(){return new Promise((i,t)=>{try{let e=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(n),i(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="FirebaseError";class si extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name=Kp,Object.setPrototypeOf(this,si.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Rf.prototype.create)}}class Rf{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?Wp(s,n):"Error",l=`${this.serviceName}: ${o} (${r}).`;return new si(r,l,n)}}function Wp(i,t){return i.replace(Qp,(e,n)=>{const r=t[n];return r!=null?String(r):`<${n}?>`})}const Qp=/\{\$([^}]+)}/g;function Va(i,t){if(i===t)return!0;const e=Object.keys(i),n=Object.keys(t);for(const r of e){if(!n.includes(r))return!1;const s=i[r],o=t[r];if(Ec(s)&&Ec(o)){if(!Va(s,o))return!1}else if(s!==o)return!1}for(const r of n)if(!e.includes(r))return!1;return!0}function Ec(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(i){return i&&i._delegate?i._delegate:i}class Ki{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const n=new Bp;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(e=t==null?void 0:t.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Jp(t))try{this.getOrInitializeService({instanceIdentifier:ur})}catch{}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const s=this.getOrInitializeService({instanceIdentifier:r});n.resolve(s)}catch{}}}}clearInstance(t=ur){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ur){return this.instances.has(t)}getOptions(t=ur){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);n===l&&o.resolve(r)}return r}onInit(t,e){var n;const r=this.normalizeInstanceIdentifier(e),s=(n=this.onInitCallbacks.get(r))!==null&&n!==void 0?n:new Set;s.add(t),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Yp(t),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=ur){return this.component?this.component.multipleInstances?t:ur:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Yp(i){return i===ur?void 0:i}function Jp(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new Xp(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(mt||(mt={}));const tg={debug:mt.DEBUG,verbose:mt.VERBOSE,info:mt.INFO,warn:mt.WARN,error:mt.ERROR,silent:mt.SILENT},eg=mt.INFO,ng={[mt.DEBUG]:"log",[mt.VERBOSE]:"log",[mt.INFO]:"info",[mt.WARN]:"warn",[mt.ERROR]:"error"},rg=(i,t,...e)=>{if(t<i.logLevel)return;const n=new Date().toISOString(),r=ng[t];if(r)console[r](`[${n}]  ${i.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Pf{constructor(t){this.name=t,this._logLevel=eg,this._logHandler=rg,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in mt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?tg[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,mt.DEBUG,...t),this._logHandler(this,mt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,mt.VERBOSE,...t),this._logHandler(this,mt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,mt.INFO,...t),this._logHandler(this,mt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,mt.WARN,...t),this._logHandler(this,mt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,mt.ERROR,...t),this._logHandler(this,mt.ERROR,...t)}}const ig=(i,t)=>t.some(e=>i instanceof e);let wc,Ic;function sg(){return wc||(wc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function og(){return Ic||(Ic=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Sf=new WeakMap,xa=new WeakMap,Cf=new WeakMap,aa=new WeakMap,vl=new WeakMap;function ag(i){const t=new Promise((e,n)=>{const r=()=>{i.removeEventListener("success",s),i.removeEventListener("error",o)},s=()=>{e(qn(i.result)),r()},o=()=>{n(i.error),r()};i.addEventListener("success",s),i.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&Sf.set(e,i)}).catch(()=>{}),vl.set(t,i),t}function lg(i){if(xa.has(i))return;const t=new Promise((e,n)=>{const r=()=>{i.removeEventListener("complete",s),i.removeEventListener("error",o),i.removeEventListener("abort",o)},s=()=>{e(),r()},o=()=>{n(i.error||new DOMException("AbortError","AbortError")),r()};i.addEventListener("complete",s),i.addEventListener("error",o),i.addEventListener("abort",o)});xa.set(i,t)}let Oa={get(i,t,e){if(i instanceof IDBTransaction){if(t==="done")return xa.get(i);if(t==="objectStoreNames")return i.objectStoreNames||Cf.get(i);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return qn(i[t])},set(i,t,e){return i[t]=e,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function ug(i){Oa=i(Oa)}function cg(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){const n=i.call(la(this),t,...e);return Cf.set(n,t.sort?t.sort():[t]),qn(n)}:og().includes(i)?function(...t){return i.apply(la(this),t),qn(Sf.get(this))}:function(...t){return qn(i.apply(la(this),t))}}function hg(i){return typeof i=="function"?cg(i):(i instanceof IDBTransaction&&lg(i),ig(i,sg())?new Proxy(i,Oa):i)}function qn(i){if(i instanceof IDBRequest)return ag(i);if(aa.has(i))return aa.get(i);const t=hg(i);return t!==i&&(aa.set(i,t),vl.set(t,i)),t}const la=i=>vl.get(i);function fg(i,t,{blocked:e,upgrade:n,blocking:r,terminated:s}={}){const o=indexedDB.open(i,t),l=qn(o);return n&&o.addEventListener("upgradeneeded",u=>{n(qn(o.result),u.oldVersion,u.newVersion,qn(o.transaction),u)}),e&&o.addEventListener("blocked",u=>e(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),r&&u.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const dg=["get","getKey","getAll","getAllKeys","count"],_g=["put","add","delete","clear"],ua=new Map;function Ac(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(ua.get(t))return ua.get(t);const e=t.replace(/FromIndex$/,""),n=t!==e,r=_g.includes(e);if(!(e in(n?IDBIndex:IDBObjectStore).prototype)||!(r||dg.includes(e)))return;const s=async function(o,...l){const u=this.transaction(o,r?"readwrite":"readonly");let c=u.store;return n&&(c=c.index(l.shift())),(await Promise.all([c[e](...l),r&&u.done]))[0]};return ua.set(t,s),s}ug(i=>({...i,get:(t,e,n)=>Ac(t,e)||i.get(t,e,n),has:(t,e)=>!!Ac(t,e)||i.has(t,e)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(pg(e)){const n=e.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(e=>e).join(" ")}}function pg(i){const t=i.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Ma="@firebase/app",bc="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er=new Pf("@firebase/app"),gg="@firebase/app-compat",yg="@firebase/analytics-compat",vg="@firebase/analytics",Tg="@firebase/app-check-compat",Eg="@firebase/app-check",wg="@firebase/auth",Ig="@firebase/auth-compat",Ag="@firebase/database",bg="@firebase/database-compat",Rg="@firebase/functions",Pg="@firebase/functions-compat",Sg="@firebase/installations",Cg="@firebase/installations-compat",Dg="@firebase/messaging",kg="@firebase/messaging-compat",Vg="@firebase/performance",xg="@firebase/performance-compat",Og="@firebase/remote-config",Mg="@firebase/remote-config-compat",Ng="@firebase/storage",Fg="@firebase/storage-compat",Lg="@firebase/firestore",$g="@firebase/vertexai-preview",Bg="@firebase/firestore-compat",Ug="firebase",jg="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na="[DEFAULT]",zg={[Ma]:"fire-core",[gg]:"fire-core-compat",[vg]:"fire-analytics",[yg]:"fire-analytics-compat",[Eg]:"fire-app-check",[Tg]:"fire-app-check-compat",[wg]:"fire-auth",[Ig]:"fire-auth-compat",[Ag]:"fire-rtdb",[bg]:"fire-rtdb-compat",[Rg]:"fire-fn",[Pg]:"fire-fn-compat",[Sg]:"fire-iid",[Cg]:"fire-iid-compat",[Dg]:"fire-fcm",[kg]:"fire-fcm-compat",[Vg]:"fire-perf",[xg]:"fire-perf-compat",[Og]:"fire-rc",[Mg]:"fire-rc-compat",[Ng]:"fire-gcs",[Fg]:"fire-gcs-compat",[Lg]:"fire-fst",[Bg]:"fire-fst-compat",[$g]:"fire-vertex","fire-js":"fire-js",[Ug]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=new Map,qg=new Map,Fa=new Map;function Rc(i,t){try{i.container.addComponent(t)}catch(e){Er.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,e)}}function ro(i){const t=i.name;if(Fa.has(t))return Er.debug(`There were multiple attempts to register component ${t}.`),!1;Fa.set(t,i);for(const e of no.values())Rc(e,i);for(const e of qg.values())Rc(e,i);return!0}function Gg(i,t){const e=i.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),i.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gn=new Rf("app","Firebase",Hg);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Ki("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Gn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg=jg;function Df(i,t={}){let e=i;typeof t!="object"&&(t={name:t});const n=Object.assign({name:Na,automaticDataCollectionEnabled:!1},t),r=n.name;if(typeof r!="string"||!r)throw Gn.create("bad-app-name",{appName:String(r)});if(e||(e=bf()),!e)throw Gn.create("no-options");const s=no.get(r);if(s){if(Va(e,s.options)&&Va(n,s.config))return s;throw Gn.create("duplicate-app",{appName:r})}const o=new Zp(r);for(const u of Fa.values())o.addComponent(u);const l=new Kg(e,n,o);return no.set(r,l),l}function Qg(i=Na){const t=no.get(i);if(!t&&i===Na&&bf())return Df();if(!t)throw Gn.create("no-app",{appName:i});return t}function qr(i,t,e){var n;let r=(n=zg[i])!==null&&n!==void 0?n:i;e&&(r+=`-${e}`);const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const l=[`Unable to register library "${r}" with version "${t}":`];s&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Er.warn(l.join(" "));return}ro(new Ki(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg="firebase-heartbeat-database",Yg=1,Wi="firebase-heartbeat-store";let ca=null;function kf(){return ca||(ca=fg(Xg,Yg,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(Wi)}catch(e){console.warn(e)}}}}).catch(i=>{throw Gn.create("idb-open",{originalErrorMessage:i.message})})),ca}async function Jg(i){try{const e=(await kf()).transaction(Wi),n=await e.objectStore(Wi).get(Vf(i));return await e.done,n}catch(t){if(t instanceof si)Er.warn(t.message);else{const e=Gn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Er.warn(e.message)}}}async function Pc(i,t){try{const n=(await kf()).transaction(Wi,"readwrite");await n.objectStore(Wi).put(t,Vf(i)),await n.done}catch(e){if(e instanceof si)Er.warn(e.message);else{const n=Gn.create("idb-set",{originalErrorMessage:e==null?void 0:e.message});Er.warn(n.message)}}}function Vf(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg=1024,ty=30*24*60*60*1e3;class ey{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new ry(e),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,e;const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Sc();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=ty}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Sc(),{heartbeatsToSend:n,unsentEntries:r}=ny(this._heartbeatsCache.heartbeats),s=eo(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Sc(){return new Date().toISOString().substring(0,10)}function ny(i,t=Zg){const e=[];let n=i.slice();for(const r of i){const s=e.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Cc(e)>t){s.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),Cc(e)>t){e.pop();break}n=n.slice(1)}return{heartbeatsToSend:e,unsentEntries:n}}class ry{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Gp()?Hp().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const e=await Jg(this.app);return e!=null&&e.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return Pc(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var e;if(await this._canUseIndexedDBPromise){const r=await this.read();return Pc(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function Cc(i){return eo(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(i){ro(new Ki("platform-logger",t=>new mg(t),"PRIVATE")),ro(new Ki("heartbeat",t=>new ey(t),"PRIVATE")),qr(Ma,bc,i),qr(Ma,bc,"esm2017"),qr("fire-js","")}iy("");var sy="firebase",oy="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qr(sy,oy,"app");var Dc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gr,xf;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(w,y){function T(){}T.prototype=y.prototype,w.D=y.prototype,w.prototype=new T,w.prototype.constructor=w,w.C=function(R,P,k){for(var A=Array(arguments.length-2),it=2;it<arguments.length;it++)A[it-2]=arguments[it];return y.prototype[P].apply(R,A)}}function e(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,e),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(w,y,T){T||(T=0);var R=Array(16);if(typeof y=="string")for(var P=0;16>P;++P)R[P]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(P=0;16>P;++P)R[P]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=w.g[0],T=w.g[1],P=w.g[2];var k=w.g[3],A=y+(k^T&(P^k))+R[0]+3614090360&4294967295;y=T+(A<<7&4294967295|A>>>25),A=k+(P^y&(T^P))+R[1]+3905402710&4294967295,k=y+(A<<12&4294967295|A>>>20),A=P+(T^k&(y^T))+R[2]+606105819&4294967295,P=k+(A<<17&4294967295|A>>>15),A=T+(y^P&(k^y))+R[3]+3250441966&4294967295,T=P+(A<<22&4294967295|A>>>10),A=y+(k^T&(P^k))+R[4]+4118548399&4294967295,y=T+(A<<7&4294967295|A>>>25),A=k+(P^y&(T^P))+R[5]+1200080426&4294967295,k=y+(A<<12&4294967295|A>>>20),A=P+(T^k&(y^T))+R[6]+2821735955&4294967295,P=k+(A<<17&4294967295|A>>>15),A=T+(y^P&(k^y))+R[7]+4249261313&4294967295,T=P+(A<<22&4294967295|A>>>10),A=y+(k^T&(P^k))+R[8]+1770035416&4294967295,y=T+(A<<7&4294967295|A>>>25),A=k+(P^y&(T^P))+R[9]+2336552879&4294967295,k=y+(A<<12&4294967295|A>>>20),A=P+(T^k&(y^T))+R[10]+4294925233&4294967295,P=k+(A<<17&4294967295|A>>>15),A=T+(y^P&(k^y))+R[11]+2304563134&4294967295,T=P+(A<<22&4294967295|A>>>10),A=y+(k^T&(P^k))+R[12]+1804603682&4294967295,y=T+(A<<7&4294967295|A>>>25),A=k+(P^y&(T^P))+R[13]+4254626195&4294967295,k=y+(A<<12&4294967295|A>>>20),A=P+(T^k&(y^T))+R[14]+2792965006&4294967295,P=k+(A<<17&4294967295|A>>>15),A=T+(y^P&(k^y))+R[15]+1236535329&4294967295,T=P+(A<<22&4294967295|A>>>10),A=y+(P^k&(T^P))+R[1]+4129170786&4294967295,y=T+(A<<5&4294967295|A>>>27),A=k+(T^P&(y^T))+R[6]+3225465664&4294967295,k=y+(A<<9&4294967295|A>>>23),A=P+(y^T&(k^y))+R[11]+643717713&4294967295,P=k+(A<<14&4294967295|A>>>18),A=T+(k^y&(P^k))+R[0]+3921069994&4294967295,T=P+(A<<20&4294967295|A>>>12),A=y+(P^k&(T^P))+R[5]+3593408605&4294967295,y=T+(A<<5&4294967295|A>>>27),A=k+(T^P&(y^T))+R[10]+38016083&4294967295,k=y+(A<<9&4294967295|A>>>23),A=P+(y^T&(k^y))+R[15]+3634488961&4294967295,P=k+(A<<14&4294967295|A>>>18),A=T+(k^y&(P^k))+R[4]+3889429448&4294967295,T=P+(A<<20&4294967295|A>>>12),A=y+(P^k&(T^P))+R[9]+568446438&4294967295,y=T+(A<<5&4294967295|A>>>27),A=k+(T^P&(y^T))+R[14]+3275163606&4294967295,k=y+(A<<9&4294967295|A>>>23),A=P+(y^T&(k^y))+R[3]+4107603335&4294967295,P=k+(A<<14&4294967295|A>>>18),A=T+(k^y&(P^k))+R[8]+1163531501&4294967295,T=P+(A<<20&4294967295|A>>>12),A=y+(P^k&(T^P))+R[13]+2850285829&4294967295,y=T+(A<<5&4294967295|A>>>27),A=k+(T^P&(y^T))+R[2]+4243563512&4294967295,k=y+(A<<9&4294967295|A>>>23),A=P+(y^T&(k^y))+R[7]+1735328473&4294967295,P=k+(A<<14&4294967295|A>>>18),A=T+(k^y&(P^k))+R[12]+2368359562&4294967295,T=P+(A<<20&4294967295|A>>>12),A=y+(T^P^k)+R[5]+4294588738&4294967295,y=T+(A<<4&4294967295|A>>>28),A=k+(y^T^P)+R[8]+2272392833&4294967295,k=y+(A<<11&4294967295|A>>>21),A=P+(k^y^T)+R[11]+1839030562&4294967295,P=k+(A<<16&4294967295|A>>>16),A=T+(P^k^y)+R[14]+4259657740&4294967295,T=P+(A<<23&4294967295|A>>>9),A=y+(T^P^k)+R[1]+2763975236&4294967295,y=T+(A<<4&4294967295|A>>>28),A=k+(y^T^P)+R[4]+1272893353&4294967295,k=y+(A<<11&4294967295|A>>>21),A=P+(k^y^T)+R[7]+4139469664&4294967295,P=k+(A<<16&4294967295|A>>>16),A=T+(P^k^y)+R[10]+3200236656&4294967295,T=P+(A<<23&4294967295|A>>>9),A=y+(T^P^k)+R[13]+681279174&4294967295,y=T+(A<<4&4294967295|A>>>28),A=k+(y^T^P)+R[0]+3936430074&4294967295,k=y+(A<<11&4294967295|A>>>21),A=P+(k^y^T)+R[3]+3572445317&4294967295,P=k+(A<<16&4294967295|A>>>16),A=T+(P^k^y)+R[6]+76029189&4294967295,T=P+(A<<23&4294967295|A>>>9),A=y+(T^P^k)+R[9]+3654602809&4294967295,y=T+(A<<4&4294967295|A>>>28),A=k+(y^T^P)+R[12]+3873151461&4294967295,k=y+(A<<11&4294967295|A>>>21),A=P+(k^y^T)+R[15]+530742520&4294967295,P=k+(A<<16&4294967295|A>>>16),A=T+(P^k^y)+R[2]+3299628645&4294967295,T=P+(A<<23&4294967295|A>>>9),A=y+(P^(T|~k))+R[0]+4096336452&4294967295,y=T+(A<<6&4294967295|A>>>26),A=k+(T^(y|~P))+R[7]+1126891415&4294967295,k=y+(A<<10&4294967295|A>>>22),A=P+(y^(k|~T))+R[14]+2878612391&4294967295,P=k+(A<<15&4294967295|A>>>17),A=T+(k^(P|~y))+R[5]+4237533241&4294967295,T=P+(A<<21&4294967295|A>>>11),A=y+(P^(T|~k))+R[12]+1700485571&4294967295,y=T+(A<<6&4294967295|A>>>26),A=k+(T^(y|~P))+R[3]+2399980690&4294967295,k=y+(A<<10&4294967295|A>>>22),A=P+(y^(k|~T))+R[10]+4293915773&4294967295,P=k+(A<<15&4294967295|A>>>17),A=T+(k^(P|~y))+R[1]+2240044497&4294967295,T=P+(A<<21&4294967295|A>>>11),A=y+(P^(T|~k))+R[8]+1873313359&4294967295,y=T+(A<<6&4294967295|A>>>26),A=k+(T^(y|~P))+R[15]+4264355552&4294967295,k=y+(A<<10&4294967295|A>>>22),A=P+(y^(k|~T))+R[6]+2734768916&4294967295,P=k+(A<<15&4294967295|A>>>17),A=T+(k^(P|~y))+R[13]+1309151649&4294967295,T=P+(A<<21&4294967295|A>>>11),A=y+(P^(T|~k))+R[4]+4149444226&4294967295,y=T+(A<<6&4294967295|A>>>26),A=k+(T^(y|~P))+R[11]+3174756917&4294967295,k=y+(A<<10&4294967295|A>>>22),A=P+(y^(k|~T))+R[2]+718787259&4294967295,P=k+(A<<15&4294967295|A>>>17),A=T+(k^(P|~y))+R[9]+3951481745&4294967295,w.g[0]=w.g[0]+y&4294967295,w.g[1]=w.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,w.g[2]=w.g[2]+P&4294967295,w.g[3]=w.g[3]+k&4294967295}n.prototype.u=function(w,y){y===void 0&&(y=w.length);for(var T=y-this.blockSize,R=this.B,P=this.h,k=0;k<y;){if(P==0)for(;k<=T;)r(this,w,k),k+=this.blockSize;if(typeof w=="string"){for(;k<y;)if(R[P++]=w.charCodeAt(k++),P==this.blockSize){r(this,R),P=0;break}}else for(;k<y;)if(R[P++]=w[k++],P==this.blockSize){r(this,R),P=0;break}}this.h=P,this.o+=y},n.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var y=1;y<w.length-8;++y)w[y]=0;var T=8*this.o;for(y=w.length-8;y<w.length;++y)w[y]=T&255,T/=256;for(this.u(w),w=Array(16),y=T=0;4>y;++y)for(var R=0;32>R;R+=8)w[T++]=this.g[y]>>>R&255;return w};function s(w,y){var T=l;return Object.prototype.hasOwnProperty.call(T,w)?T[w]:T[w]=y(w)}function o(w,y){this.h=y;for(var T=[],R=!0,P=w.length-1;0<=P;P--){var k=w[P]|0;R&&k==y||(T[P]=k,R=!1)}this.g=T}var l={};function u(w){return-128<=w&&128>w?s(w,function(y){return new o([y|0],0>y?-1:0)}):new o([w|0],0>w?-1:0)}function c(w){if(isNaN(w)||!isFinite(w))return d;if(0>w)return E(c(-w));for(var y=[],T=1,R=0;w>=T;R++)y[R]=w/T|0,T*=4294967296;return new o(y,0)}function h(w,y){if(w.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(w.charAt(0)=="-")return E(h(w.substring(1),y));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(y,8)),R=d,P=0;P<w.length;P+=8){var k=Math.min(8,w.length-P),A=parseInt(w.substring(P,P+k),y);8>k?(k=c(Math.pow(y,k)),R=R.j(k).add(c(A))):(R=R.j(T),R=R.add(c(A)))}return R}var d=u(0),m=u(1),g=u(16777216);i=o.prototype,i.m=function(){if(p(this))return-E(this).m();for(var w=0,y=1,T=0;T<this.g.length;T++){var R=this.i(T);w+=(0<=R?R:4294967296+R)*y,y*=4294967296}return w},i.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(v(this))return"0";if(p(this))return"-"+E(this).toString(w);for(var y=c(Math.pow(w,6)),T=this,R="";;){var P=D(T,y).g;T=b(T,P.j(y));var k=((0<T.g.length?T.g[0]:T.h)>>>0).toString(w);if(T=P,v(T))return k+R;for(;6>k.length;)k="0"+k;R=k+R}},i.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function v(w){if(w.h!=0)return!1;for(var y=0;y<w.g.length;y++)if(w.g[y]!=0)return!1;return!0}function p(w){return w.h==-1}i.l=function(w){return w=b(this,w),p(w)?-1:v(w)?0:1};function E(w){for(var y=w.g.length,T=[],R=0;R<y;R++)T[R]=~w.g[R];return new o(T,~w.h).add(m)}i.abs=function(){return p(this)?E(this):this},i.add=function(w){for(var y=Math.max(this.g.length,w.g.length),T=[],R=0,P=0;P<=y;P++){var k=R+(this.i(P)&65535)+(w.i(P)&65535),A=(k>>>16)+(this.i(P)>>>16)+(w.i(P)>>>16);R=A>>>16,k&=65535,A&=65535,T[P]=A<<16|k}return new o(T,T[T.length-1]&-2147483648?-1:0)};function b(w,y){return w.add(E(y))}i.j=function(w){if(v(this)||v(w))return d;if(p(this))return p(w)?E(this).j(E(w)):E(E(this).j(w));if(p(w))return E(this.j(E(w)));if(0>this.l(g)&&0>w.l(g))return c(this.m()*w.m());for(var y=this.g.length+w.g.length,T=[],R=0;R<2*y;R++)T[R]=0;for(R=0;R<this.g.length;R++)for(var P=0;P<w.g.length;P++){var k=this.i(R)>>>16,A=this.i(R)&65535,it=w.i(P)>>>16,ct=w.i(P)&65535;T[2*R+2*P]+=A*ct,S(T,2*R+2*P),T[2*R+2*P+1]+=k*ct,S(T,2*R+2*P+1),T[2*R+2*P+1]+=A*it,S(T,2*R+2*P+1),T[2*R+2*P+2]+=k*it,S(T,2*R+2*P+2)}for(R=0;R<y;R++)T[R]=T[2*R+1]<<16|T[2*R];for(R=y;R<2*y;R++)T[R]=0;return new o(T,0)};function S(w,y){for(;(w[y]&65535)!=w[y];)w[y+1]+=w[y]>>>16,w[y]&=65535,y++}function C(w,y){this.g=w,this.h=y}function D(w,y){if(v(y))throw Error("division by zero");if(v(w))return new C(d,d);if(p(w))return y=D(E(w),y),new C(E(y.g),E(y.h));if(p(y))return y=D(w,E(y)),new C(E(y.g),y.h);if(30<w.g.length){if(p(w)||p(y))throw Error("slowDivide_ only works with positive integers.");for(var T=m,R=y;0>=R.l(w);)T=V(T),R=V(R);var P=O(T,1),k=O(R,1);for(R=O(R,2),T=O(T,2);!v(R);){var A=k.add(R);0>=A.l(w)&&(P=P.add(T),k=A),R=O(R,1),T=O(T,1)}return y=b(w,P.j(y)),new C(P,y)}for(P=d;0<=w.l(y);){for(T=Math.max(1,Math.floor(w.m()/y.m())),R=Math.ceil(Math.log(T)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),k=c(T),A=k.j(y);p(A)||0<A.l(w);)T-=R,k=c(T),A=k.j(y);v(k)&&(k=m),P=P.add(k),w=b(w,A)}return new C(P,w)}i.A=function(w){return D(this,w).h},i.and=function(w){for(var y=Math.max(this.g.length,w.g.length),T=[],R=0;R<y;R++)T[R]=this.i(R)&w.i(R);return new o(T,this.h&w.h)},i.or=function(w){for(var y=Math.max(this.g.length,w.g.length),T=[],R=0;R<y;R++)T[R]=this.i(R)|w.i(R);return new o(T,this.h|w.h)},i.xor=function(w){for(var y=Math.max(this.g.length,w.g.length),T=[],R=0;R<y;R++)T[R]=this.i(R)^w.i(R);return new o(T,this.h^w.h)};function V(w){for(var y=w.g.length+1,T=[],R=0;R<y;R++)T[R]=w.i(R)<<1|w.i(R-1)>>>31;return new o(T,w.h)}function O(w,y){var T=y>>5;y%=32;for(var R=w.g.length-T,P=[],k=0;k<R;k++)P[k]=0<y?w.i(k+T)>>>y|w.i(k+T+1)<<32-y:w.i(k+T);return new o(P,w.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,xf=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,gr=o}).apply(typeof Dc<"u"?Dc:typeof self<"u"?self:typeof window<"u"?window:{});var Vs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Of,Mf,Pi,Nf,$s,La,Ff,Lf,$f;(function(){var i,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,f,_){return a==Array.prototype||a==Object.prototype||(a[f]=_.value),a};function e(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vs=="object"&&Vs];for(var f=0;f<a.length;++f){var _=a[f];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var n=e(this);function r(a,f){if(f)t:{var _=n;a=a.split(".");for(var I=0;I<a.length-1;I++){var x=a[I];if(!(x in _))break t;_=_[x]}a=a[a.length-1],I=_[a],f=f(I),f!=I&&f!=null&&t(_,a,{configurable:!0,writable:!0,value:f})}}function s(a,f){a instanceof String&&(a+="");var _=0,I=!1,x={next:function(){if(!I&&_<a.length){var N=_++;return{value:f(N,a[N]),done:!1}}return I=!0,{done:!0,value:void 0}}};return x[Symbol.iterator]=function(){return x},x}r("Array.prototype.values",function(a){return a||function(){return s(this,function(f,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var f=typeof a;return f=f!="object"?f:a?Array.isArray(a)?"array":f:"null",f=="array"||f=="object"&&typeof a.length=="number"}function c(a){var f=typeof a;return f=="object"&&a!=null||f=="function"}function h(a,f,_){return a.call.apply(a.bind,arguments)}function d(a,f,_){if(!a)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var x=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(x,I),a.apply(f,x)}}return function(){return a.apply(f,arguments)}}function m(a,f,_){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,m.apply(null,arguments)}function g(a,f){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),a.apply(this,I)}}function v(a,f){function _(){}_.prototype=f.prototype,a.aa=f.prototype,a.prototype=new _,a.prototype.constructor=a,a.Qb=function(I,x,N){for(var j=Array(arguments.length-2),St=2;St<arguments.length;St++)j[St-2]=arguments[St];return f.prototype[x].apply(I,j)}}function p(a){const f=a.length;if(0<f){const _=Array(f);for(let I=0;I<f;I++)_[I]=a[I];return _}return[]}function E(a,f){for(let _=1;_<arguments.length;_++){const I=arguments[_];if(u(I)){const x=a.length||0,N=I.length||0;a.length=x+N;for(let j=0;j<N;j++)a[x+j]=I[j]}else a.push(I)}}class b{constructor(f,_){this.i=f,this.j=_,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function S(a){return/^[\s\xa0]*$/.test(a)}function C(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var V=C().indexOf("Gecko")!=-1&&!(C().toLowerCase().indexOf("webkit")!=-1&&C().indexOf("Edge")==-1)&&!(C().indexOf("Trident")!=-1||C().indexOf("MSIE")!=-1)&&C().indexOf("Edge")==-1;function O(a,f,_){for(const I in a)f.call(_,a[I],I,a)}function w(a,f){for(const _ in a)f.call(void 0,a[_],_,a)}function y(a){const f={};for(const _ in a)f[_]=a[_];return f}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(a,f){let _,I;for(let x=1;x<arguments.length;x++){I=arguments[x];for(_ in I)a[_]=I[_];for(let N=0;N<T.length;N++)_=T[N],Object.prototype.hasOwnProperty.call(I,_)&&(a[_]=I[_])}}function P(a){var f=1;a=a.split(":");const _=[];for(;0<f&&a.length;)_.push(a.shift()),f--;return a.length&&_.push(a.join(":")),_}function k(a){l.setTimeout(()=>{throw a},0)}function A(){var a=Ht;let f=null;return a.g&&(f=a.g,a.g=a.g.next,a.g||(a.h=null),f.next=null),f}class it{constructor(){this.h=this.g=null}add(f,_){const I=ct.get();I.set(f,_),this.h?this.h.next=I:this.g=I,this.h=I}}var ct=new b(()=>new at,a=>a.reset());class at{constructor(){this.next=this.g=this.h=null}set(f,_){this.h=f,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ut,At=!1,Ht=new it,xt=()=>{const a=l.Promise.resolve(void 0);ut=()=>{a.then(q)}};var q=()=>{for(var a;a=A();){try{a.h.call(a.g)}catch(_){k(_)}var f=ct;f.j(a),100>f.h&&(f.h++,a.next=f.g,f.g=a)}At=!1};function bt(){this.s=this.s,this.C=this.C}bt.prototype.s=!1,bt.prototype.ma=function(){this.s||(this.s=!0,this.N())},bt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ht(a,f){this.type=a,this.g=this.target=f,this.defaultPrevented=!1}ht.prototype.h=function(){this.defaultPrevented=!0};var Ft=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const _=()=>{};l.addEventListener("test",_,f),l.removeEventListener("test",_,f)}catch{}return a}();function Ot(a,f){if(ht.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var _=this.type=a.type,I=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=f,f=a.relatedTarget){if(V){t:{try{D(f.nodeName);var x=!0;break t}catch{}x=!1}x||(f=null)}}else _=="mouseover"?f=a.fromElement:_=="mouseout"&&(f=a.toElement);this.relatedTarget=f,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Et[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Ot.aa.h.call(this)}}v(Ot,ht);var Et={2:"touch",3:"pen",4:"mouse"};Ot.prototype.h=function(){Ot.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var et="closure_listenable_"+(1e6*Math.random()|0),Rt=0;function fe(a,f,_,I,x){this.listener=a,this.proxy=null,this.src=f,this.type=_,this.capture=!!I,this.ha=x,this.key=++Rt,this.da=this.fa=!1}function zt(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Pt(a){this.src=a,this.g={},this.h=0}Pt.prototype.add=function(a,f,_,I,x){var N=a.toString();a=this.g[N],a||(a=this.g[N]=[],this.h++);var j=ne(a,f,I,x);return-1<j?(f=a[j],_||(f.fa=!1)):(f=new fe(f,this.src,N,!!I,x),f.fa=_,a.push(f)),f};function Ce(a,f){var _=f.type;if(_ in a.g){var I=a.g[_],x=Array.prototype.indexOf.call(I,f,void 0),N;(N=0<=x)&&Array.prototype.splice.call(I,x,1),N&&(zt(f),a.g[_].length==0&&(delete a.g[_],a.h--))}}function ne(a,f,_,I){for(var x=0;x<a.length;++x){var N=a[x];if(!N.da&&N.listener==f&&N.capture==!!_&&N.ha==I)return x}return-1}var de="closure_lm_"+(1e6*Math.random()|0),Ye={};function be(a,f,_,I,x){if(Array.isArray(f)){for(var N=0;N<f.length;N++)be(a,f[N],_,I,x);return null}return _=_e(_),a&&a[et]?a.K(f,_,c(I)?!!I.capture:!!I,x):Kt(a,f,_,!1,I,x)}function Kt(a,f,_,I,x,N){if(!f)throw Error("Invalid event type");var j=c(x)?!!x.capture:!!x,St=an(a);if(St||(a[de]=St=new Pt(a)),_=St.add(f,_,I,j,N),_.proxy)return _;if(I=Je(),_.proxy=I,I.src=a,I.listener=_,a.addEventListener)Ft||(x=j),x===void 0&&(x=!1),a.addEventListener(f.toString(),I,x);else if(a.attachEvent)a.attachEvent(wt(f.toString()),I);else if(a.addListener&&a.removeListener)a.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Je(){function a(_){return f.call(a.src,a.listener,_)}const f=Ze;return a}function Qt(a,f,_,I,x){if(Array.isArray(f))for(var N=0;N<f.length;N++)Qt(a,f[N],_,I,x);else I=c(I)?!!I.capture:!!I,_=_e(_),a&&a[et]?(a=a.i,f=String(f).toString(),f in a.g&&(N=a.g[f],_=ne(N,_,I,x),-1<_&&(zt(N[_]),Array.prototype.splice.call(N,_,1),N.length==0&&(delete a.g[f],a.h--)))):a&&(a=an(a))&&(f=a.g[f.toString()],a=-1,f&&(a=ne(f,_,I,x)),(_=-1<a?f[a]:null)&&nt(_))}function nt(a){if(typeof a!="number"&&a&&!a.da){var f=a.src;if(f&&f[et])Ce(f.i,a);else{var _=a.type,I=a.proxy;f.removeEventListener?f.removeEventListener(_,I,a.capture):f.detachEvent?f.detachEvent(wt(_),I):f.addListener&&f.removeListener&&f.removeListener(I),(_=an(f))?(Ce(_,a),_.h==0&&(_.src=null,f[de]=null)):zt(a)}}}function wt(a){return a in Ye?Ye[a]:Ye[a]="on"+a}function Ze(a,f){if(a.da)a=!0;else{f=new Ot(f,this);var _=a.listener,I=a.ha||a.src;a.fa&&nt(a),a=_.call(I,f)}return a}function an(a){return a=a[de],a instanceof Pt?a:null}var Lt="__closure_events_fn_"+(1e9*Math.random()>>>0);function _e(a){return typeof a=="function"?a:(a[Lt]||(a[Lt]=function(f){return a.handleEvent(f)}),a[Lt])}function Zt(){bt.call(this),this.i=new Pt(this),this.M=this,this.F=null}v(Zt,bt),Zt.prototype[et]=!0,Zt.prototype.removeEventListener=function(a,f,_,I){Qt(this,a,f,_,I)};function re(a,f){var _,I=a.F;if(I)for(_=[];I;I=I.F)_.push(I);if(a=a.M,I=f.type||f,typeof f=="string")f=new ht(f,a);else if(f instanceof ht)f.target=f.target||a;else{var x=f;f=new ht(I,a),R(f,x)}if(x=!0,_)for(var N=_.length-1;0<=N;N--){var j=f.g=_[N];x=er(j,I,!0,f)&&x}if(j=f.g=a,x=er(j,I,!0,f)&&x,x=er(j,I,!1,f)&&x,_)for(N=0;N<_.length;N++)j=f.g=_[N],x=er(j,I,!1,f)&&x}Zt.prototype.N=function(){if(Zt.aa.N.call(this),this.i){var a=this.i,f;for(f in a.g){for(var _=a.g[f],I=0;I<_.length;I++)zt(_[I]);delete a.g[f],a.h--}}this.F=null},Zt.prototype.K=function(a,f,_,I){return this.i.add(String(a),f,!1,_,I)},Zt.prototype.L=function(a,f,_,I){return this.i.add(String(a),f,!0,_,I)};function er(a,f,_,I){if(f=a.i.g[String(f)],!f)return!0;f=f.concat();for(var x=!0,N=0;N<f.length;++N){var j=f[N];if(j&&!j.da&&j.capture==_){var St=j.listener,ae=j.ha||j.src;j.fa&&Ce(a.i,j),x=St.call(ae,I)!==!1&&x}}return x&&!I.defaultPrevented}function $e(a,f,_){if(typeof a=="function")_&&(a=m(a,_));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:l.setTimeout(a,f||0)}function Cr(a){a.g=$e(()=>{a.g=null,a.i&&(a.i=!1,Cr(a))},a.l);const f=a.h;a.h=null,a.m.apply(null,f)}class ui extends bt{constructor(f,_){super(),this.m=f,this.l=_,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Cr(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hn(a){bt.call(this),this.h=a,this.g={}}v(hn,bt);var Dr=[];function nu(a){O(a.g,function(f,_){this.g.hasOwnProperty(_)&&nt(f)},a),a.g={}}hn.prototype.N=function(){hn.aa.N.call(this),nu(this)},hn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oo=l.JSON.stringify,i_=l.JSON.parse,s_=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Mo(){}Mo.prototype.h=null;function ru(a){return a.h||(a.h=a.i())}function iu(){}var ci={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function No(){ht.call(this,"d")}v(No,ht);function Fo(){ht.call(this,"c")}v(Fo,ht);var nr={},su=null;function gs(){return su=su||new Zt}nr.La="serverreachability";function ou(a){ht.call(this,nr.La,a)}v(ou,ht);function hi(a){const f=gs();re(f,new ou(f))}nr.STAT_EVENT="statevent";function au(a,f){ht.call(this,nr.STAT_EVENT,a),this.stat=f}v(au,ht);function Re(a){const f=gs();re(f,new au(f,a))}nr.Ma="timingevent";function lu(a,f){ht.call(this,nr.Ma,a),this.size=f}v(lu,ht);function fi(a,f){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},f)}function di(){this.g=!0}di.prototype.xa=function(){this.g=!1};function o_(a,f,_,I,x,N){a.info(function(){if(a.g)if(N)for(var j="",St=N.split("&"),ae=0;ae<St.length;ae++){var Tt=St[ae].split("=");if(1<Tt.length){var me=Tt[0];Tt=Tt[1];var pe=me.split("_");j=2<=pe.length&&pe[1]=="type"?j+(me+"="+Tt+"&"):j+(me+"=redacted&")}}else j=null;else j=N;return"XMLHTTP REQ ("+I+") [attempt "+x+"]: "+f+`
`+_+`
`+j})}function a_(a,f,_,I,x,N,j){a.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+x+"]: "+f+`
`+_+`
`+N+" "+j})}function kr(a,f,_,I){a.info(function(){return"XMLHTTP TEXT ("+f+"): "+u_(a,_)+(I?" "+I:"")})}function l_(a,f){a.info(function(){return"TIMEOUT: "+f})}di.prototype.info=function(){};function u_(a,f){if(!a.g)return f;if(!f)return null;try{var _=JSON.parse(f);if(_){for(a=0;a<_.length;a++)if(Array.isArray(_[a])){var I=_[a];if(!(2>I.length)){var x=I[1];if(Array.isArray(x)&&!(1>x.length)){var N=x[0];if(N!="noop"&&N!="stop"&&N!="close")for(var j=1;j<x.length;j++)x[j]=""}}}}return Oo(_)}catch{return f}}var ys={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},uu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Lo;function vs(){}v(vs,Mo),vs.prototype.g=function(){return new XMLHttpRequest},vs.prototype.i=function(){return{}},Lo=new vs;function Mn(a,f,_,I){this.j=a,this.i=f,this.l=_,this.R=I||1,this.U=new hn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cu}function cu(){this.i=null,this.g="",this.h=!1}var hu={},$o={};function Bo(a,f,_){a.L=1,a.v=Is(wn(f)),a.m=_,a.P=!0,fu(a,null)}function fu(a,f){a.F=Date.now(),Ts(a),a.A=wn(a.v);var _=a.A,I=a.R;Array.isArray(I)||(I=[String(I)]),Ru(_.i,"t",I),a.C=0,_=a.j.J,a.h=new cu,a.g=qu(a.j,_?f:null,!a.m),0<a.O&&(a.M=new ui(m(a.Y,a,a.g),a.O)),f=a.U,_=a.g,I=a.ca;var x="readystatechange";Array.isArray(x)||(x&&(Dr[0]=x.toString()),x=Dr);for(var N=0;N<x.length;N++){var j=be(_,x[N],I||f.handleEvent,!1,f.h||f);if(!j)break;f.g[j.key]=j}f=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,f)):(a.u="GET",a.g.ea(a.A,a.u,null,f)),hi(),o_(a.i,a.u,a.A,a.l,a.R,a.m)}Mn.prototype.ca=function(a){a=a.target;const f=this.M;f&&In(a)==3?f.j():this.Y(a)},Mn.prototype.Y=function(a){try{if(a==this.g)t:{const pe=In(this.g);var f=this.g.Ba();const Or=this.g.Z();if(!(3>pe)&&(pe!=3||this.g&&(this.h.h||this.g.oa()||xu(this.g)))){this.J||pe!=4||f==7||(f==8||0>=Or?hi(3):hi(2)),Uo(this);var _=this.g.Z();this.X=_;e:if(du(this)){var I=xu(this.g);a="";var x=I.length,N=In(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){rr(this),_i(this);var j="";break e}this.h.i=new l.TextDecoder}for(f=0;f<x;f++)this.h.h=!0,a+=this.h.i.decode(I[f],{stream:!(N&&f==x-1)});I.length=0,this.h.g+=a,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=_==200,a_(this.i,this.u,this.A,this.l,this.R,pe,_),this.o){if(this.T&&!this.K){e:{if(this.g){var St,ae=this.g;if((St=ae.g?ae.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(St)){var Tt=St;break e}}Tt=null}if(_=Tt)kr(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,jo(this,_);else{this.o=!1,this.s=3,Re(12),rr(this),_i(this);break t}}if(this.P){_=!0;let ln;for(;!this.J&&this.C<j.length;)if(ln=c_(this,j),ln==$o){pe==4&&(this.s=4,Re(14),_=!1),kr(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==hu){this.s=4,Re(15),kr(this.i,this.l,j,"[Invalid Chunk]"),_=!1;break}else kr(this.i,this.l,ln,null),jo(this,ln);if(du(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pe!=4||j.length!=0||this.h.h||(this.s=1,Re(16),_=!1),this.o=this.o&&_,!_)kr(this.i,this.l,j,"[Invalid Chunked Response]"),rr(this),_i(this);else if(0<j.length&&!this.W){this.W=!0;var me=this.j;me.g==this&&me.ba&&!me.M&&(me.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),Wo(me),me.M=!0,Re(11))}}else kr(this.i,this.l,j,null),jo(this,j);pe==4&&rr(this),this.o&&!this.J&&(pe==4?Bu(this.j,this):(this.o=!1,Ts(this)))}else P_(this.g),_==400&&0<j.indexOf("Unknown SID")?(this.s=3,Re(12)):(this.s=0,Re(13)),rr(this),_i(this)}}}catch{}finally{}};function du(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function c_(a,f){var _=a.C,I=f.indexOf(`
`,_);return I==-1?$o:(_=Number(f.substring(_,I)),isNaN(_)?hu:(I+=1,I+_>f.length?$o:(f=f.slice(I,I+_),a.C=I+_,f)))}Mn.prototype.cancel=function(){this.J=!0,rr(this)};function Ts(a){a.S=Date.now()+a.I,_u(a,a.I)}function _u(a,f){if(a.B!=null)throw Error("WatchDog timer not null");a.B=fi(m(a.ba,a),f)}function Uo(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Mn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(l_(this.i,this.A),this.L!=2&&(hi(),Re(17)),rr(this),this.s=2,_i(this)):_u(this,this.S-a)};function _i(a){a.j.G==0||a.J||Bu(a.j,a)}function rr(a){Uo(a);var f=a.M;f&&typeof f.ma=="function"&&f.ma(),a.M=null,nu(a.U),a.g&&(f=a.g,a.g=null,f.abort(),f.ma())}function jo(a,f){try{var _=a.j;if(_.G!=0&&(_.g==a||zo(_.h,a))){if(!a.K&&zo(_.h,a)&&_.G==3){try{var I=_.Da.g.parse(f)}catch{I=null}if(Array.isArray(I)&&I.length==3){var x=I;if(x[0]==0){t:if(!_.u){if(_.g)if(_.g.F+3e3<a.F)Ss(_),Rs(_);else break t;Ko(_),Re(18)}}else _.za=x[1],0<_.za-_.T&&37500>x[2]&&_.F&&_.v==0&&!_.C&&(_.C=fi(m(_.Za,_),6e3));if(1>=gu(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else sr(_,11)}else if((a.K||_.g==a)&&Ss(_),!S(f))for(x=_.Da.g.parse(f),f=0;f<x.length;f++){let Tt=x[f];if(_.T=Tt[0],Tt=Tt[1],_.G==2)if(Tt[0]=="c"){_.K=Tt[1],_.ia=Tt[2];const me=Tt[3];me!=null&&(_.la=me,_.j.info("VER="+_.la));const pe=Tt[4];pe!=null&&(_.Aa=pe,_.j.info("SVER="+_.Aa));const Or=Tt[5];Or!=null&&typeof Or=="number"&&0<Or&&(I=1.5*Or,_.L=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const ln=a.g;if(ln){const Ds=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ds){var N=I.h;N.g||Ds.indexOf("spdy")==-1&&Ds.indexOf("quic")==-1&&Ds.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(qo(N,N.h),N.h=null))}if(I.D){const Qo=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;Qo&&(I.ya=Qo,Vt(I.I,I.D,Qo))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-a.F,_.j.info("Handshake RTT: "+_.R+"ms")),I=_;var j=a;if(I.qa=zu(I,I.J?I.ia:null,I.W),j.K){yu(I.h,j);var St=j,ae=I.L;ae&&(St.I=ae),St.B&&(Uo(St),Ts(St)),I.g=j}else Lu(I);0<_.i.length&&Ps(_)}else Tt[0]!="stop"&&Tt[0]!="close"||sr(_,7);else _.G==3&&(Tt[0]=="stop"||Tt[0]=="close"?Tt[0]=="stop"?sr(_,7):Ho(_):Tt[0]!="noop"&&_.l&&_.l.ta(Tt),_.v=0)}}hi(4)}catch{}}var h_=class{constructor(a,f){this.g=a,this.map=f}};function mu(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pu(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function gu(a){return a.h?1:a.g?a.g.size:0}function zo(a,f){return a.h?a.h==f:a.g?a.g.has(f):!1}function qo(a,f){a.g?a.g.add(f):a.h=f}function yu(a,f){a.h&&a.h==f?a.h=null:a.g&&a.g.has(f)&&a.g.delete(f)}mu.prototype.cancel=function(){if(this.i=vu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function vu(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let f=a.i;for(const _ of a.g.values())f=f.concat(_.D);return f}return p(a.i)}function f_(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var f=[],_=a.length,I=0;I<_;I++)f.push(a[I]);return f}f=[],_=0;for(I in a)f[_++]=a[I];return f}function d_(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var f=[];a=a.length;for(var _=0;_<a;_++)f.push(_);return f}f=[],_=0;for(const I in a)f[_++]=I;return f}}}function Tu(a,f){if(a.forEach&&typeof a.forEach=="function")a.forEach(f,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,f,void 0);else for(var _=d_(a),I=f_(a),x=I.length,N=0;N<x;N++)f.call(void 0,I[N],_&&_[N],a)}var Eu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function __(a,f){if(a){a=a.split("&");for(var _=0;_<a.length;_++){var I=a[_].indexOf("="),x=null;if(0<=I){var N=a[_].substring(0,I);x=a[_].substring(I+1)}else N=a[_];f(N,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function ir(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof ir){this.h=a.h,Es(this,a.j),this.o=a.o,this.g=a.g,ws(this,a.s),this.l=a.l;var f=a.i,_=new gi;_.i=f.i,f.g&&(_.g=new Map(f.g),_.h=f.h),wu(this,_),this.m=a.m}else a&&(f=String(a).match(Eu))?(this.h=!1,Es(this,f[1]||"",!0),this.o=mi(f[2]||""),this.g=mi(f[3]||"",!0),ws(this,f[4]),this.l=mi(f[5]||"",!0),wu(this,f[6]||"",!0),this.m=mi(f[7]||"")):(this.h=!1,this.i=new gi(null,this.h))}ir.prototype.toString=function(){var a=[],f=this.j;f&&a.push(pi(f,Iu,!0),":");var _=this.g;return(_||f=="file")&&(a.push("//"),(f=this.o)&&a.push(pi(f,Iu,!0),"@"),a.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&a.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&a.push("/"),a.push(pi(_,_.charAt(0)=="/"?g_:p_,!0))),(_=this.i.toString())&&a.push("?",_),(_=this.m)&&a.push("#",pi(_,v_)),a.join("")};function wn(a){return new ir(a)}function Es(a,f,_){a.j=_?mi(f,!0):f,a.j&&(a.j=a.j.replace(/:$/,""))}function ws(a,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);a.s=f}else a.s=null}function wu(a,f,_){f instanceof gi?(a.i=f,T_(a.i,a.h)):(_||(f=pi(f,y_)),a.i=new gi(f,a.h))}function Vt(a,f,_){a.i.set(f,_)}function Is(a){return Vt(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function mi(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function pi(a,f,_){return typeof a=="string"?(a=encodeURI(a).replace(f,m_),_&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function m_(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Iu=/[#\/\?@]/g,p_=/[#\?:]/g,g_=/[#\?]/g,y_=/[#\?@]/g,v_=/#/g;function gi(a,f){this.h=this.g=null,this.i=a||null,this.j=!!f}function Nn(a){a.g||(a.g=new Map,a.h=0,a.i&&__(a.i,function(f,_){a.add(decodeURIComponent(f.replace(/\+/g," ")),_)}))}i=gi.prototype,i.add=function(a,f){Nn(this),this.i=null,a=Vr(this,a);var _=this.g.get(a);return _||this.g.set(a,_=[]),_.push(f),this.h+=1,this};function Au(a,f){Nn(a),f=Vr(a,f),a.g.has(f)&&(a.i=null,a.h-=a.g.get(f).length,a.g.delete(f))}function bu(a,f){return Nn(a),f=Vr(a,f),a.g.has(f)}i.forEach=function(a,f){Nn(this),this.g.forEach(function(_,I){_.forEach(function(x){a.call(f,x,I,this)},this)},this)},i.na=function(){Nn(this);const a=Array.from(this.g.values()),f=Array.from(this.g.keys()),_=[];for(let I=0;I<f.length;I++){const x=a[I];for(let N=0;N<x.length;N++)_.push(f[I])}return _},i.V=function(a){Nn(this);let f=[];if(typeof a=="string")bu(this,a)&&(f=f.concat(this.g.get(Vr(this,a))));else{a=Array.from(this.g.values());for(let _=0;_<a.length;_++)f=f.concat(a[_])}return f},i.set=function(a,f){return Nn(this),this.i=null,a=Vr(this,a),bu(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[f]),this.h+=1,this},i.get=function(a,f){return a?(a=this.V(a),0<a.length?String(a[0]):f):f};function Ru(a,f,_){Au(a,f),0<_.length&&(a.i=null,a.g.set(Vr(a,f),p(_)),a.h+=_.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],f=Array.from(this.g.keys());for(var _=0;_<f.length;_++){var I=f[_];const N=encodeURIComponent(String(I)),j=this.V(I);for(I=0;I<j.length;I++){var x=N;j[I]!==""&&(x+="="+encodeURIComponent(String(j[I]))),a.push(x)}}return this.i=a.join("&")};function Vr(a,f){return f=String(f),a.j&&(f=f.toLowerCase()),f}function T_(a,f){f&&!a.j&&(Nn(a),a.i=null,a.g.forEach(function(_,I){var x=I.toLowerCase();I!=x&&(Au(this,I),Ru(this,x,_))},a)),a.j=f}function E_(a,f){const _=new di;if(l.Image){const I=new Image;I.onload=g(Fn,_,"TestLoadImage: loaded",!0,f,I),I.onerror=g(Fn,_,"TestLoadImage: error",!1,f,I),I.onabort=g(Fn,_,"TestLoadImage: abort",!1,f,I),I.ontimeout=g(Fn,_,"TestLoadImage: timeout",!1,f,I),l.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=a}else f(!1)}function w_(a,f){const _=new di,I=new AbortController,x=setTimeout(()=>{I.abort(),Fn(_,"TestPingServer: timeout",!1,f)},1e4);fetch(a,{signal:I.signal}).then(N=>{clearTimeout(x),N.ok?Fn(_,"TestPingServer: ok",!0,f):Fn(_,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(x),Fn(_,"TestPingServer: error",!1,f)})}function Fn(a,f,_,I,x){try{x&&(x.onload=null,x.onerror=null,x.onabort=null,x.ontimeout=null),I(_)}catch{}}function I_(){this.g=new s_}function A_(a,f,_){const I=_||"";try{Tu(a,function(x,N){let j=x;c(x)&&(j=Oo(x)),f.push(I+N+"="+encodeURIComponent(j))})}catch(x){throw f.push(I+"type="+encodeURIComponent("_badmap")),x}}function yi(a){this.l=a.Ub||null,this.j=a.eb||!1}v(yi,Mo),yi.prototype.g=function(){return new As(this.l,this.j)},yi.prototype.i=function(a){return function(){return a}}({});function As(a,f){Zt.call(this),this.D=a,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(As,Zt),i=As.prototype,i.open=function(a,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=f,this.readyState=1,Ti(this)},i.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(f.body=a),(this.D||l).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vi(this)),this.readyState=0},i.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ti(this)),this.g&&(this.readyState=3,Ti(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pu(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Pu(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}i.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var f=a.value?a.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!a.done}))&&(this.response=this.responseText+=f)}a.done?vi(this):Ti(this),this.readyState==3&&Pu(this)}},i.Ra=function(a){this.g&&(this.response=this.responseText=a,vi(this))},i.Qa=function(a){this.g&&(this.response=a,vi(this))},i.ga=function(){this.g&&vi(this)};function vi(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ti(a)}i.setRequestHeader=function(a,f){this.u.append(a,f)},i.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],f=this.h.entries();for(var _=f.next();!_.done;)_=_.value,a.push(_[0]+": "+_[1]),_=f.next();return a.join(`\r
`)};function Ti(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(As.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Su(a){let f="";return O(a,function(_,I){f+=I,f+=":",f+=_,f+=`\r
`}),f}function Go(a,f,_){t:{for(I in _){var I=!1;break t}I=!0}I||(_=Su(_),typeof a=="string"?_!=null&&encodeURIComponent(String(_)):Vt(a,f,_))}function qt(a){Zt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(qt,Zt);var b_=/^https?$/i,R_=["POST","PUT"];i=qt.prototype,i.Ha=function(a){this.J=a},i.ea=function(a,f,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);f=f?f.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Lo.g(),this.v=this.o?ru(this.o):ru(Lo),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(a),!0),this.B=!1}catch(N){Cu(this,N);return}if(a=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var x in I)_.set(x,I[x]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const N of I.keys())_.set(N,I.get(N));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(N=>N.toLowerCase()=="content-type"),x=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(R_,f,void 0))||I||x||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[N,j]of _)this.g.setRequestHeader(N,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vu(this),this.u=!0,this.g.send(a),this.u=!1}catch(N){Cu(this,N)}};function Cu(a,f){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=f,a.m=5,Du(a),bs(a)}function Du(a){a.A||(a.A=!0,re(a,"complete"),re(a,"error"))}i.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,re(this,"complete"),re(this,"abort"),bs(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bs(this,!0)),qt.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?ku(this):this.bb())},i.bb=function(){ku(this)};function ku(a){if(a.h&&typeof o<"u"&&(!a.v[1]||In(a)!=4||a.Z()!=2)){if(a.u&&In(a)==4)$e(a.Ea,0,a);else if(re(a,"readystatechange"),In(a)==4){a.h=!1;try{const j=a.Z();t:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break t;default:f=!1}var _;if(!(_=f)){var I;if(I=j===0){var x=String(a.D).match(Eu)[1]||null;!x&&l.self&&l.self.location&&(x=l.self.location.protocol.slice(0,-1)),I=!b_.test(x?x.toLowerCase():"")}_=I}if(_)re(a,"complete"),re(a,"success");else{a.m=6;try{var N=2<In(a)?a.g.statusText:""}catch{N=""}a.l=N+" ["+a.Z()+"]",Du(a)}}finally{bs(a)}}}}function bs(a,f){if(a.g){Vu(a);const _=a.g,I=a.v[0]?()=>{}:null;a.g=null,a.v=null,f||re(a,"ready");try{_.onreadystatechange=I}catch{}}}function Vu(a){a.I&&(l.clearTimeout(a.I),a.I=null)}i.isActive=function(){return!!this.g};function In(a){return a.g?a.g.readyState:0}i.Z=function(){try{return 2<In(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(a){if(this.g){var f=this.g.responseText;return a&&f.indexOf(a)==0&&(f=f.substring(a.length)),i_(f)}};function xu(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function P_(a){const f={};a=(a.g&&2<=In(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<a.length;I++){if(S(a[I]))continue;var _=P(a[I]);const x=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const N=f[x]||[];f[x]=N,N.push(_)}w(f,function(I){return I.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ei(a,f,_){return _&&_.internalChannelParams&&_.internalChannelParams[a]||f}function Ou(a){this.Aa=0,this.i=[],this.j=new di,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ei("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ei("baseRetryDelayMs",5e3,a),this.cb=Ei("retryDelaySeedMs",1e4,a),this.Wa=Ei("forwardChannelMaxRetries",2,a),this.wa=Ei("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new mu(a&&a.concurrentRequestLimit),this.Da=new I_,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Ou.prototype,i.la=8,i.G=1,i.connect=function(a,f,_,I){Re(0),this.W=a,this.H=f||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.I=zu(this,null,this.W),Ps(this)};function Ho(a){if(Mu(a),a.G==3){var f=a.U++,_=wn(a.I);if(Vt(_,"SID",a.K),Vt(_,"RID",f),Vt(_,"TYPE","terminate"),wi(a,_),f=new Mn(a,a.j,f),f.L=2,f.v=Is(wn(_)),_=!1,l.navigator&&l.navigator.sendBeacon)try{_=l.navigator.sendBeacon(f.v.toString(),"")}catch{}!_&&l.Image&&(new Image().src=f.v,_=!0),_||(f.g=qu(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Ts(f)}ju(a)}function Rs(a){a.g&&(Wo(a),a.g.cancel(),a.g=null)}function Mu(a){Rs(a),a.u&&(l.clearTimeout(a.u),a.u=null),Ss(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Ps(a){if(!pu(a.h)&&!a.s){a.s=!0;var f=a.Ga;ut||xt(),At||(ut(),At=!0),Ht.add(f,a),a.B=0}}function S_(a,f){return gu(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=f.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=fi(m(a.Ga,a,f),Uu(a,a.B)),a.B++,!0)}i.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const x=new Mn(this,this.j,a);let N=this.o;if(this.S&&(N?(N=y(N),R(N,this.S)):N=this.S),this.m!==null||this.O||(x.H=N,N=null),this.P)t:{for(var f=0,_=0;_<this.i.length;_++){e:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break e}I=void 0}if(I===void 0)break;if(f+=I,4096<f){f=_;break t}if(f===4096||_===this.i.length-1){f=_+1;break t}}f=1e3}else f=1e3;f=Fu(this,x,f),_=wn(this.I),Vt(_,"RID",a),Vt(_,"CVER",22),this.D&&Vt(_,"X-HTTP-Session-Id",this.D),wi(this,_),N&&(this.O?f="headers="+encodeURIComponent(String(Su(N)))+"&"+f:this.m&&Go(_,this.m,N)),qo(this.h,x),this.Ua&&Vt(_,"TYPE","init"),this.P?(Vt(_,"$req",f),Vt(_,"SID","null"),x.T=!0,Bo(x,_,null)):Bo(x,_,f),this.G=2}}else this.G==3&&(a?Nu(this,a):this.i.length==0||pu(this.h)||Nu(this))};function Nu(a,f){var _;f?_=f.l:_=a.U++;const I=wn(a.I);Vt(I,"SID",a.K),Vt(I,"RID",_),Vt(I,"AID",a.T),wi(a,I),a.m&&a.o&&Go(I,a.m,a.o),_=new Mn(a,a.j,_,a.B+1),a.m===null&&(_.H=a.o),f&&(a.i=f.D.concat(a.i)),f=Fu(a,_,1e3),_.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),qo(a.h,_),Bo(_,I,f)}function wi(a,f){a.H&&O(a.H,function(_,I){Vt(f,I,_)}),a.l&&Tu({},function(_,I){Vt(f,I,_)})}function Fu(a,f,_){_=Math.min(a.i.length,_);var I=a.l?m(a.l.Na,a.l,a):null;t:{var x=a.i;let N=-1;for(;;){const j=["count="+_];N==-1?0<_?(N=x[0].g,j.push("ofs="+N)):N=0:j.push("ofs="+N);let St=!0;for(let ae=0;ae<_;ae++){let Tt=x[ae].g;const me=x[ae].map;if(Tt-=N,0>Tt)N=Math.max(0,x[ae].g-100),St=!1;else try{A_(me,j,"req"+Tt+"_")}catch{I&&I(me)}}if(St){I=j.join("&");break t}}}return a=a.i.splice(0,_),f.D=a,I}function Lu(a){if(!a.g&&!a.u){a.Y=1;var f=a.Fa;ut||xt(),At||(ut(),At=!0),Ht.add(f,a),a.v=0}}function Ko(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=fi(m(a.Fa,a),Uu(a,a.v)),a.v++,!0)}i.Fa=function(){if(this.u=null,$u(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=fi(m(this.ab,this),a)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Re(10),Rs(this),$u(this))};function Wo(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function $u(a){a.g=new Mn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var f=wn(a.qa);Vt(f,"RID","rpc"),Vt(f,"SID",a.K),Vt(f,"AID",a.T),Vt(f,"CI",a.F?"0":"1"),!a.F&&a.ja&&Vt(f,"TO",a.ja),Vt(f,"TYPE","xmlhttp"),wi(a,f),a.m&&a.o&&Go(f,a.m,a.o),a.L&&(a.g.I=a.L);var _=a.g;a=a.ia,_.L=1,_.v=Is(wn(f)),_.m=null,_.P=!0,fu(_,a)}i.Za=function(){this.C!=null&&(this.C=null,Rs(this),Ko(this),Re(19))};function Ss(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Bu(a,f){var _=null;if(a.g==f){Ss(a),Wo(a),a.g=null;var I=2}else if(zo(a.h,f))_=f.D,yu(a.h,f),I=1;else return;if(a.G!=0){if(f.o)if(I==1){_=f.m?f.m.length:0,f=Date.now()-f.F;var x=a.B;I=gs(),re(I,new lu(I,_)),Ps(a)}else Lu(a);else if(x=f.s,x==3||x==0&&0<f.X||!(I==1&&S_(a,f)||I==2&&Ko(a)))switch(_&&0<_.length&&(f=a.h,f.i=f.i.concat(_)),x){case 1:sr(a,5);break;case 4:sr(a,10);break;case 3:sr(a,6);break;default:sr(a,2)}}}function Uu(a,f){let _=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(_*=2),_*f}function sr(a,f){if(a.j.info("Error code "+f),f==2){var _=m(a.fb,a),I=a.Xa;const x=!I;I=new ir(I||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Es(I,"https"),Is(I),x?E_(I.toString(),_):w_(I.toString(),_)}else Re(2);a.G=0,a.l&&a.l.sa(f),ju(a),Mu(a)}i.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Re(2)):(this.j.info("Failed to ping google.com"),Re(1))};function ju(a){if(a.G=0,a.ka=[],a.l){const f=vu(a.h);(f.length!=0||a.i.length!=0)&&(E(a.ka,f),E(a.ka,a.i),a.h.i.length=0,p(a.i),a.i.length=0),a.l.ra()}}function zu(a,f,_){var I=_ instanceof ir?wn(_):new ir(_);if(I.g!="")f&&(I.g=f+"."+I.g),ws(I,I.s);else{var x=l.location;I=x.protocol,f=f?f+"."+x.hostname:x.hostname,x=+x.port;var N=new ir(null);I&&Es(N,I),f&&(N.g=f),x&&ws(N,x),_&&(N.l=_),I=N}return _=a.D,f=a.ya,_&&f&&Vt(I,_,f),Vt(I,"VER",a.la),wi(a,I),I}function qu(a,f,_){if(f&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=a.Ca&&!a.pa?new qt(new yi({eb:_})):new qt(a.pa),f.Ha(a.J),f}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gu(){}i=Gu.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Cs(){}Cs.prototype.g=function(a,f){return new Be(a,f)};function Be(a,f){Zt.call(this),this.g=new Ou(f),this.l=a,this.h=f&&f.messageUrlParams||null,a=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(a?a["X-WebChannel-Content-Type"]=f.messageContentType:a={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(a?a["X-WebChannel-Client-Profile"]=f.va:a={"X-WebChannel-Client-Profile":f.va}),this.g.S=a,(a=f&&f.Sb)&&!S(a)&&(this.g.m=a),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!S(f)&&(this.g.D=f,a=this.h,a!==null&&f in a&&(a=this.h,f in a&&delete a[f])),this.j=new xr(this)}v(Be,Zt),Be.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Be.prototype.close=function(){Ho(this.g)},Be.prototype.o=function(a){var f=this.g;if(typeof a=="string"){var _={};_.__data__=a,a=_}else this.u&&(_={},_.__data__=Oo(a),a=_);f.i.push(new h_(f.Ya++,a)),f.G==3&&Ps(f)},Be.prototype.N=function(){this.g.l=null,delete this.j,Ho(this.g),delete this.g,Be.aa.N.call(this)};function Hu(a){No.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var f=a.__sm__;if(f){t:{for(const _ in f){a=_;break t}a=void 0}(this.i=a)&&(a=this.i,f=f!==null&&a in f?f[a]:void 0),this.data=f}else this.data=a}v(Hu,No);function Ku(){Fo.call(this),this.status=1}v(Ku,Fo);function xr(a){this.g=a}v(xr,Gu),xr.prototype.ua=function(){re(this.g,"a")},xr.prototype.ta=function(a){re(this.g,new Hu(a))},xr.prototype.sa=function(a){re(this.g,new Ku)},xr.prototype.ra=function(){re(this.g,"b")},Cs.prototype.createWebChannel=Cs.prototype.g,Be.prototype.send=Be.prototype.o,Be.prototype.open=Be.prototype.m,Be.prototype.close=Be.prototype.close,$f=function(){return new Cs},Lf=function(){return gs()},Ff=nr,La={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ys.NO_ERROR=0,ys.TIMEOUT=8,ys.HTTP_ERROR=6,$s=ys,uu.COMPLETE="complete",Nf=uu,iu.EventType=ci,ci.OPEN="a",ci.CLOSE="b",ci.ERROR="c",ci.MESSAGE="d",Zt.prototype.listen=Zt.prototype.K,Pi=iu,Mf=yi,qt.prototype.listenOnce=qt.prototype.L,qt.prototype.getLastError=qt.prototype.Ka,qt.prototype.getLastErrorCode=qt.prototype.Ba,qt.prototype.getStatus=qt.prototype.Z,qt.prototype.getResponseJson=qt.prototype.Oa,qt.prototype.getResponseText=qt.prototype.oa,qt.prototype.send=qt.prototype.ea,qt.prototype.setWithCredentials=qt.prototype.Ha,Of=qt}).apply(typeof Vs<"u"?Vs:typeof self<"u"?self:typeof window<"u"?window:{});const kc="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ve.UNAUTHENTICATED=new ve(null),ve.GOOGLE_CREDENTIALS=new ve("google-credentials-uid"),ve.FIRST_PARTY=new ve("first-party-uid"),ve.MOCK_USER=new ve("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oi="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wr=new Pf("@firebase/firestore");function Ai(){return wr.logLevel}function X(i,...t){if(wr.logLevel<=mt.DEBUG){const e=t.map(Tl);wr.debug(`Firestore (${oi}): ${i}`,...e)}}function xn(i,...t){if(wr.logLevel<=mt.ERROR){const e=t.map(Tl);wr.error(`Firestore (${oi}): ${i}`,...e)}}function Yr(i,...t){if(wr.logLevel<=mt.WARN){const e=t.map(Tl);wr.warn(`Firestore (${oi}): ${i}`,...e)}}function Tl(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(e){return JSON.stringify(e)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(i="Unexpected state"){const t=`FIRESTORE (${oi}) INTERNAL ASSERTION FAILED: `+i;throw xn(t),new Error(t)}function kt(i,t){i||st()}function lt(i,t){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends si{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class ay{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(ve.UNAUTHENTICATED))}shutdown(){}}class ly{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class uy{constructor(t){this.t=t,this.currentUser=ve.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const r=u=>this.i!==n?(n=this.i,e(u)):Promise.resolve();let s=new Pn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Pn,t.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await r(this.currentUser)})},l=u=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Pn)}},0),o()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(n=>this.i!==t?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(kt(typeof n.accessToken=="string"),new Bf(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return kt(t===null||typeof t=="string"),new ve(t)}}class cy{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=ve.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class hy{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new cy(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(ve.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fy{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dy{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=s=>{s.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,X("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>n(s))};const r=s=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(kt(typeof e.token=="string"),this.R=e.token,new fy(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _y(i){const t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(i);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let n=0;n<i;n++)e[n]=Math.floor(256*Math.random());return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const r=_y(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<e&&(n+=t.charAt(r[s]%t.length))}return n}}function It(i,t){return i<t?-1:i>t?1:0}function Jr(i,t,e){return i.length===t.length&&i.every((n,r)=>e(n,t[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Y(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Y(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Y(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Y(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return ee.fromMillis(Date.now())}static fromDate(t){return ee.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new ee(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?It(this.nanoseconds,t.nanoseconds):It(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(t){this.timestamp=t}static fromTimestamp(t){return new ot(t)}static min(){return new ot(new ee(0,0))}static max(){return new ot(new ee(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(t,e,n){e===void 0?e=0:e>t.length&&st(),n===void 0?n=t.length-e:n>t.length-e&&st(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return Qi.comparator(this,t)===0}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Qi?t.forEach(n=>{e.push(n)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.get(r),o=e.get(r);if(s<o)return-1;if(s>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Nt extends Qi{construct(t,e,n){return new Nt(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new Y(L.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter(r=>r.length>0))}return new Nt(e)}static emptyPath(){return new Nt([])}}const my=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ue extends Qi{construct(t,e,n){return new ue(t,e,n)}static isValidIdentifier(t){return my.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ue.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ue(["__name__"])}static fromServerFormat(t){const e=[];let n="",r=0;const s=()=>{if(n.length===0)throw new Y(L.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let o=!1;for(;r<t.length;){const l=t[r];if(l==="\\"){if(r+1===t.length)throw new Y(L.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Y(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=u,r+=2}else l==="`"?(o=!o,r++):l!=="."||o?(n+=l,r++):(s(),r++)}if(s(),o)throw new Y(L.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ue(e)}static emptyPath(){return new ue([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(t){this.path=t}static fromPath(t){return new rt(Nt.fromString(t))}static fromName(t){return new rt(Nt.fromString(t).popFirst(5))}static empty(){return new rt(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Nt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Nt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new rt(new Nt(t.slice()))}}function py(i,t){const e=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,r=ot.fromTimestamp(n===1e9?new ee(e+1,0):new ee(e,n));return new Qn(r,rt.empty(),t)}function gy(i){return new Qn(i.readTime,i.key,-1)}class Qn{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new Qn(ot.min(),rt.empty(),-1)}static max(){return new Qn(ot.max(),rt.empty(),-1)}}function yy(i,t){let e=i.readTime.compareTo(t.readTime);return e!==0?e:(e=rt.comparator(i.documentKey,t.documentKey),e!==0?e:It(i.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ty{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ls(i){if(i.code!==L.FAILED_PRECONDITION||i.message!==vy)throw i;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new $((n,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(n,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof $?e:$.resolve(e)}catch(e){return $.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):$.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):$.reject(e)}static resolve(t){return new $((e,n)=>{e(t)})}static reject(t){return new $((e,n)=>{n(t)})}static waitFor(t){return new $((e,n)=>{let r=0,s=0,o=!1;t.forEach(l=>{++r,l.next(()=>{++s,o&&s===r&&e()},u=>n(u))}),o=!0,s===r&&e()})}static or(t){let e=$.resolve(!1);for(const n of t)e=e.next(r=>r?$.resolve(r):n());return e}static forEach(t,e){const n=[];return t.forEach((r,s)=>{n.push(e.call(this,r,s))}),this.waitFor(n)}static mapArray(t,e){return new $((n,r)=>{const s=t.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const c=u;e(t[c]).next(h=>{o[c]=h,++l,l===s&&n(o)},h=>r(h))}})}static doWhile(t,e){return new $((n,r)=>{const s=()=>{t()===!0?e().next(()=>{s()},r):n()};s()})}}function Ey(i){const t=i.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function us(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=n=>this.ie(n),this.se=n=>e.writeSequenceNumber(n))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}El.oe=-1;function To(i){return i==null}function io(i){return i===0&&1/i==-1/0}function wy(i){return typeof i=="number"&&Number.isInteger(i)&&!io(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(i){let t=0;for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t++;return t}function Pr(i,t){for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&t(e,i[e])}function jf(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(t,e){this.comparator=t,this.root=e||le.EMPTY}insert(t,e){return new jt(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,le.BLACK,null,null))}remove(t){return new jt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,le.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(n===0)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,n)=>(t(e,n),!1))}toString(){const t=[];return this.inorderTraversal((e,n)=>(t.push(`${e}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new xs(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new xs(this.root,t,this.comparator,!1)}getReverseIterator(){return new xs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new xs(this.root,t,this.comparator,!0)}}class xs{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?n(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class le{constructor(t,e,n,r,s){this.key=t,this.value=e,this.color=n??le.RED,this.left=r??le.EMPTY,this.right=s??le.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,r,s){return new le(t??this.key,e??this.value,n??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let r=this;const s=n(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,n),null):s===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return le.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return le.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,le.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,le.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const t=this.left.check();if(t!==this.right.check())throw st();return t+(this.isRed()?0:1)}}le.EMPTY=null,le.RED=!0,le.BLACK=!1;le.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(t,e,n,r,s){return this}insert(t,e,n){return new le(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(t){this.comparator=t,this.data=new jt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,n)=>(t(e),!1))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(n=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new xc(this.data.getIterator())}getIteratorFrom(t){return new xc(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(n=>{e=e.add(n)}),e}isEqual(t){if(!(t instanceof he)||this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=n.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new he(this.comparator);return e.data=t,e}}class xc{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(t){this.fields=t,t.sort(ue.comparator)}static empty(){return new qe([])}unionWith(t){let e=new he(ue.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new qe(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return Jr(this.fields,t.fields,(e,n)=>e.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new zf("Invalid base64 string: "+s):s}}(t);return new Ae(e)}static fromUint8Array(t){const e=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new Ae(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return It(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ae.EMPTY_BYTE_STRING=new Ae("");const Iy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xn(i){if(kt(!!i),typeof i=="string"){let t=0;const e=Iy.exec(i);if(kt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}return{seconds:Jt(i.seconds),nanos:Jt(i.nanos)}}function Jt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Ir(i){return typeof i=="string"?Ae.fromBase64String(i):Ae.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(i){var t,e;return((e=(((t=i==null?void 0:i.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function Il(i){const t=i.mapValue.fields.__previous_value__;return wl(t)?Il(t):t}function Xi(i){const t=Xn(i.mapValue.fields.__local_write_time__.timestampValue);return new ee(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ay{constructor(t,e,n,r,s,o,l,u,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}class Yi{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new Yi("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Yi&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ar(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?wl(i)?4:by(i)?9007199254740991:10:st()}function Tn(i,t){if(i===t)return!0;const e=Ar(i);if(e!==Ar(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return Xi(i).isEqual(Xi(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Xn(r.timestampValue),l=Xn(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(i,t);case 5:return i.stringValue===t.stringValue;case 6:return function(r,s){return Ir(r.bytesValue).isEqual(Ir(s.bytesValue))}(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return function(r,s){return Jt(r.geoPointValue.latitude)===Jt(s.geoPointValue.latitude)&&Jt(r.geoPointValue.longitude)===Jt(s.geoPointValue.longitude)}(i,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Jt(r.integerValue)===Jt(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Jt(r.doubleValue),l=Jt(s.doubleValue);return o===l?io(o)===io(l):isNaN(o)&&isNaN(l)}return!1}(i,t);case 9:return Jr(i.arrayValue.values||[],t.arrayValue.values||[],Tn);case 10:return function(r,s){const o=r.mapValue.fields||{},l=s.mapValue.fields||{};if(Vc(o)!==Vc(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Tn(o[u],l[u])))return!1;return!0}(i,t);default:return st()}}function Ji(i,t){return(i.values||[]).find(e=>Tn(e,t))!==void 0}function Zr(i,t){if(i===t)return 0;const e=Ar(i),n=Ar(t);if(e!==n)return It(e,n);switch(e){case 0:case 9007199254740991:return 0;case 1:return It(i.booleanValue,t.booleanValue);case 2:return function(s,o){const l=Jt(s.integerValue||s.doubleValue),u=Jt(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(i,t);case 3:return Oc(i.timestampValue,t.timestampValue);case 4:return Oc(Xi(i),Xi(t));case 5:return It(i.stringValue,t.stringValue);case 6:return function(s,o){const l=Ir(s),u=Ir(o);return l.compareTo(u)}(i.bytesValue,t.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const h=It(l[c],u[c]);if(h!==0)return h}return It(l.length,u.length)}(i.referenceValue,t.referenceValue);case 8:return function(s,o){const l=It(Jt(s.latitude),Jt(o.latitude));return l!==0?l:It(Jt(s.longitude),Jt(o.longitude))}(i.geoPointValue,t.geoPointValue);case 9:return function(s,o){const l=s.values||[],u=o.values||[];for(let c=0;c<l.length&&c<u.length;++c){const h=Zr(l[c],u[c]);if(h)return h}return It(l.length,u.length)}(i.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===Os.mapValue&&o===Os.mapValue)return 0;if(s===Os.mapValue)return 1;if(o===Os.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let d=0;d<u.length&&d<h.length;++d){const m=It(u[d],h[d]);if(m!==0)return m;const g=Zr(l[u[d]],c[h[d]]);if(g!==0)return g}return It(u.length,h.length)}(i.mapValue,t.mapValue);default:throw st()}}function Oc(i,t){if(typeof i=="string"&&typeof t=="string"&&i.length===t.length)return It(i,t);const e=Xn(i),n=Xn(t),r=It(e.seconds,n.seconds);return r!==0?r:It(e.nanos,n.nanos)}function ti(i){return $a(i)}function $a(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(e){const n=Xn(e);return`time(${n.seconds},${n.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(e){return Ir(e).toBase64()}(i.bytesValue):"referenceValue"in i?function(e){return rt.fromName(e).toString()}(i.referenceValue):"geoPointValue"in i?function(e){return`geo(${e.latitude},${e.longitude})`}(i.geoPointValue):"arrayValue"in i?function(e){let n="[",r=!0;for(const s of e.values||[])r?r=!1:n+=",",n+=$a(s);return n+"]"}(i.arrayValue):"mapValue"in i?function(e){const n=Object.keys(e.fields||{}).sort();let r="{",s=!0;for(const o of n)s?s=!1:r+=",",r+=`${o}:${$a(e.fields[o])}`;return r+"}"}(i.mapValue):st()}function Ba(i){return!!i&&"integerValue"in i}function Al(i){return!!i&&"arrayValue"in i}function Mc(i){return!!i&&"nullValue"in i}function Nc(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Bs(i){return!!i&&"mapValue"in i}function Oi(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const t={mapValue:{fields:{}}};return Pr(i.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Oi(n)),t}if(i.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(i.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Oi(i.arrayValue.values[e]);return t}return Object.assign({},i)}function by(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(t){this.value=t}static empty(){return new De({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!Bs(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Oi(e)}setAll(t){let e=ue.emptyPath(),n={},r=[];t.forEach((o,l)=>{if(!e.isImmediateParentOf(l)){const u=this.getFieldsMap(e);this.applyChanges(u,n,r),n={},r=[],e=l.popLast()}o?n[l.lastSegment()]=Oi(o):r.push(l.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,n,r)}delete(t){const e=this.field(t.popLast());Bs(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Tn(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];Bs(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){Pr(e,(r,s)=>t[r]=s);for(const r of n)delete t[r]}clone(){return new De(Oi(this.value))}}function qf(i){const t=[];return Pr(i.fields,(e,n)=>{const r=new ue([e]);if(Bs(n)){const s=qf(n.mapValue).fields;if(s.length===0)t.push(r);else for(const o of s)t.push(r.child(o))}else t.push(r)}),new qe(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(t,e,n,r,s,o,l){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(t){return new Te(t,0,ot.min(),ot.min(),ot.min(),De.empty(),0)}static newFoundDocument(t,e,n,r){return new Te(t,1,e,ot.min(),n,r,0)}static newNoDocument(t,e){return new Te(t,2,e,ot.min(),ot.min(),De.empty(),0)}static newUnknownDocument(t,e){return new Te(t,3,e,ot.min(),ot.min(),De.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=De.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=De.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ot.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Te&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Te(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(t,e){this.position=t,this.inclusive=e}}function Fc(i,t,e){let n=0;for(let r=0;r<i.position.length;r++){const s=t[r],o=i.position[r];if(s.field.isKeyField()?n=rt.comparator(rt.fromName(o.referenceValue),e.key):n=Zr(o,e.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function Lc(i,t){if(i===null)return t===null;if(t===null||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let e=0;e<i.position.length;e++)if(!Tn(i.position[e],t.position[e]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(t,e="asc"){this.field=t,this.dir=e}}function Ry(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{}class te extends Gf{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,n):new Sy(t,e,n):e==="array-contains"?new ky(t,n):e==="in"?new Vy(t,n):e==="not-in"?new xy(t,n):e==="array-contains-any"?new Oy(t,n):new te(t,e,n)}static createKeyFieldInFilter(t,e,n){return e==="in"?new Cy(t,n):new Dy(t,n)}matches(t){const e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(Zr(e,this.value)):e!==null&&Ar(this.value)===Ar(e)&&this.matchesComparison(Zr(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return st()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class En extends Gf{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new En(t,e)}matches(t){return Hf(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Hf(i){return i.op==="and"}function Kf(i){return Py(i)&&Hf(i)}function Py(i){for(const t of i.filters)if(t instanceof En)return!1;return!0}function Ua(i){if(i instanceof te)return i.field.canonicalString()+i.op.toString()+ti(i.value);if(Kf(i))return i.filters.map(t=>Ua(t)).join(",");{const t=i.filters.map(e=>Ua(e)).join(",");return`${i.op}(${t})`}}function Wf(i,t){return i instanceof te?function(n,r){return r instanceof te&&n.op===r.op&&n.field.isEqual(r.field)&&Tn(n.value,r.value)}(i,t):i instanceof En?function(n,r){return r instanceof En&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((s,o,l)=>s&&Wf(o,r.filters[l]),!0):!1}(i,t):void st()}function Qf(i){return i instanceof te?function(e){return`${e.field.canonicalString()} ${e.op} ${ti(e.value)}`}(i):i instanceof En?function(e){return e.op.toString()+" {"+e.getFilters().map(Qf).join(" ,")+"}"}(i):"Filter"}class Sy extends te{constructor(t,e,n){super(t,e,n),this.key=rt.fromName(n.referenceValue)}matches(t){const e=rt.comparator(t.key,this.key);return this.matchesComparison(e)}}class Cy extends te{constructor(t,e){super(t,"in",e),this.keys=Xf("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class Dy extends te{constructor(t,e){super(t,"not-in",e),this.keys=Xf("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function Xf(i,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(n=>rt.fromName(n.referenceValue))}class ky extends te{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Al(e)&&Ji(e.arrayValue,this.value)}}class Vy extends te{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return e!==null&&Ji(this.value.arrayValue,e)}}class xy extends te{constructor(t,e){super(t,"not-in",e)}matches(t){if(Ji(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return e!==null&&!Ji(this.value.arrayValue,e)}}class Oy extends te{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Al(e)||!e.arrayValue.values)&&e.arrayValue.values.some(n=>Ji(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(t,e=null,n=[],r=[],s=null,o=null,l=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function $c(i,t=null,e=[],n=[],r=null,s=null,o=null){return new My(i,t,e,n,r,s,o)}function bl(i){const t=lt(i);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(n=>Ua(n)).join(","),e+="|ob:",e+=t.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),To(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>ti(n)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>ti(n)).join(",")),t.ue=e}return t.ue}function Rl(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<i.orderBy.length;e++)if(!Ry(i.orderBy[e],t.orderBy[e]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let e=0;e<i.filters.length;e++)if(!Wf(i.filters[e],t.filters[e]))return!1;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!Lc(i.startAt,t.startAt)&&Lc(i.endAt,t.endAt)}function ja(i){return rt.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(t,e=null,n=[],r=[],s=null,o="F",l=null,u=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Ny(i,t,e,n,r,s,o,l){return new Eo(i,t,e,n,r,s,o,l)}function wo(i){return new Eo(i)}function Bc(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Fy(i){return i.collectionGroup!==null}function Mi(i){const t=lt(i);if(t.ce===null){t.ce=[];const e=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new he(ue.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.ce.push(new oo(s,n))}),e.has(ue.keyField().canonicalString())||t.ce.push(new oo(ue.keyField(),n))}return t.ce}function pn(i){const t=lt(i);return t.le||(t.le=Ly(t,Mi(i))),t.le}function Ly(i,t){if(i.limitType==="F")return $c(i.path,i.collectionGroup,t,i.filters,i.limit,i.startAt,i.endAt);{t=t.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new oo(r.field,s)});const e=i.endAt?new so(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new so(i.startAt.position,i.startAt.inclusive):null;return $c(i.path,i.collectionGroup,t,i.filters,i.limit,e,n)}}function za(i,t,e){return new Eo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,e,i.startAt,i.endAt)}function Io(i,t){return Rl(pn(i),pn(t))&&i.limitType===t.limitType}function Yf(i){return`${bl(pn(i))}|lt:${i.limitType}`}function Nr(i){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>Qf(r)).join(", ")}]`),To(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ti(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ti(r)).join(",")),`Target(${n})`}(pn(i))}; limitType=${i.limitType})`}function Ao(i,t){return t.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):rt.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(i,t)&&function(n,r){for(const s of Mi(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(i,t)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(i,t)&&function(n,r){return!(n.startAt&&!function(o,l,u){const c=Fc(o,l,u);return o.inclusive?c<=0:c<0}(n.startAt,Mi(n),r)||n.endAt&&!function(o,l,u){const c=Fc(o,l,u);return o.inclusive?c>=0:c>0}(n.endAt,Mi(n),r))}(i,t)}function $y(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Jf(i){return(t,e)=>{let n=!1;for(const r of Mi(i)){const s=By(r,t,e);if(s!==0)return s;n=n||r.field.isKeyField()}return 0}}function By(i,t,e){const n=i.field.isKeyField()?rt.comparator(t.key,e.key):function(s,o,l){const u=o.data.field(s),c=l.data.field(s);return u!==null&&c!==null?Zr(u,c):st()}(i.field,t,e);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return st()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(n!==void 0){for(const[r,s]of n)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,e){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return this.inner[n]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return n.length===1?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Pr(this.inner,(e,n)=>{for(const[r,s]of n)t(r,s)})}isEmpty(){return jf(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy=new jt(rt.comparator);function On(){return Uy}const Zf=new jt(rt.comparator);function Si(...i){let t=Zf;for(const e of i)t=t.insert(e.key,e);return t}function td(i){let t=Zf;return i.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function hr(){return Ni()}function ed(){return Ni()}function Ni(){return new ai(i=>i.toString(),(i,t)=>i.isEqual(t))}const jy=new jt(rt.comparator),zy=new he(rt.comparator);function ft(...i){let t=zy;for(const e of i)t=t.add(e);return t}const qy=new he(It);function Gy(){return qy}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(i,t){if(i.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:io(t)?"-0":t}}function rd(i){return{integerValue:""+i}}function Hy(i,t){return wy(t)?rd(t):nd(i,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(){this._=void 0}}function Ky(i,t,e){return i instanceof ao?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&wl(s)&&(s=Il(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(e,t):i instanceof Zi?sd(i,t):i instanceof ts?od(i,t):function(r,s){const o=id(r,s),l=Uc(o)+Uc(r.Pe);return Ba(o)&&Ba(r.Pe)?rd(l):nd(r.serializer,l)}(i,t)}function Wy(i,t,e){return i instanceof Zi?sd(i,t):i instanceof ts?od(i,t):e}function id(i,t){return i instanceof lo?function(n){return Ba(n)||function(s){return!!s&&"doubleValue"in s}(n)}(t)?t:{integerValue:0}:null}class ao extends bo{}class Zi extends bo{constructor(t){super(),this.elements=t}}function sd(i,t){const e=ad(t);for(const n of i.elements)e.some(r=>Tn(r,n))||e.push(n);return{arrayValue:{values:e}}}class ts extends bo{constructor(t){super(),this.elements=t}}function od(i,t){let e=ad(t);for(const n of i.elements)e=e.filter(r=>!Tn(r,n));return{arrayValue:{values:e}}}class lo extends bo{constructor(t,e){super(),this.serializer=t,this.Pe=e}}function Uc(i){return Jt(i.integerValue||i.doubleValue)}function ad(i){return Al(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function Qy(i,t){return i.field.isEqual(t.field)&&function(n,r){return n instanceof Zi&&r instanceof Zi||n instanceof ts&&r instanceof ts?Jr(n.elements,r.elements,Tn):n instanceof lo&&r instanceof lo?Tn(n.Pe,r.Pe):n instanceof ao&&r instanceof ao}(i.transform,t.transform)}class Xy{constructor(t,e){this.version=t,this.transformResults=e}}class He{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new He}static exists(t){return new He(void 0,t)}static updateTime(t){return new He(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Us(i,t){return i.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(i.updateTime):i.exists===void 0||i.exists===t.isFoundDocument()}class Ro{}function ld(i,t){if(!i.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return i.isNoDocument()?new Pl(i.key,He.none()):new cs(i.key,i.data,He.none());{const e=i.data,n=De.empty();let r=new he(ue.comparator);for(let s of t.fields)if(!r.has(s)){let o=e.field(s);o===null&&s.length>1&&(s=s.popLast(),o=e.field(s)),o===null?n.delete(s):n.set(s,o),r=r.add(s)}return new tr(i.key,n,new qe(r.toArray()),He.none())}}function Yy(i,t,e){i instanceof cs?function(r,s,o){const l=r.value.clone(),u=zc(r.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(i,t,e):i instanceof tr?function(r,s,o){if(!Us(r.precondition,s))return void s.convertToUnknownDocument(o.version);const l=zc(r.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(ud(r)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(i,t,e):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,e)}function Fi(i,t,e,n){return i instanceof cs?function(s,o,l,u){if(!Us(s.precondition,o))return l;const c=s.value.clone(),h=qc(s.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(i,t,e,n):i instanceof tr?function(s,o,l,u){if(!Us(s.precondition,o))return l;const c=qc(s.fieldTransforms,u,o),h=o.data;return h.setAll(ud(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(i,t,e,n):function(s,o,l){return Us(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(i,t,e)}function Jy(i,t){let e=null;for(const n of i.fieldTransforms){const r=t.data.field(n.field),s=id(n.transform,r||null);s!=null&&(e===null&&(e=De.empty()),e.set(n.field,s))}return e||null}function jc(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Jr(n,r,(s,o)=>Qy(s,o))}(i.fieldTransforms,t.fieldTransforms)&&(i.type===0?i.value.isEqual(t.value):i.type!==1||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask))}class cs extends Ro{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class tr extends Ro{constructor(t,e,n,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ud(i){const t=new Map;return i.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const n=i.data.field(e);t.set(e,n)}}),t}function zc(i,t,e){const n=new Map;kt(i.length===e.length);for(let r=0;r<e.length;r++){const s=i[r],o=s.transform,l=t.data.field(s.field);n.set(s.field,Wy(o,l,e[r]))}return n}function qc(i,t,e){const n=new Map;for(const r of i){const s=r.transform,o=e.data.field(r.field);n.set(r.field,Ky(s,o,t))}return n}class Pl extends Ro{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Zy extends Ro{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&Yy(s,t,n[r])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=Fi(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=Fi(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=ed();return this.mutations.forEach(r=>{const s=t.get(r.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=e.has(r.key)?null:l;const u=ld(o,l);u!==null&&n.set(r.key,u),o.isValidDocument()||o.convertToNoDocument(ot.min())}),n}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),ft())}isEqual(t){return this.batchId===t.batchId&&Jr(this.mutations,t.mutations,(e,n)=>jc(e,n))&&Jr(this.baseMutations,t.baseMutations,(e,n)=>jc(e,n))}}class Sl{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){kt(t.mutations.length===n.length);let r=function(){return jy}();const s=t.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,n[o].version);return new Sl(t,e,n,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(t,e){this.count=t,this.unchangedNames=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt,_t;function r0(i){switch(i){default:return st();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function cd(i){if(i===void 0)return xn("GRPC error has no .code"),L.UNKNOWN;switch(i){case Xt.OK:return L.OK;case Xt.CANCELLED:return L.CANCELLED;case Xt.UNKNOWN:return L.UNKNOWN;case Xt.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Xt.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Xt.INTERNAL:return L.INTERNAL;case Xt.UNAVAILABLE:return L.UNAVAILABLE;case Xt.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Xt.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Xt.NOT_FOUND:return L.NOT_FOUND;case Xt.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Xt.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Xt.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Xt.ABORTED:return L.ABORTED;case Xt.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Xt.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Xt.DATA_LOSS:return L.DATA_LOSS;default:return st()}}(_t=Xt||(Xt={}))[_t.OK=0]="OK",_t[_t.CANCELLED=1]="CANCELLED",_t[_t.UNKNOWN=2]="UNKNOWN",_t[_t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_t[_t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_t[_t.NOT_FOUND=5]="NOT_FOUND",_t[_t.ALREADY_EXISTS=6]="ALREADY_EXISTS",_t[_t.PERMISSION_DENIED=7]="PERMISSION_DENIED",_t[_t.UNAUTHENTICATED=16]="UNAUTHENTICATED",_t[_t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_t[_t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_t[_t.ABORTED=10]="ABORTED",_t[_t.OUT_OF_RANGE=11]="OUT_OF_RANGE",_t[_t.UNIMPLEMENTED=12]="UNIMPLEMENTED",_t[_t.INTERNAL=13]="INTERNAL",_t[_t.UNAVAILABLE=14]="UNAVAILABLE",_t[_t.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0=new gr([4294967295,4294967295],0);function Gc(i){const t=i0().encode(i),e=new xf;return e.update(t),new Uint8Array(e.digest())}function Hc(i){const t=new DataView(i.buffer),e=t.getUint32(0,!0),n=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new gr([e,n],0),new gr([r,s],0)]}class Cl{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new Ci(`Invalid padding: ${e}`);if(n<0)throw new Ci(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new Ci(`Invalid hash count: ${n}`);if(t.length===0&&e!==0)throw new Ci(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=gr.fromNumber(this.Ie)}Ee(t,e,n){let r=t.add(e.multiply(gr.fromNumber(n)));return r.compare(s0)===1&&(r=new gr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const e=Gc(t),[n,r]=Hc(e);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,r,s);if(!this.de(o))return!1}return!0}static create(t,e,n){const r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new Cl(s,r,e);return n.forEach(l=>o.insert(l)),o}insert(t){if(this.Ie===0)return;const e=Gc(t),[n,r]=Hc(e);for(let s=0;s<this.hashCount;s++){const o=this.Ee(n,r,s);this.Ae(o)}}Ae(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class Ci extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(t,e,n,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const r=new Map;return r.set(t,hs.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new Po(ot.min(),r,new jt(It),On(),ft())}}class hs{constructor(t,e,n,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new hs(n,e,ft(),ft(),ft())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(t,e,n,r){this.Re=t,this.removedTargetIds=e,this.key=n,this.Ve=r}}class hd{constructor(t,e){this.targetId=t,this.me=e}}class fd{constructor(t,e,n=Ae.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}}class Kc{constructor(){this.fe=0,this.ge=Qc(),this.pe=Ae.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=ft(),e=ft(),n=ft();return this.ge.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:st()}}),new hs(this.pe,this.ye,t,e,n)}ve(){this.we=!1,this.ge=Qc()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,kt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class o0{constructor(t){this.Le=t,this.Be=new Map,this.ke=On(),this.qe=Wc(),this.Qe=new jt(It)}Ke(t){for(const e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(const e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{const n=this.Ge(e);switch(t.state){case 0:this.ze(e)&&n.De(t.resumeToken);break;case 1:n.Oe(),n.Se||n.ve(),n.De(t.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(n.Ne(),n.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),n.De(t.resumeToken));break;default:st()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((n,r)=>{this.ze(r)&&e(r)})}He(t){const e=t.targetId,n=t.me.count,r=this.Je(e);if(r){const s=r.target;if(ja(s))if(n===0){const o=new rt(s.path);this.Ue(e,o,Te.newNoDocument(o,ot.min()))}else kt(n===1);else{const o=this.Ye(e);if(o!==n){const l=this.Ze(t),u=l?this.Xe(l,t,o):1;if(u!==0){this.je(e);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,c)}}}}}Ze(t){const e=t.me.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=e;let o,l;try{o=Ir(n).toUint8Array()}catch(u){if(u instanceof zf)return Yr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Cl(o,r,s)}catch(u){return Yr(u instanceof Ci?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(t,e,n){return e.me.count===n-this.nt(t,e.targetId)?0:2}nt(t,e){const n=this.Le.getRemoteKeysForTarget(e);let r=0;return n.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(l)||(this.Ue(e,s,null),r++)}),r}rt(t){const e=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&ja(l.target)){const u=new rt(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Te.newNoDocument(u,t))}s.be&&(e.set(o,s.Ce()),s.ve())}});let n=ft();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const r=new Po(t,e,this.Qe,this.ke,n);return this.ke=On(),this.qe=Wc(),this.Qe=new jt(It),r}$e(t,e){if(!this.ze(t))return;const n=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,n),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,n){if(!this.ze(t))return;const r=this.Ge(t);this.it(t,e)?r.Fe(e,1):r.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),n&&(this.ke=this.ke.insert(e,n))}removeTarget(t){this.Be.delete(t)}Ye(t){const e=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new Kc,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new he(It),this.qe=this.qe.insert(t,e)),e}ze(t){const e=this.Je(t)!==null;return e||X("WatchChangeAggregator","Detected inactive target",t),e}Je(t){const e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Kc),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function Wc(){return new jt(rt.comparator)}function Qc(){return new jt(rt.comparator)}const a0={asc:"ASCENDING",desc:"DESCENDING"},l0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},u0={and:"AND",or:"OR"};class c0{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function qa(i,t){return i.useProto3Json||To(t)?t:{value:t}}function uo(i,t){return i.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function dd(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function h0(i,t){return uo(i,t.toTimestamp())}function gn(i){return kt(!!i),ot.fromTimestamp(function(e){const n=Xn(e);return new ee(n.seconds,n.nanos)}(i))}function Dl(i,t){return Ga(i,t).canonicalString()}function Ga(i,t){const e=function(r){return new Nt(["projects",r.projectId,"databases",r.database])}(i).child("documents");return t===void 0?e:e.child(t)}function _d(i){const t=Nt.fromString(i);return kt(vd(t)),t}function Ha(i,t){return Dl(i.databaseId,t.path)}function ha(i,t){const e=_d(t);if(e.get(1)!==i.databaseId.projectId)throw new Y(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+i.databaseId.projectId);if(e.get(3)!==i.databaseId.database)throw new Y(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+i.databaseId.database);return new rt(pd(e))}function md(i,t){return Dl(i.databaseId,t)}function f0(i){const t=_d(i);return t.length===4?Nt.emptyPath():pd(t)}function Ka(i){return new Nt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function pd(i){return kt(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function Xc(i,t,e){return{name:Ha(i,t),fields:e.value.mapValue.fields}}function d0(i,t){let e;if("targetChange"in t){t.targetChange;const n=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:st()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(kt(h===void 0||typeof h=="string"),Ae.fromBase64String(h||"")):(kt(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Ae.fromUint8Array(h||new Uint8Array))}(i,t.targetChange.resumeToken),o=t.targetChange.cause,l=o&&function(c){const h=c.code===void 0?L.UNKNOWN:cd(c.code);return new Y(h,c.message||"")}(o);e=new fd(n,r,s,l||null)}else if("documentChange"in t){t.documentChange;const n=t.documentChange;n.document,n.document.name,n.document.updateTime;const r=ha(i,n.document.name),s=gn(n.document.updateTime),o=n.document.createTime?gn(n.document.createTime):ot.min(),l=new De({mapValue:{fields:n.document.fields}}),u=Te.newFoundDocument(r,s,o,l),c=n.targetIds||[],h=n.removedTargetIds||[];e=new js(c,h,u.key,u)}else if("documentDelete"in t){t.documentDelete;const n=t.documentDelete;n.document;const r=ha(i,n.document),s=n.readTime?gn(n.readTime):ot.min(),o=Te.newNoDocument(r,s),l=n.removedTargetIds||[];e=new js([],l,o.key,o)}else if("documentRemove"in t){t.documentRemove;const n=t.documentRemove;n.document;const r=ha(i,n.document),s=n.removedTargetIds||[];e=new js([],s,r,null)}else{if(!("filter"in t))return st();{t.filter;const n=t.filter;n.targetId;const{count:r=0,unchangedNames:s}=n,o=new n0(r,s),l=n.targetId;e=new hd(l,o)}}return e}function _0(i,t){let e;if(t instanceof cs)e={update:Xc(i,t.key,t.value)};else if(t instanceof Pl)e={delete:Ha(i,t.key)};else if(t instanceof tr)e={update:Xc(i,t.key,t.data),updateMask:I0(t.fieldMask)};else{if(!(t instanceof Zy))return st();e={verify:Ha(i,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(n=>function(s,o){const l=o.transform;if(l instanceof ao)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Zi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ts)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof lo)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw st()}(0,n))),t.precondition.isNone||(e.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:h0(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:st()}(i,t.precondition)),e}function m0(i,t){return i&&i.length>0?(kt(t!==void 0),i.map(e=>function(r,s){let o=r.updateTime?gn(r.updateTime):gn(s);return o.isEqual(ot.min())&&(o=gn(s)),new Xy(o,r.transformResults||[])}(e,t))):[]}function p0(i,t){return{documents:[md(i,t.path)]}}function g0(i,t){const e={structuredQuery:{}},n=t.path;let r;t.collectionGroup!==null?(r=n,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=n.popLast(),e.structuredQuery.from=[{collectionId:n.lastSegment()}]),e.parent=md(i,r);const s=function(c){if(c.length!==0)return yd(En.create(c,"and"))}(t.filters);s&&(e.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:Fr(m.field),direction:T0(m.dir)}}(h))}(t.orderBy);o&&(e.structuredQuery.orderBy=o);const l=qa(i,t.limit);return l!==null&&(e.structuredQuery.limit=l),t.startAt&&(e.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(t.endAt)),{_t:e,parent:r}}function y0(i){let t=f0(i.parent);const e=i.structuredQuery,n=e.from?e.from.length:0;let r=null;if(n>0){kt(n===1);const h=e.from[0];h.allDescendants?r=h.collectionId:t=t.child(h.collectionId)}let s=[];e.where&&(s=function(d){const m=gd(d);return m instanceof En&&Kf(m)?m.getFilters():[m]}(e.where));let o=[];e.orderBy&&(o=function(d){return d.map(m=>function(v){return new oo(Lr(v.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(m))}(e.orderBy));let l=null;e.limit&&(l=function(d){let m;return m=typeof d=="object"?d.value:d,To(m)?null:m}(e.limit));let u=null;e.startAt&&(u=function(d){const m=!!d.before,g=d.values||[];return new so(g,m)}(e.startAt));let c=null;return e.endAt&&(c=function(d){const m=!d.before,g=d.values||[];return new so(g,m)}(e.endAt)),Ny(t,r,o,s,l,"F",u,c)}function v0(i,t){const e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return st()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function gd(i){return i.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Lr(e.unaryFilter.field);return te.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Lr(e.unaryFilter.field);return te.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Lr(e.unaryFilter.field);return te.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Lr(e.unaryFilter.field);return te.create(o,"!=",{nullValue:"NULL_VALUE"});default:return st()}}(i):i.fieldFilter!==void 0?function(e){return te.create(Lr(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(e.fieldFilter.op),e.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(e){return En.create(e.compositeFilter.filters.map(n=>gd(n)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return st()}}(e.compositeFilter.op))}(i):st()}function T0(i){return a0[i]}function E0(i){return l0[i]}function w0(i){return u0[i]}function Fr(i){return{fieldPath:i.canonicalString()}}function Lr(i){return ue.fromServerFormat(i.fieldPath)}function yd(i){return i instanceof te?function(e){if(e.op==="=="){if(Nc(e.value))return{unaryFilter:{field:Fr(e.field),op:"IS_NAN"}};if(Mc(e.value))return{unaryFilter:{field:Fr(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Nc(e.value))return{unaryFilter:{field:Fr(e.field),op:"IS_NOT_NAN"}};if(Mc(e.value))return{unaryFilter:{field:Fr(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fr(e.field),op:E0(e.op),value:e.value}}}(i):i instanceof En?function(e){const n=e.getFilters().map(r=>yd(r));return n.length===1?n[0]:{compositeFilter:{op:w0(e.op),filters:n}}}(i):st()}function I0(i){const t=[];return i.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function vd(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(t,e,n,r,s=ot.min(),o=ot.min(),l=Ae.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new Un(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Un(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Un(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Un(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(t){this.ct=t}}function b0(i){const t=y0({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?za(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(){this._n=new P0}addToCollectionParentIndex(t,e){return this._n.add(e),$.resolve()}getCollectionParents(t,e){return $.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return $.resolve()}deleteFieldIndex(t,e){return $.resolve()}deleteAllFieldIndexes(t){return $.resolve()}createTargetIndexes(t,e){return $.resolve()}getDocumentsMatchingTarget(t,e){return $.resolve(null)}getIndexType(t,e){return $.resolve(0)}getFieldIndexes(t,e){return $.resolve([])}getNextCollectionGroupToUpdate(t){return $.resolve(null)}getMinOffset(t,e){return $.resolve(Qn.min())}getMinOffsetFromCollectionGroup(t,e){return $.resolve(Qn.min())}updateCollectionGroup(t,e,n){return $.resolve()}updateIndexEntries(t,e){return $.resolve()}}class P0{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new he(Nt.comparator),s=!r.has(n);return this.index[e]=r.add(n),s}has(t){const e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new he(Nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new ei(0)}static Ln(){return new ei(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(){this.changes=new ai(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Te.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return n!==void 0?$.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(t,e,n,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(n=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(n!==null&&Fi(n.mutation,r,qe.empty(),ee.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(n=>this.getLocalViewOfDocuments(t,n,ft()).next(()=>n))}getLocalViewOfDocuments(t,e,n=ft()){const r=hr();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,n).next(s=>{let o=Si();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){const n=hr();return this.populateOverlays(t,n,e).next(()=>this.computeViews(t,e,n,ft()))}populateOverlays(t,e,n){const r=[];return n.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,l)=>{e.set(o,l)})})}computeViews(t,e,n,r){let s=On();const o=Ni(),l=function(){return Ni()}();return e.forEach((u,c)=>{const h=n.get(c.key);r.has(c.key)&&(h===void 0||h.mutation instanceof tr)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Fi(h.mutation,c,h.mutation.getFieldMask(),ee.now())):o.set(c.key,qe.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((c,h)=>o.set(c,h)),e.forEach((c,h)=>{var d;return l.set(c,new C0(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),l))}recalculateAndSaveOverlays(t,e){const n=Ni();let r=new jt((o,l)=>o-l),s=ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=e.get(u);if(c===null)return;let h=n.get(u)||qe.empty();h=l.applyToLocalView(c,h),n.set(u,h);const d=(r.get(l.batchId)||ft()).add(u);r=r.insert(l.batchId,d)})}).next(()=>{const o=[],l=r.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,h=u.value,d=ed();h.forEach(m=>{if(!s.has(m)){const g=ld(e.get(m),n.get(m));g!==null&&d.set(m,g),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,d))}return $.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,e,n,r){return function(o){return rt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Fy(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,r):this.getDocumentsMatchingCollectionQuery(t,e,n,r)}getNextDocuments(t,e,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-s.size):$.resolve(hr());let l=-1,u=s;return o.next(c=>$.forEach(c,(h,d)=>(l<d.largestBatchId&&(l=d.largestBatchId),s.get(h)?$.resolve():this.remoteDocumentCache.getEntry(t,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(t,c,s)).next(()=>this.computeViews(t,u,c,ft())).next(h=>({batchId:l,changes:td(h)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new rt(e)).next(n=>{let r=Si();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,n,r){const s=e.collectionGroup;let o=Si();return this.indexManager.getCollectionParents(t,s).next(l=>$.forEach(l,u=>{const c=function(d,m){return new Eo(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(e,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,c,n,r).next(h=>{h.forEach((d,m)=>{o=o.insert(d,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,s,r))).next(o=>{s.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Te.newInvalidDocument(h)))});let l=Si();return o.forEach((u,c)=>{const h=s.get(u);h!==void 0&&Fi(h.mutation,c,qe.empty(),ee.now()),Ao(e,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return $.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:gn(r.createTime)}}(e)),$.resolve()}getNamedQuery(t,e){return $.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,function(r){return{name:r.name,query:b0(r.bundledQuery),readTime:gn(r.readTime)}}(e)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(){this.overlays=new jt(rt.comparator),this.hr=new Map}getOverlay(t,e){return $.resolve(this.overlays.get(e))}getOverlays(t,e){const n=hr();return $.forEach(e,r=>this.getOverlay(t,r).next(s=>{s!==null&&n.set(r,s)})).next(()=>n)}saveOverlays(t,e,n){return n.forEach((r,s)=>{this.ht(t,e,s)}),$.resolve()}removeOverlaysForBatchId(t,e,n){const r=this.hr.get(n);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(n)),$.resolve()}getOverlaysForCollection(t,e,n){const r=hr(),s=e.length+1,o=new rt(e.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!e.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>n&&r.set(u.getKey(),u)}return $.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let s=new jt((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===e&&c.largestBatchId>n){let h=s.get(c.largestBatchId);h===null&&(h=hr(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const l=hr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>l.set(c,h)),!(l.size()>=r)););return $.resolve(l)}ht(t,e,n){const r=this.overlays.get(n.key);if(r!==null){const o=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new e0(e,n));let s=this.hr.get(e);s===void 0&&(s=ft(),this.hr.set(e,s)),this.hr.set(e,s.add(n.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(){this.Pr=new he(ie.Ir),this.Tr=new he(ie.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){const n=new ie(t,e);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(t,e){t.forEach(n=>this.addReference(n,e))}removeReference(t,e){this.Ar(new ie(t,e))}Rr(t,e){t.forEach(n=>this.removeReference(n,e))}Vr(t){const e=new rt(new Nt([])),n=new ie(e,t),r=new ie(e,t+1),s=[];return this.Tr.forEachInRange([n,r],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const e=new rt(new Nt([])),n=new ie(e,t),r=new ie(e,t+1);let s=ft();return this.Tr.forEachInRange([n,r],o=>{s=s.add(o.key)}),s}containsKey(t){const e=new ie(t,0),n=this.Pr.firstAfterOrEqual(e);return n!==null&&t.isEqual(n.key)}}class ie{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return rt.comparator(t.key,e.key)||It(t.pr,e.pr)}static Er(t,e){return It(t.pr,e.pr)||rt.comparator(t.key,e.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new he(ie.Ir)}checkEmpty(t){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,n,r){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new t0(s,e,n,r);this.mutationQueue.push(o);for(const l of r)this.wr=this.wr.add(new ie(l.key,s)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return $.resolve(o)}lookupMutationBatch(t,e){return $.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,r=this.br(n),s=r<0?0:r;return $.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new ie(e,0),r=new ie(e,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([n,r],o=>{const l=this.Sr(o.pr);s.push(l)}),$.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new he(It);return e.forEach(r=>{const s=new ie(r,0),o=new ie(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],l=>{n=n.add(l.pr)})}),$.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,r=n.length+1;let s=n;rt.isDocumentKey(s)||(s=s.child(""));const o=new ie(new rt(s),0);let l=new he(It);return this.wr.forEachWhile(u=>{const c=u.key.path;return!!n.isPrefixOf(c)&&(c.length===r&&(l=l.add(u.pr)),!0)},o),$.resolve(this.Dr(l))}Dr(t){const e=[];return t.forEach(n=>{const r=this.Sr(n);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){kt(this.Cr(e.batchId,"removed")===0),this.mutationQueue.shift();let n=this.wr;return $.forEach(e.mutations,r=>{const s=new ie(r.key,e.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.wr=n})}Mn(t){}containsKey(t,e){const n=new ie(e,0),r=this.wr.firstAfterOrEqual(n);return $.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,$.resolve()}Cr(t,e){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(t){this.vr=t,this.docs=function(){return new jt(rt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,r=this.docs.get(n),s=r?r.size:0,o=this.vr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return $.resolve(n?n.document.mutableCopy():Te.newInvalidDocument(e))}getEntries(t,e){let n=On();return e.forEach(r=>{const s=this.docs.get(r);n=n.insert(r,s?s.document.mutableCopy():Te.newInvalidDocument(r))}),$.resolve(n)}getDocumentsMatchingQuery(t,e,n,r){let s=On();const o=e.path,l=new rt(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||yy(gy(h),n)<=0||(r.has(h.key)||Ao(e,h))&&(s=s.insert(h.key,h.mutableCopy()))}return $.resolve(s)}getAllFromCollectionGroup(t,e,n,r){st()}Fr(t,e){return $.forEach(this.docs,n=>e(n))}newChangeBuffer(t){return new M0(this)}getSize(t){return $.resolve(this.size)}}class M0 extends S0{constructor(t){super(),this.ar=t}applyChanges(t){const e=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?e.push(this.ar.addEntry(t,r)):this.ar.removeEntry(n)}),$.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(t){this.persistence=t,this.Mr=new ai(e=>bl(e),Rl),this.lastRemoteSnapshotVersion=ot.min(),this.highestTargetId=0,this.Or=0,this.Nr=new kl,this.targetCount=0,this.Lr=ei.Nn()}forEachTarget(t,e){return this.Mr.forEach((n,r)=>e(r)),$.resolve()}getLastRemoteSnapshotVersion(t){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return $.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Or&&(this.Or=e),$.resolve()}qn(t){this.Mr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Lr=new ei(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,$.resolve()}updateTargetData(t,e){return this.qn(e),$.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,$.resolve()}removeTargets(t,e,n){let r=0;const s=[];return this.Mr.forEach((o,l)=>{l.sequenceNumber<=e&&n.get(l.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,l.targetId)),r++)}),$.waitFor(s).next(()=>r)}getTargetCount(t){return $.resolve(this.targetCount)}getTargetData(t,e){const n=this.Mr.get(e)||null;return $.resolve(n)}addMatchingKeys(t,e,n){return this.Nr.dr(e,n),$.resolve()}removeMatchingKeys(t,e,n){this.Nr.Rr(e,n);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),$.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),$.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Nr.gr(e);return $.resolve(n)}containsKey(t,e){return $.resolve(this.Nr.containsKey(e))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(t,e){this.Br={},this.overlays={},this.kr=new El(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new N0(this),this.indexManager=new R0,this.remoteDocumentCache=function(r){return new O0(r)}(n=>this.referenceDelegate.Kr(n)),this.serializer=new A0(e),this.$r=new k0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new V0,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Br[t.toKey()];return n||(n=new x0(e,this.referenceDelegate),this.Br[t.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,n){X("MemoryPersistence","Starting transaction:",t);const r=new L0(this.kr.next());return this.referenceDelegate.Ur(),n(r).next(s=>this.referenceDelegate.Wr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gr(t,e){return $.or(Object.values(this.Br).map(n=>()=>n.containsKey(t,e)))}}class L0 extends Ty{constructor(t){super(),this.currentSequenceNumber=t}}class Vl{constructor(t){this.persistence=t,this.zr=new kl,this.jr=null}static Hr(t){return new Vl(t)}get Jr(){if(this.jr)return this.jr;throw st()}addReference(t,e,n){return this.zr.addReference(n,e),this.Jr.delete(n.toString()),$.resolve()}removeReference(t,e,n){return this.zr.removeReference(n,e),this.Jr.add(n.toString()),$.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),$.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach(r=>this.Jr.add(r.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Jr.add(s.toString()))}).next(()=>n.removeTargetData(t,e))}Ur(){this.jr=new Set}Wr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Jr,n=>{const r=rt.fromPath(n);return this.Yr(t,r).next(s=>{s||e.removeEntry(r,ot.min())})}).next(()=>(this.jr=null,e.apply(t)))}updateLimboDocument(t,e){return this.Yr(t,e).next(n=>{n?this.Jr.delete(e.toString()):this.Jr.add(e.toString())})}Kr(t){return 0}Yr(t,e){return $.or([()=>$.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.qi=n,this.Qi=r}static Ki(t,e){let n=ft(),r=ft();for(const s of e.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new xl(t,e.fromCache,n,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return qp()?8:Ey(jp())>0?6:4}()}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,n,r){const s={result:null};return this.ji(t,e).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,e,r,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new $0;return this.Ji(t,e,o).next(l=>{if(s.result=l,this.Ui)return this.Yi(t,e,o,l.size)})}).next(()=>s.result)}Yi(t,e,n,r){return n.documentReadCount<this.Wi?(Ai()<=mt.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",Nr(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),$.resolve()):(Ai()<=mt.DEBUG&&X("QueryEngine","Query:",Nr(e),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Ai()<=mt.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",Nr(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,pn(e))):$.resolve())}ji(t,e){if(Bc(e))return $.resolve(null);let n=pn(e);return this.indexManager.getIndexType(t,n).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=za(e,null,"F"),n=pn(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{const o=ft(...s);return this.zi.getDocuments(t,o).next(l=>this.indexManager.getMinOffset(t,n).next(u=>{const c=this.Zi(e,l);return this.Xi(e,c,o,u.readTime)?this.ji(t,za(e,null,"F")):this.es(t,c,e,u)}))})))}Hi(t,e,n,r){return Bc(e)||r.isEqual(ot.min())?$.resolve(null):this.zi.getDocuments(t,n).next(s=>{const o=this.Zi(e,s);return this.Xi(e,o,n,r)?$.resolve(null):(Ai()<=mt.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Nr(e)),this.es(t,o,e,py(r,-1)).next(l=>l))})}Zi(t,e){let n=new he(Jf(t));return e.forEach((r,s)=>{Ao(t,s)&&(n=n.add(s))}),n}Xi(t,e,n,r){if(t.limit===null)return!1;if(n.size!==e.size)return!0;const s=t.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ji(t,e,n){return Ai()<=mt.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Nr(e)),this.zi.getDocumentsMatchingQuery(t,e,Qn.min(),n)}es(t,e,n,r){return this.zi.getDocumentsMatchingQuery(t,n,r).next(s=>(e.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(t,e,n,r){this.persistence=t,this.ts=e,this.serializer=r,this.ns=new jt(It),this.rs=new ai(s=>bl(s),Rl),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(n)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new D0(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ns))}}function j0(i,t,e,n){return new U0(i,t,e,n)}async function Td(i,t){const e=lt(i);return await e.persistence.runTransaction("Handle user change","readonly",n=>{let r;return e.mutationQueue.getAllMutationBatches(n).next(s=>(r=s,e._s(t),e.mutationQueue.getAllMutationBatches(n))).next(s=>{const o=[],l=[];let u=ft();for(const c of r){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of s){l.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return e.localDocuments.getDocuments(n,u).next(c=>({us:c,removedBatchIds:o,addedBatchIds:l}))})})}function z0(i,t){const e=lt(i);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const r=t.batch.keys(),s=e.os.newChangeBuffer({trackRemovals:!0});return function(l,u,c,h){const d=c.batch,m=d.keys();let g=$.resolve();return m.forEach(v=>{g=g.next(()=>h.getEntry(u,v)).next(p=>{const E=c.docVersions.get(v);kt(E!==null),p.version.compareTo(E)<0&&(d.applyToRemoteDocument(p,c),p.isValidDocument()&&(p.setReadTime(c.commitVersion),h.addEntry(p)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(u,d))}(e,n,t,s).next(()=>s.apply(n)).next(()=>e.mutationQueue.performConsistencyCheck(n)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(n,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let u=ft();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(t))).next(()=>e.localDocuments.getDocuments(n,r))})}function Ed(i){const t=lt(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Qr.getLastRemoteSnapshotVersion(e))}function q0(i,t){const e=lt(i),n=t.snapshotVersion;let r=e.ns;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=e.os.newChangeBuffer({trackRemovals:!0});r=e.ns;const l=[];t.targetChanges.forEach((h,d)=>{const m=r.get(d);if(!m)return;l.push(e.Qr.removeMatchingKeys(s,h.removedDocuments,d).next(()=>e.Qr.addMatchingKeys(s,h.addedDocuments,d)));let g=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(d)!==null?g=g.withResumeToken(Ae.EMPTY_BYTE_STRING,ot.min()).withLastLimboFreeSnapshotVersion(ot.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,n)),r=r.insert(d,g),function(p,E,b){return p.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-p.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(m,g,h)&&l.push(e.Qr.updateTargetData(s,g))});let u=On(),c=ft();if(t.documentUpdates.forEach(h=>{t.resolvedLimboDocuments.has(h)&&l.push(e.persistence.referenceDelegate.updateLimboDocument(s,h))}),l.push(G0(s,o,t.documentUpdates).next(h=>{u=h.cs,c=h.ls})),!n.isEqual(ot.min())){const h=e.Qr.getLastRemoteSnapshotVersion(s).next(d=>e.Qr.setTargetsMetadata(s,s.currentSequenceNumber,n));l.push(h)}return $.waitFor(l).next(()=>o.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(e.ns=r,s))}function G0(i,t,e){let n=ft(),r=ft();return e.forEach(s=>n=n.add(s)),t.getEntries(i,n).next(s=>{let o=On();return e.forEach((l,u)=>{const c=s.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(l)),u.isNoDocument()&&u.version.isEqual(ot.min())?(t.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(u),o=o.insert(l,u)):X("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{cs:o,ls:r}})}function H0(i,t){const e=lt(i);return e.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function K0(i,t){const e=lt(i);return e.persistence.runTransaction("Allocate target","readwrite",n=>{let r;return e.Qr.getTargetData(n,t).next(s=>s?(r=s,$.resolve(r)):e.Qr.allocateTargetId(n).next(o=>(r=new Un(t,o,"TargetPurposeListen",n.currentSequenceNumber),e.Qr.addTargetData(n,r).next(()=>r))))}).then(n=>{const r=e.ns.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.ns=e.ns.insert(n.targetId,n),e.rs.set(t,n.targetId)),n})}async function Wa(i,t,e){const n=lt(i),r=n.ns.get(t),s=e?"readwrite":"readwrite-primary";try{e||await n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!us(o))throw o;X("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}n.ns=n.ns.remove(t),n.rs.delete(r.target)}function Yc(i,t,e){const n=lt(i);let r=ot.min(),s=ft();return n.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const d=lt(u),m=d.rs.get(h);return m!==void 0?$.resolve(d.ns.get(m)):d.Qr.getTargetData(c,h)}(n,o,pn(t)).next(l=>{if(l)return r=l.lastLimboFreeSnapshotVersion,n.Qr.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>n.ts.getDocumentsMatchingQuery(o,t,e?r:ot.min(),e?s:ft())).next(l=>(W0(n,$y(t),l),{documents:l,hs:s})))}function W0(i,t,e){let n=i.ss.get(t)||ot.min();e.forEach((r,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),i.ss.set(t,n)}class Jc{constructor(){this.activeTargetIds=Gy()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Q0{constructor(){this.no=new Jc,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,n){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Jc,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ms=null;function fa(){return Ms===null?Ms=function(){return 268435456+Math.round(2147483648*Math.random())}():Ms++,"0x"+Ms.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge="WebChannelConnection";class Z0 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=n+"://"+e.host,this.So=`projects/${r}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Do(){return!1}Co(e,n,r,s,o){const l=fa(),u=this.vo(e,n.toUriEncodedString());X("RestConnection",`Sending RPC '${e}' ${l}:`,u,r);const c={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(c,s,o),this.Mo(e,u,c,r).then(h=>(X("RestConnection",`Received RPC '${e}' ${l}: `,h),h),h=>{throw Yr("RestConnection",`RPC '${e}' ${l} failed with error: `,h,"url: ",u,"request:",r),h})}xo(e,n,r,s,o,l){return this.Co(e,n,r,s,o)}Fo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+oi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}vo(e,n){const r=Y0[e];return`${this.wo}/v1/${n}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,e,n,r){const s=fa();return new Promise((o,l)=>{const u=new Of;u.setWithCredentials(!0),u.listenOnce(Nf.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case $s.NO_ERROR:const h=u.getResponseJson();X(ge,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(h)),o(h);break;case $s.TIMEOUT:X(ge,`RPC '${t}' ${s} timed out`),l(new Y(L.DEADLINE_EXCEEDED,"Request time out"));break;case $s.HTTP_ERROR:const d=u.getStatus();if(X(ge,`RPC '${t}' ${s} failed with status:`,d,"response text:",u.getResponseText()),d>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const v=function(E){const b=E.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(b)>=0?b:L.UNKNOWN}(g.status);l(new Y(v,g.message))}else l(new Y(L.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Y(L.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{X(ge,`RPC '${t}' ${s} completed.`)}});const c=JSON.stringify(r);X(ge,`RPC '${t}' ${s} sending request:`,r),u.send(e,"POST",c,n,15)})}Oo(t,e,n){const r=fa(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=$f(),l=Lf(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new Mf({})),this.Fo(u.initMessageHeaders,e,n),u.encodeInitMessageHeaders=!0;const h=s.join("");X(ge,`Creating RPC '${t}' stream ${r}: ${h}`,u);const d=o.createWebChannel(h,u);let m=!1,g=!1;const v=new J0({lo:E=>{g?X(ge,`Not sending because RPC '${t}' stream ${r} is closed:`,E):(m||(X(ge,`Opening RPC '${t}' stream ${r} transport.`),d.open(),m=!0),X(ge,`RPC '${t}' stream ${r} sending:`,E),d.send(E))},ho:()=>d.close()}),p=(E,b,S)=>{E.listen(b,C=>{try{S(C)}catch(D){setTimeout(()=>{throw D},0)}})};return p(d,Pi.EventType.OPEN,()=>{g||(X(ge,`RPC '${t}' stream ${r} transport opened.`),v.mo())}),p(d,Pi.EventType.CLOSE,()=>{g||(g=!0,X(ge,`RPC '${t}' stream ${r} transport closed`),v.po())}),p(d,Pi.EventType.ERROR,E=>{g||(g=!0,Yr(ge,`RPC '${t}' stream ${r} transport errored:`,E),v.po(new Y(L.UNAVAILABLE,"The operation could not be completed")))}),p(d,Pi.EventType.MESSAGE,E=>{var b;if(!g){const S=E.data[0];kt(!!S);const C=S,D=C.error||((b=C[0])===null||b===void 0?void 0:b.error);if(D){X(ge,`RPC '${t}' stream ${r} received error:`,D);const V=D.status;let O=function(T){const R=Xt[T];if(R!==void 0)return cd(R)}(V),w=D.message;O===void 0&&(O=L.INTERNAL,w="Unknown error status: "+V+" with message "+D.message),g=!0,v.po(new Y(O,w)),d.close()}else X(ge,`RPC '${t}' stream ${r} received:`,S),v.yo(S)}}),p(l,Ff.STAT_EVENT,E=>{E.stat===La.PROXY?X(ge,`RPC '${t}' stream ${r} detected buffering proxy`):E.stat===La.NOPROXY&&X(ge,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{v.fo()},0),v}}function da(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function So(i){return new c0(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(t,e,n=1e3,r=1.5,s=6e4){this.oi=t,this.timerId=e,this.No=n,this.Lo=r,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const e=Math.floor(this.ko+this.Uo()),n=Math.max(0,Date.now()-this.Qo),r=Math.max(0,e-n);r>0&&X("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(t,e,n,r,s,o,l,u){this.oi=t,this.Go=n,this.zo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new wd(t,e)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,e){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():e&&e.code===L.RESOURCE_EXHAUSTED?(xn(e.toString()),xn("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):e&&e.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(e)}__(){}auth(){this.state=1;const t=this.a_(this.jo),e=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,r])=>{this.jo===e&&this.u_(n,r)},n=>{t(()=>{const r=new Y(L.UNKNOWN,"Fetching auth token failed: "+n.message);return this.c_(r)})})}u_(t,e){const n=this.a_(this.jo);this.stream=this.l_(t,e),this.stream.Po(()=>{n(()=>this.listener.Po())}),this.stream.To(()=>{n(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{n(()=>this.c_(r))}),this.stream.onMessage(r=>{n(()=>this.onMessage(r))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return X("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return e=>{this.oi.enqueueAndForget(()=>this.jo===t?e():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tv extends Id{constructor(t,e,n,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,o),this.serializer=s}l_(t,e){return this.connection.Oo("Listen",t,e)}onMessage(t){this.Yo.reset();const e=d0(this.serializer,t),n=function(s){if(!("targetChange"in s))return ot.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ot.min():o.readTime?gn(o.readTime):ot.min()}(t);return this.listener.h_(e,n)}P_(t){const e={};e.database=Ka(this.serializer),e.addTarget=function(s,o){let l;const u=o.target;if(l=ja(u)?{documents:p0(s,u)}:{query:g0(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=dd(s,o.resumeToken);const c=qa(s,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(ot.min())>0){l.readTime=uo(s,o.snapshotVersion.toTimestamp());const c=qa(s,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,t);const n=v0(this.serializer,t);n&&(e.labels=n),this.i_(e)}I_(t){const e={};e.database=Ka(this.serializer),e.removeTarget=t,this.i_(e)}}class ev extends Id{constructor(t,e,n,r,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,e){return this.connection.Oo("Write",t,e)}onMessage(t){if(kt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const e=m0(t.writeResults,t.commitTime),n=gn(t.commitTime);return this.listener.A_(n,e)}return kt(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=Ka(this.serializer),this.i_(t)}d_(t){const e={streamToken:this.lastStreamToken,writes:t.map(n=>_0(this.serializer,n))};this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv extends class{}{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new Y(L.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,e,n,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,Ga(e,n),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(L.UNKNOWN,s.toString())})}xo(t,e,n,r,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.xo(t,Ga(e,n),r,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(L.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class rv{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(xn(e),this.y_=!1):X("OnlineStateTracker",e)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(t,e,n,r,s){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{n.enqueueAndForget(async()=>{Sr(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=lt(u);c.M_.add(4),await fs(c),c.N_.set("Unknown"),c.M_.delete(4),await Co(c)}(this))})}),this.N_=new rv(n,r)}}async function Co(i){if(Sr(i))for(const t of i.x_)await t(!0)}async function fs(i){for(const t of i.x_)await t(!1)}function Ad(i,t){const e=lt(i);e.F_.has(t.targetId)||(e.F_.set(t.targetId,t),Fl(e)?Nl(e):li(e).Xo()&&Ml(e,t))}function Ol(i,t){const e=lt(i),n=li(e);e.F_.delete(t),n.Xo()&&bd(e,t),e.F_.size===0&&(n.Xo()?n.n_():Sr(e)&&e.N_.set("Unknown"))}function Ml(i,t){if(i.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ot.min())>0){const e=i.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}li(i).P_(t)}function bd(i,t){i.L_.xe(t),li(i).I_(t)}function Nl(i){i.L_=new o0({getRemoteKeysForTarget:t=>i.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>i.F_.get(t)||null,tt:()=>i.datastore.serializer.databaseId}),li(i).start(),i.N_.w_()}function Fl(i){return Sr(i)&&!li(i).Zo()&&i.F_.size>0}function Sr(i){return lt(i).M_.size===0}function Rd(i){i.L_=void 0}async function sv(i){i.N_.set("Online")}async function ov(i){i.F_.forEach((t,e)=>{Ml(i,t)})}async function av(i,t){Rd(i),Fl(i)?(i.N_.D_(t),Nl(i)):i.N_.set("Unknown")}async function lv(i,t,e){if(i.N_.set("Online"),t instanceof fd&&t.state===2&&t.cause)try{await async function(r,s){const o=s.cause;for(const l of s.targetIds)r.F_.has(l)&&(await r.remoteSyncer.rejectListen(l,o),r.F_.delete(l),r.L_.removeTarget(l))}(i,t)}catch(n){X("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await co(i,n)}else if(t instanceof js?i.L_.Ke(t):t instanceof hd?i.L_.He(t):i.L_.We(t),!e.isEqual(ot.min()))try{const n=await Ed(i.localStore);e.compareTo(n)>=0&&await function(s,o){const l=s.L_.rt(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.F_.get(c);h&&s.F_.set(c,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const h=s.F_.get(u);if(!h)return;s.F_.set(u,h.withResumeToken(Ae.EMPTY_BYTE_STRING,h.snapshotVersion)),bd(s,u);const d=new Un(h.target,u,c,h.sequenceNumber);Ml(s,d)}),s.remoteSyncer.applyRemoteEvent(l)}(i,e)}catch(n){X("RemoteStore","Failed to raise snapshot:",n),await co(i,n)}}async function co(i,t,e){if(!us(t))throw t;i.M_.add(1),await fs(i),i.N_.set("Offline"),e||(e=()=>Ed(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await e(),i.M_.delete(1),await Co(i)})}function Pd(i,t){return t().catch(e=>co(i,e,t))}async function Do(i){const t=lt(i),e=Yn(t);let n=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;uv(t);)try{const r=await H0(t.localStore,n);if(r===null){t.v_.length===0&&e.n_();break}n=r.batchId,cv(t,r)}catch(r){await co(t,r)}Sd(t)&&Cd(t)}function uv(i){return Sr(i)&&i.v_.length<10}function cv(i,t){i.v_.push(t);const e=Yn(i);e.Xo()&&e.E_&&e.d_(t.mutations)}function Sd(i){return Sr(i)&&!Yn(i).Zo()&&i.v_.length>0}function Cd(i){Yn(i).start()}async function hv(i){Yn(i).V_()}async function fv(i){const t=Yn(i);for(const e of i.v_)t.d_(e.mutations)}async function dv(i,t,e){const n=i.v_.shift(),r=Sl.from(n,t,e);await Pd(i,()=>i.remoteSyncer.applySuccessfulWrite(r)),await Do(i)}async function _v(i,t){t&&Yn(i).E_&&await async function(n,r){if(function(o){return r0(o)&&o!==L.ABORTED}(r.code)){const s=n.v_.shift();Yn(n).t_(),await Pd(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Do(n)}}(i,t),Sd(i)&&Cd(i)}async function th(i,t){const e=lt(i);e.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const n=Sr(e);e.M_.add(3),await fs(e),n&&e.N_.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.M_.delete(3),await Co(e)}async function mv(i,t){const e=lt(i);t?(e.M_.delete(2),await Co(e)):t||(e.M_.add(2),await fs(e),e.N_.set("Unknown"))}function li(i){return i.B_||(i.B_=function(e,n,r){const s=lt(e);return s.f_(),new tv(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{Po:sv.bind(null,i),To:ov.bind(null,i),Ao:av.bind(null,i),h_:lv.bind(null,i)}),i.x_.push(async t=>{t?(i.B_.t_(),Fl(i)?Nl(i):i.N_.set("Unknown")):(await i.B_.stop(),Rd(i))})),i.B_}function Yn(i){return i.k_||(i.k_=function(e,n,r){const s=lt(e);return s.f_(),new ev(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{Po:()=>Promise.resolve(),To:hv.bind(null,i),Ao:_v.bind(null,i),R_:fv.bind(null,i),A_:dv.bind(null,i)}),i.x_.push(async t=>{t?(i.k_.t_(),await Do(i)):(await i.k_.stop(),i.v_.length>0&&(X("RemoteStore",`Stopping write stream with ${i.v_.length} pending writes`),i.v_=[]))})),i.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(t,e,n,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Pn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,r,s){const o=Date.now()+n,l=new Ll(t,e,o,r,s);return l.start(n),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(L.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $l(i,t){if(xn("AsyncQueue",`${t}: ${i}`),us(i))return new Y(L.UNAVAILABLE,`${t}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(t){this.comparator=t?(e,n)=>t(e,n)||rt.comparator(e.key,n.key):(e,n)=>rt.comparator(e.key,n.key),this.keyedMap=Si(),this.sortedSet=new jt(this.comparator)}static emptySet(t){return new Gr(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,n)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof Gr)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=n.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){const n=new Gr;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(){this.q_=new jt(rt.comparator)}track(t){const e=t.doc.key,n=this.q_.get(e);n?t.type!==0&&n.type===3?this.q_=this.q_.insert(e,t):t.type===3&&n.type!==1?this.q_=this.q_.insert(e,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.q_=this.q_.insert(e,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.q_=this.q_.remove(e):t.type===1&&n.type===2?this.q_=this.q_.insert(e,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.q_=this.q_.insert(e,{type:2,doc:t.doc}):st():this.q_=this.q_.insert(e,t)}Q_(){const t=[];return this.q_.inorderTraversal((e,n)=>{t.push(n)}),t}}class ni{constructor(t,e,n,r,s,o,l,u,c){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(t,e,n,r,s){const o=[];return e.forEach(l=>{o.push({type:0,doc:l})}),new ni(t,e,Gr.emptySet(e),o,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Io(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class gv{constructor(){this.queries=new ai(t=>Yf(t),Io),this.onlineState="Unknown",this.z_=new Set}}async function Bl(i,t){const e=lt(i);let n=3;const r=t.query;let s=e.queries.get(r);s?!s.W_()&&t.G_()&&(n=2):(s=new pv,n=t.G_()?0:1);try{switch(n){case 0:s.K_=await e.onListen(r,!0);break;case 1:s.K_=await e.onListen(r,!1);break;case 2:await e.onFirstRemoteStoreListen(r)}}catch(o){const l=$l(o,`Initialization of query '${Nr(t.query)}' failed`);return void t.onError(l)}e.queries.set(r,s),s.U_.push(t),t.j_(e.onlineState),s.K_&&t.H_(s.K_)&&jl(e)}async function Ul(i,t){const e=lt(i),n=t.query;let r=3;const s=e.queries.get(n);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?r=t.G_()?0:1:!s.W_()&&t.G_()&&(r=2))}switch(r){case 0:return e.queries.delete(n),e.onUnlisten(n,!0);case 1:return e.queries.delete(n),e.onUnlisten(n,!1);case 2:return e.onLastRemoteStoreUnlisten(n);default:return}}function yv(i,t){const e=lt(i);let n=!1;for(const r of t){const s=r.query,o=e.queries.get(s);if(o){for(const l of o.U_)l.H_(r)&&(n=!0);o.K_=r}}n&&jl(e)}function vv(i,t,e){const n=lt(i),r=n.queries.get(t);if(r)for(const s of r.U_)s.onError(e);n.queries.delete(t)}function jl(i){i.z_.forEach(t=>{t.next()})}var Qa,nh;(nh=Qa||(Qa={})).J_="default",nh.Cache="cache";class zl{constructor(t,e,n){this.query=t,this.Y_=e,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=n||{}}H_(t){if(!this.options.includeMetadataChanges){const n=[];for(const r of t.docChanges)r.type!==3&&n.push(r);t=new ni(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),e=!0):this.ta(t,this.onlineState)&&(this.na(t),e=!0),this.X_=t,e}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let e=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),e=!0),e}ta(t,e){if(!t.fromCache||!this.G_())return!0;const n=e!=="Offline";return(!this.options.ra||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const e=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}na(t){t=ni.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==Qa.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(t){this.key=t}}class kd{constructor(t){this.key=t}}class Tv{constructor(t,e){this.query=t,this.la=e,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=ft(),this.mutatedKeys=ft(),this.Ia=Jf(t),this.Ta=new Gr(this.Ia)}get Ea(){return this.la}da(t,e){const n=e?e.Aa:new eh,r=e?e.Ta:this.Ta;let s=e?e.mutatedKeys:this.mutatedKeys,o=r,l=!1;const u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((h,d)=>{const m=r.get(h),g=Ao(this.query,d)?d:null,v=!!m&&this.mutatedKeys.has(m.key),p=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let E=!1;m&&g?m.data.isEqual(g.data)?v!==p&&(n.track({type:3,doc:g}),E=!0):this.Ra(m,g)||(n.track({type:2,doc:g}),E=!0,(u&&this.Ia(g,u)>0||c&&this.Ia(g,c)<0)&&(l=!0)):!m&&g?(n.track({type:0,doc:g}),E=!0):m&&!g&&(n.track({type:1,doc:m}),E=!0,(u||c)&&(l=!0)),E&&(g?(o=o.add(g),s=p?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),n.track({type:1,doc:h})}return{Ta:o,Aa:n,Xi:l,mutatedKeys:s}}Ra(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,r){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((h,d)=>function(g,v){const p=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return p(g)-p(v)}(h.type,d.type)||this.Ia(h.doc,d.doc)),this.Va(n),r=r!=null&&r;const l=e&&!r?this.ma():[],u=this.Pa.size===0&&this.current&&!r?1:0,c=u!==this.ha;return this.ha=u,o.length!==0||c?{snapshot:new ni(this.query,t.Ta,s,o,t.mutatedKeys,u===0,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),fa:l}:{fa:l}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new eh,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(e=>this.la=this.la.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.la=this.la.delete(e)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=ft(),this.Ta.forEach(n=>{this.ga(n.key)&&(this.Pa=this.Pa.add(n.key))});const e=[];return t.forEach(n=>{this.Pa.has(n)||e.push(new kd(n))}),this.Pa.forEach(n=>{t.has(n)||e.push(new Dd(n))}),e}pa(t){this.la=t.hs,this.Pa=ft();const e=this.da(t.documents);return this.applyChanges(e,!0)}ya(){return ni.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class Ev{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class wv{constructor(t){this.key=t,this.wa=!1}}class Iv{constructor(t,e,n,r,s,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new ai(l=>Yf(l),Io),this.Da=new Map,this.Ca=new Set,this.va=new jt(rt.comparator),this.Fa=new Map,this.Ma=new kl,this.xa={},this.Oa=new Map,this.Na=ei.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function Av(i,t,e=!0){const n=Fd(i);let r;const s=n.ba.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ya()):r=await Vd(n,t,e,!0),r}async function bv(i,t){const e=Fd(i);await Vd(e,t,!0,!1)}async function Vd(i,t,e,n){const r=await K0(i.localStore,pn(t)),s=r.targetId,o=e?i.sharedClientState.addLocalQueryTarget(s):"not-current";let l;return n&&(l=await Rv(i,t,s,o==="current",r.resumeToken)),i.isPrimaryClient&&e&&Ad(i.remoteStore,r),l}async function Rv(i,t,e,n,r){i.Ba=(d,m,g)=>async function(p,E,b,S){let C=E.view.da(b);C.Xi&&(C=await Yc(p.localStore,E.query,!1).then(({documents:w})=>E.view.da(w,C)));const D=S&&S.targetChanges.get(E.targetId),V=S&&S.targetMismatches.get(E.targetId)!=null,O=E.view.applyChanges(C,p.isPrimaryClient,D,V);return ih(p,E.targetId,O.fa),O.snapshot}(i,d,m,g);const s=await Yc(i.localStore,t,!0),o=new Tv(t,s.hs),l=o.da(s.documents),u=hs.createSynthesizedTargetChangeForCurrentChange(e,n&&i.onlineState!=="Offline",r),c=o.applyChanges(l,i.isPrimaryClient,u);ih(i,e,c.fa);const h=new Ev(t,e,o);return i.ba.set(t,h),i.Da.has(e)?i.Da.get(e).push(t):i.Da.set(e,[t]),c.snapshot}async function Pv(i,t,e){const n=lt(i),r=n.ba.get(t),s=n.Da.get(r.targetId);if(s.length>1)return n.Da.set(r.targetId,s.filter(o=>!Io(o,t))),void n.ba.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Wa(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),e&&Ol(n.remoteStore,r.targetId),Xa(n,r.targetId)}).catch(ls)):(Xa(n,r.targetId),await Wa(n.localStore,r.targetId,!0))}async function Sv(i,t){const e=lt(i),n=e.ba.get(t),r=e.Da.get(n.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(n.targetId),Ol(e.remoteStore,n.targetId))}async function Cv(i,t,e){const n=Nv(i);try{const r=await function(o,l){const u=lt(o),c=ee.now(),h=l.reduce((g,v)=>g.add(v.key),ft());let d,m;return u.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=On(),p=ft();return u.os.getEntries(g,h).next(E=>{v=E,v.forEach((b,S)=>{S.isValidDocument()||(p=p.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(g,v)).next(E=>{d=E;const b=[];for(const S of l){const C=Jy(S,d.get(S.key).overlayedDocument);C!=null&&b.push(new tr(S.key,C,qf(C.value.mapValue),He.exists(!0)))}return u.mutationQueue.addMutationBatch(g,c,b,l)}).next(E=>{m=E;const b=E.applyToLocalDocumentSet(d,p);return u.documentOverlayCache.saveOverlays(g,E.batchId,b)})}).then(()=>({batchId:m.batchId,changes:td(d)}))}(n.localStore,t);n.sharedClientState.addPendingMutation(r.batchId),function(o,l,u){let c=o.xa[o.currentUser.toKey()];c||(c=new jt(It)),c=c.insert(l,u),o.xa[o.currentUser.toKey()]=c}(n,r.batchId,e),await ds(n,r.changes),await Do(n.remoteStore)}catch(r){const s=$l(r,"Failed to persist write");e.reject(s)}}async function xd(i,t){const e=lt(i);try{const n=await q0(e.localStore,t);t.targetChanges.forEach((r,s)=>{const o=e.Fa.get(s);o&&(kt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.wa=!0:r.modifiedDocuments.size>0?kt(o.wa):r.removedDocuments.size>0&&(kt(o.wa),o.wa=!1))}),await ds(e,n,t)}catch(n){await ls(n)}}function rh(i,t,e){const n=lt(i);if(n.isPrimaryClient&&e===0||!n.isPrimaryClient&&e===1){const r=[];n.ba.forEach((s,o)=>{const l=o.view.j_(t);l.snapshot&&r.push(l.snapshot)}),function(o,l){const u=lt(o);u.onlineState=l;let c=!1;u.queries.forEach((h,d)=>{for(const m of d.U_)m.j_(l)&&(c=!0)}),c&&jl(u)}(n.eventManager,t),r.length&&n.Sa.h_(r),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}async function Dv(i,t,e){const n=lt(i);n.sharedClientState.updateQueryState(t,"rejected",e);const r=n.Fa.get(t),s=r&&r.key;if(s){let o=new jt(rt.comparator);o=o.insert(s,Te.newNoDocument(s,ot.min()));const l=ft().add(s),u=new Po(ot.min(),new Map,new jt(It),o,l);await xd(n,u),n.va=n.va.remove(s),n.Fa.delete(t),ql(n)}else await Wa(n.localStore,t,!1).then(()=>Xa(n,t,e)).catch(ls)}async function kv(i,t){const e=lt(i),n=t.batch.batchId;try{const r=await z0(e.localStore,t);Md(e,n,null),Od(e,n),e.sharedClientState.updateMutationState(n,"acknowledged"),await ds(e,r)}catch(r){await ls(r)}}async function Vv(i,t,e){const n=lt(i);try{const r=await function(o,l){const u=lt(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,l).next(d=>(kt(d!==null),h=d.keys(),u.mutationQueue.removeMutationBatch(c,d))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(n.localStore,t);Md(n,t,e),Od(n,t),n.sharedClientState.updateMutationState(t,"rejected",e),await ds(n,r)}catch(r){await ls(r)}}function Od(i,t){(i.Oa.get(t)||[]).forEach(e=>{e.resolve()}),i.Oa.delete(t)}function Md(i,t,e){const n=lt(i);let r=n.xa[n.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),n.xa[n.currentUser.toKey()]=r}}function Xa(i,t,e=null){i.sharedClientState.removeLocalQueryTarget(t);for(const n of i.Da.get(t))i.ba.delete(n),e&&i.Sa.ka(n,e);i.Da.delete(t),i.isPrimaryClient&&i.Ma.Vr(t).forEach(n=>{i.Ma.containsKey(n)||Nd(i,n)})}function Nd(i,t){i.Ca.delete(t.path.canonicalString());const e=i.va.get(t);e!==null&&(Ol(i.remoteStore,e),i.va=i.va.remove(t),i.Fa.delete(e),ql(i))}function ih(i,t,e){for(const n of e)n instanceof Dd?(i.Ma.addReference(n.key,t),xv(i,n)):n instanceof kd?(X("SyncEngine","Document no longer in limbo: "+n.key),i.Ma.removeReference(n.key,t),i.Ma.containsKey(n.key)||Nd(i,n.key)):st()}function xv(i,t){const e=t.key,n=e.path.canonicalString();i.va.get(e)||i.Ca.has(n)||(X("SyncEngine","New document in limbo: "+e),i.Ca.add(n),ql(i))}function ql(i){for(;i.Ca.size>0&&i.va.size<i.maxConcurrentLimboResolutions;){const t=i.Ca.values().next().value;i.Ca.delete(t);const e=new rt(Nt.fromString(t)),n=i.Na.next();i.Fa.set(n,new wv(e)),i.va=i.va.insert(e,n),Ad(i.remoteStore,new Un(pn(wo(e.path)),n,"TargetPurposeLimboResolution",El.oe))}}async function ds(i,t,e){const n=lt(i),r=[],s=[],o=[];n.ba.isEmpty()||(n.ba.forEach((l,u)=>{o.push(n.Ba(u,t,e).then(c=>{if((c||e)&&n.isPrimaryClient){const h=c&&!c.fromCache;n.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(c){r.push(c);const h=xl.Ki(u.targetId,c);s.push(h)}}))}),await Promise.all(o),n.Sa.h_(r),await async function(u,c){const h=lt(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>$.forEach(c,m=>$.forEach(m.qi,g=>h.persistence.referenceDelegate.addReference(d,m.targetId,g)).next(()=>$.forEach(m.Qi,g=>h.persistence.referenceDelegate.removeReference(d,m.targetId,g)))))}catch(d){if(!us(d))throw d;X("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const m=d.targetId;if(!d.fromCache){const g=h.ns.get(m),v=g.snapshotVersion,p=g.withLastLimboFreeSnapshotVersion(v);h.ns=h.ns.insert(m,p)}}}(n.localStore,s))}async function Ov(i,t){const e=lt(i);if(!e.currentUser.isEqual(t)){X("SyncEngine","User change. New user:",t.toKey());const n=await Td(e.localStore,t);e.currentUser=t,function(s,o){s.Oa.forEach(l=>{l.forEach(u=>{u.reject(new Y(L.CANCELLED,o))})}),s.Oa.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),await ds(e,n.us)}}function Mv(i,t){const e=lt(i),n=e.Fa.get(t);if(n&&n.wa)return ft().add(n.key);{let r=ft();const s=e.Da.get(t);if(!s)return r;for(const o of s){const l=e.ba.get(o);r=r.unionWith(l.view.Ea)}return r}}function Fd(i){const t=lt(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=xd.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Dv.bind(null,t),t.Sa.h_=yv.bind(null,t.eventManager),t.Sa.ka=vv.bind(null,t.eventManager),t}function Nv(i){const t=lt(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=kv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Vv.bind(null,t),t}class sh{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=So(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return j0(this.persistence,new B0,t.initialUser,this.serializer)}createPersistence(t){return new F0(Vl.Hr,this.serializer)}createSharedClientState(t){return new Q0}async terminate(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Fv{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>rh(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ov.bind(null,this.syncEngine),await mv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new gv}()}createDatastore(t){const e=So(t.databaseInfo.databaseId),n=function(s){return new Z0(s)}(t.databaseInfo);return function(s,o,l,u){return new nv(s,o,l,u)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(n,r,s,o,l){return new iv(n,r,s,o,l)}(this.localStore,this.datastore,t.asyncQueue,e=>rh(this.syncEngine,e,0),function(){return Zc.D()?new Zc:new X0}())}createSyncEngine(t,e){return function(r,s,o,l,u,c,h){const d=new Iv(r,s,o,l,u,c);return h&&(d.La=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t;await async function(n){const r=lt(n);X("RemoteStore","RemoteStore shutting down."),r.M_.add(5),await fs(r),r.O_.shutdown(),r.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):xn("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(t,e,n,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=ve.UNAUTHENTICATED,this.clientId=Uf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async s=>{X("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(n,s=>(X("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Y(L.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Pn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=$l(e,"Failed to shutdown persistence");t.reject(n)}}),t.promise}}async function _a(i,t){i.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const e=i.configuration;await t.initialize(e);let n=e.initialUser;i.setCredentialChangeListener(async r=>{n.isEqual(r)||(await Td(t.localStore,r),n=r)}),t.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=t}async function oh(i,t){i.asyncQueue.verifyOperationInProgress();const e=await Bv(i);X("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(e,i.configuration),i.setCredentialChangeListener(n=>th(t.remoteStore,n)),i.setAppCheckTokenChangeListener((n,r)=>th(t.remoteStore,r)),i._onlineComponents=t}function $v(i){return i.name==="FirebaseError"?i.code===L.FAILED_PRECONDITION||i.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}async function Bv(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await _a(i,i._uninitializedComponentsProvider._offline)}catch(t){const e=t;if(!$v(e))throw e;Yr("Error using user provided cache. Falling back to memory cache: "+e),await _a(i,new sh)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await _a(i,new sh);return i._offlineComponents}async function Ld(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await oh(i,i._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await oh(i,new Fv))),i._onlineComponents}function Uv(i){return Ld(i).then(t=>t.syncEngine)}async function ho(i){const t=await Ld(i),e=t.eventManager;return e.onListen=Av.bind(null,t.syncEngine),e.onUnlisten=Pv.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=bv.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=Sv.bind(null,t.syncEngine),e}function jv(i,t,e={}){const n=new Pn;return i.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const h=new Gl({next:m=>{o.enqueueAndForget(()=>Ul(s,d));const g=m.docs.has(l);!g&&m.fromCache?c.reject(new Y(L.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&u&&u.source==="server"?c.reject(new Y(L.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),d=new zl(wo(l.path),h,{includeMetadataChanges:!0,ra:!0});return Bl(s,d)}(await ho(i),i.asyncQueue,t,e,n)),n.promise}function zv(i,t,e={}){const n=new Pn;return i.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const h=new Gl({next:m=>{o.enqueueAndForget(()=>Ul(s,d)),m.fromCache&&u.source==="server"?c.reject(new Y(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),d=new zl(l,h,{includeMetadataChanges:!0,ra:!0});return Bl(s,d)}(await ho(i),i.asyncQueue,t,e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(i){const t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bd(i,t,e){if(!e)throw new Y(L.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function qv(i,t,e,n){if(t===!0&&n===!0)throw new Y(L.INVALID_ARGUMENT,`${i} and ${e} cannot be used together.`)}function lh(i){if(!rt.isDocumentKey(i))throw new Y(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function uh(i){if(rt.isDocumentKey(i))throw new Y(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Hl(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const t=function(n){return n.constructor?n.constructor.name:null}(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":st()}function Ke(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new Y(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=Hl(i);throw new Y(L.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(t){var e,n;if(t.host===void 0){if(t.ssl!==void 0)throw new Y(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Y(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}qv("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$d((n=t.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Y(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Y(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Y(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(n,r){return n.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class ko{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ch({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Y(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new Y(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ch(t),t.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new ay;switch(n.type){case"firstParty":return new hy(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Y(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=ah.get(e);n&&(X("ComponentProvider","Removing Datastore"),ah.delete(e),n.terminate())}(this),Promise.resolve()}}function Gv(i,t,e,n={}){var r;const s=(i=Ke(i,ko))._getSettings(),o=`${t}:${e}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Yr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),n.mockUserToken){let l,u;if(typeof n.mockUserToken=="string")l=n.mockUserToken,u=ve.MOCK_USER;else{l=Up(n.mockUserToken,(r=i._app)===null||r===void 0?void 0:r.options.projectId);const c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new Y(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ve(c)}i._authCredentials=new ly(new Bf(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new _s(this.firestore,t,this._query)}}class Se{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Se(this.firestore,t,this._key)}}class Hn extends _s{constructor(t,e,n){super(t,e,wo(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Se(this.firestore,null,new rt(t))}withConverter(t){return new Hn(this.firestore,t,this._path)}}function es(i,t,...e){if(i=cn(i),Bd("collection","path",t),i instanceof ko){const n=Nt.fromString(t,...e);return uh(n),new Hn(i,null,n)}{if(!(i instanceof Se||i instanceof Hn))throw new Y(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Nt.fromString(t,...e));return uh(n),new Hn(i.firestore,null,n)}}function Ya(i,t,...e){if(i=cn(i),arguments.length===1&&(t=Uf.newId()),Bd("doc","path",t),i instanceof ko){const n=Nt.fromString(t,...e);return lh(n),new Se(i,null,new rt(n))}{if(!(i instanceof Se||i instanceof Hn))throw new Y(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=i._path.child(Nt.fromString(t,...e));return lh(n),new Se(i.firestore,i instanceof Hn?i.converter:null,new rt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new wd(this,"async_queue_retry"),this.hu=()=>{const e=da();e&&X("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Yo.Wo()};const t=da();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const e=da();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const e=new Pn;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!us(t))throw t;X("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const e=this.iu.then(()=>(this.uu=!0,t().catch(n=>{this.au=n,this.uu=!1;const r=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(n);throw xn("INTERNAL UNHANDLED ERROR: ",r),n}).then(n=>(this.uu=!1,n))));return this.iu=e,e}enqueueAfterDelay(t,e,n){this.Pu(),this.lu.indexOf(t)>-1&&(e=0);const r=Ll.createAndSchedule(this,t,e,n,s=>this.Eu(s));return this._u.push(r),r}Pu(){this.au&&st()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const e of this._u)if(e.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((e,n)=>e.targetTimeMs-n.targetTimeMs);for(const e of this._u)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const e=this._u.indexOf(t);this._u.splice(e,1)}}function hh(i){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const s of n)if(s in r&&typeof r[s]=="function")return!0;return!1}(i,["next","error","complete"])}class Jn extends ko{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=function(){return new Hv}(),this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ud(this),this._firestoreClient.terminate()}}function Kv(i,t){const e=typeof i=="object"?i:Qg(),n=typeof i=="string"?i:"(default)",r=Gg(e,"firestore").getImmediate({identifier:n});if(!r._initialized){const s=$p("firestore");s&&Gv(r,...s)}return r}function ms(i){return i._firestoreClient||Ud(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Ud(i){var t,e,n;const r=i._freezeSettings(),s=function(l,u,c,h){return new Ay(l,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,$d(h.experimentalLongPollingOptions),h.useFetchStreams)}(i._databaseId,((t=i._app)===null||t===void 0?void 0:t.options.appId)||"",i._persistenceKey,r);i._firestoreClient=new Lv(i._authCredentials,i._appCheckCredentials,i._queue,s),!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((n=r.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(t){this._byteString=t}static fromBase64String(t){try{return new ri(Ae.fromBase64String(t))}catch(e){throw new Y(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new ri(Ae.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new Y(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ue(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new Y(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Y(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return It(this._lat,t._lat)||It(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv=/^__.*__$/;class Qv{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return this.fieldMask!==null?new tr(t,this.data,this.fieldMask,e,this.fieldTransforms):new cs(t,this.data,e,this.fieldTransforms)}}class jd{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new tr(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function zd(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class Ql{constructor(t,e,n,r,s,o){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=r,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new Ql(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var e;const n=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.gu({path:n,yu:!1});return r.wu(t),r}Su(t){var e;const n=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.gu({path:n,yu:!1});return r.mu(),r}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return fo(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(zd(this.fu)&&Wv.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class Xv{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||So(t)}Fu(t,e,n,r=!1){return new Ql({fu:t,methodName:e,vu:n,path:ue.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Xl(i){const t=i._freezeSettings(),e=So(i._databaseId);return new Xv(i._databaseId,!!t.ignoreUndefinedProperties,e)}function qd(i,t,e,n,r,s={}){const o=i.Fu(s.merge||s.mergeFields?2:0,t,e,r);Yl("Data must be an object, but it was:",o,n);const l=Kd(n,o);let u,c;if(s.merge)u=new qe(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const m=Ja(t,d,e);if(!o.contains(m))throw new Y(L.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Qd(h,m)||h.push(m)}u=new qe(h),c=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=o.fieldTransforms;return new Qv(new De(l),u,c)}class Vo extends Kl{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Vo}}function Gd(i,t,e,n){const r=i.Fu(1,t,e);Yl("Data must be an object, but it was:",r,n);const s=[],o=De.empty();Pr(n,(u,c)=>{const h=Jl(t,u,e);c=cn(c);const d=r.Su(h);if(c instanceof Vo)s.push(h);else{const m=xo(c,d);m!=null&&(s.push(h),o.set(h,m))}});const l=new qe(s);return new jd(o,l,r.fieldTransforms)}function Hd(i,t,e,n,r,s){const o=i.Fu(1,t,e),l=[Ja(t,n,e)],u=[r];if(s.length%2!=0)throw new Y(L.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)l.push(Ja(t,s[m])),u.push(s[m+1]);const c=[],h=De.empty();for(let m=l.length-1;m>=0;--m)if(!Qd(c,l[m])){const g=l[m];let v=u[m];v=cn(v);const p=o.Su(g);if(v instanceof Vo)c.push(g);else{const E=xo(v,p);E!=null&&(c.push(g),h.set(g,E))}}const d=new qe(c);return new jd(h,d,o.fieldTransforms)}function xo(i,t){if(Wd(i=cn(i)))return Yl("Unsupported field value:",t,i),Kd(i,t);if(i instanceof Kl)return function(n,r){if(!zd(r.fu))throw r.Du(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(n,r){const s=[];let o=0;for(const l of n){let u=xo(l,r.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(i,t)}return function(n,r){if((n=cn(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Hy(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=ee.fromDate(n);return{timestampValue:uo(r.serializer,s)}}if(n instanceof ee){const s=new ee(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:uo(r.serializer,s)}}if(n instanceof Wl)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ri)return{bytesValue:dd(r.serializer,n._byteString)};if(n instanceof Se){const s=r.databaseId,o=n.firestore._databaseId;if(!o.isEqual(s))throw r.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Dl(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.Du(`Unsupported field value: ${Hl(n)}`)}(i,t)}function Kd(i,t){const e={};return jf(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Pr(i,(n,r)=>{const s=xo(r,t.pu(n));s!=null&&(e[n]=s)}),{mapValue:{fields:e}}}function Wd(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof ee||i instanceof Wl||i instanceof ri||i instanceof Se||i instanceof Kl)}function Yl(i,t,e){if(!Wd(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){const n=Hl(e);throw n==="an object"?t.Du(i+" a custom object"):t.Du(i+" "+n)}}function Ja(i,t,e){if((t=cn(t))instanceof ps)return t._internalPath;if(typeof t=="string")return Jl(i,t);throw fo("Field path arguments must be of type string or ",i,!1,void 0,e)}const Yv=new RegExp("[~\\*/\\[\\]]");function Jl(i,t,e){if(t.search(Yv)>=0)throw fo(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,e);try{return new ps(...t.split("."))._internalPath}catch{throw fo(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,e)}}function fo(i,t,e,n,r){const s=n&&!n.isEmpty(),o=r!==void 0;let l=`Function ${t}() called with invalid data`;e&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${n}`),o&&(u+=` in document ${r}`),u+=")"),new Y(L.INVALID_ARGUMENT,l+i+u)}function Qd(i,t){return i.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(t,e,n,r,s){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Se(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Jv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Yd("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}}class Jv extends Xd{data(){return super.data()}}function Yd(i,t){return typeof t=="string"?Jl(i,t):t instanceof ps?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new Y(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zv{convertValue(t,e="none"){switch(Ar(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Jt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ir(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw st()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return Pr(t,(r,s)=>{n[r]=this.convertValue(s,e)}),n}convertGeoPoint(t){return new Wl(Jt(t.latitude),Jt(t.longitude))}convertArray(t,e){return(t.values||[]).map(n=>this.convertValue(n,e))}convertServerTimestamp(t,e){switch(e){case"previous":const n=Il(t);return n==null?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Xi(t));default:return null}}convertTimestamp(t){const e=Xn(t);return new ee(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=Nt.fromString(t);kt(vd(n));const r=new Yi(n.get(1),n.get(3)),s=new rt(n.popFirst(5));return r.isEqual(e)||xn(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zd(i,t,e){let n;return n=i?e&&(e.merge||e.mergeFields)?i.toFirestore(t,e):i.toFirestore(t):t,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class t_ extends Xd{constructor(t,e,n,r,s,o){super(t,e,n,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new zs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Yd("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class zs extends t_{data(t={}){return super.data(t)}}class e_{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Di(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(n=>{t.call(e,new zs(this._firestore,this._userDataWriter,n.key,n,new Di(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Y(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(l=>{const u=new zs(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Di(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new zs(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Di(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,h=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:tT(l.type),doc:u,oldIndex:c,newIndex:h}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function tT(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(i){i=Ke(i,Se);const t=Ke(i.firestore,Jn);return jv(ms(t),i._key).then(e=>r_(t,i,e))}class Zl extends Zv{constructor(t){super(),this.firestore=t}convertBytes(t){return new ri(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Se(this.firestore,null,e)}}function tu(i){i=Ke(i,_s);const t=Ke(i.firestore,Jn),e=ms(t),n=new Zl(t);return Jd(i._query),zv(e,i._query).then(r=>new e_(t,n,i,r))}function nT(i,t,e){i=Ke(i,Se);const n=Ke(i.firestore,Jn),r=Zd(i.converter,t,e);return eu(n,[qd(Xl(n),"setDoc",i._key,r,i.converter!==null,e).toMutation(i._key,He.none())])}function n_(i,t,e,...n){i=Ke(i,Se);const r=Ke(i.firestore,Jn),s=Xl(r);let o;return o=typeof(t=cn(t))=="string"||t instanceof ps?Hd(s,"updateDoc",i._key,t,e,n):Gd(s,"updateDoc",i._key,t),eu(r,[o.toMutation(i._key,He.exists(!0))])}function Za(i,...t){var e,n,r;i=cn(i);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]!="object"||hh(t[o])||(s=t[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(hh(t[o])){const d=t[o];t[o]=(e=d.next)===null||e===void 0?void 0:e.bind(d),t[o+1]=(n=d.error)===null||n===void 0?void 0:n.bind(d),t[o+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let u,c,h;if(i instanceof Se)c=Ke(i.firestore,Jn),h=wo(i._key.path),u={next:d=>{t[o]&&t[o](r_(c,i,d))},error:t[o+1],complete:t[o+2]};else{const d=Ke(i,_s);c=Ke(d.firestore,Jn),h=d._query;const m=new Zl(c);u={next:g=>{t[o]&&t[o](new e_(c,m,d,g))},error:t[o+1],complete:t[o+2]},Jd(i._query)}return function(m,g,v,p){const E=new Gl(p),b=new zl(g,E,v);return m.asyncQueue.enqueueAndForget(async()=>Bl(await ho(m),b)),()=>{E.$a(),m.asyncQueue.enqueueAndForget(async()=>Ul(await ho(m),b))}}(ms(c),h,l,u)}function eu(i,t){return function(n,r){const s=new Pn;return n.asyncQueue.enqueueAndForget(async()=>Cv(await Uv(n),r,s)),s.promise}(ms(i),t)}function r_(i,t,e){const n=e.docs.get(t._key),r=new Zl(i);return new t_(i,r,t._key,n,new Di(e.hasPendingWrites,e.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Xl(t)}set(t,e,n){this._verifyNotCommitted();const r=ma(t,this._firestore),s=Zd(r.converter,e,n),o=qd(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,n);return this._mutations.push(o.toMutation(r._key,He.none())),this}update(t,e,n,...r){this._verifyNotCommitted();const s=ma(t,this._firestore);let o;return o=typeof(e=cn(e))=="string"||e instanceof ps?Hd(this._dataReader,"WriteBatch.update",s._key,e,n,r):Gd(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,He.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=ma(t,this._firestore);return this._mutations=this._mutations.concat(new Pl(e._key,He.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Y(L.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ma(i,t){if((i=cn(i)).firestore!==t)throw new Y(L.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(i){return ms(i=Ke(i,Jn)),new rT(i,t=>eu(i,t))}(function(t,e=!0){(function(r){oi=r})(Wg),ro(new Ki("firestore",(n,{instanceIdentifier:r,options:s})=>{const o=n.getProvider("app").getImmediate(),l=new Jn(new uy(n.getProvider("auth-internal")),new dy(n.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Y(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yi(c.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:e},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),qr(kc,"4.6.3",t),qr(kc,"4.6.3","esm2017")})();const sT={apiKey:"AIzaSyDrTR0lVaKeBrqIlhJiwst2-KsEwBtE538",authDomain:"bob-game-90e47.firebaseapp.com",projectId:"bob-game-90e47",storageBucket:"bob-game-90e47.appspot.com",messagingSenderId:"880391810715",appId:"1:880391810715:web:f537e6f4c16b7412e7a03e",measurementId:"G-FL5LYSNQ76"},oT=Df(sT),Rn=Kv(oT);function fh(i){let t,e,n=Dn.start_titel+"",r,s,o,l=Dn.start_beschrijving+"",u,c,h,d,m,g,v,p,E;return d=new ce({props:{theme:"green",$$slots:{default:[aT]},$$scope:{ctx:i}}}),d.$on("click",i[2]),g=new ce({props:{href:"https://photos.app.goo.gl/aDYZgySVrSQGbZKG9",target:"_blank",$$slots:{default:[lT]},$$scope:{ctx:i}}}),p=new ce({props:{$$slots:{default:[uT]},$$scope:{ctx:i}}}),p.$on("click",i[3]),{c(){t=B("div"),e=B("h1"),r=Z(n),s=K(),o=B("p"),u=Z(l),c=K(),h=B("div"),pt(d.$$.fragment),m=K(),pt(g.$$.fragment),v=K(),pt(p.$$.fragment),this.h()},l(b){t=U(b,"DIV",{class:!0});var S=H(t);e=U(S,"H1",{class:!0});var C=H(e);r=tt(C,n),C.forEach(M),s=W(S),o=U(S,"P",{class:!0});var D=H(o);u=tt(D,l),D.forEach(M),c=W(S),h=U(S,"DIV",{class:!0});var V=H(h);gt(d.$$.fragment,V),m=W(V),gt(g.$$.fragment,V),v=W(V),gt(p.$$.fragment,V),V.forEach(M),S.forEach(M),this.h()},h(){G(e,"class","font-bold text-xl mb-2"),G(o,"class","mb-4"),G(h,"class","flex gap-x-2 justify-center"),G(t,"class","text-center")},m(b,S){z(b,t,S),F(t,e),F(e,r),F(t,s),F(t,o),F(o,u),F(t,c),F(t,h),yt(d,h,null),F(h,m),yt(g,h,null),F(h,v),yt(p,h,null),E=!0},p(b,S){const C={};S&64&&(C.$$scope={dirty:S,ctx:b}),d.$set(C);const D={};S&64&&(D.$$scope={dirty:S,ctx:b}),g.$set(D);const V={};S&64&&(V.$$scope={dirty:S,ctx:b}),p.$set(V)},i(b){E||(Q(d.$$.fragment,b),Q(g.$$.fragment,b),Q(p.$$.fragment,b),E=!0)},o(b){J(d.$$.fragment,b),J(g.$$.fragment,b),J(p.$$.fragment,b),E=!1},d(b){b&&M(t),vt(d),vt(g),vt(p)}}}function aT(i){let t;return{c(){t=Z("Start")},l(e){t=tt(e,"Start")},m(e,n){z(e,t,n)},d(e){e&&M(t)}}}function lT(i){let t;return{c(){t=Z("Achtergrond informatie")},l(e){t=tt(e,"Achtergrond informatie")},m(e,n){z(e,t,n)},d(e){e&&M(t)}}}function uT(i){let t;return{c(){t=Z("Instellingen")},l(e){t=tt(e,"Instellingen")},m(e,n){z(e,t,n)},d(e){e&&M(t)}}}function dh(i){let t,e,n="Instellingen",r,s,o,l,u,c,h,d;return o=new ce({props:{$$slots:{default:[cT]},$$scope:{ctx:i}}}),o.$on("click",i[1]),u=new ce({props:{$$slots:{default:[hT]},$$scope:{ctx:i}}}),u.$on("click",i[4]),h=new ce({props:{theme:"red",$$slots:{default:[fT]},$$scope:{ctx:i}}}),h.$on("click",i[5]),{c(){t=B("div"),e=B("p"),e.textContent=n,r=K(),s=B("div"),pt(o.$$.fragment),l=K(),pt(u.$$.fragment),c=K(),pt(h.$$.fragment),this.h()},l(m){t=U(m,"DIV",{class:!0});var g=H(t);e=U(g,"P",{class:!0,"data-svelte-h":!0}),nn(e)!=="svelte-1qfzwmq"&&(e.textContent=n),r=W(g),s=U(g,"DIV",{class:!0});var v=H(s);gt(o.$$.fragment,v),l=W(v),gt(u.$$.fragment,v),c=W(v),gt(h.$$.fragment,v),v.forEach(M),g.forEach(M),this.h()},h(){G(e,"class","font-bold text-xl mb-4"),G(s,"class","flex gap-x-2 justify-center"),G(t,"class","text-center")},m(m,g){z(m,t,g),F(t,e),F(t,r),F(t,s),yt(o,s,null),F(s,l),yt(u,s,null),F(s,c),yt(h,s,null),d=!0},p(m,g){const v={};g&64&&(v.$$scope={dirty:g,ctx:m}),o.$set(v);const p={};g&64&&(p.$$scope={dirty:g,ctx:m}),u.$set(p);const E={};g&64&&(E.$$scope={dirty:g,ctx:m}),h.$set(E)},i(m){d||(Q(o.$$.fragment,m),Q(u.$$.fragment,m),Q(h.$$.fragment,m),d=!0)},o(m){J(o.$$.fragment,m),J(u.$$.fragment,m),J(h.$$.fragment,m),d=!1},d(m){m&&M(t),vt(o),vt(u),vt(h)}}}function cT(i){let t;return{c(){t=Z("Reset sliders")},l(e){t=tt(e,"Reset sliders")},m(e,n){z(e,t,n)},d(e){e&&M(t)}}}function hT(i){let t;return{c(){t=Z("Wijzig brondata (.csv)")},l(e){t=tt(e,"Wijzig brondata (.csv)")},m(e,n){z(e,t,n)},d(e){e&&M(t)}}}function fT(i){let t;return{c(){t=Z("Terug")},l(e){t=tt(e,"Terug")},m(e,n){z(e,t,n)},d(e){e&&M(t)}}}function dT(i){let t,e,n,r,s,o,l=!i[0]&&fh(i),u=i[0]&&dh(i);return{c(){t=B("img"),n=K(),l&&l.c(),r=K(),u&&u.c(),s=Ne(),this.h()},l(c){t=U(c,"IMG",{src:!0,alt:!0,class:!0}),n=W(c),l&&l.l(c),r=W(c),u&&u.l(c),s=Ne(),this.h()},h(){V_(t.src,e=Cp)||G(t,"src",e),G(t,"alt","Logo van de BOB-Game"),G(t,"class","w-48")},m(c,h){z(c,t,h),z(c,n,h),l&&l.m(c,h),z(c,r,h),u&&u.m(c,h),z(c,s,h),o=!0},p(c,h){c[0]?l&&(Sn(),J(l,1,1,()=>{l=null}),Cn()):l?(l.p(c,h),h&1&&Q(l,1)):(l=fh(c),l.c(),Q(l,1),l.m(r.parentNode,r)),c[0]?u?(u.p(c,h),h&1&&Q(u,1)):(u=dh(c),u.c(),Q(u,1),u.m(s.parentNode,s)):u&&(Sn(),J(u,1,1,()=>{u=null}),Cn())},i(c){o||(Q(l),Q(u),o=!0)},o(c){J(l),J(u),o=!1},d(c){c&&(M(t),M(n),M(r),M(s)),l&&l.d(c),u&&u.d(c)}}}function _T(i){let t,e;return t=new ii({props:{class:"gap-y-4 lg:w-[540px] items-center",$$slots:{default:[dT]},$$scope:{ctx:i}}}),{c(){pt(t.$$.fragment)},l(n){gt(t.$$.fragment,n)},m(n,r){yt(t,n,r),e=!0},p(n,[r]){const s={};r&65&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(Q(t.$$.fragment,n),e=!0)},o(n){J(t.$$.fragment,n),e=!1},d(n){vt(t,n)}}}function mT(i,t,e){let n=!1;return[n,async()=>{const c=es(Rn,"stakeholders"),h=await tu(c);let d=[];const m=h.docs[0].data().values.length;for(let g=0;g<m;g++)d.push(0);for(const g of h.docs)await n_(g.ref,{values:d});alert("Alle sliders zijn gereset!")},()=>un.set(1),()=>e(0,n=!n),()=>un.set(5),()=>e(0,n=!n)]}class pT extends Qe{constructor(t){super(),Xe(this,t,mT,_T,Le,{})}}const _h=br([]);function mh(i,t,e){const n=i.slice();return n[15]=t[e],n[17]=e,n}function ph(i){let t,e;return t=new ii({props:{class:"lg:w-4/5",$$slots:{default:[vT]},$$scope:{ctx:i}}}),{c(){pt(t.$$.fragment)},l(n){gt(t.$$.fragment,n)},m(n,r){yt(t,n,r),e=!0},p(n,r){const s={};r&262271&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(Q(t.$$.fragment,n),e=!0)},o(n){J(t.$$.fragment,n),e=!1},d(n){vt(t,n)}}}function gh(i){let t,e,n=i[15].naam.charAt(0).toUpperCase()+i[15].naam.slice(1)+"",r,s,o,l,u,c,h,d=$i(i[2].values[i[17]],i[15])+"",m,g,v,p=Gs(i[2].values[i[17]],i[15]).toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"",E,b,S,C=Hs(i[2].values[i[17]],i[15])+"",D,V,O;function w(...y){return i[11](i[17],...y)}return{c(){t=B("tr"),e=B("td"),r=Z(n),s=K(),o=B("td"),l=B("input"),c=K(),h=B("td"),m=Z(d),g=K(),v=B("td"),E=Z(p),b=K(),S=B("td"),D=Z(C),this.h()},l(y){t=U(y,"TR",{});var T=H(t);e=U(T,"TD",{class:!0});var R=H(e);r=tt(R,n),R.forEach(M),s=W(T),o=U(T,"TD",{class:!0});var P=H(o);l=U(P,"INPUT",{type:!0,min:!0,max:!0,class:!0}),P.forEach(M),c=W(T),h=U(T,"TD",{class:!0});var k=H(h);m=tt(k,d),k.forEach(M),g=W(T),v=U(T,"TD",{class:!0});var A=H(v);E=tt(A,p),A.forEach(M),b=W(T),S=U(T,"TD",{});var it=H(S);D=tt(it,C),it.forEach(M),T.forEach(M),this.h()},h(){G(e,"class","pr-4"),G(l,"type","range"),l.value=u=i[2].values[i[17]],G(l,"min","0"),G(l,"max","10"),G(l,"class","slider accent-blue-500 align-middle appearance-none w-full cursor-pointer h-1 bg-red-500"),G(o,"class","pr-4"),G(h,"class","pr-4"),G(v,"class","pr-4")},m(y,T){z(y,t,T),F(t,e),F(e,r),F(t,s),F(t,o),F(o,l),F(t,c),F(t,h),F(h,m),F(t,g),F(t,v),F(v,E),F(t,b),F(t,S),F(S,D),V||(O=mo(l,"input",w),V=!0)},p(y,T){i=y,T&8&&n!==(n=i[15].naam.charAt(0).toUpperCase()+i[15].naam.slice(1)+"")&&Bt(r,n),T&4&&u!==(u=i[2].values[i[17]])&&(l.value=u),T&12&&d!==(d=$i(i[2].values[i[17]],i[15])+"")&&Bt(m,d),T&12&&p!==(p=Gs(i[2].values[i[17]],i[15]).toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"")&&Bt(E,p),T&12&&C!==(C=Hs(i[2].values[i[17]],i[15])+"")&&Bt(D,C)},d(y){y&&M(t),V=!1,O()}}}function gT(i){let t;return{c(){t=Z("Terug")},l(e){t=tt(e,"Terug")},m(e,n){z(e,t,n)},d(e){e&&M(t)}}}function yT(i){let t;return{c(){t=Z("Klaar")},l(e){t=tt(e,"Klaar")},m(e,n){z(e,t,n)},d(e){e&&M(t)}}}function vT(i){let t,e,n=i[2].id+"",r,s,o,l=Dn.stakeholder_beschrijving+"",u,c,h,d,m='<tr><th class="pr-4">Maatregel</th> <th class="pr-4">Schaal</th> <th class="pr-4">Geholpen mensen</th> <th class="pr-4">Kosten</th> <th>Vrijwilligers</th></tr>',g,v,p,E,b,S="Totaal",C,D,V,O,w,y,T,R=i[0].toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"",P,k,A,it,ct,at,ut,At,Ht,xt,q,bt=i[5].toFixed(0)+"",ht,Ft,Ot,Et,et=i[4].toFixed(0)+"",Rt,fe,zt,Pt,Ce,ne,de,Ye,be,Kt,Je=yn(i[3]),Qt=[];for(let nt=0;nt<Je.length;nt+=1)Qt[nt]=gh(mh(i,Je,nt));return de=new ce({props:{theme:"red",$$slots:{default:[gT]},$$scope:{ctx:i}}}),de.$on("click",i[12]),be=new ce({props:{$$slots:{default:[yT]},$$scope:{ctx:i}}}),be.$on("click",i[13]),{c(){t=B("div"),e=Z("Team "),r=Z(n),s=K(),o=B("p"),u=Z(l),c=K(),h=B("table"),d=B("thead"),d.innerHTML=m,g=K(),v=B("tbody");for(let nt=0;nt<Qt.length;nt+=1)Qt[nt].c();p=K(),E=B("tr"),b=B("td"),b.textContent=S,C=K(),D=B("td"),V=K(),O=B("td"),w=Z(i[1]),y=K(),T=B("td"),P=Z(R),k=K(),A=B("td"),it=Z(i[6]),ct=K(),at=B("tr"),ut=B("td"),At=K(),Ht=B("td"),xt=K(),q=B("td"),ht=Z(bt),Ft=Z("% van het doel"),Ot=K(),Et=B("td"),Rt=Z(et),fe=Z("% van het budget"),zt=K(),Pt=B("td"),Ce=K(),ne=B("div"),pt(de.$$.fragment),Ye=K(),pt(be.$$.fragment),this.h()},l(nt){t=U(nt,"DIV",{class:!0});var wt=H(t);e=tt(wt,"Team "),r=tt(wt,n),wt.forEach(M),s=W(nt),o=U(nt,"P",{class:!0});var Ze=H(o);u=tt(Ze,l),Ze.forEach(M),c=W(nt),h=U(nt,"TABLE",{class:!0});var an=H(h);d=U(an,"THEAD",{"data-svelte-h":!0}),nn(d)!=="svelte-18lvh91"&&(d.innerHTML=m),g=W(an),v=U(an,"TBODY",{});var Lt=H(v);for(let Dr=0;Dr<Qt.length;Dr+=1)Qt[Dr].l(Lt);p=W(Lt),E=U(Lt,"TR",{class:!0});var _e=H(E);b=U(_e,"TD",{class:!0,"data-svelte-h":!0}),nn(b)!=="svelte-tvdvct"&&(b.textContent=S),C=W(_e),D=U(_e,"TD",{class:!0}),H(D).forEach(M),V=W(_e),O=U(_e,"TD",{class:!0});var Zt=H(O);w=tt(Zt,i[1]),Zt.forEach(M),y=W(_e),T=U(_e,"TD",{class:!0});var re=H(T);P=tt(re,R),re.forEach(M),k=W(_e),A=U(_e,"TD",{});var er=H(A);it=tt(er,i[6]),er.forEach(M),_e.forEach(M),ct=W(Lt),at=U(Lt,"TR",{});var $e=H(at);ut=U($e,"TD",{class:!0}),H(ut).forEach(M),At=W($e),Ht=U($e,"TD",{class:!0}),H(Ht).forEach(M),xt=W($e),q=U($e,"TD",{class:!0});var Cr=H(q);ht=tt(Cr,bt),Ft=tt(Cr,"% van het doel"),Cr.forEach(M),Ot=W($e),Et=U($e,"TD",{class:!0});var ui=H(Et);Rt=tt(ui,et),fe=tt(ui,"% van het budget"),ui.forEach(M),zt=W($e),Pt=U($e,"TD",{}),H(Pt).forEach(M),$e.forEach(M),Lt.forEach(M),an.forEach(M),Ce=W(nt),ne=U(nt,"DIV",{class:!0});var hn=H(ne);gt(de.$$.fragment,hn),Ye=W(hn),gt(be.$$.fragment,hn),hn.forEach(M),this.h()},h(){G(t,"class","font-bold text-2xl"),G(o,"class","mb-6"),G(b,"class","pr-4"),G(D,"class","pr-4"),G(O,"class","pr-4"),G(T,"class","pr-4"),G(E,"class","font-bold border-t-2 border-black"),G(ut,"class","pr-4"),G(Ht,"class","pr-4"),G(q,"class","pr-4"),ye(q,"bg-red-300",i[5]<100),ye(q,"bg-green-300",i[5]>=100),G(Et,"class","pr-4"),ye(Et,"bg-red-300",i[4]>100),ye(Et,"bg-green-300",i[4]<=100),G(h,"class","text-left mb-2"),G(ne,"class","flex gap-x-2")},m(nt,wt){z(nt,t,wt),F(t,e),F(t,r),z(nt,s,wt),z(nt,o,wt),F(o,u),z(nt,c,wt),z(nt,h,wt),F(h,d),F(h,g),F(h,v);for(let Ze=0;Ze<Qt.length;Ze+=1)Qt[Ze]&&Qt[Ze].m(v,null);F(v,p),F(v,E),F(E,b),F(E,C),F(E,D),F(E,V),F(E,O),F(O,w),F(E,y),F(E,T),F(T,P),F(E,k),F(E,A),F(A,it),F(v,ct),F(v,at),F(at,ut),F(at,At),F(at,Ht),F(at,xt),F(at,q),F(q,ht),F(q,Ft),F(at,Ot),F(at,Et),F(Et,Rt),F(Et,fe),F(at,zt),F(at,Pt),z(nt,Ce,wt),z(nt,ne,wt),yt(de,ne,null),F(ne,Ye),yt(be,ne,null),Kt=!0},p(nt,wt){if((!Kt||wt&4)&&n!==(n=nt[2].id+"")&&Bt(r,n),wt&140){Je=yn(nt[3]);let Lt;for(Lt=0;Lt<Je.length;Lt+=1){const _e=mh(nt,Je,Lt);Qt[Lt]?Qt[Lt].p(_e,wt):(Qt[Lt]=gh(_e),Qt[Lt].c(),Qt[Lt].m(v,p))}for(;Lt<Qt.length;Lt+=1)Qt[Lt].d(1);Qt.length=Je.length}(!Kt||wt&2)&&Bt(w,nt[1]),(!Kt||wt&1)&&R!==(R=nt[0].toLocaleString("nl-NL",{style:"currency",currency:"EUR",minimumFractionDigits:0,maximumFractionDigits:0})+"")&&Bt(P,R),(!Kt||wt&64)&&Bt(it,nt[6]),(!Kt||wt&32)&&bt!==(bt=nt[5].toFixed(0)+"")&&Bt(ht,bt),(!Kt||wt&32)&&ye(q,"bg-red-300",nt[5]<100),(!Kt||wt&32)&&ye(q,"bg-green-300",nt[5]>=100),(!Kt||wt&16)&&et!==(et=nt[4].toFixed(0)+"")&&Bt(Rt,et),(!Kt||wt&16)&&ye(Et,"bg-red-300",nt[4]>100),(!Kt||wt&16)&&ye(Et,"bg-green-300",nt[4]<=100);const Ze={};wt&262144&&(Ze.$$scope={dirty:wt,ctx:nt}),de.$set(Ze);const an={};wt&262144&&(an.$$scope={dirty:wt,ctx:nt}),be.$set(an)},i(nt){Kt||(Q(de.$$.fragment,nt),Q(be.$$.fragment,nt),Kt=!0)},o(nt){J(de.$$.fragment,nt),J(be.$$.fragment,nt),Kt=!1},d(nt){nt&&(M(t),M(s),M(o),M(c),M(h),M(Ce),M(ne)),os(Qt,nt),vt(de),vt(be)}}}function TT(i){let t,e,n=i[2]&&ph(i);return{c(){n&&n.c(),t=Ne()},l(r){n&&n.l(r),t=Ne()},m(r,s){n&&n.m(r,s),z(r,t,s),e=!0},p(r,[s]){r[2]?n?(n.p(r,s),s&4&&Q(n,1)):(n=ph(r),n.c(),Q(n,1),n.m(t.parentNode,t)):n&&(Sn(),J(n,1,1,()=>{n=null}),Cn())},i(r){e||(Q(n),e=!0)},o(r){J(n),e=!1},d(r){r&&M(t),n&&n.d(r)}}}function ET(i,t,e){let n,r,s,o,l,u,c,h,d,m;ke(i,_h,S=>e(8,c=S)),ke(i,Ks,S=>e(3,h=S)),ke(i,tl,S=>e(9,d=S)),ke(i,yr,S=>e(10,m=S)),_o(()=>{const S=es(Rn,"maatregelen"),C=es(Rn,"doelen");Za(S,D=>{Ks.set(D.docs.map(V=>({id:V.id,...V.data()})))}),Za(C,D=>{_h.set(D.docs.map(V=>({doel:Number(V.data().doel),budget:Number(V.data().budget),...V.data()})))})});const g=(S,C)=>{const D=S.target;e(2,n.values[C]=D.valueAsNumber,n),v()},v=async()=>{try{const S=n.id,C=Ya(Rn,"stakeholders",S);(await eT(C)).exists()?await n_(C,{values:n.values}):await nT(C,{values:n.values}),console.log("Document successfully updated!")}catch(S){console.error("Error updating document: ",S)}},p=(S,C)=>g(C,S),E=()=>{un.set(2)},b=()=>{un.set(4)};return i.$$.update=()=>{var S,C;i.$$.dirty&1536&&e(2,n=m.find(D=>D.id===(d==null?void 0:d.id))),i.$$.dirty&12&&e(1,r=h.reduce((D,V,O)=>{var w;return D+$i(((w=n==null?void 0:n.values)==null?void 0:w[O])??0,V)},0)),i.$$.dirty&12&&e(0,s=h.reduce((D,V,O)=>{var w;return D+Gs(((w=n==null?void 0:n.values)==null?void 0:w[O])??0,V)},0)),i.$$.dirty&12&&e(6,o=h.reduce((D,V,O)=>{var w;return D+Hs(((w=n==null?void 0:n.values)==null?void 0:w[O])??0,V)},0)),i.$$.dirty&258&&e(5,l=r/((S=c[0])==null?void 0:S.doel)*100),i.$$.dirty&257&&e(4,u=s/((C=c[0])==null?void 0:C.budget)*100)},[s,r,n,h,u,l,o,g,c,d,m,p,E,b]}class wT extends Qe{constructor(t){super(),Xe(this,t,ET,TT,Le,{})}}function yh(i){let t,e;return t=new ii({props:{class:"lg:w-[540px]",$$slots:{default:[bT]},$$scope:{ctx:i}}}),{c(){pt(t.$$.fragment)},l(n){gt(t.$$.fragment,n)},m(n,r){yt(t,n,r),e=!0},p(n,r){const s={};r&9&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(Q(t.$$.fragment,n),e=!0)},o(n){J(t.$$.fragment,n),e=!1},d(n){vt(t,n)}}}function IT(i){let t;return{c(){t=Z("Terug")},l(e){t=tt(e,"Terug")},m(e,n){z(e,t,n)},d(e){e&&M(t)}}}function AT(i){let t;return{c(){t=Z("Volgende")},l(e){t=tt(e,"Volgende")},m(e,n){z(e,t,n)},d(e){e&&M(t)}}}function bT(i){let t,e=i[0].id+"",n,r,s,o=i[0].description+"",l,u,c,h,d,m,g;return h=new ce({props:{theme:"red",$$slots:{default:[IT]},$$scope:{ctx:i}}}),h.$on("click",i[1]),m=new ce({props:{$$slots:{default:[AT]},$$scope:{ctx:i}}}),m.$on("click",i[2]),{c(){t=B("h2"),n=Z(e),r=K(),s=B("p"),l=Z(o),u=K(),c=B("div"),pt(h.$$.fragment),d=K(),pt(m.$$.fragment),this.h()},l(v){t=U(v,"H2",{class:!0});var p=H(t);n=tt(p,e),p.forEach(M),r=W(v),s=U(v,"P",{class:!0});var E=H(s);l=tt(E,o),E.forEach(M),u=W(v),c=U(v,"DIV",{class:!0});var b=H(c);gt(h.$$.fragment,b),d=W(b),gt(m.$$.fragment,b),b.forEach(M),this.h()},h(){G(t,"class","font-bold text-xl mb-2"),G(s,"class","mb-4"),G(c,"class","flex gap-x-2")},m(v,p){z(v,t,p),F(t,n),z(v,r,p),z(v,s,p),F(s,l),z(v,u,p),z(v,c,p),yt(h,c,null),F(c,d),yt(m,c,null),g=!0},p(v,p){(!g||p&1)&&e!==(e=v[0].id+"")&&Bt(n,e),(!g||p&1)&&o!==(o=v[0].description+"")&&Bt(l,o);const E={};p&8&&(E.$$scope={dirty:p,ctx:v}),h.$set(E);const b={};p&8&&(b.$$scope={dirty:p,ctx:v}),m.$set(b)},i(v){g||(Q(h.$$.fragment,v),Q(m.$$.fragment,v),g=!0)},o(v){J(h.$$.fragment,v),J(m.$$.fragment,v),g=!1},d(v){v&&(M(t),M(r),M(s),M(u),M(c)),vt(h),vt(m)}}}function RT(i){let t,e,n=i[0]&&yh(i);return{c(){n&&n.c(),t=Ne()},l(r){n&&n.l(r),t=Ne()},m(r,s){n&&n.m(r,s),z(r,t,s),e=!0},p(r,[s]){r[0]?n?(n.p(r,s),s&1&&Q(n,1)):(n=yh(r),n.c(),Q(n,1),n.m(t.parentNode,t)):n&&(Sn(),J(n,1,1,()=>{n=null}),Cn())},i(r){e||(Q(n),e=!0)},o(r){J(n),e=!1},d(r){r&&M(t),n&&n.d(r)}}}function PT(i,t,e){let n;return ke(i,tl,o=>e(0,n=o)),[n,()=>{un.set(1)},()=>{un.set(3)}]}class ST extends Qe{constructor(t){super(),Xe(this,t,PT,RT,Le,{})}}function CT(i){let t,e='<svg aria-hidden="true" class="w-8 h-8 text-blue-500 animate-spin fill-white" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z" fill="currentColor"></path><path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z" fill="currentFill"></path></svg> <span class="sr-only">Loading...</span>';return{c(){t=B("div"),t.innerHTML=e,this.h()},l(n){t=U(n,"DIV",{role:!0,"data-svelte-h":!0}),nn(t)!=="svelte-108fe9f"&&(t.innerHTML=e),this.h()},h(){G(t,"role","status")},m(n,r){z(n,t,r)},p:fr,i:fr,o:fr,d(n){n&&M(t)}}}class DT extends Qe{constructor(t){super(),Xe(this,t,null,CT,Le,{})}}function vh(i,t,e){const n=i.slice();return n[5]=t[e],n}function kT(i){let t,e;return t=new DT({}),{c(){pt(t.$$.fragment)},l(n){gt(t.$$.fragment,n)},m(n,r){yt(t,n,r),e=!0},i(n){e||(Q(t.$$.fragment,n),e=!0)},o(n){J(t.$$.fragment,n),e=!1},d(n){vt(t,n)}}}function VT(i){let t,e="Er is iets misgegaan bij het ophalen van de data.";return{c(){t=B("p"),t.textContent=e,this.h()},l(n){t=U(n,"P",{class:!0,"data-svelte-h":!0}),nn(t)!=="svelte-11wisfj"&&(t.textContent=e),this.h()},h(){G(t,"class","text-red-500")},m(n,r){z(n,t,r)},i:fr,o:fr,d(n){n&&M(t)}}}function xT(i){let t=i[5].id+"",e,n;return{c(){e=Z(t),n=K()},l(r){e=tt(r,t),n=W(r)},m(r,s){z(r,e,s),z(r,n,s)},p(r,s){s&2&&t!==(t=r[5].id+"")&&Bt(e,t)},d(r){r&&(M(e),M(n))}}}function Th(i){let t,e;function n(){return i[3](i[5])}return t=new ce({props:{$$slots:{default:[xT]},$$scope:{ctx:i}}}),t.$on("click",n),{c(){pt(t.$$.fragment)},l(r){gt(t.$$.fragment,r)},m(r,s){yt(t,r,s),e=!0},p(r,s){i=r;const o={};s&258&&(o.$$scope={dirty:s,ctx:i}),t.$set(o)},i(r){e||(Q(t.$$.fragment,r),e=!0)},o(r){J(t.$$.fragment,r),e=!1},d(r){vt(t,r)}}}function OT(i){let t;return{c(){t=Z("Terug")},l(e){t=tt(e,"Terug")},m(e,n){z(e,t,n)},d(e){e&&M(t)}}}function MT(i){let t,e=Dn.keuze_titel+"",n,r,s,o=Dn.keuze_beschrijving+"",l,u,c,h,d,m,g,v,p,E;const b=[VT,kT],S=[];function C(w,y){return w[0]?0:w[1].length===0?1:-1}~(h=C(i))&&(d=S[h]=b[h](i));let D=yn(i[1]),V=[];for(let w=0;w<D.length;w+=1)V[w]=Th(vh(i,D,w));const O=w=>J(V[w],1,1,()=>{V[w]=null});return p=new ce({props:{theme:"red",$$slots:{default:[OT]},$$scope:{ctx:i}}}),p.$on("click",i[4]),{c(){t=B("div"),n=Z(e),r=K(),s=B("p"),l=Z(o),u=K(),c=B("div"),d&&d.c(),m=K();for(let w=0;w<V.length;w+=1)V[w].c();g=K(),v=B("div"),pt(p.$$.fragment),this.h()},l(w){t=U(w,"DIV",{class:!0});var y=H(t);n=tt(y,e),y.forEach(M),r=W(w),s=U(w,"P",{class:!0});var T=H(s);l=tt(T,o),T.forEach(M),u=W(w),c=U(w,"DIV",{class:!0});var R=H(c);d&&d.l(R),m=W(R);for(let k=0;k<V.length;k+=1)V[k].l(R);R.forEach(M),g=W(w),v=U(w,"DIV",{});var P=H(v);gt(p.$$.fragment,P),P.forEach(M),this.h()},h(){G(t,"class","font-bold text-xl"),G(s,"class","mb-6"),G(c,"class","flex gap-x-2 mb-2")},m(w,y){z(w,t,y),F(t,n),z(w,r,y),z(w,s,y),F(s,l),z(w,u,y),z(w,c,y),~h&&S[h].m(c,null),F(c,m);for(let T=0;T<V.length;T+=1)V[T]&&V[T].m(c,null);z(w,g,y),z(w,v,y),yt(p,v,null),E=!0},p(w,y){let T=h;if(h=C(w),h!==T&&(d&&(Sn(),J(S[T],1,1,()=>{S[T]=null}),Cn()),~h?(d=S[h],d||(d=S[h]=b[h](w),d.c()),Q(d,1),d.m(c,m)):d=null),y&2){D=yn(w[1]);let P;for(P=0;P<D.length;P+=1){const k=vh(w,D,P);V[P]?(V[P].p(k,y),Q(V[P],1)):(V[P]=Th(k),V[P].c(),Q(V[P],1),V[P].m(c,null))}for(Sn(),P=D.length;P<V.length;P+=1)O(P);Cn()}const R={};y&256&&(R.$$scope={dirty:y,ctx:w}),p.$set(R)},i(w){if(!E){Q(d);for(let y=0;y<D.length;y+=1)Q(V[y]);Q(p.$$.fragment,w),E=!0}},o(w){J(d),V=V.filter(Boolean);for(let y=0;y<V.length;y+=1)J(V[y]);J(p.$$.fragment,w),E=!1},d(w){w&&(M(t),M(r),M(s),M(u),M(c),M(g),M(v)),~h&&S[h].d(),os(V,w),vt(p)}}}function NT(i){let t,e;return t=new ii({props:{$$slots:{default:[MT]},$$scope:{ctx:i}}}),{c(){pt(t.$$.fragment)},l(n){gt(t.$$.fragment,n)},m(n,r){yt(t,n,r),e=!0},p(n,[r]){const s={};r&259&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(Q(t.$$.fragment,n),e=!0)},o(n){J(t.$$.fragment,n),e=!1},d(n){vt(t,n)}}}const FT=5e3;function LT(i,t,e){let n,r;ke(i,yr,u=>e(1,r=u));const s=br(!1);return ke(i,s,u=>e(0,n=u)),_o(()=>{const u=setTimeout(()=>{s.set(!0)},FT),c=yr.subscribe(h=>{h.length>0&&clearTimeout(u)});return()=>{clearTimeout(u),c()}}),[n,r,s,u=>{tl.set(u),un.set(2)},()=>{un.set(0)}]}class $T extends Qe{constructor(t){super(),Xe(this,t,LT,NT,Le,{})}}function Eh(i){let t,e="Geselecteerd Bestand:",n,r,s=i[0].name+"",o;return{c(){t=B("p"),t.textContent=e,n=K(),r=B("pre"),o=Z(s),this.h()},l(l){t=U(l,"P",{class:!0,"data-svelte-h":!0}),nn(t)!=="svelte-zs65m6"&&(t.textContent=e),n=W(l),r=U(l,"PRE",{class:!0});var u=H(r);o=tt(u,s),u.forEach(M),this.h()},h(){G(t,"class","font-bold text-center"),G(r,"class","text-center")},m(l,u){z(l,t,u),z(l,n,u),z(l,r,u),F(r,o)},p(l,u){u&1&&s!==(s=l[0].name+"")&&Bt(o,s)},d(l){l&&(M(t),M(n),M(r))}}}function BT(i){let t;return{c(){t=Z("Upload")},l(e){t=tt(e,"Upload")},m(e,n){z(e,t,n)},d(e){e&&M(t)}}}function UT(i){let t;return{c(){t=Z("Terug")},l(e){t=tt(e,"Terug")},m(e,n){z(e,t,n)},d(e){e&&M(t)}}}function jT(i){let t,e,n,r="Selecteer een bestand",s,o,l,u,c,h,d,m,g=i[0]&&Eh(i);return l=new ce({props:{class:"my-2",$$slots:{default:[BT]},$$scope:{ctx:i}}}),l.$on("click",i[3]),c=new ce({props:{theme:"red",class:"my-2",$$slots:{default:[UT]},$$scope:{ctx:i}}}),c.$on("click",i[5]),{c(){t=B("input"),e=K(),n=B("label"),n.textContent=r,s=K(),g&&g.c(),o=K(),pt(l.$$.fragment),u=K(),pt(c.$$.fragment),this.h()},l(v){t=U(v,"INPUT",{id:!0,class:!0,type:!0,accept:!0}),e=W(v),n=U(v,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),nn(n)!=="svelte-1b0h7i7"&&(n.textContent=r),s=W(v),g&&g.l(v),o=W(v),gt(l.$$.fragment,v),u=W(v),gt(c.$$.fragment,v),this.h()},h(){G(t,"id","file-upload"),G(t,"class","hidden"),G(t,"type","file"),G(t,"accept","text/csv"),G(n,"for","file-upload"),G(n,"class","my-2 bg-blue-500 text-white px-5 rounded-md py-3 cursor-pointer")},m(v,p){z(v,t,p),i[4](t),z(v,e,p),z(v,n,p),z(v,s,p),g&&g.m(v,p),z(v,o,p),yt(l,v,p),z(v,u,p),yt(c,v,p),h=!0,d||(m=mo(t,"change",i[2]),d=!0)},p(v,p){v[0]?g?g.p(v,p):(g=Eh(v),g.c(),g.m(o.parentNode,o)):g&&(g.d(1),g=null);const E={};p&2048&&(E.$$scope={dirty:p,ctx:v}),l.$set(E);const b={};p&2048&&(b.$$scope={dirty:p,ctx:v}),c.$set(b)},i(v){h||(Q(l.$$.fragment,v),Q(c.$$.fragment,v),h=!0)},o(v){J(l.$$.fragment,v),J(c.$$.fragment,v),h=!1},d(v){v&&(M(t),M(e),M(n),M(s),M(o),M(u)),i[4](null),g&&g.d(v),vt(l,v),vt(c,v),d=!1,m()}}}function zT(i){let t,e;return t=new ii({props:{$$slots:{default:[jT]},$$scope:{ctx:i}}}),{c(){pt(t.$$.fragment)},l(n){gt(t.$$.fragment,n)},m(n,r){yt(t,n,r),e=!0},p(n,[r]){const s={};r&2051&&(s.$$scope={dirty:r,ctx:n}),t.$set(s)},i(n){e||(Q(t.$$.fragment,n),e=!0)},o(n){J(t.$$.fragment,n),e=!1},d(n){vt(t,n)}}}function qT(i,t,e){let n=null,r,s=[],o=null,l=null;function u(v){var D,V;const p=v.target,E=(D=p.files)==null?void 0:D[0];if(!E)return;const b=(V=E.name.split(".").pop())==null?void 0:V.toLowerCase(),S=E.type;if(!["text/csv","application/vnd.ms-excel"].includes(S)||b!=="csv"){alert("Ongeldig of niet-ondersteund bestandstype. Upload een CSV-bestand."),p.value="";return}e(0,n=E)}function c(){if(!n){alert("Selecteer een bestand.");return}h(),alert("Upload successvol."),e(1,r.value="",r),e(0,n=null)}function h(){const v=new FileReader;v.onload=function(p){var E;try{const S=((E=p.target)==null?void 0:E.result).split("\r").filter(O=>O.trim()!=="");if(S.length<2){alert("CSV bevat geen data.");return}const C=S[0].split(";"),D=C.indexOf("naam"),V=C.indexOf("maximaal");if(D===-1||V===-1){alert("CSV-bestand bevat niet de vereiste headers.");return}s=[],o=null,l=null;for(let O=1;O<S.length;O++){const w=S[O].split(";").map(y=>y.trim().replace("/r",""));if(w[D])if(w[D].includes("budget"))o={maximaal:w[V]};else if(w[D].includes("doel"))l={maximaal:w[V]};else{const y={};for(let T=0;T<C.length;T++)y[C[T]]=w[T];s.push(y)}}}catch(b){alert("Er is een fout opgetreden tijdens het verwerken van het bestand."),console.error(b)}},v.onerror=function(){alert("Er is een fout opgetreden tijdens het lezen van het bestand.")},v.onloadend=function(){d()},n&&v.readAsText(n)}const d=async()=>{try{const v=s.map(S=>S.id),p=await tu(es(Rn,"maatregelen")),E=iT(Rn);p.docs.forEach(S=>{v.includes(S.id)||E.delete(S.ref)}),s.forEach(S=>{const C=Ya(Rn,"maatregelen",S.id);E.set(C,S,{merge:!0})});const b=Ya(Rn,"doelen","taalgroeiers");o&&E.set(b,{budget:o.maximaal},{merge:!0}),l&&E.set(b,{doel:l.maximaal},{merge:!0}),await E.commit(),console.log("Firestore updated successfully.")}catch(v){alert("Er is een fout opgetreden bij het opslaan van het bestand in Firestore."),console.error(v)}};function m(v){Li[v?"unshift":"push"](()=>{r=v,e(1,r)})}return[n,r,u,c,m,()=>un.set(0)]}class GT extends Qe{constructor(t){super(),Xe(this,t,qT,zT,Le,{})}}function HT(i){let t,e,n,r,s,o,l,u,c,h,d,m,g,v,p,E,b,S,C;return n=new pT({}),o=new $T({}),c=new ST({}),m=new wT({}),p=new Sp({}),S=new GT({}),{c(){t=B("div"),e=B("div"),pt(n.$$.fragment),r=K(),s=B("div"),pt(o.$$.fragment),l=K(),u=B("div"),pt(c.$$.fragment),h=K(),d=B("div"),pt(m.$$.fragment),g=K(),v=B("div"),pt(p.$$.fragment),E=K(),b=B("div"),pt(S.$$.fragment),this.h()},l(D){t=U(D,"DIV",{class:!0});var V=H(t);e=U(V,"DIV",{class:!0});var O=H(e);gt(n.$$.fragment,O),O.forEach(M),r=W(V),s=U(V,"DIV",{class:!0});var w=H(s);gt(o.$$.fragment,w),w.forEach(M),l=W(V),u=U(V,"DIV",{class:!0});var y=H(u);gt(c.$$.fragment,y),y.forEach(M),h=W(V),d=U(V,"DIV",{class:!0});var T=H(d);gt(m.$$.fragment,T),T.forEach(M),g=W(V),v=U(V,"DIV",{class:!0});var R=H(v);gt(p.$$.fragment,R),R.forEach(M),E=W(V),b=U(V,"DIV",{class:!0});var P=H(b);gt(S.$$.fragment,P),P.forEach(M),V.forEach(M),this.h()},h(){G(e,"class","h-screen flex justify-center items-center w-screen"),G(s,"class","h-screen flex justify-center items-center w-screen"),G(u,"class","h-screen flex justify-center items-center w-screen"),G(d,"class","h-screen flex justify-center items-center w-screen"),G(v,"class","h-screen flex justify-center items-center w-screen"),G(b,"class","h-screen flex justify-center items-center w-screen"),G(t,"class","module-page flex svelte-r0zrw9")},m(D,V){z(D,t,V),F(t,e),yt(n,e,null),F(t,r),F(t,s),yt(o,s,null),F(t,l),F(t,u),yt(c,u,null),F(t,h),F(t,d),yt(m,d,null),F(t,g),F(t,v),yt(p,v,null),F(t,E),F(t,b),yt(S,b,null),i[2](t),C=!0},p:fr,i(D){C||(Q(n.$$.fragment,D),Q(o.$$.fragment,D),Q(c.$$.fragment,D),Q(m.$$.fragment,D),Q(p.$$.fragment,D),Q(S.$$.fragment,D),C=!0)},o(D){J(n.$$.fragment,D),J(o.$$.fragment,D),J(c.$$.fragment,D),J(m.$$.fragment,D),J(p.$$.fragment,D),J(S.$$.fragment,D),C=!1},d(D){D&&M(t),vt(n),vt(o),vt(c),vt(m),vt(p),vt(S),i[2](null)}}}function KT(i,t,e){let n;ke(i,un,h=>e(1,n=h));const r=es(Rn,"stakeholders");let s;const o=h=>{const d=-100/s.children.length*h;vo.to(s,{xPercent:d,duration:1,ease:"power2.inOut"})},l=async()=>{try{const d=(await tu(r)).docs.map(m=>({id:m.id,values:m.data().values,description:m.data().description}));yr.set(d)}catch(h){console.error("Error fetching document: ",h)}},u=()=>Za(r,h=>{const d=h.docs.map(m=>({id:m.id,values:m.data().values,description:m.data().description}));yr.set(d)},h=>{console.log(`Encountered error: ${h}`)});_o(()=>{l(),u()});function c(h){Li[h?"unshift":"push"](()=>{s=h,e(0,s)})}return i.$$.update=()=>{i.$$.dirty&3&&s&&o(n)},[s,n,c]}class t1 extends Qe{constructor(t){super(),Xe(this,t,KT,HT,Le,{})}}export{t1 as component};
